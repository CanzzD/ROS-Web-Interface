{"ast":null,"code":"var createjs = this.createjs = this.createjs || {};\n/*!\n* CreateJS\n* Visit http://createjs.com/ for documentation, updates and examples.\n*\n* Copyright (c) 2010 gskinner.com, inc.\n*\n* Permission is hereby granted, free of charge, to any person\n* obtaining a copy of this software and associated documentation\n* files (the \"Software\"), to deal in the Software without\n* restriction, including without limitation the rights to use,\n* copy, modify, merge, publish, distribute, sublicense, and/or sell\n* copies of the Software, and to permit persons to whom the\n* Software is furnished to do so, subject to the following\n* conditions:\n*\n* The above copyright notice and this permission notice shall be\n* included in all copies or substantial portions of the Software.\n*\n* THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n* EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\n* OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n* NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n* HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\n* WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n* FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\n* OTHER DEALINGS IN THE SOFTWARE.\n*/\n\nthis.createjs = this.createjs || {};\n\n//##############################################################################\n// extend.js\n//##############################################################################\n\n/**\n * @class Utility Methods\n */\n\n/**\n * Sets up the prototype chain and constructor property for a new class.\n *\n * This should be called right after creating the class constructor.\n *\n * \tfunction MySubClass() {}\n * \tcreatejs.extend(MySubClass, MySuperClass);\n * \tMySubClass.prototype.doSomething = function() { }\n *\n * \tvar foo = new MySubClass();\n * \tconsole.log(foo instanceof MySuperClass); // true\n * \tconsole.log(foo.prototype.constructor === MySubClass); // true\n *\n * @method extend\n * @param {Function} subclass The subclass.\n * @param {Function} superclass The superclass to extend.\n * @return {Function} Returns the subclass's new prototype.\n */\ncreatejs.extend = function (subclass, superclass) {\n  \"use strict\";\n\n  function o() {\n    this.constructor = subclass;\n  }\n  o.prototype = superclass.prototype;\n  return subclass.prototype = new o();\n};\n\n//##############################################################################\n// promote.js\n//##############################################################################\n\n/**\n * @class Utility Methods\n */\n\n/**\n * Promotes any methods on the super class that were overridden, by creating an alias in the format `prefix_methodName`.\n * It is recommended to use the super class's name as the prefix.\n * An alias to the super class's constructor is always added in the format `prefix_constructor`.\n * This allows the subclass to call super class methods without using `function.call`, providing better performance.\n *\n * For example, if `MySubClass` extends `MySuperClass`, and both define a `draw` method, then calling `promote(MySubClass, \"MySuperClass\")`\n * would add a `MySuperClass_constructor` method to MySubClass and promote the `draw` method on `MySuperClass` to the\n * prototype of `MySubClass` as `MySuperClass_draw`.\n *\n * This should be called after the class's prototype is fully defined.\n *\n * \tfunction ClassA(name) {\n * \t\tthis.name = name;\n * \t}\n * \tClassA.prototype.greet = function() {\n * \t\treturn \"Hello \"+this.name;\n * \t}\n *\n * \tfunction ClassB(name, punctuation) {\n * \t\tthis.ClassA_constructor(name);\n * \t\tthis.punctuation = punctuation;\n * \t}\n * \tcreatejs.extend(ClassB, ClassA);\n * \tClassB.prototype.greet = function() {\n * \t\treturn this.ClassA_greet()+this.punctuation;\n * \t}\n * \tcreatejs.promote(ClassB, \"ClassA\");\n *\n * \tvar foo = new ClassB(\"World\", \"!?!\");\n * \tconsole.log(foo.greet()); // Hello World!?!\n *\n * @method promote\n * @param {Function} subclass The class to promote super class methods on.\n * @param {String} prefix The prefix to add to the promoted method names. Usually the name of the superclass.\n * @return {Function} Returns the subclass.\n */\ncreatejs.promote = function (subclass, prefix) {\n  \"use strict\";\n\n  var subP = subclass.prototype,\n    supP = Object.getPrototypeOf && Object.getPrototypeOf(subP) || subP.__proto__;\n  if (supP) {\n    subP[(prefix += \"_\") + \"constructor\"] = supP.constructor; // constructor is not always innumerable\n    for (var n in supP) {\n      if (subP.hasOwnProperty(n) && typeof supP[n] == \"function\") {\n        subP[prefix + n] = supP[n];\n      }\n    }\n  }\n  return subclass;\n};\n\n//##############################################################################\n// indexOf.js\n//##############################################################################\n\n/**\n * @class Utility Methods\n */\n\n/**\n * Finds the first occurrence of a specified value searchElement in the passed in array, and returns the index of\n * that value.  Returns -1 if value is not found.\n *\n *      var i = createjs.indexOf(myArray, myElementToFind);\n *\n * @method indexOf\n * @param {Array} array Array to search for searchElement\n * @param searchElement Element to find in array.\n * @return {Number} The first index of searchElement in array.\n */\ncreatejs.indexOf = function (array, searchElement) {\n  \"use strict\";\n\n  for (var i = 0, l = array.length; i < l; i++) {\n    if (searchElement === array[i]) {\n      return i;\n    }\n  }\n  return -1;\n};\n\n//##############################################################################\n// Event.js\n//##############################################################################\n\n(function () {\n  \"use strict\";\n\n  // constructor:\n  /**\n   * Contains properties and methods shared by all events for use with\n   * {{#crossLink \"EventDispatcher\"}}{{/crossLink}}.\n   * \n   * Note that Event objects are often reused, so you should never\n   * rely on an event object's state outside of the call stack it was received in.\n   * @class Event\n   * @param {String} type The event type.\n   * @param {Boolean} bubbles Indicates whether the event will bubble through the display list.\n   * @param {Boolean} cancelable Indicates whether the default behaviour of this event can be cancelled.\n   * @constructor\n   **/\n  function Event(type, bubbles, cancelable) {\n    // public properties:\n    /**\n     * The type of event.\n     * @property type\n     * @type String\n     **/\n    this.type = type;\n\n    /**\n     * The object that generated an event.\n     * @property target\n     * @type Object\n     * @default null\n     * @readonly\n    */\n    this.target = null;\n\n    /**\n     * The current target that a bubbling event is being dispatched from. For non-bubbling events, this will\n     * always be the same as target. For example, if childObj.parent = parentObj, and a bubbling event\n     * is generated from childObj, then a listener on parentObj would receive the event with\n     * target=childObj (the original target) and currentTarget=parentObj (where the listener was added).\n     * @property currentTarget\n     * @type Object\n     * @default null\n     * @readonly\n    */\n    this.currentTarget = null;\n\n    /**\n     * For bubbling events, this indicates the current event phase:<OL>\n     * \t<LI> capture phase: starting from the top parent to the target</LI>\n     * \t<LI> at target phase: currently being dispatched from the target</LI>\n     * \t<LI> bubbling phase: from the target to the top parent</LI>\n     * </OL>\n     * @property eventPhase\n     * @type Number\n     * @default 0\n     * @readonly\n    */\n    this.eventPhase = 0;\n\n    /**\n     * Indicates whether the event will bubble through the display list.\n     * @property bubbles\n     * @type Boolean\n     * @default false\n     * @readonly\n    */\n    this.bubbles = !!bubbles;\n\n    /**\n     * Indicates whether the default behaviour of this event can be cancelled via\n     * {{#crossLink \"Event/preventDefault\"}}{{/crossLink}}. This is set via the Event constructor.\n     * @property cancelable\n     * @type Boolean\n     * @default false\n     * @readonly\n    */\n    this.cancelable = !!cancelable;\n\n    /**\n     * The epoch time at which this event was created.\n     * @property timeStamp\n     * @type Number\n     * @default 0\n     * @readonly\n    */\n    this.timeStamp = new Date().getTime();\n\n    /**\n     * Indicates if {{#crossLink \"Event/preventDefault\"}}{{/crossLink}} has been called\n     * on this event.\n     * @property defaultPrevented\n     * @type Boolean\n     * @default false\n     * @readonly\n    */\n    this.defaultPrevented = false;\n\n    /**\n     * Indicates if {{#crossLink \"Event/stopPropagation\"}}{{/crossLink}} or\n     * {{#crossLink \"Event/stopImmediatePropagation\"}}{{/crossLink}} has been called on this event.\n     * @property propagationStopped\n     * @type Boolean\n     * @default false\n     * @readonly\n    */\n    this.propagationStopped = false;\n\n    /**\n     * Indicates if {{#crossLink \"Event/stopImmediatePropagation\"}}{{/crossLink}} has been called\n     * on this event.\n     * @property immediatePropagationStopped\n     * @type Boolean\n     * @default false\n     * @readonly\n    */\n    this.immediatePropagationStopped = false;\n\n    /**\n     * Indicates if {{#crossLink \"Event/remove\"}}{{/crossLink}} has been called on this event.\n     * @property removed\n     * @type Boolean\n     * @default false\n     * @readonly\n    */\n    this.removed = false;\n  }\n  var p = Event.prototype;\n\n  /**\n   * <strong>REMOVED</strong>. Removed in favor of using `MySuperClass_constructor`.\n   * See {{#crossLink \"Utility Methods/extend\"}}{{/crossLink}} and {{#crossLink \"Utility Methods/promote\"}}{{/crossLink}}\n   * for details.\n   *\n   * There is an inheritance tutorial distributed with EaselJS in /tutorials/Inheritance.\n   *\n   * @method initialize\n   * @protected\n   * @deprecated\n   */\n  // p.initialize = function() {}; // searchable for devs wondering where it is.\n\n  // public methods:\n  /**\n   * Sets {{#crossLink \"Event/defaultPrevented\"}}{{/crossLink}} to true if the event is cancelable.\n   * Mirrors the DOM level 2 event standard. In general, cancelable events that have `preventDefault()` called will\n   * cancel the default behaviour associated with the event.\n   * @method preventDefault\n   **/\n  p.preventDefault = function () {\n    this.defaultPrevented = this.cancelable && true;\n  };\n\n  /**\n   * Sets {{#crossLink \"Event/propagationStopped\"}}{{/crossLink}} to true.\n   * Mirrors the DOM event standard.\n   * @method stopPropagation\n   **/\n  p.stopPropagation = function () {\n    this.propagationStopped = true;\n  };\n\n  /**\n   * Sets {{#crossLink \"Event/propagationStopped\"}}{{/crossLink}} and\n   * {{#crossLink \"Event/immediatePropagationStopped\"}}{{/crossLink}} to true.\n   * Mirrors the DOM event standard.\n   * @method stopImmediatePropagation\n   **/\n  p.stopImmediatePropagation = function () {\n    this.immediatePropagationStopped = this.propagationStopped = true;\n  };\n\n  /**\n   * Causes the active listener to be removed via removeEventListener();\n   * \n   * \t\tmyBtn.addEventListener(\"click\", function(evt) {\n   * \t\t\t// do stuff...\n   * \t\t\tevt.remove(); // removes this listener.\n   * \t\t});\n   * \n   * @method remove\n   **/\n  p.remove = function () {\n    this.removed = true;\n  };\n\n  /**\n   * Returns a clone of the Event instance.\n   * @method clone\n   * @return {Event} a clone of the Event instance.\n   **/\n  p.clone = function () {\n    return new Event(this.type, this.bubbles, this.cancelable);\n  };\n\n  /**\n   * Provides a chainable shortcut method for setting a number of properties on the instance.\n   *\n   * @method set\n   * @param {Object} props A generic object containing properties to copy to the instance.\n   * @return {Event} Returns the instance the method is called on (useful for chaining calls.)\n   * @chainable\n  */\n  p.set = function (props) {\n    for (var n in props) {\n      this[n] = props[n];\n    }\n    return this;\n  };\n\n  /**\n   * Returns a string representation of this object.\n   * @method toString\n   * @return {String} a string representation of the instance.\n   **/\n  p.toString = function () {\n    return \"[Event (type=\" + this.type + \")]\";\n  };\n  createjs.Event = Event;\n})();\n\n//##############################################################################\n// EventDispatcher.js\n//##############################################################################\n\n(function () {\n  \"use strict\";\n\n  // constructor:\n  /**\n   * EventDispatcher provides methods for managing queues of event listeners and dispatching events.\n   *\n   * You can either extend EventDispatcher or mix its methods into an existing prototype or instance by using the\n   * EventDispatcher {{#crossLink \"EventDispatcher/initialize\"}}{{/crossLink}} method.\n   * \n   * Together with the CreateJS Event class, EventDispatcher provides an extended event model that is based on the\n   * DOM Level 2 event model, including addEventListener, removeEventListener, and dispatchEvent. It supports\n   * bubbling / capture, preventDefault, stopPropagation, stopImmediatePropagation, and handleEvent.\n   * \n   * EventDispatcher also exposes a {{#crossLink \"EventDispatcher/on\"}}{{/crossLink}} method, which makes it easier\n   * to create scoped listeners, listeners that only run once, and listeners with associated arbitrary data. The \n   * {{#crossLink \"EventDispatcher/off\"}}{{/crossLink}} method is merely an alias to\n   * {{#crossLink \"EventDispatcher/removeEventListener\"}}{{/crossLink}}.\n   * \n   * Another addition to the DOM Level 2 model is the {{#crossLink \"EventDispatcher/removeAllEventListeners\"}}{{/crossLink}}\n   * method, which can be used to listeners for all events, or listeners for a specific event. The Event object also \n   * includes a {{#crossLink \"Event/remove\"}}{{/crossLink}} method which removes the active listener.\n   *\n   * <h4>Example</h4>\n   * Add EventDispatcher capabilities to the \"MyClass\" class.\n   *\n   *      EventDispatcher.initialize(MyClass.prototype);\n   *\n   * Add an event (see {{#crossLink \"EventDispatcher/addEventListener\"}}{{/crossLink}}).\n   *\n   *      instance.addEventListener(\"eventName\", handlerMethod);\n   *      function handlerMethod(event) {\n   *          console.log(event.target + \" Was Clicked\");\n   *      }\n   *\n   * <b>Maintaining proper scope</b><br />\n   * Scope (ie. \"this\") can be be a challenge with events. Using the {{#crossLink \"EventDispatcher/on\"}}{{/crossLink}}\n   * method to subscribe to events simplifies this.\n   *\n   *      instance.addEventListener(\"click\", function(event) {\n   *          console.log(instance == this); // false, scope is ambiguous.\n   *      });\n   *      \n   *      instance.on(\"click\", function(event) {\n   *          console.log(instance == this); // true, \"on\" uses dispatcher scope by default.\n   *      });\n   * \n   * If you want to use addEventListener instead, you may want to use function.bind() or a similar proxy to manage\n   * scope.\n   *\n   * <b>Browser support</b>\n   * The event model in CreateJS can be used separately from the suite in any project, however the inheritance model\n   * requires modern browsers (IE9+).\n   *      \n   *\n   * @class EventDispatcher\n   * @constructor\n   **/\n  function EventDispatcher() {\n    // private properties:\n    /**\n     * @protected\n     * @property _listeners\n     * @type Object\n     **/\n    this._listeners = null;\n\n    /**\n     * @protected\n     * @property _captureListeners\n     * @type Object\n     **/\n    this._captureListeners = null;\n  }\n  var p = EventDispatcher.prototype;\n\n  /**\n   * <strong>REMOVED</strong>. Removed in favor of using `MySuperClass_constructor`.\n   * See {{#crossLink \"Utility Methods/extend\"}}{{/crossLink}} and {{#crossLink \"Utility Methods/promote\"}}{{/crossLink}}\n   * for details.\n   *\n   * There is an inheritance tutorial distributed with EaselJS in /tutorials/Inheritance.\n   *\n   * @method initialize\n   * @protected\n   * @deprecated\n   */\n  // p.initialize = function() {}; // searchable for devs wondering where it is.\n\n  // static public methods:\n  /**\n   * Static initializer to mix EventDispatcher methods into a target object or prototype.\n   * \n   * \t\tEventDispatcher.initialize(MyClass.prototype); // add to the prototype of the class\n   * \t\tEventDispatcher.initialize(myObject); // add to a specific instance\n   * \n   * @method initialize\n   * @static\n   * @param {Object} target The target object to inject EventDispatcher methods into. This can be an instance or a\n   * prototype.\n   **/\n  EventDispatcher.initialize = function (target) {\n    target.addEventListener = p.addEventListener;\n    target.on = p.on;\n    target.removeEventListener = target.off = p.removeEventListener;\n    target.removeAllEventListeners = p.removeAllEventListeners;\n    target.hasEventListener = p.hasEventListener;\n    target.dispatchEvent = p.dispatchEvent;\n    target._dispatchEvent = p._dispatchEvent;\n    target.willTrigger = p.willTrigger;\n  };\n\n  // public methods:\n  /**\n   * Adds the specified event listener. Note that adding multiple listeners to the same function will result in\n   * multiple callbacks getting fired.\n   *\n   * <h4>Example</h4>\n   *\n   *      displayObject.addEventListener(\"click\", handleClick);\n   *      function handleClick(event) {\n   *         // Click happened.\n   *      }\n   *\n   * @method addEventListener\n   * @param {String} type The string type of the event.\n   * @param {Function | Object} listener An object with a handleEvent method, or a function that will be called when\n   * the event is dispatched.\n   * @param {Boolean} [useCapture] For events that bubble, indicates whether to listen for the event in the capture or bubbling/target phase.\n   * @return {Function | Object} Returns the listener for chaining or assignment.\n   **/\n  p.addEventListener = function (type, listener, useCapture) {\n    var listeners;\n    if (useCapture) {\n      listeners = this._captureListeners = this._captureListeners || {};\n    } else {\n      listeners = this._listeners = this._listeners || {};\n    }\n    var arr = listeners[type];\n    if (arr) {\n      this.removeEventListener(type, listener, useCapture);\n    }\n    arr = listeners[type]; // remove may have deleted the array\n    if (!arr) {\n      listeners[type] = [listener];\n    } else {\n      arr.push(listener);\n    }\n    return listener;\n  };\n\n  /**\n   * A shortcut method for using addEventListener that makes it easier to specify an execution scope, have a listener\n   * only run once, associate arbitrary data with the listener, and remove the listener.\n   * \n   * This method works by creating an anonymous wrapper function and subscribing it with addEventListener.\n   * The wrapper function is returned for use with `removeEventListener` (or `off`).\n   * \n   * <b>IMPORTANT:</b> To remove a listener added with `on`, you must pass in the returned wrapper function as the listener, or use\n   * {{#crossLink \"Event/remove\"}}{{/crossLink}}. Likewise, each time you call `on` a NEW wrapper function is subscribed, so multiple calls\n   * to `on` with the same params will create multiple listeners.\n   * \n   * <h4>Example</h4>\n   * \n   * \t\tvar listener = myBtn.on(\"click\", handleClick, null, false, {count:3});\n   * \t\tfunction handleClick(evt, data) {\n   * \t\t\tdata.count -= 1;\n   * \t\t\tconsole.log(this == myBtn); // true - scope defaults to the dispatcher\n   * \t\t\tif (data.count == 0) {\n   * \t\t\t\talert(\"clicked 3 times!\");\n   * \t\t\t\tmyBtn.off(\"click\", listener);\n   * \t\t\t\t// alternately: evt.remove();\n   * \t\t\t}\n   * \t\t}\n   * \n   * @method on\n   * @param {String} type The string type of the event.\n   * @param {Function | Object} listener An object with a handleEvent method, or a function that will be called when\n   * the event is dispatched.\n   * @param {Object} [scope] The scope to execute the listener in. Defaults to the dispatcher/currentTarget for function listeners, and to the listener itself for object listeners (ie. using handleEvent).\n   * @param {Boolean} [once=false] If true, the listener will remove itself after the first time it is triggered.\n   * @param {*} [data] Arbitrary data that will be included as the second parameter when the listener is called.\n   * @param {Boolean} [useCapture=false] For events that bubble, indicates whether to listen for the event in the capture or bubbling/target phase.\n   * @return {Function} Returns the anonymous function that was created and assigned as the listener. This is needed to remove the listener later using .removeEventListener.\n   **/\n  p.on = function (type, listener, scope, once, data, useCapture) {\n    if (listener.handleEvent) {\n      scope = scope || listener;\n      listener = listener.handleEvent;\n    }\n    scope = scope || this;\n    return this.addEventListener(type, function (evt) {\n      listener.call(scope, evt, data);\n      once && evt.remove();\n    }, useCapture);\n  };\n\n  /**\n   * Removes the specified event listener.\n   *\n   * <b>Important Note:</b> that you must pass the exact function reference used when the event was added. If a proxy\n   * function, or function closure is used as the callback, the proxy/closure reference must be used - a new proxy or\n   * closure will not work.\n   *\n   * <h4>Example</h4>\n   *\n   *      displayObject.removeEventListener(\"click\", handleClick);\n   *\n   * @method removeEventListener\n   * @param {String} type The string type of the event.\n   * @param {Function | Object} listener The listener function or object.\n   * @param {Boolean} [useCapture] For events that bubble, indicates whether to listen for the event in the capture or bubbling/target phase.\n   **/\n  p.removeEventListener = function (type, listener, useCapture) {\n    var listeners = useCapture ? this._captureListeners : this._listeners;\n    if (!listeners) {\n      return;\n    }\n    var arr = listeners[type];\n    if (!arr) {\n      return;\n    }\n    for (var i = 0, l = arr.length; i < l; i++) {\n      if (arr[i] == listener) {\n        if (l == 1) {\n          delete listeners[type];\n        } // allows for faster checks.\n        else {\n          arr.splice(i, 1);\n        }\n        break;\n      }\n    }\n  };\n\n  /**\n   * A shortcut to the removeEventListener method, with the same parameters and return value. This is a companion to the\n   * .on method.\n   * \n   * <b>IMPORTANT:</b> To remove a listener added with `on`, you must pass in the returned wrapper function as the listener. See \n   * {{#crossLink \"EventDispatcher/on\"}}{{/crossLink}} for an example.\n   *\n   * @method off\n   * @param {String} type The string type of the event.\n   * @param {Function | Object} listener The listener function or object.\n   * @param {Boolean} [useCapture] For events that bubble, indicates whether to listen for the event in the capture or bubbling/target phase.\n   **/\n  p.off = p.removeEventListener;\n\n  /**\n   * Removes all listeners for the specified type, or all listeners of all types.\n   *\n   * <h4>Example</h4>\n   *\n   *      // Remove all listeners\n   *      displayObject.removeAllEventListeners();\n   *\n   *      // Remove all click listeners\n   *      displayObject.removeAllEventListeners(\"click\");\n   *\n   * @method removeAllEventListeners\n   * @param {String} [type] The string type of the event. If omitted, all listeners for all types will be removed.\n   **/\n  p.removeAllEventListeners = function (type) {\n    if (!type) {\n      this._listeners = this._captureListeners = null;\n    } else {\n      if (this._listeners) {\n        delete this._listeners[type];\n      }\n      if (this._captureListeners) {\n        delete this._captureListeners[type];\n      }\n    }\n  };\n\n  /**\n   * Dispatches the specified event to all listeners.\n   *\n   * <h4>Example</h4>\n   *\n   *      // Use a string event\n   *      this.dispatchEvent(\"complete\");\n   *\n   *      // Use an Event instance\n   *      var event = new createjs.Event(\"progress\");\n   *      this.dispatchEvent(event);\n   *\n   * @method dispatchEvent\n   * @param {Object | String | Event} eventObj An object with a \"type\" property, or a string type.\n   * While a generic object will work, it is recommended to use a CreateJS Event instance. If a string is used,\n   * dispatchEvent will construct an Event instance if necessary with the specified type. This latter approach can\n   * be used to avoid event object instantiation for non-bubbling events that may not have any listeners.\n   * @param {Boolean} [bubbles] Specifies the `bubbles` value when a string was passed to eventObj.\n   * @param {Boolean} [cancelable] Specifies the `cancelable` value when a string was passed to eventObj.\n   * @return {Boolean} Returns false if `preventDefault()` was called on a cancelable event, true otherwise.\n   **/\n  p.dispatchEvent = function (eventObj, bubbles, cancelable) {\n    if (typeof eventObj == \"string\") {\n      // skip everything if there's no listeners and it doesn't bubble:\n      var listeners = this._listeners;\n      if (!bubbles && (!listeners || !listeners[eventObj])) {\n        return true;\n      }\n      eventObj = new createjs.Event(eventObj, bubbles, cancelable);\n    } else if (eventObj.target && eventObj.clone) {\n      // redispatching an active event object, so clone it:\n      eventObj = eventObj.clone();\n    }\n\n    // TODO: it would be nice to eliminate this. Maybe in favour of evtObj instanceof Event? Or !!evtObj.createEvent\n    try {\n      eventObj.target = this;\n    } catch (e) {} // try/catch allows redispatching of native events\n\n    if (!eventObj.bubbles || !this.parent) {\n      this._dispatchEvent(eventObj, 2);\n    } else {\n      var top = this,\n        list = [top];\n      while (top.parent) {\n        list.push(top = top.parent);\n      }\n      var i,\n        l = list.length;\n\n      // capture & atTarget\n      for (i = l - 1; i >= 0 && !eventObj.propagationStopped; i--) {\n        list[i]._dispatchEvent(eventObj, 1 + (i == 0));\n      }\n      // bubbling\n      for (i = 1; i < l && !eventObj.propagationStopped; i++) {\n        list[i]._dispatchEvent(eventObj, 3);\n      }\n    }\n    return !eventObj.defaultPrevented;\n  };\n\n  /**\n   * Indicates whether there is at least one listener for the specified event type.\n   * @method hasEventListener\n   * @param {String} type The string type of the event.\n   * @return {Boolean} Returns true if there is at least one listener for the specified event.\n   **/\n  p.hasEventListener = function (type) {\n    var listeners = this._listeners,\n      captureListeners = this._captureListeners;\n    return !!(listeners && listeners[type] || captureListeners && captureListeners[type]);\n  };\n\n  /**\n   * Indicates whether there is at least one listener for the specified event type on this object or any of its\n   * ancestors (parent, parent's parent, etc). A return value of true indicates that if a bubbling event of the\n   * specified type is dispatched from this object, it will trigger at least one listener.\n   * \n   * This is similar to {{#crossLink \"EventDispatcher/hasEventListener\"}}{{/crossLink}}, but it searches the entire\n   * event flow for a listener, not just this object.\n   * @method willTrigger\n   * @param {String} type The string type of the event.\n   * @return {Boolean} Returns `true` if there is at least one listener for the specified event.\n   **/\n  p.willTrigger = function (type) {\n    var o = this;\n    while (o) {\n      if (o.hasEventListener(type)) {\n        return true;\n      }\n      o = o.parent;\n    }\n    return false;\n  };\n\n  /**\n   * @method toString\n   * @return {String} a string representation of the instance.\n   **/\n  p.toString = function () {\n    return \"[EventDispatcher]\";\n  };\n\n  // private methods:\n  /**\n   * @method _dispatchEvent\n   * @param {Object | String | Event} eventObj\n   * @param {Object} eventPhase\n   * @protected\n   **/\n  p._dispatchEvent = function (eventObj, eventPhase) {\n    var l,\n      listeners = eventPhase == 1 ? this._captureListeners : this._listeners;\n    if (eventObj && listeners) {\n      var arr = listeners[eventObj.type];\n      if (!arr || !(l = arr.length)) {\n        return;\n      }\n      try {\n        eventObj.currentTarget = this;\n      } catch (e) {}\n      try {\n        eventObj.eventPhase = eventPhase;\n      } catch (e) {}\n      eventObj.removed = false;\n      arr = arr.slice(); // to avoid issues with items being removed or added during the dispatch\n      for (var i = 0; i < l && !eventObj.immediatePropagationStopped; i++) {\n        var o = arr[i];\n        if (o.handleEvent) {\n          o.handleEvent(eventObj);\n        } else {\n          o(eventObj);\n        }\n        if (eventObj.removed) {\n          this.off(eventObj.type, o, eventPhase == 1);\n          eventObj.removed = false;\n        }\n      }\n    }\n  };\n  createjs.EventDispatcher = EventDispatcher;\n})();\n\n//##############################################################################\n// Ticker.js\n//##############################################################################\n\n(function () {\n  \"use strict\";\n\n  // constructor:\n  /**\n   * The Ticker provides a centralized tick or heartbeat broadcast at a set interval. Listeners can subscribe to the tick\n   * event to be notified when a set time interval has elapsed.\n   *\n   * Note that the interval that the tick event is called is a target interval, and may be broadcast at a slower interval\n   * when under high CPU load. The Ticker class uses a static interface (ex. `Ticker.framerate = 30;`) and\n   * can not be instantiated.\n   *\n   * <h4>Example</h4>\n   *\n   *      createjs.Ticker.addEventListener(\"tick\", handleTick);\n   *      function handleTick(event) {\n   *          // Actions carried out each tick (aka frame)\n   *          if (!event.paused) {\n   *              // Actions carried out when the Ticker is not paused.\n   *          }\n   *      }\n   *\n   * @class Ticker\n   * @uses EventDispatcher\n   * @static\n   **/\n  function Ticker() {\n    throw \"Ticker cannot be instantiated.\";\n  }\n\n  // constants:\n  /**\n   * In this mode, Ticker uses the requestAnimationFrame API, but attempts to synch the ticks to target framerate. It\n   * uses a simple heuristic that compares the time of the RAF return to the target time for the current frame and\n   * dispatches the tick when the time is within a certain threshold.\n   *\n   * This mode has a higher variance for time between frames than {{#crossLink \"Ticker/TIMEOUT:property\"}}{{/crossLink}},\n   * but does not require that content be time based as with {{#crossLink \"Ticker/RAF:property\"}}{{/crossLink}} while\n   * gaining the benefits of that API (screen synch, background throttling).\n   *\n   * Variance is usually lowest for framerates that are a divisor of the RAF frequency. This is usually 60, so\n   * framerates of 10, 12, 15, 20, and 30 work well.\n   *\n   * Falls back to {{#crossLink \"Ticker/TIMEOUT:property\"}}{{/crossLink}} if the requestAnimationFrame API is not\n   * supported.\n   * @property RAF_SYNCHED\n   * @static\n   * @type {String}\n   * @default \"synched\"\n   * @readonly\n   **/\n  Ticker.RAF_SYNCHED = \"synched\";\n\n  /**\n   * In this mode, Ticker passes through the requestAnimationFrame heartbeat, ignoring the target framerate completely.\n   * Because requestAnimationFrame frequency is not deterministic, any content using this mode should be time based.\n   * You can leverage {{#crossLink \"Ticker/getTime\"}}{{/crossLink}} and the {{#crossLink \"Ticker/tick:event\"}}{{/crossLink}}\n   * event object's \"delta\" properties to make this easier.\n   *\n   * Falls back on {{#crossLink \"Ticker/TIMEOUT:property\"}}{{/crossLink}} if the requestAnimationFrame API is not\n   * supported.\n   * @property RAF\n   * @static\n   * @type {String}\n   * @default \"raf\"\n   * @readonly\n   **/\n  Ticker.RAF = \"raf\";\n\n  /**\n   * In this mode, Ticker uses the setTimeout API. This provides predictable, adaptive frame timing, but does not\n   * provide the benefits of requestAnimationFrame (screen synch, background throttling).\n   * @property TIMEOUT\n   * @static\n   * @type {String}\n   * @default \"timeout\"\n   * @readonly\n   **/\n  Ticker.TIMEOUT = \"timeout\";\n\n  // static events:\n  /**\n   * Dispatched each tick. The event will be dispatched to each listener even when the Ticker has been paused using\n   * {{#crossLink \"Ticker/setPaused\"}}{{/crossLink}}.\n   *\n   * <h4>Example</h4>\n   *\n   *      createjs.Ticker.addEventListener(\"tick\", handleTick);\n   *      function handleTick(event) {\n   *          console.log(\"Paused:\", event.paused, event.delta);\n   *      }\n   *\n   * @event tick\n   * @param {Object} target The object that dispatched the event.\n   * @param {String} type The event type.\n   * @param {Boolean} paused Indicates whether the ticker is currently paused.\n   * @param {Number} delta The time elapsed in ms since the last tick.\n   * @param {Number} time The total time in ms since Ticker was initialized.\n   * @param {Number} runTime The total time in ms that Ticker was not paused since it was initialized. For example,\n   * \tyou could determine the amount of time that the Ticker has been paused since initialization with `time-runTime`.\n   * @since 0.6.0\n   */\n\n  // public static properties:\n  /**\n   * Deprecated in favour of {{#crossLink \"Ticker/timingMode\"}}{{/crossLink}}, and will be removed in a future version. If true, timingMode will\n   * use {{#crossLink \"Ticker/RAF_SYNCHED\"}}{{/crossLink}} by default.\n   * @deprecated Deprecated in favour of {{#crossLink \"Ticker/timingMode\"}}{{/crossLink}}.\n   * @property useRAF\n   * @static\n   * @type {Boolean}\n   * @default false\n   **/\n  Ticker.useRAF = false;\n\n  /**\n   * Specifies the timing api (setTimeout or requestAnimationFrame) and mode to use. See\n   * {{#crossLink \"Ticker/TIMEOUT\"}}{{/crossLink}}, {{#crossLink \"Ticker/RAF\"}}{{/crossLink}}, and\n   * {{#crossLink \"Ticker/RAF_SYNCHED\"}}{{/crossLink}} for mode details.\n   * @property timingMode\n   * @static\n   * @type {String}\n   * @default Ticker.TIMEOUT\n   **/\n  Ticker.timingMode = null;\n\n  /**\n   * Specifies a maximum value for the delta property in the tick event object. This is useful when building time\n   * based animations and systems to prevent issues caused by large time gaps caused by background tabs, system sleep,\n   * alert dialogs, or other blocking routines. Double the expected frame duration is often an effective value\n   * (ex. maxDelta=50 when running at 40fps).\n   * \n   * This does not impact any other values (ex. time, runTime, etc), so you may experience issues if you enable maxDelta\n   * when using both delta and other values.\n   * \n   * If 0, there is no maximum.\n   * @property maxDelta\n   * @static\n   * @type {number}\n   * @default 0\n   */\n  Ticker.maxDelta = 0;\n\n  /**\n   * When the ticker is paused, all listeners will still receive a tick event, but the <code>paused</code> property\n   * of the event will be `true`. Also, while paused the `runTime` will not increase. See {{#crossLink \"Ticker/tick:event\"}}{{/crossLink}},\n   * {{#crossLink \"Ticker/getTime\"}}{{/crossLink}}, and {{#crossLink \"Ticker/getEventTime\"}}{{/crossLink}} for more\n   * info.\n   *\n   * <h4>Example</h4>\n   *\n   *      createjs.Ticker.addEventListener(\"tick\", handleTick);\n   *      createjs.Ticker.paused = true;\n   *      function handleTick(event) {\n   *          console.log(event.paused,\n   *          \tcreatejs.Ticker.getTime(false),\n   *          \tcreatejs.Ticker.getTime(true));\n   *      }\n   *\n   * @property paused\n   * @static\n   * @type {Boolean}\n   * @default false\n   **/\n  Ticker.paused = false;\n\n  // mix-ins:\n  // EventDispatcher methods:\n  Ticker.removeEventListener = null;\n  Ticker.removeAllEventListeners = null;\n  Ticker.dispatchEvent = null;\n  Ticker.hasEventListener = null;\n  Ticker._listeners = null;\n  createjs.EventDispatcher.initialize(Ticker); // inject EventDispatcher methods.\n  Ticker._addEventListener = Ticker.addEventListener;\n  Ticker.addEventListener = function () {\n    !Ticker._inited && Ticker.init();\n    return Ticker._addEventListener.apply(Ticker, arguments);\n  };\n\n  // private static properties:\n  /**\n   * @property _inited\n   * @static\n   * @type {Boolean}\n   * @protected\n   **/\n  Ticker._inited = false;\n\n  /**\n   * @property _startTime\n   * @static\n   * @type {Number}\n   * @protected\n   **/\n  Ticker._startTime = 0;\n\n  /**\n   * @property _pausedTime\n   * @static\n   * @type {Number}\n   * @protected\n   **/\n  Ticker._pausedTime = 0;\n\n  /**\n   * The number of ticks that have passed\n   * @property _ticks\n   * @static\n   * @type {Number}\n   * @protected\n   **/\n  Ticker._ticks = 0;\n\n  /**\n   * The number of ticks that have passed while Ticker has been paused\n   * @property _pausedTicks\n   * @static\n   * @type {Number}\n   * @protected\n   **/\n  Ticker._pausedTicks = 0;\n\n  /**\n   * @property _interval\n   * @static\n   * @type {Number}\n   * @protected\n   **/\n  Ticker._interval = 50;\n\n  /**\n   * @property _lastTime\n   * @static\n   * @type {Number}\n   * @protected\n   **/\n  Ticker._lastTime = 0;\n\n  /**\n   * @property _times\n   * @static\n   * @type {Array}\n   * @protected\n   **/\n  Ticker._times = null;\n\n  /**\n   * @property _tickTimes\n   * @static\n   * @type {Array}\n   * @protected\n   **/\n  Ticker._tickTimes = null;\n\n  /**\n   * Stores the timeout or requestAnimationFrame id.\n   * @property _timerId\n   * @static\n   * @type {Number}\n   * @protected\n   **/\n  Ticker._timerId = null;\n\n  /**\n   * True if currently using requestAnimationFrame, false if using setTimeout. This may be different than timingMode\n   * if that property changed and a tick hasn't fired.\n   * @property _raf\n   * @static\n   * @type {Boolean}\n   * @protected\n   **/\n  Ticker._raf = true;\n\n  // static getter / setters:\n  /**\n   * Use the {{#crossLink \"Ticker/interval:property\"}}{{/crossLink}} property instead.\n   * @method setInterval\n   * @static\n   * @param {Number} interval\n   * @deprecated\n   **/\n  Ticker.setInterval = function (interval) {\n    Ticker._interval = interval;\n    if (!Ticker._inited) {\n      return;\n    }\n    Ticker._setupTick();\n  };\n\n  /**\n   * Use the {{#crossLink \"Ticker/interval:property\"}}{{/crossLink}} property instead.\n   * @method getInterval\n   * @static\n   * @return {Number}\n   * @deprecated\n   **/\n  Ticker.getInterval = function () {\n    return Ticker._interval;\n  };\n\n  /**\n   * Use the {{#crossLink \"Ticker/framerate:property\"}}{{/crossLink}} property instead.\n   * @method setFPS\n   * @static\n   * @param {Number} value\n   * @deprecated\n   **/\n  Ticker.setFPS = function (value) {\n    Ticker.setInterval(1000 / value);\n  };\n\n  /**\n   * Use the {{#crossLink \"Ticker/framerate:property\"}}{{/crossLink}} property instead.\n   * @method getFPS\n   * @static\n   * @return {Number}\n   * @deprecated\n   **/\n  Ticker.getFPS = function () {\n    return 1000 / Ticker._interval;\n  };\n\n  /**\n   * Indicates the target time (in milliseconds) between ticks. Default is 50 (20 FPS).\n   * Note that actual time between ticks may be more than specified depending on CPU load.\n   * This property is ignored if the ticker is using the `RAF` timing mode.\n   * @property interval\n   * @static\n   * @type {Number}\n   **/\n\n  /**\n   * Indicates the target frame rate in frames per second (FPS). Effectively just a shortcut to `interval`, where\n   * `framerate == 1000/interval`.\n   * @property framerate\n   * @static\n   * @type {Number}\n   **/\n  try {\n    Object.defineProperties(Ticker, {\n      interval: {\n        get: Ticker.getInterval,\n        set: Ticker.setInterval\n      },\n      framerate: {\n        get: Ticker.getFPS,\n        set: Ticker.setFPS\n      }\n    });\n  } catch (e) {\n    console.log(e);\n  }\n\n  // public static methods:\n  /**\n   * Starts the tick. This is called automatically when the first listener is added.\n   * @method init\n   * @static\n   **/\n  Ticker.init = function () {\n    if (Ticker._inited) {\n      return;\n    }\n    Ticker._inited = true;\n    Ticker._times = [];\n    Ticker._tickTimes = [];\n    Ticker._startTime = Ticker._getTime();\n    Ticker._times.push(Ticker._lastTime = 0);\n    Ticker.interval = Ticker._interval;\n  };\n\n  /**\n   * Stops the Ticker and removes all listeners. Use init() to restart the Ticker.\n   * @method reset\n   * @static\n   **/\n  Ticker.reset = function () {\n    if (Ticker._raf) {\n      var f = window.cancelAnimationFrame || window.webkitCancelAnimationFrame || window.mozCancelAnimationFrame || window.oCancelAnimationFrame || window.msCancelAnimationFrame;\n      f && f(Ticker._timerId);\n    } else {\n      clearTimeout(Ticker._timerId);\n    }\n    Ticker.removeAllEventListeners(\"tick\");\n    Ticker._timerId = Ticker._times = Ticker._tickTimes = null;\n    Ticker._startTime = Ticker._lastTime = Ticker._ticks = 0;\n    Ticker._inited = false;\n  };\n\n  /**\n   * Returns the average time spent within a tick. This can vary significantly from the value provided by getMeasuredFPS\n   * because it only measures the time spent within the tick execution stack. \n   * \n   * Example 1: With a target FPS of 20, getMeasuredFPS() returns 20fps, which indicates an average of 50ms between \n   * the end of one tick and the end of the next. However, getMeasuredTickTime() returns 15ms. This indicates that \n   * there may be up to 35ms of \"idle\" time between the end of one tick and the start of the next.\n   *\n   * Example 2: With a target FPS of 30, getFPS() returns 10fps, which indicates an average of 100ms between the end of\n   * one tick and the end of the next. However, getMeasuredTickTime() returns 20ms. This would indicate that something\n   * other than the tick is using ~80ms (another script, DOM rendering, etc).\n   * @method getMeasuredTickTime\n   * @static\n   * @param {Number} [ticks] The number of previous ticks over which to measure the average time spent in a tick.\n   * Defaults to the number of ticks per second. To get only the last tick's time, pass in 1.\n   * @return {Number} The average time spent in a tick in milliseconds.\n   **/\n  Ticker.getMeasuredTickTime = function (ticks) {\n    var ttl = 0,\n      times = Ticker._tickTimes;\n    if (!times || times.length < 1) {\n      return -1;\n    }\n\n    // by default, calculate average for the past ~1 second:\n    ticks = Math.min(times.length, ticks || Ticker.getFPS() | 0);\n    for (var i = 0; i < ticks; i++) {\n      ttl += times[i];\n    }\n    return ttl / ticks;\n  };\n\n  /**\n   * Returns the actual frames / ticks per second.\n   * @method getMeasuredFPS\n   * @static\n   * @param {Number} [ticks] The number of previous ticks over which to measure the actual frames / ticks per second.\n   * Defaults to the number of ticks per second.\n   * @return {Number} The actual frames / ticks per second. Depending on performance, this may differ\n   * from the target frames per second.\n   **/\n  Ticker.getMeasuredFPS = function (ticks) {\n    var times = Ticker._times;\n    if (!times || times.length < 2) {\n      return -1;\n    }\n\n    // by default, calculate fps for the past ~1 second:\n    ticks = Math.min(times.length - 1, ticks || Ticker.getFPS() | 0);\n    return 1000 / ((times[0] - times[ticks]) / ticks);\n  };\n\n  /**\n   * Use the {{#crossLink \"Ticker/paused:property\"}}{{/crossLink}} property instead.\n   * @method setPaused\n   * @static\n   * @param {Boolean} value\n   * @deprecated\n   **/\n  Ticker.setPaused = function (value) {\n    // TODO: deprecated.\n    Ticker.paused = value;\n  };\n\n  /**\n   * Use the {{#crossLink \"Ticker/paused:property\"}}{{/crossLink}} property instead.\n   * @method getPaused\n   * @static\n   * @return {Boolean}\n   * @deprecated\n   **/\n  Ticker.getPaused = function () {\n    // TODO: deprecated.\n    return Ticker.paused;\n  };\n\n  /**\n   * Returns the number of milliseconds that have elapsed since Ticker was initialized via {{#crossLink \"Ticker/init\"}}.\n   * Returns -1 if Ticker has not been initialized. For example, you could use\n   * this in a time synchronized animation to determine the exact amount of time that has elapsed.\n   * @method getTime\n   * @static\n   * @param {Boolean} [runTime=false] If true only time elapsed while Ticker was not paused will be returned.\n   * If false, the value returned will be total time elapsed since the first tick event listener was added.\n   * @return {Number} Number of milliseconds that have elapsed since Ticker was initialized or -1.\n   **/\n  Ticker.getTime = function (runTime) {\n    return Ticker._startTime ? Ticker._getTime() - (runTime ? Ticker._pausedTime : 0) : -1;\n  };\n\n  /**\n   * Similar to the {{#crossLink \"Ticker/getTime\"}}{{/crossLink}} method, but returns the time on the most recent {{#crossLink \"Ticker/tick:event\"}}{{/crossLink}}\n   * event object.\n   * @method getEventTime\n   * @static\n   * @param runTime {Boolean} [runTime=false] If true, the runTime property will be returned instead of time.\n   * @returns {number} The time or runTime property from the most recent tick event or -1.\n   */\n  Ticker.getEventTime = function (runTime) {\n    return Ticker._startTime ? (Ticker._lastTime || Ticker._startTime) - (runTime ? Ticker._pausedTime : 0) : -1;\n  };\n\n  /**\n   * Returns the number of ticks that have been broadcast by Ticker.\n   * @method getTicks\n   * @static\n   * @param {Boolean} pauseable Indicates whether to include ticks that would have been broadcast\n   * while Ticker was paused. If true only tick events broadcast while Ticker is not paused will be returned.\n   * If false, tick events that would have been broadcast while Ticker was paused will be included in the return\n   * value. The default value is false.\n   * @return {Number} of ticks that have been broadcast.\n   **/\n  Ticker.getTicks = function (pauseable) {\n    return Ticker._ticks - (pauseable ? Ticker._pausedTicks : 0);\n  };\n\n  // private static methods:\n  /**\n   * @method _handleSynch\n   * @static\n   * @protected\n   **/\n  Ticker._handleSynch = function () {\n    Ticker._timerId = null;\n    Ticker._setupTick();\n\n    // run if enough time has elapsed, with a little bit of flexibility to be early:\n    if (Ticker._getTime() - Ticker._lastTime >= (Ticker._interval - 1) * 0.97) {\n      Ticker._tick();\n    }\n  };\n\n  /**\n   * @method _handleRAF\n   * @static\n   * @protected\n   **/\n  Ticker._handleRAF = function () {\n    Ticker._timerId = null;\n    Ticker._setupTick();\n    Ticker._tick();\n  };\n\n  /**\n   * @method _handleTimeout\n   * @static\n   * @protected\n   **/\n  Ticker._handleTimeout = function () {\n    Ticker._timerId = null;\n    Ticker._setupTick();\n    Ticker._tick();\n  };\n\n  /**\n   * @method _setupTick\n   * @static\n   * @protected\n   **/\n  Ticker._setupTick = function () {\n    if (Ticker._timerId != null) {\n      return;\n    } // avoid duplicates\n\n    var mode = Ticker.timingMode || Ticker.useRAF && Ticker.RAF_SYNCHED;\n    if (mode == Ticker.RAF_SYNCHED || mode == Ticker.RAF) {\n      var f = window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame;\n      if (f) {\n        Ticker._timerId = f(mode == Ticker.RAF ? Ticker._handleRAF : Ticker._handleSynch);\n        Ticker._raf = true;\n        return;\n      }\n    }\n    Ticker._raf = false;\n    Ticker._timerId = setTimeout(Ticker._handleTimeout, Ticker._interval);\n  };\n\n  /**\n   * @method _tick\n   * @static\n   * @protected\n   **/\n  Ticker._tick = function () {\n    var paused = Ticker.paused;\n    var time = Ticker._getTime();\n    var elapsedTime = time - Ticker._lastTime;\n    Ticker._lastTime = time;\n    Ticker._ticks++;\n    if (paused) {\n      Ticker._pausedTicks++;\n      Ticker._pausedTime += elapsedTime;\n    }\n    if (Ticker.hasEventListener(\"tick\")) {\n      var event = new createjs.Event(\"tick\");\n      var maxDelta = Ticker.maxDelta;\n      event.delta = maxDelta && elapsedTime > maxDelta ? maxDelta : elapsedTime;\n      event.paused = paused;\n      event.time = time;\n      event.runTime = time - Ticker._pausedTime;\n      Ticker.dispatchEvent(event);\n    }\n    Ticker._tickTimes.unshift(Ticker._getTime() - time);\n    while (Ticker._tickTimes.length > 100) {\n      Ticker._tickTimes.pop();\n    }\n    Ticker._times.unshift(time);\n    while (Ticker._times.length > 100) {\n      Ticker._times.pop();\n    }\n  };\n\n  /**\n   * @method _getTime\n   * @static\n   * @protected\n   **/\n  var now = window.performance && (performance.now || performance.mozNow || performance.msNow || performance.oNow || performance.webkitNow);\n  Ticker._getTime = function () {\n    return (now && now.call(performance) || new Date().getTime()) - Ticker._startTime;\n  };\n  createjs.Ticker = Ticker;\n})();\n\n//##############################################################################\n// UID.js\n//##############################################################################\n\n(function () {\n  \"use strict\";\n\n  // constructor:\n  /**\n   * Global utility for generating sequential unique ID numbers. The UID class uses a static interface (ex. <code>UID.get()</code>)\n   * and should not be instantiated.\n   * @class UID\n   * @static\n   **/\n  function UID() {\n    throw \"UID cannot be instantiated\";\n  }\n\n  // private static properties:\n  /**\n   * @property _nextID\n   * @type Number\n   * @protected\n   **/\n  UID._nextID = 0;\n\n  // public static methods:\n  /**\n   * Returns the next unique id.\n   * @method get\n   * @return {Number} The next unique id\n   * @static\n   **/\n  UID.get = function () {\n    return UID._nextID++;\n  };\n  createjs.UID = UID;\n})();\n\n//##############################################################################\n// MouseEvent.js\n//##############################################################################\n\n(function () {\n  \"use strict\";\n\n  // constructor:\n  /**\n   * Passed as the parameter to all mouse/pointer/touch related events. For a listing of mouse events and their properties,\n   * see the {{#crossLink \"DisplayObject\"}}{{/crossLink}} and {{#crossLink \"Stage\"}}{{/crossLink}} event listings.\n   * @class MouseEvent\n   * @param {String} type The event type.\n   * @param {Boolean} bubbles Indicates whether the event will bubble through the display list.\n   * @param {Boolean} cancelable Indicates whether the default behaviour of this event can be cancelled.\n   * @param {Number} stageX The normalized x position relative to the stage.\n   * @param {Number} stageY The normalized y position relative to the stage.\n   * @param {MouseEvent} nativeEvent The native DOM event related to this mouse event.\n   * @param {Number} pointerID The unique id for the pointer.\n   * @param {Boolean} primary Indicates whether this is the primary pointer in a multitouch environment.\n   * @param {Number} rawX The raw x position relative to the stage.\n   * @param {Number} rawY The raw y position relative to the stage.\n   * @param {DisplayObject} relatedTarget The secondary target for the event.\n   * @extends Event\n   * @constructor\n   **/\n  function MouseEvent(type, bubbles, cancelable, stageX, stageY, nativeEvent, pointerID, primary, rawX, rawY, relatedTarget) {\n    this.Event_constructor(type, bubbles, cancelable);\n\n    // public properties:\n    /**\n     * The normalized x position on the stage. This will always be within the range 0 to stage width.\n     * @property stageX\n     * @type Number\n    */\n    this.stageX = stageX;\n\n    /**\n     * The normalized y position on the stage. This will always be within the range 0 to stage height.\n     * @property stageY\n     * @type Number\n     **/\n    this.stageY = stageY;\n\n    /**\n     * The raw x position relative to the stage. Normally this will be the same as the stageX value, unless\n     * stage.mouseMoveOutside is true and the pointer is outside of the stage bounds.\n     * @property rawX\n     * @type Number\n    */\n    this.rawX = rawX == null ? stageX : rawX;\n\n    /**\n     * The raw y position relative to the stage. Normally this will be the same as the stageY value, unless\n     * stage.mouseMoveOutside is true and the pointer is outside of the stage bounds.\n     * @property rawY\n     * @type Number\n    */\n    this.rawY = rawY == null ? stageY : rawY;\n\n    /**\n     * The native MouseEvent generated by the browser. The properties and API for this\n     * event may differ between browsers. This property will be null if the\n     * EaselJS property was not directly generated from a native MouseEvent.\n     * @property nativeEvent\n     * @type HtmlMouseEvent\n     * @default null\n     **/\n    this.nativeEvent = nativeEvent;\n\n    /**\n     * The unique id for the pointer (touch point or cursor). This will be either -1 for the mouse, or the system\n     * supplied id value.\n     * @property pointerID\n     * @type {Number}\n     */\n    this.pointerID = pointerID;\n\n    /**\n     * Indicates whether this is the primary pointer in a multitouch environment. This will always be true for the mouse.\n     * For touch pointers, the first pointer in the current stack will be considered the primary pointer.\n     * @property primary\n     * @type {Boolean}\n     */\n    this.primary = !!primary;\n\n    /**\n     * The secondary target for the event, if applicable. This is used for mouseout/rollout\n     * events to indicate the object that the mouse entered from, mouseover/rollover for the object the mouse exited,\n     * and stagemousedown/stagemouseup events for the object that was the under the cursor, if any.\n     * \n     * Only valid interaction targets will be returned (ie. objects with mouse listeners or a cursor set).\n     * @property relatedTarget\n     * @type {DisplayObject}\n     */\n    this.relatedTarget = relatedTarget;\n  }\n  var p = createjs.extend(MouseEvent, createjs.Event);\n\n  // TODO: deprecated\n  // p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\n\n  // getter / setters:\n  /**\n   * Returns the x position of the mouse in the local coordinate system of the current target (ie. the dispatcher).\n   * @property localX\n   * @type {Number}\n   * @readonly\n   */\n  p._get_localX = function () {\n    return this.currentTarget.globalToLocal(this.rawX, this.rawY).x;\n  };\n\n  /**\n   * Returns the y position of the mouse in the local coordinate system of the current target (ie. the dispatcher).\n   * @property localY\n   * @type {Number}\n   * @readonly\n   */\n  p._get_localY = function () {\n    return this.currentTarget.globalToLocal(this.rawX, this.rawY).y;\n  };\n\n  /**\n   * Indicates whether the event was generated by a touch input (versus a mouse input).\n   * @property isTouch\n   * @type {Boolean}\n   * @readonly\n   */\n  p._get_isTouch = function () {\n    return this.pointerID !== -1;\n  };\n  try {\n    Object.defineProperties(p, {\n      localX: {\n        get: p._get_localX\n      },\n      localY: {\n        get: p._get_localY\n      },\n      isTouch: {\n        get: p._get_isTouch\n      }\n    });\n  } catch (e) {} // TODO: use Log\n\n  // public methods:\n  /**\n   * Returns a clone of the MouseEvent instance.\n   * @method clone\n   * @return {MouseEvent} a clone of the MouseEvent instance.\n   **/\n  p.clone = function () {\n    return new MouseEvent(this.type, this.bubbles, this.cancelable, this.stageX, this.stageY, this.nativeEvent, this.pointerID, this.primary, this.rawX, this.rawY);\n  };\n\n  /**\n   * Returns a string representation of this object.\n   * @method toString\n   * @return {String} a string representation of the instance.\n   **/\n  p.toString = function () {\n    return \"[MouseEvent (type=\" + this.type + \" stageX=\" + this.stageX + \" stageY=\" + this.stageY + \")]\";\n  };\n  createjs.MouseEvent = createjs.promote(MouseEvent, \"Event\");\n})();\n\n//##############################################################################\n// Matrix2D.js\n//##############################################################################\n\n(function () {\n  \"use strict\";\n\n  // constructor:\n  /**\n   * Represents an affine transformation matrix, and provides tools for constructing and concatenating matrices.\n   *\n   * This matrix can be visualized as:\n   *\n   * \t[ a  c  tx\n   * \t  b  d  ty\n   * \t  0  0  1  ]\n   *\n   * Note the locations of b and c.\n   *\n   * @class Matrix2D\n   * @param {Number} [a=1] Specifies the a property for the new matrix.\n   * @param {Number} [b=0] Specifies the b property for the new matrix.\n   * @param {Number} [c=0] Specifies the c property for the new matrix.\n   * @param {Number} [d=1] Specifies the d property for the new matrix.\n   * @param {Number} [tx=0] Specifies the tx property for the new matrix.\n   * @param {Number} [ty=0] Specifies the ty property for the new matrix.\n   * @constructor\n   **/\n  function Matrix2D(a, b, c, d, tx, ty) {\n    this.setValues(a, b, c, d, tx, ty);\n\n    // public properties:\n    // assigned in the setValues method.\n    /**\n     * Position (0, 0) in a 3x3 affine transformation matrix.\n     * @property a\n     * @type Number\n     **/\n\n    /**\n     * Position (0, 1) in a 3x3 affine transformation matrix.\n     * @property b\n     * @type Number\n     **/\n\n    /**\n     * Position (1, 0) in a 3x3 affine transformation matrix.\n     * @property c\n     * @type Number\n     **/\n\n    /**\n     * Position (1, 1) in a 3x3 affine transformation matrix.\n     * @property d\n     * @type Number\n     **/\n\n    /**\n     * Position (2, 0) in a 3x3 affine transformation matrix.\n     * @property tx\n     * @type Number\n     **/\n\n    /**\n     * Position (2, 1) in a 3x3 affine transformation matrix.\n     * @property ty\n     * @type Number\n     **/\n  }\n\n  var p = Matrix2D.prototype;\n\n  /**\n   * <strong>REMOVED</strong>. Removed in favor of using `MySuperClass_constructor`.\n   * See {{#crossLink \"Utility Methods/extend\"}}{{/crossLink}} and {{#crossLink \"Utility Methods/promote\"}}{{/crossLink}}\n   * for details.\n   *\n   * There is an inheritance tutorial distributed with EaselJS in /tutorials/Inheritance.\n   *\n   * @method initialize\n   * @protected\n   * @deprecated\n   */\n  // p.initialize = function() {}; // searchable for devs wondering where it is.\n\n  // constants:\n  /**\n   * Multiplier for converting degrees to radians. Used internally by Matrix2D.\n   * @property DEG_TO_RAD\n   * @static\n   * @final\n   * @type Number\n   * @readonly\n   **/\n  Matrix2D.DEG_TO_RAD = Math.PI / 180;\n\n  // static public properties:\n  /**\n   * An identity matrix, representing a null transformation.\n   * @property identity\n   * @static\n   * @type Matrix2D\n   * @readonly\n   **/\n  Matrix2D.identity = null; // set at bottom of class definition.\n\n  // public methods:\n  /**\n   * Sets the specified values on this instance. \n   * @method setValues\n   * @param {Number} [a=1] Specifies the a property for the new matrix.\n   * @param {Number} [b=0] Specifies the b property for the new matrix.\n   * @param {Number} [c=0] Specifies the c property for the new matrix.\n   * @param {Number} [d=1] Specifies the d property for the new matrix.\n   * @param {Number} [tx=0] Specifies the tx property for the new matrix.\n   * @param {Number} [ty=0] Specifies the ty property for the new matrix.\n   * @return {Matrix2D} This instance. Useful for chaining method calls.\n  */\n  p.setValues = function (a, b, c, d, tx, ty) {\n    // don't forget to update docs in the constructor if these change:\n    this.a = a == null ? 1 : a;\n    this.b = b || 0;\n    this.c = c || 0;\n    this.d = d == null ? 1 : d;\n    this.tx = tx || 0;\n    this.ty = ty || 0;\n    return this;\n  };\n\n  /**\n   * Appends the specified matrix properties to this matrix. All parameters are required.\n   * This is the equivalent of multiplying `(this matrix) * (specified matrix)`.\n   * @method append\n   * @param {Number} a\n   * @param {Number} b\n   * @param {Number} c\n   * @param {Number} d\n   * @param {Number} tx\n   * @param {Number} ty\n   * @return {Matrix2D} This matrix. Useful for chaining method calls.\n   **/\n  p.append = function (a, b, c, d, tx, ty) {\n    var a1 = this.a;\n    var b1 = this.b;\n    var c1 = this.c;\n    var d1 = this.d;\n    if (a != 1 || b != 0 || c != 0 || d != 1) {\n      this.a = a1 * a + c1 * b;\n      this.b = b1 * a + d1 * b;\n      this.c = a1 * c + c1 * d;\n      this.d = b1 * c + d1 * d;\n    }\n    this.tx = a1 * tx + c1 * ty + this.tx;\n    this.ty = b1 * tx + d1 * ty + this.ty;\n    return this;\n  };\n\n  /**\n   * Prepends the specified matrix properties to this matrix.\n   * This is the equivalent of multiplying `(specified matrix) * (this matrix)`.\n   * All parameters are required.\n   * @method prepend\n   * @param {Number} a\n   * @param {Number} b\n   * @param {Number} c\n   * @param {Number} d\n   * @param {Number} tx\n   * @param {Number} ty\n   * @return {Matrix2D} This matrix. Useful for chaining method calls.\n   **/\n  p.prepend = function (a, b, c, d, tx, ty) {\n    var a1 = this.a;\n    var c1 = this.c;\n    var tx1 = this.tx;\n    this.a = a * a1 + c * this.b;\n    this.b = b * a1 + d * this.b;\n    this.c = a * c1 + c * this.d;\n    this.d = b * c1 + d * this.d;\n    this.tx = a * tx1 + c * this.ty + tx;\n    this.ty = b * tx1 + d * this.ty + ty;\n    return this;\n  };\n\n  /**\n   * Appends the specified matrix to this matrix.\n   * This is the equivalent of multiplying `(this matrix) * (specified matrix)`.\n   * @method appendMatrix\n   * @param {Matrix2D} matrix\n   * @return {Matrix2D} This matrix. Useful for chaining method calls.\n   **/\n  p.appendMatrix = function (matrix) {\n    return this.append(matrix.a, matrix.b, matrix.c, matrix.d, matrix.tx, matrix.ty);\n  };\n\n  /**\n   * Prepends the specified matrix to this matrix.\n   * This is the equivalent of multiplying `(specified matrix) * (this matrix)`.\n   * For example, you could calculate the combined transformation for a child object using:\n   * \n   * \tvar o = myDisplayObject;\n   * \tvar mtx = o.getMatrix();\n   * \twhile (o = o.parent) {\n   * \t\t// prepend each parent's transformation in turn:\n   * \t\to.prependMatrix(o.getMatrix());\n   * \t}\n   * @method prependMatrix\n   * @param {Matrix2D} matrix\n   * @return {Matrix2D} This matrix. Useful for chaining method calls.\n   **/\n  p.prependMatrix = function (matrix) {\n    return this.prepend(matrix.a, matrix.b, matrix.c, matrix.d, matrix.tx, matrix.ty);\n  };\n\n  /**\n   * Generates matrix properties from the specified display object transform properties, and appends them to this matrix.\n   * For example, you can use this to generate a matrix representing the transformations of a display object:\n   * \n   * \tvar mtx = new createjs.Matrix2D();\n   * \tmtx.appendTransform(o.x, o.y, o.scaleX, o.scaleY, o.rotation);\n   * @method appendTransform\n   * @param {Number} x\n   * @param {Number} y\n   * @param {Number} scaleX\n   * @param {Number} scaleY\n   * @param {Number} rotation\n   * @param {Number} skewX\n   * @param {Number} skewY\n   * @param {Number} regX Optional.\n   * @param {Number} regY Optional.\n   * @return {Matrix2D} This matrix. Useful for chaining method calls.\n   **/\n  p.appendTransform = function (x, y, scaleX, scaleY, rotation, skewX, skewY, regX, regY) {\n    if (rotation % 360) {\n      var r = rotation * Matrix2D.DEG_TO_RAD;\n      var cos = Math.cos(r);\n      var sin = Math.sin(r);\n    } else {\n      cos = 1;\n      sin = 0;\n    }\n    if (skewX || skewY) {\n      // TODO: can this be combined into a single append operation?\n      skewX *= Matrix2D.DEG_TO_RAD;\n      skewY *= Matrix2D.DEG_TO_RAD;\n      this.append(Math.cos(skewY), Math.sin(skewY), -Math.sin(skewX), Math.cos(skewX), x, y);\n      this.append(cos * scaleX, sin * scaleX, -sin * scaleY, cos * scaleY, 0, 0);\n    } else {\n      this.append(cos * scaleX, sin * scaleX, -sin * scaleY, cos * scaleY, x, y);\n    }\n    if (regX || regY) {\n      // append the registration offset:\n      this.tx -= regX * this.a + regY * this.c;\n      this.ty -= regX * this.b + regY * this.d;\n    }\n    return this;\n  };\n\n  /**\n   * Generates matrix properties from the specified display object transform properties, and prepends them to this matrix.\n   * For example, you could calculate the combined transformation for a child object using:\n   * \n   * \tvar o = myDisplayObject;\n   * \tvar mtx = new createjs.Matrix2D();\n   * \tdo  {\n   * \t\t// prepend each parent's transformation in turn:\n   * \t\tmtx.prependTransform(o.x, o.y, o.scaleX, o.scaleY, o.rotation, o.skewX, o.skewY, o.regX, o.regY);\n   * \t} while (o = o.parent);\n   * \t\n   * \tNote that the above example would not account for {{#crossLink \"DisplayObject/transformMatrix:property\"}}{{/crossLink}}\n   * \tvalues. See {{#crossLink \"Matrix2D/prependMatrix\"}}{{/crossLink}} for an example that does.\n   * @method prependTransform\n   * @param {Number} x\n   * @param {Number} y\n   * @param {Number} scaleX\n   * @param {Number} scaleY\n   * @param {Number} rotation\n   * @param {Number} skewX\n   * @param {Number} skewY\n   * @param {Number} regX Optional.\n   * @param {Number} regY Optional.\n   * @return {Matrix2D} This matrix. Useful for chaining method calls.\n   **/\n  p.prependTransform = function (x, y, scaleX, scaleY, rotation, skewX, skewY, regX, regY) {\n    if (rotation % 360) {\n      var r = rotation * Matrix2D.DEG_TO_RAD;\n      var cos = Math.cos(r);\n      var sin = Math.sin(r);\n    } else {\n      cos = 1;\n      sin = 0;\n    }\n    if (regX || regY) {\n      // prepend the registration offset:\n      this.tx -= regX;\n      this.ty -= regY;\n    }\n    if (skewX || skewY) {\n      // TODO: can this be combined into a single prepend operation?\n      skewX *= Matrix2D.DEG_TO_RAD;\n      skewY *= Matrix2D.DEG_TO_RAD;\n      this.prepend(cos * scaleX, sin * scaleX, -sin * scaleY, cos * scaleY, 0, 0);\n      this.prepend(Math.cos(skewY), Math.sin(skewY), -Math.sin(skewX), Math.cos(skewX), x, y);\n    } else {\n      this.prepend(cos * scaleX, sin * scaleX, -sin * scaleY, cos * scaleY, x, y);\n    }\n    return this;\n  };\n\n  /**\n   * Applies a clockwise rotation transformation to the matrix.\n   * @method rotate\n   * @param {Number} angle The angle to rotate by, in degrees. To use a value in radians, multiply it by `180/Math.PI`.\n   * @return {Matrix2D} This matrix. Useful for chaining method calls.\n   **/\n  p.rotate = function (angle) {\n    angle = angle * Matrix2D.DEG_TO_RAD;\n    var cos = Math.cos(angle);\n    var sin = Math.sin(angle);\n    var a1 = this.a;\n    var b1 = this.b;\n    this.a = a1 * cos + this.c * sin;\n    this.b = b1 * cos + this.d * sin;\n    this.c = -a1 * sin + this.c * cos;\n    this.d = -b1 * sin + this.d * cos;\n    return this;\n  };\n\n  /**\n   * Applies a skew transformation to the matrix.\n   * @method skew\n   * @param {Number} skewX The amount to skew horizontally in degrees. To use a value in radians, multiply it by `180/Math.PI`.\n   * @param {Number} skewY The amount to skew vertically in degrees.\n   * @return {Matrix2D} This matrix. Useful for chaining method calls.\n  */\n  p.skew = function (skewX, skewY) {\n    skewX = skewX * Matrix2D.DEG_TO_RAD;\n    skewY = skewY * Matrix2D.DEG_TO_RAD;\n    this.append(Math.cos(skewY), Math.sin(skewY), -Math.sin(skewX), Math.cos(skewX), 0, 0);\n    return this;\n  };\n\n  /**\n   * Applies a scale transformation to the matrix.\n   * @method scale\n   * @param {Number} x The amount to scale horizontally. E.G. a value of 2 will double the size in the X direction, and 0.5 will halve it.\n   * @param {Number} y The amount to scale vertically.\n   * @return {Matrix2D} This matrix. Useful for chaining method calls.\n   **/\n  p.scale = function (x, y) {\n    this.a *= x;\n    this.b *= x;\n    this.c *= y;\n    this.d *= y;\n    //this.tx *= x;\n    //this.ty *= y;\n    return this;\n  };\n\n  /**\n   * Translates the matrix on the x and y axes.\n   * @method translate\n   * @param {Number} x\n   * @param {Number} y\n   * @return {Matrix2D} This matrix. Useful for chaining method calls.\n   **/\n  p.translate = function (x, y) {\n    this.tx += this.a * x + this.c * y;\n    this.ty += this.b * x + this.d * y;\n    return this;\n  };\n\n  /**\n   * Sets the properties of the matrix to those of an identity matrix (one that applies a null transformation).\n   * @method identity\n   * @return {Matrix2D} This matrix. Useful for chaining method calls.\n   **/\n  p.identity = function () {\n    this.a = this.d = 1;\n    this.b = this.c = this.tx = this.ty = 0;\n    return this;\n  };\n\n  /**\n   * Inverts the matrix, causing it to perform the opposite transformation.\n   * @method invert\n   * @return {Matrix2D} This matrix. Useful for chaining method calls.\n   **/\n  p.invert = function () {\n    var a1 = this.a;\n    var b1 = this.b;\n    var c1 = this.c;\n    var d1 = this.d;\n    var tx1 = this.tx;\n    var n = a1 * d1 - b1 * c1;\n    this.a = d1 / n;\n    this.b = -b1 / n;\n    this.c = -c1 / n;\n    this.d = a1 / n;\n    this.tx = (c1 * this.ty - d1 * tx1) / n;\n    this.ty = -(a1 * this.ty - b1 * tx1) / n;\n    return this;\n  };\n\n  /**\n   * Returns true if the matrix is an identity matrix.\n   * @method isIdentity\n   * @return {Boolean}\n   **/\n  p.isIdentity = function () {\n    return this.tx === 0 && this.ty === 0 && this.a === 1 && this.b === 0 && this.c === 0 && this.d === 1;\n  };\n\n  /**\n   * Returns true if this matrix is equal to the specified matrix (all property values are equal).\n   * @method equals\n   * @param {Matrix2D} matrix The matrix to compare.\n   * @return {Boolean}\n   **/\n  p.equals = function (matrix) {\n    return this.tx === matrix.tx && this.ty === matrix.ty && this.a === matrix.a && this.b === matrix.b && this.c === matrix.c && this.d === matrix.d;\n  };\n\n  /**\n   * Transforms a point according to this matrix.\n   * @method transformPoint\n   * @param {Number} x The x component of the point to transform.\n   * @param {Number} y The y component of the point to transform.\n   * @param {Point | Object} [pt] An object to copy the result into. If omitted a generic object with x/y properties will be returned.\n   * @return {Point} This matrix. Useful for chaining method calls.\n   **/\n  p.transformPoint = function (x, y, pt) {\n    pt = pt || {};\n    pt.x = x * this.a + y * this.c + this.tx;\n    pt.y = x * this.b + y * this.d + this.ty;\n    return pt;\n  };\n\n  /**\n   * Decomposes the matrix into transform properties (x, y, scaleX, scaleY, and rotation). Note that these values\n   * may not match the transform properties you used to generate the matrix, though they will produce the same visual\n   * results.\n   * @method decompose\n   * @param {Object} target The object to apply the transform properties to. If null, then a new object will be returned.\n   * @return {Object} The target, or a new generic object with the transform properties applied.\n  */\n  p.decompose = function (target) {\n    // TODO: it would be nice to be able to solve for whether the matrix can be decomposed into only scale/rotation even when scale is negative\n    if (target == null) {\n      target = {};\n    }\n    target.x = this.tx;\n    target.y = this.ty;\n    target.scaleX = Math.sqrt(this.a * this.a + this.b * this.b);\n    target.scaleY = Math.sqrt(this.c * this.c + this.d * this.d);\n    var skewX = Math.atan2(-this.c, this.d);\n    var skewY = Math.atan2(this.b, this.a);\n    var delta = Math.abs(1 - skewX / skewY);\n    if (delta < 0.00001) {\n      // effectively identical, can use rotation:\n      target.rotation = skewY / Matrix2D.DEG_TO_RAD;\n      if (this.a < 0 && this.d >= 0) {\n        target.rotation += target.rotation <= 0 ? 180 : -180;\n      }\n      target.skewX = target.skewY = 0;\n    } else {\n      target.skewX = skewX / Matrix2D.DEG_TO_RAD;\n      target.skewY = skewY / Matrix2D.DEG_TO_RAD;\n    }\n    return target;\n  };\n\n  /**\n   * Copies all properties from the specified matrix to this matrix.\n   * @method copy\n   * @param {Matrix2D} matrix The matrix to copy properties from.\n   * @return {Matrix2D} This matrix. Useful for chaining method calls.\n  */\n  p.copy = function (matrix) {\n    return this.setValues(matrix.a, matrix.b, matrix.c, matrix.d, matrix.tx, matrix.ty);\n  };\n\n  /**\n   * Returns a clone of the Matrix2D instance.\n   * @method clone\n   * @return {Matrix2D} a clone of the Matrix2D instance.\n   **/\n  p.clone = function () {\n    return new Matrix2D(this.a, this.b, this.c, this.d, this.tx, this.ty);\n  };\n\n  /**\n   * Returns a string representation of this object.\n   * @method toString\n   * @return {String} a string representation of the instance.\n   **/\n  p.toString = function () {\n    return \"[Matrix2D (a=\" + this.a + \" b=\" + this.b + \" c=\" + this.c + \" d=\" + this.d + \" tx=\" + this.tx + \" ty=\" + this.ty + \")]\";\n  };\n\n  // this has to be populated after the class is defined:\n  Matrix2D.identity = new Matrix2D();\n  createjs.Matrix2D = Matrix2D;\n})();\n\n//##############################################################################\n// DisplayProps.js\n//##############################################################################\n\n(function () {\n  \"use strict\";\n\n  /**\n   * Used for calculating and encapsulating display related properties.\n   * @class DisplayProps\n   * @param {Number} [visible=true] Visible value.\n   * @param {Number} [alpha=1] Alpha value.\n   * @param {Number} [shadow=null] A Shadow instance or null.\n   * @param {Number} [compositeOperation=null] A compositeOperation value or null.\n   * @param {Number} [matrix] A transformation matrix. Defaults to a new identity matrix.\n   * @constructor\n   **/\n  function DisplayProps(visible, alpha, shadow, compositeOperation, matrix) {\n    this.setValues(visible, alpha, shadow, compositeOperation, matrix);\n\n    // public properties:\n    // assigned in the setValues method.\n    /**\n     * Property representing the alpha that will be applied to a display object.\n     * @property alpha\n     * @type Number\n     **/\n\n    /**\n     * Property representing the shadow that will be applied to a display object.\n     * @property shadow\n     * @type Shadow\n     **/\n\n    /**\n     * Property representing the compositeOperation that will be applied to a display object.\n     * You can find a list of valid composite operations at:\n     * <a href=\"https://developer.mozilla.org/en/Canvas_tutorial/Compositing\">https://developer.mozilla.org/en/Canvas_tutorial/Compositing</a>\n     * @property compositeOperation\n     * @type String\n     **/\n\n    /**\n     * Property representing the value for visible that will be applied to a display object.\n     * @property visible\n     * @type Boolean\n     **/\n\n    /**\n     * The transformation matrix that will be applied to a display object.\n     * @property matrix\n     * @type Matrix2D\n     **/\n  }\n\n  var p = DisplayProps.prototype;\n\n  // initialization:\n  /**\n   * Reinitializes the instance with the specified values.\n   * @method setValues\n   * @param {Number} [visible=true] Visible value.\n   * @param {Number} [alpha=1] Alpha value.\n   * @param {Number} [shadow=null] A Shadow instance or null.\n   * @param {Number} [compositeOperation=null] A compositeOperation value or null.\n   * @param {Number} [matrix] A transformation matrix. Defaults to an identity matrix.\n   * @return {DisplayProps} This instance. Useful for chaining method calls.\n   * @chainable\n  */\n  p.setValues = function (visible, alpha, shadow, compositeOperation, matrix) {\n    this.visible = visible == null ? true : !!visible;\n    this.alpha = alpha == null ? 1 : alpha;\n    this.shadow = shadow;\n    this.compositeOperation = compositeOperation;\n    this.matrix = matrix || this.matrix && this.matrix.identity() || new createjs.Matrix2D();\n    return this;\n  };\n\n  // public methods:\n  /**\n   * Appends the specified display properties. This is generally used to apply a child's properties its parent's.\n   * @method append\n   * @param {Boolean} visible desired visible value\n   * @param {Number} alpha desired alpha value\n   * @param {Shadow} shadow desired shadow value\n   * @param {String} compositeOperation desired composite operation value\n   * @param {Matrix2D} [matrix] a Matrix2D instance\n   * @return {DisplayProps} This instance. Useful for chaining method calls.\n   * @chainable\n  */\n  p.append = function (visible, alpha, shadow, compositeOperation, matrix) {\n    this.alpha *= alpha;\n    this.shadow = shadow || this.shadow;\n    this.compositeOperation = compositeOperation || this.compositeOperation;\n    this.visible = this.visible && visible;\n    matrix && this.matrix.appendMatrix(matrix);\n    return this;\n  };\n\n  /**\n   * Prepends the specified display properties. This is generally used to apply a parent's properties to a child's.\n   * For example, to get the combined display properties that would be applied to a child, you could use:\n   * \n   * \tvar o = myDisplayObject;\n   * \tvar props = new createjs.DisplayProps();\n   * \tdo {\n   * \t\t// prepend each parent's props in turn:\n   * \t\tprops.prepend(o.visible, o.alpha, o.shadow, o.compositeOperation, o.getMatrix());\n   * \t} while (o = o.parent);\n   * \t\n   * @method prepend\n   * @param {Boolean} visible desired visible value\n   * @param {Number} alpha desired alpha value\n   * @param {Shadow} shadow desired shadow value\n   * @param {String} compositeOperation desired composite operation value\n   * @param {Matrix2D} [matrix] a Matrix2D instance\n   * @return {DisplayProps} This instance. Useful for chaining method calls.\n   * @chainable\n  */\n  p.prepend = function (visible, alpha, shadow, compositeOperation, matrix) {\n    this.alpha *= alpha;\n    this.shadow = this.shadow || shadow;\n    this.compositeOperation = this.compositeOperation || compositeOperation;\n    this.visible = this.visible && visible;\n    matrix && this.matrix.prependMatrix(matrix);\n    return this;\n  };\n\n  /**\n   * Resets this instance and its matrix to default values.\n   * @method identity\n   * @return {DisplayProps} This instance. Useful for chaining method calls.\n   * @chainable\n  */\n  p.identity = function () {\n    this.visible = true;\n    this.alpha = 1;\n    this.shadow = this.compositeOperation = null;\n    this.matrix.identity();\n    return this;\n  };\n\n  /**\n   * Returns a clone of the DisplayProps instance. Clones the associated matrix.\n   * @method clone\n   * @return {DisplayProps} a clone of the DisplayProps instance.\n   **/\n  p.clone = function () {\n    return new DisplayProps(this.alpha, this.shadow, this.compositeOperation, this.visible, this.matrix.clone());\n  };\n\n  // private methods:\n\n  createjs.DisplayProps = DisplayProps;\n})();\n\n//##############################################################################\n// Point.js\n//##############################################################################\n\n(function () {\n  \"use strict\";\n\n  // constructor:\n  /**\n   * Represents a point on a 2 dimensional x / y coordinate system.\n   *\n   * <h4>Example</h4>\n   * \n   *      var point = new createjs.Point(0, 100);\n   * \n   * @class Point\n   * @param {Number} [x=0] X position.\n   * @param {Number} [y=0] Y position.\n   * @constructor\n   **/\n  function Point(x, y) {\n    this.setValues(x, y);\n\n    // public properties:\n    // assigned in the setValues method.\n    /**\n     * X position.\n     * @property x\n     * @type Number\n     **/\n\n    /**\n     * Y position.\n     * @property y\n     * @type Number\n     **/\n  }\n\n  var p = Point.prototype;\n\n  /**\n   * <strong>REMOVED</strong>. Removed in favor of using `MySuperClass_constructor`.\n   * See {{#crossLink \"Utility Methods/extend\"}}{{/crossLink}} and {{#crossLink \"Utility Methods/promote\"}}{{/crossLink}}\n   * for details.\n   *\n   * There is an inheritance tutorial distributed with EaselJS in /tutorials/Inheritance.\n   *\n   * @method initialize\n   * @protected\n   * @deprecated\n   */\n  // p.initialize = function() {}; // searchable for devs wondering where it is.\n\n  // public methods:\n  /** \n   * Sets the specified values on this instance.\n   * @method setValues\n   * @param {Number} [x=0] X position.\n   * @param {Number} [y=0] Y position.\n   * @return {Point} This instance. Useful for chaining method calls.\n   * @chainable\n  */\n  p.setValues = function (x, y) {\n    this.x = x || 0;\n    this.y = y || 0;\n    return this;\n  };\n\n  /**\n   * Copies all properties from the specified point to this point.\n   * @method copy\n   * @param {Point} point The point to copy properties from.\n   * @return {Point} This point. Useful for chaining method calls.\n   * @chainable\n  */\n  p.copy = function (point) {\n    this.x = point.x;\n    this.y = point.y;\n    return this;\n  };\n\n  /**\n   * Returns a clone of the Point instance.\n   * @method clone\n   * @return {Point} a clone of the Point instance.\n   **/\n  p.clone = function () {\n    return new Point(this.x, this.y);\n  };\n\n  /**\n   * Returns a string representation of this object.\n   * @method toString\n   * @return {String} a string representation of the instance.\n   **/\n  p.toString = function () {\n    return \"[Point (x=\" + this.x + \" y=\" + this.y + \")]\";\n  };\n  createjs.Point = Point;\n})();\n\n//##############################################################################\n// Rectangle.js\n//##############################################################################\n\n(function () {\n  \"use strict\";\n\n  // constructor:\n  /**\n   * Represents a rectangle as defined by the points (x, y) and (x+width, y+height).\n   *\n   * <h4>Example</h4>\n   *\n   *      var rect = new createjs.Rectangle(0, 0, 100, 100);\n   *\n   * @class Rectangle\n   * @param {Number} [x=0] X position.\n   * @param {Number} [y=0] Y position.\n   * @param {Number} [width=0] The width of the Rectangle.\n   * @param {Number} [height=0] The height of the Rectangle.\n   * @constructor\n   **/\n  function Rectangle(x, y, width, height) {\n    this.setValues(x, y, width, height);\n\n    // public properties:\n    // assigned in the setValues method.\n    /**\n     * X position.\n     * @property x\n     * @type Number\n     **/\n\n    /**\n     * Y position.\n     * @property y\n     * @type Number\n     **/\n\n    /**\n     * Width.\n     * @property width\n     * @type Number\n     **/\n\n    /**\n     * Height.\n     * @property height\n     * @type Number\n     **/\n  }\n\n  var p = Rectangle.prototype;\n\n  /**\n   * <strong>REMOVED</strong>. Removed in favor of using `MySuperClass_constructor`.\n   * See {{#crossLink \"Utility Methods/extend\"}}{{/crossLink}} and {{#crossLink \"Utility Methods/promote\"}}{{/crossLink}}\n   * for details.\n   *\n   * There is an inheritance tutorial distributed with EaselJS in /tutorials/Inheritance.\n   *\n   * @method initialize\n   * @protected\n   * @deprecated\n   */\n  // p.initialize = function() {}; // searchable for devs wondering where it is.\n\n  // public methods:\n  /** \n   * Sets the specified values on this instance.\n   * @method setValues\n   * @param {Number} [x=0] X position.\n   * @param {Number} [y=0] Y position.\n   * @param {Number} [width=0] The width of the Rectangle.\n   * @param {Number} [height=0] The height of the Rectangle.\n   * @return {Rectangle} This instance. Useful for chaining method calls.\n   * @chainable\n  */\n  p.setValues = function (x, y, width, height) {\n    // don't forget to update docs in the constructor if these change:\n    this.x = x || 0;\n    this.y = y || 0;\n    this.width = width || 0;\n    this.height = height || 0;\n    return this;\n  };\n\n  /** \n   * Extends the rectangle's bounds to include the described point or rectangle.\n   * @method extend\n   * @param {Number} x X position of the point or rectangle.\n   * @param {Number} y Y position of the point or rectangle.\n   * @param {Number} [width=0] The width of the rectangle.\n   * @param {Number} [height=0] The height of the rectangle.\n   * @return {Rectangle} This instance. Useful for chaining method calls.\n   * @chainable\n  */\n  p.extend = function (x, y, width, height) {\n    width = width || 0;\n    height = height || 0;\n    if (x + width > this.x + this.width) {\n      this.width = x + width - this.x;\n    }\n    if (y + height > this.y + this.height) {\n      this.height = y + height - this.y;\n    }\n    if (x < this.x) {\n      this.width += this.x - x;\n      this.x = x;\n    }\n    if (y < this.y) {\n      this.height += this.y - y;\n      this.y = y;\n    }\n    return this;\n  };\n\n  /** \n   * Adds the specified padding to the rectangle's bounds.\n   * @method pad\n   * @param {Number} top\n   * @param {Number} left\n   * @param {Number} right\n   * @param {Number} bottom\n   * @return {Rectangle} This instance. Useful for chaining method calls.\n   * @chainable\n  */\n  p.pad = function (top, left, bottom, right) {\n    this.x -= left;\n    this.y -= top;\n    this.width += left + right;\n    this.height += top + bottom;\n    return this;\n  };\n\n  /**\n   * Copies all properties from the specified rectangle to this rectangle.\n   * @method copy\n   * @param {Rectangle} rectangle The rectangle to copy properties from.\n   * @return {Rectangle} This rectangle. Useful for chaining method calls.\n   * @chainable\n  */\n  p.copy = function (rectangle) {\n    return this.setValues(rectangle.x, rectangle.y, rectangle.width, rectangle.height);\n  };\n\n  /** \n   * Returns true if this rectangle fully encloses the described point or rectangle.\n   * @method contains\n   * @param {Number} x X position of the point or rectangle.\n   * @param {Number} y Y position of the point or rectangle.\n   * @param {Number} [width=0] The width of the rectangle.\n   * @param {Number} [height=0] The height of the rectangle.\n   * @return {Boolean} True if the described point or rectangle is contained within this rectangle.\n  */\n  p.contains = function (x, y, width, height) {\n    width = width || 0;\n    height = height || 0;\n    return x >= this.x && x + width <= this.x + this.width && y >= this.y && y + height <= this.y + this.height;\n  };\n\n  /** \n   * Returns a new rectangle which contains this rectangle and the specified rectangle.\n   * @method union\n   * @param {Rectangle} rect The rectangle to calculate a union with.\n   * @return {Rectangle} A new rectangle describing the union.\n  */\n  p.union = function (rect) {\n    return this.clone().extend(rect.x, rect.y, rect.width, rect.height);\n  };\n\n  /** \n   * Returns a new rectangle which describes the intersection (overlap) of this rectangle and the specified rectangle,\n   * or null if they do not intersect.\n   * @method intersection\n   * @param {Rectangle} rect The rectangle to calculate an intersection with.\n   * @return {Rectangle} A new rectangle describing the intersection or null.\n  */\n  p.intersection = function (rect) {\n    var x1 = rect.x,\n      y1 = rect.y,\n      x2 = x1 + rect.width,\n      y2 = y1 + rect.height;\n    if (this.x > x1) {\n      x1 = this.x;\n    }\n    if (this.y > y1) {\n      y1 = this.y;\n    }\n    if (this.x + this.width < x2) {\n      x2 = this.x + this.width;\n    }\n    if (this.y + this.height < y2) {\n      y2 = this.y + this.height;\n    }\n    return x2 <= x1 || y2 <= y1 ? null : new Rectangle(x1, y1, x2 - x1, y2 - y1);\n  };\n\n  /** \n   * Returns true if the specified rectangle intersects (has any overlap) with this rectangle.\n   * @method intersects\n   * @param {Rectangle} rect The rectangle to compare.\n   * @return {Boolean} True if the rectangles intersect.\n  */\n  p.intersects = function (rect) {\n    return rect.x <= this.x + this.width && this.x <= rect.x + rect.width && rect.y <= this.y + this.height && this.y <= rect.y + rect.height;\n  };\n\n  /** \n   * Returns true if the width or height are equal or less than 0.\n   * @method isEmpty\n   * @return {Boolean} True if the rectangle is empty.\n  */\n  p.isEmpty = function () {\n    return this.width <= 0 || this.height <= 0;\n  };\n\n  /**\n   * Returns a clone of the Rectangle instance.\n   * @method clone\n   * @return {Rectangle} a clone of the Rectangle instance.\n   **/\n  p.clone = function () {\n    return new Rectangle(this.x, this.y, this.width, this.height);\n  };\n\n  /**\n   * Returns a string representation of this object.\n   * @method toString\n   * @return {String} a string representation of the instance.\n   **/\n  p.toString = function () {\n    return \"[Rectangle (x=\" + this.x + \" y=\" + this.y + \" width=\" + this.width + \" height=\" + this.height + \")]\";\n  };\n  createjs.Rectangle = Rectangle;\n})();\n\n//##############################################################################\n// ButtonHelper.js\n//##############################################################################\n\n(function () {\n  \"use strict\";\n\n  // constructor:\n  /**\n   * The ButtonHelper is a helper class to create interactive buttons from {{#crossLink \"MovieClip\"}}{{/crossLink}} or\n   * {{#crossLink \"Sprite\"}}{{/crossLink}} instances. This class will intercept mouse events from an object, and\n   * automatically call {{#crossLink \"Sprite/gotoAndStop\"}}{{/crossLink}} or {{#crossLink \"Sprite/gotoAndPlay\"}}{{/crossLink}},\n   * to the respective animation labels, add a pointer cursor, and allows the user to define a hit state frame.\n   *\n   * The ButtonHelper instance does not need to be added to the stage, but a reference should be maintained to prevent\n   * garbage collection.\n   * \n   * Note that over states will not work unless you call {{#crossLink \"Stage/enableMouseOver\"}}{{/crossLink}}.\n   *\n   * <h4>Example</h4>\n   *\n   *      var helper = new createjs.ButtonHelper(myInstance, \"out\", \"over\", \"down\", false, myInstance, \"hit\");\n   *      myInstance.addEventListener(\"click\", handleClick);\n   *      function handleClick(event) {\n   *          // Click Happened.\n   *      }\n   *\n   * @class ButtonHelper\n   * @param {Sprite|MovieClip} target The instance to manage.\n   * @param {String} [outLabel=\"out\"] The label or animation to go to when the user rolls out of the button.\n   * @param {String} [overLabel=\"over\"] The label or animation to go to when the user rolls over the button.\n   * @param {String} [downLabel=\"down\"] The label or animation to go to when the user presses the button.\n   * @param {Boolean} [play=false] If the helper should call \"gotoAndPlay\" or \"gotoAndStop\" on the button when changing\n   * states.\n   * @param {DisplayObject} [hitArea] An optional item to use as the hit state for the button. If this is not defined,\n   * then the button's visible states will be used instead. Note that the same instance as the \"target\" argument can be\n   * used for the hitState.\n   * @param {String} [hitLabel] The label or animation on the hitArea instance that defines the hitArea bounds. If this is\n   * null, then the default state of the hitArea will be used. *\n   * @constructor\n   */\n  function ButtonHelper(target, outLabel, overLabel, downLabel, play, hitArea, hitLabel) {\n    if (!target.addEventListener) {\n      return;\n    }\n\n    // public properties:\n    /**\n     * The target for this button helper.\n     * @property target\n     * @type MovieClip | Sprite\n     * @readonly\n     **/\n    this.target = target;\n\n    /**\n     * The label name or frame number to display when the user mouses out of the target. Defaults to \"over\".\n     * @property overLabel\n     * @type String | Number\n     **/\n    this.overLabel = overLabel == null ? \"over\" : overLabel;\n\n    /**\n     * The label name or frame number to display when the user mouses over the target. Defaults to \"out\".\n     * @property outLabel\n     * @type String | Number\n     **/\n    this.outLabel = outLabel == null ? \"out\" : outLabel;\n\n    /**\n     * The label name or frame number to display when the user presses on the target. Defaults to \"down\".\n     * @property downLabel\n     * @type String | Number\n     **/\n    this.downLabel = downLabel == null ? \"down\" : downLabel;\n\n    /**\n     * If true, then ButtonHelper will call gotoAndPlay, if false, it will use gotoAndStop. Default is false.\n     * @property play\n     * @default false\n     * @type Boolean\n     **/\n    this.play = play;\n\n    //  private properties\n    /**\n     * @property _isPressed\n     * @type Boolean\n     * @protected\n     **/\n    this._isPressed = false;\n\n    /**\n     * @property _isOver\n     * @type Boolean\n     * @protected\n     **/\n    this._isOver = false;\n\n    /**\n     * @property _enabled\n     * @type Boolean\n     * @protected\n     **/\n    this._enabled = false;\n\n    // setup:\n    target.mouseChildren = false; // prevents issues when children are removed from the display list when state changes.\n    this.enabled = true;\n    this.handleEvent({});\n    if (hitArea) {\n      if (hitLabel) {\n        hitArea.actionsEnabled = false;\n        hitArea.gotoAndStop && hitArea.gotoAndStop(hitLabel);\n      }\n      target.hitArea = hitArea;\n    }\n  }\n  var p = ButtonHelper.prototype;\n\n  /**\n   * <strong>REMOVED</strong>. Removed in favor of using `MySuperClass_constructor`.\n   * See {{#crossLink \"Utility Methods/extend\"}}{{/crossLink}} and {{#crossLink \"Utility Methods/promote\"}}{{/crossLink}}\n   * for details.\n   *\n   * There is an inheritance tutorial distributed with EaselJS in /tutorials/Inheritance.\n   *\n   * @method initialize\n   * @protected\n   * @deprecated\n   */\n  // p.initialize = function() {}; // searchable for devs wondering where it is.\n\n  // getter / setters:\n  /**\n   * Use the {{#crossLink \"ButtonHelper/enabled:property\"}}{{/crossLink}} property instead.\n   * @method setEnabled\n   * @param {Boolean} value\n   * @deprecated\n   **/\n  p.setEnabled = function (value) {\n    // TODO: deprecated.\n    if (value == this._enabled) {\n      return;\n    }\n    var o = this.target;\n    this._enabled = value;\n    if (value) {\n      o.cursor = \"pointer\";\n      o.addEventListener(\"rollover\", this);\n      o.addEventListener(\"rollout\", this);\n      o.addEventListener(\"mousedown\", this);\n      o.addEventListener(\"pressup\", this);\n      if (o._reset) {\n        o.__reset = o._reset;\n        o._reset = this._reset;\n      }\n    } else {\n      o.cursor = null;\n      o.removeEventListener(\"rollover\", this);\n      o.removeEventListener(\"rollout\", this);\n      o.removeEventListener(\"mousedown\", this);\n      o.removeEventListener(\"pressup\", this);\n      if (o.__reset) {\n        o._reset = o.__reset;\n        delete o.__reset;\n      }\n    }\n  };\n  /**\n   * Use the {{#crossLink \"ButtonHelper/enabled:property\"}}{{/crossLink}} property instead.\n   * @method getEnabled\n   * @return {Boolean}\n   * @deprecated\n   **/\n  p.getEnabled = function () {\n    return this._enabled;\n  };\n\n  /**\n   * Enables or disables the button functionality on the target.\n   * @property enabled\n   * @type {Boolean}\n   **/\n  try {\n    Object.defineProperties(p, {\n      enabled: {\n        get: p.getEnabled,\n        set: p.setEnabled\n      }\n    });\n  } catch (e) {} // TODO: use Log\n\n  // public methods:\n  /**\n   * Returns a string representation of this object.\n   * @method toString\n   * @return {String} a string representation of the instance.\n   **/\n  p.toString = function () {\n    return \"[ButtonHelper]\";\n  };\n\n  // private methods:\n  /**\n   * @method handleEvent\n   * @param {Object} evt The mouse event to handle.\n   * @protected\n   **/\n  p.handleEvent = function (evt) {\n    var label,\n      t = this.target,\n      type = evt.type;\n    if (type == \"mousedown\") {\n      this._isPressed = true;\n      label = this.downLabel;\n    } else if (type == \"pressup\") {\n      this._isPressed = false;\n      label = this._isOver ? this.overLabel : this.outLabel;\n    } else if (type == \"rollover\") {\n      this._isOver = true;\n      label = this._isPressed ? this.downLabel : this.overLabel;\n    } else {\n      // rollout and default\n      this._isOver = false;\n      label = this._isPressed ? this.overLabel : this.outLabel;\n    }\n    if (this.play) {\n      t.gotoAndPlay && t.gotoAndPlay(label);\n    } else {\n      t.gotoAndStop && t.gotoAndStop(label);\n    }\n  };\n\n  /**\n   * Injected into target. Preserves the paused state through a reset.\n   * @method _reset\n   * @protected\n   **/\n  p._reset = function () {\n    // TODO: explore better ways to handle this issue. This is hacky & disrupts object signatures.\n    var p = this.paused;\n    this.__reset();\n    this.paused = p;\n  };\n  createjs.ButtonHelper = ButtonHelper;\n})();\n\n//##############################################################################\n// Shadow.js\n//##############################################################################\n\n(function () {\n  \"use strict\";\n\n  // constructor:\n  /**\n   * This class encapsulates the properties required to define a shadow to apply to a {{#crossLink \"DisplayObject\"}}{{/crossLink}}\n   * via its <code>shadow</code> property.\n   *\n   * <h4>Example</h4>\n   *\n   *      myImage.shadow = new createjs.Shadow(\"#000000\", 5, 5, 10);\n   *\n   * @class Shadow\n   * @constructor\n   * @param {String} color The color of the shadow. This can be any valid CSS color value.\n   * @param {Number} offsetX The x offset of the shadow in pixels.\n   * @param {Number} offsetY The y offset of the shadow in pixels.\n   * @param {Number} blur The size of the blurring effect.\n   **/\n  function Shadow(color, offsetX, offsetY, blur) {\n    // public properties:\n    /** \n     * The color of the shadow. This can be any valid CSS color value.\n     * @property color\n     * @type String\n     * @default null\n     */\n    this.color = color || \"black\";\n\n    /** The x offset of the shadow.\n     * @property offsetX\n     * @type Number\n     * @default 0\n     */\n    this.offsetX = offsetX || 0;\n\n    /** The y offset of the shadow.\n     * @property offsetY\n     * @type Number\n     * @default 0\n     */\n    this.offsetY = offsetY || 0;\n\n    /** The blur of the shadow.\n     * @property blur\n     * @type Number\n     * @default 0\n     */\n    this.blur = blur || 0;\n  }\n  var p = Shadow.prototype;\n\n  /**\n   * <strong>REMOVED</strong>. Removed in favor of using `MySuperClass_constructor`.\n   * See {{#crossLink \"Utility Methods/extend\"}}{{/crossLink}} and {{#crossLink \"Utility Methods/promote\"}}{{/crossLink}}\n   * for details.\n   *\n   * There is an inheritance tutorial distributed with EaselJS in /tutorials/Inheritance.\n   *\n   * @method initialize\n   * @protected\n   * @deprecated\n   */\n  // p.initialize = function() {}; // searchable for devs wondering where it is.\n\n  // static public properties:\n  /**\n   * An identity shadow object (all properties are set to 0).\n   * @property identity\n   * @type Shadow\n   * @static\n   * @final\n   * @readonly\n   **/\n  Shadow.identity = new Shadow(\"transparent\", 0, 0, 0);\n\n  // public methods:\n  /**\n   * Returns a string representation of this object.\n   * @method toString\n   * @return {String} a string representation of the instance.\n   **/\n  p.toString = function () {\n    return \"[Shadow]\";\n  };\n\n  /**\n   * Returns a clone of this Shadow instance.\n   * @method clone\n   * @return {Shadow} A clone of the current Shadow instance.\n   **/\n  p.clone = function () {\n    return new Shadow(this.color, this.offsetX, this.offsetY, this.blur);\n  };\n  createjs.Shadow = Shadow;\n})();\n\n//##############################################################################\n// SpriteSheet.js\n//##############################################################################\n\n(function () {\n  \"use strict\";\n\n  // constructor:\n  /**\n   * Encapsulates the properties and methods associated with a sprite sheet. A sprite sheet is a series of images (usually\n   * animation frames) combined into a larger image (or images). For example, an animation consisting of eight 100x100\n   * images could be combined into a single 400x200 sprite sheet (4 frames across by 2 high).\n   *\n   * The data passed to the SpriteSheet constructor defines:\n   * <ol>\n   * \t<li> The source image or images to use.</li>\n   * \t<li> The positions of individual image frames.</li>\n   * \t<li> Sequences of frames that form named animations. Optional.</li>\n   * \t<li> The target playback framerate. Optional.</li>\n   * </ol>\n   * <h3>SpriteSheet Format</h3>\n   * SpriteSheets are an object with two required properties (`images` and `frames`), and two optional properties\n   * (`framerate` and `animations`). This makes them easy to define in javascript code, or in JSON.\n   *\n   * <h4>images</h4>\n   * An array of source images. Images can be either an HTMlimage\n   * instance, or a uri to an image. The former is recommended to control preloading.\n   *\n   * \timages: [image1, \"path/to/image2.png\"],\n   *\n   * <h4>frames</h4>\n   * Defines the individual frames. There are two supported formats for frame data:\n   * When all of the frames are the same size (in a grid), use an object with `width`, `height`, `regX`, `regY`,\n   * and `count` properties.\n   *\n   * <ul>\n   *  <li>`width` & `height` are required and specify the dimensions of the frames</li>\n   *  <li>`regX` & `regY` indicate the registration point or \"origin\" of the frames</li>\n   *  <li>`spacing` indicate the spacing between frames</li>\n   *  <li>`margin` specify the margin around the image(s)</li>\n   *  <li>`count` allows you to specify the total number of frames in the spritesheet; if omitted, this will\n   *  be calculated based on the dimensions of the source images and the frames. Frames will be assigned\n   *  indexes based on their position in the source images (left to right, top to bottom).</li>\n   * </ul>\n   *\n   *  \tframes: {width:64, height:64, count:20, regX: 32, regY:64, spacing:0, margin:0}\n   *\n   * If the frames are of different sizes, use an array of frame definitions. Each definition is itself an array\n   * with 4 required and 3 optional entries, in the order:\n   *\n   * <ul>\n   *  <li>The first four, `x`, `y`, `width`, and `height` are required and define the frame rectangle.</li>\n   *  <li>The fifth, `imageIndex`, specifies the index of the source image (defaults to 0)</li>\n   *  <li>The last two, `regX` and `regY` specify the registration point of the frame</li>\n   * </ul>\n   *\n   * \tframes: [\n   * \t\t// x, y, width, height, imageIndex*, regX*, regY*\n   * \t\t[64, 0, 96, 64],\n   * \t\t[0, 0, 64, 64, 1, 32, 32]\n   * \t\t// etc.\n   * \t]\n   *\n   * <h4>animations</h4>\n   * Optional. An object defining sequences of frames to play as named animations. Each property corresponds to an\n   * animation of the same name. Each animation must specify the frames to play, and may\n   * also include a relative playback `speed` (ex. 2 would playback at double speed, 0.5 at half), and\n   * the name of the `next` animation to sequence to after it completes.\n   *\n   * There are three formats supported for defining the frames in an animation, which can be mixed and matched as appropriate:\n   * <ol>\n   * \t<li>for a single frame animation, you can simply specify the frame index\n   *\n   * \t\tanimations: {\n   * \t\t\tsit: 7\n   * \t\t}\n   *\n   * </li>\n   * <li>\n   *      for an animation of consecutive frames, you can use an array with two required, and two optional entries\n   * \t\tin the order: `start`, `end`, `next`, and `speed`. This will play the frames from start to end inclusive.\n   *\n   * \t\tanimations: {\n   * \t\t\t// start, end, next*, speed*\n   * \t\t\trun: [0, 8],\n   * \t\t\tjump: [9, 12, \"run\", 2]\n   * \t\t}\n   *\n   *  </li>\n   *  <li>\n   *     for non-consecutive frames, you can use an object with a `frames` property defining an array of frame\n   *     indexes to play in order. The object can also specify `next` and `speed` properties.\n   *\n   * \t\tanimations: {\n   * \t\t\twalk: {\n   * \t\t\t\tframes: [1,2,3,3,2,1]\n   * \t\t\t},\n   * \t\t\tshoot: {\n   * \t\t\t\tframes: [1,4,5,6],\n   * \t\t\t\tnext: \"walk\",\n   * \t\t\t\tspeed: 0.5\n   * \t\t\t}\n   * \t\t}\n   *\n   *  </li>\n   * </ol>\n   * <strong>Note:</strong> the `speed` property was added in EaselJS 0.7.0. Earlier versions had a `frequency`\n   * property instead, which was the inverse of `speed`. For example, a value of \"4\" would be 1/4 normal speed in\n   * earlier versions, but is 4x normal speed in EaselJS 0.7.0+.\n   *\n   * <h4>framerate</h4>\n   * Optional. Indicates the default framerate to play this spritesheet at in frames per second. See\n   * {{#crossLink \"SpriteSheet/framerate:property\"}}{{/crossLink}} for more information.\n   *\n   * \t\tframerate: 20\n   *\n   * Note that the Sprite framerate will only work if the stage update method is provided with the {{#crossLink \"Ticker/tick:event\"}}{{/crossLink}}\n   * event generated by the {{#crossLink \"Ticker\"}}{{/crossLink}}.\n   *\n   * \t\tcreatejs.Ticker.on(\"tick\", handleTick);\n   * \t\tfunction handleTick(event) {\n   *\t\t\tstage.update(event);\n   *\t\t}\n   *\n   * <h3>Example</h3>\n   * To define a simple sprite sheet, with a single image \"sprites.jpg\" arranged in a regular 50x50 grid with three\n   * animations: \"stand\" showing the first frame, \"run\" looping frame 1-5 inclusive, and \"jump\" playing frame 6-8 and\n   * sequencing back to run.\n   *\n   * \t\tvar data = {\n   * \t\t\timages: [\"sprites.jpg\"],\n   * \t\t\tframes: {width:50, height:50},\n   * \t\t\tanimations: {\n   * \t\t\t\tstand:0,\n   * \t\t\t\trun:[1,5],\n   * \t\t\t\tjump:[6,8,\"run\"]\n   * \t\t\t}\n   * \t\t};\n   * \t\tvar spriteSheet = new createjs.SpriteSheet(data);\n   * \t\tvar animation = new createjs.Sprite(spriteSheet, \"run\");\n   *\n   * <h3>Generating SpriteSheet Images</h3>\n   * Spritesheets can be created manually by combining images in PhotoShop, and specifying the frame size or\n   * coordinates manually, however there are a number of tools that facilitate this.\n   * <ul>\n   *     <li>Exporting SpriteSheets or HTML5 content from Flash Pro supports the EaselJS SpriteSheet format.</li>\n   *     <li>The popular <a href=\"https://www.codeandweb.com/texturepacker/easeljs\" target=\"_blank\">Texture Packer</a> has\n   *     EaselJS support.\n   *     <li>SWF animations in Flash can be exported to SpriteSheets using <a href=\"http://createjs.com/zoe\" target=\"_blank\"></a></li>\n   * </ul>\n   *\n   * <h3>Cross Origin Issues</h3>\n   * <strong>Warning:</strong> Images loaded cross-origin will throw cross-origin security errors when interacted with\n   * using:\n   * <ul>\n   *     <li>a mouse</li>\n   *     <li>methods such as {{#crossLink \"Container/getObjectUnderPoint\"}}{{/crossLink}}</li>\n   *     <li>Filters (see {{#crossLink \"Filter\"}}{{/crossLink}})</li>\n   *     <li>caching (see {{#crossLink \"DisplayObject/cache\"}}{{/crossLink}})</li>\n   * </ul>\n   * You can get around this by setting `crossOrigin` property on your images before passing them to EaselJS, or\n   * setting the `crossOrigin` property on PreloadJS' LoadQueue or LoadItems.\n   *\n   * \t\tvar image = new Image();\n   * \t\timg.crossOrigin=\"Anonymous\";\n   * \t\timg.src = \"http://server-with-CORS-support.com/path/to/image.jpg\";\n   *\n   * If you pass string paths to SpriteSheets, they will not work cross-origin. The server that stores the image must\n   * support cross-origin requests, or this will not work. For more information, check out\n   * <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Access_control_CORS\" target=\"_blank\">CORS overview on MDN</a>.\n   *\n   * @class SpriteSheet\n   * @constructor\n   * @param {Object} data An object describing the SpriteSheet data.\n   * @extends EventDispatcher\n   **/\n  function SpriteSheet(data) {\n    this.EventDispatcher_constructor();\n\n    // public properties:\n    /**\n     * Indicates whether all images are finished loading.\n     * @property complete\n     * @type Boolean\n     * @readonly\n     **/\n    this.complete = true;\n\n    /**\n     * Specifies the framerate to use by default for Sprite instances using the SpriteSheet. See the Sprite class\n     * {{#crossLink \"Sprite/framerate:property\"}}{{/crossLink}} for more information.\n     * @property framerate\n     * @type Number\n     **/\n    this.framerate = 0;\n\n    // private properties:\n    /**\n     * @property _animations\n     * @protected\n     * @type Array\n     **/\n    this._animations = null;\n\n    /**\n     * @property _frames\n     * @protected\n     * @type Array\n     **/\n    this._frames = null;\n\n    /**\n     * @property _images\n     * @protected\n     * @type Array\n     **/\n    this._images = null;\n\n    /**\n     * @property _data\n     * @protected\n     * @type Object\n     **/\n    this._data = null;\n\n    /**\n     * @property _loadCount\n     * @protected\n     * @type Number\n     **/\n    this._loadCount = 0;\n\n    // only used for simple frame defs:\n    /**\n     * @property _frameHeight\n     * @protected\n     * @type Number\n     **/\n    this._frameHeight = 0;\n\n    /**\n     * @property _frameWidth\n     * @protected\n     * @type Number\n     **/\n    this._frameWidth = 0;\n\n    /**\n     * @property _numFrames\n     * @protected\n     * @type Number\n     **/\n    this._numFrames = 0;\n\n    /**\n     * @property _regX\n     * @protected\n     * @type Number\n     **/\n    this._regX = 0;\n\n    /**\n     * @property _regY\n     * @protected\n     * @type Number\n     **/\n    this._regY = 0;\n\n    /**\n     * @property _spacing\n     * @protected\n     * @type Number\n     **/\n    this._spacing = 0;\n\n    /**\n     * @property _margin\n     * @protected\n     * @type Number\n     **/\n    this._margin = 0;\n\n    // setup:\n    this._parseData(data);\n  }\n  var p = createjs.extend(SpriteSheet, createjs.EventDispatcher);\n\n  // TODO: deprecated\n  // p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\n\n  // events:\n  /**\n   * Dispatched when all images are loaded.  Note that this only fires if the images\n   * were not fully loaded when the sprite sheet was initialized. You should check the complete property\n   * to prior to adding a listener. Ex.\n   *\n   * \tvar sheet = new createjs.SpriteSheet(data);\n   * \tif (!sheet.complete) {\n   * \t\t// not preloaded, listen for the complete event:\n   * \t\tsheet.addEventListener(\"complete\", handler);\n   * \t}\n   *\n   * @event complete\n   * @param {Object} target The object that dispatched the event.\n   * @param {String} type The event type.\n   * @since 0.6.0\n   */\n\n  /**\n   * Dispatched when getFrame is called with a valid frame index. This is primarily intended for use by {{#crossLink \"SpriteSheetBuilder\"}}{{/crossLink}}\n   * when doing on-demand rendering.\n   * @event getframe\n   * @param {Number} index The frame index.\n   * @param {Object} frame The frame object that getFrame will return.\n   */\n\n  /**\n   * Dispatched when an image encounters an error. A SpriteSheet will dispatch an error event for each image that\n   * encounters an error, and will still dispatch a {{#crossLink \"SpriteSheet/complete:event\"}}{{/crossLink}}\n   * event once all images are finished processing, even if an error is encountered.\n   * @event error\n   * @param {String} src The source of the image that failed to load.\n   * @since 0.8.2\n   */\n\n  // getter / setters:\n  /**\n   * Use the {{#crossLink \"SpriteSheet/animations:property\"}}{{/crossLink}} property instead.\n   * @method getAnimations\n   * @return {Array}\n   * @deprecated\n   **/\n  p.getAnimations = function () {\n    return this._animations.slice();\n  };\n\n  /**\n   * Returns an array of all available animation names available on this sprite sheet as strings.\n   * @property animations\n   * @type {Array}\n   * @readonly\n   **/\n  try {\n    Object.defineProperties(p, {\n      animations: {\n        get: p.getAnimations\n      }\n    });\n  } catch (e) {}\n\n  // public methods:\n  /**\n   * Returns the total number of frames in the specified animation, or in the whole sprite\n   * sheet if the animation param is omitted. Returns 0 if the spritesheet relies on calculated frame counts, and\n   * the images have not been fully loaded.\n   * @method getNumFrames\n   * @param {String} animation The name of the animation to get a frame count for.\n   * @return {Number} The number of frames in the animation, or in the entire sprite sheet if the animation param is omitted.\n   */\n  p.getNumFrames = function (animation) {\n    if (animation == null) {\n      return this._frames ? this._frames.length : this._numFrames || 0;\n    } else {\n      var data = this._data[animation];\n      if (data == null) {\n        return 0;\n      } else {\n        return data.frames.length;\n      }\n    }\n  };\n\n  /**\n   * Returns an object defining the specified animation. The returned object contains:<UL>\n   * \t<li>frames: an array of the frame ids in the animation</li>\n   * \t<li>speed: the playback speed for this animation</li>\n   * \t<li>name: the name of the animation</li>\n   * \t<li>next: the default animation to play next. If the animation loops, the name and next property will be the\n   * \tsame.</li>\n   * </UL>\n   * @method getAnimation\n   * @param {String} name The name of the animation to get.\n   * @return {Object} a generic object with frames, speed, name, and next properties.\n   **/\n  p.getAnimation = function (name) {\n    return this._data[name];\n  };\n\n  /**\n   * Returns an object specifying the image and source rect of the specified frame. The returned object has:<UL>\n   * \t<li>an image property holding a reference to the image object in which the frame is found</li>\n   * \t<li>a rect property containing a Rectangle instance which defines the boundaries for the frame within that\n   * \timage.</li>\n   * \t<li> A regX and regY property corresponding to the regX/Y values for the frame.\n   * </UL>\n   * @method getFrame\n   * @param {Number} frameIndex The index of the frame.\n   * @return {Object} a generic object with image and rect properties. Returns null if the frame does not exist.\n   **/\n  p.getFrame = function (frameIndex) {\n    var frame;\n    if (this._frames && (frame = this._frames[frameIndex])) {\n      return frame;\n    }\n    return null;\n  };\n\n  /**\n   * Returns a {{#crossLink \"Rectangle\"}}{{/crossLink}} instance defining the bounds of the specified frame relative\n   * to the origin. For example, a 90 x 70 frame with a regX of 50 and a regY of 40 would return:\n   *\n   * \t[x=-50, y=-40, width=90, height=70]\n   *\n   * @method getFrameBounds\n   * @param {Number} frameIndex The index of the frame.\n   * @param {Rectangle} [rectangle] A Rectangle instance to copy the values into. By default a new instance is created.\n   * @return {Rectangle} A Rectangle instance. Returns null if the frame does not exist, or the image is not fully loaded.\n   **/\n  p.getFrameBounds = function (frameIndex, rectangle) {\n    var frame = this.getFrame(frameIndex);\n    return frame ? (rectangle || new createjs.Rectangle()).setValues(-frame.regX, -frame.regY, frame.rect.width, frame.rect.height) : null;\n  };\n\n  /**\n   * Returns a string representation of this object.\n   * @method toString\n   * @return {String} a string representation of the instance.\n   **/\n  p.toString = function () {\n    return \"[SpriteSheet]\";\n  };\n\n  /**\n   * SpriteSheet cannot be cloned. A SpriteSheet can be shared by multiple Sprite instances without cloning it.\n   * @method clone\n   **/\n  p.clone = function () {\n    throw \"SpriteSheet cannot be cloned.\";\n  };\n\n  // private methods:\n  /**\n   * @method _parseData\n   * @param {Object} data An object describing the SpriteSheet data.\n   * @protected\n   **/\n  p._parseData = function (data) {\n    var i, l, o, a;\n    if (data == null) {\n      return;\n    }\n    this.framerate = data.framerate || 0;\n\n    // parse images:\n    if (data.images && (l = data.images.length) > 0) {\n      a = this._images = [];\n      for (i = 0; i < l; i++) {\n        var img = data.images[i];\n        if (typeof img == \"string\") {\n          var src = img;\n          img = document.createElement(\"img\");\n          img.src = src;\n        }\n        a.push(img);\n        if (!img.getContext && !img.naturalWidth) {\n          this._loadCount++;\n          this.complete = false;\n          (function (o, src) {\n            img.onload = function () {\n              o._handleImageLoad(src);\n            };\n          })(this, src);\n          (function (o, src) {\n            img.onerror = function () {\n              o._handleImageError(src);\n            };\n          })(this, src);\n        }\n      }\n    }\n\n    // parse frames:\n    if (data.frames == null) {// nothing\n    } else if (Array.isArray(data.frames)) {\n      this._frames = [];\n      a = data.frames;\n      for (i = 0, l = a.length; i < l; i++) {\n        var arr = a[i];\n        this._frames.push({\n          image: this._images[arr[4] ? arr[4] : 0],\n          rect: new createjs.Rectangle(arr[0], arr[1], arr[2], arr[3]),\n          regX: arr[5] || 0,\n          regY: arr[6] || 0\n        });\n      }\n    } else {\n      o = data.frames;\n      this._frameWidth = o.width;\n      this._frameHeight = o.height;\n      this._regX = o.regX || 0;\n      this._regY = o.regY || 0;\n      this._spacing = o.spacing || 0;\n      this._margin = o.margin || 0;\n      this._numFrames = o.count;\n      if (this._loadCount == 0) {\n        this._calculateFrames();\n      }\n    }\n\n    // parse animations:\n    this._animations = [];\n    if ((o = data.animations) != null) {\n      this._data = {};\n      var name;\n      for (name in o) {\n        var anim = {\n          name: name\n        };\n        var obj = o[name];\n        if (typeof obj == \"number\") {\n          // single frame\n          a = anim.frames = [obj];\n        } else if (Array.isArray(obj)) {\n          // simple\n          if (obj.length == 1) {\n            anim.frames = [obj[0]];\n          } else {\n            anim.speed = obj[3];\n            anim.next = obj[2];\n            a = anim.frames = [];\n            for (i = obj[0]; i <= obj[1]; i++) {\n              a.push(i);\n            }\n          }\n        } else {\n          // complex\n          anim.speed = obj.speed;\n          anim.next = obj.next;\n          var frames = obj.frames;\n          a = anim.frames = typeof frames == \"number\" ? [frames] : frames.slice(0);\n        }\n        if (anim.next === true || anim.next === undefined) {\n          anim.next = name;\n        } // loop\n        if (anim.next === false || a.length < 2 && anim.next == name) {\n          anim.next = null;\n        } // stop\n        if (!anim.speed) {\n          anim.speed = 1;\n        }\n        this._animations.push(name);\n        this._data[name] = anim;\n      }\n    }\n  };\n\n  /**\n   * @method _handleImageLoad\n   * @protected\n   **/\n  p._handleImageLoad = function (src) {\n    if (--this._loadCount == 0) {\n      this._calculateFrames();\n      this.complete = true;\n      this.dispatchEvent(\"complete\");\n    }\n  };\n\n  /**\n   * @method _handleImageError\n   * @protected\n   */\n  p._handleImageError = function (src) {\n    var errorEvent = new createjs.Event(\"error\");\n    errorEvent.src = src;\n    this.dispatchEvent(errorEvent);\n\n    // Complete is still dispatched.\n    if (--this._loadCount == 0) {\n      this.dispatchEvent(\"complete\");\n    }\n  };\n\n  /**\n   * @method _calculateFrames\n   * @protected\n   **/\n  p._calculateFrames = function () {\n    if (this._frames || this._frameWidth == 0) {\n      return;\n    }\n    this._frames = [];\n    var maxFrames = this._numFrames || 100000; // if we go over this, something is wrong.\n    var frameCount = 0,\n      frameWidth = this._frameWidth,\n      frameHeight = this._frameHeight;\n    var spacing = this._spacing,\n      margin = this._margin;\n    imgLoop: for (var i = 0, imgs = this._images; i < imgs.length; i++) {\n      var img = imgs[i],\n        imgW = img.width,\n        imgH = img.height;\n      var y = margin;\n      while (y <= imgH - margin - frameHeight) {\n        var x = margin;\n        while (x <= imgW - margin - frameWidth) {\n          if (frameCount >= maxFrames) {\n            break imgLoop;\n          }\n          frameCount++;\n          this._frames.push({\n            image: img,\n            rect: new createjs.Rectangle(x, y, frameWidth, frameHeight),\n            regX: this._regX,\n            regY: this._regY\n          });\n          x += frameWidth + spacing;\n        }\n        y += frameHeight + spacing;\n      }\n    }\n    this._numFrames = frameCount;\n  };\n  createjs.SpriteSheet = createjs.promote(SpriteSheet, \"EventDispatcher\");\n})();\n\n//##############################################################################\n// Graphics.js\n//##############################################################################\n\n(function () {\n  \"use strict\";\n\n  // constructor:\n  /**\n   * The Graphics class exposes an easy to use API for generating vector drawing instructions and drawing them to a\n   * specified context. Note that you can use Graphics without any dependency on the EaselJS framework by calling {{#crossLink \"Graphics/draw\"}}{{/crossLink}}\n   * directly, or it can be used with the {{#crossLink \"Shape\"}}{{/crossLink}} object to draw vector graphics within the\n   * context of an EaselJS display list.\n   *\n   * There are two approaches to working with Graphics object: calling methods on a Graphics instance (the \"Graphics API\"), or\n   * instantiating Graphics command objects and adding them to the graphics queue via {{#crossLink \"Graphics/append\"}}{{/crossLink}}.\n   * The former abstracts the latter, simplifying beginning and ending paths, fills, and strokes.\n   *\n   *      var g = new createjs.Graphics();\n   *      g.setStrokeStyle(1);\n   *      g.beginStroke(\"#000000\");\n   *      g.beginFill(\"red\");\n   *      g.drawCircle(0,0,30);\n   *\n   * All drawing methods in Graphics return the Graphics instance, so they can be chained together. For example,\n   * the following line of code would generate the instructions to draw a rectangle with a red stroke and blue fill:\n   *\n   *      myGraphics.beginStroke(\"red\").beginFill(\"blue\").drawRect(20, 20, 100, 50);\n   *\n   * Each graphics API call generates a command object (see below). The last command to be created can be accessed via\n   * {{#crossLink \"Graphics/command:property\"}}{{/crossLink}}:\n   *\n   *      var fillCommand = myGraphics.beginFill(\"red\").command;\n   *      // ... later, update the fill style/color:\n   *      fillCommand.style = \"blue\";\n   *      // or change it to a bitmap fill:\n   *      fillCommand.bitmap(myImage);\n   *\n   * For more direct control of rendering, you can instantiate and append command objects to the graphics queue directly. In this case, you\n   * need to manage path creation manually, and ensure that fill/stroke is applied to a defined path:\n   *\n   *      // start a new path. Graphics.beginCmd is a reusable BeginPath instance:\n   *      myGraphics.append(createjs.Graphics.beginCmd);\n   *      // we need to define the path before applying the fill:\n   *      var circle = new createjs.Graphics.Circle(0,0,30);\n   *      myGraphics.append(circle);\n   *      // fill the path we just defined:\n   *      var fill = new createjs.Graphics.Fill(\"red\");\n   *      myGraphics.append(fill);\n   *\n   * These approaches can be used together, for example to insert a custom command:\n   *\n   *      myGraphics.beginFill(\"red\");\n   *      var customCommand = new CustomSpiralCommand(etc);\n   *      myGraphics.append(customCommand);\n   *      myGraphics.beginFill(\"blue\");\n   *      myGraphics.drawCircle(0, 0, 30);\n   *\n   * See {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more info on creating custom commands.\n   *\n   * <h4>Tiny API</h4>\n   * The Graphics class also includes a \"tiny API\", which is one or two-letter methods that are shortcuts for all of the\n   * Graphics methods. These methods are great for creating compact instructions, and is used by the Toolkit for CreateJS\n   * to generate readable code. All tiny methods are marked as protected, so you can view them by enabling protected\n   * descriptions in the docs.\n   *\n   * <table>\n   *     <tr><td><b>Tiny</b></td><td><b>Method</b></td><td><b>Tiny</b></td><td><b>Method</b></td></tr>\n   *     <tr><td>mt</td><td>{{#crossLink \"Graphics/moveTo\"}}{{/crossLink}} </td>\n   *     <td>lt</td> <td>{{#crossLink \"Graphics/lineTo\"}}{{/crossLink}}</td></tr>\n   *     <tr><td>a/at</td><td>{{#crossLink \"Graphics/arc\"}}{{/crossLink}} / {{#crossLink \"Graphics/arcTo\"}}{{/crossLink}} </td>\n   *     <td>bt</td><td>{{#crossLink \"Graphics/bezierCurveTo\"}}{{/crossLink}} </td></tr>\n   *     <tr><td>qt</td><td>{{#crossLink \"Graphics/quadraticCurveTo\"}}{{/crossLink}} (also curveTo)</td>\n   *     <td>r</td><td>{{#crossLink \"Graphics/rect\"}}{{/crossLink}} </td></tr>\n   *     <tr><td>cp</td><td>{{#crossLink \"Graphics/closePath\"}}{{/crossLink}} </td>\n   *     <td>c</td><td>{{#crossLink \"Graphics/clear\"}}{{/crossLink}} </td></tr>\n   *     <tr><td>f</td><td>{{#crossLink \"Graphics/beginFill\"}}{{/crossLink}} </td>\n   *     <td>lf</td><td>{{#crossLink \"Graphics/beginLinearGradientFill\"}}{{/crossLink}} </td></tr>\n   *     <tr><td>rf</td><td>{{#crossLink \"Graphics/beginRadialGradientFill\"}}{{/crossLink}} </td>\n   *     <td>bf</td><td>{{#crossLink \"Graphics/beginBitmapFill\"}}{{/crossLink}} </td></tr>\n   *     <tr><td>ef</td><td>{{#crossLink \"Graphics/endFill\"}}{{/crossLink}} </td>\n   *     <td>ss / sd</td><td>{{#crossLink \"Graphics/setStrokeStyle\"}}{{/crossLink}} / {{#crossLink \"Graphics/setStrokeDash\"}}{{/crossLink}} </td></tr>\n   *     <tr><td>s</td><td>{{#crossLink \"Graphics/beginStroke\"}}{{/crossLink}} </td>\n   *     <td>ls</td><td>{{#crossLink \"Graphics/beginLinearGradientStroke\"}}{{/crossLink}} </td></tr>\n   *     <tr><td>rs</td><td>{{#crossLink \"Graphics/beginRadialGradientStroke\"}}{{/crossLink}} </td>\n   *     <td>bs</td><td>{{#crossLink \"Graphics/beginBitmapStroke\"}}{{/crossLink}} </td></tr>\n   *     <tr><td>es</td><td>{{#crossLink \"Graphics/endStroke\"}}{{/crossLink}} </td>\n   *     <td>dr</td><td>{{#crossLink \"Graphics/drawRect\"}}{{/crossLink}} </td></tr>\n   *     <tr><td>rr</td><td>{{#crossLink \"Graphics/drawRoundRect\"}}{{/crossLink}} </td>\n   *     <td>rc</td><td>{{#crossLink \"Graphics/drawRoundRectComplex\"}}{{/crossLink}} </td></tr>\n   *     <tr><td>dc</td><td>{{#crossLink \"Graphics/drawCircle\"}}{{/crossLink}} </td>\n   *     <td>de</td><td>{{#crossLink \"Graphics/drawEllipse\"}}{{/crossLink}} </td></tr>\n   *     <tr><td>dp</td><td>{{#crossLink \"Graphics/drawPolyStar\"}}{{/crossLink}} </td>\n   *     <td>p</td><td>{{#crossLink \"Graphics/decodePath\"}}{{/crossLink}} </td></tr>\n   * </table>\n   *\n   * Here is the above example, using the tiny API instead.\n   *\n   *      myGraphics.s(\"red\").f(\"blue\").r(20, 20, 100, 50);\n   *\n   * @class Graphics\n   * @constructor\n   **/\n  function Graphics() {\n    // public properties\n    /**\n     * Holds a reference to the last command that was created or appended. For example, you could retain a reference\n     * to a Fill command in order to dynamically update the color later by using:\n     *\n     * \t\tvar myFill = myGraphics.beginFill(\"red\").command;\n     * \t\t// update color later:\n     * \t\tmyFill.style = \"yellow\";\n     *\n     * @property command\n     * @type Object\n     **/\n    this.command = null;\n\n    // private properties\n    /**\n     * @property _stroke\n     * @protected\n     * @type {Stroke}\n     **/\n    this._stroke = null;\n\n    /**\n     * @property _strokeStyle\n     * @protected\n     * @type {StrokeStyle}\n     **/\n    this._strokeStyle = null;\n\n    /**\n     * @property _oldStrokeStyle\n     * @protected\n     * @type {StrokeStyle}\n     **/\n    this._oldStrokeStyle = null;\n\n    /**\n     * @property _strokeDash\n     * @protected\n     * @type {StrokeDash}\n     **/\n    this._strokeDash = null;\n\n    /**\n     * @property _oldStrokeDash\n     * @protected\n     * @type {StrokeDash}\n     **/\n    this._oldStrokeDash = null;\n\n    /**\n     * @property _strokeIgnoreScale\n     * @protected\n     * @type Boolean\n     **/\n    this._strokeIgnoreScale = false;\n\n    /**\n     * @property _fill\n     * @protected\n     * @type {Fill}\n     **/\n    this._fill = null;\n\n    /**\n     * @property _instructions\n     * @protected\n     * @type {Array}\n     **/\n    this._instructions = [];\n\n    /**\n     * Indicates the last instruction index that was committed.\n     * @property _commitIndex\n     * @protected\n     * @type {Number}\n     **/\n    this._commitIndex = 0;\n\n    /**\n     * Uncommitted instructions.\n     * @property _activeInstructions\n     * @protected\n     * @type {Array}\n     **/\n    this._activeInstructions = [];\n\n    /**\n     * This indicates that there have been changes to the activeInstruction list since the last updateInstructions call.\n     * @property _dirty\n     * @protected\n     * @type {Boolean}\n     * @default false\n     **/\n    this._dirty = false;\n\n    /**\n     * Index to draw from if a store operation has happened.\n     * @property _storeIndex\n     * @protected\n     * @type {Number}\n     * @default 0\n     **/\n    this._storeIndex = 0;\n\n    // setup:\n    this.clear();\n  }\n  var p = Graphics.prototype;\n  var G = Graphics; // shortcut\n\n  /**\n   * <strong>REMOVED</strong>. Removed in favor of using `MySuperClass_constructor`.\n   * See {{#crossLink \"Utility Methods/extend\"}}{{/crossLink}} and {{#crossLink \"Utility Methods/promote\"}}{{/crossLink}}\n   * for details.\n   *\n   * There is an inheritance tutorial distributed with EaselJS in /tutorials/Inheritance.\n   *\n   * @method initialize\n   * @protected\n   * @deprecated\n   */\n  // p.initialize = function() {}; // searchable for devs wondering where it is.\n\n  // static public methods:\n  /**\n   * Returns a CSS compatible color string based on the specified RGB numeric color values in the format\n   * \"rgba(255,255,255,1.0)\", or if alpha is null then in the format \"rgb(255,255,255)\". For example,\n   *\n   *      createjs.Graphics.getRGB(50, 100, 150, 0.5);\n   *      // Returns \"rgba(50,100,150,0.5)\"\n   *\n   * It also supports passing a single hex color value as the first param, and an optional alpha value as the second\n   * param. For example,\n   *\n   *      createjs.Graphics.getRGB(0xFF00FF, 0.2);\n   *      // Returns \"rgba(255,0,255,0.2)\"\n   *\n   * @method getRGB\n   * @static\n   * @param {Number} r The red component for the color, between 0 and 0xFF (255).\n   * @param {Number} g The green component for the color, between 0 and 0xFF (255).\n   * @param {Number} b The blue component for the color, between 0 and 0xFF (255).\n   * @param {Number} [alpha] The alpha component for the color where 0 is fully transparent and 1 is fully opaque.\n   * @return {String} A CSS compatible color string based on the specified RGB numeric color values in the format\n   * \"rgba(255,255,255,1.0)\", or if alpha is null then in the format \"rgb(255,255,255)\".\n   **/\n  Graphics.getRGB = function (r, g, b, alpha) {\n    if (r != null && b == null) {\n      alpha = g;\n      b = r & 0xFF;\n      g = r >> 8 & 0xFF;\n      r = r >> 16 & 0xFF;\n    }\n    if (alpha == null) {\n      return \"rgb(\" + r + \",\" + g + \",\" + b + \")\";\n    } else {\n      return \"rgba(\" + r + \",\" + g + \",\" + b + \",\" + alpha + \")\";\n    }\n  };\n\n  /**\n   * Returns a CSS compatible color string based on the specified HSL numeric color values in the format \"hsla(360,100,100,1.0)\",\n   * or if alpha is null then in the format \"hsl(360,100,100)\".\n   *\n   *      createjs.Graphics.getHSL(150, 100, 70);\n   *      // Returns \"hsl(150,100,70)\"\n   *\n   * @method getHSL\n   * @static\n   * @param {Number} hue The hue component for the color, between 0 and 360.\n   * @param {Number} saturation The saturation component for the color, between 0 and 100.\n   * @param {Number} lightness The lightness component for the color, between 0 and 100.\n   * @param {Number} [alpha] The alpha component for the color where 0 is fully transparent and 1 is fully opaque.\n   * @return {String} A CSS compatible color string based on the specified HSL numeric color values in the format\n   * \"hsla(360,100,100,1.0)\", or if alpha is null then in the format \"hsl(360,100,100)\".\n   **/\n  Graphics.getHSL = function (hue, saturation, lightness, alpha) {\n    if (alpha == null) {\n      return \"hsl(\" + hue % 360 + \",\" + saturation + \"%,\" + lightness + \"%)\";\n    } else {\n      return \"hsla(\" + hue % 360 + \",\" + saturation + \"%,\" + lightness + \"%,\" + alpha + \")\";\n    }\n  };\n\n  // static properties:\n  /**\n   * A reusable instance of {{#crossLink \"Graphics/BeginPath\"}}{{/crossLink}} to avoid\n   * unnecessary instantiation.\n   * @property beginCmd\n   * @type {Graphics.BeginPath}\n   * @static\n   **/\n  // defined at the bottom of this file.\n\n  /**\n   * Map of Base64 characters to values. Used by {{#crossLink \"Graphics/decodePath\"}}{{/crossLink}}.\n   * @property BASE_64\n   * @static\n   * @final\n   * @readonly\n   * @type {Object}\n   **/\n  Graphics.BASE_64 = {\n    \"A\": 0,\n    \"B\": 1,\n    \"C\": 2,\n    \"D\": 3,\n    \"E\": 4,\n    \"F\": 5,\n    \"G\": 6,\n    \"H\": 7,\n    \"I\": 8,\n    \"J\": 9,\n    \"K\": 10,\n    \"L\": 11,\n    \"M\": 12,\n    \"N\": 13,\n    \"O\": 14,\n    \"P\": 15,\n    \"Q\": 16,\n    \"R\": 17,\n    \"S\": 18,\n    \"T\": 19,\n    \"U\": 20,\n    \"V\": 21,\n    \"W\": 22,\n    \"X\": 23,\n    \"Y\": 24,\n    \"Z\": 25,\n    \"a\": 26,\n    \"b\": 27,\n    \"c\": 28,\n    \"d\": 29,\n    \"e\": 30,\n    \"f\": 31,\n    \"g\": 32,\n    \"h\": 33,\n    \"i\": 34,\n    \"j\": 35,\n    \"k\": 36,\n    \"l\": 37,\n    \"m\": 38,\n    \"n\": 39,\n    \"o\": 40,\n    \"p\": 41,\n    \"q\": 42,\n    \"r\": 43,\n    \"s\": 44,\n    \"t\": 45,\n    \"u\": 46,\n    \"v\": 47,\n    \"w\": 48,\n    \"x\": 49,\n    \"y\": 50,\n    \"z\": 51,\n    \"0\": 52,\n    \"1\": 53,\n    \"2\": 54,\n    \"3\": 55,\n    \"4\": 56,\n    \"5\": 57,\n    \"6\": 58,\n    \"7\": 59,\n    \"8\": 60,\n    \"9\": 61,\n    \"+\": 62,\n    \"/\": 63\n  };\n\n  /**\n   * Maps numeric values for the caps parameter of {{#crossLink \"Graphics/setStrokeStyle\"}}{{/crossLink}} to\n   * corresponding string values. This is primarily for use with the tiny API. The mappings are as follows: 0 to\n   * \"butt\", 1 to \"round\", and 2 to \"square\".\n   * For example, to set the line caps to \"square\":\n   *\n   *      myGraphics.ss(16, 2);\n   *\n   * @property STROKE_CAPS_MAP\n   * @static\n   * @final\n   * @readonly\n   * @type {Array}\n   **/\n  Graphics.STROKE_CAPS_MAP = [\"butt\", \"round\", \"square\"];\n\n  /**\n   * Maps numeric values for the joints parameter of {{#crossLink \"Graphics/setStrokeStyle\"}}{{/crossLink}} to\n   * corresponding string values. This is primarily for use with the tiny API. The mappings are as follows: 0 to\n   * \"miter\", 1 to \"round\", and 2 to \"bevel\".\n   * For example, to set the line joints to \"bevel\":\n   *\n   *      myGraphics.ss(16, 0, 2);\n   *\n   * @property STROKE_JOINTS_MAP\n   * @static\n   * @final\n   * @readonly\n   * @type {Array}\n   **/\n  Graphics.STROKE_JOINTS_MAP = [\"miter\", \"round\", \"bevel\"];\n\n  /**\n   * @property _ctx\n   * @static\n   * @protected\n   * @type {CanvasRenderingContext2D}\n   **/\n  var canvas = createjs.createCanvas ? createjs.createCanvas() : document.createElement(\"canvas\");\n  if (canvas.getContext) {\n    Graphics._ctx = canvas.getContext(\"2d\");\n    canvas.width = canvas.height = 1;\n  }\n\n  // getter / setters:\n  /**\n   * Use the {{#crossLink \"Graphics/instructions:property\"}}{{/crossLink}} property instead.\n   * @method getInstructions\n   * @return {Array}\n   * @deprecated\n   **/\n  p.getInstructions = function () {\n    this._updateInstructions();\n    return this._instructions;\n  };\n\n  /**\n   * Returns the graphics instructions array. Each entry is a graphics command object (ex. Graphics.Fill, Graphics.Rect)\n   * Modifying the returned array directly is not recommended, and is likely to result in unexpected behaviour.\n   *\n   * This property is mainly intended for introspection of the instructions (ex. for graphics export).\n   * @property instructions\n   * @type {Array}\n   * @readonly\n   **/\n  try {\n    Object.defineProperties(p, {\n      instructions: {\n        get: p.getInstructions\n      }\n    });\n  } catch (e) {}\n\n  // public methods:\n  /**\n   * Returns true if this Graphics instance has no drawing commands.\n   * @method isEmpty\n   * @return {Boolean} Returns true if this Graphics instance has no drawing commands.\n   **/\n  p.isEmpty = function () {\n    return !(this._instructions.length || this._activeInstructions.length);\n  };\n\n  /**\n   * Draws the display object into the specified context ignoring its visible, alpha, shadow, and transform.\n   * Returns true if the draw was handled (useful for overriding functionality).\n   *\n   * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n   * @method draw\n   * @param {CanvasRenderingContext2D} ctx The canvas 2D context object to draw into.\n   * @param {Object} data Optional data that is passed to graphics command exec methods. When called from a Shape instance, the shape passes itself as the data parameter. This can be used by custom graphic commands to insert contextual data.\n   **/\n  p.draw = function (ctx, data) {\n    this._updateInstructions();\n    var instr = this._instructions;\n    for (var i = this._storeIndex, l = instr.length; i < l; i++) {\n      instr[i].exec(ctx, data);\n    }\n  };\n\n  /**\n   * Draws only the path described for this Graphics instance, skipping any non-path instructions, including fill and\n   * stroke descriptions. Used for <code>DisplayObject.mask</code> to draw the clipping path, for example.\n   *\n   * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n   * @method drawAsPath\n   * @param {CanvasRenderingContext2D} ctx The canvas 2D context object to draw into.\n   **/\n  p.drawAsPath = function (ctx) {\n    this._updateInstructions();\n    var instr,\n      instrs = this._instructions;\n    for (var i = this._storeIndex, l = instrs.length; i < l; i++) {\n      // the first command is always a beginPath command.\n      if ((instr = instrs[i]).path !== false) {\n        instr.exec(ctx);\n      }\n    }\n  };\n\n  // public methods that map directly to context 2D calls:\n  /**\n   * Moves the drawing point to the specified position. A tiny API method \"mt\" also exists.\n   * @method moveTo\n   * @param {Number} x The x coordinate the drawing point should move to.\n   * @param {Number} y The y coordinate the drawing point should move to.\n   * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls).\n   * @chainable\n   **/\n  p.moveTo = function (x, y) {\n    return this.append(new G.MoveTo(x, y), true);\n  };\n\n  /**\n   * Draws a line from the current drawing point to the specified position, which become the new current drawing\n   * point. Note that you *must* call {{#crossLink \"Graphics/moveTo\"}}{{/crossLink}} before the first `lineTo()`.\n   * A tiny API method \"lt\" also exists.\n   *\n   * For detailed information, read the\n   * <a href=\"http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#complex-shapes-(paths)\">\n   * whatwg spec</a>.\n   * @method lineTo\n   * @param {Number} x The x coordinate the drawing point should draw to.\n   * @param {Number} y The y coordinate the drawing point should draw to.\n   * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n   * @chainable\n   **/\n  p.lineTo = function (x, y) {\n    return this.append(new G.LineTo(x, y));\n  };\n\n  /**\n   * Draws an arc with the specified control points and radius.  For detailed information, read the\n   * <a href=\"http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#dom-context-2d-arcto\">\n   * whatwg spec</a>. A tiny API method \"at\" also exists.\n   * @method arcTo\n   * @param {Number} x1\n   * @param {Number} y1\n   * @param {Number} x2\n   * @param {Number} y2\n   * @param {Number} radius\n   * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n   * @chainable\n   **/\n  p.arcTo = function (x1, y1, x2, y2, radius) {\n    return this.append(new G.ArcTo(x1, y1, x2, y2, radius));\n  };\n\n  /**\n   * Draws an arc defined by the radius, startAngle and endAngle arguments, centered at the position (x, y). For\n   * example, to draw a full circle with a radius of 20 centered at (100, 100):\n   *\n   *      arc(100, 100, 20, 0, Math.PI*2);\n   *\n   * For detailed information, read the\n   * <a href=\"http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#dom-context-2d-arc\">whatwg spec</a>.\n   * A tiny API method \"a\" also exists.\n   * @method arc\n   * @param {Number} x\n   * @param {Number} y\n   * @param {Number} radius\n   * @param {Number} startAngle Measured in radians.\n   * @param {Number} endAngle Measured in radians.\n   * @param {Boolean} anticlockwise\n   * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n   * @chainable\n   **/\n  p.arc = function (x, y, radius, startAngle, endAngle, anticlockwise) {\n    return this.append(new G.Arc(x, y, radius, startAngle, endAngle, anticlockwise));\n  };\n\n  /**\n   * Draws a quadratic curve from the current drawing point to (x, y) using the control point (cpx, cpy). For detailed\n   * information, read the <a href=\"http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#dom-context-2d-quadraticcurveto\">\n   * whatwg spec</a>. A tiny API method \"qt\" also exists.\n   * @method quadraticCurveTo\n   * @param {Number} cpx\n   * @param {Number} cpy\n   * @param {Number} x\n   * @param {Number} y\n   * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n   * @chainable\n   **/\n  p.quadraticCurveTo = function (cpx, cpy, x, y) {\n    return this.append(new G.QuadraticCurveTo(cpx, cpy, x, y));\n  };\n\n  /**\n   * Draws a bezier curve from the current drawing point to (x, y) using the control points (cp1x, cp1y) and (cp2x,\n   * cp2y). For detailed information, read the\n   * <a href=\"http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#dom-context-2d-beziercurveto\">\n   * whatwg spec</a>. A tiny API method \"bt\" also exists.\n   * @method bezierCurveTo\n   * @param {Number} cp1x\n   * @param {Number} cp1y\n   * @param {Number} cp2x\n   * @param {Number} cp2y\n   * @param {Number} x\n   * @param {Number} y\n   * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n   * @chainable\n   **/\n  p.bezierCurveTo = function (cp1x, cp1y, cp2x, cp2y, x, y) {\n    return this.append(new G.BezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y));\n  };\n\n  /**\n   * Draws a rectangle at (x, y) with the specified width and height using the current fill and/or stroke.\n   * For detailed information, read the\n   * <a href=\"http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#dom-context-2d-rect\">\n   * whatwg spec</a>. A tiny API method \"r\" also exists.\n   * @method rect\n   * @param {Number} x\n   * @param {Number} y\n   * @param {Number} w Width of the rectangle\n   * @param {Number} h Height of the rectangle\n   * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n   * @chainable\n   **/\n  p.rect = function (x, y, w, h) {\n    return this.append(new G.Rect(x, y, w, h));\n  };\n\n  /**\n   * Closes the current path, effectively drawing a line from the current drawing point to the first drawing point specified\n   * since the fill or stroke was last set. A tiny API method \"cp\" also exists.\n   * @method closePath\n   * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n   * @chainable\n   **/\n  p.closePath = function () {\n    return this._activeInstructions.length ? this.append(new G.ClosePath()) : this;\n  };\n\n  // public methods that roughly map to Flash graphics APIs:\n  /**\n   * Clears all drawing instructions, effectively resetting this Graphics instance. Any line and fill styles will need\n   * to be redefined to draw shapes following a clear call. A tiny API method \"c\" also exists.\n   * @method clear\n   * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n   * @chainable\n   **/\n  p.clear = function () {\n    this._instructions.length = this._activeInstructions.length = this._commitIndex = 0;\n    this._strokeStyle = this._oldStrokeStyle = this._stroke = this._fill = this._strokeDash = this._oldStrokeDash = null;\n    this._dirty = this._strokeIgnoreScale = false;\n    return this;\n  };\n\n  /**\n   * Begins a fill with the specified color. This ends the current sub-path. A tiny API method \"f\" also exists.\n   * @method beginFill\n   * @param {String} color A CSS compatible color value (ex. \"red\", \"#FF0000\", or \"rgba(255,0,0,0.5)\"). Setting to\n   * null will result in no fill.\n   * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n   * @chainable\n   **/\n  p.beginFill = function (color) {\n    return this._setFill(color ? new G.Fill(color) : null);\n  };\n\n  /**\n   * Begins a linear gradient fill defined by the line (x0, y0) to (x1, y1). This ends the current sub-path. For\n   * example, the following code defines a black to white vertical gradient ranging from 20px to 120px, and draws a\n   * square to display it:\n   *\n   *      myGraphics.beginLinearGradientFill([\"#000\",\"#FFF\"], [0, 1], 0, 20, 0, 120).drawRect(20, 20, 120, 120);\n   *\n   * A tiny API method \"lf\" also exists.\n   * @method beginLinearGradientFill\n   * @param {Array} colors An array of CSS compatible color values. For example, [\"#F00\",\"#00F\"] would define a gradient\n   * drawing from red to blue.\n   * @param {Array} ratios An array of gradient positions which correspond to the colors. For example, [0.1, 0.9] would draw\n   * the first color to 10% then interpolating to the second color at 90%.\n   * @param {Number} x0 The position of the first point defining the line that defines the gradient direction and size.\n   * @param {Number} y0 The position of the first point defining the line that defines the gradient direction and size.\n   * @param {Number} x1 The position of the second point defining the line that defines the gradient direction and size.\n   * @param {Number} y1 The position of the second point defining the line that defines the gradient direction and size.\n   * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n   * @chainable\n   **/\n  p.beginLinearGradientFill = function (colors, ratios, x0, y0, x1, y1) {\n    return this._setFill(new G.Fill().linearGradient(colors, ratios, x0, y0, x1, y1));\n  };\n\n  /**\n   * Begins a radial gradient fill. This ends the current sub-path. For example, the following code defines a red to\n   * blue radial gradient centered at (100, 100), with a radius of 50, and draws a circle to display it:\n   *\n   *      myGraphics.beginRadialGradientFill([\"#F00\",\"#00F\"], [0, 1], 100, 100, 0, 100, 100, 50).drawCircle(100, 100, 50);\n   *\n   * A tiny API method \"rf\" also exists.\n   * @method beginRadialGradientFill\n   * @param {Array} colors An array of CSS compatible color values. For example, [\"#F00\",\"#00F\"] would define\n   * a gradient drawing from red to blue.\n   * @param {Array} ratios An array of gradient positions which correspond to the colors. For example, [0.1,\n   * 0.9] would draw the first color to 10% then interpolating to the second color at 90%.\n   * @param {Number} x0 Center position of the inner circle that defines the gradient.\n   * @param {Number} y0 Center position of the inner circle that defines the gradient.\n   * @param {Number} r0 Radius of the inner circle that defines the gradient.\n   * @param {Number} x1 Center position of the outer circle that defines the gradient.\n   * @param {Number} y1 Center position of the outer circle that defines the gradient.\n   * @param {Number} r1 Radius of the outer circle that defines the gradient.\n   * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n   * @chainable\n   **/\n  p.beginRadialGradientFill = function (colors, ratios, x0, y0, r0, x1, y1, r1) {\n    return this._setFill(new G.Fill().radialGradient(colors, ratios, x0, y0, r0, x1, y1, r1));\n  };\n\n  /**\n   * Begins a pattern fill using the specified image. This ends the current sub-path. A tiny API method \"bf\" also\n   * exists.\n   * @method beginBitmapFill\n   * @param {HTMLImageElement | HTMLCanvasElement | HTMLVideoElement} image The Image, Canvas, or Video object to use\n   * as the pattern. Must be loaded prior to creating a bitmap fill, or the fill will be empty.\n   * @param {String} repetition Optional. Indicates whether to repeat the image in the fill area. One of \"repeat\",\n   * \"repeat-x\", \"repeat-y\", or \"no-repeat\". Defaults to \"repeat\". Note that Firefox does not support \"repeat-x\" or\n   * \"repeat-y\" (latest tests were in FF 20.0), and will default to \"repeat\".\n   * @param {Matrix2D} matrix Optional. Specifies a transformation matrix for the bitmap fill. This transformation\n   * will be applied relative to the parent transform.\n   * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n   * @chainable\n   **/\n  p.beginBitmapFill = function (image, repetition, matrix) {\n    return this._setFill(new G.Fill(null, matrix).bitmap(image, repetition));\n  };\n\n  /**\n   * Ends the current sub-path, and begins a new one with no fill. Functionally identical to <code>beginFill(null)</code>.\n   * A tiny API method \"ef\" also exists.\n   * @method endFill\n   * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n   * @chainable\n   **/\n  p.endFill = function () {\n    return this.beginFill();\n  };\n\n  /**\n   * Sets the stroke style. Like all drawing methods, this can be chained, so you can define\n   * the stroke style and color in a single line of code like so:\n   *\n   * \tmyGraphics.setStrokeStyle(8,\"round\").beginStroke(\"#F00\");\n   *\n   * A tiny API method \"ss\" also exists.\n   * @method setStrokeStyle\n   * @param {Number} thickness The width of the stroke.\n   * @param {String | Number} [caps=0] Indicates the type of caps to use at the end of lines. One of butt,\n   * round, or square. Defaults to \"butt\". Also accepts the values 0 (butt), 1 (round), and 2 (square) for use with\n   * the tiny API.\n   * @param {String | Number} [joints=0] Specifies the type of joints that should be used where two lines meet.\n   * One of bevel, round, or miter. Defaults to \"miter\". Also accepts the values 0 (miter), 1 (round), and 2 (bevel)\n   * for use with the tiny API.\n   * @param {Number} [miterLimit=10] If joints is set to \"miter\", then you can specify a miter limit ratio which\n   * controls at what point a mitered joint will be clipped.\n   * @param {Boolean} [ignoreScale=false] If true, the stroke will be drawn at the specified thickness regardless\n   * of active transformations.\n   * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n   * @chainable\n   **/\n  p.setStrokeStyle = function (thickness, caps, joints, miterLimit, ignoreScale) {\n    this._updateInstructions(true);\n    this._strokeStyle = this.command = new G.StrokeStyle(thickness, caps, joints, miterLimit, ignoreScale);\n\n    // ignoreScale lives on Stroke, not StrokeStyle, so we do a little trickery:\n    if (this._stroke) {\n      this._stroke.ignoreScale = ignoreScale;\n    }\n    this._strokeIgnoreScale = ignoreScale;\n    return this;\n  };\n\n  /**\n   * Sets or clears the stroke dash pattern.\n   *\n   * \tmyGraphics.setStrokeDash([20, 10], 0);\n   *\n   * A tiny API method `sd` also exists.\n   * @method setStrokeDash\n   * @param {Array} [segments] An array specifying the dash pattern, alternating between line and gap.\n   * For example, `[20,10]` would create a pattern of 20 pixel lines with 10 pixel gaps between them.\n   * Passing null or an empty array will clear the existing stroke dash.\n   * @param {Number} [offset=0] The offset of the dash pattern. For example, you could increment this value to create a \"marching ants\" effect.\n   * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n   * @chainable\n   **/\n  p.setStrokeDash = function (segments, offset) {\n    this._updateInstructions(true);\n    this._strokeDash = this.command = new G.StrokeDash(segments, offset);\n    return this;\n  };\n\n  /**\n   * Begins a stroke with the specified color. This ends the current sub-path. A tiny API method \"s\" also exists.\n   * @method beginStroke\n   * @param {String} color A CSS compatible color value (ex. \"#FF0000\", \"red\", or \"rgba(255,0,0,0.5)\"). Setting to\n   * null will result in no stroke.\n   * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n   * @chainable\n   **/\n  p.beginStroke = function (color) {\n    return this._setStroke(color ? new G.Stroke(color) : null);\n  };\n\n  /**\n   * Begins a linear gradient stroke defined by the line (x0, y0) to (x1, y1). This ends the current sub-path. For\n   * example, the following code defines a black to white vertical gradient ranging from 20px to 120px, and draws a\n   * square to display it:\n   *\n   *      myGraphics.setStrokeStyle(10).\n   *          beginLinearGradientStroke([\"#000\",\"#FFF\"], [0, 1], 0, 20, 0, 120).drawRect(20, 20, 120, 120);\n   *\n   * A tiny API method \"ls\" also exists.\n   * @method beginLinearGradientStroke\n   * @param {Array} colors An array of CSS compatible color values. For example, [\"#F00\",\"#00F\"] would define\n   * a gradient drawing from red to blue.\n   * @param {Array} ratios An array of gradient positions which correspond to the colors. For example, [0.1,\n   * 0.9] would draw the first color to 10% then interpolating to the second color at 90%.\n   * @param {Number} x0 The position of the first point defining the line that defines the gradient direction and size.\n   * @param {Number} y0 The position of the first point defining the line that defines the gradient direction and size.\n   * @param {Number} x1 The position of the second point defining the line that defines the gradient direction and size.\n   * @param {Number} y1 The position of the second point defining the line that defines the gradient direction and size.\n   * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n   * @chainable\n   **/\n  p.beginLinearGradientStroke = function (colors, ratios, x0, y0, x1, y1) {\n    return this._setStroke(new G.Stroke().linearGradient(colors, ratios, x0, y0, x1, y1));\n  };\n\n  /**\n   * Begins a radial gradient stroke. This ends the current sub-path. For example, the following code defines a red to\n   * blue radial gradient centered at (100, 100), with a radius of 50, and draws a rectangle to display it:\n   *\n   *      myGraphics.setStrokeStyle(10)\n   *          .beginRadialGradientStroke([\"#F00\",\"#00F\"], [0, 1], 100, 100, 0, 100, 100, 50)\n   *          .drawRect(50, 90, 150, 110);\n   *\n   * A tiny API method \"rs\" also exists.\n   * @method beginRadialGradientStroke\n   * @param {Array} colors An array of CSS compatible color values. For example, [\"#F00\",\"#00F\"] would define\n   * a gradient drawing from red to blue.\n   * @param {Array} ratios An array of gradient positions which correspond to the colors. For example, [0.1,\n   * 0.9] would draw the first color to 10% then interpolating to the second color at 90%, then draw the second color\n   * to 100%.\n   * @param {Number} x0 Center position of the inner circle that defines the gradient.\n   * @param {Number} y0 Center position of the inner circle that defines the gradient.\n   * @param {Number} r0 Radius of the inner circle that defines the gradient.\n   * @param {Number} x1 Center position of the outer circle that defines the gradient.\n   * @param {Number} y1 Center position of the outer circle that defines the gradient.\n   * @param {Number} r1 Radius of the outer circle that defines the gradient.\n   * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n   * @chainable\n   **/\n  p.beginRadialGradientStroke = function (colors, ratios, x0, y0, r0, x1, y1, r1) {\n    return this._setStroke(new G.Stroke().radialGradient(colors, ratios, x0, y0, r0, x1, y1, r1));\n  };\n\n  /**\n   * Begins a pattern fill using the specified image. This ends the current sub-path. Note that unlike bitmap fills,\n   * strokes do not currently support a matrix parameter due to limitations in the canvas API. A tiny API method \"bs\"\n   * also exists.\n   * @method beginBitmapStroke\n   * @param {HTMLImageElement | HTMLCanvasElement | HTMLVideoElement} image The Image, Canvas, or Video object to use\n   * as the pattern. Must be loaded prior to creating a bitmap fill, or the fill will be empty.\n   * @param {String} [repetition=repeat] Optional. Indicates whether to repeat the image in the fill area. One of\n   * \"repeat\", \"repeat-x\", \"repeat-y\", or \"no-repeat\". Defaults to \"repeat\".\n   * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n   * @chainable\n   **/\n  p.beginBitmapStroke = function (image, repetition) {\n    // NOTE: matrix is not supported for stroke because transforms on strokes also affect the drawn stroke width.\n    return this._setStroke(new G.Stroke().bitmap(image, repetition));\n  };\n\n  /**\n   * Ends the current sub-path, and begins a new one with no stroke. Functionally identical to <code>beginStroke(null)</code>.\n   * A tiny API method \"es\" also exists.\n   * @method endStroke\n   * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n   * @chainable\n   **/\n  p.endStroke = function () {\n    return this.beginStroke();\n  };\n\n  /**\n   * Maps the familiar ActionScript <code>curveTo()</code> method to the functionally similar {{#crossLink \"Graphics/quadraticCurveTo\"}}{{/crossLink}}\n   * method.\n   * @method quadraticCurveTo\n   * @param {Number} cpx\n   * @param {Number} cpy\n   * @param {Number} x\n   * @param {Number} y\n   * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n   * @chainable\n   **/\n  p.curveTo = p.quadraticCurveTo;\n\n  /**\n   *\n   * Maps the familiar ActionScript <code>drawRect()</code> method to the functionally similar {{#crossLink \"Graphics/rect\"}}{{/crossLink}}\n   * method.\n   * @method drawRect\n   * @param {Number} x\n   * @param {Number} y\n   * @param {Number} w Width of the rectangle\n   * @param {Number} h Height of the rectangle\n   * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n   * @chainable\n   **/\n  p.drawRect = p.rect;\n\n  /**\n   * Draws a rounded rectangle with all corners with the specified radius.\n   * @method drawRoundRect\n   * @param {Number} x\n   * @param {Number} y\n   * @param {Number} w\n   * @param {Number} h\n   * @param {Number} radius Corner radius.\n   * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n   * @chainable\n   **/\n  p.drawRoundRect = function (x, y, w, h, radius) {\n    return this.drawRoundRectComplex(x, y, w, h, radius, radius, radius, radius);\n  };\n\n  /**\n   * Draws a rounded rectangle with different corner radii. Supports positive and negative corner radii. A tiny API\n   * method \"rc\" also exists.\n   * @method drawRoundRectComplex\n   * @param {Number} x The horizontal coordinate to draw the round rect.\n   * @param {Number} y The vertical coordinate to draw the round rect.\n   * @param {Number} w The width of the round rect.\n   * @param {Number} h The height of the round rect.\n   * @param {Number} radiusTL Top left corner radius.\n   * @param {Number} radiusTR Top right corner radius.\n   * @param {Number} radiusBR Bottom right corner radius.\n   * @param {Number} radiusBL Bottom left corner radius.\n   * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n   * @chainable\n   **/\n  p.drawRoundRectComplex = function (x, y, w, h, radiusTL, radiusTR, radiusBR, radiusBL) {\n    return this.append(new G.RoundRect(x, y, w, h, radiusTL, radiusTR, radiusBR, radiusBL));\n  };\n\n  /**\n   * Draws a circle with the specified radius at (x, y).\n   *\n   *      var g = new createjs.Graphics();\n   *\t    g.setStrokeStyle(1);\n   *\t    g.beginStroke(createjs.Graphics.getRGB(0,0,0));\n   *\t    g.beginFill(createjs.Graphics.getRGB(255,0,0));\n   *\t    g.drawCircle(0,0,3);\n   *\n   *\t    var s = new createjs.Shape(g);\n   *\t\ts.x = 100;\n   *\t\ts.y = 100;\n   *\n   *\t    stage.addChild(s);\n   *\t    stage.update();\n   *\n   * A tiny API method \"dc\" also exists.\n   * @method drawCircle\n   * @param {Number} x x coordinate center point of circle.\n   * @param {Number} y y coordinate center point of circle.\n   * @param {Number} radius Radius of circle.\n   * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n   * @chainable\n   **/\n  p.drawCircle = function (x, y, radius) {\n    return this.append(new G.Circle(x, y, radius));\n  };\n\n  /**\n   * Draws an ellipse (oval) with a specified width (w) and height (h). Similar to {{#crossLink \"Graphics/drawCircle\"}}{{/crossLink}},\n   * except the width and height can be different. A tiny API method \"de\" also exists.\n   * @method drawEllipse\n   * @param {Number} x The left coordinate point of the ellipse. Note that this is different from {{#crossLink \"Graphics/drawCircle\"}}{{/crossLink}}\n   * which draws from center.\n   * @param {Number} y The top coordinate point of the ellipse. Note that this is different from {{#crossLink \"Graphics/drawCircle\"}}{{/crossLink}}\n   * which draws from the center.\n   * @param {Number} w The height (horizontal diameter) of the ellipse. The horizontal radius will be half of this\n   * number.\n   * @param {Number} h The width (vertical diameter) of the ellipse. The vertical radius will be half of this number.\n   * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n   * @chainable\n   **/\n  p.drawEllipse = function (x, y, w, h) {\n    return this.append(new G.Ellipse(x, y, w, h));\n  };\n\n  /**\n   * Draws a star if pointSize is greater than 0, or a regular polygon if pointSize is 0 with the specified number of\n   * points. For example, the following code will draw a familiar 5 pointed star shape centered at 100, 100 and with a\n   * radius of 50:\n   *\n   *      myGraphics.beginFill(\"#FF0\").drawPolyStar(100, 100, 50, 5, 0.6, -90);\n   *      // Note: -90 makes the first point vertical\n   *\n   * A tiny API method \"dp\" also exists.\n   *\n   * @method drawPolyStar\n   * @param {Number} x Position of the center of the shape.\n   * @param {Number} y Position of the center of the shape.\n   * @param {Number} radius The outer radius of the shape.\n   * @param {Number} sides The number of points on the star or sides on the polygon.\n   * @param {Number} pointSize The depth or \"pointy-ness\" of the star points. A pointSize of 0 will draw a regular\n   * polygon (no points), a pointSize of 1 will draw nothing because the points are infinitely pointy.\n   * @param {Number} angle The angle of the first point / corner. For example a value of 0 will draw the first point\n   * directly to the right of the center.\n   * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n   * @chainable\n   **/\n  p.drawPolyStar = function (x, y, radius, sides, pointSize, angle) {\n    return this.append(new G.PolyStar(x, y, radius, sides, pointSize, angle));\n  };\n\n  // TODO: deprecated.\n  /**\n   * Removed in favour of using custom command objects with {{#crossLink \"Graphics/append\"}}{{/crossLink}}.\n   * @method inject\n   * @deprecated\n   **/\n\n  /**\n   * Appends a graphics command object to the graphics queue. Command objects expose an \"exec\" method\n   * that accepts two parameters: the Context2D to operate on, and an arbitrary data object passed into\n   * {{#crossLink \"Graphics/draw\"}}{{/crossLink}}. The latter will usually be the Shape instance that called draw.\n   *\n   * This method is used internally by Graphics methods, such as drawCircle, but can also be used directly to insert\n   * built-in or custom graphics commands. For example:\n   *\n   * \t\t// attach data to our shape, so we can access it during the draw:\n   * \t\tmyShape.color = \"red\";\n   *\n   * \t\t// append a Circle command object:\n   * \t\tmyShape.graphics.append(new createjs.Graphics.Circle(50, 50, 30));\n   *\n   * \t\t// append a custom command object with an exec method that sets the fill style\n   * \t\t// based on the shape's data, and then fills the circle.\n   * \t\tmyShape.graphics.append({exec:function(ctx, shape) {\n   * \t\t\tctx.fillStyle = shape.color;\n   * \t\t\tctx.fill();\n   * \t\t}});\n   *\n   * @method append\n   * @param {Object} command A graphics command object exposing an \"exec\" method.\n   * @param {boolean} clean The clean param is primarily for internal use. A value of true indicates that a command does not generate a path that should be stroked or filled.\n   * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n   * @chainable\n   **/\n  p.append = function (command, clean) {\n    this._activeInstructions.push(command);\n    this.command = command;\n    if (!clean) {\n      this._dirty = true;\n    }\n    return this;\n  };\n\n  /**\n   * Decodes a compact encoded path string into a series of draw instructions.\n   * This format is not intended to be human readable, and is meant for use by authoring tools.\n   * The format uses a base64 character set, with each character representing 6 bits, to define a series of draw\n   * commands.\n   *\n   * Each command is comprised of a single \"header\" character followed by a variable number of alternating x and y\n   * position values. Reading the header bits from left to right (most to least significant): bits 1 to 3 specify the\n   * type of operation (0-moveTo, 1-lineTo, 2-quadraticCurveTo, 3-bezierCurveTo, 4-closePath, 5-7 unused). Bit 4\n   * indicates whether position values use 12 bits (2 characters) or 18 bits (3 characters), with a one indicating the\n   * latter. Bits 5 and 6 are currently unused.\n   *\n   * Following the header is a series of 0 (closePath), 2 (moveTo, lineTo), 4 (quadraticCurveTo), or 6 (bezierCurveTo)\n   * parameters. These parameters are alternating x/y positions represented by 2 or 3 characters (as indicated by the\n   * 4th bit in the command char). These characters consist of a 1 bit sign (1 is negative, 0 is positive), followed\n   * by an 11 (2 char) or 17 (3 char) bit integer value. All position values are in tenths of a pixel. Except in the\n   * case of move operations which are absolute, this value is a delta from the previous x or y position (as\n   * appropriate).\n   *\n   * For example, the string \"A3cAAMAu4AAA\" represents a line starting at -150,0 and ending at 150,0.\n   * <br />A - bits 000000. First 3 bits (000) indicate a moveTo operation. 4th bit (0) indicates 2 chars per\n   * parameter.\n   * <br />n0 - 110111011100. Absolute x position of -150.0px. First bit indicates a negative value, remaining bits\n   * indicate 1500 tenths of a pixel.\n   * <br />AA - 000000000000. Absolute y position of 0.\n   * <br />I - 001100. First 3 bits (001) indicate a lineTo operation. 4th bit (1) indicates 3 chars per parameter.\n   * <br />Au4 - 000000101110111000. An x delta of 300.0px, which is added to the previous x value of -150.0px to\n   * provide an absolute position of +150.0px.\n   * <br />AAA - 000000000000000000. A y delta value of 0.\n   *\n   * A tiny API method \"p\" also exists.\n   * @method decodePath\n   * @param {String} str The path string to decode.\n   * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n   * @chainable\n   **/\n  p.decodePath = function (str) {\n    var instructions = [this.moveTo, this.lineTo, this.quadraticCurveTo, this.bezierCurveTo, this.closePath];\n    var paramCount = [2, 2, 4, 6, 0];\n    var i = 0,\n      l = str.length;\n    var params = [];\n    var x = 0,\n      y = 0;\n    var base64 = Graphics.BASE_64;\n    while (i < l) {\n      var c = str.charAt(i);\n      var n = base64[c];\n      var fi = n >> 3; // highest order bits 1-3 code for operation.\n      var f = instructions[fi];\n      // check that we have a valid instruction & that the unused bits are empty:\n      if (!f || n & 3) {\n        throw \"bad path data (@\" + i + \"): \" + c;\n      }\n      var pl = paramCount[fi];\n      if (!fi) {\n        x = y = 0;\n      } // move operations reset the position.\n      params.length = 0;\n      i++;\n      var charCount = (n >> 2 & 1) + 2; // 4th header bit indicates number size for this operation.\n      for (var p = 0; p < pl; p++) {\n        var num = base64[str.charAt(i)];\n        var sign = num >> 5 ? -1 : 1;\n        num = (num & 31) << 6 | base64[str.charAt(i + 1)];\n        if (charCount == 3) {\n          num = num << 6 | base64[str.charAt(i + 2)];\n        }\n        num = sign * num / 10;\n        if (p % 2) {\n          x = num += x;\n        } else {\n          y = num += y;\n        }\n        params[p] = num;\n        i += charCount;\n      }\n      f.apply(this, params);\n    }\n    return this;\n  };\n\n  /**\n   * Stores all graphics commands so they won't be executed in future draws. Calling store() a second time adds to\n   * the existing store. This also affects `drawAsPath()`.\n   *\n   * This is useful in cases where you are creating vector graphics in an iterative manner (ex. generative art), so\n   * that only new graphics need to be drawn (which can provide huge performance benefits), but you wish to retain all\n   * of the vector instructions for later use (ex. scaling, modifying, or exporting).\n   *\n   * Note that calling store() will force the active path (if any) to be ended in a manner similar to changing\n   * the fill or stroke.\n   *\n   * For example, consider a application where the user draws lines with the mouse. As each line segment (or collection of\n   * segments) are added to a Shape, it can be rasterized using {{#crossLink \"DisplayObject/updateCache\"}}{{/crossLink}},\n   * and then stored, so that it can be redrawn at a different scale when the application is resized, or exported to SVG.\n   *\n   * \t// set up cache:\n   * \tmyShape.cache(0,0,500,500,scale);\n   *\n   * \t// when the user drags, draw a new line:\n   * \tmyShape.graphics.moveTo(oldX,oldY).lineTo(newX,newY);\n   * \t// then draw it into the existing cache:\n   * \tmyShape.updateCache(\"source-over\");\n   * \t// store the new line, so it isn't redrawn next time:\n   * \tmyShape.store();\n   *\n   * \t// then, when the window resizes, we can re-render at a different scale:\n   * \t// first, unstore all our lines:\n   * \tmyShape.unstore();\n   * \t// then cache using the new scale:\n   * \tmyShape.cache(0,0,500,500,newScale);\n   * \t// finally, store the existing commands again:\n   * \tmyShape.store();\n   *\n   * @method store\n   * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n   * @chainable\n   **/\n  p.store = function () {\n    this._updateInstructions(true);\n    this._storeIndex = this._instructions.length;\n    return this;\n  };\n\n  /**\n   * Unstores any graphics commands that were previously stored using {{#crossLink \"Graphics/store\"}}{{/crossLink}}\n   * so that they will be executed in subsequent draw calls.\n   *\n   * @method unstore\n   * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n   * @chainable\n   **/\n  p.unstore = function () {\n    this._storeIndex = 0;\n    return this;\n  };\n\n  /**\n   * Returns a clone of this Graphics instance. Note that the individual command objects are not cloned.\n   * @method clone\n   * @return {Graphics} A clone of the current Graphics instance.\n   **/\n  p.clone = function () {\n    var o = new Graphics();\n    o.command = this.command;\n    o._stroke = this._stroke;\n    o._strokeStyle = this._strokeStyle;\n    o._strokeDash = this._strokeDash;\n    o._strokeIgnoreScale = this._strokeIgnoreScale;\n    o._fill = this._fill;\n    o._instructions = this._instructions.slice();\n    o._commitIndex = this._commitIndex;\n    o._activeInstructions = this._activeInstructions.slice();\n    o._dirty = this._dirty;\n    o._storeIndex = this._storeIndex;\n    return o;\n  };\n\n  /**\n   * Returns a string representation of this object.\n   * @method toString\n   * @return {String} a string representation of the instance.\n   **/\n  p.toString = function () {\n    return \"[Graphics]\";\n  };\n\n  // tiny API:\n  /**\n   * Shortcut to moveTo.\n   * @method mt\n   * @param {Number} x The x coordinate the drawing point should move to.\n   * @param {Number} y The y coordinate the drawing point should move to.\n   * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls).\n   * @chainable\n   * @protected\n   **/\n  p.mt = p.moveTo;\n\n  /**\n   * Shortcut to lineTo.\n   * @method lt\n   * @param {Number} x The x coordinate the drawing point should draw to.\n   * @param {Number} y The y coordinate the drawing point should draw to.\n   * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n   * @chainable\n   * @protected\n   **/\n  p.lt = p.lineTo;\n\n  /**\n   * Shortcut to arcTo.\n   * @method at\n   * @param {Number} x1\n   * @param {Number} y1\n   * @param {Number} x2\n   * @param {Number} y2\n   * @param {Number} radius\n   * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n   * @chainable\n   * @protected\n   **/\n  p.at = p.arcTo;\n\n  /**\n   * Shortcut to bezierCurveTo.\n   * @method bt\n   * @param {Number} cp1x\n   * @param {Number} cp1y\n   * @param {Number} cp2x\n   * @param {Number} cp2y\n   * @param {Number} x\n   * @param {Number} y\n   * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n   * @chainable\n   * @protected\n   **/\n  p.bt = p.bezierCurveTo;\n\n  /**\n   * Shortcut to quadraticCurveTo / curveTo.\n   * @method qt\n   * @param {Number} cpx\n   * @param {Number} cpy\n   * @param {Number} x\n   * @param {Number} y\n   * @protected\n   * @chainable\n   **/\n  p.qt = p.quadraticCurveTo;\n\n  /**\n   * Shortcut to arc.\n   * @method a\n   * @param {Number} x\n   * @param {Number} y\n   * @param {Number} radius\n   * @param {Number} startAngle Measured in radians.\n   * @param {Number} endAngle Measured in radians.\n   * @param {Boolean} anticlockwise\n   * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n   * @protected\n   * @chainable\n   **/\n  p.a = p.arc;\n\n  /**\n   * Shortcut to rect.\n   * @method r\n   * @param {Number} x\n   * @param {Number} y\n   * @param {Number} w Width of the rectangle\n   * @param {Number} h Height of the rectangle\n   * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n   * @chainable\n   * @protected\n   **/\n  p.r = p.rect;\n\n  /**\n   * Shortcut to closePath.\n   * @method cp\n   * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n   * @chainable\n   * @protected\n   **/\n  p.cp = p.closePath;\n\n  /**\n   * Shortcut to clear.\n   * @method c\n   * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n   * @chainable\n   * @protected\n   **/\n  p.c = p.clear;\n\n  /**\n   * Shortcut to beginFill.\n   * @method f\n   * @param {String} color A CSS compatible color value (ex. \"red\", \"#FF0000\", or \"rgba(255,0,0,0.5)\"). Setting to\n   * null will result in no fill.\n   * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n   * @chainable\n   * @protected\n   **/\n  p.f = p.beginFill;\n\n  /**\n   * Shortcut to beginLinearGradientFill.\n   * @method lf\n   * @param {Array} colors An array of CSS compatible color values. For example, [\"#F00\",\"#00F\"] would define a gradient\n   * drawing from red to blue.\n   * @param {Array} ratios An array of gradient positions which correspond to the colors. For example, [0.1, 0.9] would draw\n   * the first color to 10% then interpolating to the second color at 90%.\n   * @param {Number} x0 The position of the first point defining the line that defines the gradient direction and size.\n   * @param {Number} y0 The position of the first point defining the line that defines the gradient direction and size.\n   * @param {Number} x1 The position of the second point defining the line that defines the gradient direction and size.\n   * @param {Number} y1 The position of the second point defining the line that defines the gradient direction and size.\n   * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n   * @chainable\n   * @protected\n   **/\n  p.lf = p.beginLinearGradientFill;\n\n  /**\n   * Shortcut to beginRadialGradientFill.\n   * @method rf\n   * @param {Array} colors An array of CSS compatible color values. For example, [\"#F00\",\"#00F\"] would define\n   * a gradient drawing from red to blue.\n   * @param {Array} ratios An array of gradient positions which correspond to the colors. For example, [0.1,\n   * 0.9] would draw the first color to 10% then interpolating to the second color at 90%.\n   * @param {Number} x0 Center position of the inner circle that defines the gradient.\n   * @param {Number} y0 Center position of the inner circle that defines the gradient.\n   * @param {Number} r0 Radius of the inner circle that defines the gradient.\n   * @param {Number} x1 Center position of the outer circle that defines the gradient.\n   * @param {Number} y1 Center position of the outer circle that defines the gradient.\n   * @param {Number} r1 Radius of the outer circle that defines the gradient.\n   * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n   * @chainable\n   * @protected\n   **/\n  p.rf = p.beginRadialGradientFill;\n\n  /**\n   * Shortcut to beginBitmapFill.\n   * @method bf\n   * @param {HTMLImageElement | HTMLCanvasElement | HTMLVideoElement} image The Image, Canvas, or Video object to use\n   * as the pattern.\n   * @param {String} repetition Optional. Indicates whether to repeat the image in the fill area. One of \"repeat\",\n   * \"repeat-x\", \"repeat-y\", or \"no-repeat\". Defaults to \"repeat\". Note that Firefox does not support \"repeat-x\" or\n   * \"repeat-y\" (latest tests were in FF 20.0), and will default to \"repeat\".\n   * @param {Matrix2D} matrix Optional. Specifies a transformation matrix for the bitmap fill. This transformation\n   * will be applied relative to the parent transform.\n   * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n   * @chainable\n   * @protected\n   **/\n  p.bf = p.beginBitmapFill;\n\n  /**\n   * Shortcut to endFill.\n   * @method ef\n   * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n   * @chainable\n   * @protected\n   **/\n  p.ef = p.endFill;\n\n  /**\n   * Shortcut to setStrokeStyle.\n   * @method ss\n   * @param {Number} thickness The width of the stroke.\n   * @param {String | Number} [caps=0] Indicates the type of caps to use at the end of lines. One of butt,\n   * round, or square. Defaults to \"butt\". Also accepts the values 0 (butt), 1 (round), and 2 (square) for use with\n   * the tiny API.\n   * @param {String | Number} [joints=0] Specifies the type of joints that should be used where two lines meet.\n   * One of bevel, round, or miter. Defaults to \"miter\". Also accepts the values 0 (miter), 1 (round), and 2 (bevel)\n   * for use with the tiny API.\n   * @param {Number} [miterLimit=10] If joints is set to \"miter\", then you can specify a miter limit ratio which\n   * controls at what point a mitered joint will be clipped.\n   * @param {Boolean} [ignoreScale=false] If true, the stroke will be drawn at the specified thickness regardless\n   * of active transformations.\n   * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n   * @chainable\n   * @protected\n   **/\n  p.ss = p.setStrokeStyle;\n\n  /**\n   * Shortcut to setStrokeDash.\n   * @method sd\n   * @param {Array} [segments] An array specifying the dash pattern, alternating between line and gap.\n   * For example, [20,10] would create a pattern of 20 pixel lines with 10 pixel gaps between them.\n   * Passing null or an empty array will clear any existing dash.\n   * @param {Number} [offset=0] The offset of the dash pattern. For example, you could increment this value to create a \"marching ants\" effect.\n   * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n   * @chainable\n   * @protected\n   **/\n  p.sd = p.setStrokeDash;\n\n  /**\n   * Shortcut to beginStroke.\n   * @method s\n   * @param {String} color A CSS compatible color value (ex. \"#FF0000\", \"red\", or \"rgba(255,0,0,0.5)\"). Setting to\n   * null will result in no stroke.\n   * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n   * @chainable\n   * @protected\n   **/\n  p.s = p.beginStroke;\n\n  /**\n   * Shortcut to beginLinearGradientStroke.\n   * @method ls\n   * @param {Array} colors An array of CSS compatible color values. For example, [\"#F00\",\"#00F\"] would define\n   * a gradient drawing from red to blue.\n   * @param {Array} ratios An array of gradient positions which correspond to the colors. For example, [0.1,\n   * 0.9] would draw the first color to 10% then interpolating to the second color at 90%.\n   * @param {Number} x0 The position of the first point defining the line that defines the gradient direction and size.\n   * @param {Number} y0 The position of the first point defining the line that defines the gradient direction and size.\n   * @param {Number} x1 The position of the second point defining the line that defines the gradient direction and size.\n   * @param {Number} y1 The position of the second point defining the line that defines the gradient direction and size.\n   * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n   * @chainable\n   * @protected\n   **/\n  p.ls = p.beginLinearGradientStroke;\n\n  /**\n   * Shortcut to beginRadialGradientStroke.\n   * @method rs\n   * @param {Array} colors An array of CSS compatible color values. For example, [\"#F00\",\"#00F\"] would define\n   * a gradient drawing from red to blue.\n   * @param {Array} ratios An array of gradient positions which correspond to the colors. For example, [0.1,\n   * 0.9] would draw the first color to 10% then interpolating to the second color at 90%, then draw the second color\n   * to 100%.\n   * @param {Number} x0 Center position of the inner circle that defines the gradient.\n   * @param {Number} y0 Center position of the inner circle that defines the gradient.\n   * @param {Number} r0 Radius of the inner circle that defines the gradient.\n   * @param {Number} x1 Center position of the outer circle that defines the gradient.\n   * @param {Number} y1 Center position of the outer circle that defines the gradient.\n   * @param {Number} r1 Radius of the outer circle that defines the gradient.\n   * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n   * @chainable\n   * @protected\n   **/\n  p.rs = p.beginRadialGradientStroke;\n\n  /**\n   * Shortcut to beginBitmapStroke.\n   * @method bs\n   * @param {HTMLImageElement | HTMLCanvasElement | HTMLVideoElement} image The Image, Canvas, or Video object to use\n   * as the pattern.\n   * @param {String} [repetition=repeat] Optional. Indicates whether to repeat the image in the fill area. One of\n   * \"repeat\", \"repeat-x\", \"repeat-y\", or \"no-repeat\". Defaults to \"repeat\".\n   * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n   * @chainable\n   * @protected\n   **/\n  p.bs = p.beginBitmapStroke;\n\n  /**\n   * Shortcut to endStroke.\n   * @method es\n   * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n   * @chainable\n   * @protected\n   **/\n  p.es = p.endStroke;\n\n  /**\n   * Shortcut to drawRect.\n   * @method dr\n   * @param {Number} x\n   * @param {Number} y\n   * @param {Number} w Width of the rectangle\n   * @param {Number} h Height of the rectangle\n   * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n   * @chainable\n   * @protected\n   **/\n  p.dr = p.drawRect;\n\n  /**\n   * Shortcut to drawRoundRect.\n   * @method rr\n   * @param {Number} x\n   * @param {Number} y\n   * @param {Number} w\n   * @param {Number} h\n   * @param {Number} radius Corner radius.\n   * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n   * @chainable\n   * @protected\n   **/\n  p.rr = p.drawRoundRect;\n\n  /**\n   * Shortcut to drawRoundRectComplex.\n   * @method rc\n   * @param {Number} x The horizontal coordinate to draw the round rect.\n   * @param {Number} y The vertical coordinate to draw the round rect.\n   * @param {Number} w The width of the round rect.\n   * @param {Number} h The height of the round rect.\n   * @param {Number} radiusTL Top left corner radius.\n   * @param {Number} radiusTR Top right corner radius.\n   * @param {Number} radiusBR Bottom right corner radius.\n   * @param {Number} radiusBL Bottom left corner radius.\n   * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n   * @chainable\n   * @protected\n   **/\n  p.rc = p.drawRoundRectComplex;\n\n  /**\n   * Shortcut to drawCircle.\n   * @method dc\n   * @param {Number} x x coordinate center point of circle.\n   * @param {Number} y y coordinate center point of circle.\n   * @param {Number} radius Radius of circle.\n   * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n   * @chainable\n   * @protected\n   **/\n  p.dc = p.drawCircle;\n\n  /**\n   * Shortcut to drawEllipse.\n   * @method de\n   * @param {Number} x The left coordinate point of the ellipse. Note that this is different from {{#crossLink \"Graphics/drawCircle\"}}{{/crossLink}}\n   * which draws from center.\n   * @param {Number} y The top coordinate point of the ellipse. Note that this is different from {{#crossLink \"Graphics/drawCircle\"}}{{/crossLink}}\n   * which draws from the center.\n   * @param {Number} w The height (horizontal diameter) of the ellipse. The horizontal radius will be half of this\n   * number.\n   * @param {Number} h The width (vertical diameter) of the ellipse. The vertical radius will be half of this number.\n   * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n   * @chainable\n   * @protected\n   **/\n  p.de = p.drawEllipse;\n\n  /**\n   * Shortcut to drawPolyStar.\n   * @method dp\n   * @param {Number} x Position of the center of the shape.\n   * @param {Number} y Position of the center of the shape.\n   * @param {Number} radius The outer radius of the shape.\n   * @param {Number} sides The number of points on the star or sides on the polygon.\n   * @param {Number} pointSize The depth or \"pointy-ness\" of the star points. A pointSize of 0 will draw a regular\n   * polygon (no points), a pointSize of 1 will draw nothing because the points are infinitely pointy.\n   * @param {Number} angle The angle of the first point / corner. For example a value of 0 will draw the first point\n   * directly to the right of the center.\n   * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n   * @chainable\n   * @protected\n   **/\n  p.dp = p.drawPolyStar;\n\n  /**\n   * Shortcut to decodePath.\n   * @method p\n   * @param {String} str The path string to decode.\n   * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n   * @chainable\n   * @protected\n   **/\n  p.p = p.decodePath;\n\n  // private methods:\n  /**\n   * @method _updateInstructions\n   * @param commit\n   * @protected\n   **/\n  p._updateInstructions = function (commit) {\n    var instr = this._instructions,\n      active = this._activeInstructions,\n      commitIndex = this._commitIndex;\n    if (this._dirty && active.length) {\n      instr.length = commitIndex; // remove old, uncommitted commands\n      instr.push(Graphics.beginCmd);\n      var l = active.length,\n        ll = instr.length;\n      instr.length = ll + l;\n      for (var i = 0; i < l; i++) {\n        instr[i + ll] = active[i];\n      }\n      if (this._fill) {\n        instr.push(this._fill);\n      }\n      if (this._stroke) {\n        // doesn't need to be re-applied if it hasn't changed.\n        if (this._strokeDash !== this._oldStrokeDash) {\n          this._oldStrokeDash = this._strokeDash;\n          instr.push(this._strokeDash);\n        }\n        if (this._strokeStyle !== this._oldStrokeStyle) {\n          this._oldStrokeStyle = this._strokeStyle;\n          instr.push(this._strokeStyle);\n        }\n        instr.push(this._stroke);\n      }\n      this._dirty = false;\n    }\n    if (commit) {\n      active.length = 0;\n      this._commitIndex = instr.length;\n    }\n  };\n\n  /**\n   * @method _setFill\n   * @param fill\n   * @protected\n   **/\n  p._setFill = function (fill) {\n    this._updateInstructions(true);\n    this.command = this._fill = fill;\n    return this;\n  };\n\n  /**\n   * @method _setStroke\n   * @param stroke\n   * @protected\n   **/\n  p._setStroke = function (stroke) {\n    this._updateInstructions(true);\n    if (this.command = this._stroke = stroke) {\n      stroke.ignoreScale = this._strokeIgnoreScale;\n    }\n    return this;\n  };\n\n  // Command Objects:\n  /**\n   * @namespace Graphics\n   */\n  /**\n   * Graphics command object. See {{#crossLink \"Graphics/lineTo\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information. See {{#crossLink \"Graphics\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\n   * @class LineTo\n   * @constructor\n   * @param {Number} x\n   * @param {Number} y\n   **/\n  /**\n   * @property x\n   * @type Number\n   */\n  /**\n   * @property y\n   * @type Number\n   */\n  /**\n   * Execute the Graphics command in the provided Canvas context.\n   * @method exec\n   * @param {CanvasRenderingContext2D} ctx The canvas rendering context\n   */\n  (G.LineTo = function (x, y) {\n    this.x = x;\n    this.y = y;\n  }).prototype.exec = function (ctx) {\n    ctx.lineTo(this.x, this.y);\n  };\n\n  /**\n   * Graphics command object. See {{#crossLink \"Graphics/moveTo\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\n   * @class MoveTo\n   * @constructor\n   * @param {Number} x\n   * @param {Number} y\n   **/\n  /**\n   * @property x\n   * @type Number\n   */\n  /**\n   * @property y\n   * @type Number\n   */\n  /**\n   * @method exec\n   * @param {CanvasRenderingContext2D} ctx\n   */\n  (G.MoveTo = function (x, y) {\n    this.x = x;\n    this.y = y;\n  }).prototype.exec = function (ctx) {\n    ctx.moveTo(this.x, this.y);\n  };\n\n  /**\n   * Graphics command object. See {{#crossLink \"Graphics/arcTo\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\n   * @class ArcTo\n   * @constructor\n   * @param {Number} x1\n   * @param {Number} y1\n   * @param {Number} x2\n   * @param {Number} y2\n   * @param {Number} radius\n   **/\n  /**\n   * @property x1\n   * @type Number\n   */\n  /**\n   * @property y1\n   * @type Number\n   */\n  /**\n   * @property x2\n   * @type Number\n   */\n  /**\n   * @property y2\n   * @type Number\n   */\n  /**\n   * @property radius\n   * @type Number\n   */\n  /**\n   * Execute the Graphics command in the provided Canvas context.\n   * @method exec\n   * @param {CanvasRenderingContext2D} ctx The canvas rendering context\n   */\n  (G.ArcTo = function (x1, y1, x2, y2, radius) {\n    this.x1 = x1;\n    this.y1 = y1;\n    this.x2 = x2;\n    this.y2 = y2;\n    this.radius = radius;\n  }).prototype.exec = function (ctx) {\n    ctx.arcTo(this.x1, this.y1, this.x2, this.y2, this.radius);\n  };\n\n  /**\n   * Graphics command object. See {{#crossLink \"Graphics/arc\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\n   * @class Arc\n   * @constructor\n   * @param {Number} x\n   * @param {Number} y\n   * @param {Number} radius\n   * @param {Number} startAngle\n   * @param {Number} endAngle\n   * @param {Number} anticlockwise\n   **/\n  /**\n   * @property x\n   * @type Number\n   */\n  /**\n   * @property y\n   * @type Number\n   */\n  /**\n   * @property radius\n   * @type Number\n   */\n  /**\n   * @property startAngle\n   * @type Number\n   */\n  /**\n   * @property endAngle\n   * @type Number\n   */\n  /**\n   * @property anticlockwise\n   * @type Number\n   */\n  /**\n   * Execute the Graphics command in the provided Canvas context.\n   * @method exec\n   * @param {CanvasRenderingContext2D} ctx The canvas rendering context\n   */\n  (G.Arc = function (x, y, radius, startAngle, endAngle, anticlockwise) {\n    this.x = x;\n    this.y = y;\n    this.radius = radius;\n    this.startAngle = startAngle;\n    this.endAngle = endAngle;\n    this.anticlockwise = !!anticlockwise;\n  }).prototype.exec = function (ctx) {\n    ctx.arc(this.x, this.y, this.radius, this.startAngle, this.endAngle, this.anticlockwise);\n  };\n\n  /**\n   * Graphics command object. See {{#crossLink \"Graphics/quadraticCurveTo\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\n   * @class QuadraticCurveTo\n   * @constructor\n   * @param {Number} cpx\n   * @param {Number} cpy\n   * @param {Number} x\n   * @param {Number} y\n   **/\n  /**\n   * @property cpx\n   * @type Number\n   */\n  /**\n   * @property cpy\n   * @type Number\n   */\n  /**\n   * @property x\n   * @type Number\n   */\n  /**\n   * @property y\n   * @type Number\n   */\n  /**\n   * Execute the Graphics command in the provided Canvas context.\n   * @method exec\n   * @param {CanvasRenderingContext2D} ctx The canvas rendering context\n   */\n  (G.QuadraticCurveTo = function (cpx, cpy, x, y) {\n    this.cpx = cpx;\n    this.cpy = cpy;\n    this.x = x;\n    this.y = y;\n  }).prototype.exec = function (ctx) {\n    ctx.quadraticCurveTo(this.cpx, this.cpy, this.x, this.y);\n  };\n\n  /**\n   * Graphics command object. See {{#crossLink \"Graphics/bezierCurveTo\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\n   * @class BezierCurveTo\n   * @constructor\n   * @param {Number} cp1x\n   * @param {Number} cp1y\n   * @param {Number} cp2x\n   * @param {Number} cp2y\n   * @param {Number} x\n   * @param {Number} y\n   **/\n  /**\n   * @property cp1x\n   * @type Number\n   */\n  /**\n   * @property cp1y\n   * @type Number\n   */\n  /**\n   * @property cp2x\n   * @type Number\n   */\n  /**\n   * @property cp2y\n   * @type Number\n   */\n  /**\n   * @property x\n   * @type Number\n   */\n  /**\n   * @property y\n   * @type Number\n   */\n  /**\n   * Execute the Graphics command in the provided Canvas context.\n   * @method exec\n   * @param {CanvasRenderingContext2D} ctx The canvas rendering context\n   */\n  (G.BezierCurveTo = function (cp1x, cp1y, cp2x, cp2y, x, y) {\n    this.cp1x = cp1x;\n    this.cp1y = cp1y;\n    this.cp2x = cp2x;\n    this.cp2y = cp2y;\n    this.x = x;\n    this.y = y;\n  }).prototype.exec = function (ctx) {\n    ctx.bezierCurveTo(this.cp1x, this.cp1y, this.cp2x, this.cp2y, this.x, this.y);\n  };\n\n  /**\n   * Graphics command object. See {{#crossLink \"Graphics/rect\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\n   * @class Rect\n   * @constructor\n   * @param {Number} x\n   * @param {Number} y\n   * @param {Number} w\n   * @param {Number} h\n   **/\n  /**\n   * @property x\n   * @type Number\n   */\n  /**\n   * @property y\n   * @type Number\n   */\n  /**\n   * @property w\n   * @type Number\n   */\n  /**\n   * @property h\n   * @type Number\n   */\n  /**\n   * Execute the Graphics command in the provided Canvas context.\n   * @method exec\n   * @param {CanvasRenderingContext2D} ctx The canvas rendering context\n   */\n  (G.Rect = function (x, y, w, h) {\n    this.x = x;\n    this.y = y;\n    this.w = w;\n    this.h = h;\n  }).prototype.exec = function (ctx) {\n    ctx.rect(this.x, this.y, this.w, this.h);\n  };\n\n  /**\n   * Graphics command object. See {{#crossLink \"Graphics/closePath\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\n   * @class ClosePath\n   * @constructor\n   **/\n  /**\n   * Execute the Graphics command in the provided Canvas context.\n   * @method exec\n   * @param {CanvasRenderingContext2D} ctx The canvas rendering context\n   */\n  (G.ClosePath = function () {}).prototype.exec = function (ctx) {\n    ctx.closePath();\n  };\n\n  /**\n   * Graphics command object to begin a new path. See {{#crossLink \"Graphics\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\n   * @class BeginPath\n   * @constructor\n   **/\n  /**\n   * Execute the Graphics command in the provided Canvas context.\n   * @method exec\n   * @param {CanvasRenderingContext2D} ctx The canvas rendering context\n   */\n  (G.BeginPath = function () {}).prototype.exec = function (ctx) {\n    ctx.beginPath();\n  };\n\n  /**\n   * Graphics command object. See {{#crossLink \"Graphics/beginFill\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\n   * @class Fill\n   * @constructor\n   * @param {Object} style A valid Context2D fillStyle.\n   * @param {Matrix2D} matrix\n   **/\n  /**\n   * A valid Context2D fillStyle.\n   * @property style\n   * @type Object\n   */\n  /**\n   * @property matrix\n   * @type Matrix2D\n   */\n  /**\n   * Execute the Graphics command in the provided Canvas context.\n   * @method exec\n   * @param {CanvasRenderingContext2D} ctx The canvas rendering context\n   */\n  p = (G.Fill = function (style, matrix) {\n    this.style = style;\n    this.matrix = matrix;\n  }).prototype;\n  p.exec = function (ctx) {\n    if (!this.style) {\n      return;\n    }\n    ctx.fillStyle = this.style;\n    var mtx = this.matrix;\n    if (mtx) {\n      ctx.save();\n      ctx.transform(mtx.a, mtx.b, mtx.c, mtx.d, mtx.tx, mtx.ty);\n    }\n    ctx.fill();\n    if (mtx) {\n      ctx.restore();\n    }\n  };\n  /**\n   * Creates a linear gradient style and assigns it to {{#crossLink \"Fill/style:property\"}}{{/crossLink}}.\n   * See {{#crossLink \"Graphics/beginLinearGradientFill\"}}{{/crossLink}} for more information.\n   * @method linearGradient\n   * @param {Array} colors\n   *\n   * @param {Array} ratios\n   * @param {Number} x0\n   * @param {Number} y0\n   * @param {Number} x1\n   * @param {Number} y1\n   * @return {Fill} Returns this Fill object for chaining or assignment.\n   */\n  p.linearGradient = function (colors, ratios, x0, y0, x1, y1) {\n    var o = this.style = Graphics._ctx.createLinearGradient(x0, y0, x1, y1);\n    for (var i = 0, l = colors.length; i < l; i++) {\n      o.addColorStop(ratios[i], colors[i]);\n    }\n    o.props = {\n      colors: colors,\n      ratios: ratios,\n      x0: x0,\n      y0: y0,\n      x1: x1,\n      y1: y1,\n      type: \"linear\"\n    };\n    return this;\n  };\n  /**\n   * Creates a radial gradient style and assigns it to {{#crossLink \"Fill/style:property\"}}{{/crossLink}}.\n   * See {{#crossLink \"Graphics/beginRadialGradientFill\"}}{{/crossLink}} for more information.\n   * @method radialGradient\n   * @param {Array} colors\n   * @param {Array} ratios\n   * @param {Number} x0\n   * @param {Number} y0\n   * @param {Number} r0\n   * @param {Number} x1\n   * @param {Number} y1\n   * @param {Number} r1\n   * @return {Fill} Returns this Fill object for chaining or assignment.\n   */\n  p.radialGradient = function (colors, ratios, x0, y0, r0, x1, y1, r1) {\n    var o = this.style = Graphics._ctx.createRadialGradient(x0, y0, r0, x1, y1, r1);\n    for (var i = 0, l = colors.length; i < l; i++) {\n      o.addColorStop(ratios[i], colors[i]);\n    }\n    o.props = {\n      colors: colors,\n      ratios: ratios,\n      x0: x0,\n      y0: y0,\n      r0: r0,\n      x1: x1,\n      y1: y1,\n      r1: r1,\n      type: \"radial\"\n    };\n    return this;\n  };\n  /**\n   * Creates a bitmap fill style and assigns it to the {{#crossLink \"Fill/style:property\"}}{{/crossLink}}.\n   * See {{#crossLink \"Graphics/beginBitmapFill\"}}{{/crossLink}} for more information.\n   * @method bitmap\n   * @param {HTMLImageElement | HTMLCanvasElement | HTMLVideoElement} image  Must be loaded prior to creating a bitmap fill, or the fill will be empty.\n   * @param {String} [repetition] One of: repeat, repeat-x, repeat-y, or no-repeat.\n   * @return {Fill} Returns this Fill object for chaining or assignment.\n   */\n  p.bitmap = function (image, repetition) {\n    if (image.naturalWidth || image.getContext || image.readyState >= 2) {\n      var o = this.style = Graphics._ctx.createPattern(image, repetition || \"\");\n      o.props = {\n        image: image,\n        repetition: repetition,\n        type: \"bitmap\"\n      };\n    }\n    return this;\n  };\n  p.path = false;\n\n  /**\n   * Graphics command object. See {{#crossLink \"Graphics/beginStroke\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\n   * @class Stroke\n   * @constructor\n   * @param {Object} style A valid Context2D fillStyle.\n   * @param {Boolean} ignoreScale\n   **/\n  /**\n   * A valid Context2D strokeStyle.\n   * @property style\n   * @type Object\n   */\n  /**\n   * @property ignoreScale\n   * @type Boolean\n   */\n  /**\n   * Execute the Graphics command in the provided Canvas context.\n   * @method exec\n   * @param {CanvasRenderingContext2D} ctx The canvas rendering context\n   */\n  p = (G.Stroke = function (style, ignoreScale) {\n    this.style = style;\n    this.ignoreScale = ignoreScale;\n  }).prototype;\n  p.exec = function (ctx) {\n    if (!this.style) {\n      return;\n    }\n    ctx.strokeStyle = this.style;\n    if (this.ignoreScale) {\n      ctx.save();\n      ctx.setTransform(1, 0, 0, 1, 0, 0);\n    }\n    ctx.stroke();\n    if (this.ignoreScale) {\n      ctx.restore();\n    }\n  };\n  /**\n   * Creates a linear gradient style and assigns it to {{#crossLink \"Stroke/style:property\"}}{{/crossLink}}.\n   * See {{#crossLink \"Graphics/beginLinearGradientStroke\"}}{{/crossLink}} for more information.\n   * @method linearGradient\n   * @param {Array} colors\n   * @param {Array} ratios\n   * @param {Number} x0\n   * @param {Number} y0\n   * @param {Number} x1\n   * @param {Number} y1\n   * @return {Fill} Returns this Stroke object for chaining or assignment.\n   */\n  p.linearGradient = G.Fill.prototype.linearGradient;\n  /**\n   * Creates a radial gradient style and assigns it to {{#crossLink \"Stroke/style:property\"}}{{/crossLink}}.\n   * See {{#crossLink \"Graphics/beginRadialGradientStroke\"}}{{/crossLink}} for more information.\n   * @method radialGradient\n   * @param {Array} colors\n   * @param {Array} ratios\n   * @param {Number} x0\n   * @param {Number} y0\n   * @param {Number} r0\n   * @param {Number} x1\n   * @param {Number} y1\n   * @param {Number} r1\n   * @return {Fill} Returns this Stroke object for chaining or assignment.\n   */\n  p.radialGradient = G.Fill.prototype.radialGradient;\n  /**\n   * Creates a bitmap fill style and assigns it to {{#crossLink \"Stroke/style:property\"}}{{/crossLink}}.\n   * See {{#crossLink \"Graphics/beginBitmapStroke\"}}{{/crossLink}} for more information.\n   * @method bitmap\n   * @param {HTMLImageElement} image\n   * @param {String} [repetition] One of: repeat, repeat-x, repeat-y, or no-repeat.\n   * @return {Fill} Returns this Stroke object for chaining or assignment.\n   */\n  p.bitmap = G.Fill.prototype.bitmap;\n  p.path = false;\n\n  /**\n   * Graphics command object. See {{#crossLink \"Graphics/setStrokeStyle\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\n   * @class StrokeStyle\n   * @constructor\n   * @param {Number} width\n   * @param {String} [caps=butt]\n   * @param {String} [joints=miter]\n   * @param {Number} [miterLimit=10]\n   * @param {Boolean} [ignoreScale=false]\n   **/\n  /**\n   * @property width\n   * @type Number\n   */\n  /**\n   * One of: butt, round, square\n   * @property caps\n   * @type String\n   */\n  /**\n   * One of: round, bevel, miter\n   * @property joints\n   * @type String\n   */\n  /**\n   * @property miterLimit\n   * @type Number\n   */\n  /**\n   * Execute the Graphics command in the provided Canvas context.\n   * @method exec\n   * @param {CanvasRenderingContext2D} ctx The canvas rendering context\n   */\n  p = (G.StrokeStyle = function (width, caps, joints, miterLimit, ignoreScale) {\n    this.width = width;\n    this.caps = caps;\n    this.joints = joints;\n    this.miterLimit = miterLimit;\n    this.ignoreScale = ignoreScale;\n  }).prototype;\n  p.exec = function (ctx) {\n    ctx.lineWidth = this.width == null ? \"1\" : this.width;\n    ctx.lineCap = this.caps == null ? \"butt\" : isNaN(this.caps) ? this.caps : Graphics.STROKE_CAPS_MAP[this.caps];\n    ctx.lineJoin = this.joints == null ? \"miter\" : isNaN(this.joints) ? this.joints : Graphics.STROKE_JOINTS_MAP[this.joints];\n    ctx.miterLimit = this.miterLimit == null ? \"10\" : this.miterLimit;\n    ctx.ignoreScale = this.ignoreScale == null ? false : this.ignoreScale;\n  };\n  p.path = false;\n\n  /**\n   * Graphics command object. See {{#crossLink \"Graphics/setStrokeDash\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\n   * @class StrokeDash\n   * @constructor\n   * @param {Array} [segments]\n   * @param {Number} [offset=0]\n   **/\n  /**\n   * @property segments\n   * @type Array\n   */\n  /**\n   * @property offset\n   * @type Number\n   */\n  /**\n   * Execute the Graphics command in the provided Canvas context.\n   * @method exec\n   * @param {CanvasRenderingContext2D} ctx The canvas rendering context\n   */\n  (G.StrokeDash = function (segments, offset) {\n    this.segments = segments;\n    this.offset = offset || 0;\n  }).prototype.exec = function (ctx) {\n    if (ctx.setLineDash) {\n      // feature detection.\n      ctx.setLineDash(this.segments || G.StrokeDash.EMPTY_SEGMENTS); // instead of [] to reduce churn.\n      ctx.lineDashOffset = this.offset || 0;\n    }\n  };\n  /**\n   * The default value for segments (ie. no dash).\n   * @property EMPTY_SEGMENTS\n   * @static\n   * @final\n   * @readonly\n   * @protected\n   * @type {Array}\n   **/\n  G.StrokeDash.EMPTY_SEGMENTS = [];\n\n  /**\n   * Graphics command object. See {{#crossLink \"Graphics/drawRoundRectComplex\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\n   * @class RoundRect\n   * @constructor\n   * @param {Number} x\n   * @param {Number} y\n   * @param {Number} w\n   * @param {Number} h\n   * @param {Number} radiusTL\n   * @param {Number} radiusTR\n   * @param {Number} radiusBR\n   * @param {Number} radiusBL\n   **/\n  /**\n   * @property x\n   * @type Number\n   */\n  /**\n   * @property y\n   * @type Number\n   */\n  /**\n   * @property w\n   * @type Number\n   */\n  /**\n   * @property h\n   * @type Number\n   */\n  /**\n   * @property radiusTL\n   * @type Number\n   */\n  /**\n   * @property radiusTR\n   * @type Number\n   */\n  /**\n   * @property radiusBR\n   * @type Number\n   */\n  /**\n   * @property radiusBL\n   * @type Number\n   */\n  /**\n   * Execute the Graphics command in the provided Canvas context.\n   * @method exec\n   * @param {CanvasRenderingContext2D} ctx The canvas rendering context\n   */\n  (G.RoundRect = function (x, y, w, h, radiusTL, radiusTR, radiusBR, radiusBL) {\n    this.x = x;\n    this.y = y;\n    this.w = w;\n    this.h = h;\n    this.radiusTL = radiusTL;\n    this.radiusTR = radiusTR;\n    this.radiusBR = radiusBR;\n    this.radiusBL = radiusBL;\n  }).prototype.exec = function (ctx) {\n    var max = (w < h ? w : h) / 2;\n    var mTL = 0,\n      mTR = 0,\n      mBR = 0,\n      mBL = 0;\n    var x = this.x,\n      y = this.y,\n      w = this.w,\n      h = this.h;\n    var rTL = this.radiusTL,\n      rTR = this.radiusTR,\n      rBR = this.radiusBR,\n      rBL = this.radiusBL;\n    if (rTL < 0) {\n      rTL *= mTL = -1;\n    }\n    if (rTL > max) {\n      rTL = max;\n    }\n    if (rTR < 0) {\n      rTR *= mTR = -1;\n    }\n    if (rTR > max) {\n      rTR = max;\n    }\n    if (rBR < 0) {\n      rBR *= mBR = -1;\n    }\n    if (rBR > max) {\n      rBR = max;\n    }\n    if (rBL < 0) {\n      rBL *= mBL = -1;\n    }\n    if (rBL > max) {\n      rBL = max;\n    }\n    ctx.moveTo(x + w - rTR, y);\n    ctx.arcTo(x + w + rTR * mTR, y - rTR * mTR, x + w, y + rTR, rTR);\n    ctx.lineTo(x + w, y + h - rBR);\n    ctx.arcTo(x + w + rBR * mBR, y + h + rBR * mBR, x + w - rBR, y + h, rBR);\n    ctx.lineTo(x + rBL, y + h);\n    ctx.arcTo(x - rBL * mBL, y + h + rBL * mBL, x, y + h - rBL, rBL);\n    ctx.lineTo(x, y + rTL);\n    ctx.arcTo(x - rTL * mTL, y - rTL * mTL, x + rTL, y, rTL);\n    ctx.closePath();\n  };\n\n  /**\n   * Graphics command object. See {{#crossLink \"Graphics/drawCircle\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\n   * @class Circle\n   * @constructor\n   * @param {Number} x\n   * @param {Number} y\n   * @param {Number} radius\n   **/\n  /**\n   * @property x\n   * @type Number\n   */\n  /**\n   * @property y\n   * @type Number\n   */\n  /**\n   * @property radius\n   * @type Number\n   */\n  /**\n   * Execute the Graphics command in the provided Canvas context.\n   * @method exec\n   * @param {CanvasRenderingContext2D} ctx The canvas rendering context\n   */\n  (G.Circle = function (x, y, radius) {\n    this.x = x;\n    this.y = y;\n    this.radius = radius;\n  }).prototype.exec = function (ctx) {\n    ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);\n  };\n\n  /**\n   * Graphics command object. See {{#crossLink \"Graphics/drawEllipse\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\n   * @class Ellipse\n   * @constructor\n   * @param {Number} x\n   * @param {Number} y\n   * @param {Number} w\n   * @param {Number} h\n   **/\n  /**\n   * @property x\n   * @type Number\n   */\n  /**\n   * @property y\n   * @type Number\n   */\n  /**\n   * @property w\n   * @type Number\n   */\n  /**\n   * @property h\n   * @type Number\n   */\n  /**\n   * Execute the Graphics command in the provided Canvas context.\n   * @method exec\n   * @param {CanvasRenderingContext2D} ctx The canvas rendering context\n   */\n  (G.Ellipse = function (x, y, w, h) {\n    this.x = x;\n    this.y = y;\n    this.w = w;\n    this.h = h;\n  }).prototype.exec = function (ctx) {\n    var x = this.x,\n      y = this.y;\n    var w = this.w,\n      h = this.h;\n    var k = 0.5522848;\n    var ox = w / 2 * k;\n    var oy = h / 2 * k;\n    var xe = x + w;\n    var ye = y + h;\n    var xm = x + w / 2;\n    var ym = y + h / 2;\n    ctx.moveTo(x, ym);\n    ctx.bezierCurveTo(x, ym - oy, xm - ox, y, xm, y);\n    ctx.bezierCurveTo(xm + ox, y, xe, ym - oy, xe, ym);\n    ctx.bezierCurveTo(xe, ym + oy, xm + ox, ye, xm, ye);\n    ctx.bezierCurveTo(xm - ox, ye, x, ym + oy, x, ym);\n  };\n\n  /**\n   * Graphics command object. See {{#crossLink \"Graphics/drawPolyStar\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\n   * @class PolyStar\n   * @constructor\n   * @param {Number} x\n   * @param {Number} y\n   * @param {Number} radius\n   * @param {Number} sides\n   * @param {Number} pointSize\n   * @param {Number} angle\n   **/\n  /**\n   * @property x\n   * @type Number\n   */\n  /**\n   * @property y\n   * @type Number\n   */\n  /**\n   * @property radius\n   * @type Number\n   */\n  /**\n   * @property sides\n   * @type Number\n   */\n  /**\n   * @property pointSize\n   * @type Number\n   */\n  /**\n   * @property angle\n   * @type Number\n   */\n  /**\n   * Execute the Graphics command in the provided Canvas context.\n   * @method exec\n   * @param {CanvasRenderingContext2D} ctx The canvas rendering context\n   */\n  (G.PolyStar = function (x, y, radius, sides, pointSize, angle) {\n    this.x = x;\n    this.y = y;\n    this.radius = radius;\n    this.sides = sides;\n    this.pointSize = pointSize;\n    this.angle = angle;\n  }).prototype.exec = function (ctx) {\n    var x = this.x,\n      y = this.y;\n    var radius = this.radius;\n    var angle = (this.angle || 0) / 180 * Math.PI;\n    var sides = this.sides;\n    var ps = 1 - (this.pointSize || 0);\n    var a = Math.PI / sides;\n    ctx.moveTo(x + Math.cos(angle) * radius, y + Math.sin(angle) * radius);\n    for (var i = 0; i < sides; i++) {\n      angle += a;\n      if (ps != 1) {\n        ctx.lineTo(x + Math.cos(angle) * radius * ps, y + Math.sin(angle) * radius * ps);\n      }\n      angle += a;\n      ctx.lineTo(x + Math.cos(angle) * radius, y + Math.sin(angle) * radius);\n    }\n    ctx.closePath();\n  };\n\n  // docced above.\n  Graphics.beginCmd = new G.BeginPath(); // so we don't have to instantiate multiple instances.\n\n  createjs.Graphics = Graphics;\n})();\n\n//##############################################################################\n// DisplayObject.js\n//##############################################################################\n\n(function () {\n  \"use strict\";\n\n  // constructor:\n  /**\n   * DisplayObject is an abstract class that should not be constructed directly. Instead construct subclasses such as\n   * {{#crossLink \"Container\"}}{{/crossLink}}, {{#crossLink \"Bitmap\"}}{{/crossLink}}, and {{#crossLink \"Shape\"}}{{/crossLink}}.\n   * DisplayObject is the base class for all display classes in the EaselJS library. It defines the core properties and\n   * methods that are shared between all display objects, such as transformation properties (x, y, scaleX, scaleY, etc),\n   * caching, and mouse handlers.\n   * @class DisplayObject\n   * @extends EventDispatcher\n   * @constructor\n   **/\n  function DisplayObject() {\n    this.EventDispatcher_constructor();\n\n    // public properties:\n    /**\n     * The alpha (transparency) for this display object. 0 is fully transparent, 1 is fully opaque.\n     * @property alpha\n     * @type {Number}\n     * @default 1\n     **/\n    this.alpha = 1;\n\n    /**\n     * If a cache is active, this returns the canvas that holds the cached version of this display object. See {{#crossLink \"cache\"}}{{/crossLink}}\n     * for more information.\n     * @property cacheCanvas\n     * @type {HTMLCanvasElement | Object}\n     * @default null\n     * @readonly\n     **/\n    this.cacheCanvas = null;\n\n    /**\n     * Returns an ID number that uniquely identifies the current cache for this display object. This can be used to\n     * determine if the cache has changed since a previous check.\n     * @property cacheID\n     * @type {Number}\n     * @default 0\n     */\n    this.cacheID = 0;\n\n    /**\n     * Unique ID for this display object. Makes display objects easier for some uses.\n     * @property id\n     * @type {Number}\n     * @default -1\n     **/\n    this.id = createjs.UID.get();\n\n    /**\n     * Indicates whether to include this object when running mouse interactions. Setting this to `false` for children\n     * of a {{#crossLink \"Container\"}}{{/crossLink}} will cause events on the Container to not fire when that child is\n     * clicked. Setting this property to `false` does not prevent the {{#crossLink \"Container/getObjectsUnderPoint\"}}{{/crossLink}}\n     * method from returning the child.\n     *\n     * <strong>Note:</strong> In EaselJS 0.7.0, the mouseEnabled property will not work properly with nested Containers. Please\n     * check out the latest NEXT version in <a href=\"https://github.com/CreateJS/EaselJS/tree/master/lib\">GitHub</a> for an updated version with this issue resolved. The fix will be\n     * provided in the next release of EaselJS.\n     * @property mouseEnabled\n     * @type {Boolean}\n     * @default true\n     **/\n    this.mouseEnabled = true;\n\n    /**\n     * If false, the tick will not run on this display object (or its children). This can provide some performance benefits.\n     * In addition to preventing the \"tick\" event from being dispatched, it will also prevent tick related updates\n     * on some display objects (ex. Sprite & MovieClip frame advancing, DOMElement visibility handling).\n     * @property tickEnabled\n     * @type Boolean\n     * @default true\n     **/\n    this.tickEnabled = true;\n\n    /**\n     * An optional name for this display object. Included in {{#crossLink \"DisplayObject/toString\"}}{{/crossLink}} . Useful for\n     * debugging.\n     * @property name\n     * @type {String}\n     * @default null\n     **/\n    this.name = null;\n\n    /**\n     * A reference to the {{#crossLink \"Container\"}}{{/crossLink}} or {{#crossLink \"Stage\"}}{{/crossLink}} object that\n     * contains this display object, or null if it has not been added\n     * to one.\n     * @property parent\n     * @final\n     * @type {Container}\n     * @default null\n     * @readonly\n     **/\n    this.parent = null;\n\n    /**\n     * The left offset for this display object's registration point. For example, to make a 100x100px Bitmap rotate\n     * around its center, you would set regX and {{#crossLink \"DisplayObject/regY:property\"}}{{/crossLink}} to 50.\n     * @property regX\n     * @type {Number}\n     * @default 0\n     **/\n    this.regX = 0;\n\n    /**\n     * The y offset for this display object's registration point. For example, to make a 100x100px Bitmap rotate around\n     * its center, you would set {{#crossLink \"DisplayObject/regX:property\"}}{{/crossLink}} and regY to 50.\n     * @property regY\n     * @type {Number}\n     * @default 0\n     **/\n    this.regY = 0;\n\n    /**\n     * The rotation in degrees for this display object.\n     * @property rotation\n     * @type {Number}\n     * @default 0\n     **/\n    this.rotation = 0;\n\n    /**\n     * The factor to stretch this display object horizontally. For example, setting scaleX to 2 will stretch the display\n     * object to twice its nominal width. To horizontally flip an object, set the scale to a negative number.\n     * @property scaleX\n     * @type {Number}\n     * @default 1\n     **/\n    this.scaleX = 1;\n\n    /**\n     * The factor to stretch this display object vertically. For example, setting scaleY to 0.5 will stretch the display\n     * object to half its nominal height. To vertically flip an object, set the scale to a negative number.\n     * @property scaleY\n     * @type {Number}\n     * @default 1\n     **/\n    this.scaleY = 1;\n\n    /**\n     * The factor to skew this display object horizontally.\n     * @property skewX\n     * @type {Number}\n     * @default 0\n     **/\n    this.skewX = 0;\n\n    /**\n     * The factor to skew this display object vertically.\n     * @property skewY\n     * @type {Number}\n     * @default 0\n     **/\n    this.skewY = 0;\n\n    /**\n     * A shadow object that defines the shadow to render on this display object. Set to `null` to remove a shadow. If\n     * null, this property is inherited from the parent container.\n     * @property shadow\n     * @type {Shadow}\n     * @default null\n     **/\n    this.shadow = null;\n\n    /**\n     * Indicates whether this display object should be rendered to the canvas and included when running the Stage\n     * {{#crossLink \"Stage/getObjectsUnderPoint\"}}{{/crossLink}} method.\n     * @property visible\n     * @type {Boolean}\n     * @default true\n     **/\n    this.visible = true;\n\n    /**\n     * The x (horizontal) position of the display object, relative to its parent.\n     * @property x\n     * @type {Number}\n     * @default 0\n     **/\n    this.x = 0;\n\n    /** The y (vertical) position of the display object, relative to its parent.\n     * @property y\n     * @type {Number}\n     * @default 0\n     **/\n    this.y = 0;\n\n    /**\n     * If set, defines the transformation for this display object, overriding all other transformation properties\n     * (x, y, rotation, scale, skew).\n     * @property transformMatrix\n     * @type {Matrix2D}\n     * @default null\n     **/\n    this.transformMatrix = null;\n\n    /**\n     * The composite operation indicates how the pixels of this display object will be composited with the elements\n     * behind it. If `null`, this property is inherited from the parent container. For more information, read the\n     * <a href=\"http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#compositing\">\n     * whatwg spec on compositing</a>.\n     * @property compositeOperation\n     * @type {String}\n     * @default null\n     **/\n    this.compositeOperation = null;\n\n    /**\n     * Indicates whether the display object should be drawn to a whole pixel when\n     * {{#crossLink \"Stage/snapToPixelEnabled\"}}{{/crossLink}} is true. To enable/disable snapping on whole\n     * categories of display objects, set this value on the prototype (Ex. Text.prototype.snapToPixel = true).\n     * @property snapToPixel\n     * @type {Boolean}\n     * @default true\n     **/\n    this.snapToPixel = true;\n\n    /**\n     * An array of Filter objects to apply to this display object. Filters are only applied / updated when {{#crossLink \"cache\"}}{{/crossLink}}\n     * or {{#crossLink \"updateCache\"}}{{/crossLink}} is called on the display object, and only apply to the area that is\n     * cached.\n     * @property filters\n     * @type {Array}\n     * @default null\n     **/\n    this.filters = null;\n\n    /**\n     * A Shape instance that defines a vector mask (clipping path) for this display object.  The shape's transformation\n     * will be applied relative to the display object's parent coordinates (as if it were a child of the parent).\n     * @property mask\n     * @type {Shape}\n     * @default null\n     */\n    this.mask = null;\n\n    /**\n     * A display object that will be tested when checking mouse interactions or testing {{#crossLink \"Container/getObjectsUnderPoint\"}}{{/crossLink}}.\n     * The hit area will have its transformation applied relative to this display object's coordinate space (as though\n     * the hit test object were a child of this display object and relative to its regX/Y). The hitArea will be tested\n     * using only its own `alpha` value regardless of the alpha value on the target display object, or the target's\n     * ancestors (parents).\n     * \n     * If set on a {{#crossLink \"Container\"}}{{/crossLink}}, children of the Container will not receive mouse events.\n     * This is similar to setting {{#crossLink \"mouseChildren\"}}{{/crossLink}} to false.\n     *\n     * Note that hitArea is NOT currently used by the `hitTest()` method, nor is it supported for {{#crossLink \"Stage\"}}{{/crossLink}}.\n     * @property hitArea\n     * @type {DisplayObject}\n     * @default null\n     */\n    this.hitArea = null;\n\n    /**\n     * A CSS cursor (ex. \"pointer\", \"help\", \"text\", etc) that will be displayed when the user hovers over this display\n     * object. You must enable mouseover events using the {{#crossLink \"Stage/enableMouseOver\"}}{{/crossLink}} method to\n     * use this property. Setting a non-null cursor on a Container will override the cursor set on its descendants.\n     * @property cursor\n     * @type {String}\n     * @default null\n     */\n    this.cursor = null;\n\n    // private properties:\n    /**\n     * @property _cacheOffsetX\n     * @protected\n     * @type {Number}\n     * @default 0\n     **/\n    this._cacheOffsetX = 0;\n\n    /**\n     * @property _cacheOffsetY\n     * @protected\n     * @type {Number}\n     * @default 0\n     **/\n    this._cacheOffsetY = 0;\n\n    /**\n     * @property _filterOffsetX\n     * @protected\n     * @type {Number}\n     * @default 0\n     **/\n    this._filterOffsetX = 0;\n\n    /**\n     * @property _filterOffsetY\n     * @protected\n     * @type {Number}\n     * @default 0\n     **/\n    this._filterOffsetY = 0;\n\n    /**\n     * @property _cacheScale\n     * @protected\n     * @type {Number}\n     * @default 1\n     **/\n    this._cacheScale = 1;\n\n    /**\n    * @property _cacheDataURLID\n    * @protected\n    * @type {Number}\n    * @default 0\n    */\n    this._cacheDataURLID = 0;\n\n    /**\n    * @property _cacheDataURL\n    * @protected\n    * @type {String}\n    * @default null\n    */\n    this._cacheDataURL = null;\n\n    /**\n     * @property _props\n     * @protected\n     * @type {DisplayObject}\n     * @default null\n     **/\n    this._props = new createjs.DisplayProps();\n\n    /**\n     * @property _rectangle\n     * @protected\n     * @type {Rectangle}\n     * @default null\n     **/\n    this._rectangle = new createjs.Rectangle();\n\n    /**\n     * @property _bounds\n     * @protected\n     * @type {Rectangle}\n     * @default null\n     **/\n    this._bounds = null;\n  }\n  var p = createjs.extend(DisplayObject, createjs.EventDispatcher);\n\n  // TODO: deprecated\n  // p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\n\n  // static properties:\n  /**\n   * Listing of mouse event names. Used in _hasMouseEventListener.\n   * @property _MOUSE_EVENTS\n   * @protected\n   * @static\n   * @type {Array}\n   **/\n  DisplayObject._MOUSE_EVENTS = [\"click\", \"dblclick\", \"mousedown\", \"mouseout\", \"mouseover\", \"pressmove\", \"pressup\", \"rollout\", \"rollover\"];\n\n  /**\n   * Suppresses errors generated when using features like hitTest, mouse events, and {{#crossLink \"getObjectsUnderPoint\"}}{{/crossLink}}\n   * with cross domain content.\n   * @property suppressCrossDomainErrors\n   * @static\n   * @type {Boolean}\n   * @default false\n   **/\n  DisplayObject.suppressCrossDomainErrors = false;\n\n  /**\n   * @property _snapToPixelEnabled\n   * @protected\n   * @static\n   * @type {Boolean}\n   * @default false\n   **/\n  DisplayObject._snapToPixelEnabled = false; // stage.snapToPixelEnabled is temporarily copied here during a draw to provide global access.\n\n  /**\n   * @property _hitTestCanvas\n   * @type {HTMLCanvasElement | Object}\n   * @static\n   * @protected\n   **/\n  /**\n   * @property _hitTestContext\n   * @type {CanvasRenderingContext2D}\n   * @static\n   * @protected\n   **/\n  var canvas = createjs.createCanvas ? createjs.createCanvas() : document.createElement(\"canvas\"); // prevent errors on load in browsers without canvas.\n  if (canvas.getContext) {\n    DisplayObject._hitTestCanvas = canvas;\n    DisplayObject._hitTestContext = canvas.getContext(\"2d\");\n    canvas.width = canvas.height = 1;\n  }\n\n  /**\n   * @property _nextCacheID\n   * @type {Number}\n   * @static\n   * @protected\n   **/\n  DisplayObject._nextCacheID = 1;\n\n  // events:\n  /**\n   * Dispatched when the user presses their left mouse button over the display object. See the \n   * {{#crossLink \"MouseEvent\"}}{{/crossLink}} class for a listing of event properties.\n   * @event mousedown\n   * @since 0.6.0\n   */\n\n  /**\n   * Dispatched when the user presses their left mouse button and then releases it while over the display object.\n   * See the {{#crossLink \"MouseEvent\"}}{{/crossLink}} class for a listing of event properties.\n   * @event click\n   * @since 0.6.0\n   */\n\n  /**\n   * Dispatched when the user double clicks their left mouse button over this display object.\n   * See the {{#crossLink \"MouseEvent\"}}{{/crossLink}} class for a listing of event properties.\n   * @event dblclick\n   * @since 0.6.0\n   */\n\n  /**\n   * Dispatched when the user's mouse enters this display object. This event must be enabled using \n   * {{#crossLink \"Stage/enableMouseOver\"}}{{/crossLink}}. See also {{#crossLink \"DisplayObject/rollover:event\"}}{{/crossLink}}.\n   * See the {{#crossLink \"MouseEvent\"}}{{/crossLink}} class for a listing of event properties.\n   * @event mouseover\n   * @since 0.6.0\n   */\n\n  /**\n   * Dispatched when the user's mouse leaves this display object. This event must be enabled using \n   * {{#crossLink \"Stage/enableMouseOver\"}}{{/crossLink}}. See also {{#crossLink \"DisplayObject/rollout:event\"}}{{/crossLink}}.\n   * See the {{#crossLink \"MouseEvent\"}}{{/crossLink}} class for a listing of event properties.\n   * @event mouseout\n   * @since 0.6.0\n   */\n\n  /**\n   * This event is similar to {{#crossLink \"DisplayObject/mouseover:event\"}}{{/crossLink}}, with the following\n   * differences: it does not bubble, and it considers {{#crossLink \"Container\"}}{{/crossLink}} instances as an\n   * aggregate of their content.\n   * \n   * For example, myContainer contains two overlapping children: shapeA and shapeB. The user moves their mouse over\n   * shapeA and then directly on to shapeB. With a listener for {{#crossLink \"mouseover:event\"}}{{/crossLink}} on\n   * myContainer, two events would be received, each targeting a child element:<OL>\n   * <LI>when the mouse enters shapeA (target=shapeA)</LI>\n   * <LI>when the mouse enters shapeB (target=shapeB)</LI>\n   * </OL>\n   * However, with a listener for \"rollover\" instead, only a single event is received when the mouse first enters\n   * the aggregate myContainer content (target=myContainer).\n   * \n   * This event must be enabled using {{#crossLink \"Stage/enableMouseOver\"}}{{/crossLink}}.\n   * See the {{#crossLink \"MouseEvent\"}}{{/crossLink}} class for a listing of event properties.\n   * @event rollover\n   * @since 0.7.0\n   */\n\n  /**\n   * This event is similar to {{#crossLink \"DisplayObject/mouseout:event\"}}{{/crossLink}}, with the following\n   * differences: it does not bubble, and it considers {{#crossLink \"Container\"}}{{/crossLink}} instances as an\n   * aggregate of their content.\n   * \n   * For example, myContainer contains two overlapping children: shapeA and shapeB. The user moves their mouse over\n   * shapeA, then directly on to shapeB, then off both. With a listener for {{#crossLink \"mouseout:event\"}}{{/crossLink}}\n   * on myContainer, two events would be received, each targeting a child element:<OL>\n   * <LI>when the mouse leaves shapeA (target=shapeA)</LI>\n   * <LI>when the mouse leaves shapeB (target=shapeB)</LI>\n   * </OL>\n   * However, with a listener for \"rollout\" instead, only a single event is received when the mouse leaves\n   * the aggregate myContainer content (target=myContainer).\n   * \n   * This event must be enabled using {{#crossLink \"Stage/enableMouseOver\"}}{{/crossLink}}.\n   * See the {{#crossLink \"MouseEvent\"}}{{/crossLink}} class for a listing of event properties.\n   * @event rollout\n   * @since 0.7.0\n   */\n\n  /**\n   * After a {{#crossLink \"DisplayObject/mousedown:event\"}}{{/crossLink}} occurs on a display object, a pressmove\n   * event will be generated on that object whenever the mouse moves until the mouse press is released. This can be\n   * useful for dragging and similar operations.\n   * @event pressmove\n   * @since 0.7.0\n   */\n\n  /**\n   * After a {{#crossLink \"DisplayObject/mousedown:event\"}}{{/crossLink}} occurs on a display object, a pressup event\n   * will be generated on that object when that mouse press is released. This can be useful for dragging and similar\n   * operations.\n   * @event pressup\n   * @since 0.7.0\n   */\n\n  /**\n   * Dispatched when the display object is added to a parent container.\n   * @event added\n   */\n\n  /**\n   * Dispatched when the display object is removed from its parent container.\n   * @event removed\n   */\n\n  /**\n   * Dispatched on each display object on a stage whenever the stage updates. This occurs immediately before the\n   * rendering (draw) pass. When {{#crossLink \"Stage/update\"}}{{/crossLink}} is called, first all display objects on\n   * the stage dispatch the tick event, then all of the display objects are drawn to stage. Children will have their\n   * {{#crossLink \"tick:event\"}}{{/crossLink}} event dispatched in order of their depth prior to the event being\n   * dispatched on their parent.\n   * @event tick\n   * @param {Object} target The object that dispatched the event.\n   * @param {String} type The event type.\n   * @param {Array} params An array containing any arguments that were passed to the Stage.update() method. For\n   *      example if you called stage.update(\"hello\"), then the params would be [\"hello\"].\n   * @since 0.6.0\n   */\n\n  // getter / setters:\n  /**\n   * Use the {{#crossLink \"DisplayObject/stage:property\"}}{{/crossLink}} property instead.\n   * @method getStage\n   * @return {Stage}\n   * @deprecated\n   **/\n  p.getStage = function () {\n    // uses dynamic access to avoid circular dependencies;\n    var o = this,\n      _Stage = createjs[\"Stage\"];\n    while (o.parent) {\n      o = o.parent;\n    }\n    if (o instanceof _Stage) {\n      return o;\n    }\n    return null;\n  };\n\n  /**\n   * Returns the Stage instance that this display object will be rendered on, or null if it has not been added to one.\n   * @property stage\n   * @type {Stage}\n   * @readonly\n   **/\n  try {\n    Object.defineProperties(p, {\n      stage: {\n        get: p.getStage\n      }\n    });\n  } catch (e) {}\n\n  // public methods:\n  /**\n   * Returns true or false indicating whether the display object would be visible if drawn to a canvas.\n   * This does not account for whether it would be visible within the boundaries of the stage.\n   *\n   * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n   * @method isVisible\n   * @return {Boolean} Boolean indicating whether the display object would be visible if drawn to a canvas\n   **/\n  p.isVisible = function () {\n    return !!(this.visible && this.alpha > 0 && this.scaleX != 0 && this.scaleY != 0);\n  };\n\n  /**\n   * Draws the display object into the specified context ignoring its visible, alpha, shadow, and transform.\n   * Returns <code>true</code> if the draw was handled (useful for overriding functionality).\n   *\n   * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n   * @method draw\n   * @param {CanvasRenderingContext2D} ctx The canvas 2D context object to draw into.\n   * @param {Boolean} [ignoreCache=false] Indicates whether the draw operation should ignore any current cache. For example,\n   * used for drawing the cache (to prevent it from simply drawing an existing cache back into itself).\n   * @return {Boolean}\n   **/\n  p.draw = function (ctx, ignoreCache) {\n    var cacheCanvas = this.cacheCanvas;\n    if (ignoreCache || !cacheCanvas) {\n      return false;\n    }\n    var scale = this._cacheScale;\n    ctx.drawImage(cacheCanvas, this._cacheOffsetX + this._filterOffsetX, this._cacheOffsetY + this._filterOffsetY, cacheCanvas.width / scale, cacheCanvas.height / scale);\n    return true;\n  };\n\n  /**\n   * Applies this display object's transformation, alpha, globalCompositeOperation, clipping path (mask), and shadow\n   * to the specified context. This is typically called prior to {{#crossLink \"DisplayObject/draw\"}}{{/crossLink}}.\n   * @method updateContext\n   * @param {CanvasRenderingContext2D} ctx The canvas 2D to update.\n   **/\n  p.updateContext = function (ctx) {\n    var o = this,\n      mask = o.mask,\n      mtx = o._props.matrix;\n    if (mask && mask.graphics && !mask.graphics.isEmpty()) {\n      mask.getMatrix(mtx);\n      ctx.transform(mtx.a, mtx.b, mtx.c, mtx.d, mtx.tx, mtx.ty);\n      mask.graphics.drawAsPath(ctx);\n      ctx.clip();\n      mtx.invert();\n      ctx.transform(mtx.a, mtx.b, mtx.c, mtx.d, mtx.tx, mtx.ty);\n    }\n    this.getMatrix(mtx);\n    var tx = mtx.tx,\n      ty = mtx.ty;\n    if (DisplayObject._snapToPixelEnabled && o.snapToPixel) {\n      tx = tx + (tx < 0 ? -0.5 : 0.5) | 0;\n      ty = ty + (ty < 0 ? -0.5 : 0.5) | 0;\n    }\n    ctx.transform(mtx.a, mtx.b, mtx.c, mtx.d, tx, ty);\n    ctx.globalAlpha *= o.alpha;\n    if (o.compositeOperation) {\n      ctx.globalCompositeOperation = o.compositeOperation;\n    }\n    if (o.shadow) {\n      this._applyShadow(ctx, o.shadow);\n    }\n  };\n\n  /**\n   * Draws the display object into a new canvas, which is then used for subsequent draws. For complex content\n   * that does not change frequently (ex. a Container with many children that do not move, or a complex vector Shape),\n   * this can provide for much faster rendering because the content does not need to be re-rendered each tick. The\n   * cached display object can be moved, rotated, faded, etc freely, however if its content changes, you must\n   * manually update the cache by calling <code>updateCache()</code> or <code>cache()</code> again. You must specify\n   * the cache area via the x, y, w, and h parameters. This defines the rectangle that will be rendered and cached\n   * using this display object's coordinates.\n   *\n   * <h4>Example</h4>\n   * For example if you defined a Shape that drew a circle at 0, 0 with a radius of 25:\n   *\n   *      var shape = new createjs.Shape();\n   *      shape.graphics.beginFill(\"#ff0000\").drawCircle(0, 0, 25);\n   *      myShape.cache(-25, -25, 50, 50);\n   *\n   * Note that filters need to be defined <em>before</em> the cache is applied. Check out the {{#crossLink \"Filter\"}}{{/crossLink}}\n   * class for more information. Some filters (ex. BlurFilter) will not work as expected in conjunction with the scale param.\n   * \n   * Usually, the resulting cacheCanvas will have the dimensions width*scale by height*scale, however some filters (ex. BlurFilter)\n   * will add padding to the canvas dimensions.\n   *\n   * @method cache\n   * @param {Number} x The x coordinate origin for the cache region.\n   * @param {Number} y The y coordinate origin for the cache region.\n   * @param {Number} width The width of the cache region.\n   * @param {Number} height The height of the cache region.\n   * @param {Number} [scale=1] The scale at which the cache will be created. For example, if you cache a vector shape using\n   * \tmyShape.cache(0,0,100,100,2) then the resulting cacheCanvas will be 200x200 px. This lets you scale and rotate\n   * \tcached elements with greater fidelity. Default is 1.\n   **/\n  p.cache = function (x, y, width, height, scale) {\n    // draw to canvas.\n    scale = scale || 1;\n    if (!this.cacheCanvas) {\n      this.cacheCanvas = createjs.createCanvas ? createjs.createCanvas() : document.createElement(\"canvas\");\n    }\n    this._cacheWidth = width;\n    this._cacheHeight = height;\n    this._cacheOffsetX = x;\n    this._cacheOffsetY = y;\n    this._cacheScale = scale;\n    this.updateCache();\n  };\n\n  /**\n   * Redraws the display object to its cache. Calling updateCache without an active cache will throw an error.\n   * If compositeOperation is null the current cache will be cleared prior to drawing. Otherwise the display object\n   * will be drawn over the existing cache using the specified compositeOperation.\n   *\n   * <h4>Example</h4>\n   * Clear the current graphics of a cached shape, draw some new instructions, and then update the cache. The new line\n   * will be drawn on top of the old one.\n   *\n   *      // Not shown: Creating the shape, and caching it.\n   *      shapeInstance.clear();\n   *      shapeInstance.setStrokeStyle(3).beginStroke(\"#ff0000\").moveTo(100, 100).lineTo(200,200);\n   *      shapeInstance.updateCache();\n   *\n   * @method updateCache\n   * @param {String} compositeOperation The compositeOperation to use, or null to clear the cache and redraw it.\n   * <a href=\"http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#compositing\">\n   * whatwg spec on compositing</a>.\n   **/\n  p.updateCache = function (compositeOperation) {\n    var cacheCanvas = this.cacheCanvas;\n    if (!cacheCanvas) {\n      throw \"cache() must be called before updateCache()\";\n    }\n    var scale = this._cacheScale,\n      offX = this._cacheOffsetX * scale,\n      offY = this._cacheOffsetY * scale;\n    var w = this._cacheWidth,\n      h = this._cacheHeight,\n      ctx = cacheCanvas.getContext(\"2d\");\n    var fBounds = this._getFilterBounds();\n    offX += this._filterOffsetX = fBounds.x;\n    offY += this._filterOffsetY = fBounds.y;\n    w = Math.ceil(w * scale) + fBounds.width;\n    h = Math.ceil(h * scale) + fBounds.height;\n    if (w != cacheCanvas.width || h != cacheCanvas.height) {\n      // TODO: it would be nice to preserve the content if there is a compositeOperation.\n      cacheCanvas.width = w;\n      cacheCanvas.height = h;\n    } else if (!compositeOperation) {\n      ctx.clearRect(0, 0, w + 1, h + 1);\n    }\n    ctx.save();\n    ctx.globalCompositeOperation = compositeOperation;\n    ctx.setTransform(scale, 0, 0, scale, -offX, -offY);\n    this.draw(ctx, true);\n    // TODO: filters and cache scale don't play well together at present.\n    this._applyFilters();\n    ctx.restore();\n    this.cacheID = DisplayObject._nextCacheID++;\n  };\n\n  /**\n   * Clears the current cache. See {{#crossLink \"DisplayObject/cache\"}}{{/crossLink}} for more information.\n   * @method uncache\n   **/\n  p.uncache = function () {\n    this._cacheDataURL = this.cacheCanvas = null;\n    this.cacheID = this._cacheOffsetX = this._cacheOffsetY = this._filterOffsetX = this._filterOffsetY = 0;\n    this._cacheScale = 1;\n  };\n\n  /**\n   * Returns a data URL for the cache, or null if this display object is not cached.\n   * Uses cacheID to ensure a new data URL is not generated if the cache has not changed.\n   * @method getCacheDataURL\n   * @return {String} The image data url for the cache.\n   **/\n  p.getCacheDataURL = function () {\n    if (!this.cacheCanvas) {\n      return null;\n    }\n    if (this.cacheID != this._cacheDataURLID) {\n      this._cacheDataURL = this.cacheCanvas.toDataURL();\n    }\n    return this._cacheDataURL;\n  };\n\n  /**\n   * Transforms the specified x and y position from the coordinate space of the display object\n   * to the global (stage) coordinate space. For example, this could be used to position an HTML label\n   * over a specific point on a nested display object. Returns a Point instance with x and y properties\n   * correlating to the transformed coordinates on the stage.\n   *\n   * <h4>Example</h4>\n   *\n   *      displayObject.x = 300;\n   *      displayObject.y = 200;\n   *      stage.addChild(displayObject);\n   *      var point = displayObject.localToGlobal(100, 100);\n   *      // Results in x=400, y=300\n   *\n   * @method localToGlobal\n   * @param {Number} x The x position in the source display object to transform.\n   * @param {Number} y The y position in the source display object to transform.\n   * @param {Point | Object} [pt] An object to copy the result into. If omitted a new Point object with x/y properties will be returned. \n   * @return {Point} A Point instance with x and y properties correlating to the transformed coordinates\n   * on the stage.\n   **/\n  p.localToGlobal = function (x, y, pt) {\n    return this.getConcatenatedMatrix(this._props.matrix).transformPoint(x, y, pt || new createjs.Point());\n  };\n\n  /**\n   * Transforms the specified x and y position from the global (stage) coordinate space to the\n   * coordinate space of the display object. For example, this could be used to determine\n   * the current mouse position within the display object. Returns a Point instance with x and y properties\n   * correlating to the transformed position in the display object's coordinate space.\n   *\n   * <h4>Example</h4>\n   *\n   *      displayObject.x = 300;\n   *      displayObject.y = 200;\n   *      stage.addChild(displayObject);\n   *      var point = displayObject.globalToLocal(100, 100);\n   *      // Results in x=-200, y=-100\n   *\n   * @method globalToLocal\n   * @param {Number} x The x position on the stage to transform.\n   * @param {Number} y The y position on the stage to transform.\n   * @param {Point | Object} [pt] An object to copy the result into. If omitted a new Point object with x/y properties will be returned. \n   * @return {Point} A Point instance with x and y properties correlating to the transformed position in the\n   * display object's coordinate space.\n   **/\n  p.globalToLocal = function (x, y, pt) {\n    return this.getConcatenatedMatrix(this._props.matrix).invert().transformPoint(x, y, pt || new createjs.Point());\n  };\n\n  /**\n   * Transforms the specified x and y position from the coordinate space of this display object to the coordinate\n   * space of the target display object. Returns a Point instance with x and y properties correlating to the\n   * transformed position in the target's coordinate space. Effectively the same as using the following code with\n   * {{#crossLink \"DisplayObject/localToGlobal\"}}{{/crossLink}} and {{#crossLink \"DisplayObject/globalToLocal\"}}{{/crossLink}}.\n   *\n   *      var pt = this.localToGlobal(x, y);\n   *      pt = target.globalToLocal(pt.x, pt.y);\n   *\n   * @method localToLocal\n   * @param {Number} x The x position in the source display object to transform.\n   * @param {Number} y The y position on the source display object to transform.\n   * @param {DisplayObject} target The target display object to which the coordinates will be transformed.\n   * @param {Point | Object} [pt] An object to copy the result into. If omitted a new Point object with x/y properties will be returned. \n   * @return {Point} Returns a Point instance with x and y properties correlating to the transformed position\n   * in the target's coordinate space.\n   **/\n  p.localToLocal = function (x, y, target, pt) {\n    pt = this.localToGlobal(x, y, pt);\n    return target.globalToLocal(pt.x, pt.y, pt);\n  };\n\n  /**\n   * Shortcut method to quickly set the transform properties on the display object. All parameters are optional.\n   * Omitted parameters will have the default value set.\n   *\n   * <h4>Example</h4>\n   *\n   *      displayObject.setTransform(100, 100, 2, 2);\n   *\n   * @method setTransform\n   * @param {Number} [x=0] The horizontal translation (x position) in pixels\n   * @param {Number} [y=0] The vertical translation (y position) in pixels\n   * @param {Number} [scaleX=1] The horizontal scale, as a percentage of 1\n   * @param {Number} [scaleY=1] the vertical scale, as a percentage of 1\n   * @param {Number} [rotation=0] The rotation, in degrees\n   * @param {Number} [skewX=0] The horizontal skew factor\n   * @param {Number} [skewY=0] The vertical skew factor\n   * @param {Number} [regX=0] The horizontal registration point in pixels\n   * @param {Number} [regY=0] The vertical registration point in pixels\n   * @return {DisplayObject} Returns this instance. Useful for chaining commands.\n   * @chainable\n  */\n  p.setTransform = function (x, y, scaleX, scaleY, rotation, skewX, skewY, regX, regY) {\n    this.x = x || 0;\n    this.y = y || 0;\n    this.scaleX = scaleX == null ? 1 : scaleX;\n    this.scaleY = scaleY == null ? 1 : scaleY;\n    this.rotation = rotation || 0;\n    this.skewX = skewX || 0;\n    this.skewY = skewY || 0;\n    this.regX = regX || 0;\n    this.regY = regY || 0;\n    return this;\n  };\n\n  /**\n   * Returns a matrix based on this object's current transform.\n   * @method getMatrix\n   * @param {Matrix2D} matrix Optional. A Matrix2D object to populate with the calculated values. If null, a new\n   * Matrix object is returned.\n   * @return {Matrix2D} A matrix representing this display object's transform.\n   **/\n  p.getMatrix = function (matrix) {\n    var o = this,\n      mtx = matrix && matrix.identity() || new createjs.Matrix2D();\n    return o.transformMatrix ? mtx.copy(o.transformMatrix) : mtx.appendTransform(o.x, o.y, o.scaleX, o.scaleY, o.rotation, o.skewX, o.skewY, o.regX, o.regY);\n  };\n\n  /**\n   * Generates a Matrix2D object representing the combined transform of the display object and all of its\n   * parent Containers up to the highest level ancestor (usually the {{#crossLink \"Stage\"}}{{/crossLink}}). This can\n   * be used to transform positions between coordinate spaces, such as with {{#crossLink \"DisplayObject/localToGlobal\"}}{{/crossLink}}\n   * and {{#crossLink \"DisplayObject/globalToLocal\"}}{{/crossLink}}.\n   * @method getConcatenatedMatrix\n   * @param {Matrix2D} [matrix] A {{#crossLink \"Matrix2D\"}}{{/crossLink}} object to populate with the calculated values.\n   * If null, a new Matrix2D object is returned.\n   * @return {Matrix2D} The combined matrix.\n   **/\n  p.getConcatenatedMatrix = function (matrix) {\n    var o = this,\n      mtx = this.getMatrix(matrix);\n    while (o = o.parent) {\n      mtx.prependMatrix(o.getMatrix(o._props.matrix));\n    }\n    return mtx;\n  };\n\n  /**\n   * Generates a DisplayProps object representing the combined display properties of the  object and all of its\n   * parent Containers up to the highest level ancestor (usually the {{#crossLink \"Stage\"}}{{/crossLink}}).\n   * @method getConcatenatedDisplayProps\n   * @param {DisplayProps} [props] A {{#crossLink \"DisplayProps\"}}{{/crossLink}} object to populate with the calculated values.\n   * If null, a new DisplayProps object is returned.\n   * @return {DisplayProps} The combined display properties.\n   **/\n  p.getConcatenatedDisplayProps = function (props) {\n    props = props ? props.identity() : new createjs.DisplayProps();\n    var o = this,\n      mtx = o.getMatrix(props.matrix);\n    do {\n      props.prepend(o.visible, o.alpha, o.shadow, o.compositeOperation);\n\n      // we do this to avoid problems with the matrix being used for both operations when o._props.matrix is passed in as the props param.\n      // this could be simplified (ie. just done as part of the prepend above) if we switched to using a pool.\n      if (o != this) {\n        mtx.prependMatrix(o.getMatrix(o._props.matrix));\n      }\n    } while (o = o.parent);\n    return props;\n  };\n\n  /**\n   * Tests whether the display object intersects the specified point in <em>local</em> coordinates (ie. draws a pixel\n   * with alpha > 0 at the specified position). This ignores the alpha, shadow, hitArea, mask, and compositeOperation\n   * of the display object.\n   *\n   * <h4>Example</h4>\n   *\n   * \t\tvar myShape = new createjs.Shape();\n   * \t\tmyShape.graphics.beginFill(\"red\").drawRect(100, 100, 20, 50);\n   *\n   * \t\tconsole.log(myShape.hitTest(10,10); // false\n   * \t\tconsole.log(myShape.hitTest(110, 25); // true\n   *\n   * Note that to use Stage coordinates (such as {{#crossLink \"Stage/mouseX:property\"}}{{/crossLink}}), they must\n   * first be converted to local coordinates:\n   *\n   *      stage.addEventListener(\"stagemousedown\", handleMouseDown);\n   *      function handleMouseDown(event) {\n   *      \tvar p = myShape.globalToLocal(stage.mouseX, stage.mouseY);\n   *          var hit = myShape.hitTest(p.x, p.y);\n   *      }\n   *\n   * Shape-to-shape collision is not currently supported by EaselJS.\n   *\n   * @method hitTest\n   * @param {Number} x The x position to check in the display object's local coordinates.\n   * @param {Number} y The y position to check in the display object's local coordinates.\n   * @return {Boolean} A Boolean indicating whether a visible portion of the DisplayObject intersect the specified\n   * local Point.\n  */\n  p.hitTest = function (x, y) {\n    var ctx = DisplayObject._hitTestContext;\n    ctx.setTransform(1, 0, 0, 1, -x, -y);\n    this.draw(ctx);\n    var hit = this._testHit(ctx);\n    ctx.setTransform(1, 0, 0, 1, 0, 0);\n    ctx.clearRect(0, 0, 2, 2);\n    return hit;\n  };\n\n  /**\n   * Provides a chainable shortcut method for setting a number of properties on the instance.\n   *\n   * <h4>Example</h4>\n   *\n   *      var myGraphics = new createjs.Graphics().beginFill(\"#ff0000\").drawCircle(0, 0, 25);\n   *      var shape = stage.addChild(new createjs.Shape()).set({graphics:myGraphics, x:100, y:100, alpha:0.5});\n   *\n   * @method set\n   * @param {Object} props A generic object containing properties to copy to the DisplayObject instance.\n   * @return {DisplayObject} Returns the instance the method is called on (useful for chaining calls.)\n   * @chainable\n  */\n  p.set = function (props) {\n    for (var n in props) {\n      this[n] = props[n];\n    }\n    return this;\n  };\n\n  /**\n   * Returns a rectangle representing this object's bounds in its local coordinate system (ie. with no transformation).\n   * Objects that have been cached will return the bounds of the cache.\n   * \n   * Not all display objects can calculate their own bounds (ex. Shape). For these objects, you can use \n   * {{#crossLink \"DisplayObject/setBounds\"}}{{/crossLink}} so that they are included when calculating Container\n   * bounds.\n   * \n   * <table>\n   * \t<tr><td><b>All</b></td><td>\n   * \t\tAll display objects support setting bounds manually using setBounds(). Likewise, display objects that\n   * \t\thave been cached using cache() will return the bounds of their cache. Manual and cache bounds will override\n   * \t\tthe automatic calculations listed below.\n   * \t</td></tr>\n   * \t<tr><td><b>Bitmap</b></td><td>\n   * \t\tReturns the width and height of the sourceRect (if specified) or image, extending from (x=0,y=0).\n   * \t</td></tr>\n   * \t<tr><td><b>Sprite</b></td><td>\n   * \t\tReturns the bounds of the current frame. May have non-zero x/y if a frame registration point was specified\n   * \t\tin the spritesheet data. See also {{#crossLink \"SpriteSheet/getFrameBounds\"}}{{/crossLink}}\n   * \t</td></tr>\n   * \t<tr><td><b>Container</b></td><td>\n   * \t\tReturns the aggregate (combined) bounds of all children that return a non-null value from getBounds().\n   * \t</td></tr>\n   * \t<tr><td><b>Shape</b></td><td>\n   * \t\tDoes not currently support automatic bounds calculations. Use setBounds() to manually define bounds.\n   * \t</td></tr>\n   * \t<tr><td><b>Text</b></td><td>\n   * \t\tReturns approximate bounds. Horizontal values (x/width) are quite accurate, but vertical values (y/height) are\n   * \t\tnot, especially when using textBaseline values other than \"top\".\n   * \t</td></tr>\n   * \t<tr><td><b>BitmapText</b></td><td>\n   * \t\tReturns approximate bounds. Values will be more accurate if spritesheet frame registration points are close\n   * \t\tto (x=0,y=0).\n   * \t</td></tr>\n  * </table>\n   * \n   * Bounds can be expensive to calculate for some objects (ex. text, or containers with many children), and\n   * are recalculated each time you call getBounds(). You can prevent recalculation on static objects by setting the\n   * bounds explicitly:\n   * \n   * \tvar bounds = obj.getBounds();\n   * \tobj.setBounds(bounds.x, bounds.y, bounds.width, bounds.height);\n   * \t// getBounds will now use the set values, instead of recalculating\n   * \n   * To reduce memory impact, the returned Rectangle instance may be reused internally; clone the instance or copy its\n   * values if you need to retain it.\n   * \n   * \tvar myBounds = obj.getBounds().clone();\n   * \t// OR:\n   * \tmyRect.copy(obj.getBounds());\n   * \n   * @method getBounds\n   * @return {Rectangle} A Rectangle instance representing the bounds, or null if bounds are not available for this\n   * object.\n   **/\n  p.getBounds = function () {\n    if (this._bounds) {\n      return this._rectangle.copy(this._bounds);\n    }\n    var cacheCanvas = this.cacheCanvas;\n    if (cacheCanvas) {\n      var scale = this._cacheScale;\n      return this._rectangle.setValues(this._cacheOffsetX, this._cacheOffsetY, cacheCanvas.width / scale, cacheCanvas.height / scale);\n    }\n    return null;\n  };\n\n  /**\n   * Returns a rectangle representing this object's bounds in its parent's coordinate system (ie. with transformations applied).\n   * Objects that have been cached will return the transformed bounds of the cache.\n   * \n   * Not all display objects can calculate their own bounds (ex. Shape). For these objects, you can use \n   * {{#crossLink \"DisplayObject/setBounds\"}}{{/crossLink}} so that they are included when calculating Container\n   * bounds.\n   * \n   * To reduce memory impact, the returned Rectangle instance may be reused internally; clone the instance or copy its\n   * values if you need to retain it.\n   * \n   * Container instances calculate aggregate bounds for all children that return bounds via getBounds.\n   * @method getTransformedBounds\n   * @return {Rectangle} A Rectangle instance representing the bounds, or null if bounds are not available for this object.\n   **/\n  p.getTransformedBounds = function () {\n    return this._getBounds();\n  };\n\n  /**\n   * Allows you to manually specify the bounds of an object that either cannot calculate their own bounds (ex. Shape &\n   * Text) for future reference, or so the object can be included in Container bounds. Manually set bounds will always\n   * override calculated bounds.\n   * \n   * The bounds should be specified in the object's local (untransformed) coordinates. For example, a Shape instance\n   * with a 25px radius circle centered at 0,0 would have bounds of (-25, -25, 50, 50).\n   * @method setBounds\n   * @param {Number} x The x origin of the bounds. Pass null to remove the manual bounds.\n   * @param {Number} y The y origin of the bounds.\n   * @param {Number} width The width of the bounds.\n   * @param {Number} height The height of the bounds.\n   **/\n  p.setBounds = function (x, y, width, height) {\n    if (x == null) {\n      this._bounds = x;\n    }\n    this._bounds = (this._bounds || new createjs.Rectangle()).setValues(x, y, width, height);\n  };\n\n  /**\n   * Returns a clone of this DisplayObject. Some properties that are specific to this instance's current context are\n   * reverted to their defaults (for example .parent). Caches are not maintained across clones, and some elements\n   * are copied by reference (masks, individual filter instances, hit area)\n   * @method clone\n   * @return {DisplayObject} A clone of the current DisplayObject instance.\n   **/\n  p.clone = function () {\n    return this._cloneProps(new DisplayObject());\n  };\n\n  /**\n   * Returns a string representation of this object.\n   * @method toString\n   * @return {String} a string representation of the instance.\n   **/\n  p.toString = function () {\n    return \"[DisplayObject (name=\" + this.name + \")]\";\n  };\n\n  // private methods:\n  // separated so it can be used more easily in subclasses:\n  /**\n   * @method _cloneProps\n   * @param {DisplayObject} o The DisplayObject instance which will have properties from the current DisplayObject\n   * instance copied into.\n   * @return {DisplayObject} o\n   * @protected\n   **/\n  p._cloneProps = function (o) {\n    o.alpha = this.alpha;\n    o.mouseEnabled = this.mouseEnabled;\n    o.tickEnabled = this.tickEnabled;\n    o.name = this.name;\n    o.regX = this.regX;\n    o.regY = this.regY;\n    o.rotation = this.rotation;\n    o.scaleX = this.scaleX;\n    o.scaleY = this.scaleY;\n    o.shadow = this.shadow;\n    o.skewX = this.skewX;\n    o.skewY = this.skewY;\n    o.visible = this.visible;\n    o.x = this.x;\n    o.y = this.y;\n    o.compositeOperation = this.compositeOperation;\n    o.snapToPixel = this.snapToPixel;\n    o.filters = this.filters == null ? null : this.filters.slice(0);\n    o.mask = this.mask;\n    o.hitArea = this.hitArea;\n    o.cursor = this.cursor;\n    o._bounds = this._bounds;\n    return o;\n  };\n\n  /**\n   * @method _applyShadow\n   * @protected\n   * @param {CanvasRenderingContext2D} ctx\n   * @param {Shadow} shadow\n   **/\n  p._applyShadow = function (ctx, shadow) {\n    shadow = shadow || Shadow.identity;\n    ctx.shadowColor = shadow.color;\n    ctx.shadowOffsetX = shadow.offsetX;\n    ctx.shadowOffsetY = shadow.offsetY;\n    ctx.shadowBlur = shadow.blur;\n  };\n\n  /**\n   * @method _tick\n   * @param {Object} evtObj An event object that will be dispatched to all tick listeners. This object is reused between dispatchers to reduce construction & GC costs.\n   * @protected\n   **/\n  p._tick = function (evtObj) {\n    // because tick can be really performance sensitive, check for listeners before calling dispatchEvent.\n    var ls = this._listeners;\n    if (ls && ls[\"tick\"]) {\n      // reset & reuse the event object to avoid construction / GC costs:\n      evtObj.target = null;\n      evtObj.propagationStopped = evtObj.immediatePropagationStopped = false;\n      this.dispatchEvent(evtObj);\n    }\n  };\n\n  /**\n   * @method _testHit\n   * @protected\n   * @param {CanvasRenderingContext2D} ctx\n   * @return {Boolean}\n   **/\n  p._testHit = function (ctx) {\n    try {\n      var hit = ctx.getImageData(0, 0, 1, 1).data[3] > 1;\n    } catch (e) {\n      if (!DisplayObject.suppressCrossDomainErrors) {\n        throw \"An error has occurred. This is most likely due to security restrictions on reading canvas pixel data with local or cross-domain images.\";\n      }\n    }\n    return hit;\n  };\n\n  /**\n   * @method _applyFilters\n   * @protected\n   **/\n  p._applyFilters = function () {\n    if (!this.filters || this.filters.length == 0 || !this.cacheCanvas) {\n      return;\n    }\n    var l = this.filters.length;\n    var ctx = this.cacheCanvas.getContext(\"2d\");\n    var w = this.cacheCanvas.width;\n    var h = this.cacheCanvas.height;\n    for (var i = 0; i < l; i++) {\n      this.filters[i].applyFilter(ctx, 0, 0, w, h);\n    }\n  };\n\n  /**\n   * @method _getFilterBounds\n   * @return {Rectangle}\n   * @protected\n   **/\n  p._getFilterBounds = function (rect) {\n    var l,\n      filters = this.filters,\n      bounds = this._rectangle.setValues(0, 0, 0, 0);\n    if (!filters || !(l = filters.length)) {\n      return bounds;\n    }\n    for (var i = 0; i < l; i++) {\n      var f = this.filters[i];\n      f.getBounds && f.getBounds(bounds);\n    }\n    return bounds;\n  };\n\n  /**\n   * @method _getBounds\n   * @param {Matrix2D} matrix\n   * @param {Boolean} ignoreTransform If true, does not apply this object's transform.\n   * @return {Rectangle}\n   * @protected\n   **/\n  p._getBounds = function (matrix, ignoreTransform) {\n    return this._transformBounds(this.getBounds(), matrix, ignoreTransform);\n  };\n\n  /**\n   * @method _transformBounds\n   * @param {Rectangle} bounds\n   * @param {Matrix2D} matrix\n   * @param {Boolean} ignoreTransform\n   * @return {Rectangle}\n   * @protected\n   **/\n  p._transformBounds = function (bounds, matrix, ignoreTransform) {\n    if (!bounds) {\n      return bounds;\n    }\n    var x = bounds.x,\n      y = bounds.y,\n      width = bounds.width,\n      height = bounds.height,\n      mtx = this._props.matrix;\n    mtx = ignoreTransform ? mtx.identity() : this.getMatrix(mtx);\n    if (x || y) {\n      mtx.appendTransform(0, 0, 1, 1, 0, 0, 0, -x, -y);\n    } // TODO: simplify this.\n    if (matrix) {\n      mtx.prependMatrix(matrix);\n    }\n    var x_a = width * mtx.a,\n      x_b = width * mtx.b;\n    var y_c = height * mtx.c,\n      y_d = height * mtx.d;\n    var tx = mtx.tx,\n      ty = mtx.ty;\n    var minX = tx,\n      maxX = tx,\n      minY = ty,\n      maxY = ty;\n    if ((x = x_a + tx) < minX) {\n      minX = x;\n    } else if (x > maxX) {\n      maxX = x;\n    }\n    if ((x = x_a + y_c + tx) < minX) {\n      minX = x;\n    } else if (x > maxX) {\n      maxX = x;\n    }\n    if ((x = y_c + tx) < minX) {\n      minX = x;\n    } else if (x > maxX) {\n      maxX = x;\n    }\n    if ((y = x_b + ty) < minY) {\n      minY = y;\n    } else if (y > maxY) {\n      maxY = y;\n    }\n    if ((y = x_b + y_d + ty) < minY) {\n      minY = y;\n    } else if (y > maxY) {\n      maxY = y;\n    }\n    if ((y = y_d + ty) < minY) {\n      minY = y;\n    } else if (y > maxY) {\n      maxY = y;\n    }\n    return bounds.setValues(minX, minY, maxX - minX, maxY - minY);\n  };\n\n  /**\n   * Indicates whether the display object has any mouse event listeners or a cursor.\n   * @method _isMouseOpaque\n   * @return {Boolean}\n   * @protected\n   **/\n  p._hasMouseEventListener = function () {\n    var evts = DisplayObject._MOUSE_EVENTS;\n    for (var i = 0, l = evts.length; i < l; i++) {\n      if (this.hasEventListener(evts[i])) {\n        return true;\n      }\n    }\n    return !!this.cursor;\n  };\n  createjs.DisplayObject = createjs.promote(DisplayObject, \"EventDispatcher\");\n})();\n\n//##############################################################################\n// Container.js\n//##############################################################################\n\n(function () {\n  \"use strict\";\n\n  // constructor:\n  /**\n   * A Container is a nestable display list that allows you to work with compound display elements. For  example you could\n   * group arm, leg, torso and head {{#crossLink \"Bitmap\"}}{{/crossLink}} instances together into a Person Container, and\n   * transform them as a group, while still being able to move the individual parts relative to each other. Children of\n   * containers have their <code>transform</code> and <code>alpha</code> properties concatenated with their parent\n   * Container.\n   *\n   * For example, a {{#crossLink \"Shape\"}}{{/crossLink}} with x=100 and alpha=0.5, placed in a Container with <code>x=50</code>\n   * and <code>alpha=0.7</code> will be rendered to the canvas at <code>x=150</code> and <code>alpha=0.35</code>.\n   * Containers have some overhead, so you generally shouldn't create a Container to hold a single child.\n   *\n   * <h4>Example</h4>\n   *\n   *      var container = new createjs.Container();\n   *      container.addChild(bitmapInstance, shapeInstance);\n   *      container.x = 100;\n   *\n   * @class Container\n   * @extends DisplayObject\n   * @constructor\n   **/\n  function Container() {\n    this.DisplayObject_constructor();\n\n    // public properties:\n    /**\n     * The array of children in the display list. You should usually use the child management methods such as\n     * {{#crossLink \"Container/addChild\"}}{{/crossLink}}, {{#crossLink \"Container/removeChild\"}}{{/crossLink}},\n     * {{#crossLink \"Container/swapChildren\"}}{{/crossLink}}, etc, rather than accessing this directly, but it is\n     * included for advanced uses.\n     * @property children\n     * @type Array\n     * @default null\n     **/\n    this.children = [];\n\n    /**\n     * Indicates whether the children of this container are independently enabled for mouse/pointer interaction.\n     * If false, the children will be aggregated under the container - for example, a click on a child shape would\n     * trigger a click event on the container.\n     * @property mouseChildren\n     * @type Boolean\n     * @default true\n     **/\n    this.mouseChildren = true;\n\n    /**\n     * If false, the tick will not be propagated to children of this Container. This can provide some performance benefits.\n     * In addition to preventing the \"tick\" event from being dispatched, it will also prevent tick related updates\n     * on some display objects (ex. Sprite & MovieClip frame advancing, DOMElement visibility handling).\n     * @property tickChildren\n     * @type Boolean\n     * @default true\n     **/\n    this.tickChildren = true;\n  }\n  var p = createjs.extend(Container, createjs.DisplayObject);\n\n  // getter / setters:\n  /**\n   * Use the {{#crossLink \"Container/numChildren:property\"}}{{/crossLink}} property instead.\n   * @method getNumChildren\n   * @return {Number}\n   * @deprecated\n   **/\n  p.getNumChildren = function () {\n    return this.children.length;\n  };\n\n  /**\n   * Returns the number of children in the container.\n   * @property numChildren\n   * @type {Number}\n   * @readonly\n   **/\n  try {\n    Object.defineProperties(p, {\n      numChildren: {\n        get: p.getNumChildren\n      }\n    });\n  } catch (e) {}\n\n  // public methods:\n  /**\n   * Constructor alias for backwards compatibility. This method will be removed in future versions.\n   * Subclasses should be updated to use {{#crossLink \"Utility Methods/extends\"}}{{/crossLink}}.\n   * @method initialize\n   * @deprecated in favour of `createjs.promote()`\n   **/\n  p.initialize = Container; // TODO: deprecated.\n\n  /**\n   * Returns true or false indicating whether the display object would be visible if drawn to a canvas.\n   * This does not account for whether it would be visible within the boundaries of the stage.\n   *\n   * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n   * @method isVisible\n   * @return {Boolean} Boolean indicating whether the display object would be visible if drawn to a canvas\n   **/\n  p.isVisible = function () {\n    var hasContent = this.cacheCanvas || this.children.length;\n    return !!(this.visible && this.alpha > 0 && this.scaleX != 0 && this.scaleY != 0 && hasContent);\n  };\n\n  /**\n   * Draws the display object into the specified context ignoring its visible, alpha, shadow, and transform.\n   * Returns true if the draw was handled (useful for overriding functionality).\n   *\n   * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n   * @method draw\n   * @param {CanvasRenderingContext2D} ctx The canvas 2D context object to draw into.\n   * @param {Boolean} [ignoreCache=false] Indicates whether the draw operation should ignore any current cache.\n   * For example, used for drawing the cache (to prevent it from simply drawing an existing cache back\n   * into itself).\n   **/\n  p.draw = function (ctx, ignoreCache) {\n    if (this.DisplayObject_draw(ctx, ignoreCache)) {\n      return true;\n    }\n\n    // this ensures we don't have issues with display list changes that occur during a draw:\n    var list = this.children.slice();\n    for (var i = 0, l = list.length; i < l; i++) {\n      var child = list[i];\n      if (!child.isVisible()) {\n        continue;\n      }\n\n      // draw the child:\n      ctx.save();\n      child.updateContext(ctx);\n      child.draw(ctx);\n      ctx.restore();\n    }\n    return true;\n  };\n\n  /**\n   * Adds a child to the top of the display list.\n   *\n   * <h4>Example</h4>\n   *\n   * \t\tcontainer.addChild(bitmapInstance);\n   *\n   * You can also add multiple children at once:\n   *\n   * \t\tcontainer.addChild(bitmapInstance, shapeInstance, textInstance);\n   *\n   * @method addChild\n   * @param {DisplayObject} child The display object to add.\n   * @return {DisplayObject} The child that was added, or the last child if multiple children were added.\n   **/\n  p.addChild = function (child) {\n    if (child == null) {\n      return child;\n    }\n    var l = arguments.length;\n    if (l > 1) {\n      for (var i = 0; i < l; i++) {\n        this.addChild(arguments[i]);\n      }\n      return arguments[l - 1];\n    }\n    if (child.parent) {\n      child.parent.removeChild(child);\n    }\n    child.parent = this;\n    this.children.push(child);\n    child.dispatchEvent(\"added\");\n    return child;\n  };\n\n  /**\n   * Adds a child to the display list at the specified index, bumping children at equal or greater indexes up one, and\n   * setting its parent to this Container.\n   *\n   * <h4>Example</h4>\n   *\n   *      addChildAt(child1, index);\n   *\n   * You can also add multiple children, such as:\n   *\n   *      addChildAt(child1, child2, ..., index);\n   *\n   * The index must be between 0 and numChildren. For example, to add myShape under otherShape in the display list,\n   * you could use:\n   *\n   *      container.addChildAt(myShape, container.getChildIndex(otherShape));\n   *\n   * This would also bump otherShape's index up by one. Fails silently if the index is out of range.\n   *\n   * @method addChildAt\n   * @param {DisplayObject} child The display object to add.\n   * @param {Number} index The index to add the child at.\n   * @return {DisplayObject} Returns the last child that was added, or the last child if multiple children were added.\n   **/\n  p.addChildAt = function (child, index) {\n    var l = arguments.length;\n    var indx = arguments[l - 1]; // can't use the same name as the index param or it replaces arguments[1]\n    if (indx < 0 || indx > this.children.length) {\n      return arguments[l - 2];\n    }\n    if (l > 2) {\n      for (var i = 0; i < l - 1; i++) {\n        this.addChildAt(arguments[i], indx + i);\n      }\n      return arguments[l - 2];\n    }\n    if (child.parent) {\n      child.parent.removeChild(child);\n    }\n    child.parent = this;\n    this.children.splice(index, 0, child);\n    child.dispatchEvent(\"added\");\n    return child;\n  };\n\n  /**\n   * Removes the specified child from the display list. Note that it is faster to use removeChildAt() if the index is\n   * already known.\n   *\n   * <h4>Example</h4>\n   *\n   *      container.removeChild(child);\n   *\n   * You can also remove multiple children:\n   *\n   *      removeChild(child1, child2, ...);\n   *\n   * Returns true if the child (or children) was removed, or false if it was not in the display list.\n   * @method removeChild\n   * @param {DisplayObject} child The child to remove.\n   * @return {Boolean} true if the child (or children) was removed, or false if it was not in the display list.\n   **/\n  p.removeChild = function (child) {\n    var l = arguments.length;\n    if (l > 1) {\n      var good = true;\n      for (var i = 0; i < l; i++) {\n        good = good && this.removeChild(arguments[i]);\n      }\n      return good;\n    }\n    return this.removeChildAt(createjs.indexOf(this.children, child));\n  };\n\n  /**\n   * Removes the child at the specified index from the display list, and sets its parent to null.\n   *\n   * <h4>Example</h4>\n   *\n   *      container.removeChildAt(2);\n   *\n   * You can also remove multiple children:\n   *\n   *      container.removeChild(2, 7, ...)\n   *\n   * Returns true if the child (or children) was removed, or false if any index was out of range.\n   * @method removeChildAt\n   * @param {Number} index The index of the child to remove.\n   * @return {Boolean} true if the child (or children) was removed, or false if any index was out of range.\n   **/\n  p.removeChildAt = function (index) {\n    var l = arguments.length;\n    if (l > 1) {\n      var a = [];\n      for (var i = 0; i < l; i++) {\n        a[i] = arguments[i];\n      }\n      a.sort(function (a, b) {\n        return b - a;\n      });\n      var good = true;\n      for (var i = 0; i < l; i++) {\n        good = good && this.removeChildAt(a[i]);\n      }\n      return good;\n    }\n    if (index < 0 || index > this.children.length - 1) {\n      return false;\n    }\n    var child = this.children[index];\n    if (child) {\n      child.parent = null;\n    }\n    this.children.splice(index, 1);\n    child.dispatchEvent(\"removed\");\n    return true;\n  };\n\n  /**\n   * Removes all children from the display list.\n   *\n   * <h4>Example</h4>\n   *\n   * \tcontainer.removeAllChildren();\n   *\n   * @method removeAllChildren\n   **/\n  p.removeAllChildren = function () {\n    var kids = this.children;\n    while (kids.length) {\n      this.removeChildAt(0);\n    }\n  };\n\n  /**\n   * Returns the child at the specified index.\n   *\n   * <h4>Example</h4>\n   *\n   *      container.getChildAt(2);\n   *\n   * @method getChildAt\n   * @param {Number} index The index of the child to return.\n   * @return {DisplayObject} The child at the specified index. Returns null if there is no child at the index.\n   **/\n  p.getChildAt = function (index) {\n    return this.children[index];\n  };\n\n  /**\n   * Returns the child with the specified name.\n   * @method getChildByName\n   * @param {String} name The name of the child to return.\n   * @return {DisplayObject} The child with the specified name.\n   **/\n  p.getChildByName = function (name) {\n    var kids = this.children;\n    for (var i = 0, l = kids.length; i < l; i++) {\n      if (kids[i].name == name) {\n        return kids[i];\n      }\n    }\n    return null;\n  };\n\n  /**\n   * Performs an array sort operation on the child list.\n   *\n   * <h4>Example: Display children with a higher y in front.</h4>\n   * \n   *      var sortFunction = function(obj1, obj2, options) {\n   *          if (obj1.y > obj2.y) { return 1; }\n   *          if (obj1.y < obj2.y) { return -1; }\n   *          return 0;\n   *      }\n   *      container.sortChildren(sortFunction);\n   *\n   * @method sortChildren\n   * @param {Function} sortFunction the function to use to sort the child list. See JavaScript's <code>Array.sort</code>\n   * documentation for details.\n   **/\n  p.sortChildren = function (sortFunction) {\n    this.children.sort(sortFunction);\n  };\n\n  /**\n   * Returns the index of the specified child in the display list, or -1 if it is not in the display list.\n   *\n   * <h4>Example</h4>\n   *\n   *      var index = container.getChildIndex(child);\n   *\n   * @method getChildIndex\n   * @param {DisplayObject} child The child to return the index of.\n   * @return {Number} The index of the specified child. -1 if the child is not found.\n   **/\n  p.getChildIndex = function (child) {\n    return createjs.indexOf(this.children, child);\n  };\n\n  /**\n   * Swaps the children at the specified indexes. Fails silently if either index is out of range.\n   * @method swapChildrenAt\n   * @param {Number} index1\n   * @param {Number} index2\n   **/\n  p.swapChildrenAt = function (index1, index2) {\n    var kids = this.children;\n    var o1 = kids[index1];\n    var o2 = kids[index2];\n    if (!o1 || !o2) {\n      return;\n    }\n    kids[index1] = o2;\n    kids[index2] = o1;\n  };\n\n  /**\n   * Swaps the specified children's depth in the display list. Fails silently if either child is not a child of this\n   * Container.\n   * @method swapChildren\n   * @param {DisplayObject} child1\n   * @param {DisplayObject} child2\n   **/\n  p.swapChildren = function (child1, child2) {\n    var kids = this.children;\n    var index1, index2;\n    for (var i = 0, l = kids.length; i < l; i++) {\n      if (kids[i] == child1) {\n        index1 = i;\n      }\n      if (kids[i] == child2) {\n        index2 = i;\n      }\n      if (index1 != null && index2 != null) {\n        break;\n      }\n    }\n    if (i == l) {\n      return;\n    } // TODO: throw error?\n    kids[index1] = child2;\n    kids[index2] = child1;\n  };\n\n  /**\n   * Changes the depth of the specified child. Fails silently if the child is not a child of this container, or the index is out of range.\n   * @param {DisplayObject} child\n   * @param {Number} index  \n   * @method setChildIndex\n   **/\n  p.setChildIndex = function (child, index) {\n    var kids = this.children,\n      l = kids.length;\n    if (child.parent != this || index < 0 || index >= l) {\n      return;\n    }\n    for (var i = 0; i < l; i++) {\n      if (kids[i] == child) {\n        break;\n      }\n    }\n    if (i == l || i == index) {\n      return;\n    }\n    kids.splice(i, 1);\n    kids.splice(index, 0, child);\n  };\n\n  /**\n   * Returns true if the specified display object either is this container or is a descendent (child, grandchild, etc)\n   * of this container.\n   * @method contains\n   * @param {DisplayObject} child The DisplayObject to be checked.\n   * @return {Boolean} true if the specified display object either is this container or is a descendent.\n   **/\n  p.contains = function (child) {\n    while (child) {\n      if (child == this) {\n        return true;\n      }\n      child = child.parent;\n    }\n    return false;\n  };\n\n  /**\n   * Tests whether the display object intersects the specified local point (ie. draws a pixel with alpha > 0 at the\n   * specified position). This ignores the alpha, shadow and compositeOperation of the display object, and all\n   * transform properties including regX/Y.\n   * @method hitTest\n   * @param {Number} x The x position to check in the display object's local coordinates.\n   * @param {Number} y The y position to check in the display object's local coordinates.\n   * @return {Boolean} A Boolean indicating whether there is a visible section of a DisplayObject that overlaps the specified\n   * coordinates.\n   **/\n  p.hitTest = function (x, y) {\n    // TODO: optimize to use the fast cache check where possible.\n    return this.getObjectUnderPoint(x, y) != null;\n  };\n\n  /**\n   * Returns an array of all display objects under the specified coordinates that are in this container's display\n   * list. This routine ignores any display objects with {{#crossLink \"DisplayObject/mouseEnabled:property\"}}{{/crossLink}}\n   * set to `false`. The array will be sorted in order of visual depth, with the top-most display object at index 0.\n   * This uses shape based hit detection, and can be an expensive operation to run, so it is best to use it carefully.\n   * For example, if testing for objects under the mouse, test on tick (instead of on {{#crossLink \"DisplayObject/mousemove:event\"}}{{/crossLink}}),\n   * and only if the mouse's position has changed.\n   * \n   * <ul>\n   *     <li>By default (mode=0) this method evaluates all display objects.</li>\n   *     <li>By setting the `mode` parameter to `1`, the {{#crossLink \"DisplayObject/mouseEnabled:property\"}}{{/crossLink}}\n   * \t\tand {{#crossLink \"mouseChildren:property\"}}{{/crossLink}} properties will be respected.</li>\n   * \t   <li>Setting the `mode` to `2` additionally excludes display objects that do not have active mouse event\n   * \t   \tlisteners or a {{#crossLink \"DisplayObject:cursor:property\"}}{{/crossLink}} property. That is, only objects\n   * \t   \tthat would normally intercept mouse interaction will be included. This can significantly improve performance\n   * \t   \tin some cases by reducing the number of display objects that need to be tested.</li>\n   * </li>\n   * \n   * This method accounts for both {{#crossLink \"DisplayObject/hitArea:property\"}}{{/crossLink}} and {{#crossLink \"DisplayObject/mask:property\"}}{{/crossLink}}.\n   * @method getObjectsUnderPoint\n   * @param {Number} x The x position in the container to test.\n   * @param {Number} y The y position in the container to test.\n   * @param {Number} [mode=0] The mode to use to determine which display objects to include. 0-all, 1-respect mouseEnabled/mouseChildren, 2-only mouse opaque objects.\n   * @return {Array} An Array of DisplayObjects under the specified coordinates.\n   **/\n  p.getObjectsUnderPoint = function (x, y, mode) {\n    var arr = [];\n    var pt = this.localToGlobal(x, y);\n    this._getObjectsUnderPoint(pt.x, pt.y, arr, mode > 0, mode == 1);\n    return arr;\n  };\n\n  /**\n   * Similar to {{#crossLink \"Container/getObjectsUnderPoint\"}}{{/crossLink}}, but returns only the top-most display\n   * object. This runs significantly faster than <code>getObjectsUnderPoint()</code>, but is still potentially an expensive\n   * operation. See {{#crossLink \"Container/getObjectsUnderPoint\"}}{{/crossLink}} for more information.\n   * @method getObjectUnderPoint\n   * @param {Number} x The x position in the container to test.\n   * @param {Number} y The y position in the container to test.\n   * @param {Number} mode The mode to use to determine which display objects to include.  0-all, 1-respect mouseEnabled/mouseChildren, 2-only mouse opaque objects.\n   * @return {DisplayObject} The top-most display object under the specified coordinates.\n   **/\n  p.getObjectUnderPoint = function (x, y, mode) {\n    var pt = this.localToGlobal(x, y);\n    return this._getObjectsUnderPoint(pt.x, pt.y, null, mode > 0, mode == 1);\n  };\n\n  /**\n   * Docced in superclass.\n   */\n  p.getBounds = function () {\n    return this._getBounds(null, true);\n  };\n\n  /**\n   * Docced in superclass.\n   */\n  p.getTransformedBounds = function () {\n    return this._getBounds();\n  };\n\n  /**\n   * Returns a clone of this Container. Some properties that are specific to this instance's current context are\n   * reverted to their defaults (for example .parent).\n   * @method clone\n   * @param {Boolean} [recursive=false] If true, all of the descendants of this container will be cloned recursively. If false, the\n   * properties of the container will be cloned, but the new instance will not have any children.\n   * @return {Container} A clone of the current Container instance.\n   **/\n  p.clone = function (recursive) {\n    var o = this._cloneProps(new Container());\n    if (recursive) {\n      this._cloneChildren(o);\n    }\n    return o;\n  };\n\n  /**\n   * Returns a string representation of this object.\n   * @method toString\n   * @return {String} a string representation of the instance.\n   **/\n  p.toString = function () {\n    return \"[Container (name=\" + this.name + \")]\";\n  };\n\n  // private methods:\n  /**\n   * @method _tick\n   * @param {Object} evtObj An event object that will be dispatched to all tick listeners. This object is reused between dispatchers to reduce construction & GC costs.\n   * @protected\n   **/\n  p._tick = function (evtObj) {\n    if (this.tickChildren) {\n      for (var i = this.children.length - 1; i >= 0; i--) {\n        var child = this.children[i];\n        if (child.tickEnabled && child._tick) {\n          child._tick(evtObj);\n        }\n      }\n    }\n    this.DisplayObject__tick(evtObj);\n  };\n\n  /**\n   * Recursively clones all children of this container, and adds them to the target container.\n   * @method cloneChildren\n   * @protected\n   * @param {Container} o The target container.\n   **/\n  p._cloneChildren = function (o) {\n    if (o.children.length) {\n      o.removeAllChildren();\n    }\n    var arr = o.children;\n    for (var i = 0, l = this.children.length; i < l; i++) {\n      var clone = this.children[i].clone(true);\n      clone.parent = o;\n      arr.push(clone);\n    }\n  };\n\n  /**\n   * @method _getObjectsUnderPoint\n   * @param {Number} x\n   * @param {Number} y\n   * @param {Array} arr\n   * @param {Boolean} mouse If true, it will respect mouse interaction properties like mouseEnabled, mouseChildren, and active listeners.\n   * @param {Boolean} activeListener If true, there is an active mouse event listener on a parent object.\n   * @param {Number} currentDepth Indicates the current depth of the search.\n   * @return {DisplayObject}\n   * @protected\n   **/\n  p._getObjectsUnderPoint = function (x, y, arr, mouse, activeListener, currentDepth) {\n    currentDepth = currentDepth || 0;\n    if (!currentDepth && !this._testMask(this, x, y)) {\n      return null;\n    }\n    var mtx,\n      ctx = createjs.DisplayObject._hitTestContext;\n    activeListener = activeListener || mouse && this._hasMouseEventListener();\n\n    // draw children one at a time, and check if we get a hit:\n    var children = this.children,\n      l = children.length;\n    for (var i = l - 1; i >= 0; i--) {\n      var child = children[i];\n      var hitArea = child.hitArea;\n      if (!child.visible || !hitArea && !child.isVisible() || mouse && !child.mouseEnabled) {\n        continue;\n      }\n      if (!hitArea && !this._testMask(child, x, y)) {\n        continue;\n      }\n\n      // if a child container has a hitArea then we only need to check its hitArea, so we can treat it as a normal DO:\n      if (!hitArea && child instanceof Container) {\n        var result = child._getObjectsUnderPoint(x, y, arr, mouse, activeListener, currentDepth + 1);\n        if (!arr && result) {\n          return mouse && !this.mouseChildren ? this : result;\n        }\n      } else {\n        if (mouse && !activeListener && !child._hasMouseEventListener()) {\n          continue;\n        }\n\n        // TODO: can we pass displayProps forward, to avoid having to calculate this backwards every time? It's kind of a mixed bag. When we're only hunting for DOs with event listeners, it may not make sense.\n        var props = child.getConcatenatedDisplayProps(child._props);\n        mtx = props.matrix;\n        if (hitArea) {\n          mtx.appendMatrix(hitArea.getMatrix(hitArea._props.matrix));\n          props.alpha = hitArea.alpha;\n        }\n        ctx.globalAlpha = props.alpha;\n        ctx.setTransform(mtx.a, mtx.b, mtx.c, mtx.d, mtx.tx - x, mtx.ty - y);\n        (hitArea || child).draw(ctx);\n        if (!this._testHit(ctx)) {\n          continue;\n        }\n        ctx.setTransform(1, 0, 0, 1, 0, 0);\n        ctx.clearRect(0, 0, 2, 2);\n        if (arr) {\n          arr.push(child);\n        } else {\n          return mouse && !this.mouseChildren ? this : child;\n        }\n      }\n    }\n    return null;\n  };\n\n  /**\n   * @method _testMask\n   * @param {DisplayObject} target\n   * @param {Number} x\n   * @param {Number} y\n   * @return {Boolean} Indicates whether the x/y is within the masked region.\n   * @protected\n   **/\n  p._testMask = function (target, x, y) {\n    var mask = target.mask;\n    if (!mask || !mask.graphics || mask.graphics.isEmpty()) {\n      return true;\n    }\n    var mtx = this._props.matrix,\n      parent = target.parent;\n    mtx = parent ? parent.getConcatenatedMatrix(mtx) : mtx.identity();\n    mtx = mask.getMatrix(mask._props.matrix).prependMatrix(mtx);\n    var ctx = createjs.DisplayObject._hitTestContext;\n    ctx.setTransform(mtx.a, mtx.b, mtx.c, mtx.d, mtx.tx - x, mtx.ty - y);\n\n    // draw the mask as a solid fill:\n    mask.graphics.drawAsPath(ctx);\n    ctx.fillStyle = \"#000\";\n    ctx.fill();\n    if (!this._testHit(ctx)) {\n      return false;\n    }\n    ctx.setTransform(1, 0, 0, 1, 0, 0);\n    ctx.clearRect(0, 0, 2, 2);\n    return true;\n  };\n\n  /**\n   * @method _getBounds\n   * @param {Matrix2D} matrix\n   * @param {Boolean} ignoreTransform If true, does not apply this object's transform.\n   * @return {Rectangle}\n   * @protected\n   **/\n  p._getBounds = function (matrix, ignoreTransform) {\n    var bounds = this.DisplayObject_getBounds();\n    if (bounds) {\n      return this._transformBounds(bounds, matrix, ignoreTransform);\n    }\n    var mtx = this._props.matrix;\n    mtx = ignoreTransform ? mtx.identity() : this.getMatrix(mtx);\n    if (matrix) {\n      mtx.prependMatrix(matrix);\n    }\n    var l = this.children.length,\n      rect = null;\n    for (var i = 0; i < l; i++) {\n      var child = this.children[i];\n      if (!child.visible || !(bounds = child._getBounds(mtx))) {\n        continue;\n      }\n      if (rect) {\n        rect.extend(bounds.x, bounds.y, bounds.width, bounds.height);\n      } else {\n        rect = bounds.clone();\n      }\n    }\n    return rect;\n  };\n  createjs.Container = createjs.promote(Container, \"DisplayObject\");\n})();\n\n//##############################################################################\n// Stage.js\n//##############################################################################\n\n(function () {\n  \"use strict\";\n\n  // constructor:\n  /**\n   * A stage is the root level {{#crossLink \"Container\"}}{{/crossLink}} for a display list. Each time its {{#crossLink \"Stage/tick\"}}{{/crossLink}}\n   * method is called, it will render its display list to its target canvas.\n   *\n   * <h4>Example</h4>\n   * This example creates a stage, adds a child to it, then uses {{#crossLink \"Ticker\"}}{{/crossLink}} to update the child\n   * and redraw the stage using {{#crossLink \"Stage/update\"}}{{/crossLink}}.\n   *\n   *      var stage = new createjs.Stage(\"canvasElementId\");\n   *      var image = new createjs.Bitmap(\"imagePath.png\");\n   *      stage.addChild(image);\n   *      createjs.Ticker.addEventListener(\"tick\", handleTick);\n   *      function handleTick(event) {\n   *          image.x += 10;\n   *          stage.update();\n   *      }\n   *\n   * @class Stage\n   * @extends Container\n   * @constructor\n   * @param {HTMLCanvasElement | String | Object} canvas A canvas object that the Stage will render to, or the string id\n   * of a canvas object in the current document.\n   **/\n  function Stage(canvas) {\n    this.Container_constructor();\n\n    // public properties:\n    /**\n     * Indicates whether the stage should automatically clear the canvas before each render. You can set this to <code>false</code>\n     * to manually control clearing (for generative art, or when pointing multiple stages at the same canvas for\n     * example).\n     *\n     * <h4>Example</h4>\n     *\n     *      var stage = new createjs.Stage(\"canvasId\");\n     *      stage.autoClear = false;\n     *\n     * @property autoClear\n     * @type Boolean\n     * @default true\n     **/\n    this.autoClear = true;\n\n    /**\n     * The canvas the stage will render to. Multiple stages can share a single canvas, but you must disable autoClear for all but the\n     * first stage that will be ticked (or they will clear each other's render).\n     *\n     * When changing the canvas property you must disable the events on the old canvas, and enable events on the\n     * new canvas or mouse events will not work as expected. For example:\n     *\n     *      myStage.enableDOMEvents(false);\n     *      myStage.canvas = anotherCanvas;\n     *      myStage.enableDOMEvents(true);\n     *\n     * @property canvas\n     * @type HTMLCanvasElement | Object\n     **/\n    this.canvas = typeof canvas == \"string\" ? document.getElementById(canvas) : canvas;\n\n    /**\n     * The current mouse X position on the canvas. If the mouse leaves the canvas, this will indicate the most recent\n     * position over the canvas, and mouseInBounds will be set to false.\n     * @property mouseX\n     * @type Number\n     * @readonly\n     **/\n    this.mouseX = 0;\n\n    /**\n     * The current mouse Y position on the canvas. If the mouse leaves the canvas, this will indicate the most recent\n     * position over the canvas, and mouseInBounds will be set to false.\n     * @property mouseY\n     * @type Number\n     * @readonly\n     **/\n    this.mouseY = 0;\n\n    /**\n     * Specifies the area of the stage to affect when calling update. This can be use to selectively\n     * re-draw specific regions of the canvas. If null, the whole canvas area is drawn.\n     * @property drawRect\n     * @type {Rectangle}\n     */\n    this.drawRect = null;\n\n    /**\n     * Indicates whether display objects should be rendered on whole pixels. You can set the\n     * {{#crossLink \"DisplayObject/snapToPixel\"}}{{/crossLink}} property of\n     * display objects to false to enable/disable this behaviour on a per instance basis.\n     * @property snapToPixelEnabled\n     * @type Boolean\n     * @default false\n     **/\n    this.snapToPixelEnabled = false;\n\n    /**\n     * Indicates whether the mouse is currently within the bounds of the canvas.\n     * @property mouseInBounds\n     * @type Boolean\n     * @default false\n     **/\n    this.mouseInBounds = false;\n\n    /**\n     * If true, tick callbacks will be called on all display objects on the stage prior to rendering to the canvas.\n     * @property tickOnUpdate\n     * @type Boolean\n     * @default true\n     **/\n    this.tickOnUpdate = true;\n\n    /**\n     * If true, mouse move events will continue to be called when the mouse leaves the target canvas. See\n     * {{#crossLink \"Stage/mouseInBounds:property\"}}{{/crossLink}}, and {{#crossLink \"MouseEvent\"}}{{/crossLink}}\n     * x/y/rawX/rawY.\n     * @property mouseMoveOutside\n     * @type Boolean\n     * @default false\n     **/\n    this.mouseMoveOutside = false;\n\n    /**\n     * Prevents selection of other elements in the html page if the user clicks and drags, or double clicks on the canvas.\n     * This works by calling `preventDefault()` on any mousedown events (or touch equivalent) originating on the canvas.\n     * @property preventSelection\n     * @type Boolean\n     * @default true\n     **/\n    this.preventSelection = true;\n\n    /**\n     * The hitArea property is not supported for Stage.\n     * @property hitArea\n     * @type {DisplayObject}\n     * @default null\n     */\n\n    // private properties:\n    /**\n     * Holds objects with data for each active pointer id. Each object has the following properties:\n     * x, y, event, target, overTarget, overX, overY, inBounds, posEvtObj (native event that last updated position)\n     * @property _pointerData\n     * @type {Object}\n     * @private\n     */\n    this._pointerData = {};\n\n    /**\n     * Number of active pointers.\n     * @property _pointerCount\n     * @type {Object}\n     * @private\n     */\n    this._pointerCount = 0;\n\n    /**\n     * The ID of the primary pointer.\n     * @property _primaryPointerID\n     * @type {Object}\n     * @private\n     */\n    this._primaryPointerID = null;\n\n    /**\n     * @property _mouseOverIntervalID\n     * @protected\n     * @type Number\n     **/\n    this._mouseOverIntervalID = null;\n\n    /**\n     * @property _nextStage\n     * @protected\n     * @type Stage\n     **/\n    this._nextStage = null;\n\n    /**\n     * @property _prevStage\n     * @protected\n     * @type Stage\n     **/\n    this._prevStage = null;\n\n    // initialize:\n    this.enableDOMEvents(true);\n  }\n  var p = createjs.extend(Stage, createjs.Container);\n\n  /**\n   * <strong>REMOVED</strong>. Removed in favor of using `MySuperClass_constructor`.\n   * See {{#crossLink \"Utility Methods/extend\"}}{{/crossLink}} and {{#crossLink \"Utility Methods/promote\"}}{{/crossLink}}\n   * for details.\n   *\n   * There is an inheritance tutorial distributed with EaselJS in /tutorials/Inheritance.\n   *\n   * @method initialize\n   * @protected\n   * @deprecated\n   */\n  // p.initialize = function() {}; // searchable for devs wondering where it is.\n\n  // events:\n  /**\n   * Dispatched when the user moves the mouse over the canvas.\n   * See the {{#crossLink \"MouseEvent\"}}{{/crossLink}} class for a listing of event properties.\n   * @event stagemousemove\n   * @since 0.6.0\n   */\n\n  /**\n   * Dispatched when the user presses their left mouse button on the canvas. See the {{#crossLink \"MouseEvent\"}}{{/crossLink}}\n   * class for a listing of event properties.\n   * @event stagemousedown\n   * @since 0.6.0\n   */\n\n  /**\n   * Dispatched when the user the user presses somewhere on the stage, then releases the mouse button anywhere that the page can detect it (this varies slightly between browsers).\n   * You can use {{#crossLink \"Stage/mouseInBounds:property\"}}{{/crossLink}} to check whether the mouse is currently within the stage bounds.\n   * See the {{#crossLink \"MouseEvent\"}}{{/crossLink}} class for a listing of event properties.\n   * @event stagemouseup\n   * @since 0.6.0\n   */\n\n  /**\n   * Dispatched when the mouse moves from within the canvas area (mouseInBounds == true) to outside it (mouseInBounds == false).\n   * This is currently only dispatched for mouse input (not touch). See the {{#crossLink \"MouseEvent\"}}{{/crossLink}}\n   * class for a listing of event properties.\n   * @event mouseleave\n   * @since 0.7.0\n   */\n\n  /**\n   * Dispatched when the mouse moves into the canvas area (mouseInBounds == false) from outside it (mouseInBounds == true).\n   * This is currently only dispatched for mouse input (not touch). See the {{#crossLink \"MouseEvent\"}}{{/crossLink}}\n   * class for a listing of event properties.\n   * @event mouseenter\n   * @since 0.7.0\n   */\n\n  /**\n   * Dispatched each update immediately before the tick event is propagated through the display list.\n   * You can call preventDefault on the event object to cancel propagating the tick event.\n   * @event tickstart\n   * @since 0.7.0\n   */\n\n  /**\n   * Dispatched each update immediately after the tick event is propagated through the display list. Does not fire if\n   * tickOnUpdate is false. Precedes the \"drawstart\" event.\n   * @event tickend\n   * @since 0.7.0\n   */\n\n  /**\n   * Dispatched each update immediately before the canvas is cleared and the display list is drawn to it.\n   * You can call preventDefault on the event object to cancel the draw.\n   * @event drawstart\n   * @since 0.7.0\n   */\n\n  /**\n   * Dispatched each update immediately after the display list is drawn to the canvas and the canvas context is restored.\n   * @event drawend\n   * @since 0.7.0\n   */\n\n  // getter / setters:\n  /**\n   * Specifies a target stage that will have mouse / touch interactions relayed to it after this stage handles them.\n   * This can be useful in cases where you have multiple layered canvases and want user interactions\n   * events to pass through. For example, this would relay mouse events from topStage to bottomStage:\n   *\n   *      topStage.nextStage = bottomStage;\n   *\n   * To disable relaying, set nextStage to null.\n   * \n   * MouseOver, MouseOut, RollOver, and RollOut interactions are also passed through using the mouse over settings\n   * of the top-most stage, but are only processed if the target stage has mouse over interactions enabled.\n   * Considerations when using roll over in relay targets:<OL>\n   * <LI> The top-most (first) stage must have mouse over interactions enabled (via enableMouseOver)</LI>\n   * <LI> All stages that wish to participate in mouse over interaction must enable them via enableMouseOver</LI>\n   * <LI> All relay targets will share the frequency value of the top-most stage</LI>\n   * </OL>\n   * To illustrate, in this example the targetStage would process mouse over interactions at 10hz (despite passing\n   * 30 as it's desired frequency):\n   * \ttopStage.nextStage = targetStage;\n   * \ttopStage.enableMouseOver(10);\n   * \ttargetStage.enableMouseOver(30);\n   * \n   * If the target stage's canvas is completely covered by this stage's canvas, you may also want to disable its\n   * DOM events using:\n   * \n   *\ttargetStage.enableDOMEvents(false);\n   * \n   * @property nextStage\n   * @type {Stage}\n   **/\n  p._get_nextStage = function () {\n    return this._nextStage;\n  };\n  p._set_nextStage = function (value) {\n    if (this._nextStage) {\n      this._nextStage._prevStage = null;\n    }\n    if (value) {\n      value._prevStage = this;\n    }\n    this._nextStage = value;\n  };\n  try {\n    Object.defineProperties(p, {\n      nextStage: {\n        get: p._get_nextStage,\n        set: p._set_nextStage\n      }\n    });\n  } catch (e) {} // TODO: use Log\n\n  // public methods:\n  /**\n   * Each time the update method is called, the stage will call {{#crossLink \"Stage/tick\"}}{{/crossLink}}\n   * unless {{#crossLink \"Stage/tickOnUpdate:property\"}}{{/crossLink}} is set to false,\n   * and then render the display list to the canvas.\n   *\n   * @method update\n   * @param {Object} [props] Props object to pass to `tick()`. Should usually be a {{#crossLink \"Ticker\"}}{{/crossLink}} event object, or similar object with a delta property.\n   **/\n  p.update = function (props) {\n    if (!this.canvas) {\n      return;\n    }\n    if (this.tickOnUpdate) {\n      this.tick(props);\n    }\n    if (this.dispatchEvent(\"drawstart\", false, true) === false) {\n      return;\n    }\n    createjs.DisplayObject._snapToPixelEnabled = this.snapToPixelEnabled;\n    var r = this.drawRect,\n      ctx = this.canvas.getContext(\"2d\");\n    ctx.setTransform(1, 0, 0, 1, 0, 0);\n    if (this.autoClear) {\n      if (r) {\n        ctx.clearRect(r.x, r.y, r.width, r.height);\n      } else {\n        ctx.clearRect(0, 0, this.canvas.width + 1, this.canvas.height + 1);\n      }\n    }\n    ctx.save();\n    if (this.drawRect) {\n      ctx.beginPath();\n      ctx.rect(r.x, r.y, r.width, r.height);\n      ctx.clip();\n    }\n    this.updateContext(ctx);\n    this.draw(ctx, false);\n    ctx.restore();\n    this.dispatchEvent(\"drawend\");\n  };\n\n  /**\n   * Propagates a tick event through the display list. This is automatically called by {{#crossLink \"Stage/update\"}}{{/crossLink}}\n   * unless {{#crossLink \"Stage/tickOnUpdate:property\"}}{{/crossLink}} is set to false.\n   *\n   * If a props object is passed to `tick()`, then all of its properties will be copied to the event object that is\n   * propagated to listeners.\n   *\n   * Some time-based features in EaselJS (for example {{#crossLink \"Sprite/framerate\"}}{{/crossLink}} require that\n   * a {{#crossLink \"Ticker/tick:event\"}}{{/crossLink}} event object (or equivalent object with a delta property) be\n   * passed as the `props` parameter to `tick()`. For example:\n   *\n   * \tTicker.on(\"tick\", handleTick);\n   * \tfunction handleTick(evtObj) {\n   * \t\t// clone the event object from Ticker, and add some custom data to it:\n   * \t\tvar evt = evtObj.clone().set({greeting:\"hello\", name:\"world\"});\n   * \t\t\n   * \t\t// pass it to stage.update():\n   * \t\tmyStage.update(evt); // subsequently calls tick() with the same param\n   * \t}\n   * \t\n   * \t// ...\n   * \tmyDisplayObject.on(\"tick\", handleDisplayObjectTick);\n   * \tfunction handleDisplayObjectTick(evt) {\n   * \t\tconsole.log(evt.delta); // the delta property from the Ticker tick event object\n   * \t\tconsole.log(evt.greeting, evt.name); // custom data: \"hello world\"\n   * \t}\n   * \n   * @method tick\n   * @param {Object} [props] An object with properties that should be copied to the event object. Should usually be a Ticker event object, or similar object with a delta property.\n   **/\n  p.tick = function (props) {\n    if (!this.tickEnabled || this.dispatchEvent(\"tickstart\", false, true) === false) {\n      return;\n    }\n    var evtObj = new createjs.Event(\"tick\");\n    if (props) {\n      for (var n in props) {\n        if (props.hasOwnProperty(n)) {\n          evtObj[n] = props[n];\n        }\n      }\n    }\n    this._tick(evtObj);\n    this.dispatchEvent(\"tickend\");\n  };\n\n  /**\n   * Default event handler that calls the Stage {{#crossLink \"Stage/update\"}}{{/crossLink}} method when a {{#crossLink \"DisplayObject/tick:event\"}}{{/crossLink}}\n   * event is received. This allows you to register a Stage instance as a event listener on {{#crossLink \"Ticker\"}}{{/crossLink}}\n   * directly, using:\n   *\n   *      Ticker.addEventListener(\"tick\", myStage\");\n   *\n   * Note that if you subscribe to ticks using this pattern, then the tick event object will be passed through to\n   * display object tick handlers, instead of <code>delta</code> and <code>paused</code> parameters.\n   * @property handleEvent\n   * @type Function\n   **/\n  p.handleEvent = function (evt) {\n    if (evt.type == \"tick\") {\n      this.update(evt);\n    }\n  };\n\n  /**\n   * Clears the target canvas. Useful if {{#crossLink \"Stage/autoClear:property\"}}{{/crossLink}} is set to `false`.\n   * @method clear\n   **/\n  p.clear = function () {\n    if (!this.canvas) {\n      return;\n    }\n    var ctx = this.canvas.getContext(\"2d\");\n    ctx.setTransform(1, 0, 0, 1, 0, 0);\n    ctx.clearRect(0, 0, this.canvas.width + 1, this.canvas.height + 1);\n  };\n\n  /**\n   * Returns a data url that contains a Base64-encoded image of the contents of the stage. The returned data url can\n   * be specified as the src value of an image element.\n   * @method toDataURL\n   * @param {String} [backgroundColor] The background color to be used for the generated image. Any valid CSS color\n   * value is allowed. The default value is a transparent background.\n   * @param {String} [mimeType=\"image/png\"] The MIME type of the image format to be create. The default is \"image/png\". If an unknown MIME type\n   * is passed in, or if the browser does not support the specified MIME type, the default value will be used.\n   * @return {String} a Base64 encoded image.\n   **/\n  p.toDataURL = function (backgroundColor, mimeType) {\n    var data,\n      ctx = this.canvas.getContext('2d'),\n      w = this.canvas.width,\n      h = this.canvas.height;\n    if (backgroundColor) {\n      data = ctx.getImageData(0, 0, w, h);\n      var compositeOperation = ctx.globalCompositeOperation;\n      ctx.globalCompositeOperation = \"destination-over\";\n      ctx.fillStyle = backgroundColor;\n      ctx.fillRect(0, 0, w, h);\n    }\n    var dataURL = this.canvas.toDataURL(mimeType || \"image/png\");\n    if (backgroundColor) {\n      ctx.putImageData(data, 0, 0);\n      ctx.globalCompositeOperation = compositeOperation;\n    }\n    return dataURL;\n  };\n\n  /**\n   * Enables or disables (by passing a frequency of 0) mouse over ({{#crossLink \"DisplayObject/mouseover:event\"}}{{/crossLink}}\n   * and {{#crossLink \"DisplayObject/mouseout:event\"}}{{/crossLink}}) and roll over events ({{#crossLink \"DisplayObject/rollover:event\"}}{{/crossLink}}\n   * and {{#crossLink \"DisplayObject/rollout:event\"}}{{/crossLink}}) for this stage's display list. These events can\n   * be expensive to generate, so they are disabled by default. The frequency of the events can be controlled\n   * independently of mouse move events via the optional `frequency` parameter.\n   *\n   * <h4>Example</h4>\n   *\n   *      var stage = new createjs.Stage(\"canvasId\");\n   *      stage.enableMouseOver(10); // 10 updates per second\n   *\n   * @method enableMouseOver\n   * @param {Number} [frequency=20] Optional param specifying the maximum number of times per second to broadcast\n   * mouse over/out events. Set to 0 to disable mouse over events completely. Maximum is 50. A lower frequency is less\n   * responsive, but uses less CPU.\n   **/\n  p.enableMouseOver = function (frequency) {\n    if (this._mouseOverIntervalID) {\n      clearInterval(this._mouseOverIntervalID);\n      this._mouseOverIntervalID = null;\n      if (frequency == 0) {\n        this._testMouseOver(true);\n      }\n    }\n    if (frequency == null) {\n      frequency = 20;\n    } else if (frequency <= 0) {\n      return;\n    }\n    var o = this;\n    this._mouseOverIntervalID = setInterval(function () {\n      o._testMouseOver();\n    }, 1000 / Math.min(50, frequency));\n  };\n\n  /**\n   * Enables or disables the event listeners that stage adds to DOM elements (window, document and canvas). It is good\n   * practice to disable events when disposing of a Stage instance, otherwise the stage will continue to receive\n   * events from the page.\n   *\n   * When changing the canvas property you must disable the events on the old canvas, and enable events on the\n   * new canvas or mouse events will not work as expected. For example:\n   *\n   *      myStage.enableDOMEvents(false);\n   *      myStage.canvas = anotherCanvas;\n   *      myStage.enableDOMEvents(true);\n   *\n   * @method enableDOMEvents\n   * @param {Boolean} [enable=true] Indicates whether to enable or disable the events. Default is true.\n   **/\n  p.enableDOMEvents = function (enable) {\n    if (enable == null) {\n      enable = true;\n    }\n    var n,\n      o,\n      ls = this._eventListeners;\n    if (!enable && ls) {\n      for (n in ls) {\n        o = ls[n];\n        o.t.removeEventListener(n, o.f, false);\n      }\n      this._eventListeners = null;\n    } else if (enable && !ls && this.canvas) {\n      var t = window.addEventListener ? window : document;\n      var _this = this;\n      ls = this._eventListeners = {};\n      ls[\"mouseup\"] = {\n        t: t,\n        f: function (e) {\n          _this._handleMouseUp(e);\n        }\n      };\n      ls[\"mousemove\"] = {\n        t: t,\n        f: function (e) {\n          _this._handleMouseMove(e);\n        }\n      };\n      ls[\"dblclick\"] = {\n        t: this.canvas,\n        f: function (e) {\n          _this._handleDoubleClick(e);\n        }\n      };\n      ls[\"mousedown\"] = {\n        t: this.canvas,\n        f: function (e) {\n          _this._handleMouseDown(e);\n        }\n      };\n      for (n in ls) {\n        o = ls[n];\n        o.t.addEventListener(n, o.f, false);\n      }\n    }\n  };\n\n  /**\n   * Stage instances cannot be cloned.\n   * @method clone\n   **/\n  p.clone = function () {\n    throw \"Stage cannot be cloned.\";\n  };\n\n  /**\n   * Returns a string representation of this object.\n   * @method toString\n   * @return {String} a string representation of the instance.\n   **/\n  p.toString = function () {\n    return \"[Stage (name=\" + this.name + \")]\";\n  };\n\n  // private methods:\n  /**\n   * @method _getElementRect\n   * @protected\n   * @param {HTMLElement} e\n   **/\n  p._getElementRect = function (e) {\n    var bounds;\n    try {\n      bounds = e.getBoundingClientRect();\n    } // this can fail on disconnected DOM elements in IE9\n    catch (err) {\n      bounds = {\n        top: e.offsetTop,\n        left: e.offsetLeft,\n        width: e.offsetWidth,\n        height: e.offsetHeight\n      };\n    }\n    var offX = (window.pageXOffset || document.scrollLeft || 0) - (document.clientLeft || document.body.clientLeft || 0);\n    var offY = (window.pageYOffset || document.scrollTop || 0) - (document.clientTop || document.body.clientTop || 0);\n    var styles = window.getComputedStyle ? getComputedStyle(e, null) : e.currentStyle; // IE <9 compatibility.\n    var padL = parseInt(styles.paddingLeft) + parseInt(styles.borderLeftWidth);\n    var padT = parseInt(styles.paddingTop) + parseInt(styles.borderTopWidth);\n    var padR = parseInt(styles.paddingRight) + parseInt(styles.borderRightWidth);\n    var padB = parseInt(styles.paddingBottom) + parseInt(styles.borderBottomWidth);\n\n    // note: in some browsers bounds properties are read only.\n    return {\n      left: bounds.left + offX + padL,\n      right: bounds.right + offX - padR,\n      top: bounds.top + offY + padT,\n      bottom: bounds.bottom + offY - padB\n    };\n  };\n\n  /**\n   * @method _getPointerData\n   * @protected\n   * @param {Number} id\n   **/\n  p._getPointerData = function (id) {\n    var data = this._pointerData[id];\n    if (!data) {\n      data = this._pointerData[id] = {\n        x: 0,\n        y: 0\n      };\n    }\n    return data;\n  };\n\n  /**\n   * @method _handleMouseMove\n   * @protected\n   * @param {MouseEvent} e\n   **/\n  p._handleMouseMove = function (e) {\n    if (!e) {\n      e = window.event;\n    }\n    this._handlePointerMove(-1, e, e.pageX, e.pageY);\n  };\n\n  /**\n   * @method _handlePointerMove\n   * @protected\n   * @param {Number} id\n   * @param {Event} e\n   * @param {Number} pageX\n   * @param {Number} pageY\n   * @param {Stage} owner Indicates that the event has already been captured & handled by the indicated stage.\n   **/\n  p._handlePointerMove = function (id, e, pageX, pageY, owner) {\n    if (this._prevStage && owner === undefined) {\n      return;\n    } // redundant listener.\n    if (!this.canvas) {\n      return;\n    }\n    var nextStage = this._nextStage,\n      o = this._getPointerData(id);\n    var inBounds = o.inBounds;\n    this._updatePointerPosition(id, e, pageX, pageY);\n    if (inBounds || o.inBounds || this.mouseMoveOutside) {\n      if (id === -1 && o.inBounds == !inBounds) {\n        this._dispatchMouseEvent(this, inBounds ? \"mouseleave\" : \"mouseenter\", false, id, o, e);\n      }\n      this._dispatchMouseEvent(this, \"stagemousemove\", false, id, o, e);\n      this._dispatchMouseEvent(o.target, \"pressmove\", true, id, o, e);\n    }\n    nextStage && nextStage._handlePointerMove(id, e, pageX, pageY, null);\n  };\n\n  /**\n   * @method _updatePointerPosition\n   * @protected\n   * @param {Number} id\n   * @param {Event} e\n   * @param {Number} pageX\n   * @param {Number} pageY\n   **/\n  p._updatePointerPosition = function (id, e, pageX, pageY) {\n    var rect = this._getElementRect(this.canvas);\n    pageX -= rect.left;\n    pageY -= rect.top;\n    var w = this.canvas.width;\n    var h = this.canvas.height;\n    pageX /= (rect.right - rect.left) / w;\n    pageY /= (rect.bottom - rect.top) / h;\n    var o = this._getPointerData(id);\n    if (o.inBounds = pageX >= 0 && pageY >= 0 && pageX <= w - 1 && pageY <= h - 1) {\n      o.x = pageX;\n      o.y = pageY;\n    } else if (this.mouseMoveOutside) {\n      o.x = pageX < 0 ? 0 : pageX > w - 1 ? w - 1 : pageX;\n      o.y = pageY < 0 ? 0 : pageY > h - 1 ? h - 1 : pageY;\n    }\n    o.posEvtObj = e;\n    o.rawX = pageX;\n    o.rawY = pageY;\n    if (id === this._primaryPointerID || id === -1) {\n      this.mouseX = o.x;\n      this.mouseY = o.y;\n      this.mouseInBounds = o.inBounds;\n    }\n  };\n\n  /**\n   * @method _handleMouseUp\n   * @protected\n   * @param {MouseEvent} e\n   **/\n  p._handleMouseUp = function (e) {\n    this._handlePointerUp(-1, e, false);\n  };\n\n  /**\n   * @method _handlePointerUp\n   * @protected\n   * @param {Number} id\n   * @param {Event} e\n   * @param {Boolean} clear\n   * @param {Stage} owner Indicates that the event has already been captured & handled by the indicated stage.\n   **/\n  p._handlePointerUp = function (id, e, clear, owner) {\n    var nextStage = this._nextStage,\n      o = this._getPointerData(id);\n    if (this._prevStage && owner === undefined) {\n      return;\n    } // redundant listener.\n\n    var target = null,\n      oTarget = o.target;\n    if (!owner && (oTarget || nextStage)) {\n      target = this._getObjectsUnderPoint(o.x, o.y, null, true);\n    }\n    if (o.down) {\n      this._dispatchMouseEvent(this, \"stagemouseup\", false, id, o, e, target);\n      o.down = false;\n    }\n    if (target == oTarget) {\n      this._dispatchMouseEvent(oTarget, \"click\", true, id, o, e);\n    }\n    this._dispatchMouseEvent(oTarget, \"pressup\", true, id, o, e);\n    if (clear) {\n      if (id == this._primaryPointerID) {\n        this._primaryPointerID = null;\n      }\n      delete this._pointerData[id];\n    } else {\n      o.target = null;\n    }\n    nextStage && nextStage._handlePointerUp(id, e, clear, owner || target && this);\n  };\n\n  /**\n   * @method _handleMouseDown\n   * @protected\n   * @param {MouseEvent} e\n   **/\n  p._handleMouseDown = function (e) {\n    this._handlePointerDown(-1, e, e.pageX, e.pageY);\n  };\n\n  /**\n   * @method _handlePointerDown\n   * @protected\n   * @param {Number} id\n   * @param {Event} e\n   * @param {Number} pageX\n   * @param {Number} pageY\n   * @param {Stage} owner Indicates that the event has already been captured & handled by the indicated stage.\n   **/\n  p._handlePointerDown = function (id, e, pageX, pageY, owner) {\n    if (this.preventSelection) {\n      e.preventDefault();\n    }\n    if (this._primaryPointerID == null || id === -1) {\n      this._primaryPointerID = id;\n    } // mouse always takes over.\n\n    if (pageY != null) {\n      this._updatePointerPosition(id, e, pageX, pageY);\n    }\n    var target = null,\n      nextStage = this._nextStage,\n      o = this._getPointerData(id);\n    if (!owner) {\n      target = o.target = this._getObjectsUnderPoint(o.x, o.y, null, true);\n    }\n    if (o.inBounds) {\n      this._dispatchMouseEvent(this, \"stagemousedown\", false, id, o, e, target);\n      o.down = true;\n    }\n    this._dispatchMouseEvent(target, \"mousedown\", true, id, o, e);\n    nextStage && nextStage._handlePointerDown(id, e, pageX, pageY, owner || target && this);\n  };\n\n  /**\n   * @method _testMouseOver\n   * @param {Boolean} clear If true, clears the mouseover / rollover (ie. no target)\n   * @param {Stage} owner Indicates that the event has already been captured & handled by the indicated stage.\n   * @param {Stage} eventTarget The stage that the cursor is actively over.\n   * @protected\n   **/\n  p._testMouseOver = function (clear, owner, eventTarget) {\n    if (this._prevStage && owner === undefined) {\n      return;\n    } // redundant listener.\n\n    var nextStage = this._nextStage;\n    if (!this._mouseOverIntervalID) {\n      // not enabled for mouseover, but should still relay the event.\n      nextStage && nextStage._testMouseOver(clear, owner, eventTarget);\n      return;\n    }\n    var o = this._getPointerData(-1);\n    // only update if the mouse position has changed. This provides a lot of optimization, but has some trade-offs.\n    if (!o || !clear && this.mouseX == this._mouseOverX && this.mouseY == this._mouseOverY && this.mouseInBounds) {\n      return;\n    }\n    var e = o.posEvtObj;\n    var isEventTarget = eventTarget || e && e.target == this.canvas;\n    var target = null,\n      common = -1,\n      cursor = \"\",\n      t,\n      i,\n      l;\n    if (!owner && (clear || this.mouseInBounds && isEventTarget)) {\n      target = this._getObjectsUnderPoint(this.mouseX, this.mouseY, null, true);\n      this._mouseOverX = this.mouseX;\n      this._mouseOverY = this.mouseY;\n    }\n    var oldList = this._mouseOverTarget || [];\n    var oldTarget = oldList[oldList.length - 1];\n    var list = this._mouseOverTarget = [];\n\n    // generate ancestor list and check for cursor:\n    t = target;\n    while (t) {\n      list.unshift(t);\n      if (!cursor) {\n        cursor = t.cursor;\n      }\n      t = t.parent;\n    }\n    this.canvas.style.cursor = cursor;\n    if (!owner && eventTarget) {\n      eventTarget.canvas.style.cursor = cursor;\n    }\n\n    // find common ancestor:\n    for (i = 0, l = list.length; i < l; i++) {\n      if (list[i] != oldList[i]) {\n        break;\n      }\n      common = i;\n    }\n    if (oldTarget != target) {\n      this._dispatchMouseEvent(oldTarget, \"mouseout\", true, -1, o, e, target);\n    }\n    for (i = oldList.length - 1; i > common; i--) {\n      this._dispatchMouseEvent(oldList[i], \"rollout\", false, -1, o, e, target);\n    }\n    for (i = list.length - 1; i > common; i--) {\n      this._dispatchMouseEvent(list[i], \"rollover\", false, -1, o, e, oldTarget);\n    }\n    if (oldTarget != target) {\n      this._dispatchMouseEvent(target, \"mouseover\", true, -1, o, e, oldTarget);\n    }\n    nextStage && nextStage._testMouseOver(clear, owner || target && this, eventTarget || isEventTarget && this);\n  };\n\n  /**\n   * @method _handleDoubleClick\n   * @protected\n   * @param {MouseEvent} e\n   * @param {Stage} owner Indicates that the event has already been captured & handled by the indicated stage.\n   **/\n  p._handleDoubleClick = function (e, owner) {\n    var target = null,\n      nextStage = this._nextStage,\n      o = this._getPointerData(-1);\n    if (!owner) {\n      target = this._getObjectsUnderPoint(o.x, o.y, null, true);\n      this._dispatchMouseEvent(target, \"dblclick\", true, -1, o, e);\n    }\n    nextStage && nextStage._handleDoubleClick(e, owner || target && this);\n  };\n\n  /**\n   * @method _dispatchMouseEvent\n   * @protected\n   * @param {DisplayObject} target\n   * @param {String} type\n   * @param {Boolean} bubbles\n   * @param {Number} pointerId\n   * @param {Object} o\n   * @param {MouseEvent} [nativeEvent]\n   * @param {DisplayObject} [relatedTarget]\n   **/\n  p._dispatchMouseEvent = function (target, type, bubbles, pointerId, o, nativeEvent, relatedTarget) {\n    // TODO: might be worth either reusing MouseEvent instances, or adding a willTrigger method to avoid GC.\n    if (!target || !bubbles && !target.hasEventListener(type)) {\n      return;\n    }\n    /*\n    // TODO: account for stage transformations?\n    this._mtx = this.getConcatenatedMatrix(this._mtx).invert();\n    var pt = this._mtx.transformPoint(o.x, o.y);\n    var evt = new createjs.MouseEvent(type, bubbles, false, pt.x, pt.y, nativeEvent, pointerId, pointerId==this._primaryPointerID || pointerId==-1, o.rawX, o.rawY);\n    */\n    var evt = new createjs.MouseEvent(type, bubbles, false, o.x, o.y, nativeEvent, pointerId, pointerId === this._primaryPointerID || pointerId === -1, o.rawX, o.rawY, relatedTarget);\n    target.dispatchEvent(evt);\n  };\n  createjs.Stage = createjs.promote(Stage, \"Container\");\n})();\n\n//##############################################################################\n// Bitmap.js\n//##############################################################################\n\n(function () {\n  /**\n   * A Bitmap represents an Image, Canvas, or Video in the display list. A Bitmap can be instantiated using an existing\n   * HTML element, or a string.\n   *\n   * <h4>Example</h4>\n   *\n   *      var bitmap = new createjs.Bitmap(\"imagePath.jpg\");\n   *\n   * <strong>Notes:</strong>\n   * <ol>\n   *     <li>When a string path or image tag that is not yet loaded is used, the stage may need to be redrawn before it\n   *      will be displayed.</li>\n   *     <li>Bitmaps with an SVG source currently will not respect an alpha value other than 0 or 1. To get around this,\n   *     the Bitmap can be cached.</li>\n   *     <li>Bitmaps with an SVG source will taint the canvas with cross-origin data, which prevents interactivity. This\n   *     happens in all browsers except recent Firefox builds.</li>\n   *     <li>Images loaded cross-origin will throw cross-origin security errors when interacted with using a mouse, using\n   *     methods such as `getObjectUnderPoint`, or using filters, or caching. You can get around this by setting\n   *     `crossOrigin` flags on your images before passing them to EaselJS, eg: `img.crossOrigin=\"Anonymous\";`</li>\n   * </ol>\n   *\n   * @class Bitmap\n   * @extends DisplayObject\n   * @constructor\n   * @param {HTMLImageElement | HTMLCanvasElement | HTMLVideoElement | String} imageOrUri The source object or URI to an image to\n   * display. This can be either an Image, Canvas, or Video object, or a string URI to an image file to load and use.\n   * If it is a URI, a new Image object will be constructed and assigned to the .image property.\n   **/\n  function Bitmap(imageOrUri) {\n    this.DisplayObject_constructor();\n\n    // public properties:\n    /**\n     * The image to render. This can be an Image, a Canvas, or a Video. Not all browsers (especially\n     * mobile browsers) support drawing video to a canvas.\n     * @property image\n     * @type HTMLImageElement | HTMLCanvasElement | HTMLVideoElement\n     **/\n    if (typeof imageOrUri == \"string\") {\n      this.image = document.createElement(\"img\");\n      this.image.src = imageOrUri;\n    } else {\n      this.image = imageOrUri;\n    }\n\n    /**\n     * Specifies an area of the source image to draw. If omitted, the whole image will be drawn.\n     * Note that video sources must have a width / height set to work correctly with `sourceRect`.\n     * @property sourceRect\n     * @type Rectangle\n     * @default null\n     */\n    this.sourceRect = null;\n  }\n  var p = createjs.extend(Bitmap, createjs.DisplayObject);\n\n  // public methods:\n  /**\n   * Constructor alias for backwards compatibility. This method will be removed in future versions.\n   * Subclasses should be updated to use {{#crossLink \"Utility Methods/extends\"}}{{/crossLink}}.\n   * @method initialize\n   * @deprecated in favour of `createjs.promote()`\n   **/\n  p.initialize = Bitmap; // TODO: deprecated.\n\n  /**\n   * Returns true or false indicating whether the display object would be visible if drawn to a canvas.\n   * This does not account for whether it would be visible within the boundaries of the stage.\n   *\n   * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n   * @method isVisible\n   * @return {Boolean} Boolean indicating whether the display object would be visible if drawn to a canvas\n   **/\n  p.isVisible = function () {\n    var image = this.image;\n    var hasContent = this.cacheCanvas || image && (image.naturalWidth || image.getContext || image.readyState >= 2);\n    return !!(this.visible && this.alpha > 0 && this.scaleX != 0 && this.scaleY != 0 && hasContent);\n  };\n\n  /**\n   * Draws the display object into the specified context ignoring its visible, alpha, shadow, and transform.\n   * Returns true if the draw was handled (useful for overriding functionality).\n   *\n   * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n   * @method draw\n   * @param {CanvasRenderingContext2D} ctx The canvas 2D context object to draw into.\n   * @param {Boolean} [ignoreCache=false] Indicates whether the draw operation should ignore any current cache.\n   * For example, used for drawing the cache (to prevent it from simply drawing an existing cache back\n   * into itself).\n   * @return {Boolean}\n   **/\n  p.draw = function (ctx, ignoreCache) {\n    if (this.DisplayObject_draw(ctx, ignoreCache) || !this.image) {\n      return true;\n    }\n    var img = this.image,\n      rect = this.sourceRect;\n    if (rect) {\n      // some browsers choke on out of bound values, so we'll fix them:\n      var x1 = rect.x,\n        y1 = rect.y,\n        x2 = x1 + rect.width,\n        y2 = y1 + rect.height,\n        x = 0,\n        y = 0,\n        w = img.width,\n        h = img.height;\n      if (x1 < 0) {\n        x -= x1;\n        x1 = 0;\n      }\n      if (x2 > w) {\n        x2 = w;\n      }\n      if (y1 < 0) {\n        y -= y1;\n        y1 = 0;\n      }\n      if (y2 > h) {\n        y2 = h;\n      }\n      ctx.drawImage(img, x1, y1, x2 - x1, y2 - y1, x, y, x2 - x1, y2 - y1);\n    } else {\n      ctx.drawImage(img, 0, 0);\n    }\n    return true;\n  };\n\n  //Note, the doc sections below document using the specified APIs (from DisplayObject)  from\n  //Bitmap. This is why they have no method implementations.\n\n  /**\n   * Because the content of a Bitmap is already in a simple format, cache is unnecessary for Bitmap instances.\n   * You should <b>not</b> cache Bitmap instances as it can degrade performance.\n   *\n   * <strong>However: If you want to use a filter on a Bitmap, you <em>MUST</em> cache it, or it will not work.</strong>\n   * To see the API for caching, please visit the DisplayObject {{#crossLink \"DisplayObject/cache\"}}{{/crossLink}}\n   * method.\n   * @method cache\n   **/\n\n  /**\n   * Because the content of a Bitmap is already in a simple format, cache is unnecessary for Bitmap instances.\n   * You should <b>not</b> cache Bitmap instances as it can degrade performance.\n   *\n   * <strong>However: If you want to use a filter on a Bitmap, you <em>MUST</em> cache it, or it will not work.</strong>\n   * To see the API for caching, please visit the DisplayObject {{#crossLink \"DisplayObject/cache\"}}{{/crossLink}}\n   * method.\n   * @method updateCache\n   **/\n\n  /**\n   * Because the content of a Bitmap is already in a simple format, cache is unnecessary for Bitmap instances.\n   * You should <b>not</b> cache Bitmap instances as it can degrade performance.\n   *\n   * <strong>However: If you want to use a filter on a Bitmap, you <em>MUST</em> cache it, or it will not work.</strong>\n   * To see the API for caching, please visit the DisplayObject {{#crossLink \"DisplayObject/cache\"}}{{/crossLink}}\n   * method.\n   * @method uncache\n   **/\n\n  /**\n   * Docced in superclass.\n   */\n  p.getBounds = function () {\n    var rect = this.DisplayObject_getBounds();\n    if (rect) {\n      return rect;\n    }\n    var image = this.image,\n      o = this.sourceRect || image;\n    var hasContent = image && (image.naturalWidth || image.getContext || image.readyState >= 2);\n    return hasContent ? this._rectangle.setValues(0, 0, o.width, o.height) : null;\n  };\n\n  /**\n   * Returns a clone of the Bitmap instance.\n   * @method clone\n   * @return {Bitmap} a clone of the Bitmap instance.\n   **/\n  p.clone = function () {\n    var o = new Bitmap(this.image);\n    if (this.sourceRect) {\n      o.sourceRect = this.sourceRect.clone();\n    }\n    this._cloneProps(o);\n    return o;\n  };\n\n  /**\n   * Returns a string representation of this object.\n   * @method toString\n   * @return {String} a string representation of the instance.\n   **/\n  p.toString = function () {\n    return \"[Bitmap (name=\" + this.name + \")]\";\n  };\n  createjs.Bitmap = createjs.promote(Bitmap, \"DisplayObject\");\n})();\n\n//##############################################################################\n// Sprite.js\n//##############################################################################\n\n(function () {\n  \"use strict\";\n\n  // constructor:\n  /**\n   * Displays a frame or sequence of frames (ie. an animation) from a SpriteSheet instance. A sprite sheet is a series of\n   * images (usually animation frames) combined into a single image. For example, an animation consisting of 8 100x100\n   * images could be combined into a 400x200 sprite sheet (4 frames across by 2 high). You can display individual frames,\n   * play frames as an animation, and even sequence animations together.\n   *\n   * See the {{#crossLink \"SpriteSheet\"}}{{/crossLink}} class for more information on setting up frames and animations.\n   *\n   * <h4>Example</h4>\n   *\n   *      var instance = new createjs.Sprite(spriteSheet);\n   *      instance.gotoAndStop(\"frameName\");\n   *\n   * Until {{#crossLink \"Sprite/gotoAndStop\"}}{{/crossLink}} or {{#crossLink \"Sprite/gotoAndPlay\"}}{{/crossLink}} is called,\n   * only the first defined frame defined in the sprite sheet will be displayed.\n   *\n   * @class Sprite\n   * @extends DisplayObject\n   * @constructor\n   * @param {SpriteSheet} spriteSheet The SpriteSheet instance to play back. This includes the source image(s), frame\n   * dimensions, and frame data. See {{#crossLink \"SpriteSheet\"}}{{/crossLink}} for more information.\n   * @param {String|Number} [frameOrAnimation] The frame number or animation to play initially.\n   **/\n  function Sprite(spriteSheet, frameOrAnimation) {\n    this.DisplayObject_constructor();\n\n    // public properties:\n    /**\n     * The frame index that will be drawn when draw is called. Note that with some {{#crossLink \"SpriteSheet\"}}{{/crossLink}}\n     * definitions, this will advance non-sequentially. This will always be an integer value.\n     * @property currentFrame\n     * @type {Number}\n     * @default 0\n     * @readonly\n     **/\n    this.currentFrame = 0;\n\n    /**\n     * Returns the name of the currently playing animation.\n     * @property currentAnimation\n     * @type {String}\n     * @final\n     * @readonly\n     **/\n    this.currentAnimation = null;\n\n    /**\n     * Prevents the animation from advancing each tick automatically. For example, you could create a sprite\n     * sheet of icons, set paused to true, and display the appropriate icon by setting <code>currentFrame</code>.\n     * @property paused\n     * @type {Boolean}\n     * @default false\n     **/\n    this.paused = true;\n\n    /**\n     * The SpriteSheet instance to play back. This includes the source image, frame dimensions, and frame\n     * data. See {{#crossLink \"SpriteSheet\"}}{{/crossLink}} for more information.\n     * @property spriteSheet\n     * @type {SpriteSheet}\n     * @readonly\n     **/\n    this.spriteSheet = spriteSheet;\n\n    /**\n     * Specifies the current frame index within the currently playing animation. When playing normally, this will increase\n     * from 0 to n-1, where n is the number of frames in the current animation.\n     *\n     * This could be a non-integer value if\n     * using time-based playback (see {{#crossLink \"Sprite/framerate\"}}{{/crossLink}}, or if the animation's speed is\n     * not an integer.\n     * @property currentAnimationFrame\n     * @type {Number}\n     * @default 0\n     **/\n    this.currentAnimationFrame = 0;\n\n    /**\n     * By default Sprite instances advance one frame per tick. Specifying a framerate for the Sprite (or its related\n     * SpriteSheet) will cause it to advance based on elapsed time between ticks as appropriate to maintain the target\n     * framerate.\n     *\n     * For example, if a Sprite with a framerate of 10 is placed on a Stage being updated at 40fps, then the Sprite will\n     * advance roughly one frame every 4 ticks. This will not be exact, because the time between each tick will\n     * vary slightly between frames.\n     *\n     * This feature is dependent on the tick event object (or an object with an appropriate \"delta\" property) being\n     * passed into {{#crossLink \"Stage/update\"}}{{/crossLink}}.\n     * @property framerate\n     * @type {Number}\n     * @default 0\n     **/\n    this.framerate = 0;\n\n    // private properties:\n    /**\n     * Current animation object.\n     * @property _animation\n     * @protected\n     * @type {Object}\n     * @default null\n     **/\n    this._animation = null;\n\n    /**\n     * Current frame index.\n     * @property _currentFrame\n     * @protected\n     * @type {Number}\n     * @default null\n     **/\n    this._currentFrame = null;\n\n    /**\n     * Skips the next auto advance. Used by gotoAndPlay to avoid immediately jumping to the next frame\n     * @property _skipAdvance\n     * @protected\n     * @type {Boolean}\n     * @default false\n     **/\n    this._skipAdvance = false;\n    if (frameOrAnimation != null) {\n      this.gotoAndPlay(frameOrAnimation);\n    }\n  }\n  var p = createjs.extend(Sprite, createjs.DisplayObject);\n\n  /**\n   * Constructor alias for backwards compatibility. This method will be removed in future versions.\n   * Subclasses should be updated to use {{#crossLink \"Utility Methods/extends\"}}{{/crossLink}}.\n   * @method initialize\n   * @deprecated in favour of `createjs.promote()`\n   **/\n  p.initialize = Sprite; // TODO: Deprecated. This is for backwards support of FlashCC spritesheet export.\n\n  // events:\n  /**\n   * Dispatched when an animation reaches its ends.\n   * @event animationend\n   * @param {Object} target The object that dispatched the event.\n   * @param {String} type The event type.\n   * @param {String} name The name of the animation that just ended.\n   * @param {String} next The name of the next animation that will be played, or null. This will be the same as name if the animation is looping.\n   * @since 0.6.0\n   */\n\n  /**\n   * Dispatched any time the current frame changes. For example, this could be due to automatic advancement on a tick,\n   * or calling gotoAndPlay() or gotoAndStop().\n   * @event change\n   * @param {Object} target The object that dispatched the event.\n   * @param {String} type The event type.\n   */\n\n  // public methods:\n  /**\n   * Returns true or false indicating whether the display object would be visible if drawn to a canvas.\n   * This does not account for whether it would be visible within the boundaries of the stage.\n   * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n   * @method isVisible\n   * @return {Boolean} Boolean indicating whether the display object would be visible if drawn to a canvas\n   **/\n  p.isVisible = function () {\n    var hasContent = this.cacheCanvas || this.spriteSheet.complete;\n    return !!(this.visible && this.alpha > 0 && this.scaleX != 0 && this.scaleY != 0 && hasContent);\n  };\n\n  /**\n   * Draws the display object into the specified context ignoring its visible, alpha, shadow, and transform.\n   * Returns true if the draw was handled (useful for overriding functionality).\n   * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n   * @method draw\n   * @param {CanvasRenderingContext2D} ctx The canvas 2D context object to draw into.\n   * @param {Boolean} ignoreCache Indicates whether the draw operation should ignore any current cache.\n   * For example, used for drawing the cache (to prevent it from simply drawing an existing cache back\n   * into itself).\n   **/\n  p.draw = function (ctx, ignoreCache) {\n    if (this.DisplayObject_draw(ctx, ignoreCache)) {\n      return true;\n    }\n    this._normalizeFrame();\n    var o = this.spriteSheet.getFrame(this._currentFrame | 0);\n    if (!o) {\n      return false;\n    }\n    var rect = o.rect;\n    if (rect.width && rect.height) {\n      ctx.drawImage(o.image, rect.x, rect.y, rect.width, rect.height, -o.regX, -o.regY, rect.width, rect.height);\n    }\n    return true;\n  };\n\n  //Note, the doc sections below document using the specified APIs (from DisplayObject)  from\n  //Bitmap. This is why they have no method implementations.\n\n  /**\n   * Because the content of a Sprite is already in a raster format, cache is unnecessary for Sprite instances.\n   * You should not cache Sprite instances as it can degrade performance.\n   * @method cache\n   **/\n\n  /**\n   * Because the content of a Sprite is already in a raster format, cache is unnecessary for Sprite instances.\n   * You should not cache Sprite instances as it can degrade performance.\n   * @method updateCache\n   **/\n\n  /**\n   * Because the content of a Sprite is already in a raster format, cache is unnecessary for Sprite instances.\n   * You should not cache Sprite instances as it can degrade performance.\n   * @method uncache\n   **/\n\n  /**\n   * Play (unpause) the current animation. The Sprite will be paused if either {{#crossLink \"Sprite/stop\"}}{{/crossLink}}\n   * or {{#crossLink \"Sprite/gotoAndStop\"}}{{/crossLink}} is called. Single frame animations will remain\n   * unchanged.\n   * @method play\n   **/\n  p.play = function () {\n    this.paused = false;\n  };\n\n  /**\n   * Stop playing a running animation. The Sprite will be playing if {{#crossLink \"Sprite/gotoAndPlay\"}}{{/crossLink}}\n   * is called. Note that calling {{#crossLink \"Sprite/gotoAndPlay\"}}{{/crossLink}} or {{#crossLink \"Sprite/play\"}}{{/crossLink}}\n   * will resume playback.\n   * @method stop\n   **/\n  p.stop = function () {\n    this.paused = true;\n  };\n\n  /**\n   * Sets paused to false and plays the specified animation name, named frame, or frame number.\n   * @method gotoAndPlay\n   * @param {String|Number} frameOrAnimation The frame number or animation name that the playhead should move to\n   * and begin playing.\n   **/\n  p.gotoAndPlay = function (frameOrAnimation) {\n    this.paused = false;\n    this._skipAdvance = true;\n    this._goto(frameOrAnimation);\n  };\n\n  /**\n   * Sets paused to true and seeks to the specified animation name, named frame, or frame number.\n   * @method gotoAndStop\n   * @param {String|Number} frameOrAnimation The frame number or animation name that the playhead should move to\n   * and stop.\n   **/\n  p.gotoAndStop = function (frameOrAnimation) {\n    this.paused = true;\n    this._goto(frameOrAnimation);\n  };\n\n  /**\n   * Advances the playhead. This occurs automatically each tick by default.\n   * @param [time] {Number} The amount of time in ms to advance by. Only applicable if framerate is set on the Sprite\n   * or its SpriteSheet.\n   * @method advance\n  */\n  p.advance = function (time) {\n    var fps = this.framerate || this.spriteSheet.framerate;\n    var t = fps && time != null ? time / (1000 / fps) : 1;\n    this._normalizeFrame(t);\n  };\n\n  /**\n   * Returns a {{#crossLink \"Rectangle\"}}{{/crossLink}} instance defining the bounds of the current frame relative to\n   * the origin. For example, a 90 x 70 frame with <code>regX=50</code> and <code>regY=40</code> would return a\n   * rectangle with [x=-50, y=-40, width=90, height=70]. This ignores transformations on the display object.\n   *\n   * Also see the SpriteSheet {{#crossLink \"SpriteSheet/getFrameBounds\"}}{{/crossLink}} method.\n   * @method getBounds\n   * @return {Rectangle} A Rectangle instance. Returns null if the frame does not exist, or the image is not fully\n   * loaded.\n   **/\n  p.getBounds = function () {\n    // TODO: should this normalizeFrame?\n    return this.DisplayObject_getBounds() || this.spriteSheet.getFrameBounds(this.currentFrame, this._rectangle);\n  };\n\n  /**\n   * Returns a clone of the Sprite instance. Note that the same SpriteSheet is shared between cloned\n   * instances.\n   * @method clone\n   * @return {Sprite} a clone of the Sprite instance.\n   **/\n  p.clone = function () {\n    return this._cloneProps(new Sprite(this.spriteSheet));\n  };\n\n  /**\n   * Returns a string representation of this object.\n   * @method toString\n   * @return {String} a string representation of the instance.\n   **/\n  p.toString = function () {\n    return \"[Sprite (name=\" + this.name + \")]\";\n  };\n\n  // private methods:\n  /**\n   * @method _cloneProps\n   * @param {Sprite} o\n   * @return {Sprite} o\n   * @protected\n   **/\n  p._cloneProps = function (o) {\n    this.DisplayObject__cloneProps(o);\n    o.currentFrame = this.currentFrame;\n    o.currentAnimation = this.currentAnimation;\n    o.paused = this.paused;\n    o.currentAnimationFrame = this.currentAnimationFrame;\n    o.framerate = this.framerate;\n    o._animation = this._animation;\n    o._currentFrame = this._currentFrame;\n    o._skipAdvance = this._skipAdvance;\n    return o;\n  };\n\n  /**\n   * Advances the <code>currentFrame</code> if paused is not true. This is called automatically when the {{#crossLink \"Stage\"}}{{/crossLink}}\n   * ticks.\n   * @param {Object} evtObj An event object that will be dispatched to all tick listeners. This object is reused between dispatchers to reduce construction & GC costs.\n   * @protected\n   * @method _tick\n   **/\n  p._tick = function (evtObj) {\n    if (!this.paused) {\n      if (!this._skipAdvance) {\n        this.advance(evtObj && evtObj.delta);\n      }\n      this._skipAdvance = false;\n    }\n    this.DisplayObject__tick(evtObj);\n  };\n\n  /**\n   * Normalizes the current frame, advancing animations and dispatching callbacks as appropriate.\n   * @protected\n   * @method _normalizeFrame\n   **/\n  p._normalizeFrame = function (frameDelta) {\n    frameDelta = frameDelta || 0;\n    var animation = this._animation;\n    var paused = this.paused;\n    var frame = this._currentFrame;\n    var l;\n    if (animation) {\n      var speed = animation.speed || 1;\n      var animFrame = this.currentAnimationFrame;\n      l = animation.frames.length;\n      if (animFrame + frameDelta * speed >= l) {\n        var next = animation.next;\n        if (this._dispatchAnimationEnd(animation, frame, paused, next, l - 1)) {\n          // something changed in the event stack, so we shouldn't make any more changes here.\n          return;\n        } else if (next) {\n          // sequence. Automatically calls _normalizeFrame again with the remaining frames.\n          return this._goto(next, frameDelta - (l - animFrame) / speed);\n        } else {\n          // end.\n          this.paused = true;\n          animFrame = animation.frames.length - 1;\n        }\n      } else {\n        animFrame += frameDelta * speed;\n      }\n      this.currentAnimationFrame = animFrame;\n      this._currentFrame = animation.frames[animFrame | 0];\n    } else {\n      frame = this._currentFrame += frameDelta;\n      l = this.spriteSheet.getNumFrames();\n      if (frame >= l && l > 0) {\n        if (!this._dispatchAnimationEnd(animation, frame, paused, l - 1)) {\n          // looped.\n          if ((this._currentFrame -= l) >= l) {\n            return this._normalizeFrame();\n          }\n        }\n      }\n    }\n    frame = this._currentFrame | 0;\n    if (this.currentFrame != frame) {\n      this.currentFrame = frame;\n      this.dispatchEvent(\"change\");\n    }\n  };\n\n  /**\n   * Dispatches the \"animationend\" event. Returns true if a handler changed the animation (ex. calling {{#crossLink \"Sprite/stop\"}}{{/crossLink}},\n   * {{#crossLink \"Sprite/gotoAndPlay\"}}{{/crossLink}}, etc.)\n   * @property _dispatchAnimationEnd\n   * @private\n   * @type {Function}\n   **/\n  p._dispatchAnimationEnd = function (animation, frame, paused, next, end) {\n    var name = animation ? animation.name : null;\n    if (this.hasEventListener(\"animationend\")) {\n      var evt = new createjs.Event(\"animationend\");\n      evt.name = name;\n      evt.next = next;\n      this.dispatchEvent(evt);\n    }\n    // did the animation get changed in the event stack?:\n    var changed = this._animation != animation || this._currentFrame != frame;\n    // if the animation hasn't changed, but the sprite was paused, then we want to stick to the last frame:\n    if (!changed && !paused && this.paused) {\n      this.currentAnimationFrame = end;\n      changed = true;\n    }\n    return changed;\n  };\n\n  /**\n   * Moves the playhead to the specified frame number or animation.\n   * @method _goto\n   * @param {String|Number} frameOrAnimation The frame number or animation that the playhead should move to.\n   * @param {Boolean} [frame] The frame of the animation to go to. Defaults to 0.\n   * @protected\n   **/\n  p._goto = function (frameOrAnimation, frame) {\n    this.currentAnimationFrame = 0;\n    if (isNaN(frameOrAnimation)) {\n      var data = this.spriteSheet.getAnimation(frameOrAnimation);\n      if (data) {\n        this._animation = data;\n        this.currentAnimation = frameOrAnimation;\n        this._normalizeFrame(frame);\n      }\n    } else {\n      this.currentAnimation = this._animation = null;\n      this._currentFrame = frameOrAnimation;\n      this._normalizeFrame();\n    }\n  };\n  createjs.Sprite = createjs.promote(Sprite, \"DisplayObject\");\n})();\n\n//##############################################################################\n// Shape.js\n//##############################################################################\n\n(function () {\n  \"use strict\";\n\n  // constructor:\n  /**\n   * A Shape allows you to display vector art in the display list. It composites a {{#crossLink \"Graphics\"}}{{/crossLink}}\n   * instance which exposes all of the vector drawing methods. The Graphics instance can be shared between multiple Shape\n   * instances to display the same vector graphics with different positions or transforms.\n   *\n   * If the vector art will not\n   * change between draws, you may want to use the {{#crossLink \"DisplayObject/cache\"}}{{/crossLink}} method to reduce the\n   * rendering cost.\n   *\n   * <h4>Example</h4>\n   *\n   *      var graphics = new createjs.Graphics().beginFill(\"#ff0000\").drawRect(0, 0, 100, 100);\n   *      var shape = new createjs.Shape(graphics);\n   *\n   *      //Alternatively use can also use the graphics property of the Shape class to renderer the same as above.\n   *      var shape = new createjs.Shape();\n   *      shape.graphics.beginFill(\"#ff0000\").drawRect(0, 0, 100, 100);\n   *\n   * @class Shape\n   * @extends DisplayObject\n   * @constructor\n   * @param {Graphics} graphics Optional. The graphics instance to display. If null, a new Graphics instance will be created.\n   **/\n  function Shape(graphics) {\n    this.DisplayObject_constructor();\n\n    // public properties:\n    /**\n     * The graphics instance to display.\n     * @property graphics\n     * @type Graphics\n     **/\n    this.graphics = graphics ? graphics : new createjs.Graphics();\n  }\n  var p = createjs.extend(Shape, createjs.DisplayObject);\n\n  // TODO: deprecated\n  // p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\n\n  // public methods:\n  /**\n   * Returns true or false indicating whether the Shape would be visible if drawn to a canvas.\n   * This does not account for whether it would be visible within the boundaries of the stage.\n   * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n   * @method isVisible\n   * @return {Boolean} Boolean indicating whether the Shape would be visible if drawn to a canvas\n   **/\n  p.isVisible = function () {\n    var hasContent = this.cacheCanvas || this.graphics && !this.graphics.isEmpty();\n    return !!(this.visible && this.alpha > 0 && this.scaleX != 0 && this.scaleY != 0 && hasContent);\n  };\n\n  /**\n   * Draws the Shape into the specified context ignoring its visible, alpha, shadow, and transform. Returns true if\n   * the draw was handled (useful for overriding functionality).\n   *\n   * <i>NOTE: This method is mainly for internal use, though it may be useful for advanced uses.</i>\n   * @method draw\n   * @param {CanvasRenderingContext2D} ctx The canvas 2D context object to draw into.\n   * @param {Boolean} [ignoreCache=false] Indicates whether the draw operation should ignore any current cache. For example,\n   * used for drawing the cache (to prevent it from simply drawing an existing cache back into itself).\n   * @return {Boolean}\n   **/\n  p.draw = function (ctx, ignoreCache) {\n    if (this.DisplayObject_draw(ctx, ignoreCache)) {\n      return true;\n    }\n    this.graphics.draw(ctx, this);\n    return true;\n  };\n\n  /**\n   * Returns a clone of this Shape. Some properties that are specific to this instance's current context are reverted to\n   * their defaults (for example .parent).\n   * @method clone\n   * @param {Boolean} recursive If true, this Shape's {{#crossLink \"Graphics\"}}{{/crossLink}} instance will also be\n   * cloned. If false, the Graphics instance will be shared with the new Shape.\n   **/\n  p.clone = function (recursive) {\n    var g = recursive && this.graphics ? this.graphics.clone() : this.graphics;\n    return this._cloneProps(new Shape(g));\n  };\n\n  /**\n   * Returns a string representation of this object.\n   * @method toString\n   * @return {String} a string representation of the instance.\n   **/\n  p.toString = function () {\n    return \"[Shape (name=\" + this.name + \")]\";\n  };\n  createjs.Shape = createjs.promote(Shape, \"DisplayObject\");\n})();\n\n//##############################################################################\n// Text.js\n//##############################################################################\n\n(function () {\n  \"use strict\";\n\n  // constructor:\n  /**\n   * Display one or more lines of dynamic text (not user editable) in the display list. Line wrapping support (using the\n   * lineWidth) is very basic, wrapping on spaces and tabs only. Note that as an alternative to Text, you can position HTML\n   * text above or below the canvas relative to items in the display list using the {{#crossLink \"DisplayObject/localToGlobal\"}}{{/crossLink}}\n   * method, or using {{#crossLink \"DOMElement\"}}{{/crossLink}}.\n   *\n   * <b>Please note that Text does not support HTML text, and can only display one font style at a time.</b> To use\n   * multiple font styles, you will need to create multiple text instances, and position them manually.\n   *\n   * <h4>Example</h4>\n   *\n   *      var text = new createjs.Text(\"Hello World\", \"20px Arial\", \"#ff7700\");\n   *      text.x = 100;\n   *      text.textBaseline = \"alphabetic\";\n   *\n   * CreateJS Text supports web fonts (the same rules as Canvas). The font must be loaded and supported by the browser\n   * before it can be displayed.\n   *\n   * <strong>Note:</strong> Text can be expensive to generate, so cache instances where possible. Be aware that not all\n   * browsers will render Text exactly the same.\n   * @class Text\n   * @extends DisplayObject\n   * @constructor\n   * @param {String} [text] The text to display.\n   * @param {String} [font] The font style to use. Any valid value for the CSS font attribute is acceptable (ex. \"bold\n   * 36px Arial\").\n   * @param {String} [color] The color to draw the text in. Any valid value for the CSS color attribute is acceptable (ex.\n   * \"#F00\", \"red\", or \"#FF0000\").\n   **/\n  function Text(text, font, color) {\n    this.DisplayObject_constructor();\n\n    // public properties:\n    /**\n     * The text to display.\n     * @property text\n     * @type String\n     **/\n    this.text = text;\n\n    /**\n     * The font style to use. Any valid value for the CSS font attribute is acceptable (ex. \"bold 36px Arial\").\n     * @property font\n     * @type String\n     **/\n    this.font = font;\n\n    /**\n     * The color to draw the text in. Any valid value for the CSS color attribute is acceptable (ex. \"#F00\"). Default is \"#000\".\n     * It will also accept valid canvas fillStyle values.\n     * @property color\n     * @type String\n     **/\n    this.color = color;\n\n    /**\n     * The horizontal text alignment. Any of \"start\", \"end\", \"left\", \"right\", and \"center\". For detailed\n     * information view the\n     * <a href=\"http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#text-styles\">\n     * whatwg spec</a>. Default is \"left\".\n     * @property textAlign\n     * @type String\n     **/\n    this.textAlign = \"left\";\n\n    /**\n     * The vertical alignment point on the font. Any of \"top\", \"hanging\", \"middle\", \"alphabetic\", \"ideographic\", or\n     * \"bottom\". For detailed information view the <a href=\"http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#text-styles\">\n     * whatwg spec</a>. Default is \"top\".\n     * @property textBaseline\n     * @type String\n    */\n    this.textBaseline = \"top\";\n\n    /**\n     * The maximum width to draw the text. If maxWidth is specified (not null), the text will be condensed or\n     * shrunk to make it fit in this width. For detailed information view the\n     * <a href=\"http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#text-styles\">\n     * whatwg spec</a>.\n     * @property maxWidth\n     * @type Number\n    */\n    this.maxWidth = null;\n\n    /**\n     * If greater than 0, the text will be drawn as a stroke (outline) of the specified width.\n     * @property outline\n     * @type Number\n     **/\n    this.outline = 0;\n\n    /**\n     * Indicates the line height (vertical distance between baselines) for multi-line text. If null or 0,\n     * the value of getMeasuredLineHeight is used.\n     * @property lineHeight\n     * @type Number\n     **/\n    this.lineHeight = 0;\n\n    /**\n     * Indicates the maximum width for a line of text before it is wrapped to multiple lines. If null,\n     * the text will not be wrapped.\n     * @property lineWidth\n     * @type Number\n     **/\n    this.lineWidth = null;\n  }\n  var p = createjs.extend(Text, createjs.DisplayObject);\n\n  // TODO: deprecated\n  // p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\n\n  // static properties:\n  /**\n   * @property _workingContext\n   * @type CanvasRenderingContext2D\n   * @private\n   **/\n  var canvas = createjs.createCanvas ? createjs.createCanvas() : document.createElement(\"canvas\");\n  if (canvas.getContext) {\n    Text._workingContext = canvas.getContext(\"2d\");\n    canvas.width = canvas.height = 1;\n  }\n\n  // constants:\n  /**\n   * Lookup table for the ratio to offset bounds x calculations based on the textAlign property.\n   * @property H_OFFSETS\n   * @type Object\n   * @protected\n   * @static\n   **/\n  Text.H_OFFSETS = {\n    start: 0,\n    left: 0,\n    center: -0.5,\n    end: -1,\n    right: -1\n  };\n\n  /**\n   * Lookup table for the ratio to offset bounds y calculations based on the textBaseline property.\n   * @property H_OFFSETS\n   * @type Object\n   * @protected\n   * @static\n   **/\n  Text.V_OFFSETS = {\n    top: 0,\n    hanging: -0.01,\n    middle: -0.4,\n    alphabetic: -0.8,\n    ideographic: -0.85,\n    bottom: -1\n  };\n\n  // public methods:\n  /**\n   * Returns true or false indicating whether the display object would be visible if drawn to a canvas.\n   * This does not account for whether it would be visible within the boundaries of the stage.\n   * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n   * @method isVisible\n   * @return {Boolean} Whether the display object would be visible if drawn to a canvas\n   **/\n  p.isVisible = function () {\n    var hasContent = this.cacheCanvas || this.text != null && this.text !== \"\";\n    return !!(this.visible && this.alpha > 0 && this.scaleX != 0 && this.scaleY != 0 && hasContent);\n  };\n\n  /**\n   * Draws the Text into the specified context ignoring its visible, alpha, shadow, and transform.\n   * Returns true if the draw was handled (useful for overriding functionality).\n   * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n   * @method draw\n   * @param {CanvasRenderingContext2D} ctx The canvas 2D context object to draw into.\n   * @param {Boolean} ignoreCache Indicates whether the draw operation should ignore any current cache.\n   * For example, used for drawing the cache (to prevent it from simply drawing an existing cache back\n   * into itself).\n   **/\n  p.draw = function (ctx, ignoreCache) {\n    if (this.DisplayObject_draw(ctx, ignoreCache)) {\n      return true;\n    }\n    var col = this.color || \"#000\";\n    if (this.outline) {\n      ctx.strokeStyle = col;\n      ctx.lineWidth = this.outline * 1;\n    } else {\n      ctx.fillStyle = col;\n    }\n    this._drawText(this._prepContext(ctx));\n    return true;\n  };\n\n  /**\n   * Returns the measured, untransformed width of the text without wrapping. Use getBounds for a more robust value.\n   * @method getMeasuredWidth\n   * @return {Number} The measured, untransformed width of the text.\n   **/\n  p.getMeasuredWidth = function () {\n    return this._getMeasuredWidth(this.text);\n  };\n\n  /**\n   * Returns an approximate line height of the text, ignoring the lineHeight property. This is based on the measured\n   * width of a \"M\" character multiplied by 1.2, which provides an approximate line height for most fonts.\n   * @method getMeasuredLineHeight\n   * @return {Number} an approximate line height of the text, ignoring the lineHeight property. This is\n   * based on the measured width of a \"M\" character multiplied by 1.2, which approximates em for most fonts.\n   **/\n  p.getMeasuredLineHeight = function () {\n    return this._getMeasuredWidth(\"M\") * 1.2;\n  };\n\n  /**\n   * Returns the approximate height of multi-line text by multiplying the number of lines against either the\n   * <code>lineHeight</code> (if specified) or {{#crossLink \"Text/getMeasuredLineHeight\"}}{{/crossLink}}. Note that\n   * this operation requires the text flowing logic to run, which has an associated CPU cost.\n   * @method getMeasuredHeight\n   * @return {Number} The approximate height of the untransformed multi-line text.\n   **/\n  p.getMeasuredHeight = function () {\n    return this._drawText(null, {}).height;\n  };\n\n  /**\n   * Docced in superclass.\n   */\n  p.getBounds = function () {\n    var rect = this.DisplayObject_getBounds();\n    if (rect) {\n      return rect;\n    }\n    if (this.text == null || this.text === \"\") {\n      return null;\n    }\n    var o = this._drawText(null, {});\n    var w = this.maxWidth && this.maxWidth < o.width ? this.maxWidth : o.width;\n    var x = w * Text.H_OFFSETS[this.textAlign || \"left\"];\n    var lineHeight = this.lineHeight || this.getMeasuredLineHeight();\n    var y = lineHeight * Text.V_OFFSETS[this.textBaseline || \"top\"];\n    return this._rectangle.setValues(x, y, w, o.height);\n  };\n\n  /**\n   * Returns an object with width, height, and lines properties. The width and height are the visual width and height\n   * of the drawn text. The lines property contains an array of strings, one for\n   * each line of text that will be drawn, accounting for line breaks and wrapping. These strings have trailing\n   * whitespace removed.\n   * @method getMetrics\n   * @return {Object} An object with width, height, and lines properties.\n   **/\n  p.getMetrics = function () {\n    var o = {\n      lines: []\n    };\n    o.lineHeight = this.lineHeight || this.getMeasuredLineHeight();\n    o.vOffset = o.lineHeight * Text.V_OFFSETS[this.textBaseline || \"top\"];\n    return this._drawText(null, o, o.lines);\n  };\n\n  /**\n   * Returns a clone of the Text instance.\n   * @method clone\n   * @return {Text} a clone of the Text instance.\n   **/\n  p.clone = function () {\n    return this._cloneProps(new Text(this.text, this.font, this.color));\n  };\n\n  /**\n   * Returns a string representation of this object.\n   * @method toString\n   * @return {String} a string representation of the instance.\n   **/\n  p.toString = function () {\n    return \"[Text (text=\" + (this.text.length > 20 ? this.text.substr(0, 17) + \"...\" : this.text) + \")]\";\n  };\n\n  // private methods:\n  /**\n   * @method _cloneProps\n   * @param {Text} o\n   * @protected\n   * @return {Text} o\n   **/\n  p._cloneProps = function (o) {\n    this.DisplayObject__cloneProps(o);\n    o.textAlign = this.textAlign;\n    o.textBaseline = this.textBaseline;\n    o.maxWidth = this.maxWidth;\n    o.outline = this.outline;\n    o.lineHeight = this.lineHeight;\n    o.lineWidth = this.lineWidth;\n    return o;\n  };\n\n  /**\n   * @method _getWorkingContext\n   * @param {CanvasRenderingContext2D} ctx\n   * @return {CanvasRenderingContext2D}\n   * @protected\n   **/\n  p._prepContext = function (ctx) {\n    ctx.font = this.font || \"10px sans-serif\";\n    ctx.textAlign = this.textAlign || \"left\";\n    ctx.textBaseline = this.textBaseline || \"top\";\n    return ctx;\n  };\n\n  /**\n   * Draws multiline text.\n   * @method _drawText\n   * @param {CanvasRenderingContext2D} ctx\n   * @param {Object} o\n   * @param {Array} lines\n   * @return {Object}\n   * @protected\n   **/\n  p._drawText = function (ctx, o, lines) {\n    var paint = !!ctx;\n    if (!paint) {\n      ctx = Text._workingContext;\n      ctx.save();\n      this._prepContext(ctx);\n    }\n    var lineHeight = this.lineHeight || this.getMeasuredLineHeight();\n    var maxW = 0,\n      count = 0;\n    var hardLines = String(this.text).split(/(?:\\r\\n|\\r|\\n)/);\n    for (var i = 0, l = hardLines.length; i < l; i++) {\n      var str = hardLines[i];\n      var w = null;\n      if (this.lineWidth != null && (w = ctx.measureText(str).width) > this.lineWidth) {\n        // text wrapping:\n        var words = str.split(/(\\s)/);\n        str = words[0];\n        w = ctx.measureText(str).width;\n        for (var j = 1, jl = words.length; j < jl; j += 2) {\n          // Line needs to wrap:\n          var wordW = ctx.measureText(words[j] + words[j + 1]).width;\n          if (w + wordW > this.lineWidth) {\n            if (paint) {\n              this._drawTextLine(ctx, str, count * lineHeight);\n            }\n            if (lines) {\n              lines.push(str);\n            }\n            if (w > maxW) {\n              maxW = w;\n            }\n            str = words[j + 1];\n            w = ctx.measureText(str).width;\n            count++;\n          } else {\n            str += words[j] + words[j + 1];\n            w += wordW;\n          }\n        }\n      }\n      if (paint) {\n        this._drawTextLine(ctx, str, count * lineHeight);\n      }\n      if (lines) {\n        lines.push(str);\n      }\n      if (o && w == null) {\n        w = ctx.measureText(str).width;\n      }\n      if (w > maxW) {\n        maxW = w;\n      }\n      count++;\n    }\n    if (o) {\n      o.width = maxW;\n      o.height = count * lineHeight;\n    }\n    if (!paint) {\n      ctx.restore();\n    }\n    return o;\n  };\n\n  /**\n   * @method _drawTextLine\n   * @param {CanvasRenderingContext2D} ctx\n   * @param {String} text\n   * @param {Number} y\n   * @protected\n   **/\n  p._drawTextLine = function (ctx, text, y) {\n    // Chrome 17 will fail to draw the text if the last param is included but null, so we feed it a large value instead:\n    if (this.outline) {\n      ctx.strokeText(text, 0, y, this.maxWidth || 0xFFFF);\n    } else {\n      ctx.fillText(text, 0, y, this.maxWidth || 0xFFFF);\n    }\n  };\n\n  /**\n   * @method _getMeasuredWidth\n   * @param {String} text\n   * @protected\n   **/\n  p._getMeasuredWidth = function (text) {\n    var ctx = Text._workingContext;\n    ctx.save();\n    var w = this._prepContext(ctx).measureText(text).width;\n    ctx.restore();\n    return w;\n  };\n  createjs.Text = createjs.promote(Text, \"DisplayObject\");\n})();\n\n//##############################################################################\n// BitmapText.js\n//##############################################################################\n\n(function () {\n  \"use strict\";\n\n  // constructor:\n  /**\n   * Displays text using bitmap glyphs defined in a sprite sheet. Multi-line text is supported\n   * using new line characters, but automatic wrapping is not supported. See the \n   * {{#crossLink \"BitmapText/spriteSheet:property\"}}{{/crossLink}}\n   * property for more information on defining glyphs.\n   * \n   * <strong>Important:</strong> BitmapText extends Container, but is not designed to be used as one.\n   * As such, methods like addChild and removeChild are disabled.\n   * @class BitmapText\n   * @extends DisplayObject\n   * @param {String} [text=\"\"] The text to display.\n   * @param {SpriteSheet} [spriteSheet=null] The spritesheet that defines the character glyphs.\n   * @constructor\n   **/\n  function BitmapText(text, spriteSheet) {\n    this.Container_constructor();\n\n    // public properties:\n    /**\n     * The text to display.\n     * @property text\n     * @type String\n     * @default \"\"\n     **/\n    this.text = text || \"\";\n\n    /**\n     * A SpriteSheet instance that defines the glyphs for this bitmap text. Each glyph/character\n     * should have a single frame animation defined in the sprite sheet named the same as\n     * corresponding character. For example, the following animation definition:\n     *\n     * \t\t\"A\": {frames: [0]}\n     *\n     * would indicate that the frame at index 0 of the spritesheet should be drawn for the \"A\" character. The short form\n     * is also acceptable:\n     * \n     * \t\t\"A\": 0\n     *\n     * Note that if a character in the text is not found in the sprite sheet, it will also\n     * try to use the alternate case (upper or lower).\n     *\n     * See SpriteSheet for more information on defining sprite sheet data.\n     * @property spriteSheet\n     * @type SpriteSheet\n     * @default null\n     **/\n    this.spriteSheet = spriteSheet;\n\n    /**\n     * The height of each line of text. If 0, then it will use a line height calculated\n     * by checking for the height of the \"1\", \"T\", or \"L\" character (in that order). If\n     * those characters are not defined, it will use the height of the first frame of the\n     * sprite sheet.\n     * @property lineHeight\n     * @type Number\n     * @default 0\n     **/\n    this.lineHeight = 0;\n\n    /**\n     * This spacing (in pixels) will be added after each character in the output.\n     * @property letterSpacing\n     * @type Number\n     * @default 0\n     **/\n    this.letterSpacing = 0;\n\n    /**\n     * If a space character is not defined in the sprite sheet, then empty pixels equal to\n     * spaceWidth will be inserted instead. If 0, then it will use a value calculated\n     * by checking for the width of the \"1\", \"l\", \"E\", or \"A\" character (in that order). If\n     * those characters are not defined, it will use the width of the first frame of the\n     * sprite sheet.\n     * @property spaceWidth\n     * @type Number\n     * @default 0\n     **/\n    this.spaceWidth = 0;\n\n    // private properties:\n    /**\n    * @property _oldProps\n    * @type Object\n    * @protected\n    **/\n    this._oldProps = {\n      text: 0,\n      spriteSheet: 0,\n      lineHeight: 0,\n      letterSpacing: 0,\n      spaceWidth: 0\n    };\n  }\n  var p = createjs.extend(BitmapText, createjs.Container);\n\n  /**\n   * <strong>REMOVED</strong>. Removed in favor of using `MySuperClass_constructor`.\n   * See {{#crossLink \"Utility Methods/extend\"}}{{/crossLink}} and {{#crossLink \"Utility Methods/promote\"}}{{/crossLink}}\n   * for details.\n   *\n   * There is an inheritance tutorial distributed with EaselJS in /tutorials/Inheritance.\n   *\n   * @method initialize\n   * @protected\n   * @deprecated\n   */\n  // p.initialize = function() {}; // searchable for devs wondering where it is.\n\n  // static properties:\n  /**\n   * BitmapText uses Sprite instances to draw text. To reduce the creation and destruction of instances (and thus garbage collection), it maintains\n   * an internal object pool of sprite instances to reuse. Increasing this value can cause more sprites to be\n   * retained, slightly increasing memory use, but reducing instantiation.\n   * @property maxPoolSize\n   * @type Number\n   * @static\n   * @default 100\n   **/\n  BitmapText.maxPoolSize = 100;\n\n  /**\n   * Sprite object pool.\n   * @type {Array}\n   * @static\n   * @private\n   */\n  BitmapText._spritePool = [];\n\n  // public methods:\n  /**\n   * Docced in superclass.\n   **/\n  p.draw = function (ctx, ignoreCache) {\n    if (this.DisplayObject_draw(ctx, ignoreCache)) {\n      return;\n    }\n    this._updateText();\n    this.Container_draw(ctx, ignoreCache);\n  };\n\n  /**\n   * Docced in superclass.\n   **/\n  p.getBounds = function () {\n    this._updateText();\n    return this.Container_getBounds();\n  };\n\n  /**\n   * Returns true or false indicating whether the display object would be visible if drawn to a canvas.\n   * This does not account for whether it would be visible within the boundaries of the stage.\n   * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n   * @method isVisible\n   * @return {Boolean} Boolean indicating whether the display object would be visible if drawn to a canvas\n   **/\n  p.isVisible = function () {\n    var hasContent = this.cacheCanvas || this.spriteSheet && this.spriteSheet.complete && this.text;\n    return !!(this.visible && this.alpha > 0 && this.scaleX !== 0 && this.scaleY !== 0 && hasContent);\n  };\n  p.clone = function () {\n    return this._cloneProps(new BitmapText(this.text, this.spriteSheet));\n  };\n\n  /**\n   * <strong>Disabled in BitmapText.</strong>\n   * @method addChild\n   **/\n  /**\n   * <strong>Disabled in BitmapText.</strong>\n   * @method addChildAt\n   **/\n  /**\n   * <strong>Disabled in BitmapText.</strong>\n   * @method removeChild\n   **/\n  /**\n   * <strong>Disabled in BitmapText.</strong>\n   * @method removeChildAt\n   **/\n  /**\n   * <strong>Disabled in BitmapText.</strong>\n   * @method removeAllChildren\n   **/\n  p.addChild = p.addChildAt = p.removeChild = p.removeChildAt = p.removeAllChildren = function () {};\n\n  // private methods:\n  /**\n  * @method _cloneProps\n  * @param {BitmapText} o\n  * @return {BitmapText} o\n  * @protected\n  **/\n  p._cloneProps = function (o) {\n    this.Container__cloneProps(o);\n    o.lineHeight = this.lineHeight;\n    o.letterSpacing = this.letterSpacing;\n    o.spaceWidth = this.spaceWidth;\n    return o;\n  };\n\n  /**\n   * @method _getFrameIndex\n   * @param {String} character\n   * @param {SpriteSheet} spriteSheet\n   * @return {Number}\n   * @protected\n   **/\n  p._getFrameIndex = function (character, spriteSheet) {\n    var c,\n      o = spriteSheet.getAnimation(character);\n    if (!o) {\n      character != (c = character.toUpperCase()) || character != (c = character.toLowerCase()) || (c = null);\n      if (c) {\n        o = spriteSheet.getAnimation(c);\n      }\n    }\n    return o && o.frames[0];\n  };\n\n  /**\n   * @method _getFrame\n   * @param {String} character\n   * @param {SpriteSheet} spriteSheet\n   * @return {Object}\n   * @protected\n   **/\n  p._getFrame = function (character, spriteSheet) {\n    var index = this._getFrameIndex(character, spriteSheet);\n    return index == null ? index : spriteSheet.getFrame(index);\n  };\n\n  /**\n   * @method _getLineHeight\n   * @param {SpriteSheet} ss\n   * @return {Number}\n   * @protected\n   **/\n  p._getLineHeight = function (ss) {\n    var frame = this._getFrame(\"1\", ss) || this._getFrame(\"T\", ss) || this._getFrame(\"L\", ss) || ss.getFrame(0);\n    return frame ? frame.rect.height : 1;\n  };\n  /**\n   * @method _getSpaceWidth\n   * @param {SpriteSheet} ss\n   * @return {Number}\n   * @protected\n   **/\n  p._getSpaceWidth = function (ss) {\n    var frame = this._getFrame(\"1\", ss) || this._getFrame(\"l\", ss) || this._getFrame(\"e\", ss) || this._getFrame(\"a\", ss) || ss.getFrame(0);\n    return frame ? frame.rect.width : 1;\n  };\n\n  /**\n   * @method _drawText\n   * @protected\n   **/\n  p._updateText = function () {\n    var x = 0,\n      y = 0,\n      o = this._oldProps,\n      change = false,\n      spaceW = this.spaceWidth,\n      lineH = this.lineHeight,\n      ss = this.spriteSheet;\n    var pool = BitmapText._spritePool,\n      kids = this.children,\n      childIndex = 0,\n      numKids = kids.length,\n      sprite;\n    for (var n in o) {\n      if (o[n] != this[n]) {\n        o[n] = this[n];\n        change = true;\n      }\n    }\n    if (!change) {\n      return;\n    }\n    var hasSpace = !!this._getFrame(\" \", ss);\n    if (!hasSpace && !spaceW) {\n      spaceW = this._getSpaceWidth(ss);\n    }\n    if (!lineH) {\n      lineH = this._getLineHeight(ss);\n    }\n    for (var i = 0, l = this.text.length; i < l; i++) {\n      var character = this.text.charAt(i);\n      if (character == \" \" && !hasSpace) {\n        x += spaceW;\n        continue;\n      } else if (character == \"\\n\" || character == \"\\r\") {\n        if (character == \"\\r\" && this.text.charAt(i + 1) == \"\\n\") {\n          i++;\n        } // crlf\n        x = 0;\n        y += lineH;\n        continue;\n      }\n      var index = this._getFrameIndex(character, ss);\n      if (index == null) {\n        continue;\n      }\n      if (childIndex < numKids) {\n        sprite = kids[childIndex];\n      } else {\n        kids.push(sprite = pool.length ? pool.pop() : new createjs.Sprite());\n        sprite.parent = this;\n        numKids++;\n      }\n      sprite.spriteSheet = ss;\n      sprite.gotoAndStop(index);\n      sprite.x = x;\n      sprite.y = y;\n      childIndex++;\n      x += sprite.getBounds().width + this.letterSpacing;\n    }\n    while (numKids > childIndex) {\n      // faster than removeChild.\n      pool.push(sprite = kids.pop());\n      sprite.parent = null;\n      numKids--;\n    }\n    if (pool.length > BitmapText.maxPoolSize) {\n      pool.length = BitmapText.maxPoolSize;\n    }\n  };\n  createjs.BitmapText = createjs.promote(BitmapText, \"Container\");\n})();\n\n//##############################################################################\n// MovieClip.js\n//##############################################################################\n\n(function () {\n  \"use strict\";\n\n  // constructor:\n  /**\n   * The MovieClip class associates a TweenJS Timeline with an EaselJS {{#crossLink \"Container\"}}{{/crossLink}}. It allows\n   * you to create objects which encapsulate timeline animations, state changes, and synched actions. Due to the\n   * complexities inherent in correctly setting up a MovieClip, it is largely intended for tool output and is not included\n   * in the main EaselJS library.\n   *\n   * Currently MovieClip only works properly if it is tick based (as opposed to time based) though some concessions have\n   * been made to support time-based timelines in the future.\n   *\n   * <h4>Example</h4>\n   * This example animates two shapes back and forth. The grey shape starts on the left, but we jump to a mid-point in\n   * the animation using {{#crossLink \"MovieClip/gotoAndPlay\"}}{{/crossLink}}.\n   *\n   *      var stage = new createjs.Stage(\"canvas\");\n   *      createjs.Ticker.addEventListener(\"tick\", stage);\n   *\n   *      var mc = new createjs.MovieClip(null, 0, true, {start:20});\n   *      stage.addChild(mc);\n   *\n   *      var child1 = new createjs.Shape(\n   *          new createjs.Graphics().beginFill(\"#999999\")\n   *              .drawCircle(30,30,30));\n   *      var child2 = new createjs.Shape(\n   *          new createjs.Graphics().beginFill(\"#5a9cfb\")\n   *              .drawCircle(30,30,30));\n   *\n   *      mc.timeline.addTween(\n   *          createjs.Tween.get(child1)\n   *              .to({x:0}).to({x:60}, 50).to({x:0}, 50));\n   *      mc.timeline.addTween(\n   *          createjs.Tween.get(child2)\n   *              .to({x:60}).to({x:0}, 50).to({x:60}, 50));\n   *\n   *      mc.gotoAndPlay(\"start\");\n   *\n   * It is recommended to use <code>tween.to()</code> to animate and set properties (use no duration to have it set\n   * immediately), and the <code>tween.wait()</code> method to create delays between animations. Note that using the\n   * <code>tween.set()</code> method to affect properties will likely not provide the desired result.\n   *\n   * @class MovieClip\n   * @main MovieClip\n   * @extends Container\n   * @constructor\n   * @param {String} [mode=independent] Initial value for the mode property. One of {{#crossLink \"MovieClip/INDEPENDENT:property\"}}{{/crossLink}},\n   * {{#crossLink \"MovieClip/SINGLE_FRAME:property\"}}{{/crossLink}}, or {{#crossLink \"MovieClip/SYNCHED:property\"}}{{/crossLink}}.\n   * The default is {{#crossLink \"MovieClip/INDEPENDENT:property\"}}{{/crossLink}}.\n   * @param {Number} [startPosition=0] Initial value for the {{#crossLink \"MovieClip/startPosition:property\"}}{{/crossLink}}\n   * property.\n   * @param {Boolean} [loop=true] Initial value for the {{#crossLink \"MovieClip/loop:property\"}}{{/crossLink}}\n   * property. The default is `true`.\n   * @param {Object} [labels=null] A hash of labels to pass to the {{#crossLink \"MovieClip/timeline:property\"}}{{/crossLink}}\n   * instance associated with this MovieClip. Labels only need to be passed if they need to be used.\n   **/\n  function MovieClip(mode, startPosition, loop, labels) {\n    this.Container_constructor();\n    !MovieClip.inited && MovieClip.init(); // static init\n\n    // public properties:\n    /**\n     * Controls how this MovieClip advances its time. Must be one of 0 (INDEPENDENT), 1 (SINGLE_FRAME), or 2 (SYNCHED).\n     * See each constant for a description of the behaviour.\n     * @property mode\n     * @type String\n     * @default null\n     **/\n    this.mode = mode || MovieClip.INDEPENDENT;\n\n    /**\n     * Specifies what the first frame to play in this movieclip, or the only frame to display if mode is SINGLE_FRAME.\n     * @property startPosition\n     * @type Number\n     * @default 0\n     */\n    this.startPosition = startPosition || 0;\n\n    /**\n     * Indicates whether this MovieClip should loop when it reaches the end of its timeline.\n     * @property loop\n     * @type Boolean\n     * @default true\n     */\n    this.loop = loop;\n\n    /**\n     * The current frame of the movieclip.\n     * @property currentFrame\n     * @type Number\n     * @default 0\n     * @readonly\n     */\n    this.currentFrame = 0;\n\n    /**\n     * The TweenJS Timeline that is associated with this MovieClip. This is created automatically when the MovieClip\n     * instance is initialized. Animations are created by adding <a href=\"http://tweenjs.com\">TweenJS</a> Tween\n     * instances to the timeline.\n     *\n     * <h4>Example</h4>\n     *\n     *      var tween = createjs.Tween.get(target).to({x:0}).to({x:100}, 30);\n     *      var mc = new createjs.MovieClip();\n     *      mc.timeline.addTween(tween);\n     *\n     * Elements can be added and removed from the timeline by toggling an \"_off\" property\n     * using the <code>tweenInstance.to()</code> method. Note that using <code>Tween.set</code> is not recommended to\n     * create MovieClip animations. The following example will toggle the target off on frame 0, and then back on for\n     * frame 1. You can use the \"visible\" property to achieve the same effect.\n     *\n     *      var tween = createjs.Tween.get(target).to({_off:false})\n     *          .wait(1).to({_off:true})\n     *          .wait(1).to({_off:false});\n     *\n     * @property timeline\n     * @type Timeline\n     * @default null\n     */\n    this.timeline = new createjs.Timeline(null, labels, {\n      paused: true,\n      position: startPosition,\n      useTicks: true\n    });\n\n    /**\n     * If true, the MovieClip's position will not advance when ticked.\n     * @property paused\n     * @type Boolean\n     * @default false\n     */\n    this.paused = false;\n\n    /**\n     * If true, actions in this MovieClip's tweens will be run when the playhead advances.\n     * @property actionsEnabled\n     * @type Boolean\n     * @default true\n     */\n    this.actionsEnabled = true;\n\n    /**\n     * If true, the MovieClip will automatically be reset to its first frame whenever the timeline adds\n     * it back onto the display list. This only applies to MovieClip instances with mode=INDEPENDENT.\n     * <br><br>\n     * For example, if you had a character animation with a \"body\" child MovieClip instance\n     * with different costumes on each frame, you could set body.autoReset = false, so that\n     * you can manually change the frame it is on, without worrying that it will be reset\n     * automatically.\n     * @property autoReset\n     * @type Boolean\n     * @default true\n     */\n    this.autoReset = true;\n\n    /**\n     * An array of bounds for each frame in the MovieClip. This is mainly intended for tool output.\n     * @property frameBounds\n     * @type Array\n     * @default null\n     */\n    this.frameBounds = this.frameBounds || null; // TODO: Deprecated. This is for backwards support of FlashCC\n\n    /**\n     * By default MovieClip instances advance one frame per tick. Specifying a framerate for the MovieClip\n     * will cause it to advance based on elapsed time between ticks as appropriate to maintain the target\n     * framerate.\n     *\n     * For example, if a MovieClip with a framerate of 10 is placed on a Stage being updated at 40fps, then the MovieClip will\n     * advance roughly one frame every 4 ticks. This will not be exact, because the time between each tick will\n     * vary slightly between frames.\n     *\n     * This feature is dependent on the tick event object (or an object with an appropriate \"delta\" property) being\n     * passed into {{#crossLink \"Stage/update\"}}{{/crossLink}}.\n     * @property framerate\n     * @type {Number}\n     * @default null\n     **/\n    this.framerate = null;\n\n    // private properties:\n    /**\n     * @property _synchOffset\n     * @type Number\n     * @default 0\n     * @private\n     */\n    this._synchOffset = 0;\n\n    /**\n     * @property _prevPos\n     * @type Number\n     * @default -1\n     * @private\n     */\n    this._prevPos = -1; // TODO: evaluate using a ._reset Boolean prop instead of -1.\n\n    /**\n     * @property _prevPosition\n     * @type Number\n     * @default 0\n     * @private\n     */\n    this._prevPosition = 0;\n\n    /**\n     * The time remaining from the previous tick, only applicable when .framerate is set.\n     * @property _t\n     * @type Number\n     * @private\n     */\n    this._t = 0;\n\n    /**\n     * List of display objects that are actively being managed by the MovieClip.\n     * @property _managed\n     * @type Object\n     * @private\n     */\n    this._managed = {};\n  }\n  var p = createjs.extend(MovieClip, createjs.Container);\n\n  // constants:\n  /**\n   * The MovieClip will advance independently of its parent, even if its parent is paused.\n   * This is the default mode.\n   * @property INDEPENDENT\n   * @static\n   * @type String\n   * @default \"independent\"\n   * @readonly\n   **/\n  MovieClip.INDEPENDENT = \"independent\";\n\n  /**\n   * The MovieClip will only display a single frame (as determined by the startPosition property).\n   * @property SINGLE_FRAME\n   * @static\n   * @type String\n   * @default \"single\"\n   * @readonly\n   **/\n  MovieClip.SINGLE_FRAME = \"single\";\n\n  /**\n   * The MovieClip will be advanced only when its parent advances and will be synched to the position of\n   * the parent MovieClip.\n   * @property SYNCHED\n   * @static\n   * @type String\n   * @default \"synched\"\n   * @readonly\n   **/\n  MovieClip.SYNCHED = \"synched\";\n\n  // static properties:\n  MovieClip.inited = false;\n\n  // static methods:\n  MovieClip.init = function () {\n    if (MovieClip.inited) {\n      return;\n    }\n    // plugins introduce some overhead to Tween, so we only install this if an MC is instantiated.\n    MovieClipPlugin.install();\n    MovieClip.inited = true;\n  };\n\n  // getter / setters:\n  /**\n   * Use the {{#crossLink \"MovieClip/labels:property\"}}{{/crossLink}} property instead.\n   * @method getLabels\n   * @return {Array}\n   * @deprecated\n   **/\n  p.getLabels = function () {\n    return this.timeline.getLabels();\n  };\n\n  /**\n   * Use the {{#crossLink \"MovieClip/currentLabel:property\"}}{{/crossLink}} property instead.\n   * @method getCurrentLabel\n   * @return {String}\n   * @deprecated\n   **/\n  p.getCurrentLabel = function () {\n    this._updateTimeline();\n    return this.timeline.getCurrentLabel();\n  };\n\n  /**\n   * Use the {{#crossLink \"MovieClip/duration:property\"}}{{/crossLink}} property instead.\n   * @method getDuration\n   * @return {Number}\n   * @protected\n   **/\n  p.getDuration = function () {\n    return this.timeline.duration;\n  };\n\n  /**\n   * Returns an array of objects with label and position (aka frame) properties, sorted by position.\n   * Shortcut to TweenJS: Timeline.getLabels();\n   * @property labels\n   * @type {Array}\n   * @readonly\n   **/\n\n  /**\n   * Returns the name of the label on or immediately before the current frame. See TweenJS: Timeline.getCurrentLabel()\n   * for more information.\n   * @property currentLabel\n   * @type {String}\n   * @readonly\n   **/\n\n  /**\n   * Returns the duration of this MovieClip in seconds or ticks. Identical to {{#crossLink \"MovieClip/duration:property\"}}{{/crossLink}}\n   * and provided for Flash API compatibility.\n   * @property totalFrames\n   * @type {Number}\n   * @readonly\n   **/\n\n  /**\n   * Returns the duration of this MovieClip in seconds or ticks.\n   * @property duration\n   * @type {Number}\n   * @readonly\n   **/\n  try {\n    Object.defineProperties(p, {\n      labels: {\n        get: p.getLabels\n      },\n      currentLabel: {\n        get: p.getCurrentLabel\n      },\n      totalFrames: {\n        get: p.getDuration\n      },\n      duration: {\n        get: p.getDuration\n      }\n    });\n  } catch (e) {}\n\n  // public methods:\n  /**\n   * Constructor alias for backwards compatibility. This method will be removed in future versions.\n   * Subclasses should be updated to use {{#crossLink \"Utility Methods/extends\"}}{{/crossLink}}.\n   * @method initialize\n   * @deprecated in favour of `createjs.promote()`\n   **/\n  p.initialize = MovieClip; // TODO: Deprecated. This is for backwards support of FlashCC\n\n  /**\n   * Returns true or false indicating whether the display object would be visible if drawn to a canvas.\n   * This does not account for whether it would be visible within the boundaries of the stage.\n   * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n   * @method isVisible\n   * @return {Boolean} Boolean indicating whether the display object would be visible if drawn to a canvas\n   **/\n  p.isVisible = function () {\n    // children are placed in draw, so we can't determine if we have content.\n    return !!(this.visible && this.alpha > 0 && this.scaleX != 0 && this.scaleY != 0);\n  };\n\n  /**\n   * Draws the display object into the specified context ignoring its visible, alpha, shadow, and transform.\n   * Returns true if the draw was handled (useful for overriding functionality).\n   * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n   * @method draw\n   * @param {CanvasRenderingContext2D} ctx The canvas 2D context object to draw into.\n   * @param {Boolean} ignoreCache Indicates whether the draw operation should ignore any current cache.\n   * For example, used for drawing the cache (to prevent it from simply drawing an existing cache back\n   * into itself).\n   **/\n  p.draw = function (ctx, ignoreCache) {\n    // draw to cache first:\n    if (this.DisplayObject_draw(ctx, ignoreCache)) {\n      return true;\n    }\n    this._updateTimeline();\n    this.Container_draw(ctx, ignoreCache);\n    return true;\n  };\n\n  /**\n   * Sets paused to false.\n   * @method play\n   **/\n  p.play = function () {\n    this.paused = false;\n  };\n\n  /**\n   * Sets paused to true.\n   * @method stop\n   **/\n  p.stop = function () {\n    this.paused = true;\n  };\n\n  /**\n   * Advances this movie clip to the specified position or label and sets paused to false.\n   * @method gotoAndPlay\n   * @param {String|Number} positionOrLabel The animation name or frame number to go to.\n   **/\n  p.gotoAndPlay = function (positionOrLabel) {\n    this.paused = false;\n    this._goto(positionOrLabel);\n  };\n\n  /**\n   * Advances this movie clip to the specified position or label and sets paused to true.\n   * @method gotoAndStop\n   * @param {String|Number} positionOrLabel The animation or frame name to go to.\n   **/\n  p.gotoAndStop = function (positionOrLabel) {\n    this.paused = true;\n    this._goto(positionOrLabel);\n  };\n\n  /**\n   * Advances the playhead. This occurs automatically each tick by default.\n   * @param [time] {Number} The amount of time in ms to advance by. Only applicable if framerate is set.\n   * @method advance\n  */\n  p.advance = function (time) {\n    // TODO: should we worry at all about clips who change their own modes via frame scripts?\n    var independent = MovieClip.INDEPENDENT;\n    if (this.mode != independent) {\n      return;\n    }\n    var o = this,\n      fps = o.framerate;\n    while ((o = o.parent) && fps == null) {\n      if (o.mode == independent) {\n        fps = o._framerate;\n      }\n    }\n    this._framerate = fps;\n    var t = fps != null && fps != -1 && time != null ? time / (1000 / fps) + this._t : 1;\n    var frames = t | 0;\n    this._t = t - frames; // leftover time\n\n    while (!this.paused && frames--) {\n      this._prevPosition = this._prevPos < 0 ? 0 : this._prevPosition + 1;\n      this._updateTimeline();\n    }\n  };\n\n  /**\n   * MovieClip instances cannot be cloned.\n   * @method clone\n   **/\n  p.clone = function () {\n    // TODO: add support for this? Need to clone the Timeline & retarget tweens - pretty complex.\n    throw \"MovieClip cannot be cloned.\";\n  };\n\n  /**\n   * Returns a string representation of this object.\n   * @method toString\n   * @return {String} a string representation of the instance.\n   **/\n  p.toString = function () {\n    return \"[MovieClip (name=\" + this.name + \")]\";\n  };\n\n  // private methods:\n  /**\n   * @method _tick\n   * @param {Object} evtObj An event object that will be dispatched to all tick listeners. This object is reused between dispatchers to reduce construction & GC costs.\n   * function.\n   * @protected\n   **/\n  p._tick = function (evtObj) {\n    this.advance(evtObj && evtObj.delta);\n    this.Container__tick(evtObj);\n  };\n\n  /**\n   * @method _goto\n   * @param {String|Number} positionOrLabel The animation name or frame number to go to.\n   * @protected\n   **/\n  p._goto = function (positionOrLabel) {\n    var pos = this.timeline.resolve(positionOrLabel);\n    if (pos == null) {\n      return;\n    }\n    // prevent _updateTimeline from overwriting the new position because of a reset:\n    if (this._prevPos == -1) {\n      this._prevPos = NaN;\n    }\n    this._prevPosition = pos;\n    this._t = 0;\n    this._updateTimeline();\n  };\n\n  /**\n   * @method _reset\n   * @private\n   **/\n  p._reset = function () {\n    this._prevPos = -1;\n    this._t = this.currentFrame = 0;\n    this.paused = false;\n  };\n\n  /**\n   * @method _updateTimeline\n   * @protected\n   **/\n  p._updateTimeline = function () {\n    var tl = this.timeline;\n    var synched = this.mode != MovieClip.INDEPENDENT;\n    tl.loop = this.loop == null ? true : this.loop;\n    var pos = synched ? this.startPosition + (this.mode == MovieClip.SINGLE_FRAME ? 0 : this._synchOffset) : this._prevPos < 0 ? 0 : this._prevPosition;\n    var mode = synched || !this.actionsEnabled ? createjs.Tween.NONE : null;\n\n    // pre-assign currentFrame so it is available to frame scripts:\n    this.currentFrame = tl._calcPosition(pos);\n\n    // update timeline position, ignoring actions if this is a graphic.\n    tl.setPosition(pos, mode);\n    this._prevPosition = tl._prevPosition;\n    if (this._prevPos == tl._prevPos) {\n      return;\n    }\n    this.currentFrame = this._prevPos = tl._prevPos;\n    for (var n in this._managed) {\n      this._managed[n] = 1;\n    }\n    var tweens = tl._tweens;\n    for (var i = 0, l = tweens.length; i < l; i++) {\n      var tween = tweens[i];\n      var target = tween._target;\n      if (target == this || tween.passive) {\n        continue;\n      } // TODO: this assumes actions tween has this as the target. Valid?\n      var offset = tween._stepPosition;\n      if (target instanceof createjs.DisplayObject) {\n        // motion tween.\n        this._addManagedChild(target, offset);\n      } else {\n        // state tween.\n        this._setState(target.state, offset);\n      }\n    }\n    var kids = this.children;\n    for (i = kids.length - 1; i >= 0; i--) {\n      var id = kids[i].id;\n      if (this._managed[id] == 1) {\n        this.removeChildAt(i);\n        delete this._managed[id];\n      }\n    }\n  };\n\n  /**\n   * @method _setState\n   * @param {Array} state\n   * @param {Number} offset\n   * @protected\n   **/\n  p._setState = function (state, offset) {\n    if (!state) {\n      return;\n    }\n    for (var i = state.length - 1; i >= 0; i--) {\n      var o = state[i];\n      var target = o.t;\n      var props = o.p;\n      for (var n in props) {\n        target[n] = props[n];\n      }\n      this._addManagedChild(target, offset);\n    }\n  };\n\n  /**\n   * Adds a child to the timeline, and sets it up as a managed child.\n   * @method _addManagedChild\n   * @param {MovieClip} child The child MovieClip to manage\n   * @param {Number} offset\n   * @private\n   **/\n  p._addManagedChild = function (child, offset) {\n    if (child._off) {\n      return;\n    }\n    this.addChildAt(child, 0);\n    if (child instanceof MovieClip) {\n      child._synchOffset = offset;\n      // TODO: this does not precisely match Flash. Flash loses track of the clip if it is renamed or removed from the timeline, which causes it to reset.\n      if (child.mode == MovieClip.INDEPENDENT && child.autoReset && !this._managed[child.id]) {\n        child._reset();\n      }\n    }\n    this._managed[child.id] = 2;\n  };\n\n  /**\n   * @method _getBounds\n   * @param {Matrix2D} matrix\n   * @param {Boolean} ignoreTransform\n   * @return {Rectangle}\n   * @protected\n   **/\n  p._getBounds = function (matrix, ignoreTransform) {\n    var bounds = this.DisplayObject_getBounds();\n    if (!bounds) {\n      this._updateTimeline();\n      if (this.frameBounds) {\n        bounds = this._rectangle.copy(this.frameBounds[this.currentFrame]);\n      }\n    }\n    if (bounds) {\n      return this._transformBounds(bounds, matrix, ignoreTransform);\n    }\n    return this.Container__getBounds(matrix, ignoreTransform);\n  };\n  createjs.MovieClip = createjs.promote(MovieClip, \"Container\");\n\n  // MovieClipPlugin for TweenJS:\n  /**\n   * This plugin works with <a href=\"http://tweenjs.com\" target=\"_blank\">TweenJS</a> to prevent the startPosition\n   * property from tweening.\n   * @private\n   * @class MovieClipPlugin\n   * @constructor\n   **/\n  function MovieClipPlugin() {\n    throw \"MovieClipPlugin cannot be instantiated.\";\n  }\n\n  /**\n   * @method priority\n   * @private\n   **/\n  MovieClipPlugin.priority = 100; // very high priority, should run first\n\n  /**\n   * @method install\n   * @private\n   **/\n  MovieClipPlugin.install = function () {\n    createjs.Tween.installPlugin(MovieClipPlugin, [\"startPosition\"]);\n  };\n\n  /**\n   * @method init\n   * @param {Tween} tween\n   * @param {String} prop\n   * @param {String|Number|Boolean} value\n   * @private\n   **/\n  MovieClipPlugin.init = function (tween, prop, value) {\n    return value;\n  };\n\n  /**\n   * @method step\n   * @private\n   **/\n  MovieClipPlugin.step = function () {\n    // unused.\n  };\n\n  /**\n   * @method tween\n   * @param {Tween} tween\n   * @param {String} prop\n   * @param {String | Number | Boolean} value\n   * @param {Array} startValues\n   * @param {Array} endValues\n   * @param {Number} ratio\n   * @param {Object} wait\n   * @param {Object} end\n   * @return {*}\n   */\n  MovieClipPlugin.tween = function (tween, prop, value, startValues, endValues, ratio, wait, end) {\n    if (!(tween.target instanceof MovieClip)) {\n      return value;\n    }\n    return ratio == 1 ? endValues[prop] : startValues[prop];\n  };\n})();\n\n//##############################################################################\n// SpriteSheetUtils.js\n//##############################################################################\n\n(function () {\n  \"use strict\";\n\n  // constructor:\n  /**\n   * The SpriteSheetUtils class is a collection of static methods for working with {{#crossLink \"SpriteSheet\"}}{{/crossLink}}s.\n   * A sprite sheet is a series of images (usually animation frames) combined into a single image on a regular grid. For\n   * example, an animation consisting of 8 100x100 images could be combined into a 400x200 sprite sheet (4 frames across\n   * by 2 high). The SpriteSheetUtils class uses a static interface and should not be instantiated.\n   * @class SpriteSheetUtils\n   * @static\n   **/\n  function SpriteSheetUtils() {\n    throw \"SpriteSheetUtils cannot be instantiated\";\n  }\n\n  // private static properties:\n  /**\n   * @property _workingCanvas\n   * @static\n   * @type HTMLCanvasElement | Object\n   * @protected\n  */\n  /**\n   * @property _workingContext\n   * @static\n   * @type CanvasRenderingContext2D\n   * @protected\n  */\n  var canvas = createjs.createCanvas ? createjs.createCanvas() : document.createElement(\"canvas\");\n  if (canvas.getContext) {\n    SpriteSheetUtils._workingCanvas = canvas;\n    SpriteSheetUtils._workingContext = canvas.getContext(\"2d\");\n    canvas.width = canvas.height = 1;\n  }\n\n  // public static methods:\n  /**\n   * <b>This is an experimental method, and may be buggy. Please report issues.</b><br/><br/>\n   * Extends the existing sprite sheet by flipping the original frames horizontally, vertically, or both,\n   * and adding appropriate animation & frame data. The flipped animations will have a suffix added to their names\n   * (_h, _v, _hv as appropriate). Make sure the sprite sheet images are fully loaded before using this method.\n   * <br/><br/>\n   * For example:<br/>\n   * SpriteSheetUtils.addFlippedFrames(mySpriteSheet, true, true);\n   * The above would add frames that are flipped horizontally AND frames that are flipped vertically.\n   * <br/><br/>\n   * Note that you can also flip any display object by setting its scaleX or scaleY to a negative value. On some\n   * browsers (especially those without hardware accelerated canvas) this can result in slightly degraded performance,\n   * which is why addFlippedFrames is available.\n   * @method addFlippedFrames\n   * @static\n   * @param {SpriteSheet} spriteSheet\n   * @param {Boolean} horizontal If true, horizontally flipped frames will be added.\n   * @param {Boolean} vertical If true, vertically flipped frames will be added.\n   * @param {Boolean} both If true, frames that are flipped both horizontally and vertically will be added.\n   * @deprecated Modern browsers perform better when flipping via a transform (ex. scaleX=-1) rendering this obsolete.\n   **/\n  SpriteSheetUtils.addFlippedFrames = function (spriteSheet, horizontal, vertical, both) {\n    if (!horizontal && !vertical && !both) {\n      return;\n    }\n    var count = 0;\n    if (horizontal) {\n      SpriteSheetUtils._flip(spriteSheet, ++count, true, false);\n    }\n    if (vertical) {\n      SpriteSheetUtils._flip(spriteSheet, ++count, false, true);\n    }\n    if (both) {\n      SpriteSheetUtils._flip(spriteSheet, ++count, true, true);\n    }\n  };\n\n  /**\n   * Returns a single frame of the specified sprite sheet as a new PNG image. An example of when this may be useful is\n   * to use a spritesheet frame as the source for a bitmap fill.\n   *\n   * <strong>WARNING:</strong> In almost all cases it is better to display a single frame using a {{#crossLink \"Sprite\"}}{{/crossLink}}\n   * with a {{#crossLink \"Sprite/gotoAndStop\"}}{{/crossLink}} call than it is to slice out a frame using this\n   * method and display it with a Bitmap instance. You can also crop an image using the {{#crossLink \"Bitmap/sourceRect\"}}{{/crossLink}}\n   * property of {{#crossLink \"Bitmap\"}}{{/crossLink}}.\n   *\n   * The extractFrame method may cause cross-domain warnings since it accesses pixels directly on the canvas.\n   * @method extractFrame\n   * @static\n   * @param {SpriteSheet} spriteSheet The SpriteSheet instance to extract a frame from.\n   * @param {Number|String} frameOrAnimation The frame number or animation name to extract. If an animation\n   * name is specified, only the first frame of the animation will be extracted.\n   * @return {HTMLImageElement} a single frame of the specified sprite sheet as a new PNG image.\n  */\n  SpriteSheetUtils.extractFrame = function (spriteSheet, frameOrAnimation) {\n    if (isNaN(frameOrAnimation)) {\n      frameOrAnimation = spriteSheet.getAnimation(frameOrAnimation).frames[0];\n    }\n    var data = spriteSheet.getFrame(frameOrAnimation);\n    if (!data) {\n      return null;\n    }\n    var r = data.rect;\n    var canvas = SpriteSheetUtils._workingCanvas;\n    canvas.width = r.width;\n    canvas.height = r.height;\n    SpriteSheetUtils._workingContext.drawImage(data.image, r.x, r.y, r.width, r.height, 0, 0, r.width, r.height);\n    var img = document.createElement(\"img\");\n    img.src = canvas.toDataURL(\"image/png\");\n    return img;\n  };\n\n  /**\n   * Merges the rgb channels of one image with the alpha channel of another. This can be used to combine a compressed\n   * JPEG image containing color data with a PNG32 monochromatic image containing alpha data. With certain types of\n   * images (those with detail that lend itself to JPEG compression) this can provide significant file size savings\n   * versus a single RGBA PNG32. This method is very fast (generally on the order of 1-2 ms to run).\n   * @method mergeAlpha\n   * @static\n   * @param {HTMLImageElement} rbgImage The image (or canvas) containing the RGB channels to use.\n   * @param {HTMLImageElement} alphaImage The image (or canvas) containing the alpha channel to use.\n   * @param {HTMLCanvasElement} canvas Optional. If specified, this canvas will be used and returned. If not, a new canvas will be created.\n   * @return {HTMLCanvasElement} A canvas with the combined image data. This can be used as a source for Bitmap or SpriteSheet.\n   * @deprecated Tools such as ImageAlpha generally provide better results. This will be moved to sandbox in the future.\n  */\n  SpriteSheetUtils.mergeAlpha = function (rgbImage, alphaImage, canvas) {\n    if (!canvas) {\n      canvas = createjs.createCanvas ? createjs.createCanvas() : document.createElement(\"canvas\");\n    }\n    canvas.width = Math.max(alphaImage.width, rgbImage.width);\n    canvas.height = Math.max(alphaImage.height, rgbImage.height);\n    var ctx = canvas.getContext(\"2d\");\n    ctx.save();\n    ctx.drawImage(rgbImage, 0, 0);\n    ctx.globalCompositeOperation = \"destination-in\";\n    ctx.drawImage(alphaImage, 0, 0);\n    ctx.restore();\n    return canvas;\n  };\n\n  // private static methods:\n  SpriteSheetUtils._flip = function (spriteSheet, count, h, v) {\n    var imgs = spriteSheet._images;\n    var canvas = SpriteSheetUtils._workingCanvas;\n    var ctx = SpriteSheetUtils._workingContext;\n    var il = imgs.length / count;\n    for (var i = 0; i < il; i++) {\n      var src = imgs[i];\n      src.__tmp = i; // a bit hacky, but faster than doing indexOf below.\n      ctx.setTransform(1, 0, 0, 1, 0, 0);\n      ctx.clearRect(0, 0, canvas.width + 1, canvas.height + 1);\n      canvas.width = src.width;\n      canvas.height = src.height;\n      ctx.setTransform(h ? -1 : 1, 0, 0, v ? -1 : 1, h ? src.width : 0, v ? src.height : 0);\n      ctx.drawImage(src, 0, 0);\n      var img = document.createElement(\"img\");\n      img.src = canvas.toDataURL(\"image/png\");\n      // work around a strange bug in Safari:\n      img.width = src.width;\n      img.height = src.height;\n      imgs.push(img);\n    }\n    var frames = spriteSheet._frames;\n    var fl = frames.length / count;\n    for (i = 0; i < fl; i++) {\n      src = frames[i];\n      var rect = src.rect.clone();\n      img = imgs[src.image.__tmp + il * count];\n      var frame = {\n        image: img,\n        rect: rect,\n        regX: src.regX,\n        regY: src.regY\n      };\n      if (h) {\n        rect.x = img.width - rect.x - rect.width; // update rect\n        frame.regX = rect.width - src.regX; // update registration point\n      }\n\n      if (v) {\n        rect.y = img.height - rect.y - rect.height; // update rect\n        frame.regY = rect.height - src.regY; // update registration point\n      }\n\n      frames.push(frame);\n    }\n    var sfx = \"_\" + (h ? \"h\" : \"\") + (v ? \"v\" : \"\");\n    var names = spriteSheet._animations;\n    var data = spriteSheet._data;\n    var al = names.length / count;\n    for (i = 0; i < al; i++) {\n      var name = names[i];\n      src = data[name];\n      var anim = {\n        name: name + sfx,\n        speed: src.speed,\n        next: src.next,\n        frames: []\n      };\n      if (src.next) {\n        anim.next += sfx;\n      }\n      frames = src.frames;\n      for (var j = 0, l = frames.length; j < l; j++) {\n        anim.frames.push(frames[j] + fl * count);\n      }\n      data[anim.name] = anim;\n      names.push(anim.name);\n    }\n  };\n  createjs.SpriteSheetUtils = SpriteSheetUtils;\n})();\n\n//##############################################################################\n// SpriteSheetBuilder.js\n//##############################################################################\n\n(function () {\n  \"use strict\";\n\n  // constructor:\n  /**\n   * The SpriteSheetBuilder allows you to generate {{#crossLink \"SpriteSheet\"}}{{/crossLink}} instances at run time\n   * from any display object. This can allow you to maintain your assets as vector graphics (for low file size), and\n   * render them at run time as SpriteSheets for better performance.\n   *\n   * SpriteSheets can be built either synchronously, or asynchronously, so that large SpriteSheets can be generated\n   * without locking the UI.\n   *\n   * Note that the \"images\" used in the generated SpriteSheet are actually canvas elements, and that they will be\n   * sized to the nearest power of 2 up to the value of {{#crossLink \"SpriteSheetBuilder/maxWidth:property\"}}{{/crossLink}}\n   * or {{#crossLink \"SpriteSheetBuilder/maxHeight:property\"}}{{/crossLink}}.\n   * @class SpriteSheetBuilder\n   * @param {Number} [framerate=0] The {{#crossLink \"SpriteSheet/framerate:property\"}}{{/crossLink}} of\n   * {{#crossLink \"SpriteSheet\"}}{{/crossLink}} instances that are created.\n   * @extends EventDispatcher\n   * @constructor\n   **/\n  function SpriteSheetBuilder(framerate) {\n    this.EventDispatcher_constructor();\n\n    // public properties:\n    /**\n     * The maximum width for the images (not individual frames) in the generated SpriteSheet. It is recommended to\n     * use a power of 2 for this value (ex. 1024, 2048, 4096). If the frames cannot all fit within the max\n     * dimensions, then additional images will be created as needed.\n     * @property maxWidth\n     * @type Number\n     * @default 2048\n    */\n    this.maxWidth = 2048;\n\n    /**\n     * The maximum height for the images (not individual frames) in the generated SpriteSheet. It is recommended to\n     * use a power of 2 for this value (ex. 1024, 2048, 4096). If the frames cannot all fit within the max\n     * dimensions, then additional images will be created as needed.\n     * @property maxHeight\n     * @type Number\n     * @default 2048\n     **/\n    this.maxHeight = 2048;\n\n    /**\n     * The SpriteSheet that was generated. This will be null before a build is completed successfully.\n     * @property spriteSheet\n     * @type SpriteSheet\n     **/\n    this.spriteSheet = null;\n\n    /**\n     * The scale to apply when drawing all frames to the SpriteSheet. This is multiplied against any scale specified\n     * in the addFrame call. This can be used, for example, to generate a SpriteSheet at run time that is tailored\n     * to the a specific device resolution (ex. tablet vs mobile).\n     * @property scale\n     * @type Number\n     * @default 1\n     **/\n    this.scale = 1;\n\n    /**\n    * The padding to use between frames. This is helpful to preserve antialiasing on drawn vector content.\n    * @property padding\n    * @type Number\n    * @default 1\n    **/\n    this.padding = 1;\n\n    /**\n     * A number from 0.01 to 0.99 that indicates what percentage of time the builder can use. This can be\n     * thought of as the number of seconds per second the builder will use. For example, with a timeSlice value of 0.3,\n     * the builder will run 20 times per second, using approximately 15ms per build (30% of available time, or 0.3s per second).\n     * Defaults to 0.3.\n     * @property timeSlice\n     * @type Number\n     * @default 0.3\n     **/\n    this.timeSlice = 0.3;\n\n    /**\n     * A value between 0 and 1 that indicates the progress of a build, or -1 if a build has not\n     * been initiated.\n     * @property progress\n     * @type Number\n     * @default -1\n     * @readonly\n     */\n    this.progress = -1;\n\n    /**\n     * A {{#crossLink \"SpriteSheet/framerate:property\"}}{{/crossLink}} value that will be passed to new {{#crossLink \"SpriteSheet\"}}{{/crossLink}} instances that are\n     * created. If no framerate is specified (or it is 0), then SpriteSheets will use the {{#crossLink \"Ticker\"}}{{/crossLink}}\n     * framerate.\n     * @property framerate\n     * @type Number\n     * @default 0\n     */\n    this.framerate = framerate || 0;\n\n    // private properties:\n    /**\n     * @property _frames\n     * @protected\n     * @type Array\n     **/\n    this._frames = [];\n\n    /**\n     * @property _animations\n     * @protected\n     * @type Array\n     **/\n    this._animations = {};\n\n    /**\n     * @property _data\n     * @protected\n     * @type Array\n     **/\n    this._data = null;\n\n    /**\n     * @property _nextFrameIndex\n     * @protected\n     * @type Number\n     **/\n    this._nextFrameIndex = 0;\n\n    /**\n     * @property _index\n     * @protected\n     * @type Number\n     **/\n    this._index = 0;\n\n    /**\n     * @property _timerID\n     * @protected\n     * @type Number\n     **/\n    this._timerID = null;\n\n    /**\n     * @property _scale\n     * @protected\n     * @type Number\n     **/\n    this._scale = 1;\n  }\n  var p = createjs.extend(SpriteSheetBuilder, createjs.EventDispatcher);\n\n  /**\n   * <strong>REMOVED</strong>. Removed in favor of using `MySuperClass_constructor`.\n   * See {{#crossLink \"Utility Methods/extend\"}}{{/crossLink}} and {{#crossLink \"Utility Methods/promote\"}}{{/crossLink}}\n   * for details.\n   *\n   * There is an inheritance tutorial distributed with EaselJS in /tutorials/Inheritance.\n   *\n   * @method initialize\n   * @protected\n   * @deprecated\n   */\n  // p.initialize = function() {}; // searchable for devs wondering where it is.\n\n  // constants:\n  SpriteSheetBuilder.ERR_DIMENSIONS = \"frame dimensions exceed max spritesheet dimensions\";\n  SpriteSheetBuilder.ERR_RUNNING = \"a build is already running\";\n\n  // events:\n  /**\n   * Dispatched when a build completes.\n   * @event complete\n   * @param {Object} target The object that dispatched the event.\n   * @param {String} type The event type.\n   * @since 0.6.0\n   */\n\n  /**\n   * Dispatched when an asynchronous build has progress.\n   * @event progress\n   * @param {Object} target The object that dispatched the event.\n   * @param {String} type The event type.\n   * @param {Number} progress The current progress value (0-1).\n   * @since 0.6.0\n   */\n\n  // public methods:\n  /**\n   * Adds a frame to the {{#crossLink \"SpriteSheet\"}}{{/crossLink}}. Note that the frame will not be drawn until you\n   * call {{#crossLink \"SpriteSheetBuilder/build\"}}{{/crossLink}} method. The optional setup params allow you to have\n   * a function run immediately before the draw occurs. For example, this allows you to add a single source multiple\n   * times, but manipulate it or its children to change it to generate different frames.\n   *\n   * Note that the source's transformations (x, y, scale, rotate, alpha) will be ignored, except for regX/Y. To apply\n   * transforms to a source object and have them captured in the SpriteSheet, simply place it into a {{#crossLink \"Container\"}}{{/crossLink}}\n   * and pass in the Container as the source.\n   * @method addFrame\n   * @param {DisplayObject} source The source {{#crossLink \"DisplayObject\"}}{{/crossLink}}  to draw as the frame.\n   * @param {Rectangle} [sourceRect] A {{#crossLink \"Rectangle\"}}{{/crossLink}} defining the portion of the\n   * source to draw to the frame. If not specified, it will look for a `getBounds` method, bounds property, or\n   * `nominalBounds` property on the source to use. If one is not found, the frame will be skipped.\n   * @param {Number} [scale=1] Optional. The scale to draw this frame at. Default is 1.\n   * @param {Function} [setupFunction] A function to call immediately before drawing this frame. It will be called with two parameters: the source, and setupData.\n   * @param {Object} [setupData] Arbitrary setup data to pass to setupFunction as the second parameter.\n   * @return {Number} The index of the frame that was just added, or null if a sourceRect could not be determined.\n   **/\n  p.addFrame = function (source, sourceRect, scale, setupFunction, setupData) {\n    if (this._data) {\n      throw SpriteSheetBuilder.ERR_RUNNING;\n    }\n    var rect = sourceRect || source.bounds || source.nominalBounds;\n    if (!rect && source.getBounds) {\n      rect = source.getBounds();\n    }\n    if (!rect) {\n      return null;\n    }\n    scale = scale || 1;\n    return this._frames.push({\n      source: source,\n      sourceRect: rect,\n      scale: scale,\n      funct: setupFunction,\n      data: setupData,\n      index: this._frames.length,\n      height: rect.height * scale\n    }) - 1;\n  };\n\n  /**\n   * Adds an animation that will be included in the created {{#crossLink \"SpriteSheet\"}}{{/crossLink}}.\n   * @method addAnimation\n   * @param {String} name The name for the animation.\n   * @param {Array} frames An array of frame indexes that comprise the animation. Ex. [3,6,5] would describe an animation\n   * that played frame indexes 3, 6, and 5 in that order.\n   * @param {String} [next] Specifies the name of the animation to continue to after this animation ends. You can\n   * also pass false to have the animation stop when it ends. By default it will loop to the start of the same animation.\n   * @param {Number} [speed] Specifies a frame advance speed for this animation. For example, a value of 0.5 would\n   * cause the animation to advance every second tick. Note that earlier versions used `frequency` instead, which had\n   * the opposite effect.\n   **/\n  p.addAnimation = function (name, frames, next, speed) {\n    if (this._data) {\n      throw SpriteSheetBuilder.ERR_RUNNING;\n    }\n    this._animations[name] = {\n      frames: frames,\n      next: next,\n      speed: speed\n    };\n  };\n\n  /**\n   * This will take a {{#crossLink \"MovieClip\"}}{{/crossLink}} instance, and add its frames and labels to this\n   * builder. Labels will be added as an animation running from the label index to the next label. For example, if\n   * there is a label named \"foo\" at frame 0 and a label named \"bar\" at frame 10, in a MovieClip with 15 frames, it\n   * will add an animation named \"foo\" that runs from frame index 0 to 9, and an animation named \"bar\" that runs from\n   * frame index 10 to 14.\n   *\n   * Note that this will iterate through the full MovieClip with {{#crossLink \"MovieClip/actionsEnabled:property\"}}{{/crossLink}}\n   * set to `false`, ending on the last frame.\n   * @method addMovieClip\n   * @param {MovieClip} source The source MovieClip instance to add to the SpriteSheet.\n   * @param {Rectangle} [sourceRect] A {{#crossLink \"Rectangle\"}}{{/crossLink}} defining the portion of the source to\n   * draw to the frame. If not specified, it will look for a {{#crossLink \"DisplayObject/getBounds\"}}{{/crossLink}}\n   * method, `frameBounds` Array, `bounds` property, or `nominalBounds` property on the source to use. If one is not\n   * found, the MovieClip will be skipped.\n   * @param {Number} [scale=1] The scale to draw the movie clip at.\n   * @param {Function} [setupFunction] A function to call immediately before drawing each frame. It will be called\n   * with three parameters: the source, setupData, and the frame index.\n   * @param {Object} [setupData] Arbitrary setup data to pass to setupFunction as the second parameter.\n   * @param {Function} [labelFunction] This method will be called for each MovieClip label that is added with four\n   * parameters: the label name, the source MovieClip instance, the starting frame index (in the movieclip timeline)\n   * and the end index. It must return a new name for the label/animation, or `false` to exclude the label.\n   **/\n  p.addMovieClip = function (source, sourceRect, scale, setupFunction, setupData, labelFunction) {\n    if (this._data) {\n      throw SpriteSheetBuilder.ERR_RUNNING;\n    }\n    var rects = source.frameBounds;\n    var rect = sourceRect || source.bounds || source.nominalBounds;\n    if (!rect && source.getBounds) {\n      rect = source.getBounds();\n    }\n    if (!rect && !rects) {\n      return;\n    }\n    var i,\n      l,\n      baseFrameIndex = this._frames.length;\n    var duration = source.timeline.duration;\n    for (i = 0; i < duration; i++) {\n      var r = rects && rects[i] ? rects[i] : rect;\n      this.addFrame(source, r, scale, this._setupMovieClipFrame, {\n        i: i,\n        f: setupFunction,\n        d: setupData\n      });\n    }\n    var labels = source.timeline._labels;\n    var lbls = [];\n    for (var n in labels) {\n      lbls.push({\n        index: labels[n],\n        label: n\n      });\n    }\n    if (lbls.length) {\n      lbls.sort(function (a, b) {\n        return a.index - b.index;\n      });\n      for (i = 0, l = lbls.length; i < l; i++) {\n        var label = lbls[i].label;\n        var start = baseFrameIndex + lbls[i].index;\n        var end = baseFrameIndex + (i == l - 1 ? duration : lbls[i + 1].index);\n        var frames = [];\n        for (var j = start; j < end; j++) {\n          frames.push(j);\n        }\n        if (labelFunction) {\n          label = labelFunction(label, source, start, end);\n          if (!label) {\n            continue;\n          }\n        }\n        this.addAnimation(label, frames, true); // for now, this loops all animations.\n      }\n    }\n  };\n\n  /**\n   * Builds a {{#crossLink \"SpriteSheet\"}}{{/crossLink}} instance based on the current frames.\n   * @method build\n   * @return {SpriteSheet} The created SpriteSheet instance, or null if a build is already running or an error\n   * occurred.\n   **/\n  p.build = function () {\n    if (this._data) {\n      throw SpriteSheetBuilder.ERR_RUNNING;\n    }\n    this._startBuild();\n    while (this._drawNext()) {}\n    this._endBuild();\n    return this.spriteSheet;\n  };\n\n  /**\n   * Asynchronously builds a {{#crossLink \"SpriteSheet\"}}{{/crossLink}} instance based on the current frames. It will\n   * run 20 times per second, using an amount of time defined by `timeSlice`. When it is complete it will call the\n   * specified callback.\n   * @method buildAsync\n   * @param {Number} [timeSlice] Sets the timeSlice property on this instance.\n   **/\n  p.buildAsync = function (timeSlice) {\n    if (this._data) {\n      throw SpriteSheetBuilder.ERR_RUNNING;\n    }\n    this.timeSlice = timeSlice;\n    this._startBuild();\n    var _this = this;\n    this._timerID = setTimeout(function () {\n      _this._run();\n    }, 50 - Math.max(0.01, Math.min(0.99, this.timeSlice || 0.3)) * 50);\n  };\n\n  /**\n   * Stops the current asynchronous build.\n   * @method stopAsync\n   **/\n  p.stopAsync = function () {\n    clearTimeout(this._timerID);\n    this._data = null;\n  };\n\n  /**\n   * SpriteSheetBuilder instances cannot be cloned.\n   * @method clone\n   **/\n  p.clone = function () {\n    throw \"SpriteSheetBuilder cannot be cloned.\";\n  };\n\n  /**\n   * Returns a string representation of this object.\n   * @method toString\n   * @return {String} a string representation of the instance.\n   **/\n  p.toString = function () {\n    return \"[SpriteSheetBuilder]\";\n  };\n\n  // private methods:\n  /**\n   * @method _startBuild\n   * @protected\n   **/\n  p._startBuild = function () {\n    var pad = this.padding || 0;\n    this.progress = 0;\n    this.spriteSheet = null;\n    this._index = 0;\n    this._scale = this.scale;\n    var dataFrames = [];\n    this._data = {\n      images: [],\n      frames: dataFrames,\n      framerate: this.framerate,\n      animations: this._animations // TODO: should we \"clone\" _animations in case someone adds more animations after a build?\n    };\n\n    var frames = this._frames.slice();\n    frames.sort(function (a, b) {\n      return a.height <= b.height ? -1 : 1;\n    });\n    if (frames[frames.length - 1].height + pad * 2 > this.maxHeight) {\n      throw SpriteSheetBuilder.ERR_DIMENSIONS;\n    }\n    var y = 0,\n      x = 0;\n    var img = 0;\n    while (frames.length) {\n      var o = this._fillRow(frames, y, img, dataFrames, pad);\n      if (o.w > x) {\n        x = o.w;\n      }\n      y += o.h;\n      if (!o.h || !frames.length) {\n        var canvas = createjs.createCanvas ? createjs.createCanvas() : document.createElement(\"canvas\");\n        canvas.width = this._getSize(x, this.maxWidth);\n        canvas.height = this._getSize(y, this.maxHeight);\n        this._data.images[img] = canvas;\n        if (!o.h) {\n          x = y = 0;\n          img++;\n        }\n      }\n    }\n  };\n\n  /**\n   * @method _setupMovieClipFrame\n   * @protected\n   * @return {Number} The width & height of the row.\n   **/\n  p._setupMovieClipFrame = function (source, data) {\n    var ae = source.actionsEnabled;\n    source.actionsEnabled = false;\n    source.gotoAndStop(data.i);\n    source.actionsEnabled = ae;\n    data.f && data.f(source, data.d, data.i);\n  };\n\n  /**\n   * @method _getSize\n   * @protected\n   * @return {Number} The width & height of the row.\n   **/\n  p._getSize = function (size, max) {\n    var pow = 4;\n    while (Math.pow(2, ++pow) < size) {}\n    return Math.min(max, Math.pow(2, pow));\n  };\n\n  /**\n   * @method _fillRow\n   * @param {Array} frames\n   * @param {Number} y\n   * @param {HTMLImageElement} img\n   * @param {Object} dataFrames\n   * @param {Number} pad\n   * @protected\n   * @return {Number} The width & height of the row.\n   **/\n  p._fillRow = function (frames, y, img, dataFrames, pad) {\n    var w = this.maxWidth;\n    var maxH = this.maxHeight;\n    y += pad;\n    var h = maxH - y;\n    var x = pad;\n    var height = 0;\n    for (var i = frames.length - 1; i >= 0; i--) {\n      var frame = frames[i];\n      var sc = this._scale * frame.scale;\n      var rect = frame.sourceRect;\n      var source = frame.source;\n      var rx = Math.floor(sc * rect.x - pad);\n      var ry = Math.floor(sc * rect.y - pad);\n      var rh = Math.ceil(sc * rect.height + pad * 2);\n      var rw = Math.ceil(sc * rect.width + pad * 2);\n      if (rw > w) {\n        throw SpriteSheetBuilder.ERR_DIMENSIONS;\n      }\n      if (rh > h || x + rw > w) {\n        continue;\n      }\n      frame.img = img;\n      frame.rect = new createjs.Rectangle(x, y, rw, rh);\n      height = height || rh;\n      frames.splice(i, 1);\n      dataFrames[frame.index] = [x, y, rw, rh, img, Math.round(-rx + sc * source.regX - pad), Math.round(-ry + sc * source.regY - pad)];\n      x += rw;\n    }\n    return {\n      w: x,\n      h: height\n    };\n  };\n\n  /**\n   * @method _endBuild\n   * @protected\n   **/\n  p._endBuild = function () {\n    this.spriteSheet = new createjs.SpriteSheet(this._data);\n    this._data = null;\n    this.progress = 1;\n    this.dispatchEvent(\"complete\");\n  };\n\n  /**\n   * @method _run\n   * @protected\n   **/\n  p._run = function () {\n    var ts = Math.max(0.01, Math.min(0.99, this.timeSlice || 0.3)) * 50;\n    var t = new Date().getTime() + ts;\n    var complete = false;\n    while (t > new Date().getTime()) {\n      if (!this._drawNext()) {\n        complete = true;\n        break;\n      }\n    }\n    if (complete) {\n      this._endBuild();\n    } else {\n      var _this = this;\n      this._timerID = setTimeout(function () {\n        _this._run();\n      }, 50 - ts);\n    }\n    var p = this.progress = this._index / this._frames.length;\n    if (this.hasEventListener(\"progress\")) {\n      var evt = new createjs.Event(\"progress\");\n      evt.progress = p;\n      this.dispatchEvent(evt);\n    }\n  };\n\n  /**\n   * @method _drawNext\n   * @protected\n   * @return Boolean Returns false if this is the last draw.\n   **/\n  p._drawNext = function () {\n    var frame = this._frames[this._index];\n    var sc = frame.scale * this._scale;\n    var rect = frame.rect;\n    var sourceRect = frame.sourceRect;\n    var canvas = this._data.images[frame.img];\n    var ctx = canvas.getContext(\"2d\");\n    frame.funct && frame.funct(frame.source, frame.data);\n    ctx.save();\n    ctx.beginPath();\n    ctx.rect(rect.x, rect.y, rect.width, rect.height);\n    ctx.clip();\n    ctx.translate(Math.ceil(rect.x - sourceRect.x * sc), Math.ceil(rect.y - sourceRect.y * sc));\n    ctx.scale(sc, sc);\n    frame.source.draw(ctx); // display object will draw itself.\n    ctx.restore();\n    return ++this._index < this._frames.length;\n  };\n  createjs.SpriteSheetBuilder = createjs.promote(SpriteSheetBuilder, \"EventDispatcher\");\n})();\n\n//##############################################################################\n// DOMElement.js\n//##############################################################################\n\n(function () {\n  \"use strict\";\n\n  // constructor:\n  /**\n   * <b>This class is still experimental, and more advanced use is likely to be buggy. Please report bugs.</b>\n   *\n   * A DOMElement allows you to associate a HTMLElement with the display list. It will be transformed\n   * within the DOM as though it is child of the {{#crossLink \"Container\"}}{{/crossLink}} it is added to. However, it is\n   * not rendered to canvas, and as such will retain whatever z-index it has relative to the canvas (ie. it will be\n   * drawn in front of or behind the canvas).\n   *\n   * The position of a DOMElement is relative to their parent node in the DOM. It is recommended that\n   * the DOM Object be added to a div that also contains the canvas so that they share the same position\n   * on the page.\n   *\n   * DOMElement is useful for positioning HTML elements over top of canvas content, and for elements\n   * that you want to display outside the bounds of the canvas. For example, a tooltip with rich HTML\n   * content.\n   *\n   * <h4>Mouse Interaction</h4>\n   *\n   * DOMElement instances are not full EaselJS display objects, and do not participate in EaselJS mouse\n   * events or support methods like hitTest. To get mouse events from a DOMElement, you must instead add handlers to\n   * the htmlElement (note, this does not support EventDispatcher)\n   *\n   *      var domElement = new createjs.DOMElement(htmlElement);\n   *      domElement.htmlElement.onclick = function() {\n   *          console.log(\"clicked\");\n   *      }\n   *\n   * @class DOMElement\n   * @extends DisplayObject\n   * @constructor\n   * @param {HTMLElement} htmlElement A reference or id for the DOM element to manage.\n   */\n  function DOMElement(htmlElement) {\n    this.DisplayObject_constructor();\n    if (typeof htmlElement == \"string\") {\n      htmlElement = document.getElementById(htmlElement);\n    }\n    this.mouseEnabled = false;\n    var style = htmlElement.style;\n    style.position = \"absolute\";\n    style.transformOrigin = style.WebkitTransformOrigin = style.msTransformOrigin = style.MozTransformOrigin = style.OTransformOrigin = \"0% 0%\";\n\n    // public properties:\n    /**\n     * The DOM object to manage.\n     * @property htmlElement\n     * @type HTMLElement\n     */\n    this.htmlElement = htmlElement;\n\n    // private properties:\n    /**\n     * @property _oldMtx\n     * @type Matrix2D\n     * @protected\n     */\n    this._oldProps = null;\n  }\n  var p = createjs.extend(DOMElement, createjs.DisplayObject);\n\n  // TODO: deprecated\n  // p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\n\n  // public methods:\n  /**\n   * Returns true or false indicating whether the display object would be visible if drawn to a canvas.\n   * This does not account for whether it would be visible within the boundaries of the stage.\n   * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n   * @method isVisible\n   * @return {Boolean} Boolean indicating whether the display object would be visible if drawn to a canvas\n   */\n  p.isVisible = function () {\n    return this.htmlElement != null;\n  };\n\n  /**\n   * Draws the display object into the specified context ignoring its visible, alpha, shadow, and transform.\n   * Returns true if the draw was handled (useful for overriding functionality).\n   * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n   * @method draw\n   * @param {CanvasRenderingContext2D} ctx The canvas 2D context object to draw into.\n   * @param {Boolean} ignoreCache Indicates whether the draw operation should ignore any current cache.\n   * For example, used for drawing the cache (to prevent it from simply drawing an existing cache back\n   * into itself).\n   * @return {Boolean}\n   */\n  p.draw = function (ctx, ignoreCache) {\n    // this relies on the _tick method because draw isn't called if the parent is not visible.\n    // the actual update happens in _handleDrawEnd\n    return true;\n  };\n\n  /**\n   * Not applicable to DOMElement.\n   * @method cache\n   */\n  p.cache = function () {};\n\n  /**\n   * Not applicable to DOMElement.\n   * @method uncache\n   */\n  p.uncache = function () {};\n\n  /**\n   * Not applicable to DOMElement.\n   * @method updateCache\n   */\n  p.updateCache = function () {};\n\n  /**\n   * Not applicable to DOMElement.\n   * @method hitTest\n   */\n  p.hitTest = function () {};\n\n  /**\n   * Not applicable to DOMElement.\n   * @method localToGlobal\n   */\n  p.localToGlobal = function () {};\n\n  /**\n   * Not applicable to DOMElement.\n   * @method globalToLocal\n   */\n  p.globalToLocal = function () {};\n\n  /**\n   * Not applicable to DOMElement.\n   * @method localToLocal\n   */\n  p.localToLocal = function () {};\n\n  /**\n   * DOMElement cannot be cloned. Throws an error.\n   * @method clone\n   */\n  p.clone = function () {\n    throw \"DOMElement cannot be cloned.\";\n  };\n\n  /**\n   * Returns a string representation of this object.\n   * @method toString\n   * @return {String} a string representation of the instance.\n   */\n  p.toString = function () {\n    return \"[DOMElement (name=\" + this.name + \")]\";\n  };\n\n  /**\n      * Interaction events should be added to `htmlElement`, and not the DOMElement instance, since DOMElement instances\n   * are not full EaselJS display objects and do not participate in EaselJS mouse events.\n   * @event click\n   */\n\n  /**\n  * Interaction events should be added to `htmlElement`, and not the DOMElement instance, since DOMElement instances\n  * are not full EaselJS display objects and do not participate in EaselJS mouse events.\n  * @event dblClick\n  */\n\n  /**\n   * Interaction events should be added to `htmlElement`, and not the DOMElement instance, since DOMElement instances\n  * are not full EaselJS display objects and do not participate in EaselJS mouse events.\n  * @event mousedown\n  */\n\n  /**\n   * The HTMLElement can listen for the mouseover event, not the DOMElement instance.\n   * Since DOMElement instances are not full EaselJS display objects and do not participate in EaselJS mouse events.\n   * @event mouseover\n  */\n\n  /**\n   * Not applicable to DOMElement.\n  * @event tick\n  */\n\n  // private methods:\n  /**\n   * @method _tick\n   * @param {Object} evtObj An event object that will be dispatched to all tick listeners. This object is reused between dispatchers to reduce construction & GC costs.\n   * function.\n   * @protected\n   */\n  p._tick = function (evtObj) {\n    var stage = this.getStage();\n    stage && stage.on(\"drawend\", this._handleDrawEnd, this, true);\n    this.DisplayObject__tick(evtObj);\n  };\n\n  /**\n   * @method _handleDrawEnd\n   * @param {Event} evt\n   * @protected\n   */\n  p._handleDrawEnd = function (evt) {\n    var o = this.htmlElement;\n    if (!o) {\n      return;\n    }\n    var style = o.style;\n    var props = this.getConcatenatedDisplayProps(this._props),\n      mtx = props.matrix;\n    var visibility = props.visible ? \"visible\" : \"hidden\";\n    if (visibility != style.visibility) {\n      style.visibility = visibility;\n    }\n    if (!props.visible) {\n      return;\n    }\n    var oldProps = this._oldProps,\n      oldMtx = oldProps && oldProps.matrix;\n    var n = 10000; // precision\n\n    if (!oldMtx || !oldMtx.equals(mtx)) {\n      var str = \"matrix(\" + (mtx.a * n | 0) / n + \",\" + (mtx.b * n | 0) / n + \",\" + (mtx.c * n | 0) / n + \",\" + (mtx.d * n | 0) / n + \",\" + (mtx.tx + 0.5 | 0);\n      style.transform = style.WebkitTransform = style.OTransform = style.msTransform = str + \",\" + (mtx.ty + 0.5 | 0) + \")\";\n      style.MozTransform = str + \"px,\" + (mtx.ty + 0.5 | 0) + \"px)\";\n      if (!oldProps) {\n        oldProps = this._oldProps = new createjs.DisplayProps(true, NaN);\n      }\n      oldProps.matrix.copy(mtx);\n    }\n    if (oldProps.alpha != props.alpha) {\n      style.opacity = \"\" + (props.alpha * n | 0) / n;\n      oldProps.alpha = props.alpha;\n    }\n  };\n  createjs.DOMElement = createjs.promote(DOMElement, \"DisplayObject\");\n})();\n\n//##############################################################################\n// Filter.js\n//##############################################################################\n\n(function () {\n  \"use strict\";\n\n  // constructor:\n  /**\n   * Base class that all filters should inherit from. Filters need to be applied to objects that have been cached using\n   * the {{#crossLink \"DisplayObject/cache\"}}{{/crossLink}} method. If an object changes, please cache it again, or use\n   * {{#crossLink \"DisplayObject/updateCache\"}}{{/crossLink}}. Note that the filters must be applied before caching.\n   *\n   * <h4>Example</h4>\n   *\n   *      myInstance.filters = [\n   *          new createjs.ColorFilter(0, 0, 0, 1, 255, 0, 0),\n   *          new createjs.BlurFilter(5, 5, 10)\n   *      ];\n   *      myInstance.cache(0,0, 100, 100);\n   *\n   * Note that each filter can implement a {{#crossLink \"Filter/getBounds\"}}{{/crossLink}} method, which returns the\n   * margins that need to be applied in order to fully display the filter. For example, the {{#crossLink \"BlurFilter\"}}{{/crossLink}}\n   * will cause an object to feather outwards, resulting in a margin around the shape.\n   *\n   * <h4>EaselJS Filters</h4>\n   * EaselJS comes with a number of pre-built filters:\n   * <ul><li>{{#crossLink \"AlphaMapFilter\"}}{{/crossLink}} : Map a greyscale image to the alpha channel of a display object</li>\n   *      <li>{{#crossLink \"AlphaMaskFilter\"}}{{/crossLink}}: Map an image's alpha channel to the alpha channel of a display object</li>\n   *      <li>{{#crossLink \"BlurFilter\"}}{{/crossLink}}: Apply vertical and horizontal blur to a display object</li>\n   *      <li>{{#crossLink \"ColorFilter\"}}{{/crossLink}}: Color transform a display object</li>\n   *      <li>{{#crossLink \"ColorMatrixFilter\"}}{{/crossLink}}: Transform an image using a {{#crossLink \"ColorMatrix\"}}{{/crossLink}}</li>\n   * </ul>\n   *\n   * @class Filter\n   * @constructor\n   **/\n  function Filter() {}\n  var p = Filter.prototype;\n\n  /**\n   * <strong>REMOVED</strong>. Removed in favor of using `MySuperClass_constructor`.\n   * See {{#crossLink \"Utility Methods/extend\"}}{{/crossLink}} and {{#crossLink \"Utility Methods/promote\"}}{{/crossLink}}\n   * for details.\n   *\n   * There is an inheritance tutorial distributed with EaselJS in /tutorials/Inheritance.\n   *\n   * @method initialize\n   * @protected\n   * @deprecated\n   */\n  // p.initialize = function() {}; // searchable for devs wondering where it is.\n\n  // public methods:\n  /**\n   * Provides padding values for this filter. That is, how much the filter will extend the visual bounds of an object it is applied to.\n   * @method getBounds\n   * @param {Rectangle} [rect] If specified, the provided Rectangle instance will be expanded by the padding amounts and returned.\n   * @return {Rectangle} If a `rect` param was provided, it is returned. If not, either a new rectangle with the padding values, or null if no padding is required for this filter.\n   **/\n  p.getBounds = function (rect) {\n    return rect;\n  };\n\n  /**\n   * Applies the filter to the specified context.\n   * @method applyFilter\n   * @param {CanvasRenderingContext2D} ctx The 2D context to use as the source.\n   * @param {Number} x The x position to use for the source rect.\n   * @param {Number} y The y position to use for the source rect.\n   * @param {Number} width The width to use for the source rect.\n   * @param {Number} height The height to use for the source rect.\n   * @param {CanvasRenderingContext2D} [targetCtx] The 2D context to draw the result to. Defaults to the context passed to ctx.\n   * @param {Number} [targetX] The x position to draw the result to. Defaults to the value passed to x.\n   * @param {Number} [targetY] The y position to draw the result to. Defaults to the value passed to y.\n   * @return {Boolean} If the filter was applied successfully.\n   **/\n  p.applyFilter = function (ctx, x, y, width, height, targetCtx, targetX, targetY) {\n    // this is the default behaviour because most filters access pixel data. It is overridden when not needed.\n    targetCtx = targetCtx || ctx;\n    if (targetX == null) {\n      targetX = x;\n    }\n    if (targetY == null) {\n      targetY = y;\n    }\n    try {\n      var imageData = ctx.getImageData(x, y, width, height);\n    } catch (e) {\n      return false;\n    }\n    if (this._applyFilter(imageData)) {\n      targetCtx.putImageData(imageData, targetX, targetY);\n      return true;\n    }\n    return false;\n  };\n\n  /**\n   * Returns a string representation of this object.\n   * @method toString\n   * @return {String} a string representation of the instance.\n   **/\n  p.toString = function () {\n    return \"[Filter]\";\n  };\n\n  /**\n   * Returns a clone of this Filter instance.\n   * @method clone\n   * @return {Filter} A clone of the current Filter instance.\n   **/\n  p.clone = function () {\n    return new Filter();\n  };\n\n  // private methods:\n  /**\n   * @method _applyFilter\n   * @param {ImageData} imageData Target ImageData instance.\n   * @return {Boolean}\n   **/\n  p._applyFilter = function (imageData) {\n    return true;\n  };\n  createjs.Filter = Filter;\n})();\n\n//##############################################################################\n// BlurFilter.js\n//##############################################################################\n\n(function () {\n  \"use strict\";\n\n  // constructor:\n  /**\n   * Applies a box blur to DisplayObjects. Note that this filter is fairly CPU intensive, particularly if the quality is\n   * set higher than 1.\n   *\n   * <h4>Example</h4>\n   * This example creates a red circle, and then applies a 5 pixel blur to it. It uses the {{#crossLink \"Filter/getBounds\"}}{{/crossLink}}\n   * method to account for the spread that the blur causes.\n   *\n   *      var shape = new createjs.Shape().set({x:100,y:100});\n   *      shape.graphics.beginFill(\"#ff0000\").drawCircle(0,0,50);\n   *\n   *      var blurFilter = new createjs.BlurFilter(5, 5, 1);\n   *      shape.filters = [blurFilter];\n   *      var bounds = blurFilter.getBounds();\n   *\n   *      shape.cache(-50+bounds.x, -50+bounds.y, 100+bounds.width, 100+bounds.height);\n   *\n   * See {{#crossLink \"Filter\"}}{{/crossLink}} for an more information on applying filters.\n   * @class BlurFilter\n   * @extends Filter\n   * @constructor\n   * @param {Number} [blurX=0] The horizontal blur radius in pixels.\n   * @param {Number} [blurY=0] The vertical blur radius in pixels.\n   * @param {Number} [quality=1] The number of blur iterations.\n   **/\n  function BlurFilter(blurX, blurY, quality) {\n    if (isNaN(blurX) || blurX < 0) blurX = 0;\n    if (isNaN(blurY) || blurY < 0) blurY = 0;\n    if (isNaN(quality) || quality < 1) quality = 1;\n\n    // public properties:\n    /**\n     * Horizontal blur radius in pixels\n     * @property blurX\n     * @default 0\n     * @type Number\n     **/\n    this.blurX = blurX | 0;\n\n    /**\n     * Vertical blur radius in pixels\n     * @property blurY\n     * @default 0\n     * @type Number\n     **/\n    this.blurY = blurY | 0;\n\n    /**\n     * Number of blur iterations. For example, a value of 1 will produce a rough blur. A value of 2 will produce a\n     * smoother blur, but take twice as long to run.\n     * @property quality\n     * @default 1\n     * @type Number\n     **/\n    this.quality = quality | 0;\n  }\n  var p = createjs.extend(BlurFilter, createjs.Filter);\n\n  // TODO: deprecated\n  // p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\n\n  // constants:\n  /**\n   * Array of multiply values for blur calculations.\n   * @property MUL_TABLE\n   * @type Array\n   * @protected\n   * @static\n   **/\n  BlurFilter.MUL_TABLE = [1, 171, 205, 293, 57, 373, 79, 137, 241, 27, 391, 357, 41, 19, 283, 265, 497, 469, 443, 421, 25, 191, 365, 349, 335, 161, 155, 149, 9, 278, 269, 261, 505, 245, 475, 231, 449, 437, 213, 415, 405, 395, 193, 377, 369, 361, 353, 345, 169, 331, 325, 319, 313, 307, 301, 37, 145, 285, 281, 69, 271, 267, 263, 259, 509, 501, 493, 243, 479, 118, 465, 459, 113, 446, 55, 435, 429, 423, 209, 413, 51, 403, 199, 393, 97, 3, 379, 375, 371, 367, 363, 359, 355, 351, 347, 43, 85, 337, 333, 165, 327, 323, 5, 317, 157, 311, 77, 305, 303, 75, 297, 294, 73, 289, 287, 71, 141, 279, 277, 275, 68, 135, 67, 133, 33, 262, 260, 129, 511, 507, 503, 499, 495, 491, 61, 121, 481, 477, 237, 235, 467, 232, 115, 457, 227, 451, 7, 445, 221, 439, 218, 433, 215, 427, 425, 211, 419, 417, 207, 411, 409, 203, 202, 401, 399, 396, 197, 49, 389, 387, 385, 383, 95, 189, 47, 187, 93, 185, 23, 183, 91, 181, 45, 179, 89, 177, 11, 175, 87, 173, 345, 343, 341, 339, 337, 21, 167, 83, 331, 329, 327, 163, 81, 323, 321, 319, 159, 79, 315, 313, 39, 155, 309, 307, 153, 305, 303, 151, 75, 299, 149, 37, 295, 147, 73, 291, 145, 289, 287, 143, 285, 71, 141, 281, 35, 279, 139, 69, 275, 137, 273, 17, 271, 135, 269, 267, 133, 265, 33, 263, 131, 261, 130, 259, 129, 257, 1];\n\n  /**\n   * Array of shift values for blur calculations.\n   * @property SHG_TABLE\n   * @type Array\n   * @protected\n   * @static\n   **/\n  BlurFilter.SHG_TABLE = [0, 9, 10, 11, 9, 12, 10, 11, 12, 9, 13, 13, 10, 9, 13, 13, 14, 14, 14, 14, 10, 13, 14, 14, 14, 13, 13, 13, 9, 14, 14, 14, 15, 14, 15, 14, 15, 15, 14, 15, 15, 15, 14, 15, 15, 15, 15, 15, 14, 15, 15, 15, 15, 15, 15, 12, 14, 15, 15, 13, 15, 15, 15, 15, 16, 16, 16, 15, 16, 14, 16, 16, 14, 16, 13, 16, 16, 16, 15, 16, 13, 16, 15, 16, 14, 9, 16, 16, 16, 16, 16, 16, 16, 16, 16, 13, 14, 16, 16, 15, 16, 16, 10, 16, 15, 16, 14, 16, 16, 14, 16, 16, 14, 16, 16, 14, 15, 16, 16, 16, 14, 15, 14, 15, 13, 16, 16, 15, 17, 17, 17, 17, 17, 17, 14, 15, 17, 17, 16, 16, 17, 16, 15, 17, 16, 17, 11, 17, 16, 17, 16, 17, 16, 17, 17, 16, 17, 17, 16, 17, 17, 16, 16, 17, 17, 17, 16, 14, 17, 17, 17, 17, 15, 16, 14, 16, 15, 16, 13, 16, 15, 16, 14, 16, 15, 16, 12, 16, 15, 16, 17, 17, 17, 17, 17, 13, 16, 15, 17, 17, 17, 16, 15, 17, 17, 17, 16, 15, 17, 17, 14, 16, 17, 17, 16, 17, 17, 16, 15, 17, 16, 14, 17, 16, 15, 17, 16, 17, 17, 16, 17, 15, 16, 17, 14, 17, 16, 15, 17, 16, 17, 13, 17, 16, 17, 17, 16, 17, 14, 17, 16, 17, 16, 17, 16, 17, 9];\n\n  // public methods:\n  /** docced in super class **/\n  p.getBounds = function (rect) {\n    var x = this.blurX | 0,\n      y = this.blurY | 0;\n    if (x <= 0 && y <= 0) {\n      return rect;\n    }\n    var q = Math.pow(this.quality, 0.2);\n    return (rect || new createjs.Rectangle()).pad(x * q + 1, y * q + 1, x * q + 1, y * q + 1);\n  };\n\n  /** docced in super class **/\n  p.clone = function () {\n    return new BlurFilter(this.blurX, this.blurY, this.quality);\n  };\n\n  /** docced in super class **/\n  p.toString = function () {\n    return \"[BlurFilter]\";\n  };\n\n  // private methods:\n\n  /** docced in super class **/\n  p._applyFilter = function (imageData) {\n    var radiusX = this.blurX >> 1;\n    if (isNaN(radiusX) || radiusX < 0) return false;\n    var radiusY = this.blurY >> 1;\n    if (isNaN(radiusY) || radiusY < 0) return false;\n    if (radiusX == 0 && radiusY == 0) return false;\n    var iterations = this.quality;\n    if (isNaN(iterations) || iterations < 1) iterations = 1;\n    iterations |= 0;\n    if (iterations > 3) iterations = 3;\n    if (iterations < 1) iterations = 1;\n    var px = imageData.data;\n    var x = 0,\n      y = 0,\n      i = 0,\n      p = 0,\n      yp = 0,\n      yi = 0,\n      yw = 0,\n      r = 0,\n      g = 0,\n      b = 0,\n      a = 0,\n      pr = 0,\n      pg = 0,\n      pb = 0,\n      pa = 0;\n    var divx = radiusX + radiusX + 1 | 0;\n    var divy = radiusY + radiusY + 1 | 0;\n    var w = imageData.width | 0;\n    var h = imageData.height | 0;\n    var w1 = w - 1 | 0;\n    var h1 = h - 1 | 0;\n    var rxp1 = radiusX + 1 | 0;\n    var ryp1 = radiusY + 1 | 0;\n    var ssx = {\n      r: 0,\n      b: 0,\n      g: 0,\n      a: 0\n    };\n    var sx = ssx;\n    for (i = 1; i < divx; i++) {\n      sx = sx.n = {\n        r: 0,\n        b: 0,\n        g: 0,\n        a: 0\n      };\n    }\n    sx.n = ssx;\n    var ssy = {\n      r: 0,\n      b: 0,\n      g: 0,\n      a: 0\n    };\n    var sy = ssy;\n    for (i = 1; i < divy; i++) {\n      sy = sy.n = {\n        r: 0,\n        b: 0,\n        g: 0,\n        a: 0\n      };\n    }\n    sy.n = ssy;\n    var si = null;\n    var mtx = BlurFilter.MUL_TABLE[radiusX] | 0;\n    var stx = BlurFilter.SHG_TABLE[radiusX] | 0;\n    var mty = BlurFilter.MUL_TABLE[radiusY] | 0;\n    var sty = BlurFilter.SHG_TABLE[radiusY] | 0;\n    while (iterations-- > 0) {\n      yw = yi = 0;\n      var ms = mtx;\n      var ss = stx;\n      for (y = h; --y > -1;) {\n        r = rxp1 * (pr = px[yi | 0]);\n        g = rxp1 * (pg = px[yi + 1 | 0]);\n        b = rxp1 * (pb = px[yi + 2 | 0]);\n        a = rxp1 * (pa = px[yi + 3 | 0]);\n        sx = ssx;\n        for (i = rxp1; --i > -1;) {\n          sx.r = pr;\n          sx.g = pg;\n          sx.b = pb;\n          sx.a = pa;\n          sx = sx.n;\n        }\n        for (i = 1; i < rxp1; i++) {\n          p = yi + ((w1 < i ? w1 : i) << 2) | 0;\n          r += sx.r = px[p];\n          g += sx.g = px[p + 1];\n          b += sx.b = px[p + 2];\n          a += sx.a = px[p + 3];\n          sx = sx.n;\n        }\n        si = ssx;\n        for (x = 0; x < w; x++) {\n          px[yi++] = r * ms >>> ss;\n          px[yi++] = g * ms >>> ss;\n          px[yi++] = b * ms >>> ss;\n          px[yi++] = a * ms >>> ss;\n          p = yw + ((p = x + radiusX + 1) < w1 ? p : w1) << 2;\n          r -= si.r - (si.r = px[p]);\n          g -= si.g - (si.g = px[p + 1]);\n          b -= si.b - (si.b = px[p + 2]);\n          a -= si.a - (si.a = px[p + 3]);\n          si = si.n;\n        }\n        yw += w;\n      }\n      ms = mty;\n      ss = sty;\n      for (x = 0; x < w; x++) {\n        yi = x << 2 | 0;\n        r = ryp1 * (pr = px[yi]) | 0;\n        g = ryp1 * (pg = px[yi + 1 | 0]) | 0;\n        b = ryp1 * (pb = px[yi + 2 | 0]) | 0;\n        a = ryp1 * (pa = px[yi + 3 | 0]) | 0;\n        sy = ssy;\n        for (i = 0; i < ryp1; i++) {\n          sy.r = pr;\n          sy.g = pg;\n          sy.b = pb;\n          sy.a = pa;\n          sy = sy.n;\n        }\n        yp = w;\n        for (i = 1; i <= radiusY; i++) {\n          yi = yp + x << 2;\n          r += sy.r = px[yi];\n          g += sy.g = px[yi + 1];\n          b += sy.b = px[yi + 2];\n          a += sy.a = px[yi + 3];\n          sy = sy.n;\n          if (i < h1) {\n            yp += w;\n          }\n        }\n        yi = x;\n        si = ssy;\n        if (iterations > 0) {\n          for (y = 0; y < h; y++) {\n            p = yi << 2;\n            px[p + 3] = pa = a * ms >>> ss;\n            if (pa > 0) {\n              px[p] = r * ms >>> ss;\n              px[p + 1] = g * ms >>> ss;\n              px[p + 2] = b * ms >>> ss;\n            } else {\n              px[p] = px[p + 1] = px[p + 2] = 0;\n            }\n            p = x + ((p = y + ryp1) < h1 ? p : h1) * w << 2;\n            r -= si.r - (si.r = px[p]);\n            g -= si.g - (si.g = px[p + 1]);\n            b -= si.b - (si.b = px[p + 2]);\n            a -= si.a - (si.a = px[p + 3]);\n            si = si.n;\n            yi += w;\n          }\n        } else {\n          for (y = 0; y < h; y++) {\n            p = yi << 2;\n            px[p + 3] = pa = a * ms >>> ss;\n            if (pa > 0) {\n              pa = 255 / pa;\n              px[p] = (r * ms >>> ss) * pa;\n              px[p + 1] = (g * ms >>> ss) * pa;\n              px[p + 2] = (b * ms >>> ss) * pa;\n            } else {\n              px[p] = px[p + 1] = px[p + 2] = 0;\n            }\n            p = x + ((p = y + ryp1) < h1 ? p : h1) * w << 2;\n            r -= si.r - (si.r = px[p]);\n            g -= si.g - (si.g = px[p + 1]);\n            b -= si.b - (si.b = px[p + 2]);\n            a -= si.a - (si.a = px[p + 3]);\n            si = si.n;\n            yi += w;\n          }\n        }\n      }\n    }\n    return true;\n  };\n  createjs.BlurFilter = createjs.promote(BlurFilter, \"Filter\");\n})();\n\n//##############################################################################\n// AlphaMapFilter.js\n//##############################################################################\n\n(function () {\n  \"use strict\";\n\n  // constructor:\n  /**\n   * Applies a greyscale alpha map image (or canvas) to the target, such that the alpha channel of the result will\n   * be copied from the red channel of the map, and the RGB channels will be copied from the target.\n   *\n   * Generally, it is recommended that you use {{#crossLink \"AlphaMaskFilter\"}}{{/crossLink}}, because it has much\n   * better performance.\n   *\n   * <h4>Example</h4>\n   * This example draws a red->blue box, caches it, and then uses the cache canvas as an alpha map on a 100x100 image.\n   *\n   *       var box = new createjs.Shape();\n   *       box.graphics.beginLinearGradientFill([\"#ff0000\", \"#0000ff\"], [0, 1], 0, 0, 0, 100)\n   *       box.graphics.drawRect(0, 0, 100, 100);\n   *       box.cache(0, 0, 100, 100);\n   *\n   *       var bmp = new createjs.Bitmap(\"path/to/image.jpg\");\n   *       bmp.filters = [\n   *           new createjs.AlphaMapFilter(box.cacheCanvas)\n   *       ];\n   *       bmp.cache(0, 0, 100, 100);\n   *       stage.addChild(bmp);\n   *\n   * See {{#crossLink \"Filter\"}}{{/crossLink}} for more information on applying filters.\n   * @class AlphaMapFilter\n   * @extends Filter\n   * @constructor\n   * @param {HTMLImageElement|HTMLCanvasElement} alphaMap The greyscale image (or canvas) to use as the alpha value for the\n   * result. This should be exactly the same dimensions as the target.\n   **/\n  function AlphaMapFilter(alphaMap) {\n    // public properties:\n    /**\n     * The greyscale image (or canvas) to use as the alpha value for the result. This should be exactly the same\n     * dimensions as the target.\n     * @property alphaMap\n     * @type HTMLImageElement|HTMLCanvasElement\n     **/\n    this.alphaMap = alphaMap;\n\n    // private properties:\n    /**\n     * @property _alphaMap\n     * @protected\n     * @type HTMLImageElement|HTMLCanvasElement\n     **/\n    this._alphaMap = null;\n\n    /**\n     * @property _mapData\n     * @protected\n     * @type Uint8ClampedArray\n     **/\n    this._mapData = null;\n  }\n  var p = createjs.extend(AlphaMapFilter, createjs.Filter);\n\n  // TODO: deprecated\n  // p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\n\n  // public methods:\n  /** docced in super class **/\n  p.clone = function () {\n    var o = new AlphaMapFilter(this.alphaMap);\n    o._alphaMap = this._alphaMap;\n    o._mapData = this._mapData;\n    return o;\n  };\n\n  /** docced in super class **/\n  p.toString = function () {\n    return \"[AlphaMapFilter]\";\n  };\n\n  // private methods:\n  /** docced in super class **/\n  p._applyFilter = function (imageData) {\n    if (!this.alphaMap) {\n      return true;\n    }\n    if (!this._prepAlphaMap()) {\n      return false;\n    }\n\n    // TODO: update to support scenarios where the target has different dimensions.\n    var data = imageData.data;\n    var map = this._mapData;\n    for (var i = 0, l = data.length; i < l; i += 4) {\n      data[i + 3] = map[i] || 0;\n    }\n    return true;\n  };\n\n  /**\n   * @method _prepAlphaMap\n   * @protected\n   **/\n  p._prepAlphaMap = function () {\n    if (!this.alphaMap) {\n      return false;\n    }\n    if (this.alphaMap == this._alphaMap && this._mapData) {\n      return true;\n    }\n    this._mapData = null;\n    var map = this._alphaMap = this.alphaMap;\n    var canvas = map;\n    var ctx;\n    if (map instanceof HTMLCanvasElement) {\n      ctx = canvas.getContext(\"2d\");\n    } else {\n      canvas = createjs.createCanvas ? createjs.createCanvas() : document.createElement(\"canvas\");\n      canvas.width = map.width;\n      canvas.height = map.height;\n      ctx = canvas.getContext(\"2d\");\n      ctx.drawImage(map, 0, 0);\n    }\n    try {\n      var imgData = ctx.getImageData(0, 0, map.width, map.height);\n    } catch (e) {\n      //if (!this.suppressCrossDomainErrors) throw new Error(\"unable to access local image data: \" + e);\n      return false;\n    }\n    this._mapData = imgData.data;\n    return true;\n  };\n  createjs.AlphaMapFilter = createjs.promote(AlphaMapFilter, \"Filter\");\n})();\n\n//##############################################################################\n// AlphaMaskFilter.js\n//##############################################################################\n\n(function () {\n  \"use strict\";\n\n  // constructor:\n  /**\n   * Applies the alpha from the mask image (or canvas) to the target, such that the alpha channel of the result will\n   * be derived from the mask, and the RGB channels will be copied from the target. This can be used, for example, to\n   * apply an alpha mask to a display object. This can also be used to combine a JPG compressed RGB image with a PNG32\n   * alpha mask, which can result in a much smaller file size than a single PNG32 containing ARGB.\n   *\n   * <b>IMPORTANT NOTE: This filter currently does not support the targetCtx, or targetX/Y parameters correctly.</b>\n   *\n   * <h4>Example</h4>\n   * This example draws a gradient box, then caches it and uses the \"cacheCanvas\" as the alpha mask on a 100x100 image.\n   *\n   *      var box = new createjs.Shape();\n   *      box.graphics.beginLinearGradientFill([\"#000000\", \"rgba(0, 0, 0, 0)\"], [0, 1], 0, 0, 100, 100)\n   *      box.graphics.drawRect(0, 0, 100, 100);\n   *      box.cache(0, 0, 100, 100);\n   *\n   *      var bmp = new createjs.Bitmap(\"path/to/image.jpg\");\n   *      bmp.filters = [\n   *          new createjs.AlphaMaskFilter(box.cacheCanvas)\n   *      ];\n   *      bmp.cache(0, 0, 100, 100);\n   *\n   * See {{#crossLink \"Filter\"}}{{/crossLink}} for more information on applying filters.\n   * @class AlphaMaskFilter\n   * @extends Filter\n   * @constructor\n   * @param {HTMLImageElement|HTMLCanvasElement} mask\n   **/\n  function AlphaMaskFilter(mask) {\n    // public properties:\n    /**\n     * The image (or canvas) to use as the mask.\n     * @property mask\n     * @type HTMLImageElement|HTMLCanvasElement\n     **/\n    this.mask = mask;\n  }\n  var p = createjs.extend(AlphaMaskFilter, createjs.Filter);\n\n  // TODO: deprecated\n  // p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\n\n  // public methods:\n  /**\n   * Applies the filter to the specified context.\n   *\n   * <strong>IMPORTANT NOTE: This filter currently does not support the targetCtx, or targetX/Y parameters\n   * correctly.</strong>\n   * @method applyFilter\n   * @param {CanvasRenderingContext2D} ctx The 2D context to use as the source.\n   * @param {Number} x The x position to use for the source rect.\n   * @param {Number} y The y position to use for the source rect.\n   * @param {Number} width The width to use for the source rect.\n   * @param {Number} height The height to use for the source rect.\n   * @param {CanvasRenderingContext2D} [targetCtx] NOT SUPPORTED IN THIS FILTER. The 2D context to draw the result to. Defaults to the context passed to ctx.\n   * @param {Number} [targetX] NOT SUPPORTED IN THIS FILTER. The x position to draw the result to. Defaults to the value passed to x.\n   * @param {Number} [targetY] NOT SUPPORTED IN THIS FILTER. The y position to draw the result to. Defaults to the value passed to y.\n   * @return {Boolean} If the filter was applied successfully.\n   **/\n  p.applyFilter = function (ctx, x, y, width, height, targetCtx, targetX, targetY) {\n    if (!this.mask) {\n      return true;\n    }\n    targetCtx = targetCtx || ctx;\n    if (targetX == null) {\n      targetX = x;\n    }\n    if (targetY == null) {\n      targetY = y;\n    }\n    targetCtx.save();\n    if (ctx != targetCtx) {\n      // TODO: support targetCtx and targetX/Y\n      // clearRect, then draw the ctx in?\n      return false;\n    }\n    targetCtx.globalCompositeOperation = \"destination-in\";\n    targetCtx.drawImage(this.mask, targetX, targetY);\n    targetCtx.restore();\n    return true;\n  };\n\n  /** docced in super class **/\n  p.clone = function () {\n    return new AlphaMaskFilter(this.mask);\n  };\n\n  /** docced in super class **/\n  p.toString = function () {\n    return \"[AlphaMaskFilter]\";\n  };\n  createjs.AlphaMaskFilter = createjs.promote(AlphaMaskFilter, \"Filter\");\n})();\n\n//##############################################################################\n// ColorFilter.js\n//##############################################################################\n\n(function () {\n  \"use strict\";\n\n  // constructor:\n  /**\n   * Applies a color transform to DisplayObjects.\n   *\n   * <h4>Example</h4>\n   * This example draws a red circle, and then transforms it to Blue. This is accomplished by multiplying all the channels\n   * to 0 (except alpha, which is set to 1), and then adding 255 to the blue channel.\n   *\n   *      var shape = new createjs.Shape().set({x:100,y:100});\n   *      shape.graphics.beginFill(\"#ff0000\").drawCircle(0,0,50);\n   *\n   *      shape.filters = [\n   *          new createjs.ColorFilter(0,0,0,1, 0,0,255,0)\n   *      ];\n   *      shape.cache(-50, -50, 100, 100);\n   *\n   * See {{#crossLink \"Filter\"}}{{/crossLink}} for an more information on applying filters.\n   * @class ColorFilter\n   * @param {Number} [redMultiplier=1] The amount to multiply against the red channel. This is a range between 0 and 1.\n   * @param {Number} [greenMultiplier=1] The amount to multiply against the green channel. This is a range between 0 and 1.\n   * @param {Number} [blueMultiplier=1] The amount to multiply against the blue channel. This is a range between 0 and 1.\n   * @param {Number} [alphaMultiplier=1] The amount to multiply against the alpha channel. This is a range between 0 and 1.\n   * @param {Number} [redOffset=0] The amount to add to the red channel after it has been multiplied. This is a range\n   * between -255 and 255.\n   * @param {Number} [greenOffset=0] The amount to add to the green channel after it has been multiplied. This is a range\n    * between -255 and 255.\n   * @param {Number} [blueOffset=0] The amount to add to the blue channel after it has been multiplied. This is a range\n    * between -255 and 255.\n   * @param {Number} [alphaOffset=0] The amount to add to the alpha channel after it has been multiplied. This is a range\n    * between -255 and 255.\n   * @constructor\n   * @extends Filter\n   **/\n  function ColorFilter(redMultiplier, greenMultiplier, blueMultiplier, alphaMultiplier, redOffset, greenOffset, blueOffset, alphaOffset) {\n    // public properties:\n    /**\n     * Red channel multiplier.\n     * @property redMultiplier\n     * @type Number\n     **/\n    this.redMultiplier = redMultiplier != null ? redMultiplier : 1;\n\n    /**\n     * Green channel multiplier.\n     * @property greenMultiplier\n     * @type Number\n     **/\n    this.greenMultiplier = greenMultiplier != null ? greenMultiplier : 1;\n\n    /**\n     * Blue channel multiplier.\n     * @property blueMultiplier\n     * @type Number\n     **/\n    this.blueMultiplier = blueMultiplier != null ? blueMultiplier : 1;\n\n    /**\n     * Alpha channel multiplier.\n     * @property alphaMultiplier\n     * @type Number\n     **/\n    this.alphaMultiplier = alphaMultiplier != null ? alphaMultiplier : 1;\n\n    /**\n     * Red channel offset (added to value).\n     * @property redOffset\n     * @type Number\n     **/\n    this.redOffset = redOffset || 0;\n\n    /**\n     * Green channel offset (added to value).\n     * @property greenOffset\n     * @type Number\n     **/\n    this.greenOffset = greenOffset || 0;\n\n    /**\n     * Blue channel offset (added to value).\n     * @property blueOffset\n     * @type Number\n     **/\n    this.blueOffset = blueOffset || 0;\n\n    /**\n     * Alpha channel offset (added to value).\n     * @property alphaOffset\n     * @type Number\n     **/\n    this.alphaOffset = alphaOffset || 0;\n  }\n  var p = createjs.extend(ColorFilter, createjs.Filter);\n\n  // TODO: deprecated\n  // p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\n\n  // public methods:\n  /** docced in super class **/\n  p.toString = function () {\n    return \"[ColorFilter]\";\n  };\n\n  /** docced in super class **/\n  p.clone = function () {\n    return new ColorFilter(this.redMultiplier, this.greenMultiplier, this.blueMultiplier, this.alphaMultiplier, this.redOffset, this.greenOffset, this.blueOffset, this.alphaOffset);\n  };\n\n  // private methods:\n  /** docced in super class **/\n  p._applyFilter = function (imageData) {\n    var data = imageData.data;\n    var l = data.length;\n    for (var i = 0; i < l; i += 4) {\n      data[i] = data[i] * this.redMultiplier + this.redOffset;\n      data[i + 1] = data[i + 1] * this.greenMultiplier + this.greenOffset;\n      data[i + 2] = data[i + 2] * this.blueMultiplier + this.blueOffset;\n      data[i + 3] = data[i + 3] * this.alphaMultiplier + this.alphaOffset;\n    }\n    return true;\n  };\n  createjs.ColorFilter = createjs.promote(ColorFilter, \"Filter\");\n})();\n\n//##############################################################################\n// ColorMatrix.js\n//##############################################################################\n\n(function () {\n  \"use strict\";\n\n  // constructor:\n  /**\n   * Provides helper functions for assembling a matrix for use with the {{#crossLink \"ColorMatrixFilter\"}}{{/crossLink}}.\n   * Most methods return the instance to facilitate chained calls.\n   *\n   * <h4>Example</h4>\n   *\n   *      myColorMatrix.adjustHue(20).adjustBrightness(50);\n   *\n   * See {{#crossLink \"Filter\"}}{{/crossLink}} for an example of how to apply filters, or {{#crossLink \"ColorMatrixFilter\"}}{{/crossLink}}\n   * for an example of how to use ColorMatrix to change a DisplayObject's color.\n   * @class ColorMatrix\n   * @param {Number} brightness\n   * @param {Number} contrast\n   * @param {Number} saturation\n   * @param {Number} hue\n   * @constructor\n   **/\n  function ColorMatrix(brightness, contrast, saturation, hue) {\n    this.setColor(brightness, contrast, saturation, hue);\n  }\n  var p = ColorMatrix.prototype;\n\n  /**\n   * <strong>REMOVED</strong>. Removed in favor of using `MySuperClass_constructor`.\n   * See {{#crossLink \"Utility Methods/extend\"}}{{/crossLink}} and {{#crossLink \"Utility Methods/promote\"}}{{/crossLink}}\n   * for details.\n   *\n   * There is an inheritance tutorial distributed with EaselJS in /tutorials/Inheritance.\n   *\n   * @method initialize\n   * @protected\n   * @deprecated\n   */\n  // p.initialize = function() {}; // searchable for devs wondering where it is.\n\n  // constants:\n  /**\n   * Array of delta values for contrast calculations.\n   * @property DELTA_INDEX\n   * @type Array\n   * @protected\n   * @static\n   **/\n  ColorMatrix.DELTA_INDEX = [0, 0.01, 0.02, 0.04, 0.05, 0.06, 0.07, 0.08, 0.1, 0.11, 0.12, 0.14, 0.15, 0.16, 0.17, 0.18, 0.20, 0.21, 0.22, 0.24, 0.25, 0.27, 0.28, 0.30, 0.32, 0.34, 0.36, 0.38, 0.40, 0.42, 0.44, 0.46, 0.48, 0.5, 0.53, 0.56, 0.59, 0.62, 0.65, 0.68, 0.71, 0.74, 0.77, 0.80, 0.83, 0.86, 0.89, 0.92, 0.95, 0.98, 1.0, 1.06, 1.12, 1.18, 1.24, 1.30, 1.36, 1.42, 1.48, 1.54, 1.60, 1.66, 1.72, 1.78, 1.84, 1.90, 1.96, 2.0, 2.12, 2.25, 2.37, 2.50, 2.62, 2.75, 2.87, 3.0, 3.2, 3.4, 3.6, 3.8, 4.0, 4.3, 4.7, 4.9, 5.0, 5.5, 6.0, 6.5, 6.8, 7.0, 7.3, 7.5, 7.8, 8.0, 8.4, 8.7, 9.0, 9.4, 9.6, 9.8, 10.0];\n\n  /**\n   * Identity matrix values.\n   * @property IDENTITY_MATRIX\n   * @type Array\n   * @protected\n   * @static\n   **/\n  ColorMatrix.IDENTITY_MATRIX = [1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1];\n\n  /**\n   * The constant length of a color matrix.\n   * @property LENGTH\n   * @type Number\n   * @protected\n   * @static\n   **/\n  ColorMatrix.LENGTH = ColorMatrix.IDENTITY_MATRIX.length;\n\n  // public methods:\n  /**\n   * Resets the instance with the specified values.\n   * @method setColor\n   * @param {Number} brightness\n   * @param {Number} contrast\n   * @param {Number} saturation\n   * @param {Number} hue\n   * @return {ColorMatrix} The ColorMatrix instance the method is called on (useful for chaining calls.)\n   * @chainable\n   */\n  p.setColor = function (brightness, contrast, saturation, hue) {\n    return this.reset().adjustColor(brightness, contrast, saturation, hue);\n  };\n\n  /**\n   * Resets the matrix to identity values.\n   * @method reset\n   * @return {ColorMatrix} The ColorMatrix instance the method is called on (useful for chaining calls.)\n   * @chainable\n   */\n  p.reset = function () {\n    return this.copy(ColorMatrix.IDENTITY_MATRIX);\n  };\n\n  /**\n   * Shortcut method to adjust brightness, contrast, saturation and hue.\n   * Equivalent to calling adjustHue(hue), adjustContrast(contrast),\n   * adjustBrightness(brightness), adjustSaturation(saturation), in that order.\n   * @method adjustColor\n   * @param {Number} brightness\n   * @param {Number} contrast\n   * @param {Number} saturation\n   * @param {Number} hue\n   * @return {ColorMatrix} The ColorMatrix instance the method is called on (useful for chaining calls.)\n   * @chainable\n   **/\n  p.adjustColor = function (brightness, contrast, saturation, hue) {\n    this.adjustHue(hue);\n    this.adjustContrast(contrast);\n    this.adjustBrightness(brightness);\n    return this.adjustSaturation(saturation);\n  };\n\n  /**\n   * Adjusts the brightness of pixel color by adding the specified value to the red, green and blue channels.\n   * Positive values will make the image brighter, negative values will make it darker.\n   * @method adjustBrightness\n   * @param {Number} value A value between -255 & 255 that will be added to the RGB channels.\n   * @return {ColorMatrix} The ColorMatrix instance the method is called on (useful for chaining calls.)\n   * @chainable\n   **/\n  p.adjustBrightness = function (value) {\n    if (value == 0 || isNaN(value)) {\n      return this;\n    }\n    value = this._cleanValue(value, 255);\n    this._multiplyMatrix([1, 0, 0, 0, value, 0, 1, 0, 0, value, 0, 0, 1, 0, value, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1]);\n    return this;\n  };\n\n  /**\n   * Adjusts the contrast of pixel color.\n   * Positive values will increase contrast, negative values will decrease contrast.\n   * @method adjustContrast\n   * @param {Number} value A value between -100 & 100.\n   * @return {ColorMatrix} The ColorMatrix instance the method is called on (useful for chaining calls.)\n   * @chainable\n   **/\n  p.adjustContrast = function (value) {\n    if (value == 0 || isNaN(value)) {\n      return this;\n    }\n    value = this._cleanValue(value, 100);\n    var x;\n    if (value < 0) {\n      x = 127 + value / 100 * 127;\n    } else {\n      x = value % 1;\n      if (x == 0) {\n        x = ColorMatrix.DELTA_INDEX[value];\n      } else {\n        x = ColorMatrix.DELTA_INDEX[value << 0] * (1 - x) + ColorMatrix.DELTA_INDEX[(value << 0) + 1] * x; // use linear interpolation for more granularity.\n      }\n\n      x = x * 127 + 127;\n    }\n    this._multiplyMatrix([x / 127, 0, 0, 0, 0.5 * (127 - x), 0, x / 127, 0, 0, 0.5 * (127 - x), 0, 0, x / 127, 0, 0.5 * (127 - x), 0, 0, 0, 1, 0, 0, 0, 0, 0, 1]);\n    return this;\n  };\n\n  /**\n   * Adjusts the color saturation of the pixel.\n   * Positive values will increase saturation, negative values will decrease saturation (trend towards greyscale).\n   * @method adjustSaturation\n   * @param {Number} value A value between -100 & 100.\n   * @return {ColorMatrix} The ColorMatrix instance the method is called on (useful for chaining calls.)\n   * @chainable\n   **/\n  p.adjustSaturation = function (value) {\n    if (value == 0 || isNaN(value)) {\n      return this;\n    }\n    value = this._cleanValue(value, 100);\n    var x = 1 + (value > 0 ? 3 * value / 100 : value / 100);\n    var lumR = 0.3086;\n    var lumG = 0.6094;\n    var lumB = 0.0820;\n    this._multiplyMatrix([lumR * (1 - x) + x, lumG * (1 - x), lumB * (1 - x), 0, 0, lumR * (1 - x), lumG * (1 - x) + x, lumB * (1 - x), 0, 0, lumR * (1 - x), lumG * (1 - x), lumB * (1 - x) + x, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1]);\n    return this;\n  };\n\n  /**\n   * Adjusts the hue of the pixel color.\n   * @method adjustHue\n   * @param {Number} value A value between -180 & 180.\n   * @return {ColorMatrix} The ColorMatrix instance the method is called on (useful for chaining calls.)\n   * @chainable\n   **/\n  p.adjustHue = function (value) {\n    if (value == 0 || isNaN(value)) {\n      return this;\n    }\n    value = this._cleanValue(value, 180) / 180 * Math.PI;\n    var cosVal = Math.cos(value);\n    var sinVal = Math.sin(value);\n    var lumR = 0.213;\n    var lumG = 0.715;\n    var lumB = 0.072;\n    this._multiplyMatrix([lumR + cosVal * (1 - lumR) + sinVal * -lumR, lumG + cosVal * -lumG + sinVal * -lumG, lumB + cosVal * -lumB + sinVal * (1 - lumB), 0, 0, lumR + cosVal * -lumR + sinVal * 0.143, lumG + cosVal * (1 - lumG) + sinVal * 0.140, lumB + cosVal * -lumB + sinVal * -0.283, 0, 0, lumR + cosVal * -lumR + sinVal * -(1 - lumR), lumG + cosVal * -lumG + sinVal * lumG, lumB + cosVal * (1 - lumB) + sinVal * lumB, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1]);\n    return this;\n  };\n\n  /**\n   * Concatenates (multiplies) the specified matrix with this one.\n   * @method concat\n   * @param {Array} matrix An array or ColorMatrix instance.\n   * @return {ColorMatrix} The ColorMatrix instance the method is called on (useful for chaining calls.)\n   * @chainable\n   **/\n  p.concat = function (matrix) {\n    matrix = this._fixMatrix(matrix);\n    if (matrix.length != ColorMatrix.LENGTH) {\n      return this;\n    }\n    this._multiplyMatrix(matrix);\n    return this;\n  };\n\n  /**\n   * Returns a clone of this ColorMatrix.\n   * @method clone\n   * @return {ColorMatrix} A clone of this ColorMatrix.\n   **/\n  p.clone = function () {\n    return new ColorMatrix().copy(this);\n  };\n\n  /**\n   * Return a length 25 (5x5) array instance containing this matrix's values.\n   * @method toArray\n   * @return {Array} An array holding this matrix's values.\n   **/\n  p.toArray = function () {\n    var arr = [];\n    for (var i = 0, l = ColorMatrix.LENGTH; i < l; i++) {\n      arr[i] = this[i];\n    }\n    return arr;\n  };\n\n  /**\n   * Copy the specified matrix's values to this matrix.\n   * @method copy\n   * @param {Array} matrix An array or ColorMatrix instance.\n   * @return {ColorMatrix} The ColorMatrix instance the method is called on (useful for chaining calls.)\n   * @chainable\n   **/\n  p.copy = function (matrix) {\n    var l = ColorMatrix.LENGTH;\n    for (var i = 0; i < l; i++) {\n      this[i] = matrix[i];\n    }\n    return this;\n  };\n\n  /**\n   * Returns a string representation of this object.\n   * @method toString\n   * @return {String} a string representation of the instance.\n   **/\n  p.toString = function () {\n    return \"[ColorMatrix]\";\n  };\n\n  // private methods:\n  /**\n   * @method _multiplyMatrix\n   * @param {Array} matrix\n   * @protected\n   **/\n  p._multiplyMatrix = function (matrix) {\n    var i,\n      j,\n      k,\n      col = [];\n    for (i = 0; i < 5; i++) {\n      for (j = 0; j < 5; j++) {\n        col[j] = this[j + i * 5];\n      }\n      for (j = 0; j < 5; j++) {\n        var val = 0;\n        for (k = 0; k < 5; k++) {\n          val += matrix[j + k * 5] * col[k];\n        }\n        this[j + i * 5] = val;\n      }\n    }\n  };\n\n  /**\n   * Make sure values are within the specified range, hue has a limit of 180, brightness is 255, others are 100.\n   * @method _cleanValue\n   * @param {Number} value The raw number\n   * @param {Number} limit The maximum that the number can be. The minimum is the limit * -1.\n   * @protected\n   **/\n  p._cleanValue = function (value, limit) {\n    return Math.min(limit, Math.max(-limit, value));\n  };\n\n  /**\n   * Makes sure matrixes are 5x5 (25 long).\n   * @method _fixMatrix\n   * @param {Array} matrix\n   * @protected\n   **/\n  p._fixMatrix = function (matrix) {\n    if (matrix instanceof ColorMatrix) {\n      matrix = matrix.toArray();\n    }\n    if (matrix.length < ColorMatrix.LENGTH) {\n      matrix = matrix.slice(0, matrix.length).concat(ColorMatrix.IDENTITY_MATRIX.slice(matrix.length, ColorMatrix.LENGTH));\n    } else if (matrix.length > ColorMatrix.LENGTH) {\n      matrix = matrix.slice(0, ColorMatrix.LENGTH);\n    }\n    return matrix;\n  };\n  createjs.ColorMatrix = ColorMatrix;\n})();\n\n//##############################################################################\n// ColorMatrixFilter.js\n//##############################################################################\n\n(function () {\n  \"use strict\";\n\n  // constructor:\n  /**\n   * Allows you to carry out complex color operations such as modifying saturation, brightness, or inverting. See the\n   * {{#crossLink \"ColorMatrix\"}}{{/crossLink}} for more information on changing colors. For an easier color transform,\n   * consider the {{#crossLink \"ColorFilter\"}}{{/crossLink}}.\n   *\n   * <h4>Example</h4>\n   * This example creates a red circle, inverts its hue, and then saturates it to brighten it up.\n   *\n   *      var shape = new createjs.Shape().set({x:100,y:100});\n   *      shape.graphics.beginFill(\"#ff0000\").drawCircle(0,0,50);\n   *\n   *      var matrix = new createjs.ColorMatrix().adjustHue(180).adjustSaturation(100);\n   *      shape.filters = [\n   *          new createjs.ColorMatrixFilter(matrix)\n   *      ];\n   *\n   *      shape.cache(-50, -50, 100, 100);\n   *\n   * See {{#crossLink \"Filter\"}}{{/crossLink}} for an more information on applying filters.\n   * @class ColorMatrixFilter\n   * @constructor\n   * @extends Filter\n   * @param {Array | ColorMatrix} matrix A 4x5 matrix describing the color operation to perform. See also the {{#crossLink \"ColorMatrix\"}}{{/crossLink}}\n   * class.\n   **/\n  function ColorMatrixFilter(matrix) {\n    // public properties:\n    /**\n     * A 4x5 matrix describing the color operation to perform. See also the {{#crossLink \"ColorMatrix\"}}{{/crossLink}}\n     * @property matrix\n     * @type Array | ColorMatrix\n     **/\n    this.matrix = matrix;\n  }\n  var p = createjs.extend(ColorMatrixFilter, createjs.Filter);\n\n  // TODO: deprecated\n  // p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\n\n  // public methods:\n  /** docced in super class **/\n  p.toString = function () {\n    return \"[ColorMatrixFilter]\";\n  };\n\n  /** docced in super class **/\n  p.clone = function () {\n    return new ColorMatrixFilter(this.matrix);\n  };\n\n  // private methods:\n  /** docced in super class **/\n  p._applyFilter = function (imageData) {\n    var data = imageData.data;\n    var l = data.length;\n    var r, g, b, a;\n    var mtx = this.matrix;\n    var m0 = mtx[0],\n      m1 = mtx[1],\n      m2 = mtx[2],\n      m3 = mtx[3],\n      m4 = mtx[4];\n    var m5 = mtx[5],\n      m6 = mtx[6],\n      m7 = mtx[7],\n      m8 = mtx[8],\n      m9 = mtx[9];\n    var m10 = mtx[10],\n      m11 = mtx[11],\n      m12 = mtx[12],\n      m13 = mtx[13],\n      m14 = mtx[14];\n    var m15 = mtx[15],\n      m16 = mtx[16],\n      m17 = mtx[17],\n      m18 = mtx[18],\n      m19 = mtx[19];\n    for (var i = 0; i < l; i += 4) {\n      r = data[i];\n      g = data[i + 1];\n      b = data[i + 2];\n      a = data[i + 3];\n      data[i] = r * m0 + g * m1 + b * m2 + a * m3 + m4; // red\n      data[i + 1] = r * m5 + g * m6 + b * m7 + a * m8 + m9; // green\n      data[i + 2] = r * m10 + g * m11 + b * m12 + a * m13 + m14; // blue\n      data[i + 3] = r * m15 + g * m16 + b * m17 + a * m18 + m19; // alpha\n    }\n\n    return true;\n  };\n  createjs.ColorMatrixFilter = createjs.promote(ColorMatrixFilter, \"Filter\");\n})();\n\n//##############################################################################\n// Touch.js\n//##############################################################################\n\n(function () {\n  \"use strict\";\n\n  // constructor:\n  /**\n  * Global utility for working with multi-touch enabled devices in EaselJS. Currently supports W3C Touch API (iOS and\n  * modern Android browser) and the Pointer API (IE), including ms-prefixed events in IE10, and unprefixed in IE11.\n  *\n  * Ensure that you {{#crossLink \"Touch/disable\"}}{{/crossLink}} touch when cleaning up your application. You do not have\n  * to check if touch is supported to enable it, as it will fail gracefully if it is not supported.\n  *\n  * <h4>Example</h4>\n  *\n  *      var stage = new createjs.Stage(\"canvasId\");\n  *      createjs.Touch.enable(stage);\n  *\n  * <strong>Note:</strong> It is important to disable Touch on a stage that you are no longer using:\n  *\n  *      createjs.Touch.disable(stage);\n  *\n  * @class Touch\n  * @static\n  **/\n  function Touch() {\n    throw \"Touch cannot be instantiated\";\n  }\n\n  // public static methods:\n  /**\n   * Returns `true` if touch is supported in the current browser.\n   * @method isSupported\n   * @return {Boolean} Indicates whether touch is supported in the current browser.\n   * @static\n   **/\n  Touch.isSupported = function () {\n    return !!('ontouchstart' in window // iOS & Android\n    || window.navigator['msPointerEnabled'] && window.navigator['msMaxTouchPoints'] > 0 // IE10\n    || window.navigator['pointerEnabled'] && window.navigator['maxTouchPoints'] > 0); // IE11+\n  };\n\n  /**\n   * Enables touch interaction for the specified EaselJS {{#crossLink \"Stage\"}}{{/crossLink}}. Currently supports iOS\n   * (and compatible browsers, such as modern Android browsers), and IE10/11. Supports both single touch and\n   * multi-touch modes. Extends the EaselJS {{#crossLink \"MouseEvent\"}}{{/crossLink}} model, but without support for\n   * double click or over/out events. See the MouseEvent {{#crossLink \"MouseEvent/pointerId:property\"}}{{/crossLink}}\n   * for more information.\n   * @method enable\n   * @param {Stage} stage The {{#crossLink \"Stage\"}}{{/crossLink}} to enable touch on.\n   * @param {Boolean} [singleTouch=false] If `true`, only a single touch will be active at a time.\n   * @param {Boolean} [allowDefault=false] If `true`, then default gesture actions (ex. scrolling, zooming) will be\n   * allowed when the user is interacting with the target canvas.\n   * @return {Boolean} Returns `true` if touch was successfully enabled on the target stage.\n   * @static\n   **/\n  Touch.enable = function (stage, singleTouch, allowDefault) {\n    if (!stage || !stage.canvas || !Touch.isSupported()) {\n      return false;\n    }\n    if (stage.__touch) {\n      return true;\n    }\n\n    // inject required properties on stage:\n    stage.__touch = {\n      pointers: {},\n      multitouch: !singleTouch,\n      preventDefault: !allowDefault,\n      count: 0\n    };\n\n    // note that in the future we may need to disable the standard mouse event model before adding\n    // these to prevent duplicate calls. It doesn't seem to be an issue with iOS devices though.\n    if ('ontouchstart' in window) {\n      Touch._IOS_enable(stage);\n    } else if (window.navigator['msPointerEnabled'] || window.navigator[\"pointerEnabled\"]) {\n      Touch._IE_enable(stage);\n    }\n    return true;\n  };\n\n  /**\n   * Removes all listeners that were set up when calling `Touch.enable()` on a stage.\n   * @method disable\n   * @param {Stage} stage The {{#crossLink \"Stage\"}}{{/crossLink}} to disable touch on.\n   * @static\n   **/\n  Touch.disable = function (stage) {\n    if (!stage) {\n      return;\n    }\n    if ('ontouchstart' in window) {\n      Touch._IOS_disable(stage);\n    } else if (window.navigator['msPointerEnabled'] || window.navigator[\"pointerEnabled\"]) {\n      Touch._IE_disable(stage);\n    }\n    delete stage.__touch;\n  };\n\n  // Private static methods:\n  /**\n   * @method _IOS_enable\n   * @protected\n   * @param {Stage} stage\n   * @static\n   **/\n  Touch._IOS_enable = function (stage) {\n    var canvas = stage.canvas;\n    var f = stage.__touch.f = function (e) {\n      Touch._IOS_handleEvent(stage, e);\n    };\n    canvas.addEventListener(\"touchstart\", f, false);\n    canvas.addEventListener(\"touchmove\", f, false);\n    canvas.addEventListener(\"touchend\", f, false);\n    canvas.addEventListener(\"touchcancel\", f, false);\n  };\n\n  /**\n   * @method _IOS_disable\n   * @protected\n   * @param {Stage} stage\n   * @static\n   **/\n  Touch._IOS_disable = function (stage) {\n    var canvas = stage.canvas;\n    if (!canvas) {\n      return;\n    }\n    var f = stage.__touch.f;\n    canvas.removeEventListener(\"touchstart\", f, false);\n    canvas.removeEventListener(\"touchmove\", f, false);\n    canvas.removeEventListener(\"touchend\", f, false);\n    canvas.removeEventListener(\"touchcancel\", f, false);\n  };\n\n  /**\n   * @method _IOS_handleEvent\n   * @param {Stage} stage\n   * @param {Object} e The event to handle\n   * @protected\n   * @static\n   **/\n  Touch._IOS_handleEvent = function (stage, e) {\n    if (!stage) {\n      return;\n    }\n    if (stage.__touch.preventDefault) {\n      e.preventDefault && e.preventDefault();\n    }\n    var touches = e.changedTouches;\n    var type = e.type;\n    for (var i = 0, l = touches.length; i < l; i++) {\n      var touch = touches[i];\n      var id = touch.identifier;\n      if (touch.target != stage.canvas) {\n        continue;\n      }\n      if (type == \"touchstart\") {\n        this._handleStart(stage, id, e, touch.pageX, touch.pageY);\n      } else if (type == \"touchmove\") {\n        this._handleMove(stage, id, e, touch.pageX, touch.pageY);\n      } else if (type == \"touchend\" || type == \"touchcancel\") {\n        this._handleEnd(stage, id, e);\n      }\n    }\n  };\n\n  /**\n   * @method _IE_enable\n   * @protected\n   * @param {Stage} stage\n   * @static\n   **/\n  Touch._IE_enable = function (stage) {\n    var canvas = stage.canvas;\n    var f = stage.__touch.f = function (e) {\n      Touch._IE_handleEvent(stage, e);\n    };\n    if (window.navigator[\"pointerEnabled\"] === undefined) {\n      canvas.addEventListener(\"MSPointerDown\", f, false);\n      window.addEventListener(\"MSPointerMove\", f, false);\n      window.addEventListener(\"MSPointerUp\", f, false);\n      window.addEventListener(\"MSPointerCancel\", f, false);\n      if (stage.__touch.preventDefault) {\n        canvas.style.msTouchAction = \"none\";\n      }\n    } else {\n      canvas.addEventListener(\"pointerdown\", f, false);\n      window.addEventListener(\"pointermove\", f, false);\n      window.addEventListener(\"pointerup\", f, false);\n      window.addEventListener(\"pointercancel\", f, false);\n      if (stage.__touch.preventDefault) {\n        canvas.style.touchAction = \"none\";\n      }\n    }\n    stage.__touch.activeIDs = {};\n  };\n\n  /**\n   * @method _IE_disable\n   * @protected\n   * @param {Stage} stage\n   * @static\n   **/\n  Touch._IE_disable = function (stage) {\n    var f = stage.__touch.f;\n    if (window.navigator[\"pointerEnabled\"] === undefined) {\n      window.removeEventListener(\"MSPointerMove\", f, false);\n      window.removeEventListener(\"MSPointerUp\", f, false);\n      window.removeEventListener(\"MSPointerCancel\", f, false);\n      if (stage.canvas) {\n        stage.canvas.removeEventListener(\"MSPointerDown\", f, false);\n      }\n    } else {\n      window.removeEventListener(\"pointermove\", f, false);\n      window.removeEventListener(\"pointerup\", f, false);\n      window.removeEventListener(\"pointercancel\", f, false);\n      if (stage.canvas) {\n        stage.canvas.removeEventListener(\"pointerdown\", f, false);\n      }\n    }\n  };\n\n  /**\n   * @method _IE_handleEvent\n   * @param {Stage} stage\n   * @param {Object} e The event to handle.\n   * @protected\n   * @static\n   **/\n  Touch._IE_handleEvent = function (stage, e) {\n    if (!stage) {\n      return;\n    }\n    if (stage.__touch.preventDefault) {\n      e.preventDefault && e.preventDefault();\n    }\n    var type = e.type;\n    var id = e.pointerId;\n    var ids = stage.__touch.activeIDs;\n    if (type == \"MSPointerDown\" || type == \"pointerdown\") {\n      if (e.srcElement != stage.canvas) {\n        return;\n      }\n      ids[id] = true;\n      this._handleStart(stage, id, e, e.pageX, e.pageY);\n    } else if (ids[id]) {\n      // it's an id we're watching\n      if (type == \"MSPointerMove\" || type == \"pointermove\") {\n        this._handleMove(stage, id, e, e.pageX, e.pageY);\n      } else if (type == \"MSPointerUp\" || type == \"MSPointerCancel\" || type == \"pointerup\" || type == \"pointercancel\") {\n        delete ids[id];\n        this._handleEnd(stage, id, e);\n      }\n    }\n  };\n\n  /**\n   * @method _handleStart\n   * @param {Stage} stage\n   * @param {String|Number} id\n   * @param {Object} e\n   * @param {Number} x\n   * @param {Number} y\n   * @protected\n   **/\n  Touch._handleStart = function (stage, id, e, x, y) {\n    var props = stage.__touch;\n    if (!props.multitouch && props.count) {\n      return;\n    }\n    var ids = props.pointers;\n    if (ids[id]) {\n      return;\n    }\n    ids[id] = true;\n    props.count++;\n    stage._handlePointerDown(id, e, x, y);\n  };\n\n  /**\n   * @method _handleMove\n   * @param {Stage} stage\n   * @param {String|Number} id\n   * @param {Object} e\n   * @param {Number} x\n   * @param {Number} y\n   * @protected\n   **/\n  Touch._handleMove = function (stage, id, e, x, y) {\n    if (!stage.__touch.pointers[id]) {\n      return;\n    }\n    stage._handlePointerMove(id, e, x, y);\n  };\n\n  /**\n   * @method _handleEnd\n   * @param {Stage} stage\n   * @param {String|Number} id\n   * @param {Object} e\n   * @protected\n   **/\n  Touch._handleEnd = function (stage, id, e) {\n    // TODO: cancel should be handled differently for proper UI (ex. an up would trigger a click, a cancel would more closely resemble an out).\n    var props = stage.__touch;\n    var ids = props.pointers;\n    if (!ids[id]) {\n      return;\n    }\n    props.count--;\n    stage._handlePointerUp(id, e, true);\n    delete ids[id];\n  };\n  createjs.Touch = Touch;\n})();\n\n//##############################################################################\n// version.js\n//##############################################################################\n\n(function () {\n  \"use strict\";\n\n  /**\n   * Static class holding library specific information such as the version and buildDate of\n   * the library.\n   * @class EaselJS\n   **/\n  var s = createjs.EaselJS = createjs.EaselJS || {};\n\n  /**\n   * The version string for this release.\n   * @property version\n   * @type String\n   * @static\n   **/\n  s.version = /*=version*/\"0.8.2\"; // injected by build process\n\n  /**\n   * The build date for this release in UTC format.\n   * @property buildDate\n   * @type String\n   * @static\n   **/\n  s.buildDate = /*=date*/\"Thu, 26 Nov 2015 20:44:34 GMT\"; // injected by build process\n})();\n\n//##############################################################################\n// version.js\n//##############################################################################\n\n(function () {\n  \"use strict\";\n\n  /**\n   * Static class holding library specific information such as the version and buildDate of the library.\n   * @class PreloadJS\n   **/\n  var s = createjs.PreloadJS = createjs.PreloadJS || {};\n\n  /**\n   * The version string for this release.\n   * @property version\n   * @type {String}\n   * @static\n   **/\n  s.version = /*=version*/\"0.6.2\"; // injected by build process\n\n  /**\n   * The build date for this release in UTC format.\n   * @property buildDate\n   * @type {String}\n   * @static\n   **/\n  s.buildDate = /*=date*/\"Thu, 26 Nov 2015 20:44:31 GMT\"; // injected by build process\n})();\n\n//##############################################################################\n// proxy.js\n//##############################################################################\n\n/**\n * Various utilities that the CreateJS Suite uses. Utilities are created as separate files, and will be available on the\n * createjs namespace directly.\n *\n * <h4>Example</h4>\n *\n *      myObject.addEventListener(\"change\", createjs.proxy(myMethod, scope));\n *\n * @class Utility Methods\n * @main Utility Methods\n */\n\n(function () {\n  \"use strict\";\n\n  /**\n   * A function proxy for methods. By default, JavaScript methods do not maintain scope, so passing a method as a\n   * callback will result in the method getting called in the scope of the caller. Using a proxy ensures that the\n   * method gets called in the correct scope.\n   *\n   * Additional arguments can be passed that will be applied to the function when it is called.\n   *\n   * <h4>Example</h4>\n   *\n   *      myObject.addEventListener(\"event\", createjs.proxy(myHandler, this, arg1, arg2));\n   *\n   *      function myHandler(arg1, arg2) {\n   *           // This gets called when myObject.myCallback is executed.\n   *      }\n   *\n   * @method proxy\n   * @param {Function} method The function to call\n   * @param {Object} scope The scope to call the method name on\n   * @param {mixed} [arg] * Arguments that are appended to the callback for additional params.\n   * @public\n   * @static\n   */\n  createjs.proxy = function (method, scope) {\n    var aArgs = Array.prototype.slice.call(arguments, 2);\n    return function () {\n      return method.apply(scope, Array.prototype.slice.call(arguments, 0).concat(aArgs));\n    };\n  };\n})();\n\n//##############################################################################\n// ErrorEvent.js\n//##############################################################################\n\n(function () {\n  \"use strict\";\n\n  /**\n   * A general error {{#crossLink \"Event\"}}{{/crossLink}}, that describes an error that occurred, as well as any details.\n   * @class ErrorEvent\n   * @param {String} [title] The error title\n   * @param {String} [message] The error description\n   * @param {Object} [data] Additional error data\n   * @constructor\n   */\n  function ErrorEvent(title, message, data) {\n    this.Event_constructor(\"error\");\n\n    /**\n     * The short error title, which indicates the type of error that occurred.\n     * @property title\n     * @type String\n     */\n    this.title = title;\n\n    /**\n     * The verbose error message, containing details about the error.\n     * @property message\n     * @type String\n     */\n    this.message = message;\n\n    /**\n     * Additional data attached to an error.\n     * @property data\n     * @type {Object}\n     */\n    this.data = data;\n  }\n  var p = createjs.extend(ErrorEvent, createjs.Event);\n  p.clone = function () {\n    return new createjs.ErrorEvent(this.title, this.message, this.data);\n  };\n  createjs.ErrorEvent = createjs.promote(ErrorEvent, \"Event\");\n})();\n\n//##############################################################################\n// ProgressEvent.js\n//##############################################################################\n\n(function (scope) {\n  \"use strict\";\n\n  // constructor\n  /**\n   * A CreateJS {{#crossLink \"Event\"}}{{/crossLink}} that is dispatched when progress changes.\n   * @class ProgressEvent\n   * @param {Number} loaded The amount that has been loaded. This can be any number relative to the total.\n   * @param {Number} [total=1] The total amount that will load. This will default to 1, so if the `loaded` value is\n   * a percentage (between 0 and 1), it can be omitted.\n   * @todo Consider having this event be a \"fileprogress\" event as well\n   * @constructor\n   */\n  function ProgressEvent(loaded, total) {\n    this.Event_constructor(\"progress\");\n\n    /**\n     * The amount that has been loaded (out of a total amount)\n     * @property loaded\n     * @type {Number}\n     */\n    this.loaded = loaded;\n\n    /**\n     * The total \"size\" of the load.\n     * @property total\n     * @type {Number}\n     * @default 1\n     */\n    this.total = total == null ? 1 : total;\n\n    /**\n     * The percentage (out of 1) that the load has been completed. This is calculated using `loaded/total`.\n     * @property progress\n     * @type {Number}\n     * @default 0\n     */\n    this.progress = total == 0 ? 0 : this.loaded / this.total;\n  }\n  ;\n  var p = createjs.extend(ProgressEvent, createjs.Event);\n\n  /**\n   * Returns a clone of the ProgressEvent instance.\n   * @method clone\n   * @return {ProgressEvent} a clone of the Event instance.\n   **/\n  p.clone = function () {\n    return new createjs.ProgressEvent(this.loaded, this.total);\n  };\n  createjs.ProgressEvent = createjs.promote(ProgressEvent, \"Event\");\n})(window);\n\n//##############################################################################\n// json3.js\n//##############################################################################\n\n/*! JSON v3.3.2 | http://bestiejs.github.io/json3 | Copyright 2012-2014, Kit Cambridge | http://kit.mit-license.org */\n;\n(function () {\n  // Detect the `define` function exposed by asynchronous module loaders. The\n  // strict `define` check is necessary for compatibility with `r.js`.\n  var isLoader = typeof define === \"function\" && define.amd;\n\n  // A set of types used to distinguish objects from primitives.\n  var objectTypes = {\n    \"function\": true,\n    \"object\": true\n  };\n\n  // Detect the `exports` object exposed by CommonJS implementations.\n  var freeExports = objectTypes[typeof exports] && exports && !exports.nodeType && exports;\n\n  // Use the `global` object exposed by Node (including Browserify via\n  // `insert-module-globals`), Narwhal, and Ringo as the default context,\n  // and the `window` object in browsers. Rhino exports a `global` function\n  // instead.\n  var root = objectTypes[typeof window] && window || this,\n    freeGlobal = freeExports && objectTypes[typeof module] && module && !module.nodeType && typeof global == \"object\" && global;\n  if (freeGlobal && (freeGlobal[\"global\"] === freeGlobal || freeGlobal[\"window\"] === freeGlobal || freeGlobal[\"self\"] === freeGlobal)) {\n    root = freeGlobal;\n  }\n\n  // Public: Initializes JSON 3 using the given `context` object, attaching the\n  // `stringify` and `parse` functions to the specified `exports` object.\n  function runInContext(context, exports) {\n    context || (context = root[\"Object\"]());\n    exports || (exports = root[\"Object\"]());\n\n    // Native constructor aliases.\n    var Number = context[\"Number\"] || root[\"Number\"],\n      String = context[\"String\"] || root[\"String\"],\n      Object = context[\"Object\"] || root[\"Object\"],\n      Date = context[\"Date\"] || root[\"Date\"],\n      SyntaxError = context[\"SyntaxError\"] || root[\"SyntaxError\"],\n      TypeError = context[\"TypeError\"] || root[\"TypeError\"],\n      Math = context[\"Math\"] || root[\"Math\"],\n      nativeJSON = context[\"JSON\"] || root[\"JSON\"];\n\n    // Delegate to the native `stringify` and `parse` implementations.\n    if (typeof nativeJSON == \"object\" && nativeJSON) {\n      exports.stringify = nativeJSON.stringify;\n      exports.parse = nativeJSON.parse;\n    }\n\n    // Convenience aliases.\n    var objectProto = Object.prototype,\n      getClass = objectProto.toString,\n      isProperty,\n      forEach,\n      undef;\n\n    // Test the `Date#getUTC*` methods. Based on work by @Yaffle.\n    var isExtended = new Date(-3509827334573292);\n    try {\n      // The `getUTCFullYear`, `Month`, and `Date` methods return nonsensical\n      // results for certain dates in Opera >= 10.53.\n      isExtended = isExtended.getUTCFullYear() == -109252 && isExtended.getUTCMonth() === 0 && isExtended.getUTCDate() === 1 &&\n      // Safari < 2.0.2 stores the internal millisecond time value correctly,\n      // but clips the values returned by the date methods to the range of\n      // signed 32-bit integers ([-2 ** 31, 2 ** 31 - 1]).\n      isExtended.getUTCHours() == 10 && isExtended.getUTCMinutes() == 37 && isExtended.getUTCSeconds() == 6 && isExtended.getUTCMilliseconds() == 708;\n    } catch (exception) {}\n\n    // Internal: Determines whether the native `JSON.stringify` and `parse`\n    // implementations are spec-compliant. Based on work by Ken Snyder.\n    function has(name) {\n      if (has[name] !== undef) {\n        // Return cached feature test result.\n        return has[name];\n      }\n      var isSupported;\n      if (name == \"bug-string-char-index\") {\n        // IE <= 7 doesn't support accessing string characters using square\n        // bracket notation. IE 8 only supports this for primitives.\n        isSupported = \"a\"[0] != \"a\";\n      } else if (name == \"json\") {\n        // Indicates whether both `JSON.stringify` and `JSON.parse` are\n        // supported.\n        isSupported = has(\"json-stringify\") && has(\"json-parse\");\n      } else {\n        var value,\n          serialized = '{\"a\":[1,true,false,null,\"\\\\u0000\\\\b\\\\n\\\\f\\\\r\\\\t\"]}';\n        // Test `JSON.stringify`.\n        if (name == \"json-stringify\") {\n          var stringify = exports.stringify,\n            stringifySupported = typeof stringify == \"function\" && isExtended;\n          if (stringifySupported) {\n            // A test function object with a custom `toJSON` method.\n            (value = function () {\n              return 1;\n            }).toJSON = value;\n            try {\n              stringifySupported =\n              // Firefox 3.1b1 and b2 serialize string, number, and boolean\n              // primitives as object literals.\n              stringify(0) === \"0\" &&\n              // FF 3.1b1, b2, and JSON 2 serialize wrapped primitives as object\n              // literals.\n              stringify(new Number()) === \"0\" && stringify(new String()) == '\"\"' &&\n              // FF 3.1b1, 2 throw an error if the value is `null`, `undefined`, or\n              // does not define a canonical JSON representation (this applies to\n              // objects with `toJSON` properties as well, *unless* they are nested\n              // within an object or array).\n              stringify(getClass) === undef &&\n              // IE 8 serializes `undefined` as `\"undefined\"`. Safari <= 5.1.7 and\n              // FF 3.1b3 pass this test.\n              stringify(undef) === undef &&\n              // Safari <= 5.1.7 and FF 3.1b3 throw `Error`s and `TypeError`s,\n              // respectively, if the value is omitted entirely.\n              stringify() === undef &&\n              // FF 3.1b1, 2 throw an error if the given value is not a number,\n              // string, array, object, Boolean, or `null` literal. This applies to\n              // objects with custom `toJSON` methods as well, unless they are nested\n              // inside object or array literals. YUI 3.0.0b1 ignores custom `toJSON`\n              // methods entirely.\n              stringify(value) === \"1\" && stringify([value]) == \"[1]\" &&\n              // Prototype <= 1.6.1 serializes `[undefined]` as `\"[]\"` instead of\n              // `\"[null]\"`.\n              stringify([undef]) == \"[null]\" &&\n              // YUI 3.0.0b1 fails to serialize `null` literals.\n              stringify(null) == \"null\" &&\n              // FF 3.1b1, 2 halts serialization if an array contains a function:\n              // `[1, true, getClass, 1]` serializes as \"[1,true,],\". FF 3.1b3\n              // elides non-JSON values from objects and arrays, unless they\n              // define custom `toJSON` methods.\n              stringify([undef, getClass, null]) == \"[null,null,null]\" &&\n              // Simple serialization test. FF 3.1b1 uses Unicode escape sequences\n              // where character escape codes are expected (e.g., `\\b` => `\\u0008`).\n              stringify({\n                \"a\": [value, true, false, null, \"\\x00\\b\\n\\f\\r\\t\"]\n              }) == serialized &&\n              // FF 3.1b1 and b2 ignore the `filter` and `width` arguments.\n              stringify(null, value) === \"1\" && stringify([1, 2], null, 1) == \"[\\n 1,\\n 2\\n]\" &&\n              // JSON 2, Prototype <= 1.7, and older WebKit builds incorrectly\n              // serialize extended years.\n              stringify(new Date(-8.64e15)) == '\"-271821-04-20T00:00:00.000Z\"' &&\n              // The milliseconds are optional in ES 5, but required in 5.1.\n              stringify(new Date(8.64e15)) == '\"+275760-09-13T00:00:00.000Z\"' &&\n              // Firefox <= 11.0 incorrectly serializes years prior to 0 as negative\n              // four-digit years instead of six-digit years. Credits: @Yaffle.\n              stringify(new Date(-621987552e5)) == '\"-000001-01-01T00:00:00.000Z\"' &&\n              // Safari <= 5.1.5 and Opera >= 10.53 incorrectly serialize millisecond\n              // values less than 1000. Credits: @Yaffle.\n              stringify(new Date(-1)) == '\"1969-12-31T23:59:59.999Z\"';\n            } catch (exception) {\n              stringifySupported = false;\n            }\n          }\n          isSupported = stringifySupported;\n        }\n        // Test `JSON.parse`.\n        if (name == \"json-parse\") {\n          var parse = exports.parse;\n          if (typeof parse == \"function\") {\n            try {\n              // FF 3.1b1, b2 will throw an exception if a bare literal is provided.\n              // Conforming implementations should also coerce the initial argument to\n              // a string prior to parsing.\n              if (parse(\"0\") === 0 && !parse(false)) {\n                // Simple parsing test.\n                value = parse(serialized);\n                var parseSupported = value[\"a\"].length == 5 && value[\"a\"][0] === 1;\n                if (parseSupported) {\n                  try {\n                    // Safari <= 5.1.2 and FF 3.1b1 allow unescaped tabs in strings.\n                    parseSupported = !parse('\"\\t\"');\n                  } catch (exception) {}\n                  if (parseSupported) {\n                    try {\n                      // FF 4.0 and 4.0.1 allow leading `+` signs and leading\n                      // decimal points. FF 4.0, 4.0.1, and IE 9-10 also allow\n                      // certain octal literals.\n                      parseSupported = parse(\"01\") !== 1;\n                    } catch (exception) {}\n                  }\n                  if (parseSupported) {\n                    try {\n                      // FF 4.0, 4.0.1, and Rhino 1.7R3-R4 allow trailing decimal\n                      // points. These environments, along with FF 3.1b1 and 2,\n                      // also allow trailing commas in JSON objects and arrays.\n                      parseSupported = parse(\"1.\") !== 1;\n                    } catch (exception) {}\n                  }\n                }\n              }\n            } catch (exception) {\n              parseSupported = false;\n            }\n          }\n          isSupported = parseSupported;\n        }\n      }\n      return has[name] = !!isSupported;\n    }\n    if (!has(\"json\")) {\n      // Common `[[Class]]` name aliases.\n      var functionClass = \"[object Function]\",\n        dateClass = \"[object Date]\",\n        numberClass = \"[object Number]\",\n        stringClass = \"[object String]\",\n        arrayClass = \"[object Array]\",\n        booleanClass = \"[object Boolean]\";\n\n      // Detect incomplete support for accessing string characters by index.\n      var charIndexBuggy = has(\"bug-string-char-index\");\n\n      // Define additional utility methods if the `Date` methods are buggy.\n      if (!isExtended) {\n        var floor = Math.floor;\n        // A mapping between the months of the year and the number of days between\n        // January 1st and the first of the respective month.\n        var Months = [0, 31, 59, 90, 120, 151, 181, 212, 243, 273, 304, 334];\n        // Internal: Calculates the number of days between the Unix epoch and the\n        // first day of the given month.\n        var getDay = function (year, month) {\n          return Months[month] + 365 * (year - 1970) + floor((year - 1969 + (month = +(month > 1))) / 4) - floor((year - 1901 + month) / 100) + floor((year - 1601 + month) / 400);\n        };\n      }\n\n      // Internal: Determines if a property is a direct property of the given\n      // object. Delegates to the native `Object#hasOwnProperty` method.\n      if (!(isProperty = objectProto.hasOwnProperty)) {\n        isProperty = function (property) {\n          var members = {},\n            constructor;\n          if ((members.__proto__ = null, members.__proto__ = {\n            // The *proto* property cannot be set multiple times in recent\n            // versions of Firefox and SeaMonkey.\n            \"toString\": 1\n          }, members).toString != getClass) {\n            // Safari <= 2.0.3 doesn't implement `Object#hasOwnProperty`, but\n            // supports the mutable *proto* property.\n            isProperty = function (property) {\n              // Capture and break the object's prototype chain (see section 8.6.2\n              // of the ES 5.1 spec). The parenthesized expression prevents an\n              // unsafe transformation by the Closure Compiler.\n              var original = this.__proto__,\n                result = (property in (this.__proto__ = null, this));\n              // Restore the original prototype chain.\n              this.__proto__ = original;\n              return result;\n            };\n          } else {\n            // Capture a reference to the top-level `Object` constructor.\n            constructor = members.constructor;\n            // Use the `constructor` property to simulate `Object#hasOwnProperty` in\n            // other environments.\n            isProperty = function (property) {\n              var parent = (this.constructor || constructor).prototype;\n              return property in this && !(property in parent && this[property] === parent[property]);\n            };\n          }\n          members = null;\n          return isProperty.call(this, property);\n        };\n      }\n\n      // Internal: Normalizes the `for...in` iteration algorithm across\n      // environments. Each enumerated key is yielded to a `callback` function.\n      forEach = function (object, callback) {\n        var size = 0,\n          Properties,\n          members,\n          property;\n\n        // Tests for bugs in the current environment's `for...in` algorithm. The\n        // `valueOf` property inherits the non-enumerable flag from\n        // `Object.prototype` in older versions of IE, Netscape, and Mozilla.\n        (Properties = function () {\n          this.valueOf = 0;\n        }).prototype.valueOf = 0;\n\n        // Iterate over a new instance of the `Properties` class.\n        members = new Properties();\n        for (property in members) {\n          // Ignore all properties inherited from `Object.prototype`.\n          if (isProperty.call(members, property)) {\n            size++;\n          }\n        }\n        Properties = members = null;\n\n        // Normalize the iteration algorithm.\n        if (!size) {\n          // A list of non-enumerable properties inherited from `Object.prototype`.\n          members = [\"valueOf\", \"toString\", \"toLocaleString\", \"propertyIsEnumerable\", \"isPrototypeOf\", \"hasOwnProperty\", \"constructor\"];\n          // IE <= 8, Mozilla 1.0, and Netscape 6.2 ignore shadowed non-enumerable\n          // properties.\n          forEach = function (object, callback) {\n            var isFunction = getClass.call(object) == functionClass,\n              property,\n              length;\n            var hasProperty = !isFunction && typeof object.constructor != \"function\" && objectTypes[typeof object.hasOwnProperty] && object.hasOwnProperty || isProperty;\n            for (property in object) {\n              // Gecko <= 1.0 enumerates the `prototype` property of functions under\n              // certain conditions; IE does not.\n              if (!(isFunction && property == \"prototype\") && hasProperty.call(object, property)) {\n                callback(property);\n              }\n            }\n            // Manually invoke the callback for each non-enumerable property.\n            for (length = members.length; property = members[--length]; hasProperty.call(object, property) && callback(property));\n          };\n        } else if (size == 2) {\n          // Safari <= 2.0.4 enumerates shadowed properties twice.\n          forEach = function (object, callback) {\n            // Create a set of iterated properties.\n            var members = {},\n              isFunction = getClass.call(object) == functionClass,\n              property;\n            for (property in object) {\n              // Store each property name to prevent double enumeration. The\n              // `prototype` property of functions is not enumerated due to cross-\n              // environment inconsistencies.\n              if (!(isFunction && property == \"prototype\") && !isProperty.call(members, property) && (members[property] = 1) && isProperty.call(object, property)) {\n                callback(property);\n              }\n            }\n          };\n        } else {\n          // No bugs detected; use the standard `for...in` algorithm.\n          forEach = function (object, callback) {\n            var isFunction = getClass.call(object) == functionClass,\n              property,\n              isConstructor;\n            for (property in object) {\n              if (!(isFunction && property == \"prototype\") && isProperty.call(object, property) && !(isConstructor = property === \"constructor\")) {\n                callback(property);\n              }\n            }\n            // Manually invoke the callback for the `constructor` property due to\n            // cross-environment inconsistencies.\n            if (isConstructor || isProperty.call(object, property = \"constructor\")) {\n              callback(property);\n            }\n          };\n        }\n        return forEach(object, callback);\n      };\n\n      // Public: Serializes a JavaScript `value` as a JSON string. The optional\n      // `filter` argument may specify either a function that alters how object and\n      // array members are serialized, or an array of strings and numbers that\n      // indicates which properties should be serialized. The optional `width`\n      // argument may be either a string or number that specifies the indentation\n      // level of the output.\n      if (!has(\"json-stringify\")) {\n        // Internal: A map of control characters and their escaped equivalents.\n        var Escapes = {\n          92: \"\\\\\\\\\",\n          34: '\\\\\"',\n          8: \"\\\\b\",\n          12: \"\\\\f\",\n          10: \"\\\\n\",\n          13: \"\\\\r\",\n          9: \"\\\\t\"\n        };\n\n        // Internal: Converts `value` into a zero-padded string such that its\n        // length is at least equal to `width`. The `width` must be <= 6.\n        var leadingZeroes = \"000000\";\n        var toPaddedString = function (width, value) {\n          // The `|| 0` expression is necessary to work around a bug in\n          // Opera <= 7.54u2 where `0 == -0`, but `String(-0) !== \"0\"`.\n          return (leadingZeroes + (value || 0)).slice(-width);\n        };\n\n        // Internal: Double-quotes a string `value`, replacing all ASCII control\n        // characters (characters with code unit values between 0 and 31) with\n        // their escaped equivalents. This is an implementation of the\n        // `Quote(value)` operation defined in ES 5.1 section 15.12.3.\n        var unicodePrefix = \"\\\\u00\";\n        var quote = function (value) {\n          var result = '\"',\n            index = 0,\n            length = value.length,\n            useCharIndex = !charIndexBuggy || length > 10;\n          var symbols = useCharIndex && (charIndexBuggy ? value.split(\"\") : value);\n          for (; index < length; index++) {\n            var charCode = value.charCodeAt(index);\n            // If the character is a control character, append its Unicode or\n            // shorthand escape sequence; otherwise, append the character as-is.\n            switch (charCode) {\n              case 8:\n              case 9:\n              case 10:\n              case 12:\n              case 13:\n              case 34:\n              case 92:\n                result += Escapes[charCode];\n                break;\n              default:\n                if (charCode < 32) {\n                  result += unicodePrefix + toPaddedString(2, charCode.toString(16));\n                  break;\n                }\n                result += useCharIndex ? symbols[index] : value.charAt(index);\n            }\n          }\n          return result + '\"';\n        };\n\n        // Internal: Recursively serializes an object. Implements the\n        // `Str(key, holder)`, `JO(value)`, and `JA(value)` operations.\n        var serialize = function (property, object, callback, properties, whitespace, indentation, stack) {\n          var value, className, year, month, date, time, hours, minutes, seconds, milliseconds, results, element, index, length, prefix, result;\n          try {\n            // Necessary for host object support.\n            value = object[property];\n          } catch (exception) {}\n          if (typeof value == \"object\" && value) {\n            className = getClass.call(value);\n            if (className == dateClass && !isProperty.call(value, \"toJSON\")) {\n              if (value > -1 / 0 && value < 1 / 0) {\n                // Dates are serialized according to the `Date#toJSON` method\n                // specified in ES 5.1 section 15.9.5.44. See section 15.9.1.15\n                // for the ISO 8601 date time string format.\n                if (getDay) {\n                  // Manually compute the year, month, date, hours, minutes,\n                  // seconds, and milliseconds if the `getUTC*` methods are\n                  // buggy. Adapted from @Yaffle's `date-shim` project.\n                  date = floor(value / 864e5);\n                  for (year = floor(date / 365.2425) + 1970 - 1; getDay(year + 1, 0) <= date; year++);\n                  for (month = floor((date - getDay(year, 0)) / 30.42); getDay(year, month + 1) <= date; month++);\n                  date = 1 + date - getDay(year, month);\n                  // The `time` value specifies the time within the day (see ES\n                  // 5.1 section 15.9.1.2). The formula `(A % B + B) % B` is used\n                  // to compute `A modulo B`, as the `%` operator does not\n                  // correspond to the `modulo` operation for negative numbers.\n                  time = (value % 864e5 + 864e5) % 864e5;\n                  // The hours, minutes, seconds, and milliseconds are obtained by\n                  // decomposing the time within the day. See section 15.9.1.10.\n                  hours = floor(time / 36e5) % 24;\n                  minutes = floor(time / 6e4) % 60;\n                  seconds = floor(time / 1e3) % 60;\n                  milliseconds = time % 1e3;\n                } else {\n                  year = value.getUTCFullYear();\n                  month = value.getUTCMonth();\n                  date = value.getUTCDate();\n                  hours = value.getUTCHours();\n                  minutes = value.getUTCMinutes();\n                  seconds = value.getUTCSeconds();\n                  milliseconds = value.getUTCMilliseconds();\n                }\n                // Serialize extended years correctly.\n                value = (year <= 0 || year >= 1e4 ? (year < 0 ? \"-\" : \"+\") + toPaddedString(6, year < 0 ? -year : year) : toPaddedString(4, year)) + \"-\" + toPaddedString(2, month + 1) + \"-\" + toPaddedString(2, date) +\n                // Months, dates, hours, minutes, and seconds should have two\n                // digits; milliseconds should have three.\n                \"T\" + toPaddedString(2, hours) + \":\" + toPaddedString(2, minutes) + \":\" + toPaddedString(2, seconds) +\n                // Milliseconds are optional in ES 5.0, but required in 5.1.\n                \".\" + toPaddedString(3, milliseconds) + \"Z\";\n              } else {\n                value = null;\n              }\n            } else if (typeof value.toJSON == \"function\" && (className != numberClass && className != stringClass && className != arrayClass || isProperty.call(value, \"toJSON\"))) {\n              // Prototype <= 1.6.1 adds non-standard `toJSON` methods to the\n              // `Number`, `String`, `Date`, and `Array` prototypes. JSON 3\n              // ignores all `toJSON` methods on these objects unless they are\n              // defined directly on an instance.\n              value = value.toJSON(property);\n            }\n          }\n          if (callback) {\n            // If a replacement function was provided, call it to obtain the value\n            // for serialization.\n            value = callback.call(object, property, value);\n          }\n          if (value === null) {\n            return \"null\";\n          }\n          className = getClass.call(value);\n          if (className == booleanClass) {\n            // Booleans are represented literally.\n            return \"\" + value;\n          } else if (className == numberClass) {\n            // JSON numbers must be finite. `Infinity` and `NaN` are serialized as\n            // `\"null\"`.\n            return value > -1 / 0 && value < 1 / 0 ? \"\" + value : \"null\";\n          } else if (className == stringClass) {\n            // Strings are double-quoted and escaped.\n            return quote(\"\" + value);\n          }\n          // Recursively serialize objects and arrays.\n          if (typeof value == \"object\") {\n            // Check for cyclic structures. This is a linear search; performance\n            // is inversely proportional to the number of unique nested objects.\n            for (length = stack.length; length--;) {\n              if (stack[length] === value) {\n                // Cyclic structures cannot be serialized by `JSON.stringify`.\n                throw TypeError();\n              }\n            }\n            // Add the object to the stack of traversed objects.\n            stack.push(value);\n            results = [];\n            // Save the current indentation level and indent one additional level.\n            prefix = indentation;\n            indentation += whitespace;\n            if (className == arrayClass) {\n              // Recursively serialize array elements.\n              for (index = 0, length = value.length; index < length; index++) {\n                element = serialize(index, value, callback, properties, whitespace, indentation, stack);\n                results.push(element === undef ? \"null\" : element);\n              }\n              result = results.length ? whitespace ? \"[\\n\" + indentation + results.join(\",\\n\" + indentation) + \"\\n\" + prefix + \"]\" : \"[\" + results.join(\",\") + \"]\" : \"[]\";\n            } else {\n              // Recursively serialize object members. Members are selected from\n              // either a user-specified list of property names, or the object\n              // itself.\n              forEach(properties || value, function (property) {\n                var element = serialize(property, value, callback, properties, whitespace, indentation, stack);\n                if (element !== undef) {\n                  // According to ES 5.1 section 15.12.3: \"If `gap` {whitespace}\n                  // is not the empty string, let `member` {quote(property) + \":\"}\n                  // be the concatenation of `member` and the `space` character.\"\n                  // The \"`space` character\" refers to the literal space\n                  // character, not the `space` {width} argument provided to\n                  // `JSON.stringify`.\n                  results.push(quote(property) + \":\" + (whitespace ? \" \" : \"\") + element);\n                }\n              });\n              result = results.length ? whitespace ? \"{\\n\" + indentation + results.join(\",\\n\" + indentation) + \"\\n\" + prefix + \"}\" : \"{\" + results.join(\",\") + \"}\" : \"{}\";\n            }\n            // Remove the object from the traversed object stack.\n            stack.pop();\n            return result;\n          }\n        };\n\n        // Public: `JSON.stringify`. See ES 5.1 section 15.12.3.\n        exports.stringify = function (source, filter, width) {\n          var whitespace, callback, properties, className;\n          if (objectTypes[typeof filter] && filter) {\n            if ((className = getClass.call(filter)) == functionClass) {\n              callback = filter;\n            } else if (className == arrayClass) {\n              // Convert the property names array into a makeshift set.\n              properties = {};\n              for (var index = 0, length = filter.length, value; index < length; value = filter[index++], (className = getClass.call(value), className == stringClass || className == numberClass) && (properties[value] = 1));\n            }\n          }\n          if (width) {\n            if ((className = getClass.call(width)) == numberClass) {\n              // Convert the `width` to an integer and create a string containing\n              // `width` number of space characters.\n              if ((width -= width % 1) > 0) {\n                for (whitespace = \"\", width > 10 && (width = 10); whitespace.length < width; whitespace += \" \");\n              }\n            } else if (className == stringClass) {\n              whitespace = width.length <= 10 ? width : width.slice(0, 10);\n            }\n          }\n          // Opera <= 7.54u2 discards the values associated with empty string keys\n          // (`\"\"`) only if they are used directly within an object member list\n          // (e.g., `!(\"\" in { \"\": 1})`).\n          return serialize(\"\", (value = {}, value[\"\"] = source, value), callback, properties, whitespace, \"\", []);\n        };\n      }\n\n      // Public: Parses a JSON source string.\n      if (!has(\"json-parse\")) {\n        var fromCharCode = String.fromCharCode;\n\n        // Internal: A map of escaped control characters and their unescaped\n        // equivalents.\n        var Unescapes = {\n          92: \"\\\\\",\n          34: '\"',\n          47: \"/\",\n          98: \"\\b\",\n          116: \"\\t\",\n          110: \"\\n\",\n          102: \"\\f\",\n          114: \"\\r\"\n        };\n\n        // Internal: Stores the parser state.\n        var Index, Source;\n\n        // Internal: Resets the parser state and throws a `SyntaxError`.\n        var abort = function () {\n          Index = Source = null;\n          throw SyntaxError();\n        };\n\n        // Internal: Returns the next token, or `\"$\"` if the parser has reached\n        // the end of the source string. A token may be a string, number, `null`\n        // literal, or Boolean literal.\n        var lex = function () {\n          var source = Source,\n            length = source.length,\n            value,\n            begin,\n            position,\n            isSigned,\n            charCode;\n          while (Index < length) {\n            charCode = source.charCodeAt(Index);\n            switch (charCode) {\n              case 9:\n              case 10:\n              case 13:\n              case 32:\n                // Skip whitespace tokens, including tabs, carriage returns, line\n                // feeds, and space characters.\n                Index++;\n                break;\n              case 123:\n              case 125:\n              case 91:\n              case 93:\n              case 58:\n              case 44:\n                // Parse a punctuator token (`{`, `}`, `[`, `]`, `:`, or `,`) at\n                // the current position.\n                value = charIndexBuggy ? source.charAt(Index) : source[Index];\n                Index++;\n                return value;\n              case 34:\n                // `\"` delimits a JSON string; advance to the next character and\n                // begin parsing the string. String tokens are prefixed with the\n                // sentinel `@` character to distinguish them from punctuators and\n                // end-of-string tokens.\n                for (value = \"@\", Index++; Index < length;) {\n                  charCode = source.charCodeAt(Index);\n                  if (charCode < 32) {\n                    // Unescaped ASCII control characters (those with a code unit\n                    // less than the space character) are not permitted.\n                    abort();\n                  } else if (charCode == 92) {\n                    // A reverse solidus (`\\`) marks the beginning of an escaped\n                    // control character (including `\"`, `\\`, and `/`) or Unicode\n                    // escape sequence.\n                    charCode = source.charCodeAt(++Index);\n                    switch (charCode) {\n                      case 92:\n                      case 34:\n                      case 47:\n                      case 98:\n                      case 116:\n                      case 110:\n                      case 102:\n                      case 114:\n                        // Revive escaped control characters.\n                        value += Unescapes[charCode];\n                        Index++;\n                        break;\n                      case 117:\n                        // `\\u` marks the beginning of a Unicode escape sequence.\n                        // Advance to the first character and validate the\n                        // four-digit code point.\n                        begin = ++Index;\n                        for (position = Index + 4; Index < position; Index++) {\n                          charCode = source.charCodeAt(Index);\n                          // A valid sequence comprises four hexdigits (case-\n                          // insensitive) that form a single hexadecimal value.\n                          if (!(charCode >= 48 && charCode <= 57 || charCode >= 97 && charCode <= 102 || charCode >= 65 && charCode <= 70)) {\n                            // Invalid Unicode escape sequence.\n                            abort();\n                          }\n                        }\n                        // Revive the escaped character.\n                        value += fromCharCode(\"0x\" + source.slice(begin, Index));\n                        break;\n                      default:\n                        // Invalid escape sequence.\n                        abort();\n                    }\n                  } else {\n                    if (charCode == 34) {\n                      // An unescaped double-quote character marks the end of the\n                      // string.\n                      break;\n                    }\n                    charCode = source.charCodeAt(Index);\n                    begin = Index;\n                    // Optimize for the common case where a string is valid.\n                    while (charCode >= 32 && charCode != 92 && charCode != 34) {\n                      charCode = source.charCodeAt(++Index);\n                    }\n                    // Append the string as-is.\n                    value += source.slice(begin, Index);\n                  }\n                }\n                if (source.charCodeAt(Index) == 34) {\n                  // Advance to the next character and return the revived string.\n                  Index++;\n                  return value;\n                }\n                // Unterminated string.\n                abort();\n              default:\n                // Parse numbers and literals.\n                begin = Index;\n                // Advance past the negative sign, if one is specified.\n                if (charCode == 45) {\n                  isSigned = true;\n                  charCode = source.charCodeAt(++Index);\n                }\n                // Parse an integer or floating-point value.\n                if (charCode >= 48 && charCode <= 57) {\n                  // Leading zeroes are interpreted as octal literals.\n                  if (charCode == 48 && (charCode = source.charCodeAt(Index + 1), charCode >= 48 && charCode <= 57)) {\n                    // Illegal octal literal.\n                    abort();\n                  }\n                  isSigned = false;\n                  // Parse the integer component.\n                  for (; Index < length && (charCode = source.charCodeAt(Index), charCode >= 48 && charCode <= 57); Index++);\n                  // Floats cannot contain a leading decimal point; however, this\n                  // case is already accounted for by the parser.\n                  if (source.charCodeAt(Index) == 46) {\n                    position = ++Index;\n                    // Parse the decimal component.\n                    for (; position < length && (charCode = source.charCodeAt(position), charCode >= 48 && charCode <= 57); position++);\n                    if (position == Index) {\n                      // Illegal trailing decimal.\n                      abort();\n                    }\n                    Index = position;\n                  }\n                  // Parse exponents. The `e` denoting the exponent is\n                  // case-insensitive.\n                  charCode = source.charCodeAt(Index);\n                  if (charCode == 101 || charCode == 69) {\n                    charCode = source.charCodeAt(++Index);\n                    // Skip past the sign following the exponent, if one is\n                    // specified.\n                    if (charCode == 43 || charCode == 45) {\n                      Index++;\n                    }\n                    // Parse the exponential component.\n                    for (position = Index; position < length && (charCode = source.charCodeAt(position), charCode >= 48 && charCode <= 57); position++);\n                    if (position == Index) {\n                      // Illegal empty exponent.\n                      abort();\n                    }\n                    Index = position;\n                  }\n                  // Coerce the parsed value to a JavaScript number.\n                  return +source.slice(begin, Index);\n                }\n                // A negative sign may only precede numbers.\n                if (isSigned) {\n                  abort();\n                }\n                // `true`, `false`, and `null` literals.\n                if (source.slice(Index, Index + 4) == \"true\") {\n                  Index += 4;\n                  return true;\n                } else if (source.slice(Index, Index + 5) == \"false\") {\n                  Index += 5;\n                  return false;\n                } else if (source.slice(Index, Index + 4) == \"null\") {\n                  Index += 4;\n                  return null;\n                }\n                // Unrecognized token.\n                abort();\n            }\n          }\n          // Return the sentinel `$` character if the parser has reached the end\n          // of the source string.\n          return \"$\";\n        };\n\n        // Internal: Parses a JSON `value` token.\n        var get = function (value) {\n          var results, hasMembers;\n          if (value == \"$\") {\n            // Unexpected end of input.\n            abort();\n          }\n          if (typeof value == \"string\") {\n            if ((charIndexBuggy ? value.charAt(0) : value[0]) == \"@\") {\n              // Remove the sentinel `@` character.\n              return value.slice(1);\n            }\n            // Parse object and array literals.\n            if (value == \"[\") {\n              // Parses a JSON array, returning a new JavaScript array.\n              results = [];\n              for (;; hasMembers || (hasMembers = true)) {\n                value = lex();\n                // A closing square bracket marks the end of the array literal.\n                if (value == \"]\") {\n                  break;\n                }\n                // If the array literal contains elements, the current token\n                // should be a comma separating the previous element from the\n                // next.\n                if (hasMembers) {\n                  if (value == \",\") {\n                    value = lex();\n                    if (value == \"]\") {\n                      // Unexpected trailing `,` in array literal.\n                      abort();\n                    }\n                  } else {\n                    // A `,` must separate each array element.\n                    abort();\n                  }\n                }\n                // Elisions and leading commas are not permitted.\n                if (value == \",\") {\n                  abort();\n                }\n                results.push(get(value));\n              }\n              return results;\n            } else if (value == \"{\") {\n              // Parses a JSON object, returning a new JavaScript object.\n              results = {};\n              for (;; hasMembers || (hasMembers = true)) {\n                value = lex();\n                // A closing curly brace marks the end of the object literal.\n                if (value == \"}\") {\n                  break;\n                }\n                // If the object literal contains members, the current token\n                // should be a comma separator.\n                if (hasMembers) {\n                  if (value == \",\") {\n                    value = lex();\n                    if (value == \"}\") {\n                      // Unexpected trailing `,` in object literal.\n                      abort();\n                    }\n                  } else {\n                    // A `,` must separate each object member.\n                    abort();\n                  }\n                }\n                // Leading commas are not permitted, object property names must be\n                // double-quoted strings, and a `:` must separate each property\n                // name and value.\n                if (value == \",\" || typeof value != \"string\" || (charIndexBuggy ? value.charAt(0) : value[0]) != \"@\" || lex() != \":\") {\n                  abort();\n                }\n                results[value.slice(1)] = get(lex());\n              }\n              return results;\n            }\n            // Unexpected token encountered.\n            abort();\n          }\n          return value;\n        };\n\n        // Internal: Updates a traversed object member.\n        var update = function (source, property, callback) {\n          var element = walk(source, property, callback);\n          if (element === undef) {\n            delete source[property];\n          } else {\n            source[property] = element;\n          }\n        };\n\n        // Internal: Recursively traverses a parsed JSON object, invoking the\n        // `callback` function for each value. This is an implementation of the\n        // `Walk(holder, name)` operation defined in ES 5.1 section 15.12.2.\n        var walk = function (source, property, callback) {\n          var value = source[property],\n            length;\n          if (typeof value == \"object\" && value) {\n            // `forEach` can't be used to traverse an array in Opera <= 8.54\n            // because its `Object#hasOwnProperty` implementation returns `false`\n            // for array indices (e.g., `![1, 2, 3].hasOwnProperty(\"0\")`).\n            if (getClass.call(value) == arrayClass) {\n              for (length = value.length; length--;) {\n                update(value, length, callback);\n              }\n            } else {\n              forEach(value, function (property) {\n                update(value, property, callback);\n              });\n            }\n          }\n          return callback.call(source, property, value);\n        };\n\n        // Public: `JSON.parse`. See ES 5.1 section 15.12.2.\n        exports.parse = function (source, callback) {\n          var result, value;\n          Index = 0;\n          Source = \"\" + source;\n          result = get(lex());\n          // If a JSON string contains multiple tokens, it is invalid.\n          if (lex() != \"$\") {\n            abort();\n          }\n          // Reset the parser state.\n          Index = Source = null;\n          return callback && getClass.call(callback) == functionClass ? walk((value = {}, value[\"\"] = result, value), \"\", callback) : result;\n        };\n      }\n    }\n    exports[\"runInContext\"] = runInContext;\n    return exports;\n  }\n  if (freeExports && !isLoader) {\n    // Export for CommonJS environments.\n    runInContext(root, freeExports);\n  } else {\n    // Export for web browsers and JavaScript engines.\n    var nativeJSON = root.JSON,\n      previousJSON = root[\"JSON3\"],\n      isRestored = false;\n    var JSON3 = runInContext(root, root[\"JSON3\"] = {\n      // Public: Restores the original value of the global `JSON` object and\n      // returns a reference to the `JSON3` object.\n      \"noConflict\": function () {\n        if (!isRestored) {\n          isRestored = true;\n          root.JSON = nativeJSON;\n          root[\"JSON3\"] = previousJSON;\n          nativeJSON = previousJSON = null;\n        }\n        return JSON3;\n      }\n    });\n    root.JSON = {\n      \"parse\": JSON3.parse,\n      \"stringify\": JSON3.stringify\n    };\n  }\n\n  // Export for asynchronous module loaders.\n  if (isLoader) {\n    define(function () {\n      return JSON3;\n    });\n  }\n}).call(this);\n\n//##############################################################################\n// DomUtils.js\n//##############################################################################\n\n(function () {\n  /**\n   * A few utilities for interacting with the dom.\n   * @class DomUtils\n   */\n  var s = {};\n  s.appendToHead = function (el) {\n    s.getHead().appendChild(el);\n  };\n  s.getHead = function () {\n    return document.head || document.getElementsByTagName(\"head\")[0];\n  };\n  s.getBody = function () {\n    return document.body || document.getElementsByTagName(\"body\")[0];\n  };\n  createjs.DomUtils = s;\n})();\n\n//##############################################################################\n// DataUtils.js\n//##############################################################################\n\n(function () {\n  /**\n   * A few data utilities for formatting different data types.\n   * @class DataUtils\n   */\n  var s = {};\n\n  // static methods\n  /**\n   * Parse XML using the DOM. This is required when preloading XML or SVG.\n   * @method parseXML\n   * @param {String} text The raw text or XML that is loaded by XHR.\n   * @param {String} type The mime type of the XML. Use \"text/xml\" for XML, and  \"image/svg+xml\" for SVG parsing.\n   * @return {XML} An XML document\n   * @static\n   */\n  s.parseXML = function (text, type) {\n    var xml = null;\n    // CocoonJS does not support XML parsing with either method.\n\n    // Most browsers will use DOMParser\n    // IE fails on certain SVG files, so we have a fallback below.\n    try {\n      if (window.DOMParser) {\n        var parser = new DOMParser();\n        xml = parser.parseFromString(text, type);\n      }\n    } catch (e) {}\n\n    // Fallback for IE support.\n    if (!xml) {\n      try {\n        xml = new ActiveXObject(\"Microsoft.XMLDOM\");\n        xml.async = false;\n        xml.loadXML(text);\n      } catch (e) {\n        xml = null;\n      }\n    }\n    return xml;\n  };\n\n  /**\n   * Parse a string into an Object.\n   * @method parseJSON\n   * @param {String} value The loaded JSON string\n   * @returns {Object} A JavaScript object.\n   */\n  s.parseJSON = function (value) {\n    if (value == null) {\n      return null;\n    }\n    try {\n      return JSON.parse(value);\n    } catch (e) {\n      // TODO; Handle this with a custom error?\n      throw e;\n    }\n  };\n  createjs.DataUtils = s;\n})();\n\n//##############################################################################\n// LoadItem.js\n//##############################################################################\n\n(function () {\n  \"use strict\";\n\n  /**\n   * All loaders accept an item containing the properties defined in this class. If a raw object is passed instead,\n   * it will not be affected, but it must contain at least a {{#crossLink \"src:property\"}}{{/crossLink}} property. A\n   * string path or HTML tag is also acceptable, but it will be automatically converted to a LoadItem using the\n   * {{#crossLink \"create\"}}{{/crossLink}} method by {{#crossLink \"AbstractLoader\"}}{{/crossLink}}\n   * @class LoadItem\n   * @constructor\n   * @since 0.6.0\n   */\n  function LoadItem() {\n    /**\n     * The source of the file that is being loaded. This property is <b>required</b>. The source can either be a\n     * string (recommended), or an HTML tag.\n     * This can also be an object, but in that case it has to include a type and be handled by a plugin.\n     * @property src\n     * @type {String}\n     * @default null\n     */\n    this.src = null;\n\n    /**\n     * The type file that is being loaded. The type of the file is usually inferred by the extension, but can also\n     * be set manually. This is helpful in cases where a file does not have an extension.\n     * @property type\n     * @type {String}\n     * @default null\n     */\n    this.type = null;\n\n    /**\n     * A string identifier which can be used to reference the loaded object. If none is provided, this will be\n     * automatically set to the {{#crossLink \"src:property\"}}{{/crossLink}}.\n     * @property id\n     * @type {String}\n     * @default null\n     */\n    this.id = null;\n\n    /**\n     * Determines if a manifest will maintain the order of this item, in relation to other items in the manifest\n     * that have also set the `maintainOrder` property to `true`. This only applies when the max connections has\n     * been set above 1 (using {{#crossLink \"LoadQueue/setMaxConnections\"}}{{/crossLink}}). Everything with this\n     * property set to `false` will finish as it is loaded. Ordered items are combined with script tags loading in\n     * order when {{#crossLink \"LoadQueue/maintainScriptOrder:property\"}}{{/crossLink}} is set to `true`.\n     * @property maintainOrder\n     * @type {Boolean}\n     * @default false\n     */\n    this.maintainOrder = false;\n\n    /**\n     * A callback used by JSONP requests that defines what global method to call when the JSONP content is loaded.\n     * @property callback\n     * @type {String}\n     * @default null\n     */\n    this.callback = null;\n\n    /**\n     * An arbitrary data object, which is included with the loaded object.\n     * @property data\n     * @type {Object}\n     * @default null\n     */\n    this.data = null;\n\n    /**\n     * The request method used for HTTP calls. Both {{#crossLink \"AbstractLoader/GET:property\"}}{{/crossLink}} or\n     * {{#crossLink \"AbstractLoader/POST:property\"}}{{/crossLink}} request types are supported, and are defined as\n     * constants on {{#crossLink \"AbstractLoader\"}}{{/crossLink}}.\n     * @property method\n     * @type {String}\n     * @default get\n     */\n    this.method = createjs.LoadItem.GET;\n\n    /**\n     * An object hash of name/value pairs to send to the server.\n     * @property values\n     * @type {Object}\n     * @default null\n     */\n    this.values = null;\n\n    /**\n     * An object hash of headers to attach to an XHR request. PreloadJS will automatically attach some default\n     * headers when required, including \"Origin\", \"Content-Type\", and \"X-Requested-With\". You may override the\n     * default headers by including them in your headers object.\n     * @property headers\n     * @type {Object}\n     * @default null\n     */\n    this.headers = null;\n\n    /**\n     * Enable credentials for XHR requests.\n     * @property withCredentials\n     * @type {Boolean}\n     * @default false\n     */\n    this.withCredentials = false;\n\n    /**\n     * Set the mime type of XHR-based requests. This is automatically set to \"text/plain; charset=utf-8\" for text\n     * based files (json, xml, text, css, js).\n     * @property mimeType\n     * @type {String}\n     * @default null\n     */\n    this.mimeType = null;\n\n    /**\n     * Sets the crossOrigin attribute for CORS-enabled images loading cross-domain.\n     * @property crossOrigin\n     * @type {boolean}\n     * @default Anonymous\n     */\n    this.crossOrigin = null;\n\n    /**\n     * The duration in milliseconds to wait before a request times out. This only applies to tag-based and and XHR\n     * (level one) loading, as XHR (level 2) provides its own timeout event.\n     * @property loadTimeout\n     * @type {Number}\n     * @default 8000 (8 seconds)\n     */\n    this.loadTimeout = s.LOAD_TIMEOUT_DEFAULT;\n  }\n  ;\n  var p = LoadItem.prototype = {};\n  var s = LoadItem;\n\n  /**\n   * Default duration in milliseconds to wait before a request times out. This only applies to tag-based and and XHR\n   * (level one) loading, as XHR (level 2) provides its own timeout event.\n   * @property LOAD_TIMEOUT_DEFAULT\n   * @type {number}\n   * @static\n   */\n  s.LOAD_TIMEOUT_DEFAULT = 8000;\n\n  /**\n   * Create a LoadItem.\n   * <ul>\n   *     <li>String-based items are converted to a LoadItem with a populated {{#crossLink \"src:property\"}}{{/crossLink}}.</li>\n   *     <li>LoadItem instances are returned as-is</li>\n   *     <li>Objects are returned with any needed properties added</li>\n   * </ul>\n   * @method create\n   * @param {LoadItem|String|Object} value The load item value\n   * @returns {LoadItem|Object}\n   * @static\n   */\n  s.create = function (value) {\n    if (typeof value == \"string\") {\n      var item = new LoadItem();\n      item.src = value;\n      return item;\n    } else if (value instanceof s) {\n      return value;\n    } else if (value instanceof Object && value.src) {\n      if (value.loadTimeout == null) {\n        value.loadTimeout = s.LOAD_TIMEOUT_DEFAULT;\n      }\n      return value;\n    } else {\n      throw new Error(\"Type not recognized.\");\n    }\n  };\n\n  /**\n   * Provides a chainable shortcut method for setting a number of properties on the instance.\n   *\n   * <h4>Example</h4>\n   *\n   *      var loadItem = new createjs.LoadItem().set({src:\"image.png\", maintainOrder:true});\n   *\n   * @method set\n   * @param {Object} props A generic object containing properties to copy to the LoadItem instance.\n   * @return {LoadItem} Returns the instance the method is called on (useful for chaining calls.)\n  */\n  p.set = function (props) {\n    for (var n in props) {\n      this[n] = props[n];\n    }\n    return this;\n  };\n  createjs.LoadItem = s;\n})();\n\n//##############################################################################\n// RequestUtils.js\n//##############################################################################\n\n(function () {\n  /**\n   * Utilities that assist with parsing load items, and determining file types, etc.\n   * @class RequestUtils\n   */\n  var s = {};\n\n  /**\n   * The Regular Expression used to test file URLS for an absolute path.\n   * @property ABSOLUTE_PATH\n   * @type {RegExp}\n   * @static\n   */\n  s.ABSOLUTE_PATT = /^(?:\\w+:)?\\/{2}/i;\n\n  /**\n   * The Regular Expression used to test file URLS for a relative path.\n   * @property RELATIVE_PATH\n   * @type {RegExp}\n   * @static\n   */\n  s.RELATIVE_PATT = /^[./]*?\\//i;\n\n  /**\n   * The Regular Expression used to test file URLS for an extension. Note that URIs must already have the query string\n   * removed.\n   * @property EXTENSION_PATT\n   * @type {RegExp}\n   * @static\n   */\n  s.EXTENSION_PATT = /\\/?[^/]+\\.(\\w{1,5})$/i;\n\n  /**\n   * Parse a file path to determine the information we need to work with it. Currently, PreloadJS needs to know:\n   * <ul>\n   *     <li>If the path is absolute. Absolute paths start with a protocol (such as `http://`, `file://`, or\n   *     `//networkPath`)</li>\n   *     <li>If the path is relative. Relative paths start with `../` or `/path` (or similar)</li>\n   *     <li>The file extension. This is determined by the filename with an extension. Query strings are dropped, and\n   *     the file path is expected to follow the format `name.ext`.</li>\n   * </ul>\n   * @method parseURI\n   * @param {String} path\n   * @returns {Object} An Object with an `absolute` and `relative` Boolean values, as well as an optional 'extension`\n   * property, which is the lowercase extension.\n   * @static\n   */\n  s.parseURI = function (path) {\n    var info = {\n      absolute: false,\n      relative: false\n    };\n    if (path == null) {\n      return info;\n    }\n\n    // Drop the query string\n    var queryIndex = path.indexOf(\"?\");\n    if (queryIndex > -1) {\n      path = path.substr(0, queryIndex);\n    }\n\n    // Absolute\n    var match;\n    if (s.ABSOLUTE_PATT.test(path)) {\n      info.absolute = true;\n\n      // Relative\n    } else if (s.RELATIVE_PATT.test(path)) {\n      info.relative = true;\n    }\n\n    // Extension\n    if (match = path.match(s.EXTENSION_PATT)) {\n      info.extension = match[1].toLowerCase();\n    }\n    return info;\n  };\n\n  /**\n   * Formats an object into a query string for either a POST or GET request.\n   * @method formatQueryString\n   * @param {Object} data The data to convert to a query string.\n   * @param {Array} [query] Existing name/value pairs to append on to this query.\n   * @static\n   */\n  s.formatQueryString = function (data, query) {\n    if (data == null) {\n      throw new Error('You must specify data.');\n    }\n    var params = [];\n    for (var n in data) {\n      params.push(n + '=' + escape(data[n]));\n    }\n    if (query) {\n      params = params.concat(query);\n    }\n    return params.join('&');\n  };\n\n  /**\n   * A utility method that builds a file path using a source and a data object, and formats it into a new path.\n   * @method buildPath\n   * @param {String} src The source path to add values to.\n   * @param {Object} [data] Object used to append values to this request as a query string. Existing parameters on the\n   * path will be preserved.\n   * @returns {string} A formatted string that contains the path and the supplied parameters.\n   * @static\n   */\n  s.buildPath = function (src, data) {\n    if (data == null) {\n      return src;\n    }\n    var query = [];\n    var idx = src.indexOf('?');\n    if (idx != -1) {\n      var q = src.slice(idx + 1);\n      query = query.concat(q.split('&'));\n    }\n    if (idx != -1) {\n      return src.slice(0, idx) + '?' + this.formatQueryString(data, query);\n    } else {\n      return src + '?' + this.formatQueryString(data, query);\n    }\n  };\n\n  /**\n   * @method isCrossDomain\n   * @param {LoadItem|Object} item A load item with a `src` property.\n   * @return {Boolean} If the load item is loading from a different domain than the current location.\n   * @static\n   */\n  s.isCrossDomain = function (item) {\n    var target = document.createElement(\"a\");\n    target.href = item.src;\n    var host = document.createElement(\"a\");\n    host.href = location.href;\n    var crossdomain = target.hostname != \"\" && (target.port != host.port || target.protocol != host.protocol || target.hostname != host.hostname);\n    return crossdomain;\n  };\n\n  /**\n   * @method isLocal\n   * @param {LoadItem|Object} item A load item with a `src` property\n   * @return {Boolean} If the load item is loading from the \"file:\" protocol. Assume that the host must be local as\n   * well.\n   * @static\n   */\n  s.isLocal = function (item) {\n    var target = document.createElement(\"a\");\n    target.href = item.src;\n    return target.hostname == \"\" && target.protocol == \"file:\";\n  };\n\n  /**\n   * Determine if a specific type should be loaded as a binary file. Currently, only images and items marked\n   * specifically as \"binary\" are loaded as binary. Note that audio is <b>not</b> a binary type, as we can not play\n   * back using an audio tag if it is loaded as binary. Plugins can change the item type to binary to ensure they get\n   * a binary result to work with. Binary files are loaded using XHR2. Types are defined as static constants on\n   * {{#crossLink \"AbstractLoader\"}}{{/crossLink}}.\n   * @method isBinary\n   * @param {String} type The item type.\n   * @return {Boolean} If the specified type is binary.\n   * @static\n   */\n  s.isBinary = function (type) {\n    switch (type) {\n      case createjs.AbstractLoader.IMAGE:\n      case createjs.AbstractLoader.BINARY:\n        return true;\n      default:\n        return false;\n    }\n  };\n\n  /**\n   * Check if item is a valid HTMLImageElement\n   * @method isImageTag\n   * @param {Object} item\n   * @returns {Boolean}\n   * @static\n   */\n  s.isImageTag = function (item) {\n    return item instanceof HTMLImageElement;\n  };\n\n  /**\n   * Check if item is a valid HTMLAudioElement\n   * @method isAudioTag\n   * @param {Object} item\n   * @returns {Boolean}\n   * @static\n   */\n  s.isAudioTag = function (item) {\n    if (window.HTMLAudioElement) {\n      return item instanceof HTMLAudioElement;\n    } else {\n      return false;\n    }\n  };\n\n  /**\n   * Check if item is a valid HTMLVideoElement\n   * @method isVideoTag\n   * @param {Object} item\n   * @returns {Boolean}\n   * @static\n   */\n  s.isVideoTag = function (item) {\n    if (window.HTMLVideoElement) {\n      return item instanceof HTMLVideoElement;\n    } else {\n      return false;\n    }\n  };\n\n  /**\n   * Determine if a specific type is a text-based asset, and should be loaded as UTF-8.\n   * @method isText\n   * @param {String} type The item type.\n   * @return {Boolean} If the specified type is text.\n   * @static\n   */\n  s.isText = function (type) {\n    switch (type) {\n      case createjs.AbstractLoader.TEXT:\n      case createjs.AbstractLoader.JSON:\n      case createjs.AbstractLoader.MANIFEST:\n      case createjs.AbstractLoader.XML:\n      case createjs.AbstractLoader.CSS:\n      case createjs.AbstractLoader.SVG:\n      case createjs.AbstractLoader.JAVASCRIPT:\n      case createjs.AbstractLoader.SPRITESHEET:\n        return true;\n      default:\n        return false;\n    }\n  };\n\n  /**\n   * Determine the type of the object using common extensions. Note that the type can be passed in with the load item\n   * if it is an unusual extension.\n   * @method getTypeByExtension\n   * @param {String} extension The file extension to use to determine the load type.\n   * @return {String} The determined load type (for example, <code>AbstractLoader.IMAGE</code>). Will return `null` if\n   * the type can not be determined by the extension.\n   * @static\n   */\n  s.getTypeByExtension = function (extension) {\n    if (extension == null) {\n      return createjs.AbstractLoader.TEXT;\n    }\n    switch (extension.toLowerCase()) {\n      case \"jpeg\":\n      case \"jpg\":\n      case \"gif\":\n      case \"png\":\n      case \"webp\":\n      case \"bmp\":\n        return createjs.AbstractLoader.IMAGE;\n      case \"ogg\":\n      case \"mp3\":\n      case \"webm\":\n        return createjs.AbstractLoader.SOUND;\n      case \"mp4\":\n      case \"webm\":\n      case \"ts\":\n        return createjs.AbstractLoader.VIDEO;\n      case \"json\":\n        return createjs.AbstractLoader.JSON;\n      case \"xml\":\n        return createjs.AbstractLoader.XML;\n      case \"css\":\n        return createjs.AbstractLoader.CSS;\n      case \"js\":\n        return createjs.AbstractLoader.JAVASCRIPT;\n      case 'svg':\n        return createjs.AbstractLoader.SVG;\n      default:\n        return createjs.AbstractLoader.TEXT;\n    }\n  };\n  createjs.RequestUtils = s;\n})();\n\n//##############################################################################\n// AbstractLoader.js\n//##############################################################################\n\n(function () {\n  \"use strict\";\n\n  // constructor\n  /**\n   * The base loader, which defines all the generic methods, properties, and events. All loaders extend this class,\n   * including the {{#crossLink \"LoadQueue\"}}{{/crossLink}}.\n   * @class AbstractLoader\n   * @param {LoadItem|object|string} loadItem The item to be loaded.\n   * @param {Boolean} [preferXHR] Determines if the LoadItem should <em>try</em> and load using XHR, or take a\n   * tag-based approach, which can be better in cross-domain situations. Not all loaders can load using one or the\n   * other, so this is a suggested directive.\n   * @param {String} [type] The type of loader. Loader types are defined as constants on the AbstractLoader class,\n   * such as {{#crossLink \"IMAGE:property\"}}{{/crossLink}}, {{#crossLink \"CSS:property\"}}{{/crossLink}}, etc.\n   * @extends EventDispatcher\n   */\n  function AbstractLoader(loadItem, preferXHR, type) {\n    this.EventDispatcher_constructor();\n\n    // public properties\n    /**\n     * If the loader has completed loading. This provides a quick check, but also ensures that the different approaches\n     * used for loading do not pile up resulting in more than one `complete` {{#crossLink \"Event\"}}{{/crossLink}}.\n     * @property loaded\n     * @type {Boolean}\n     * @default false\n     */\n    this.loaded = false;\n\n    /**\n     * Determine if the loader was canceled. Canceled loads will not fire complete events. Note that this property\n     * is readonly, so {{#crossLink \"LoadQueue\"}}{{/crossLink}} queues should be closed using {{#crossLink \"LoadQueue/close\"}}{{/crossLink}}\n     * instead.\n     * @property canceled\n     * @type {Boolean}\n     * @default false\n     * @readonly\n     */\n    this.canceled = false;\n\n    /**\n     * The current load progress (percentage) for this item. This will be a number between 0 and 1.\n     *\n     * <h4>Example</h4>\n     *\n     *     var queue = new createjs.LoadQueue();\n     *     queue.loadFile(\"largeImage.png\");\n     *     queue.on(\"progress\", function() {\n     *         console.log(\"Progress:\", queue.progress, event.progress);\n     *     });\n     *\n     * @property progress\n     * @type {Number}\n     * @default 0\n     */\n    this.progress = 0;\n\n    /**\n     * The type of item this loader will load. See {{#crossLink \"AbstractLoader\"}}{{/crossLink}} for a full list of\n     * supported types.\n     * @property type\n     * @type {String}\n     */\n    this.type = type;\n\n    /**\n     * A formatter function that converts the loaded raw result into the final result. For example, the JSONLoader\n     * converts a string of text into a JavaScript object. Not all loaders have a resultFormatter, and this property\n     * can be overridden to provide custom formatting.\n     *\n     * Optionally, a resultFormatter can return a callback function in cases where the formatting needs to be\n     * asynchronous, such as creating a new image. The callback function is passed 2 parameters, which are callbacks\n     * to handle success and error conditions in the resultFormatter. Note that the resultFormatter method is\n     * called in the current scope, as well as the success and error callbacks.\n     *\n     * <h4>Example asynchronous resultFormatter</h4>\n     *\n     * \tfunction _formatResult(loader) {\n     * \t\treturn function(success, error) {\n     * \t\t\tif (errorCondition) { error(errorDetailEvent); }\n     * \t\t\tsuccess(result);\n     * \t\t}\n     * \t}\n     * @property resultFormatter\n     * @type {Function}\n     * @default null\n     */\n    this.resultFormatter = null;\n\n    // protected properties\n    /**\n     * The {{#crossLink \"LoadItem\"}}{{/crossLink}} this loader represents. Note that this is null in a {{#crossLink \"LoadQueue\"}}{{/crossLink}},\n     * but will be available on loaders such as {{#crossLink \"XMLLoader\"}}{{/crossLink}} and {{#crossLink \"ImageLoader\"}}{{/crossLink}}.\n     * @property _item\n     * @type {LoadItem|Object}\n     * @private\n     */\n    if (loadItem) {\n      this._item = createjs.LoadItem.create(loadItem);\n    } else {\n      this._item = null;\n    }\n\n    /**\n     * Whether the loader will try and load content using XHR (true) or HTML tags (false).\n     * @property _preferXHR\n     * @type {Boolean}\n     * @private\n     */\n    this._preferXHR = preferXHR;\n\n    /**\n     * The loaded result after it is formatted by an optional {{#crossLink \"resultFormatter\"}}{{/crossLink}}. For\n     * items that are not formatted, this will be the same as the {{#crossLink \"_rawResult:property\"}}{{/crossLink}}.\n     * The result is accessed using the {{#crossLink \"getResult\"}}{{/crossLink}} method.\n     * @property _result\n     * @type {Object|String}\n     * @private\n     */\n    this._result = null;\n\n    /**\n     * The loaded result before it is formatted. The rawResult is accessed using the {{#crossLink \"getResult\"}}{{/crossLink}}\n     * method, and passing `true`.\n     * @property _rawResult\n     * @type {Object|String}\n     * @private\n     */\n    this._rawResult = null;\n\n    /**\n     * A list of items that loaders load behind the scenes. This does not include the main item the loader is\n     * responsible for loading. Examples of loaders that have sub-items include the {{#crossLink \"SpriteSheetLoader\"}}{{/crossLink}} and\n     * {{#crossLink \"ManifestLoader\"}}{{/crossLink}}.\n     * @property _loadItems\n     * @type {null}\n     * @protected\n     */\n    this._loadedItems = null;\n\n    /**\n     * The attribute the items loaded using tags use for the source.\n     * @type {string}\n     * @default null\n     * @private\n     */\n    this._tagSrcAttribute = null;\n\n    /**\n     * An HTML tag (or similar) that a loader may use to load HTML content, such as images, scripts, etc.\n     * @property _tag\n     * @type {Object}\n     * @private\n     */\n    this._tag = null;\n  }\n  ;\n  var p = createjs.extend(AbstractLoader, createjs.EventDispatcher);\n  var s = AbstractLoader;\n\n  // TODO: deprecated\n  // p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\n\n  /**\n   * Defines a POST request, use for a method value when loading data.\n   * @property POST\n   * @type {string}\n   * @default post\n   * @static\n   */\n  s.POST = \"POST\";\n\n  /**\n   * Defines a GET request, use for a method value when loading data.\n   * @property GET\n   * @type {string}\n   * @default get\n   * @static\n   */\n  s.GET = \"GET\";\n\n  /**\n   * The preload type for generic binary types. Note that images are loaded as binary files when using XHR.\n   * @property BINARY\n   * @type {String}\n   * @default binary\n   * @static\n   * @since 0.6.0\n   */\n  s.BINARY = \"binary\";\n\n  /**\n   * The preload type for css files. CSS files are loaded using a &lt;link&gt; when loaded with XHR, or a\n   * &lt;style&gt; tag when loaded with tags.\n   * @property CSS\n   * @type {String}\n   * @default css\n   * @static\n   * @since 0.6.0\n   */\n  s.CSS = \"css\";\n\n  /**\n   * The preload type for image files, usually png, gif, or jpg/jpeg. Images are loaded into an &lt;image&gt; tag.\n   * @property IMAGE\n   * @type {String}\n   * @default image\n   * @static\n   * @since 0.6.0\n   */\n  s.IMAGE = \"image\";\n\n  /**\n   * The preload type for javascript files, usually with the \"js\" file extension. JavaScript files are loaded into a\n   * &lt;script&gt; tag.\n   *\n   * Since version 0.4.1+, due to how tag-loaded scripts work, all JavaScript files are automatically injected into\n   * the body of the document to maintain parity between XHR and tag-loaded scripts. In version 0.4.0 and earlier,\n   * only tag-loaded scripts are injected.\n   * @property JAVASCRIPT\n   * @type {String}\n   * @default javascript\n   * @static\n   * @since 0.6.0\n   */\n  s.JAVASCRIPT = \"javascript\";\n\n  /**\n   * The preload type for json files, usually with the \"json\" file extension. JSON data is loaded and parsed into a\n   * JavaScript object. Note that if a `callback` is present on the load item, the file will be loaded with JSONP,\n   * no matter what the {{#crossLink \"LoadQueue/preferXHR:property\"}}{{/crossLink}} property is set to, and the JSON\n   * must contain a matching wrapper function.\n   * @property JSON\n   * @type {String}\n   * @default json\n   * @static\n   * @since 0.6.0\n   */\n  s.JSON = \"json\";\n\n  /**\n   * The preload type for jsonp files, usually with the \"json\" file extension. JSON data is loaded and parsed into a\n   * JavaScript object. You are required to pass a callback parameter that matches the function wrapper in the JSON.\n   * Note that JSONP will always be used if there is a callback present, no matter what the {{#crossLink \"LoadQueue/preferXHR:property\"}}{{/crossLink}}\n   * property is set to.\n   * @property JSONP\n   * @type {String}\n   * @default jsonp\n   * @static\n   * @since 0.6.0\n   */\n  s.JSONP = \"jsonp\";\n\n  /**\n   * The preload type for json-based manifest files, usually with the \"json\" file extension. The JSON data is loaded\n   * and parsed into a JavaScript object. PreloadJS will then look for a \"manifest\" property in the JSON, which is an\n   * Array of files to load, following the same format as the {{#crossLink \"LoadQueue/loadManifest\"}}{{/crossLink}}\n   * method. If a \"callback\" is specified on the manifest object, then it will be loaded using JSONP instead,\n   * regardless of what the {{#crossLink \"LoadQueue/preferXHR:property\"}}{{/crossLink}} property is set to.\n   * @property MANIFEST\n   * @type {String}\n   * @default manifest\n   * @static\n   * @since 0.6.0\n   */\n  s.MANIFEST = \"manifest\";\n\n  /**\n   * The preload type for sound files, usually mp3, ogg, or wav. When loading via tags, audio is loaded into an\n   * &lt;audio&gt; tag.\n   * @property SOUND\n   * @type {String}\n   * @default sound\n   * @static\n   * @since 0.6.0\n   */\n  s.SOUND = \"sound\";\n\n  /**\n   * The preload type for video files, usually mp4, ts, or ogg. When loading via tags, video is loaded into an\n   * &lt;video&gt; tag.\n   * @property VIDEO\n   * @type {String}\n   * @default video\n   * @static\n   * @since 0.6.0\n   */\n  s.VIDEO = \"video\";\n\n  /**\n   * The preload type for SpriteSheet files. SpriteSheet files are JSON files that contain string image paths.\n   * @property SPRITESHEET\n   * @type {String}\n   * @default spritesheet\n   * @static\n   * @since 0.6.0\n   */\n  s.SPRITESHEET = \"spritesheet\";\n\n  /**\n   * The preload type for SVG files.\n   * @property SVG\n   * @type {String}\n   * @default svg\n   * @static\n   * @since 0.6.0\n   */\n  s.SVG = \"svg\";\n\n  /**\n   * The preload type for text files, which is also the default file type if the type can not be determined. Text is\n   * loaded as raw text.\n   * @property TEXT\n   * @type {String}\n   * @default text\n   * @static\n   * @since 0.6.0\n   */\n  s.TEXT = \"text\";\n\n  /**\n   * The preload type for xml files. XML is loaded into an XML document.\n   * @property XML\n   * @type {String}\n   * @default xml\n   * @static\n   * @since 0.6.0\n   */\n  s.XML = \"xml\";\n\n  // Events\n  /**\n   * The {{#crossLink \"ProgressEvent\"}}{{/crossLink}} that is fired when the overall progress changes. Prior to\n   * version 0.6.0, this was just a regular {{#crossLink \"Event\"}}{{/crossLink}}.\n   * @event progress\n   * @since 0.3.0\n   */\n\n  /**\n   * The {{#crossLink \"Event\"}}{{/crossLink}} that is fired when a load starts.\n   * @event loadstart\n   * @param {Object} target The object that dispatched the event.\n   * @param {String} type The event type.\n   * @since 0.3.1\n   */\n\n  /**\n   * The {{#crossLink \"Event\"}}{{/crossLink}} that is fired when the entire queue has been loaded.\n   * @event complete\n   * @param {Object} target The object that dispatched the event.\n   * @param {String} type The event type.\n   * @since 0.3.0\n   */\n\n  /**\n   * The {{#crossLink \"ErrorEvent\"}}{{/crossLink}} that is fired when the loader encounters an error. If the error was\n   * encountered by a file, the event will contain the item that caused the error. Prior to version 0.6.0, this was\n   * just a regular {{#crossLink \"Event\"}}{{/crossLink}}.\n   * @event error\n   * @since 0.3.0\n   */\n\n  /**\n   * The {{#crossLink \"Event\"}}{{/crossLink}} that is fired when the loader encounters an internal file load error.\n   * This enables loaders to maintain internal queues, and surface file load errors.\n   * @event fileerror\n   * @param {Object} target The object that dispatched the event.\n   * @param {String} type The even type (\"fileerror\")\n   * @param {LoadItem|object} The item that encountered the error\n   * @since 0.6.0\n   */\n\n  /**\n   * The {{#crossLink \"Event\"}}{{/crossLink}} that is fired when a loader internally loads a file. This enables\n   * loaders such as {{#crossLink \"ManifestLoader\"}}{{/crossLink}} to maintain internal {{#crossLink \"LoadQueue\"}}{{/crossLink}}s\n   * and notify when they have loaded a file. The {{#crossLink \"LoadQueue\"}}{{/crossLink}} class dispatches a\n   * slightly different {{#crossLink \"LoadQueue/fileload:event\"}}{{/crossLink}} event.\n   * @event fileload\n   * @param {Object} target The object that dispatched the event.\n   * @param {String} type The event type (\"fileload\")\n   * @param {Object} item The file item which was specified in the {{#crossLink \"LoadQueue/loadFile\"}}{{/crossLink}}\n   * or {{#crossLink \"LoadQueue/loadManifest\"}}{{/crossLink}} call. If only a string path or tag was specified, the\n   * object will contain that value as a `src` property.\n   * @param {Object} result The HTML tag or parsed result of the loaded item.\n   * @param {Object} rawResult The unprocessed result, usually the raw text or binary data before it is converted\n   * to a usable object.\n   * @since 0.6.0\n   */\n\n  /**\n   * The {{#crossLink \"Event\"}}{{/crossLink}} that is fired after the internal request is created, but before a load.\n   * This allows updates to the loader for specific loading needs, such as binary or XHR image loading.\n   * @event initialize\n   * @param {Object} target The object that dispatched the event.\n   * @param {String} type The event type (\"initialize\")\n   * @param {AbstractLoader} loader The loader that has been initialized.\n   */\n\n  /**\n   * Get a reference to the manifest item that is loaded by this loader. In some cases this will be the value that was\n   * passed into {{#crossLink \"LoadQueue\"}}{{/crossLink}} using {{#crossLink \"LoadQueue/loadFile\"}}{{/crossLink}} or\n   * {{#crossLink \"LoadQueue/loadManifest\"}}{{/crossLink}}. However if only a String path was passed in, then it will\n   * be a {{#crossLink \"LoadItem\"}}{{/crossLink}}.\n   * @method getItem\n   * @return {Object} The manifest item that this loader is responsible for loading.\n   * @since 0.6.0\n   */\n  p.getItem = function () {\n    return this._item;\n  };\n\n  /**\n   * Get a reference to the content that was loaded by the loader (only available after the {{#crossLink \"complete:event\"}}{{/crossLink}}\n   * event is dispatched.\n   * @method getResult\n   * @param {Boolean} [raw=false] Determines if the returned result will be the formatted content, or the raw loaded\n   * data (if it exists).\n   * @return {Object}\n   * @since 0.6.0\n   */\n  p.getResult = function (raw) {\n    return raw ? this._rawResult : this._result;\n  };\n\n  /**\n   * Return the `tag` this object creates or uses for loading.\n   * @method getTag\n   * @return {Object} The tag instance\n   * @since 0.6.0\n   */\n  p.getTag = function () {\n    return this._tag;\n  };\n\n  /**\n   * Set the `tag` this item uses for loading.\n   * @method setTag\n   * @param {Object} tag The tag instance\n   * @since 0.6.0\n   */\n  p.setTag = function (tag) {\n    this._tag = tag;\n  };\n\n  /**\n   * Begin loading the item. This method is required when using a loader by itself.\n   *\n   * <h4>Example</h4>\n   *\n   *      var queue = new createjs.LoadQueue();\n   *      queue.on(\"complete\", handleComplete);\n   *      queue.loadManifest(fileArray, false); // Note the 2nd argument that tells the queue not to start loading yet\n   *      queue.load();\n   *\n   * @method load\n   */\n  p.load = function () {\n    this._createRequest();\n    this._request.on(\"complete\", this, this);\n    this._request.on(\"progress\", this, this);\n    this._request.on(\"loadStart\", this, this);\n    this._request.on(\"abort\", this, this);\n    this._request.on(\"timeout\", this, this);\n    this._request.on(\"error\", this, this);\n    var evt = new createjs.Event(\"initialize\");\n    evt.loader = this._request;\n    this.dispatchEvent(evt);\n    this._request.load();\n  };\n\n  /**\n   * Close the the item. This will stop any open requests (although downloads using HTML tags may still continue in\n   * the background), but events will not longer be dispatched.\n   * @method cancel\n   */\n  p.cancel = function () {\n    this.canceled = true;\n    this.destroy();\n  };\n\n  /**\n   * Clean up the loader.\n   * @method destroy\n   */\n  p.destroy = function () {\n    if (this._request) {\n      this._request.removeAllEventListeners();\n      this._request.destroy();\n    }\n    this._request = null;\n    this._item = null;\n    this._rawResult = null;\n    this._result = null;\n    this._loadItems = null;\n    this.removeAllEventListeners();\n  };\n\n  /**\n   * Get any items loaded internally by the loader. The enables loaders such as {{#crossLink \"ManifestLoader\"}}{{/crossLink}}\n   * to expose items it loads internally.\n   * @method getLoadedItems\n   * @return {Array} A list of the items loaded by the loader.\n   * @since 0.6.0\n   */\n  p.getLoadedItems = function () {\n    return this._loadedItems;\n  };\n\n  // Private methods\n  /**\n   * Create an internal request used for loading. By default, an {{#crossLink \"XHRRequest\"}}{{/crossLink}} or\n   * {{#crossLink \"TagRequest\"}}{{/crossLink}} is created, depending on the value of {{#crossLink \"preferXHR:property\"}}{{/crossLink}}.\n   * Other loaders may override this to use different request types, such as {{#crossLink \"ManifestLoader\"}}{{/crossLink}},\n   * which uses {{#crossLink \"JSONLoader\"}}{{/crossLink}} or {{#crossLink \"JSONPLoader\"}}{{/crossLink}} under the hood.\n   * @method _createRequest\n   * @protected\n   */\n  p._createRequest = function () {\n    if (!this._preferXHR) {\n      this._request = new createjs.TagRequest(this._item, this._tag || this._createTag(), this._tagSrcAttribute);\n    } else {\n      this._request = new createjs.XHRRequest(this._item);\n    }\n  };\n\n  /**\n   * Create the HTML tag used for loading. This method does nothing by default, and needs to be implemented\n   * by loaders that require tag loading.\n   * @method _createTag\n   * @param {String} src The tag source\n   * @return {HTMLElement} The tag that was created\n   * @protected\n   */\n  p._createTag = function (src) {\n    return null;\n  };\n\n  /**\n   * Dispatch a loadstart {{#crossLink \"Event\"}}{{/crossLink}}. Please see the {{#crossLink \"AbstractLoader/loadstart:event\"}}{{/crossLink}}\n   * event for details on the event payload.\n   * @method _sendLoadStart\n   * @protected\n   */\n  p._sendLoadStart = function () {\n    if (this._isCanceled()) {\n      return;\n    }\n    this.dispatchEvent(\"loadstart\");\n  };\n\n  /**\n   * Dispatch a {{#crossLink \"ProgressEvent\"}}{{/crossLink}}.\n   * @method _sendProgress\n   * @param {Number | Object} value The progress of the loaded item, or an object containing <code>loaded</code>\n   * and <code>total</code> properties.\n   * @protected\n   */\n  p._sendProgress = function (value) {\n    if (this._isCanceled()) {\n      return;\n    }\n    var event = null;\n    if (typeof value == \"number\") {\n      this.progress = value;\n      event = new createjs.ProgressEvent(this.progress);\n    } else {\n      event = value;\n      this.progress = value.loaded / value.total;\n      event.progress = this.progress;\n      if (isNaN(this.progress) || this.progress == Infinity) {\n        this.progress = 0;\n      }\n    }\n    this.hasEventListener(\"progress\") && this.dispatchEvent(event);\n  };\n\n  /**\n   * Dispatch a complete {{#crossLink \"Event\"}}{{/crossLink}}. Please see the {{#crossLink \"AbstractLoader/complete:event\"}}{{/crossLink}} event\n   * @method _sendComplete\n   * @protected\n   */\n  p._sendComplete = function () {\n    if (this._isCanceled()) {\n      return;\n    }\n    this.loaded = true;\n    var event = new createjs.Event(\"complete\");\n    event.rawResult = this._rawResult;\n    if (this._result != null) {\n      event.result = this._result;\n    }\n    this.dispatchEvent(event);\n  };\n\n  /**\n   * Dispatch an error {{#crossLink \"Event\"}}{{/crossLink}}. Please see the {{#crossLink \"AbstractLoader/error:event\"}}{{/crossLink}}\n   * event for details on the event payload.\n   * @method _sendError\n   * @param {ErrorEvent} event The event object containing specific error properties.\n   * @protected\n   */\n  p._sendError = function (event) {\n    if (this._isCanceled() || !this.hasEventListener(\"error\")) {\n      return;\n    }\n    if (event == null) {\n      event = new createjs.ErrorEvent(\"PRELOAD_ERROR_EMPTY\"); // TODO: Populate error\n    }\n\n    this.dispatchEvent(event);\n  };\n\n  /**\n   * Determine if the load has been canceled. This is important to ensure that method calls or asynchronous events\n   * do not cause issues after the queue has been cleaned up.\n   * @method _isCanceled\n   * @return {Boolean} If the loader has been canceled.\n   * @protected\n   */\n  p._isCanceled = function () {\n    if (window.createjs == null || this.canceled) {\n      return true;\n    }\n    return false;\n  };\n\n  /**\n   * A custom result formatter function, which is called just before a request dispatches its complete event. Most\n   * loader types already have an internal formatter, but this can be user-overridden for custom formatting. The\n   * formatted result will be available on Loaders using {{#crossLink \"getResult\"}}{{/crossLink}}, and passing `true`.\n   * @property resultFormatter\n   * @type Function\n   * @return {Object} The formatted result\n   * @since 0.6.0\n   */\n  p.resultFormatter = null;\n\n  /**\n   * Handle events from internal requests. By default, loaders will handle, and redispatch the necessary events, but\n   * this method can be overridden for custom behaviours.\n   * @method handleEvent\n   * @param {Event} event The event that the internal request dispatches.\n   * @protected\n   * @since 0.6.0\n   */\n  p.handleEvent = function (event) {\n    switch (event.type) {\n      case \"complete\":\n        this._rawResult = event.target._response;\n        var result = this.resultFormatter && this.resultFormatter(this);\n        if (result instanceof Function) {\n          result.call(this, createjs.proxy(this._resultFormatSuccess, this), createjs.proxy(this._resultFormatFailed, this));\n        } else {\n          this._result = result || this._rawResult;\n          this._sendComplete();\n        }\n        break;\n      case \"progress\":\n        this._sendProgress(event);\n        break;\n      case \"error\":\n        this._sendError(event);\n        break;\n      case \"loadstart\":\n        this._sendLoadStart();\n        break;\n      case \"abort\":\n      case \"timeout\":\n        if (!this._isCanceled()) {\n          this.dispatchEvent(new createjs.ErrorEvent(\"PRELOAD_\" + event.type.toUpperCase() + \"_ERROR\"));\n        }\n        break;\n    }\n  };\n\n  /**\n   * The \"success\" callback passed to {{#crossLink \"AbstractLoader/resultFormatter\"}}{{/crossLink}} asynchronous\n   * functions.\n   * @method _resultFormatSuccess\n   * @param {Object} result The formatted result\n   * @private\n   */\n  p._resultFormatSuccess = function (result) {\n    this._result = result;\n    this._sendComplete();\n  };\n\n  /**\n   * The \"error\" callback passed to {{#crossLink \"AbstractLoader/resultFormatter\"}}{{/crossLink}} asynchronous\n   * functions.\n   * @method _resultFormatSuccess\n   * @param {Object} error The error event\n   * @private\n   */\n  p._resultFormatFailed = function (event) {\n    this._sendError(event);\n  };\n\n  /**\n   * @method buildPath\n   * @protected\n   * @deprecated Use the {{#crossLink \"RequestUtils\"}}{{/crossLink}} method {{#crossLink \"RequestUtils/buildPath\"}}{{/crossLink}}\n   * instead.\n   */\n  p.buildPath = function (src, data) {\n    return createjs.RequestUtils.buildPath(src, data);\n  };\n\n  /**\n   * @method toString\n   * @return {String} a string representation of the instance.\n   */\n  p.toString = function () {\n    return \"[PreloadJS AbstractLoader]\";\n  };\n  createjs.AbstractLoader = createjs.promote(AbstractLoader, \"EventDispatcher\");\n})();\n\n//##############################################################################\n// AbstractMediaLoader.js\n//##############################################################################\n\n(function () {\n  \"use strict\";\n\n  // constructor\n  /**\n   * The AbstractMediaLoader is a base class that handles some of the shared methods and properties of loaders that\n   * handle HTML media elements, such as Video and Audio.\n   * @class AbstractMediaLoader\n   * @param {LoadItem|Object} loadItem\n   * @param {Boolean} preferXHR\n   * @param {String} type The type of media to load. Usually \"video\" or \"audio\".\n   * @extends AbstractLoader\n   * @constructor\n   */\n  function AbstractMediaLoader(loadItem, preferXHR, type) {\n    this.AbstractLoader_constructor(loadItem, preferXHR, type);\n\n    // public properties\n    this.resultFormatter = this._formatResult;\n\n    // protected properties\n    this._tagSrcAttribute = \"src\";\n    this.on(\"initialize\", this._updateXHR, this);\n  }\n  ;\n  var p = createjs.extend(AbstractMediaLoader, createjs.AbstractLoader);\n\n  // static properties\n  // public methods\n  p.load = function () {\n    // TagRequest will handle most of this, but Sound / Video need a few custom properties, so just handle them here.\n    if (!this._tag) {\n      this._tag = this._createTag(this._item.src);\n    }\n    this._tag.preload = \"auto\";\n    this._tag.load();\n    this.AbstractLoader_load();\n  };\n\n  // protected methods\n  /**\n   * Creates a new tag for loading if it doesn't exist yet.\n   * @method _createTag\n   * @private\n   */\n  p._createTag = function () {};\n  p._createRequest = function () {\n    if (!this._preferXHR) {\n      this._request = new createjs.MediaTagRequest(this._item, this._tag || this._createTag(), this._tagSrcAttribute);\n    } else {\n      this._request = new createjs.XHRRequest(this._item);\n    }\n  };\n\n  // protected methods\n  /**\n   * Before the item loads, set its mimeType and responseType.\n   * @property _updateXHR\n   * @param {Event} event\n   * @private\n   */\n  p._updateXHR = function (event) {\n    // Only exists for XHR\n    if (event.loader.setResponseType) {\n      event.loader.setResponseType(\"blob\");\n    }\n  };\n\n  /**\n   * The result formatter for media files.\n   * @method _formatResult\n   * @param {AbstractLoader} loader\n   * @returns {HTMLVideoElement|HTMLAudioElement}\n   * @private\n   */\n  p._formatResult = function (loader) {\n    this._tag.removeEventListener && this._tag.removeEventListener(\"canplaythrough\", this._loadedHandler);\n    this._tag.onstalled = null;\n    if (this._preferXHR) {\n      var URL = window.URL || window.webkitURL;\n      var result = loader.getResult(true);\n      loader.getTag().src = URL.createObjectURL(result);\n    }\n    return loader.getTag();\n  };\n  createjs.AbstractMediaLoader = createjs.promote(AbstractMediaLoader, \"AbstractLoader\");\n})();\n\n//##############################################################################\n// AbstractRequest.js\n//##############################################################################\n\n(function () {\n  \"use strict\";\n\n  /**\n   * A base class for actual data requests, such as {{#crossLink \"XHRRequest\"}}{{/crossLink}}, {{#crossLink \"TagRequest\"}}{{/crossLink}},\n   * and {{#crossLink \"MediaRequest\"}}{{/crossLink}}. PreloadJS loaders will typically use a data loader under the\n   * hood to get data.\n   * @class AbstractRequest\n   * @param {LoadItem} item\n   * @constructor\n   */\n  var AbstractRequest = function (item) {\n    this._item = item;\n  };\n  var p = createjs.extend(AbstractRequest, createjs.EventDispatcher);\n\n  // public methods\n  /**\n   * Begin a load.\n   * @method load\n   */\n  p.load = function () {};\n\n  /**\n   * Clean up a request.\n   * @method destroy\n   */\n  p.destroy = function () {};\n\n  /**\n   * Cancel an in-progress request.\n   * @method cancel\n   */\n  p.cancel = function () {};\n  createjs.AbstractRequest = createjs.promote(AbstractRequest, \"EventDispatcher\");\n})();\n\n//##############################################################################\n// TagRequest.js\n//##############################################################################\n\n(function () {\n  \"use strict\";\n\n  // constructor\n  /**\n   * An {{#crossLink \"AbstractRequest\"}}{{/crossLink}} that loads HTML tags, such as images and scripts.\n   * @class TagRequest\n   * @param {LoadItem} loadItem\n   * @param {HTMLElement} tag\n   * @param {String} srcAttribute The tag attribute that specifies the source, such as \"src\", \"href\", etc.\n   */\n  function TagRequest(loadItem, tag, srcAttribute) {\n    this.AbstractRequest_constructor(loadItem);\n\n    // protected properties\n    /**\n     * The HTML tag instance that is used to load.\n     * @property _tag\n     * @type {HTMLElement}\n     * @protected\n     */\n    this._tag = tag;\n\n    /**\n     * The tag attribute that specifies the source, such as \"src\", \"href\", etc.\n     * @property _tagSrcAttribute\n     * @type {String}\n     * @protected\n     */\n    this._tagSrcAttribute = srcAttribute;\n\n    /**\n     * A method closure used for handling the tag load event.\n     * @property _loadedHandler\n     * @type {Function}\n     * @private\n     */\n    this._loadedHandler = createjs.proxy(this._handleTagComplete, this);\n\n    /**\n     * Determines if the element was added to the DOM automatically by PreloadJS, so it can be cleaned up after.\n     * @property _addedToDOM\n     * @type {Boolean}\n     * @private\n     */\n    this._addedToDOM = false;\n\n    /**\n     * Determines what the tags initial style.visibility was, so we can set it correctly after a load.\n     *\n     * @type {null}\n     * @private\n     */\n    this._startTagVisibility = null;\n  }\n  ;\n  var p = createjs.extend(TagRequest, createjs.AbstractRequest);\n\n  // public methods\n  p.load = function () {\n    this._tag.onload = createjs.proxy(this._handleTagComplete, this);\n    this._tag.onreadystatechange = createjs.proxy(this._handleReadyStateChange, this);\n    this._tag.onerror = createjs.proxy(this._handleError, this);\n    var evt = new createjs.Event(\"initialize\");\n    evt.loader = this._tag;\n    this.dispatchEvent(evt);\n    this._hideTag();\n    this._loadTimeout = setTimeout(createjs.proxy(this._handleTimeout, this), this._item.loadTimeout);\n    this._tag[this._tagSrcAttribute] = this._item.src;\n\n    // wdg:: Append the tag AFTER setting the src, or SVG loading on iOS will fail.\n    if (this._tag.parentNode == null) {\n      window.document.body.appendChild(this._tag);\n      this._addedToDOM = true;\n    }\n  };\n  p.destroy = function () {\n    this._clean();\n    this._tag = null;\n    this.AbstractRequest_destroy();\n  };\n\n  // private methods\n  /**\n   * Handle the readyStateChange event from a tag. We need this in place of the `onload` callback (mainly SCRIPT\n   * and LINK tags), but other cases may exist.\n   * @method _handleReadyStateChange\n   * @private\n   */\n  p._handleReadyStateChange = function () {\n    clearTimeout(this._loadTimeout);\n    // This is strictly for tags in browsers that do not support onload.\n    var tag = this._tag;\n\n    // Complete is for old IE support.\n    if (tag.readyState == \"loaded\" || tag.readyState == \"complete\") {\n      this._handleTagComplete();\n    }\n  };\n\n  /**\n   * Handle any error events from the tag.\n   * @method _handleError\n   * @protected\n   */\n  p._handleError = function () {\n    this._clean();\n    this.dispatchEvent(\"error\");\n  };\n\n  /**\n   * Handle the tag's onload callback.\n   * @method _handleTagComplete\n   * @private\n   */\n  p._handleTagComplete = function () {\n    this._rawResult = this._tag;\n    this._result = this.resultFormatter && this.resultFormatter(this) || this._rawResult;\n    this._clean();\n    this._showTag();\n    this.dispatchEvent(\"complete\");\n  };\n\n  /**\n   * The tag request has not loaded within the time specified in loadTimeout.\n   * @method _handleError\n   * @param {Object} event The XHR error event.\n   * @private\n   */\n  p._handleTimeout = function () {\n    this._clean();\n    this.dispatchEvent(new createjs.Event(\"timeout\"));\n  };\n\n  /**\n   * Remove event listeners, but don't destroy the request object\n   * @method _clean\n   * @private\n   */\n  p._clean = function () {\n    this._tag.onload = null;\n    this._tag.onreadystatechange = null;\n    this._tag.onerror = null;\n    if (this._addedToDOM && this._tag.parentNode != null) {\n      this._tag.parentNode.removeChild(this._tag);\n    }\n    clearTimeout(this._loadTimeout);\n  };\n  p._hideTag = function () {\n    this._startTagVisibility = this._tag.style.visibility;\n    this._tag.style.visibility = \"hidden\";\n  };\n  p._showTag = function () {\n    this._tag.style.visibility = this._startTagVisibility;\n  };\n\n  /**\n   * Handle a stalled audio event. The main place this happens is with HTMLAudio in Chrome when playing back audio\n   * that is already in a load, but not complete.\n   * @method _handleStalled\n   * @private\n   */\n  p._handleStalled = function () {\n    //Ignore, let the timeout take care of it. Sometimes its not really stopped.\n  };\n  createjs.TagRequest = createjs.promote(TagRequest, \"AbstractRequest\");\n})();\n\n//##############################################################################\n// MediaTagRequest.js\n//##############################################################################\n\n(function () {\n  \"use strict\";\n\n  // constructor\n  /**\n   * An {{#crossLink \"TagRequest\"}}{{/crossLink}} that loads HTML tags for video and audio.\n   * @class MediaTagRequest\n   * @param {LoadItem} loadItem\n   * @param {HTMLAudioElement|HTMLVideoElement} tag\n   * @param {String} srcAttribute The tag attribute that specifies the source, such as \"src\", \"href\", etc.\n   * @constructor\n   */\n  function MediaTagRequest(loadItem, tag, srcAttribute) {\n    this.AbstractRequest_constructor(loadItem);\n\n    // protected properties\n    this._tag = tag;\n    this._tagSrcAttribute = srcAttribute;\n    this._loadedHandler = createjs.proxy(this._handleTagComplete, this);\n  }\n  ;\n  var p = createjs.extend(MediaTagRequest, createjs.TagRequest);\n  var s = MediaTagRequest;\n\n  // public methods\n  p.load = function () {\n    var sc = createjs.proxy(this._handleStalled, this);\n    this._stalledCallback = sc;\n    var pc = createjs.proxy(this._handleProgress, this);\n    this._handleProgress = pc;\n    this._tag.addEventListener(\"stalled\", sc);\n    this._tag.addEventListener(\"progress\", pc);\n\n    // This will tell us when audio is buffered enough to play through, but not when its loaded.\n    // The tag doesn't keep loading in Chrome once enough has buffered, and we have decided that behaviour is sufficient.\n    this._tag.addEventListener && this._tag.addEventListener(\"canplaythrough\", this._loadedHandler, false); // canplaythrough callback doesn't work in Chrome, so we use an event.\n\n    this.TagRequest_load();\n  };\n\n  // private methods\n  p._handleReadyStateChange = function () {\n    clearTimeout(this._loadTimeout);\n    // This is strictly for tags in browsers that do not support onload.\n    var tag = this._tag;\n\n    // Complete is for old IE support.\n    if (tag.readyState == \"loaded\" || tag.readyState == \"complete\") {\n      this._handleTagComplete();\n    }\n  };\n  p._handleStalled = function () {\n    //Ignore, let the timeout take care of it. Sometimes its not really stopped.\n  };\n\n  /**\n   * An XHR request has reported progress.\n   * @method _handleProgress\n   * @param {Object} event The XHR progress event.\n   * @private\n   */\n  p._handleProgress = function (event) {\n    if (!event || event.loaded > 0 && event.total == 0) {\n      return; // Sometimes we get no \"total\", so just ignore the progress event.\n    }\n\n    var newEvent = new createjs.ProgressEvent(event.loaded, event.total);\n    this.dispatchEvent(newEvent);\n  };\n\n  // protected methods\n  p._clean = function () {\n    this._tag.removeEventListener && this._tag.removeEventListener(\"canplaythrough\", this._loadedHandler);\n    this._tag.removeEventListener(\"stalled\", this._stalledCallback);\n    this._tag.removeEventListener(\"progress\", this._progressCallback);\n    this.TagRequest__clean();\n  };\n  createjs.MediaTagRequest = createjs.promote(MediaTagRequest, \"TagRequest\");\n})();\n\n//##############################################################################\n// XHRRequest.js\n//##############################################################################\n\n(function () {\n  \"use strict\";\n\n  // constructor\n  /**\n   * A preloader that loads items using XHR requests, usually XMLHttpRequest. However XDomainRequests will be used\n   * for cross-domain requests if possible, and older versions of IE fall back on to ActiveX objects when necessary.\n   * XHR requests load the content as text or binary data, provide progress and consistent completion events, and\n   * can be canceled during load. Note that XHR is not supported in IE 6 or earlier, and is not recommended for\n   * cross-domain loading.\n   * @class XHRRequest\n   * @constructor\n   * @param {Object} item The object that defines the file to load. Please see the {{#crossLink \"LoadQueue/loadFile\"}}{{/crossLink}}\n   * for an overview of supported file properties.\n   * @extends AbstractLoader\n   */\n  function XHRRequest(item) {\n    this.AbstractRequest_constructor(item);\n\n    // protected properties\n    /**\n     * A reference to the XHR request used to load the content.\n     * @property _request\n     * @type {XMLHttpRequest | XDomainRequest | ActiveX.XMLHTTP}\n     * @private\n     */\n    this._request = null;\n\n    /**\n     * A manual load timeout that is used for browsers that do not support the onTimeout event on XHR (XHR level 1,\n     * typically IE9).\n     * @property _loadTimeout\n     * @type {Number}\n     * @private\n     */\n    this._loadTimeout = null;\n\n    /**\n     * The browser's XHR (XMLHTTPRequest) version. Supported versions are 1 and 2. There is no official way to detect\n     * the version, so we use capabilities to make a best guess.\n     * @property _xhrLevel\n     * @type {Number}\n     * @default 1\n     * @private\n     */\n    this._xhrLevel = 1;\n\n    /**\n     * The response of a loaded file. This is set because it is expensive to look up constantly. This property will be\n     * null until the file is loaded.\n     * @property _response\n     * @type {mixed}\n     * @private\n     */\n    this._response = null;\n\n    /**\n     * The response of the loaded file before it is modified. In most cases, content is converted from raw text to\n     * an HTML tag or a formatted object which is set to the <code>result</code> property, but the developer may still\n     * want to access the raw content as it was loaded.\n     * @property _rawResponse\n     * @type {String|Object}\n     * @private\n     */\n    this._rawResponse = null;\n    this._canceled = false;\n\n    // Setup our event handlers now.\n    this._handleLoadStartProxy = createjs.proxy(this._handleLoadStart, this);\n    this._handleProgressProxy = createjs.proxy(this._handleProgress, this);\n    this._handleAbortProxy = createjs.proxy(this._handleAbort, this);\n    this._handleErrorProxy = createjs.proxy(this._handleError, this);\n    this._handleTimeoutProxy = createjs.proxy(this._handleTimeout, this);\n    this._handleLoadProxy = createjs.proxy(this._handleLoad, this);\n    this._handleReadyStateChangeProxy = createjs.proxy(this._handleReadyStateChange, this);\n    if (!this._createXHR(item)) {\n      //TODO: Throw error?\n    }\n  }\n  ;\n  var p = createjs.extend(XHRRequest, createjs.AbstractRequest);\n\n  // static properties\n  /**\n   * A list of XMLHTTP object IDs to try when building an ActiveX object for XHR requests in earlier versions of IE.\n   * @property ACTIVEX_VERSIONS\n   * @type {Array}\n   * @since 0.4.2\n   * @private\n   */\n  XHRRequest.ACTIVEX_VERSIONS = [\"Msxml2.XMLHTTP.6.0\", \"Msxml2.XMLHTTP.5.0\", \"Msxml2.XMLHTTP.4.0\", \"MSXML2.XMLHTTP.3.0\", \"MSXML2.XMLHTTP\", \"Microsoft.XMLHTTP\"];\n\n  // Public methods\n  /**\n   * Look up the loaded result.\n   * @method getResult\n   * @param {Boolean} [raw=false] Return a raw result instead of a formatted result. This applies to content\n   * loaded via XHR such as scripts, XML, CSS, and Images. If there is no raw result, the formatted result will be\n   * returned instead.\n   * @return {Object} A result object containing the content that was loaded, such as:\n   * <ul>\n   *      <li>An image tag (&lt;image /&gt;) for images</li>\n   *      <li>A script tag for JavaScript (&lt;script /&gt;). Note that scripts loaded with tags may be added to the\n   *      HTML head.</li>\n   *      <li>A style tag for CSS (&lt;style /&gt;)</li>\n   *      <li>Raw text for TEXT</li>\n   *      <li>A formatted JavaScript object defined by JSON</li>\n   *      <li>An XML document</li>\n   *      <li>An binary arraybuffer loaded by XHR</li>\n   * </ul>\n   * Note that if a raw result is requested, but not found, the result will be returned instead.\n   */\n  p.getResult = function (raw) {\n    if (raw && this._rawResponse) {\n      return this._rawResponse;\n    }\n    return this._response;\n  };\n\n  // Overrides abstract method in AbstractRequest\n  p.cancel = function () {\n    this.canceled = true;\n    this._clean();\n    this._request.abort();\n  };\n\n  // Overrides abstract method in AbstractLoader\n  p.load = function () {\n    if (this._request == null) {\n      this._handleError();\n      return;\n    }\n\n    //Events\n    if (this._request.addEventListener != null) {\n      this._request.addEventListener(\"loadstart\", this._handleLoadStartProxy, false);\n      this._request.addEventListener(\"progress\", this._handleProgressProxy, false);\n      this._request.addEventListener(\"abort\", this._handleAbortProxy, false);\n      this._request.addEventListener(\"error\", this._handleErrorProxy, false);\n      this._request.addEventListener(\"timeout\", this._handleTimeoutProxy, false);\n\n      // Note: We don't get onload in all browsers (earlier FF and IE). onReadyStateChange handles these.\n      this._request.addEventListener(\"load\", this._handleLoadProxy, false);\n      this._request.addEventListener(\"readystatechange\", this._handleReadyStateChangeProxy, false);\n    } else {\n      // IE9 support\n      this._request.onloadstart = this._handleLoadStartProxy;\n      this._request.onprogress = this._handleProgressProxy;\n      this._request.onabort = this._handleAbortProxy;\n      this._request.onerror = this._handleErrorProxy;\n      this._request.ontimeout = this._handleTimeoutProxy;\n\n      // Note: We don't get onload in all browsers (earlier FF and IE). onReadyStateChange handles these.\n      this._request.onload = this._handleLoadProxy;\n      this._request.onreadystatechange = this._handleReadyStateChangeProxy;\n    }\n\n    // Set up a timeout if we don't have XHR2\n    if (this._xhrLevel == 1) {\n      this._loadTimeout = setTimeout(createjs.proxy(this._handleTimeout, this), this._item.loadTimeout);\n    }\n\n    // Sometimes we get back 404s immediately, particularly when there is a cross origin request.  // note this does not catch in Chrome\n    try {\n      if (!this._item.values || this._item.method == createjs.AbstractLoader.GET) {\n        this._request.send();\n      } else if (this._item.method == createjs.AbstractLoader.POST) {\n        this._request.send(createjs.RequestUtils.formatQueryString(this._item.values));\n      }\n    } catch (error) {\n      this.dispatchEvent(new createjs.ErrorEvent(\"XHR_SEND\", null, error));\n    }\n  };\n  p.setResponseType = function (type) {\n    // Some old browsers doesn't support blob, so we convert arraybuffer to blob after response is downloaded\n    if (type === 'blob') {\n      type = window.URL ? 'blob' : 'arraybuffer';\n      this._responseType = type;\n    }\n    this._request.responseType = type;\n  };\n\n  /**\n   * Get all the response headers from the XmlHttpRequest.\n   *\n   * <strong>From the docs:</strong> Return all the HTTP headers, excluding headers that are a case-insensitive match\n   * for Set-Cookie or Set-Cookie2, as a single string, with each header line separated by a U+000D CR U+000A LF pair,\n   * excluding the status line, and with each header name and header value separated by a U+003A COLON U+0020 SPACE\n   * pair.\n   * @method getAllResponseHeaders\n   * @return {String}\n   * @since 0.4.1\n   */\n  p.getAllResponseHeaders = function () {\n    if (this._request.getAllResponseHeaders instanceof Function) {\n      return this._request.getAllResponseHeaders();\n    } else {\n      return null;\n    }\n  };\n\n  /**\n   * Get a specific response header from the XmlHttpRequest.\n   *\n   * <strong>From the docs:</strong> Returns the header field value from the response of which the field name matches\n   * header, unless the field name is Set-Cookie or Set-Cookie2.\n   * @method getResponseHeader\n   * @param {String} header The header name to retrieve.\n   * @return {String}\n   * @since 0.4.1\n   */\n  p.getResponseHeader = function (header) {\n    if (this._request.getResponseHeader instanceof Function) {\n      return this._request.getResponseHeader(header);\n    } else {\n      return null;\n    }\n  };\n\n  // protected methods\n  /**\n   * The XHR request has reported progress.\n   * @method _handleProgress\n   * @param {Object} event The XHR progress event.\n   * @private\n   */\n  p._handleProgress = function (event) {\n    if (!event || event.loaded > 0 && event.total == 0) {\n      return; // Sometimes we get no \"total\", so just ignore the progress event.\n    }\n\n    var newEvent = new createjs.ProgressEvent(event.loaded, event.total);\n    this.dispatchEvent(newEvent);\n  };\n\n  /**\n   * The XHR request has reported a load start.\n   * @method _handleLoadStart\n   * @param {Object} event The XHR loadStart event.\n   * @private\n   */\n  p._handleLoadStart = function (event) {\n    clearTimeout(this._loadTimeout);\n    this.dispatchEvent(\"loadstart\");\n  };\n\n  /**\n   * The XHR request has reported an abort event.\n   * @method handleAbort\n   * @param {Object} event The XHR abort event.\n   * @private\n   */\n  p._handleAbort = function (event) {\n    this._clean();\n    this.dispatchEvent(new createjs.ErrorEvent(\"XHR_ABORTED\", null, event));\n  };\n\n  /**\n   * The XHR request has reported an error event.\n   * @method _handleError\n   * @param {Object} event The XHR error event.\n   * @private\n   */\n  p._handleError = function (event) {\n    this._clean();\n    this.dispatchEvent(new createjs.ErrorEvent(event.message));\n  };\n\n  /**\n   * The XHR request has reported a readyState change. Note that older browsers (IE 7 & 8) do not provide an onload\n   * event, so we must monitor the readyStateChange to determine if the file is loaded.\n   * @method _handleReadyStateChange\n   * @param {Object} event The XHR readyStateChange event.\n   * @private\n   */\n  p._handleReadyStateChange = function (event) {\n    if (this._request.readyState == 4) {\n      this._handleLoad();\n    }\n  };\n\n  /**\n   * The XHR request has completed. This is called by the XHR request directly, or by a readyStateChange that has\n   * <code>request.readyState == 4</code>. Only the first call to this method will be processed.\n   * @method _handleLoad\n   * @param {Object} event The XHR load event.\n   * @private\n   */\n  p._handleLoad = function (event) {\n    if (this.loaded) {\n      return;\n    }\n    this.loaded = true;\n    var error = this._checkError();\n    if (error) {\n      this._handleError(error);\n      return;\n    }\n    this._response = this._getResponse();\n    // Convert arraybuffer back to blob\n    if (this._responseType === 'arraybuffer') {\n      try {\n        this._response = new Blob([this._response]);\n      } catch (e) {\n        // Fallback to use BlobBuilder if Blob constructor is not supported\n        // Tested on Android 2.3 ~ 4.2 and iOS5 safari\n        window.BlobBuilder = window.BlobBuilder || window.WebKitBlobBuilder || window.MozBlobBuilder || window.MSBlobBuilder;\n        if (e.name === 'TypeError' && window.BlobBuilder) {\n          var builder = new BlobBuilder();\n          builder.append(this._response);\n          this._response = builder.getBlob();\n        }\n      }\n    }\n    this._clean();\n    this.dispatchEvent(new createjs.Event(\"complete\"));\n  };\n\n  /**\n   * The XHR request has timed out. This is called by the XHR request directly, or via a <code>setTimeout</code>\n   * callback.\n   * @method _handleTimeout\n   * @param {Object} [event] The XHR timeout event. This is occasionally null when called by the backup setTimeout.\n   * @private\n   */\n  p._handleTimeout = function (event) {\n    this._clean();\n    this.dispatchEvent(new createjs.ErrorEvent(\"PRELOAD_TIMEOUT\", null, event));\n  };\n\n  // Protected\n  /**\n   * Determine if there is an error in the current load. This checks the status of the request for problem codes. Note\n   * that this does not check for an actual response. Currently, it only checks for 404 or 0 error code.\n   * @method _checkError\n   * @return {int} If the request status returns an error code.\n   * @private\n   */\n  p._checkError = function () {\n    //LM: Probably need additional handlers here, maybe 501\n    var status = parseInt(this._request.status);\n    switch (status) {\n      case 404: // Not Found\n      case 0:\n        // Not Loaded\n        return new Error(status);\n    }\n    return null;\n  };\n\n  /**\n   * Validate the response. Different browsers have different approaches, some of which throw errors when accessed\n   * in other browsers. If there is no response, the <code>_response</code> property will remain null.\n   * @method _getResponse\n   * @private\n   */\n  p._getResponse = function () {\n    if (this._response != null) {\n      return this._response;\n    }\n    if (this._request.response != null) {\n      return this._request.response;\n    }\n\n    // Android 2.2 uses .responseText\n    try {\n      if (this._request.responseText != null) {\n        return this._request.responseText;\n      }\n    } catch (e) {}\n\n    // When loading XML, IE9 does not return .response, instead it returns responseXML.xml\n    try {\n      if (this._request.responseXML != null) {\n        return this._request.responseXML;\n      }\n    } catch (e) {}\n    return null;\n  };\n\n  /**\n   * Create an XHR request. Depending on a number of factors, we get totally different results.\n   * <ol><li>Some browsers get an <code>XDomainRequest</code> when loading cross-domain.</li>\n   *      <li>XMLHttpRequest are created when available.</li>\n   *      <li>ActiveX.XMLHTTP objects are used in older IE browsers.</li>\n   *      <li>Text requests override the mime type if possible</li>\n   *      <li>Origin headers are sent for crossdomain requests in some browsers.</li>\n   *      <li>Binary loads set the response type to \"arraybuffer\"</li></ol>\n   * @method _createXHR\n   * @param {Object} item The requested item that is being loaded.\n   * @return {Boolean} If an XHR request or equivalent was successfully created.\n   * @private\n   */\n  p._createXHR = function (item) {\n    // Check for cross-domain loads. We can't fully support them, but we can try.\n    var crossdomain = createjs.RequestUtils.isCrossDomain(item);\n    var headers = {};\n\n    // Create the request. Fallback to whatever support we have.\n    var req = null;\n    if (window.XMLHttpRequest) {\n      req = new XMLHttpRequest();\n      // This is 8 or 9, so use XDomainRequest instead.\n      if (crossdomain && req.withCredentials === undefined && window.XDomainRequest) {\n        req = new XDomainRequest();\n      }\n    } else {\n      // Old IE versions use a different approach\n      for (var i = 0, l = s.ACTIVEX_VERSIONS.length; i < l; i++) {\n        var axVersion = s.ACTIVEX_VERSIONS[i];\n        try {\n          req = new ActiveXObject(axVersion);\n          break;\n        } catch (e) {}\n      }\n      if (req == null) {\n        return false;\n      }\n    }\n\n    // Default to utf-8 for Text requests.\n    if (item.mimeType == null && createjs.RequestUtils.isText(item.type)) {\n      item.mimeType = \"text/plain; charset=utf-8\";\n    }\n\n    // IE9 doesn't support overrideMimeType(), so we need to check for it.\n    if (item.mimeType && req.overrideMimeType) {\n      req.overrideMimeType(item.mimeType);\n    }\n\n    // Determine the XHR level\n    this._xhrLevel = typeof req.responseType === \"string\" ? 2 : 1;\n    var src = null;\n    if (item.method == createjs.AbstractLoader.GET) {\n      src = createjs.RequestUtils.buildPath(item.src, item.values);\n    } else {\n      src = item.src;\n    }\n\n    // Open the request.  Set cross-domain flags if it is supported (XHR level 1 only)\n    req.open(item.method || createjs.AbstractLoader.GET, src, true);\n    if (crossdomain && req instanceof XMLHttpRequest && this._xhrLevel == 1) {\n      headers[\"Origin\"] = location.origin;\n    }\n\n    // To send data we need to set the Content-type header)\n    if (item.values && item.method == createjs.AbstractLoader.POST) {\n      headers[\"Content-Type\"] = \"application/x-www-form-urlencoded\";\n    }\n    if (!crossdomain && !headers[\"X-Requested-With\"]) {\n      headers[\"X-Requested-With\"] = \"XMLHttpRequest\";\n    }\n    if (item.headers) {\n      for (var n in item.headers) {\n        headers[n] = item.headers[n];\n      }\n    }\n    for (n in headers) {\n      req.setRequestHeader(n, headers[n]);\n    }\n    if (req instanceof XMLHttpRequest && item.withCredentials !== undefined) {\n      req.withCredentials = item.withCredentials;\n    }\n    this._request = req;\n    return true;\n  };\n\n  /**\n   * A request has completed (or failed or canceled), and needs to be disposed.\n   * @method _clean\n   * @private\n   */\n  p._clean = function () {\n    clearTimeout(this._loadTimeout);\n    if (this._request.removeEventListener != null) {\n      this._request.removeEventListener(\"loadstart\", this._handleLoadStartProxy);\n      this._request.removeEventListener(\"progress\", this._handleProgressProxy);\n      this._request.removeEventListener(\"abort\", this._handleAbortProxy);\n      this._request.removeEventListener(\"error\", this._handleErrorProxy);\n      this._request.removeEventListener(\"timeout\", this._handleTimeoutProxy);\n      this._request.removeEventListener(\"load\", this._handleLoadProxy);\n      this._request.removeEventListener(\"readystatechange\", this._handleReadyStateChangeProxy);\n    } else {\n      this._request.onloadstart = null;\n      this._request.onprogress = null;\n      this._request.onabort = null;\n      this._request.onerror = null;\n      this._request.ontimeout = null;\n      this._request.onload = null;\n      this._request.onreadystatechange = null;\n    }\n  };\n  p.toString = function () {\n    return \"[PreloadJS XHRRequest]\";\n  };\n  createjs.XHRRequest = createjs.promote(XHRRequest, \"AbstractRequest\");\n})();\n\n//##############################################################################\n// LoadQueue.js\n//##############################################################################\n\n/*\n TODO: WINDOWS ISSUES\n * No error for HTML audio in IE 678\n * SVG no failure error in IE 67 (maybe 8) TAGS AND XHR\n * No script complete handler in IE 67 TAGS (XHR is fine)\n * No XML/JSON in IE6 TAGS\n * Need to hide loading SVG in Opera TAGS\n * No CSS onload/readystatechange in Safari or Android TAGS (requires rule checking)\n * SVG no load or failure in Opera XHR\n * Reported issues with IE7/8\n */\n\n(function () {\n  \"use strict\";\n\n  // constructor\n  /**\n   * The LoadQueue class is the main API for preloading content. LoadQueue is a load manager, which can preload either\n   * a single file, or queue of files.\n   *\n   * <b>Creating a Queue</b><br />\n   * To use LoadQueue, create a LoadQueue instance. If you want to force tag loading where possible, set the preferXHR\n   * argument to false.\n   *\n   *      var queue = new createjs.LoadQueue(true);\n   *\n   * <b>Listening for Events</b><br />\n   * Add any listeners you want to the queue. Since PreloadJS 0.3.0, the {{#crossLink \"EventDispatcher\"}}{{/crossLink}}\n   * lets you add as many listeners as you want for events. You can subscribe to the following events:<ul>\n   *     <li>{{#crossLink \"AbstractLoader/complete:event\"}}{{/crossLink}}: fired when a queue completes loading all\n   *     files</li>\n   *     <li>{{#crossLink \"AbstractLoader/error:event\"}}{{/crossLink}}: fired when the queue encounters an error with\n   *     any file.</li>\n   *     <li>{{#crossLink \"AbstractLoader/progress:event\"}}{{/crossLink}}: Progress for the entire queue has\n   *     changed.</li>\n   *     <li>{{#crossLink \"LoadQueue/fileload:event\"}}{{/crossLink}}: A single file has completed loading.</li>\n   *     <li>{{#crossLink \"LoadQueue/fileprogress:event\"}}{{/crossLink}}: Progress for a single file has changes. Note\n   *     that only files loaded with XHR (or possibly by plugins) will fire progress events other than 0 or 100%.</li>\n   * </ul>\n   *\n   *      queue.on(\"fileload\", handleFileLoad, this);\n   *      queue.on(\"complete\", handleComplete, this);\n   *\n   * <b>Adding files and manifests</b><br />\n   * Add files you want to load using {{#crossLink \"LoadQueue/loadFile\"}}{{/crossLink}} or add multiple files at a\n   * time using a list or a manifest definition using {{#crossLink \"LoadQueue/loadManifest\"}}{{/crossLink}}. Files are\n   * appended to the end of the active queue, so you can use these methods as many times as you like, whenever you\n   * like.\n   *\n   *      queue.loadFile(\"filePath/file.jpg\");\n   *      queue.loadFile({id:\"image\", src:\"filePath/file.jpg\"});\n   *      queue.loadManifest([\"filePath/file.jpg\", {id:\"image\", src:\"filePath/file.jpg\"}]);\n   *\n   *      // Use an external manifest\n   *      queue.loadManifest(\"path/to/manifest.json\");\n   *      queue.loadManifest({src:\"manifest.json\", type:\"manifest\"});\n   *\n   * If you pass `false` as the `loadNow` parameter, the queue will not kick of the load of the files, but it will not\n   * stop if it has already been started. Call the {{#crossLink \"AbstractLoader/load\"}}{{/crossLink}} method to begin\n   * a paused queue. Note that a paused queue will automatically resume when new files are added to it with a\n   * `loadNow` argument of `true`.\n   *\n   *      queue.load();\n   *\n   * <b>File Types</b><br />\n   * The file type of a manifest item is auto-determined by the file extension. The pattern matching in PreloadJS\n   * should handle the majority of standard file and url formats, and works with common file extensions. If you have\n   * either a non-standard file extension, or are serving the file using a proxy script, then you can pass in a\n   * <code>type</code> property with any manifest item.\n   *\n   *      queue.loadFile({src:\"path/to/myFile.mp3x\", type:createjs.AbstractLoader.SOUND});\n   *\n   *      // Note that PreloadJS will not read a file extension from the query string\n   *      queue.loadFile({src:\"http://server.com/proxy?file=image.jpg\", type:createjs.AbstractLoader.IMAGE});\n   *\n   * Supported types are defined on the {{#crossLink \"AbstractLoader\"}}{{/crossLink}} class, and include:\n   * <ul>\n   *     <li>{{#crossLink \"AbstractLoader/BINARY:property\"}}{{/crossLink}}: Raw binary data via XHR</li>\n   *     <li>{{#crossLink \"AbstractLoader/CSS:property\"}}{{/crossLink}}: CSS files</li>\n   *     <li>{{#crossLink \"AbstractLoader/IMAGE:property\"}}{{/crossLink}}: Common image formats</li>\n   *     <li>{{#crossLink \"AbstractLoader/JAVASCRIPT:property\"}}{{/crossLink}}: JavaScript files</li>\n   *     <li>{{#crossLink \"AbstractLoader/JSON:property\"}}{{/crossLink}}: JSON data</li>\n   *     <li>{{#crossLink \"AbstractLoader/JSONP:property\"}}{{/crossLink}}: JSON files cross-domain</li>\n   *     <li>{{#crossLink \"AbstractLoader/MANIFEST:property\"}}{{/crossLink}}: A list of files to load in JSON format, see\n   *     {{#crossLink \"AbstractLoader/loadManifest\"}}{{/crossLink}}</li>\n   *     <li>{{#crossLink \"AbstractLoader/SOUND:property\"}}{{/crossLink}}: Audio file formats</li>\n   *     <li>{{#crossLink \"AbstractLoader/SPRITESHEET:property\"}}{{/crossLink}}: JSON SpriteSheet definitions. This\n   *     will also load sub-images, and provide a {{#crossLink \"SpriteSheet\"}}{{/crossLink}} instance.</li>\n   *     <li>{{#crossLink \"AbstractLoader/SVG:property\"}}{{/crossLink}}: SVG files</li>\n   *     <li>{{#crossLink \"AbstractLoader/TEXT:property\"}}{{/crossLink}}: Text files - XHR only</li>\n      *     <li>{{#crossLink \"AbstractLoader/VIDEO:property\"}}{{/crossLink}}: Video objects</li>\n   *     <li>{{#crossLink \"AbstractLoader/XML:property\"}}{{/crossLink}}: XML data</li>\n   * </ul>\n   *\n   * <em>Note: Loader types used to be defined on LoadQueue, but have been moved to AbstractLoader for better\n   * portability of loader classes, which can be used individually now. The properties on LoadQueue still exist, but\n   * are deprecated.</em>\n   *\n   * <b>Handling Results</b><br />\n   * When a file is finished downloading, a {{#crossLink \"LoadQueue/fileload:event\"}}{{/crossLink}} event is\n   * dispatched. In an example above, there is an event listener snippet for fileload. Loaded files are usually a\n   * formatted object that can be used immediately, including:\n   * <ul>\n   *     <li>Binary: The binary loaded result</li>\n   *     <li>CSS: A &lt;link /&gt; tag</li>\n   *     <li>Image: An &lt;img /&gt; tag</li>\n   *     <li>JavaScript: A &lt;script /&gt; tag</li>\n   *     <li>JSON/JSONP: A formatted JavaScript Object</li>\n   *     <li>Manifest: A JavaScript object.\n   *     <li>Sound: An &lt;audio /&gt; tag</a>\n   *     <li>SpriteSheet: A {{#crossLink \"SpriteSheet\"}}{{/crossLink}} instance, containing loaded images.\n   *     <li>SVG: An &lt;object /&gt; tag</li>\n   *     <li>Text: Raw text</li>\n      *     <li>Video: A Video DOM node</li>\n   *     <li>XML: An XML DOM node</li>\n   * </ul>\n   *\n   *      function handleFileLoad(event) {\n   *          var item = event.item; // A reference to the item that was passed in to the LoadQueue\n   *          var type = item.type;\n   *\n   *          // Add any images to the page body.\n   *          if (type == createjs.LoadQueue.IMAGE) {\n   *              document.body.appendChild(event.result);\n   *          }\n   *      }\n   *\n   * At any time after the file has been loaded (usually after the queue has completed), any result can be looked up\n   * via its \"id\" using {{#crossLink \"LoadQueue/getResult\"}}{{/crossLink}}. If no id was provided, then the\n   * \"src\" or file path can be used instead, including the `path` defined by a manifest, but <strong>not including</strong>\n   * a base path defined on the LoadQueue. It is recommended to always pass an id if you want to look up content.\n   *\n   *      var image = queue.getResult(\"image\");\n   *      document.body.appendChild(image);\n   *\n   * Raw loaded content can be accessed using the <code>rawResult</code> property of the {{#crossLink \"LoadQueue/fileload:event\"}}{{/crossLink}}\n   * event, or can be looked up using {{#crossLink \"LoadQueue/getResult\"}}{{/crossLink}}, passing `true` as the 2nd\n   * argument. This is only applicable for content that has been parsed for the browser, specifically: JavaScript,\n   * CSS, XML, SVG, and JSON objects, or anything loaded with XHR.\n   *\n   *      var image = queue.getResult(\"image\", true); // load the binary image data loaded with XHR.\n   *\n   * <b>Plugins</b><br />\n   * LoadQueue has a simple plugin architecture to help process and preload content. For example, to preload audio,\n   * make sure to install the <a href=\"http://soundjs.com\">SoundJS</a> Sound class, which will help load HTML audio,\n   * Flash audio, and WebAudio files. This should be installed <strong>before</strong> loading any audio files.\n   *\n   *      queue.installPlugin(createjs.Sound);\n   *\n   * <h4>Known Browser Issues</h4>\n   * <ul>\n   *     <li>Browsers without audio support can not load audio files.</li>\n   *     <li>Safari on Mac OS X can only play HTML audio if QuickTime is installed</li>\n   *     <li>HTML Audio tags will only download until their <code>canPlayThrough</code> event is fired. Browsers other\n   *     than Chrome will continue to download in the background.</li>\n   *     <li>When loading scripts using tags, they are automatically added to the document.</li>\n   *     <li>Scripts loaded via XHR may not be properly inspectable with browser tools.</li>\n   *     <li>IE6 and IE7 (and some other browsers) may not be able to load XML, Text, or JSON, since they require\n   *     XHR to work.</li>\n   *     <li>Content loaded via tags will not show progress, and will continue to download in the background when\n   *     canceled, although no events will be dispatched.</li>\n   * </ul>\n   *\n   * @class LoadQueue\n   * @param {Boolean} [preferXHR=true] Determines whether the preload instance will favor loading with XHR (XML HTTP\n   * Requests), or HTML tags. When this is `false`, the queue will use tag loading when possible, and fall back on XHR\n   * when necessary.\n   * @param {String} [basePath=\"\"] A path that will be prepended on to the source parameter of all items in the queue\n   * before they are loaded.  Sources beginning with a protocol such as `http://` or a relative path such as `../`\n   * will not receive a base path.\n   * @param {String|Boolean} [crossOrigin=\"\"] An optional flag to support images loaded from a CORS-enabled server. To\n   * use it, set this value to `true`, which will default the crossOrigin property on images to \"Anonymous\". Any\n   * string value will be passed through, but only \"\" and \"Anonymous\" are recommended. <strong>Note: The crossOrigin\n   * parameter is deprecated. Use LoadItem.crossOrigin instead</strong>\n   *\n   * @constructor\n   * @extends AbstractLoader\n   */\n  function LoadQueue(preferXHR, basePath, crossOrigin) {\n    this.AbstractLoader_constructor();\n\n    /**\n     * An array of the plugins registered using {{#crossLink \"LoadQueue/installPlugin\"}}{{/crossLink}}.\n     * @property _plugins\n     * @type {Array}\n     * @private\n     * @since 0.6.1\n     */\n    this._plugins = [];\n\n    /**\n     * An object hash of callbacks that are fired for each file type before the file is loaded, giving plugins the\n     * ability to override properties of the load. Please see the {{#crossLink \"LoadQueue/installPlugin\"}}{{/crossLink}}\n     * method for more information.\n     * @property _typeCallbacks\n     * @type {Object}\n     * @private\n     */\n    this._typeCallbacks = {};\n\n    /**\n     * An object hash of callbacks that are fired for each file extension before the file is loaded, giving plugins the\n     * ability to override properties of the load. Please see the {{#crossLink \"LoadQueue/installPlugin\"}}{{/crossLink}}\n     * method for more information.\n     * @property _extensionCallbacks\n     * @type {null}\n     * @private\n     */\n    this._extensionCallbacks = {};\n\n    /**\n     * The next preload queue to process when this one is complete. If an error is thrown in the current queue, and\n     * {{#crossLink \"LoadQueue/stopOnError:property\"}}{{/crossLink}} is `true`, the next queue will not be processed.\n     * @property next\n     * @type {LoadQueue}\n     * @default null\n     */\n    this.next = null;\n\n    /**\n     * Ensure loaded scripts \"complete\" in the order they are specified. Loaded scripts are added to the document head\n     * once they are loaded. Scripts loaded via tags will load one-at-a-time when this property is `true`, whereas\n     * scripts loaded using XHR can load in any order, but will \"finish\" and be added to the document in the order\n     * specified.\n     *\n     * Any items can be set to load in order by setting the {{#crossLink \"maintainOrder:property\"}}{{/crossLink}}\n     * property on the load item, or by ensuring that only one connection can be open at a time using\n     * {{#crossLink \"LoadQueue/setMaxConnections\"}}{{/crossLink}}. Note that when the `maintainScriptOrder` property\n     * is set to `true`, scripts items are automatically set to `maintainOrder=true`, and changing the\n     * `maintainScriptOrder` to `false` during a load will not change items already in a queue.\n     *\n     * <h4>Example</h4>\n     *\n     *      var queue = new createjs.LoadQueue();\n     *      queue.setMaxConnections(3); // Set a higher number to load multiple items at once\n     *      queue.maintainScriptOrder = true; // Ensure scripts are loaded in order\n     *      queue.loadManifest([\n     *          \"script1.js\",\n     *          \"script2.js\",\n     *          \"image.png\", // Load any time\n     *          {src: \"image2.png\", maintainOrder: true} // Will wait for script2.js\n     *          \"image3.png\",\n     *          \"script3.js\" // Will wait for image2.png before loading (or completing when loading with XHR)\n     *      ]);\n     *\n     * @property maintainScriptOrder\n     * @type {Boolean}\n     * @default true\n     */\n    this.maintainScriptOrder = true;\n\n    /**\n     * Determines if the LoadQueue will stop processing the current queue when an error is encountered.\n     * @property stopOnError\n     * @type {Boolean}\n     * @default false\n     */\n    this.stopOnError = false;\n\n    /**\n     * The number of maximum open connections that a loadQueue tries to maintain. Please see\n     * {{#crossLink \"LoadQueue/setMaxConnections\"}}{{/crossLink}} for more information.\n     * @property _maxConnections\n     * @type {Number}\n     * @default 1\n     * @private\n     */\n    this._maxConnections = 1;\n\n    /**\n     * An internal list of all the default Loaders that are included with PreloadJS. Before an item is loaded, the\n     * available loader list is iterated, in the order they are included, and as soon as a loader indicates it can\n     * handle the content, it will be selected. The default loader, ({{#crossLink \"TextLoader\"}}{{/crossLink}} is\n     * last in the list, so it will be used if no other match is found. Typically, loaders will match based on the\n     * {{#crossLink \"LoadItem/type\"}}{{/crossLink}}, which is automatically determined using the file extension of\n     * the {{#crossLink \"LoadItem/src:property\"}}{{/crossLink}}.\n     *\n     * Loaders can be removed from PreloadJS by simply not including them.\n     *\n     * Custom loaders installed using {{#crossLink \"registerLoader\"}}{{/crossLink}} will be prepended to this list\n     * so that they are checked first.\n     * @property _availableLoaders\n     * @type {Array}\n     * @private\n     * @since 0.6.0\n     */\n    this._availableLoaders = [createjs.ImageLoader, createjs.JavaScriptLoader, createjs.CSSLoader, createjs.JSONLoader, createjs.JSONPLoader, createjs.SoundLoader, createjs.ManifestLoader, createjs.SpriteSheetLoader, createjs.XMLLoader, createjs.SVGLoader, createjs.BinaryLoader, createjs.VideoLoader, createjs.TextLoader];\n\n    /**\n     * The number of built in loaders, so they can't be removed by {{#crossLink \"unregisterLoader\"}}{{/crossLink}.\n    \t\t * @property _defaultLoaderLength\n     * @type {Number}\n     * @private\n     * @since 0.6.0\n     */\n    this._defaultLoaderLength = this._availableLoaders.length;\n    this.init(preferXHR, basePath, crossOrigin);\n  }\n  var p = createjs.extend(LoadQueue, createjs.AbstractLoader);\n  var s = LoadQueue;\n\n  /**\n   * <strong>REMOVED</strong>. Removed in favor of using `MySuperClass_constructor`.\n   * See {{#crossLink \"Utility Methods/extend\"}}{{/crossLink}} and {{#crossLink \"Utility Methods/promote\"}}{{/crossLink}}\n   * for details.\n   *\n   * There is an inheritance tutorial distributed with EaselJS in /tutorials/Inheritance.\n   *\n   * @method initialize\n   * @protected\n   * @deprecated\n   */\n  // p.initialize = function() {}; // searchable for devs wondering where it is.\n\n  /**\n   * An internal initialization method, which is used for initial set up, but also to reset the LoadQueue.\n   * @method init\n   * @param preferXHR\n   * @param basePath\n   * @param crossOrigin\n   * @private\n   */\n  p.init = function (preferXHR, basePath, crossOrigin) {\n    // public properties\n    /**\n     * @property useXHR\n     * @type {Boolean}\n     * @readonly\n     * @default true\n     * @deprecated Use preferXHR instead.\n     */\n    this.useXHR = true;\n\n    /**\n     * Try and use XMLHttpRequest (XHR) when possible. Note that LoadQueue will default to tag loading or XHR\n     * loading depending on the requirements for a media type. For example, HTML audio can not be loaded with XHR,\n     * and plain text can not be loaded with tags, so it will default the the correct type instead of using the\n     * user-defined type.\n     * @type {Boolean}\n     * @default true\n     * @since 0.6.0\n     */\n    this.preferXHR = true; //TODO: Get/Set\n    this._preferXHR = true;\n    this.setPreferXHR(preferXHR);\n\n    // protected properties\n    /**\n     * Whether the queue is currently paused or not.\n     * @property _paused\n     * @type {boolean}\n     * @private\n     */\n    this._paused = false;\n\n    /**\n     * A path that will be prepended on to the item's {{#crossLink \"LoadItem/src:property\"}}{{/crossLink}}. The\n     * `_basePath` property will only be used if an item's source is relative, and does not include a protocol such\n     * as `http://`, or a relative path such as `../`.\n     * @property _basePath\n     * @type {String}\n     * @private\n     * @since 0.3.1\n     */\n    this._basePath = basePath;\n\n    /**\n     * An optional flag to set on images that are loaded using PreloadJS, which enables CORS support. Images loaded\n     * cross-domain by servers that support CORS require the crossOrigin flag to be loaded and interacted with by\n     * a canvas. When loading locally, or with a server with no CORS support, this flag can cause other security issues,\n     * so it is recommended to only set it if you are sure the server supports it. Currently, supported values are \"\"\n     * and \"Anonymous\".\n     * @property _crossOrigin\n     * @type {String}\n     * @default \"\"\n     * @private\n     * @since 0.4.1\n     */\n    this._crossOrigin = crossOrigin;\n\n    /**\n     * Determines if the loadStart event was dispatched already. This event is only fired one time, when the first\n     * file is requested.\n     * @property _loadStartWasDispatched\n     * @type {Boolean}\n     * @default false\n     * @private\n     */\n    this._loadStartWasDispatched = false;\n\n    /**\n     * Determines if there is currently a script loading. This helps ensure that only a single script loads at once when\n     * using a script tag to do preloading.\n     * @property _currentlyLoadingScript\n     * @type {Boolean}\n     * @private\n     */\n    this._currentlyLoadingScript = null;\n\n    /**\n     * An array containing the currently downloading files.\n     * @property _currentLoads\n     * @type {Array}\n     * @private\n     */\n    this._currentLoads = [];\n\n    /**\n     * An array containing the queued items that have not yet started downloading.\n     * @property _loadQueue\n     * @type {Array}\n     * @private\n     */\n    this._loadQueue = [];\n\n    /**\n     * An array containing downloads that have not completed, so that the LoadQueue can be properly reset.\n     * @property _loadQueueBackup\n     * @type {Array}\n     * @private\n     */\n    this._loadQueueBackup = [];\n\n    /**\n     * An object hash of items that have finished downloading, indexed by the {{#crossLink \"LoadItem\"}}{{/crossLink}}\n     * id.\n     * @property _loadItemsById\n     * @type {Object}\n     * @private\n     */\n    this._loadItemsById = {};\n\n    /**\n     * An object hash of items that have finished downloading, indexed by {{#crossLink \"LoadItem\"}}{{/crossLink}}\n     * source.\n     * @property _loadItemsBySrc\n     * @type {Object}\n     * @private\n     */\n    this._loadItemsBySrc = {};\n\n    /**\n     * An object hash of loaded items, indexed by the ID of the {{#crossLink \"LoadItem\"}}{{/crossLink}}.\n     * @property _loadedResults\n     * @type {Object}\n     * @private\n     */\n    this._loadedResults = {};\n\n    /**\n     * An object hash of un-parsed loaded items, indexed by the ID of the {{#crossLink \"LoadItem\"}}{{/crossLink}}.\n     * @property _loadedRawResults\n     * @type {Object}\n     * @private\n     */\n    this._loadedRawResults = {};\n\n    /**\n     * The number of items that have been requested. This helps manage an overall progress without knowing how large\n     * the files are before they are downloaded. This does not include items inside of loaders such as the\n     * {{#crossLink \"ManifestLoader\"}}{{/crossLink}}.\n     * @property _numItems\n     * @type {Number}\n     * @default 0\n     * @private\n     */\n    this._numItems = 0;\n\n    /**\n     * The number of items that have completed loaded. This helps manage an overall progress without knowing how large\n     * the files are before they are downloaded.\n     * @property _numItemsLoaded\n     * @type {Number}\n     * @default 0\n     * @private\n     */\n    this._numItemsLoaded = 0;\n\n    /**\n     * A list of scripts in the order they were requested. This helps ensure that scripts are \"completed\" in the right\n     * order.\n     * @property _scriptOrder\n     * @type {Array}\n     * @private\n     */\n    this._scriptOrder = [];\n\n    /**\n     * A list of scripts that have been loaded. Items are added to this list as <code>null</code> when they are\n     * requested, contain the loaded item if it has completed, but not been dispatched to the user, and <code>true</true>\n     * once they are complete and have been dispatched.\n     * @property _loadedScripts\n     * @type {Array}\n     * @private\n     */\n    this._loadedScripts = [];\n\n    /**\n     * The last progress amount. This is used to suppress duplicate progress events.\n     * @property _lastProgress\n     * @type {Number}\n     * @private\n     * @since 0.6.0\n     */\n    this._lastProgress = NaN;\n  };\n\n  // static properties\n  /**\n   * The time in milliseconds to assume a load has failed. An {{#crossLink \"AbstractLoader/error:event\"}}{{/crossLink}}\n   * event is dispatched if the timeout is reached before any data is received.\n   * @property loadTimeout\n   * @type {Number}\n   * @default 8000\n   * @static\n   * @since 0.4.1\n   * @deprecated In favour of {{#crossLink \"LoadItem/LOAD_TIMEOUT_DEFAULT:property}}{{/crossLink}} property.\n   */\n  s.loadTimeout = 8000;\n\n  /**\n   * The time in milliseconds to assume a load has failed.\n   * @property LOAD_TIMEOUT\n   * @type {Number}\n   * @default 0\n   * @deprecated in favor of the {{#crossLink \"LoadQueue/loadTimeout:property\"}}{{/crossLink}} property.\n   */\n  s.LOAD_TIMEOUT = 0;\n\n  // Preload Types\n  /**\n   * @property BINARY\n   * @type {String}\n   * @default binary\n   * @static\n   * @deprecated Use the AbstractLoader {{#crossLink \"AbstractLoader/BINARY:property\"}}{{/crossLink}} instead.\n   */\n  s.BINARY = createjs.AbstractLoader.BINARY;\n\n  /**\n   * @property CSS\n   * @type {String}\n   * @default css\n   * @static\n   * @deprecated Use the AbstractLoader {{#crossLink \"AbstractLoader/CSS:property\"}}{{/crossLink}} instead.\n   */\n  s.CSS = createjs.AbstractLoader.CSS;\n\n  /**\n   * @property IMAGE\n   * @type {String}\n   * @default image\n   * @static\n   * @deprecated Use the AbstractLoader {{#crossLink \"AbstractLoader/CSS:property\"}}{{/crossLink}} instead.\n   */\n  s.IMAGE = createjs.AbstractLoader.IMAGE;\n\n  /**\n   * @property JAVASCRIPT\n   * @type {String}\n   * @default javascript\n   * @static\n   * @deprecated Use the AbstractLoader {{#crossLink \"AbstractLoader/JAVASCRIPT:property\"}}{{/crossLink}} instead.\n   */\n  s.JAVASCRIPT = createjs.AbstractLoader.JAVASCRIPT;\n\n  /**\n   * @property JSON\n   * @type {String}\n   * @default json\n   * @static\n   * @deprecated Use the AbstractLoader {{#crossLink \"AbstractLoader/JSON:property\"}}{{/crossLink}} instead.\n   */\n  s.JSON = createjs.AbstractLoader.JSON;\n\n  /**\n   * @property JSONP\n   * @type {String}\n   * @default jsonp\n   * @static\n   * @deprecated Use the AbstractLoader {{#crossLink \"AbstractLoader/JSONP:property\"}}{{/crossLink}} instead.\n   */\n  s.JSONP = createjs.AbstractLoader.JSONP;\n\n  /**\n   * @property MANIFEST\n   * @type {String}\n   * @default manifest\n   * @static\n   * @since 0.4.1\n   * @deprecated Use the AbstractLoader {{#crossLink \"AbstractLoader/MANIFEST:property\"}}{{/crossLink}} instead.\n   */\n  s.MANIFEST = createjs.AbstractLoader.MANIFEST;\n\n  /**\n   * @property SOUND\n   * @type {String}\n   * @default sound\n   * @static\n   * @deprecated Use the AbstractLoader {{#crossLink \"AbstractLoader/JAVASCRIPT:property\"}}{{/crossLink}} instead.\n   */\n  s.SOUND = createjs.AbstractLoader.SOUND;\n\n  /**\n   * @property VIDEO\n   * @type {String}\n   * @default video\n   * @static\n   * @deprecated Use the AbstractLoader {{#crossLink \"AbstractLoader/JAVASCRIPT:property\"}}{{/crossLink}} instead.\n   */\n  s.VIDEO = createjs.AbstractLoader.VIDEO;\n\n  /**\n   * @property SVG\n   * @type {String}\n   * @default svg\n   * @static\n   * @deprecated Use the AbstractLoader {{#crossLink \"AbstractLoader/SVG:property\"}}{{/crossLink}} instead.\n   */\n  s.SVG = createjs.AbstractLoader.SVG;\n\n  /**\n   * @property TEXT\n   * @type {String}\n   * @default text\n   * @static\n   * @deprecated Use the AbstractLoader {{#crossLink \"AbstractLoader/TEXT:property\"}}{{/crossLink}} instead.\n   */\n  s.TEXT = createjs.AbstractLoader.TEXT;\n\n  /**\n   * @property XML\n   * @type {String}\n   * @default xml\n   * @static\n   * @deprecated Use the AbstractLoader {{#crossLink \"AbstractLoader/XML:property\"}}{{/crossLink}} instead.\n   */\n  s.XML = createjs.AbstractLoader.XML;\n\n  /**\n   * @property POST\n   * @type {string}\n   * @deprecated Use the AbstractLoader {{#crossLink \"AbstractLoader/POST:property\"}}{{/crossLink}} instead.\n   */\n  s.POST = createjs.AbstractLoader.POST;\n\n  /**\n   * @property GET\n   * @type {string}\n   * @deprecated Use the AbstractLoader {{#crossLink \"AbstractLoader/GET:property\"}}{{/crossLink}} instead.\n   */\n  s.GET = createjs.AbstractLoader.GET;\n\n  // events\n  /**\n   * This event is fired when an individual file has loaded, and been processed.\n   * @event fileload\n   * @param {Object} target The object that dispatched the event.\n   * @param {String} type The event type.\n   * @param {Object} item The file item which was specified in the {{#crossLink \"LoadQueue/loadFile\"}}{{/crossLink}}\n   * or {{#crossLink \"LoadQueue/loadManifest\"}}{{/crossLink}} call. If only a string path or tag was specified, the\n   * object will contain that value as a `src` property.\n   * @param {Object} result The HTML tag or parsed result of the loaded item.\n   * @param {Object} rawResult The unprocessed result, usually the raw text or binary data before it is converted\n   * to a usable object.\n   * @since 0.3.0\n   */\n\n  /**\n   * This {{#crossLink \"ProgressEvent\"}}{{/crossLink}} that is fired when an an individual file's progress changes.\n   * @event fileprogress\n   * @since 0.3.0\n   */\n\n  /**\n   * This event is fired when an individual file starts to load.\n   * @event filestart\n   * @param {Object} The object that dispatched the event.\n   * @param {String} type The event type.\n   * @param {Object} item The file item which was specified in the {{#crossLink \"LoadQueue/loadFile\"}}{{/crossLink}}\n   * or {{#crossLink \"LoadQueue/loadManifest\"}}{{/crossLink}} call. If only a string path or tag was specified, the\n   * object will contain that value as a property.\n   */\n\n  /**\n   * Although it extends {{#crossLink \"AbstractLoader\"}}{{/crossLink}}, the `initialize` event is never fired from\n   * a LoadQueue instance.\n   * @event initialize\n   * @private\n   */\n\n  // public methods\n  /**\n   * Register a custom loaders class. New loaders are given precedence over loaders added earlier and default loaders.\n   * It is recommended that loaders extend {{#crossLink \"AbstractLoader\"}}{{/crossLink}}. Loaders can only be added\n   * once, and will be prepended to the list of available loaders.\n   * @method registerLoader\n   * @param {Function|AbstractLoader} loader The AbstractLoader class to add.\n   * @since 0.6.0\n   */\n  p.registerLoader = function (loader) {\n    if (!loader || !loader.canLoadItem) {\n      throw new Error(\"loader is of an incorrect type.\");\n    } else if (this._availableLoaders.indexOf(loader) != -1) {\n      throw new Error(\"loader already exists.\"); //LM: Maybe just silently fail here\n    }\n\n    this._availableLoaders.unshift(loader);\n  };\n\n  /**\n   * Remove a custom loader added using {{#crossLink \"registerLoader\"}}{{/crossLink}}. Only custom loaders can be\n   * unregistered, the default loaders will always be available.\n   * @method unregisterLoader\n   * @param {Function|AbstractLoader} loader The AbstractLoader class to remove\n   */\n  p.unregisterLoader = function (loader) {\n    var idx = this._availableLoaders.indexOf(loader);\n    if (idx != -1 && idx < this._defaultLoaderLength - 1) {\n      this._availableLoaders.splice(idx, 1);\n    }\n  };\n\n  /**\n   * @method setUseXHR\n   * @param {Boolean} value The new useXHR value to set.\n   * @return {Boolean} The new useXHR value. If XHR is not supported by the browser, this will return false, even if\n   * the provided value argument was true.\n   * @since 0.3.0\n   * @deprecated use the {{#crossLink \"LoadQueue/preferXHR:property\"}}{{/crossLink}} property, or the\n   * {{#crossLink \"LoadQueue/setUseXHR\"}}{{/crossLink}} method instead.\n   */\n  p.setUseXHR = function (value) {\n    return this.setPreferXHR(value);\n  };\n\n  /**\n   * Change the {{#crossLink \"preferXHR:property\"}}{{/crossLink}} value. Note that if this is set to `true`, it may\n   * fail, or be ignored depending on the browser's capabilities and the load type.\n   * @method setPreferXHR\n   * @param {Boolean} value\n   * @returns {Boolean} The value of {{#crossLink \"preferXHR\"}}{{/crossLink}} that was successfully set.\n   * @since 0.6.0\n   */\n  p.setPreferXHR = function (value) {\n    // Determine if we can use XHR. XHR defaults to TRUE, but the browser may not support it.\n    //TODO: Should we be checking for the other XHR types? Might have to do a try/catch on the different types similar to createXHR.\n    this.preferXHR = value != false && window.XMLHttpRequest != null;\n    return this.preferXHR;\n  };\n\n  /**\n   * Stops all queued and loading items, and clears the queue. This also removes all internal references to loaded\n   * content, and allows the queue to be used again.\n   * @method removeAll\n   * @since 0.3.0\n   */\n  p.removeAll = function () {\n    this.remove();\n  };\n\n  /**\n   * Stops an item from being loaded, and removes it from the queue. If nothing is passed, all items are removed.\n   * This also removes internal references to loaded item(s).\n   *\n   * <h4>Example</h4>\n   *\n   *      queue.loadManifest([\n   *          {src:\"test.png\", id:\"png\"},\n   *          {src:\"test.jpg\", id:\"jpg\"},\n   *          {src:\"test.mp3\", id:\"mp3\"}\n   *      ]);\n   *      queue.remove(\"png\"); // Single item by ID\n   *      queue.remove(\"png\", \"test.jpg\"); // Items as arguments. Mixed id and src.\n   *      queue.remove([\"test.png\", \"jpg\"]); // Items in an Array. Mixed id and src.\n   *\n   * @method remove\n   * @param {String | Array} idsOrUrls* The id or ids to remove from this queue. You can pass an item, an array of\n   * items, or multiple items as arguments.\n   * @since 0.3.0\n   */\n  p.remove = function (idsOrUrls) {\n    var args = null;\n    if (idsOrUrls && !Array.isArray(idsOrUrls)) {\n      args = [idsOrUrls];\n    } else if (idsOrUrls) {\n      args = idsOrUrls;\n    } else if (arguments.length > 0) {\n      return;\n    }\n    var itemsWereRemoved = false;\n\n    // Destroy everything\n    if (!args) {\n      this.close();\n      for (var n in this._loadItemsById) {\n        this._disposeItem(this._loadItemsById[n]);\n      }\n      this.init(this.preferXHR, this._basePath);\n\n      // Remove specific items\n    } else {\n      while (args.length) {\n        var item = args.pop();\n        var r = this.getResult(item);\n\n        //Remove from the main load Queue\n        for (i = this._loadQueue.length - 1; i >= 0; i--) {\n          loadItem = this._loadQueue[i].getItem();\n          if (loadItem.id == item || loadItem.src == item) {\n            this._loadQueue.splice(i, 1)[0].cancel();\n            break;\n          }\n        }\n\n        //Remove from the backup queue\n        for (i = this._loadQueueBackup.length - 1; i >= 0; i--) {\n          loadItem = this._loadQueueBackup[i].getItem();\n          if (loadItem.id == item || loadItem.src == item) {\n            this._loadQueueBackup.splice(i, 1)[0].cancel();\n            break;\n          }\n        }\n        if (r) {\n          this._disposeItem(this.getItem(item));\n        } else {\n          for (var i = this._currentLoads.length - 1; i >= 0; i--) {\n            var loadItem = this._currentLoads[i].getItem();\n            if (loadItem.id == item || loadItem.src == item) {\n              this._currentLoads.splice(i, 1)[0].cancel();\n              itemsWereRemoved = true;\n              break;\n            }\n          }\n        }\n      }\n\n      // If this was called during a load, try to load the next item.\n      if (itemsWereRemoved) {\n        this._loadNext();\n      }\n    }\n  };\n\n  /**\n   * Stops all open loads, destroys any loaded items, and resets the queue, so all items can\n   * be reloaded again by calling {{#crossLink \"AbstractLoader/load\"}}{{/crossLink}}. Items are not removed from the\n   * queue. To remove items use the {{#crossLink \"LoadQueue/remove\"}}{{/crossLink}} or\n   * {{#crossLink \"LoadQueue/removeAll\"}}{{/crossLink}} method.\n   * @method reset\n   * @since 0.3.0\n   */\n  p.reset = function () {\n    this.close();\n    for (var n in this._loadItemsById) {\n      this._disposeItem(this._loadItemsById[n]);\n    }\n\n    //Reset the queue to its start state\n    var a = [];\n    for (var i = 0, l = this._loadQueueBackup.length; i < l; i++) {\n      a.push(this._loadQueueBackup[i].getItem());\n    }\n    this.loadManifest(a, false);\n  };\n\n  /**\n   * Register a plugin. Plugins can map to load types (sound, image, etc), or specific extensions (png, mp3, etc).\n   * Currently, only one plugin can exist per type/extension.\n   *\n   * When a plugin is installed, a <code>getPreloadHandlers()</code> method will be called on it. For more information\n   * on this method, check out the {{#crossLink \"SamplePlugin/getPreloadHandlers\"}}{{/crossLink}} method in the\n   * {{#crossLink \"SamplePlugin\"}}{{/crossLink}} class.\n   *\n   * Before a file is loaded, a matching plugin has an opportunity to modify the load. If a `callback` is returned\n   * from the {{#crossLink \"SamplePlugin/getPreloadHandlers\"}}{{/crossLink}} method, it will be invoked first, and its\n   * result may cancel or modify the item. The callback method can also return a `completeHandler` to be fired when\n   * the file is loaded, or a `tag` object, which will manage the actual download. For more information on these\n   * methods, check out the {{#crossLink \"SamplePlugin/preloadHandler\"}}{{/crossLink}} and {{#crossLink \"SamplePlugin/fileLoadHandler\"}}{{/crossLink}}\n   * methods on the {{#crossLink \"SamplePlugin\"}}{{/crossLink}}.\n   *\n   * @method installPlugin\n   * @param {Function} plugin The plugin class to install.\n   */\n  p.installPlugin = function (plugin) {\n    if (plugin == null) {\n      return;\n    }\n    if (plugin.getPreloadHandlers != null) {\n      this._plugins.push(plugin);\n      var map = plugin.getPreloadHandlers();\n      map.scope = plugin;\n      if (map.types != null) {\n        for (var i = 0, l = map.types.length; i < l; i++) {\n          this._typeCallbacks[map.types[i]] = map;\n        }\n      }\n      if (map.extensions != null) {\n        for (i = 0, l = map.extensions.length; i < l; i++) {\n          this._extensionCallbacks[map.extensions[i]] = map;\n        }\n      }\n    }\n  };\n\n  /**\n   * Set the maximum number of concurrent connections. Note that browsers and servers may have a built-in maximum\n   * number of open connections, so any additional connections may remain in a pending state until the browser\n   * opens the connection. When loading scripts using tags, and when {{#crossLink \"LoadQueue/maintainScriptOrder:property\"}}{{/crossLink}}\n   * is `true`, only one script is loaded at a time due to browser limitations.\n   *\n   * <h4>Example</h4>\n   *\n   *      var queue = new createjs.LoadQueue();\n   *      queue.setMaxConnections(10); // Allow 10 concurrent loads\n   *\n   * @method setMaxConnections\n   * @param {Number} value The number of concurrent loads to allow. By default, only a single connection per LoadQueue\n   * is open at any time.\n   */\n  p.setMaxConnections = function (value) {\n    this._maxConnections = value;\n    if (!this._paused && this._loadQueue.length > 0) {\n      this._loadNext();\n    }\n  };\n\n  /**\n   * Load a single file. To add multiple files at once, use the {{#crossLink \"LoadQueue/loadManifest\"}}{{/crossLink}}\n   * method.\n   *\n   * Files are always appended to the current queue, so this method can be used multiple times to add files.\n   * To clear the queue first, use the {{#crossLink \"AbstractLoader/close\"}}{{/crossLink}} method.\n   * @method loadFile\n   * @param {LoadItem|Object|String} file The file object or path to load. A file can be either\n   * <ul>\n   *     <li>A {{#crossLink \"LoadItem\"}}{{/crossLink}} instance</li>\n   *     <li>An object containing properties defined by {{#crossLink \"LoadItem\"}}{{/crossLink}}</li>\n   *     <li>OR A string path to a resource. Note that this kind of load item will be converted to a {{#crossLink \"LoadItem\"}}{{/crossLink}}\n   *     in the background.</li>\n   * </ul>\n   * @param {Boolean} [loadNow=true] Kick off an immediate load (true) or wait for a load call (false). The default\n   * value is true. If the queue is paused using {{#crossLink \"LoadQueue/setPaused\"}}{{/crossLink}}, and the value is\n   * `true`, the queue will resume automatically.\n   * @param {String} [basePath] A base path that will be prepended to each file. The basePath argument overrides the\n   * path specified in the constructor. Note that if you load a manifest using a file of type {{#crossLink \"AbstractLoader/MANIFEST:property\"}}{{/crossLink}},\n   * its files will <strong>NOT</strong> use the basePath parameter. <strong>The basePath parameter is deprecated.</strong>\n   * This parameter will be removed in a future version. Please either use the `basePath` parameter in the LoadQueue\n   * constructor, or a `path` property in a manifest definition.\n   */\n  p.loadFile = function (file, loadNow, basePath) {\n    if (file == null) {\n      var event = new createjs.ErrorEvent(\"PRELOAD_NO_FILE\");\n      this._sendError(event);\n      return;\n    }\n    this._addItem(file, null, basePath);\n    if (loadNow !== false) {\n      this.setPaused(false);\n    } else {\n      this.setPaused(true);\n    }\n  };\n\n  /**\n   * Load an array of files. To load a single file, use the {{#crossLink \"LoadQueue/loadFile\"}}{{/crossLink}} method.\n   * The files in the manifest are requested in the same order, but may complete in a different order if the max\n   * connections are set above 1 using {{#crossLink \"LoadQueue/setMaxConnections\"}}{{/crossLink}}. Scripts will load\n   * in the right order as long as {{#crossLink \"LoadQueue/maintainScriptOrder\"}}{{/crossLink}} is true (which is\n   * default).\n   *\n   * Files are always appended to the current queue, so this method can be used multiple times to add files.\n   * To clear the queue first, use the {{#crossLink \"AbstractLoader/close\"}}{{/crossLink}} method.\n   * @method loadManifest\n   * @param {Array|String|Object} manifest An list of files to load. The loadManifest call supports four types of\n   * manifests:\n   * <ol>\n   *     <li>A string path, which points to a manifest file, which is a JSON file that contains a \"manifest\" property,\n   *     which defines the list of files to load, and can optionally contain a \"path\" property, which will be\n   *     prepended to each file in the list.</li>\n   *     <li>An object which defines a \"src\", which is a JSON or JSONP file. A \"callback\" can be defined for JSONP\n   *     file. The JSON/JSONP file should contain a \"manifest\" property, which defines the list of files to load,\n   *     and can optionally contain a \"path\" property, which will be prepended to each file in the list.</li>\n   *     <li>An object which contains a \"manifest\" property, which defines the list of files to load, and can\n   *     optionally contain a \"path\" property, which will be prepended to each file in the list.</li>\n   *     <li>An Array of files to load.</li>\n   * </ol>\n   *\n   * Each \"file\" in a manifest can be either:\n   * <ul>\n   *     <li>A {{#crossLink \"LoadItem\"}}{{/crossLink}} instance</li>\n   *     <li>An object containing properties defined by {{#crossLink \"LoadItem\"}}{{/crossLink}}</li>\n   *     <li>OR A string path to a resource. Note that this kind of load item will be converted to a {{#crossLink \"LoadItem\"}}{{/crossLink}}\n   *     in the background.</li>\n   * </ul>\n   *\n   * @param {Boolean} [loadNow=true] Kick off an immediate load (true) or wait for a load call (false). The default\n   * value is true. If the queue is paused using {{#crossLink \"LoadQueue/setPaused\"}}{{/crossLink}} and this value is\n   * `true`, the queue will resume automatically.\n   * @param {String} [basePath] A base path that will be prepended to each file. The basePath argument overrides the\n   * path specified in the constructor. Note that if you load a manifest using a file of type {{#crossLink \"LoadQueue/MANIFEST:property\"}}{{/crossLink}},\n   * its files will <strong>NOT</strong> use the basePath parameter. <strong>The basePath parameter is deprecated.</strong>\n   * This parameter will be removed in a future version. Please either use the `basePath` parameter in the LoadQueue\n   * constructor, or a `path` property in a manifest definition.\n   */\n  p.loadManifest = function (manifest, loadNow, basePath) {\n    var fileList = null;\n    var path = null;\n\n    // Array-based list of items\n    if (Array.isArray(manifest)) {\n      if (manifest.length == 0) {\n        var event = new createjs.ErrorEvent(\"PRELOAD_MANIFEST_EMPTY\");\n        this._sendError(event);\n        return;\n      }\n      fileList = manifest;\n\n      // String-based. Only file manifests can be specified this way. Any other types will cause an error when loaded.\n    } else if (typeof manifest === \"string\") {\n      fileList = [{\n        src: manifest,\n        type: s.MANIFEST\n      }];\n    } else if (typeof manifest == \"object\") {\n      // An object that defines a manifest path\n      if (manifest.src !== undefined) {\n        if (manifest.type == null) {\n          manifest.type = s.MANIFEST;\n        } else if (manifest.type != s.MANIFEST) {\n          var event = new createjs.ErrorEvent(\"PRELOAD_MANIFEST_TYPE\");\n          this._sendError(event);\n        }\n        fileList = [manifest];\n\n        // An object that defines a manifest\n      } else if (manifest.manifest !== undefined) {\n        fileList = manifest.manifest;\n        path = manifest.path;\n      }\n\n      // Unsupported. This will throw an error.\n    } else {\n      var event = new createjs.ErrorEvent(\"PRELOAD_MANIFEST_NULL\");\n      this._sendError(event);\n      return;\n    }\n    for (var i = 0, l = fileList.length; i < l; i++) {\n      this._addItem(fileList[i], path, basePath);\n    }\n    if (loadNow !== false) {\n      this.setPaused(false);\n    } else {\n      this.setPaused(true);\n    }\n  };\n\n  /**\n   * Start a LoadQueue that was created, but not automatically started.\n   * @method load\n   */\n  p.load = function () {\n    this.setPaused(false);\n  };\n\n  /**\n   * Look up a {{#crossLink \"LoadItem\"}}{{/crossLink}} using either the \"id\" or \"src\" that was specified when loading it. Note that if no \"id\" was\n   * supplied with the load item, the ID will be the \"src\", including a `path` property defined by a manifest. The\n   * `basePath` will not be part of the ID.\n   * @method getItem\n   * @param {String} value The <code>id</code> or <code>src</code> of the load item.\n   * @return {Object} The load item that was initially requested using {{#crossLink \"LoadQueue/loadFile\"}}{{/crossLink}}\n   * or {{#crossLink \"LoadQueue/loadManifest\"}}{{/crossLink}}. This object is also returned via the {{#crossLink \"LoadQueue/fileload:event\"}}{{/crossLink}}\n   * event as the `item` parameter.\n   */\n  p.getItem = function (value) {\n    return this._loadItemsById[value] || this._loadItemsBySrc[value];\n  };\n\n  /**\n   * Look up a loaded result using either the \"id\" or \"src\" that was specified when loading it. Note that if no \"id\"\n   * was supplied with the load item, the ID will be the \"src\", including a `path` property defined by a manifest. The\n   * `basePath` will not be part of the ID.\n   * @method getResult\n   * @param {String} value The <code>id</code> or <code>src</code> of the load item.\n   * @param {Boolean} [rawResult=false] Return a raw result instead of a formatted result. This applies to content\n   * loaded via XHR such as scripts, XML, CSS, and Images. If there is no raw result, the formatted result will be\n   * returned instead.\n   * @return {Object} A result object containing the content that was loaded, such as:\n   * <ul>\n   *      <li>An image tag (&lt;image /&gt;) for images</li>\n   *      <li>A script tag for JavaScript (&lt;script /&gt;). Note that scripts are automatically added to the HTML\n   *      DOM.</li>\n   *      <li>A style tag for CSS (&lt;style /&gt; or &lt;link &gt;)</li>\n   *      <li>Raw text for TEXT</li>\n   *      <li>A formatted JavaScript object defined by JSON</li>\n   *      <li>An XML document</li>\n   *      <li>A binary arraybuffer loaded by XHR</li>\n   *      <li>An audio tag (&lt;audio &gt;) for HTML audio. Note that it is recommended to use SoundJS APIs to play\n   *      loaded audio. Specifically, audio loaded by Flash and WebAudio will return a loader object using this method\n   *      which can not be used to play audio back.</li>\n   * </ul>\n   * This object is also returned via the {{#crossLink \"LoadQueue/fileload:event\"}}{{/crossLink}} event as the 'item`\n   * parameter. Note that if a raw result is requested, but not found, the result will be returned instead.\n   */\n  p.getResult = function (value, rawResult) {\n    var item = this._loadItemsById[value] || this._loadItemsBySrc[value];\n    if (item == null) {\n      return null;\n    }\n    var id = item.id;\n    if (rawResult && this._loadedRawResults[id]) {\n      return this._loadedRawResults[id];\n    }\n    return this._loadedResults[id];\n  };\n\n  /**\n   * Generate an list of items loaded by this queue.\n   * @method getItems\n   * @param {Boolean} loaded Determines if only items that have been loaded should be returned. If false, in-progress\n   * and failed load items will also be included.\n   * @returns {Array} A list of objects that have been loaded. Each item includes the {{#crossLink \"LoadItem\"}}{{/crossLink}},\n   * result, and rawResult.\n   * @since 0.6.0\n   */\n  p.getItems = function (loaded) {\n    var arr = [];\n    for (var n in this._loadItemsById) {\n      var item = this._loadItemsById[n];\n      var result = this.getResult(n);\n      if (loaded === true && result == null) {\n        continue;\n      }\n      arr.push({\n        item: item,\n        result: result,\n        rawResult: this.getResult(n, true)\n      });\n    }\n    return arr;\n  };\n\n  /**\n   * Pause or resume the current load. Active loads will not be cancelled, but the next items in the queue will not\n   * be processed when active loads complete. LoadQueues are not paused by default.\n   *\n   * Note that if new items are added to the queue using {{#crossLink \"LoadQueue/loadFile\"}}{{/crossLink}} or\n   * {{#crossLink \"LoadQueue/loadManifest\"}}{{/crossLink}}, a paused queue will be resumed, unless the `loadNow`\n   * argument is `false`.\n   * @method setPaused\n   * @param {Boolean} value Whether the queue should be paused or not.\n   */\n  p.setPaused = function (value) {\n    this._paused = value;\n    if (!this._paused) {\n      this._loadNext();\n    }\n  };\n\n  /**\n   * Close the active queue. Closing a queue completely empties the queue, and prevents any remaining items from\n   * starting to download. Note that currently any active loads will remain open, and events may be processed.\n   *\n   * To stop and restart a queue, use the {{#crossLink \"LoadQueue/setPaused\"}}{{/crossLink}} method instead.\n   * @method close\n   */\n  p.close = function () {\n    while (this._currentLoads.length) {\n      this._currentLoads.pop().cancel();\n    }\n    this._scriptOrder.length = 0;\n    this._loadedScripts.length = 0;\n    this.loadStartWasDispatched = false;\n    this._itemCount = 0;\n    this._lastProgress = NaN;\n  };\n\n  // protected methods\n  /**\n   * Add an item to the queue. Items are formatted into a usable object containing all the properties necessary to\n   * load the content. The load queue is populated with the loader instance that handles preloading, and not the load\n   * item that was passed in by the user. To look up the load item by id or src, use the {{#crossLink \"LoadQueue.getItem\"}}{{/crossLink}}\n   * method.\n   * @method _addItem\n   * @param {String|Object} value The item to add to the queue.\n   * @param {String} [path] An optional path prepended to the `src`. The path will only be prepended if the src is\n   * relative, and does not start with a protocol such as `http://`, or a path like `../`. If the LoadQueue was\n   * provided a {{#crossLink \"_basePath\"}}{{/crossLink}}, then it will optionally be prepended after.\n   * @param {String} [basePath] <strong>Deprecated</strong>An optional basePath passed into a {{#crossLink \"LoadQueue/loadManifest\"}}{{/crossLink}}\n   * or {{#crossLink \"LoadQueue/loadFile\"}}{{/crossLink}} call. This parameter will be removed in a future tagged\n   * version.\n   * @private\n   */\n  p._addItem = function (value, path, basePath) {\n    var item = this._createLoadItem(value, path, basePath); // basePath and manifest path are added to the src.\n    if (item == null) {\n      return;\n    } // Sometimes plugins or types should be skipped.\n    var loader = this._createLoader(item);\n    if (loader != null) {\n      if (\"plugins\" in loader) {\n        loader.plugins = this._plugins;\n      }\n      item._loader = loader;\n      this._loadQueue.push(loader);\n      this._loadQueueBackup.push(loader);\n      this._numItems++;\n      this._updateProgress();\n\n      // Only worry about script order when using XHR to load scripts. Tags are only loading one at a time.\n      if (this.maintainScriptOrder && item.type == createjs.LoadQueue.JAVASCRIPT\n      //&& loader instanceof createjs.XHRLoader //NOTE: Have to track all JS files this way\n      || item.maintainOrder === true) {\n        this._scriptOrder.push(item);\n        this._loadedScripts.push(null);\n      }\n    }\n  };\n\n  /**\n   * Create a refined {{#crossLink \"LoadItem\"}}{{/crossLink}}, which contains all the required properties. The type of\n   * item is determined by browser support, requirements based on the file type, and developer settings. For example,\n   * XHR is only used for file types that support it in new browsers.\n   *\n   * Before the item is returned, any plugins registered to handle the type or extension will be fired, which may\n   * alter the load item.\n   * @method _createLoadItem\n   * @param {String | Object | HTMLAudioElement | HTMLImageElement} value The item that needs to be preloaded.\n   * @param {String} [path] A path to prepend to the item's source. Sources beginning with http:// or similar will\n   * not receive a path. Since PreloadJS 0.4.1, the src will be modified to include the `path` and {{#crossLink \"LoadQueue/_basePath:property\"}}{{/crossLink}}\n   * when it is added.\n   * @param {String} [basePath] <strong>Deprectated</strong> A base path to prepend to the items source in addition to\n   * the path argument.\n   * @return {Object} The loader instance that will be used.\n   * @private\n   */\n  p._createLoadItem = function (value, path, basePath) {\n    var item = createjs.LoadItem.create(value);\n    if (item == null) {\n      return null;\n    }\n    var bp = \"\"; // Store the generated basePath\n    var useBasePath = basePath || this._basePath;\n    if (item.src instanceof Object) {\n      if (!item.type) {\n        return null;\n      } // the the src is an object, type is required to pass off to plugin\n      if (path) {\n        bp = path;\n        var pathMatch = createjs.RequestUtils.parseURI(path);\n        // Also append basePath\n        if (useBasePath != null && !pathMatch.absolute && !pathMatch.relative) {\n          bp = useBasePath + bp;\n        }\n      } else if (useBasePath != null) {\n        bp = useBasePath;\n      }\n    } else {\n      // Determine Extension, etc.\n      var match = createjs.RequestUtils.parseURI(item.src);\n      if (match.extension) {\n        item.ext = match.extension;\n      }\n      if (item.type == null) {\n        item.type = createjs.RequestUtils.getTypeByExtension(item.ext);\n      }\n\n      // Inject path & basePath\n      var autoId = item.src;\n      if (!match.absolute && !match.relative) {\n        if (path) {\n          bp = path;\n          var pathMatch = createjs.RequestUtils.parseURI(path);\n          autoId = path + autoId;\n          // Also append basePath\n          if (useBasePath != null && !pathMatch.absolute && !pathMatch.relative) {\n            bp = useBasePath + bp;\n          }\n        } else if (useBasePath != null) {\n          bp = useBasePath;\n        }\n      }\n      item.src = bp + item.src;\n    }\n    item.path = bp;\n\n    // If there's no id, set one now.\n    if (item.id === undefined || item.id === null || item.id === \"\") {\n      item.id = autoId;\n    }\n\n    // Give plugins a chance to modify the loadItem:\n    var customHandler = this._typeCallbacks[item.type] || this._extensionCallbacks[item.ext];\n    if (customHandler) {\n      // Plugins are now passed both the full source, as well as a combined path+basePath (appropriately)\n      var result = customHandler.callback.call(customHandler.scope, item, this);\n\n      // The plugin will handle the load, or has canceled it. Ignore it.\n      if (result === false) {\n        return null;\n\n        // Load as normal:\n      } else if (result === true) {\n        // Do Nothing\n\n        // Result is a loader class:\n      } else if (result != null) {\n        item._loader = result;\n      }\n\n      // Update the extension in case the type changed:\n      match = createjs.RequestUtils.parseURI(item.src);\n      if (match.extension != null) {\n        item.ext = match.extension;\n      }\n    }\n\n    // Store the item for lookup. This also helps clean-up later.\n    this._loadItemsById[item.id] = item;\n    this._loadItemsBySrc[item.src] = item;\n    if (item.crossOrigin == null) {\n      item.crossOrigin = this._crossOrigin;\n    }\n    return item;\n  };\n\n  /**\n   * Create a loader for a load item.\n   * @method _createLoader\n   * @param {Object} item A formatted load item that can be used to generate a loader.\n   * @return {AbstractLoader} A loader that can be used to load content.\n   * @private\n   */\n  p._createLoader = function (item) {\n    if (item._loader != null) {\n      // A plugin already specified a loader\n      return item._loader;\n    }\n\n    // Initially, try and use the provided/supported XHR mode:\n    var preferXHR = this.preferXHR;\n    for (var i = 0; i < this._availableLoaders.length; i++) {\n      var loader = this._availableLoaders[i];\n      if (loader && loader.canLoadItem(item)) {\n        return new loader(item, preferXHR);\n      }\n    }\n\n    // TODO: Log error (requires createjs.log)\n    return null;\n  };\n\n  /**\n   * Load the next item in the queue. If the queue is empty (all items have been loaded), then the complete event\n   * is processed. The queue will \"fill up\" any empty slots, up to the max connection specified using\n   * {{#crossLink \"LoadQueue.setMaxConnections\"}}{{/crossLink}} method. The only exception is scripts that are loaded\n   * using tags, which have to be loaded one at a time to maintain load order.\n   * @method _loadNext\n   * @private\n   */\n  p._loadNext = function () {\n    if (this._paused) {\n      return;\n    }\n\n    // Only dispatch loadstart event when the first file is loaded.\n    if (!this._loadStartWasDispatched) {\n      this._sendLoadStart();\n      this._loadStartWasDispatched = true;\n    }\n\n    // The queue has completed.\n    if (this._numItems == this._numItemsLoaded) {\n      this.loaded = true;\n      this._sendComplete();\n\n      // Load the next queue, if it has been defined.\n      if (this.next && this.next.load) {\n        this.next.load();\n      }\n    } else {\n      this.loaded = false;\n    }\n\n    // Must iterate forwards to load in the right order.\n    for (var i = 0; i < this._loadQueue.length; i++) {\n      if (this._currentLoads.length >= this._maxConnections) {\n        break;\n      }\n      var loader = this._loadQueue[i];\n\n      // Determine if we should be only loading one tag-script at a time:\n      // Note: maintainOrder items don't do anything here because we can hold onto their loaded value\n      if (!this._canStartLoad(loader)) {\n        continue;\n      }\n      this._loadQueue.splice(i, 1);\n      i--;\n      this._loadItem(loader);\n    }\n  };\n\n  /**\n   * Begin loading an item. Event listeners are not added to the loaders until the load starts.\n   * @method _loadItem\n   * @param {AbstractLoader} loader The loader instance to start. Currently, this will be an XHRLoader or TagLoader.\n   * @private\n   */\n  p._loadItem = function (loader) {\n    loader.on(\"fileload\", this._handleFileLoad, this);\n    loader.on(\"progress\", this._handleProgress, this);\n    loader.on(\"complete\", this._handleFileComplete, this);\n    loader.on(\"error\", this._handleError, this);\n    loader.on(\"fileerror\", this._handleFileError, this);\n    this._currentLoads.push(loader);\n    this._sendFileStart(loader.getItem());\n    loader.load();\n  };\n\n  /**\n   * The callback that is fired when a loader loads a file. This enables loaders like {{#crossLink \"ManifestLoader\"}}{{/crossLink}}\n   * to maintain internal queues, but for this queue to dispatch the {{#crossLink \"fileload:event\"}}{{/crossLink}}\n   * events.\n   * @param {Event} event The {{#crossLink \"AbstractLoader/fileload:event\"}}{{/crossLink}} event from the loader.\n   * @private\n   * @since 0.6.0\n   */\n  p._handleFileLoad = function (event) {\n    event.target = null;\n    this.dispatchEvent(event);\n  };\n\n  /**\n   * The callback that is fired when a loader encounters an error from an internal file load operation. This enables\n   * loaders like M\n   * @param event\n   * @private\n   */\n  p._handleFileError = function (event) {\n    var newEvent = new createjs.ErrorEvent(\"FILE_LOAD_ERROR\", null, event.item);\n    this._sendError(newEvent);\n  };\n\n  /**\n   * The callback that is fired when a loader encounters an error. The queue will continue loading unless {{#crossLink \"LoadQueue/stopOnError:property\"}}{{/crossLink}}\n   * is set to `true`.\n   * @method _handleError\n   * @param {ErrorEvent} event The error event, containing relevant error information.\n   * @private\n   */\n  p._handleError = function (event) {\n    var loader = event.target;\n    this._numItemsLoaded++;\n    this._finishOrderedItem(loader, true);\n    this._updateProgress();\n    var newEvent = new createjs.ErrorEvent(\"FILE_LOAD_ERROR\", null, loader.getItem());\n    // TODO: Propagate actual error message.\n\n    this._sendError(newEvent);\n    if (!this.stopOnError) {\n      this._removeLoadItem(loader);\n      this._cleanLoadItem(loader);\n      this._loadNext();\n    } else {\n      this.setPaused(true);\n    }\n  };\n\n  /**\n   * An item has finished loading. We can assume that it is totally loaded, has been parsed for immediate use, and\n   * is available as the \"result\" property on the load item. The raw text result for a parsed item (such as JSON, XML,\n   * CSS, JavaScript, etc) is available as the \"rawResult\" property, and can also be looked up using {{#crossLink \"LoadQueue/getResult\"}}{{/crossLink}}.\n   * @method _handleFileComplete\n   * @param {Event} event The event object from the loader.\n   * @private\n   */\n  p._handleFileComplete = function (event) {\n    var loader = event.target;\n    var item = loader.getItem();\n    var result = loader.getResult();\n    this._loadedResults[item.id] = result;\n    var rawResult = loader.getResult(true);\n    if (rawResult != null && rawResult !== result) {\n      this._loadedRawResults[item.id] = rawResult;\n    }\n    this._saveLoadedItems(loader);\n\n    // Remove the load item\n    this._removeLoadItem(loader);\n    if (!this._finishOrderedItem(loader)) {\n      // The item was NOT managed, so process it now\n      this._processFinishedLoad(item, loader);\n    }\n\n    // Clean up the load item\n    this._cleanLoadItem(loader);\n  };\n\n  /**\n   * Some loaders might load additional content, other than the item they were passed (such as {{#crossLink \"ManifestLoader\"}}{{/crossLink}}).\n   * Any items exposed by the loader using {{#crossLink \"AbstractLoader/getLoadItems\"}}{{/crossLink}} are added to the\n   * LoadQueue's look-ups, including {{#crossLink \"getItem\"}}{{/crossLink}} and {{#crossLink \"getResult\"}}{{/crossLink}}\n   * methods.\n   * @method _saveLoadedItems\n   * @param {AbstractLoader} loader\n   * @protected\n   * @since 0.6.0\n   */\n  p._saveLoadedItems = function (loader) {\n    // TODO: Not sure how to handle this. Would be nice to expose the items.\n    // Loaders may load sub-items. This adds them to this queue\n    var list = loader.getLoadedItems();\n    if (list === null) {\n      return;\n    }\n    for (var i = 0; i < list.length; i++) {\n      var item = list[i].item;\n\n      // Store item lookups\n      this._loadItemsBySrc[item.src] = item;\n      this._loadItemsById[item.id] = item;\n\n      // Store loaded content\n      this._loadedResults[item.id] = list[i].result;\n      this._loadedRawResults[item.id] = list[i].rawResult;\n    }\n  };\n\n  /**\n   * Flag an item as finished. If the item's order is being managed, then ensure that it is allowed to finish, and if\n   * so, trigger prior items to trigger as well.\n   * @method _finishOrderedItem\n   * @param {AbstractLoader} loader\n   * @param {Boolean} loadFailed\n   * @return {Boolean} If the item's order is being managed. This allows the caller to take an alternate\n   * behaviour if it is.\n   * @private\n   */\n  p._finishOrderedItem = function (loader, loadFailed) {\n    var item = loader.getItem();\n    if (this.maintainScriptOrder && item.type == createjs.LoadQueue.JAVASCRIPT || item.maintainOrder) {\n      //TODO: Evaluate removal of the _currentlyLoadingScript\n      if (loader instanceof createjs.JavaScriptLoader) {\n        this._currentlyLoadingScript = false;\n      }\n      var index = createjs.indexOf(this._scriptOrder, item);\n      if (index == -1) {\n        return false;\n      } // This loader no longer exists\n      this._loadedScripts[index] = loadFailed === true ? true : item;\n      this._checkScriptLoadOrder();\n      return true;\n    }\n    return false;\n  };\n\n  /**\n   * Ensure the scripts load and dispatch in the correct order. When using XHR, scripts are stored in an array in the\n   * order they were added, but with a \"null\" value. When they are completed, the value is set to the load item,\n   * and then when they are processed and dispatched, the value is set to `true`. This method simply\n   * iterates the array, and ensures that any loaded items that are not preceded by a `null` value are\n   * dispatched.\n   * @method _checkScriptLoadOrder\n   * @private\n   */\n  p._checkScriptLoadOrder = function () {\n    var l = this._loadedScripts.length;\n    for (var i = 0; i < l; i++) {\n      var item = this._loadedScripts[i];\n      if (item === null) {\n        break;\n      } // This is still loading. Do not process further.\n      if (item === true) {\n        continue;\n      } // This has completed, and been processed. Move on.\n\n      var loadItem = this._loadedResults[item.id];\n      if (item.type == createjs.LoadQueue.JAVASCRIPT) {\n        // Append script tags to the head automatically.\n        createjs.DomUtils.appendToHead(loadItem);\n      }\n      var loader = item._loader;\n      this._processFinishedLoad(item, loader);\n      this._loadedScripts[i] = true;\n    }\n  };\n\n  /**\n   * A file has completed loading, and the LoadQueue can move on. This triggers the complete event, and kick-starts\n   * the next item.\n   * @method _processFinishedLoad\n   * @param {LoadItem|Object} item\n   * @param {AbstractLoader} loader\n   * @protected\n   */\n  p._processFinishedLoad = function (item, loader) {\n    this._numItemsLoaded++;\n\n    // Since LoadQueue needs maintain order, we can't append scripts in the loader.\n    // So we do it here instead. Or in _checkScriptLoadOrder();\n    if (!this.maintainScriptOrder && item.type == createjs.LoadQueue.JAVASCRIPT) {\n      var tag = loader.getTag();\n      createjs.DomUtils.appendToHead(tag);\n    }\n    this._updateProgress();\n    this._sendFileComplete(item, loader);\n    this._loadNext();\n  };\n\n  /**\n   * Ensure items with `maintainOrder=true` that are before the specified item have loaded. This only applies to\n   * JavaScript items that are being loaded with a TagLoader, since they have to be loaded and completed <strong>before</strong>\n   * the script can even be started, since it exist in the DOM while loading.\n   * @method _canStartLoad\n   * @param {AbstractLoader} loader The loader for the item\n   * @return {Boolean} Whether the item can start a load or not.\n   * @private\n   */\n  p._canStartLoad = function (loader) {\n    if (!this.maintainScriptOrder || loader.preferXHR) {\n      return true;\n    }\n    var item = loader.getItem();\n    if (item.type != createjs.LoadQueue.JAVASCRIPT) {\n      return true;\n    }\n    if (this._currentlyLoadingScript) {\n      return false;\n    }\n    var index = this._scriptOrder.indexOf(item);\n    var i = 0;\n    while (i < index) {\n      var checkItem = this._loadedScripts[i];\n      if (checkItem == null) {\n        return false;\n      }\n      i++;\n    }\n    this._currentlyLoadingScript = true;\n    return true;\n  };\n\n  /**\n   * A load item is completed or was canceled, and needs to be removed from the LoadQueue.\n   * @method _removeLoadItem\n   * @param {AbstractLoader} loader A loader instance to remove.\n   * @private\n   */\n  p._removeLoadItem = function (loader) {\n    var l = this._currentLoads.length;\n    for (var i = 0; i < l; i++) {\n      if (this._currentLoads[i] == loader) {\n        this._currentLoads.splice(i, 1);\n        break;\n      }\n    }\n  };\n\n  /**\n   * Remove unneeded references from a loader.\n   *\n   * @param loader\n   * @private\n   */\n  p._cleanLoadItem = function (loader) {\n    var item = loader.getItem();\n    if (item) {\n      delete item._loader;\n    }\n  };\n\n  /**\n   * An item has dispatched progress. Propagate that progress, and update the LoadQueue's overall progress.\n   * @method _handleProgress\n   * @param {ProgressEvent} event The progress event from the item.\n   * @private\n   */\n  p._handleProgress = function (event) {\n    var loader = event.target;\n    this._sendFileProgress(loader.getItem(), loader.progress);\n    this._updateProgress();\n  };\n\n  /**\n   * Overall progress has changed, so determine the new progress amount and dispatch it. This changes any time an\n   * item dispatches progress or completes. Note that since we don't always know the actual filesize of items before\n   * they are loaded. In this case, we define a \"slot\" for each item (1 item in 10 would get 10%), and then append\n   * loaded progress on top of the already-loaded items.\n   *\n   * For example, if 5/10 items have loaded, and item 6 is 20% loaded, the total progress would be:\n   * <ul>\n   *      <li>5/10 of the items in the queue (50%)</li>\n   *      <li>plus 20% of item 6's slot (2%)</li>\n   *      <li>equals 52%</li>\n   * </ul>\n   * @method _updateProgress\n   * @private\n   */\n  p._updateProgress = function () {\n    var loaded = this._numItemsLoaded / this._numItems; // Fully Loaded Progress\n    var remaining = this._numItems - this._numItemsLoaded;\n    if (remaining > 0) {\n      var chunk = 0;\n      for (var i = 0, l = this._currentLoads.length; i < l; i++) {\n        chunk += this._currentLoads[i].progress;\n      }\n      loaded += chunk / remaining * (remaining / this._numItems);\n    }\n    if (this._lastProgress != loaded) {\n      this._sendProgress(loaded);\n      this._lastProgress = loaded;\n    }\n  };\n\n  /**\n   * Clean out item results, to free them from memory. Mainly, the loaded item and results are cleared from internal\n   * hashes.\n   * @method _disposeItem\n   * @param {LoadItem|Object} item The item that was passed in for preloading.\n   * @private\n   */\n  p._disposeItem = function (item) {\n    delete this._loadedResults[item.id];\n    delete this._loadedRawResults[item.id];\n    delete this._loadItemsById[item.id];\n    delete this._loadItemsBySrc[item.src];\n  };\n\n  /**\n   * Dispatch a \"fileprogress\" {{#crossLink \"Event\"}}{{/crossLink}}. Please see the LoadQueue {{#crossLink \"LoadQueue/fileprogress:event\"}}{{/crossLink}}\n   * event for details on the event payload.\n   * @method _sendFileProgress\n   * @param {LoadItem|Object} item The item that is being loaded.\n   * @param {Number} progress The amount the item has been loaded (between 0 and 1).\n   * @protected\n   */\n  p._sendFileProgress = function (item, progress) {\n    if (this._isCanceled() || this._paused) {\n      return;\n    }\n    if (!this.hasEventListener(\"fileprogress\")) {\n      return;\n    }\n\n    //LM: Rework ProgressEvent to support this?\n    var event = new createjs.Event(\"fileprogress\");\n    event.progress = progress;\n    event.loaded = progress;\n    event.total = 1;\n    event.item = item;\n    this.dispatchEvent(event);\n  };\n\n  /**\n   * Dispatch a fileload {{#crossLink \"Event\"}}{{/crossLink}}. Please see the {{#crossLink \"LoadQueue/fileload:event\"}}{{/crossLink}} event for\n   * details on the event payload.\n   * @method _sendFileComplete\n   * @param {LoadItemObject} item The item that is being loaded.\n   * @param {AbstractLoader} loader\n   * @protected\n   */\n  p._sendFileComplete = function (item, loader) {\n    if (this._isCanceled() || this._paused) {\n      return;\n    }\n    var event = new createjs.Event(\"fileload\");\n    event.loader = loader;\n    event.item = item;\n    event.result = this._loadedResults[item.id];\n    event.rawResult = this._loadedRawResults[item.id];\n\n    // This calls a handler specified on the actual load item. Currently, the SoundJS plugin uses this.\n    if (item.completeHandler) {\n      item.completeHandler(event);\n    }\n    this.hasEventListener(\"fileload\") && this.dispatchEvent(event);\n  };\n\n  /**\n   * Dispatch a filestart {{#crossLink \"Event\"}}{{/crossLink}} immediately before a file starts to load. Please see\n   * the {{#crossLink \"LoadQueue/filestart:event\"}}{{/crossLink}} event for details on the event payload.\n   * @method _sendFileStart\n   * @param {LoadItem|Object} item The item that is being loaded.\n   * @protected\n   */\n  p._sendFileStart = function (item) {\n    var event = new createjs.Event(\"filestart\");\n    event.item = item;\n    this.hasEventListener(\"filestart\") && this.dispatchEvent(event);\n  };\n  p.toString = function () {\n    return \"[PreloadJS LoadQueue]\";\n  };\n  createjs.LoadQueue = createjs.promote(LoadQueue, \"AbstractLoader\");\n})();\n\n//##############################################################################\n// TextLoader.js\n//##############################################################################\n\n(function () {\n  \"use strict\";\n\n  // constructor\n  /**\n   * A loader for Text files.\n   * @class TextLoader\n   * @param {LoadItem|Object} loadItem\n   * @extends AbstractLoader\n   * @constructor\n   */\n  function TextLoader(loadItem) {\n    this.AbstractLoader_constructor(loadItem, true, createjs.AbstractLoader.TEXT);\n  }\n  ;\n  var p = createjs.extend(TextLoader, createjs.AbstractLoader);\n  var s = TextLoader;\n\n  // static methods\n  /**\n   * Determines if the loader can load a specific item. This loader loads items that are of type {{#crossLink \"AbstractLoader/TEXT:property\"}}{{/crossLink}},\n   * but is also the default loader if a file type can not be determined.\n   * @method canLoadItem\n   * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\n   * @returns {Boolean} Whether the loader can load the item.\n   * @static\n   */\n  s.canLoadItem = function (item) {\n    return item.type == createjs.AbstractLoader.TEXT;\n  };\n  createjs.TextLoader = createjs.promote(TextLoader, \"AbstractLoader\");\n})();\n\n//##############################################################################\n// BinaryLoader.js\n//##############################################################################\n\n(function () {\n  \"use strict\";\n\n  // constructor\n  /**\n   * A loader for binary files. This is useful for loading web audio, or content that requires an ArrayBuffer.\n   * @class BinaryLoader\n   * @param {LoadItem|Object} loadItem\n   * @extends AbstractLoader\n   * @constructor\n   */\n  function BinaryLoader(loadItem) {\n    this.AbstractLoader_constructor(loadItem, true, createjs.AbstractLoader.BINARY);\n    this.on(\"initialize\", this._updateXHR, this);\n  }\n  ;\n  var p = createjs.extend(BinaryLoader, createjs.AbstractLoader);\n  var s = BinaryLoader;\n\n  // static methods\n  /**\n   * Determines if the loader can load a specific item. This loader can only load items that are of type\n   * {{#crossLink \"AbstractLoader/BINARY:property\"}}{{/crossLink}}\n   * @method canLoadItem\n   * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\n   * @returns {Boolean} Whether the loader can load the item.\n   * @static\n   */\n  s.canLoadItem = function (item) {\n    return item.type == createjs.AbstractLoader.BINARY;\n  };\n\n  // private methods\n  /**\n   * Before the item loads, set the response type to \"arraybuffer\"\n   * @property _updateXHR\n   * @param {Event} event\n   * @private\n   */\n  p._updateXHR = function (event) {\n    event.loader.setResponseType(\"arraybuffer\");\n  };\n  createjs.BinaryLoader = createjs.promote(BinaryLoader, \"AbstractLoader\");\n})();\n\n//##############################################################################\n// CSSLoader.js\n//##############################################################################\n\n(function () {\n  \"use strict\";\n\n  // constructor\n  /**\n   * A loader for CSS files.\n   * @class CSSLoader\n   * @param {LoadItem|Object} loadItem\n   * @param {Boolean} preferXHR\n   * @extends AbstractLoader\n   * @constructor\n   */\n  function CSSLoader(loadItem, preferXHR) {\n    this.AbstractLoader_constructor(loadItem, preferXHR, createjs.AbstractLoader.CSS);\n\n    // public properties\n    this.resultFormatter = this._formatResult;\n\n    // protected properties\n    this._tagSrcAttribute = \"href\";\n    if (preferXHR) {\n      this._tag = document.createElement(\"style\");\n    } else {\n      this._tag = document.createElement(\"link\");\n    }\n    this._tag.rel = \"stylesheet\";\n    this._tag.type = \"text/css\";\n  }\n  ;\n  var p = createjs.extend(CSSLoader, createjs.AbstractLoader);\n  var s = CSSLoader;\n\n  // static methods\n  /**\n   * Determines if the loader can load a specific item. This loader can only load items that are of type\n   * {{#crossLink \"AbstractLoader/CSS:property\"}}{{/crossLink}}.\n   * @method canLoadItem\n   * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\n   * @returns {Boolean} Whether the loader can load the item.\n   * @static\n   */\n  s.canLoadItem = function (item) {\n    return item.type == createjs.AbstractLoader.CSS;\n  };\n\n  // protected methods\n  /**\n   * The result formatter for CSS files.\n   * @method _formatResult\n   * @param {AbstractLoader} loader\n   * @returns {HTMLLinkElement|HTMLStyleElement}\n   * @private\n   */\n  p._formatResult = function (loader) {\n    if (this._preferXHR) {\n      var tag = loader.getTag();\n      if (tag.styleSheet) {\n        // IE\n        tag.styleSheet.cssText = loader.getResult(true);\n      } else {\n        var textNode = document.createTextNode(loader.getResult(true));\n        tag.appendChild(textNode);\n      }\n    } else {\n      tag = this._tag;\n    }\n    createjs.DomUtils.appendToHead(tag);\n    return tag;\n  };\n  createjs.CSSLoader = createjs.promote(CSSLoader, \"AbstractLoader\");\n})();\n\n//##############################################################################\n// ImageLoader.js\n//##############################################################################\n\n(function () {\n  \"use strict\";\n\n  // constructor\n  /**\n   * A loader for image files.\n   * @class ImageLoader\n   * @param {LoadItem|Object} loadItem\n   * @param {Boolean} preferXHR\n   * @extends AbstractLoader\n   * @constructor\n   */\n  function ImageLoader(loadItem, preferXHR) {\n    this.AbstractLoader_constructor(loadItem, preferXHR, createjs.AbstractLoader.IMAGE);\n\n    // public properties\n    this.resultFormatter = this._formatResult;\n\n    // protected properties\n    this._tagSrcAttribute = \"src\";\n\n    // Check if the preload item is already a tag.\n    if (createjs.RequestUtils.isImageTag(loadItem)) {\n      this._tag = loadItem;\n    } else if (createjs.RequestUtils.isImageTag(loadItem.src)) {\n      this._tag = loadItem.src;\n    } else if (createjs.RequestUtils.isImageTag(loadItem.tag)) {\n      this._tag = loadItem.tag;\n    }\n    if (this._tag != null) {\n      this._preferXHR = false;\n    } else {\n      this._tag = document.createElement(\"img\");\n    }\n    this.on(\"initialize\", this._updateXHR, this);\n  }\n  ;\n  var p = createjs.extend(ImageLoader, createjs.AbstractLoader);\n  var s = ImageLoader;\n\n  // static methods\n  /**\n   * Determines if the loader can load a specific item. This loader can only load items that are of type\n   * {{#crossLink \"AbstractLoader/IMAGE:property\"}}{{/crossLink}}.\n   * @method canLoadItem\n   * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\n   * @returns {Boolean} Whether the loader can load the item.\n   * @static\n   */\n  s.canLoadItem = function (item) {\n    return item.type == createjs.AbstractLoader.IMAGE;\n  };\n\n  // public methods\n  p.load = function () {\n    if (this._tag.src != \"\" && this._tag.complete) {\n      this._sendComplete();\n      return;\n    }\n    var crossOrigin = this._item.crossOrigin;\n    if (crossOrigin == true) {\n      crossOrigin = \"Anonymous\";\n    }\n    if (crossOrigin != null && !createjs.RequestUtils.isLocal(this._item.src)) {\n      this._tag.crossOrigin = crossOrigin;\n    }\n    this.AbstractLoader_load();\n  };\n\n  // protected methods\n  /**\n   * Before the item loads, set its mimeType and responseType.\n   * @property _updateXHR\n   * @param {Event} event\n   * @private\n   */\n  p._updateXHR = function (event) {\n    event.loader.mimeType = 'text/plain; charset=x-user-defined-binary';\n\n    // Only exists for XHR\n    if (event.loader.setResponseType) {\n      event.loader.setResponseType(\"blob\");\n    }\n  };\n\n  /**\n   * The result formatter for Image files.\n   * @method _formatResult\n   * @param {AbstractLoader} loader\n   * @returns {HTMLImageElement}\n   * @private\n   */\n  p._formatResult = function (loader) {\n    return this._formatImage;\n  };\n\n  /**\n   * The asynchronous image formatter function. This is required because images have\n   * a short delay before they are ready.\n   * @method _formatImage\n   * @param {Function} successCallback The method to call when the result has finished formatting\n   * @param {Function} errorCallback The method to call if an error occurs during formatting\n   * @private\n   */\n  p._formatImage = function (successCallback, errorCallback) {\n    var tag = this._tag;\n    var URL = window.URL || window.webkitURL;\n    if (!this._preferXHR) {\n      //document.body.removeChild(tag);\n    } else if (URL) {\n      var objURL = URL.createObjectURL(this.getResult(true));\n      tag.src = objURL;\n      tag.addEventListener(\"load\", this._cleanUpURL, false);\n      tag.addEventListener(\"error\", this._cleanUpURL, false);\n    } else {\n      tag.src = this._item.src;\n    }\n    if (tag.complete) {\n      successCallback(tag);\n    } else {\n      tag.onload = createjs.proxy(function () {\n        successCallback(this._tag);\n      }, this);\n      tag.onerror = createjs.proxy(function () {\n        errorCallback(_this._tag);\n      }, this);\n    }\n  };\n\n  /**\n   * Clean up the ObjectURL, the tag is done with it. Note that this function is run\n   * as an event listener without a proxy/closure, as it doesn't require it - so do not\n   * include any functionality that requires scope without changing it.\n   * @method _cleanUpURL\n   * @param event\n   * @private\n   */\n  p._cleanUpURL = function (event) {\n    var URL = window.URL || window.webkitURL;\n    URL.revokeObjectURL(event.target.src);\n  };\n  createjs.ImageLoader = createjs.promote(ImageLoader, \"AbstractLoader\");\n})();\n\n//##############################################################################\n// JavaScriptLoader.js\n//##############################################################################\n\n(function () {\n  \"use strict\";\n\n  // constructor\n  /**\n   * A loader for JavaScript files.\n   * @class JavaScriptLoader\n   * @param {LoadItem|Object} loadItem\n   * @param {Boolean} preferXHR\n   * @extends AbstractLoader\n   * @constructor\n   */\n  function JavaScriptLoader(loadItem, preferXHR) {\n    this.AbstractLoader_constructor(loadItem, preferXHR, createjs.AbstractLoader.JAVASCRIPT);\n\n    // public properties\n    this.resultFormatter = this._formatResult;\n\n    // protected properties\n    this._tagSrcAttribute = \"src\";\n    this.setTag(document.createElement(\"script\"));\n  }\n  ;\n  var p = createjs.extend(JavaScriptLoader, createjs.AbstractLoader);\n  var s = JavaScriptLoader;\n\n  // static methods\n  /**\n   * Determines if the loader can load a specific item. This loader can only load items that are of type\n   * {{#crossLink \"AbstractLoader/JAVASCRIPT:property\"}}{{/crossLink}}\n   * @method canLoadItem\n   * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\n   * @returns {Boolean} Whether the loader can load the item.\n   * @static\n   */\n  s.canLoadItem = function (item) {\n    return item.type == createjs.AbstractLoader.JAVASCRIPT;\n  };\n\n  // protected methods\n  /**\n   * The result formatter for JavaScript files.\n   * @method _formatResult\n   * @param {AbstractLoader} loader\n   * @returns {HTMLLinkElement|HTMLStyleElement}\n   * @private\n   */\n  p._formatResult = function (loader) {\n    var tag = loader.getTag();\n    if (this._preferXHR) {\n      tag.text = loader.getResult(true);\n    }\n    return tag;\n  };\n  createjs.JavaScriptLoader = createjs.promote(JavaScriptLoader, \"AbstractLoader\");\n})();\n\n//##############################################################################\n// JSONLoader.js\n//##############################################################################\n\n(function () {\n  \"use strict\";\n\n  // constructor\n  /**\n   * A loader for JSON files. To load JSON cross-domain, use JSONP and the {{#crossLink \"JSONPLoader\"}}{{/crossLink}}\n   * instead. To load JSON-formatted manifests, use {{#crossLink \"ManifestLoader\"}}{{/crossLink}}, and to\n   * load EaselJS SpriteSheets, use {{#crossLink \"SpriteSheetLoader\"}}{{/crossLink}}.\n   * @class JSONLoader\n   * @param {LoadItem|Object} loadItem\n   * @extends AbstractLoader\n   * @constructor\n   */\n  function JSONLoader(loadItem) {\n    this.AbstractLoader_constructor(loadItem, true, createjs.AbstractLoader.JSON);\n\n    // public properties\n    this.resultFormatter = this._formatResult;\n  }\n  ;\n  var p = createjs.extend(JSONLoader, createjs.AbstractLoader);\n  var s = JSONLoader;\n\n  // static methods\n  /**\n   * Determines if the loader can load a specific item. This loader can only load items that are of type\n   * {{#crossLink \"AbstractLoader/JSON:property\"}}{{/crossLink}}.\n   * @method canLoadItem\n   * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\n   * @returns {Boolean} Whether the loader can load the item.\n   * @static\n   */\n  s.canLoadItem = function (item) {\n    return item.type == createjs.AbstractLoader.JSON;\n  };\n\n  // protected methods\n  /**\n   * The result formatter for JSON files.\n   * @method _formatResult\n   * @param {AbstractLoader} loader\n   * @returns {HTMLLinkElement|HTMLStyleElement}\n   * @private\n   */\n  p._formatResult = function (loader) {\n    var json = null;\n    try {\n      json = createjs.DataUtils.parseJSON(loader.getResult(true));\n    } catch (e) {\n      var event = new createjs.ErrorEvent(\"JSON_FORMAT\", null, e);\n      this._sendError(event);\n      return e;\n    }\n    return json;\n  };\n  createjs.JSONLoader = createjs.promote(JSONLoader, \"AbstractLoader\");\n})();\n\n//##############################################################################\n// JSONPLoader.js\n//##############################################################################\n\n(function () {\n  \"use strict\";\n\n  // constructor\n  /**\n   * A loader for JSONP files, which are JSON-formatted text files, wrapped in a callback. To load regular JSON\n   * without a callback use the {{#crossLink \"JSONLoader\"}}{{/crossLink}} instead. To load JSON-formatted manifests,\n   * use {{#crossLink \"ManifestLoader\"}}{{/crossLink}}, and to load EaselJS SpriteSheets, use\n   * {{#crossLink \"SpriteSheetLoader\"}}{{/crossLink}}.\n   *\n   * JSONP is a format that provides a solution for loading JSON files cross-domain <em>without</em> requiring CORS.\n   * JSONP files are loaded as JavaScript, and the \"callback\" is executed once they are loaded. The callback in the\n   * JSONP must match the callback passed to the loadItem.\n   *\n   * <h4>Example JSONP</h4>\n   *\n   * \t\tcallbackName({\n   * \t\t\t\"name\": \"value\",\n   *\t \t\t\"num\": 3,\n   *\t\t\t\"obj\": { \"bool\":true }\n   * \t\t});\n   *\n   * <h4>Example</h4>\n   *\n   * \t\tvar loadItem = {id:\"json\", type:\"jsonp\", src:\"http://server.com/text.json\", callback:\"callbackName\"}\n   * \t\tvar queue = new createjs.LoadQueue();\n   * \t\tqueue.on(\"complete\", handleComplete);\n   * \t\tqueue.loadItem(loadItem);\n   *\n   * \t\tfunction handleComplete(event) }\n   * \t\t\tvar json = queue.getResult(\"json\");\n   * \t\t\tconsole.log(json.obj.bool); // true\n   * \t\t}\n   *\n   * Note that JSONP files loaded concurrently require a <em>unique</em> callback. To ensure JSONP files are loaded\n   * in order, either use the {{#crossLink \"LoadQueue/setMaxConnections\"}}{{/crossLink}} method (set to 1),\n   * or set {{#crossLink \"LoadItem/maintainOrder:property\"}}{{/crossLink}} on items with the same callback.\n   *\n   * @class JSONPLoader\n   * @param {LoadItem|Object} loadItem\n   * @extends AbstractLoader\n   * @constructor\n   */\n  function JSONPLoader(loadItem) {\n    this.AbstractLoader_constructor(loadItem, false, createjs.AbstractLoader.JSONP);\n    this.setTag(document.createElement(\"script\"));\n    this.getTag().type = \"text/javascript\";\n  }\n  ;\n  var p = createjs.extend(JSONPLoader, createjs.AbstractLoader);\n  var s = JSONPLoader;\n\n  // static methods\n  /**\n   * Determines if the loader can load a specific item. This loader can only load items that are of type\n   * {{#crossLink \"AbstractLoader/JSONP:property\"}}{{/crossLink}}.\n   * @method canLoadItem\n   * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\n   * @returns {Boolean} Whether the loader can load the item.\n   * @static\n   */\n  s.canLoadItem = function (item) {\n    return item.type == createjs.AbstractLoader.JSONP;\n  };\n\n  // public methods\n  p.cancel = function () {\n    this.AbstractLoader_cancel();\n    this._dispose();\n  };\n\n  /**\n   * Loads the JSONp file.  Because of the unique loading needs of JSONp\n   * we don't use the AbstractLoader.load() method.\n   *\n   * @method load\n   *\n   */\n  p.load = function () {\n    if (this._item.callback == null) {\n      throw new Error('callback is required for loading JSONP requests.');\n    }\n\n    // TODO: Look into creating our own iFrame to handle the load\n    // In the first attempt, FF did not get the result\n    //   result instanceof Object did not work either\n    //   so we would need to clone the result.\n    if (window[this._item.callback] != null) {\n      throw new Error(\"JSONP callback '\" + this._item.callback + \"' already exists on window. You need to specify a different callback or re-name the current one.\");\n    }\n    window[this._item.callback] = createjs.proxy(this._handleLoad, this);\n    window.document.body.appendChild(this._tag);\n    this._loadTimeout = setTimeout(createjs.proxy(this._handleTimeout, this), this._item.loadTimeout);\n\n    // Load the tag\n    this._tag.src = this._item.src;\n  };\n\n  // private methods\n  /**\n   * Handle the JSONP callback, which is a public method defined on `window`.\n   * @method _handleLoad\n   * @param {Object} data The formatted JSON data.\n   * @private\n   */\n  p._handleLoad = function (data) {\n    this._result = this._rawResult = data;\n    this._sendComplete();\n    this._dispose();\n  };\n\n  /**\n   * The tag request has not loaded within the time specfied in loadTimeout.\n   * @method _handleError\n   * @param {Object} event The XHR error event.\n   * @private\n   */\n  p._handleTimeout = function () {\n    this._dispose();\n    this.dispatchEvent(new createjs.ErrorEvent(\"timeout\"));\n  };\n\n  /**\n   * Clean up the JSONP load. This clears out the callback and script tag that this loader creates.\n   * @method _dispose\n   * @private\n   */\n  p._dispose = function () {\n    window.document.body.removeChild(this._tag);\n    delete window[this._item.callback];\n    clearTimeout(this._loadTimeout);\n  };\n  createjs.JSONPLoader = createjs.promote(JSONPLoader, \"AbstractLoader\");\n})();\n\n//##############################################################################\n// ManifestLoader.js\n//##############################################################################\n\n(function () {\n  \"use strict\";\n\n  // constructor\n  /**\n   * A loader for JSON manifests. Items inside the manifest are loaded before the loader completes. To load manifests\n   * using JSONP, specify a {{#crossLink \"LoadItem/callback:property\"}}{{/crossLink}} as part of the\n   * {{#crossLink \"LoadItem\"}}{{/crossLink}}.\n   *\n   * The list of files in the manifest must be defined on the top-level JSON object in a `manifest` property. This\n   * example shows a sample manifest definition, as well as how to to include a sub-manifest.\n   *\n   * \t\t{\n   * \t\t\t\"path\": \"assets/\",\n   *\t \t    \"manifest\": [\n   *\t\t\t\t\"image.png\",\n   *\t\t\t\t{\"src\": \"image2.png\", \"id\":\"image2\"},\n   *\t\t\t\t{\"src\": \"sub-manifest.json\", \"type\":\"manifest\", \"callback\":\"jsonCallback\"}\n   *\t \t    ]\n   *\t \t}\n   *\n   * When a ManifestLoader has completed loading, the parent loader (usually a {{#crossLink \"LoadQueue\"}}{{/crossLink}},\n   * but could also be another ManifestLoader) will inherit all the loaded items, so you can access them directly.\n   *\n   * Note that the {{#crossLink \"JSONLoader\"}}{{/crossLink}} and {{#crossLink \"JSONPLoader\"}}{{/crossLink}} are\n   * higher priority loaders, so manifests <strong>must</strong> set the {{#crossLink \"LoadItem\"}}{{/crossLink}}\n   * {{#crossLink \"LoadItem/type:property\"}}{{/crossLink}} property to {{#crossLink \"AbstractLoader/MANIFEST:property\"}}{{/crossLink}}.\n   * @class ManifestLoader\n   * @param {LoadItem|Object} loadItem\n   * @extends AbstractLoader\n   * @constructor\n   */\n  function ManifestLoader(loadItem) {\n    this.AbstractLoader_constructor(loadItem, null, createjs.AbstractLoader.MANIFEST);\n\n    // Public Properties\n    /**\n     * An array of the plugins registered using {{#crossLink \"LoadQueue/installPlugin\"}}{{/crossLink}},\n     * used to pass plugins to new LoadQueues that may be created.\n     * @property _plugins\n     * @type {Array}\n     * @private\n     * @since 0.6.1\n     */\n    this.plugins = null;\n\n    // Protected Properties\n    /**\n     * An internal {{#crossLink \"LoadQueue\"}}{{/crossLink}} that loads the contents of the manifest.\n     * @property _manifestQueue\n     * @type {LoadQueue}\n     * @private\n     */\n    this._manifestQueue = null;\n  }\n  ;\n  var p = createjs.extend(ManifestLoader, createjs.AbstractLoader);\n  var s = ManifestLoader;\n\n  // static properties\n  /**\n   * The amount of progress that the manifest itself takes up.\n   * @property MANIFEST_PROGRESS\n   * @type {number}\n   * @default 0.25 (25%)\n   * @private\n   * @static\n   */\n  s.MANIFEST_PROGRESS = 0.25;\n\n  // static methods\n  /**\n   * Determines if the loader can load a specific item. This loader can only load items that are of type\n   * {{#crossLink \"AbstractLoader/MANIFEST:property\"}}{{/crossLink}}\n   * @method canLoadItem\n   * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\n   * @returns {Boolean} Whether the loader can load the item.\n   * @static\n   */\n  s.canLoadItem = function (item) {\n    return item.type == createjs.AbstractLoader.MANIFEST;\n  };\n\n  // public methods\n  p.load = function () {\n    this.AbstractLoader_load();\n  };\n\n  // protected methods\n  p._createRequest = function () {\n    var callback = this._item.callback;\n    if (callback != null) {\n      this._request = new createjs.JSONPLoader(this._item);\n    } else {\n      this._request = new createjs.JSONLoader(this._item);\n    }\n  };\n  p.handleEvent = function (event) {\n    switch (event.type) {\n      case \"complete\":\n        this._rawResult = event.target.getResult(true);\n        this._result = event.target.getResult();\n        this._sendProgress(s.MANIFEST_PROGRESS);\n        this._loadManifest(this._result);\n        return;\n      case \"progress\":\n        event.loaded *= s.MANIFEST_PROGRESS;\n        this.progress = event.loaded / event.total;\n        if (isNaN(this.progress) || this.progress == Infinity) {\n          this.progress = 0;\n        }\n        this._sendProgress(event);\n        return;\n    }\n    this.AbstractLoader_handleEvent(event);\n  };\n  p.destroy = function () {\n    this.AbstractLoader_destroy();\n    this._manifestQueue.close();\n  };\n\n  /**\n   * Create and load the manifest items once the actual manifest has been loaded.\n   * @method _loadManifest\n   * @param {Object} json\n   * @private\n   */\n  p._loadManifest = function (json) {\n    if (json && json.manifest) {\n      var queue = this._manifestQueue = new createjs.LoadQueue();\n      queue.on(\"fileload\", this._handleManifestFileLoad, this);\n      queue.on(\"progress\", this._handleManifestProgress, this);\n      queue.on(\"complete\", this._handleManifestComplete, this, true);\n      queue.on(\"error\", this._handleManifestError, this, true);\n      for (var i = 0, l = this.plugins.length; i < l; i++) {\n        // conserve order of plugins\n        queue.installPlugin(this.plugins[i]);\n      }\n      queue.loadManifest(json);\n    } else {\n      this._sendComplete();\n    }\n  };\n\n  /**\n   * An item from the {{#crossLink \"_manifestQueue:property\"}}{{/crossLink}} has completed.\n   * @method _handleManifestFileLoad\n   * @param {Event} event\n   * @private\n   */\n  p._handleManifestFileLoad = function (event) {\n    event.target = null;\n    this.dispatchEvent(event);\n  };\n\n  /**\n   * The manifest has completed loading. This triggers the {{#crossLink \"AbstractLoader/complete:event\"}}{{/crossLink}}\n   * {{#crossLink \"Event\"}}{{/crossLink}} from the ManifestLoader.\n   * @method _handleManifestComplete\n   * @param {Event} event\n   * @private\n   */\n  p._handleManifestComplete = function (event) {\n    this._loadedItems = this._manifestQueue.getItems(true);\n    this._sendComplete();\n  };\n\n  /**\n   * The manifest has reported progress.\n   * @method _handleManifestProgress\n   * @param {ProgressEvent} event\n   * @private\n   */\n  p._handleManifestProgress = function (event) {\n    this.progress = event.progress * (1 - s.MANIFEST_PROGRESS) + s.MANIFEST_PROGRESS;\n    this._sendProgress(this.progress);\n  };\n\n  /**\n   * The manifest has reported an error with one of the files.\n   * @method _handleManifestError\n   * @param {ErrorEvent} event\n   * @private\n   */\n  p._handleManifestError = function (event) {\n    var newEvent = new createjs.Event(\"fileerror\");\n    newEvent.item = event.data;\n    this.dispatchEvent(newEvent);\n  };\n  createjs.ManifestLoader = createjs.promote(ManifestLoader, \"AbstractLoader\");\n})();\n\n//##############################################################################\n// SoundLoader.js\n//##############################################################################\n\n(function () {\n  \"use strict\";\n\n  // constructor\n  /**\n   * A loader for HTML audio files. PreloadJS can not load WebAudio files, as a WebAudio context is required, which\n   * should be created by either a library playing the sound (such as <a href=\"http://soundjs.com\">SoundJS</a>, or an\n   * external framework that handles audio playback. To load content that can be played by WebAudio, use the\n   * {{#crossLink \"BinaryLoader\"}}{{/crossLink}}, and handle the audio context decoding manually.\n   * @class SoundLoader\n   * @param {LoadItem|Object} loadItem\n   * @param {Boolean} preferXHR\n   * @extends AbstractMediaLoader\n   * @constructor\n   */\n  function SoundLoader(loadItem, preferXHR) {\n    this.AbstractMediaLoader_constructor(loadItem, preferXHR, createjs.AbstractLoader.SOUND);\n\n    // protected properties\n    if (createjs.RequestUtils.isAudioTag(loadItem)) {\n      this._tag = loadItem;\n    } else if (createjs.RequestUtils.isAudioTag(loadItem.src)) {\n      this._tag = loadItem;\n    } else if (createjs.RequestUtils.isAudioTag(loadItem.tag)) {\n      this._tag = createjs.RequestUtils.isAudioTag(loadItem) ? loadItem : loadItem.src;\n    }\n    if (this._tag != null) {\n      this._preferXHR = false;\n    }\n  }\n  ;\n  var p = createjs.extend(SoundLoader, createjs.AbstractMediaLoader);\n  var s = SoundLoader;\n\n  // static methods\n  /**\n   * Determines if the loader can load a specific item. This loader can only load items that are of type\n   * {{#crossLink \"AbstractLoader/SOUND:property\"}}{{/crossLink}}.\n   * @method canLoadItem\n   * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\n   * @returns {Boolean} Whether the loader can load the item.\n   * @static\n   */\n  s.canLoadItem = function (item) {\n    return item.type == createjs.AbstractLoader.SOUND;\n  };\n\n  // protected methods\n  p._createTag = function (src) {\n    var tag = document.createElement(\"audio\");\n    tag.autoplay = false;\n    tag.preload = \"none\";\n\n    //LM: Firefox fails when this the preload=\"none\" for other tags, but it needs to be \"none\" to ensure PreloadJS works.\n    tag.src = src;\n    return tag;\n  };\n  createjs.SoundLoader = createjs.promote(SoundLoader, \"AbstractMediaLoader\");\n})();\n\n//##############################################################################\n// VideoLoader.js\n//##############################################################################\n\n(function () {\n  \"use strict\";\n\n  // constructor\n  /**\n   * A loader for video files.\n   * @class VideoLoader\n   * @param {LoadItem|Object} loadItem\n   * @param {Boolean} preferXHR\n   * @extends AbstractMediaLoader\n   * @constructor\n   */\n  function VideoLoader(loadItem, preferXHR) {\n    this.AbstractMediaLoader_constructor(loadItem, preferXHR, createjs.AbstractLoader.VIDEO);\n    if (createjs.RequestUtils.isVideoTag(loadItem) || createjs.RequestUtils.isVideoTag(loadItem.src)) {\n      this.setTag(createjs.RequestUtils.isVideoTag(loadItem) ? loadItem : loadItem.src);\n\n      // We can't use XHR for a tag that's passed in.\n      this._preferXHR = false;\n    } else {\n      this.setTag(this._createTag());\n    }\n  }\n  ;\n  var p = createjs.extend(VideoLoader, createjs.AbstractMediaLoader);\n  var s = VideoLoader;\n\n  /**\n   * Create a new video tag\n   *\n   * @returns {HTMLElement}\n   * @private\n   */\n  p._createTag = function () {\n    return document.createElement(\"video\");\n  };\n\n  // static methods\n  /**\n   * Determines if the loader can load a specific item. This loader can only load items that are of type\n   * {{#crossLink \"AbstractLoader/VIDEO:property\"}}{{/crossLink}}.\n   * @method canLoadItem\n   * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\n   * @returns {Boolean} Whether the loader can load the item.\n   * @static\n   */\n  s.canLoadItem = function (item) {\n    return item.type == createjs.AbstractLoader.VIDEO;\n  };\n  createjs.VideoLoader = createjs.promote(VideoLoader, \"AbstractMediaLoader\");\n})();\n\n//##############################################################################\n// SpriteSheetLoader.js\n//##############################################################################\n\n(function () {\n  \"use strict\";\n\n  // constructor\n  /**\n   * A loader for EaselJS SpriteSheets. Images inside the spritesheet definition are loaded before the loader\n   * completes. To load SpriteSheets using JSONP, specify a {{#crossLink \"LoadItem/callback:property\"}}{{/crossLink}}\n   * as part of the {{#crossLink \"LoadItem\"}}{{/crossLink}}. Note that the {{#crossLink \"JSONLoader\"}}{{/crossLink}}\n   * and {{#crossLink \"JSONPLoader\"}}{{/crossLink}} are higher priority loaders, so SpriteSheets <strong>must</strong>\n   * set the {{#crossLink \"LoadItem\"}}{{/crossLink}} {{#crossLink \"LoadItem/type:property\"}}{{/crossLink}} property\n   * to {{#crossLink \"AbstractLoader/SPRITESHEET:property\"}}{{/crossLink}}.\n   *\n   * The {{#crossLink \"LoadItem\"}}{{/crossLink}} {{#crossLink \"LoadItem/crossOrigin:property\"}}{{/crossLink}} as well\n   * as the {{#crossLink \"LoadQueue's\"}}{{/crossLink}} `basePath` argument and {{#crossLink \"LoadQueue/_preferXHR\"}}{{/crossLink}}\n   * property supplied to the {{#crossLink \"LoadQueue\"}}{{/crossLink}} are passed on to the sub-manifest that loads\n   * the SpriteSheet images.\n   *\n   * Note that the SpriteSheet JSON does not respect the {{#crossLink \"LoadQueue/_preferXHR:property\"}}{{/crossLink}}\n   * property, which should instead be determined by the presence of a {{#crossLink \"LoadItem/callback:property\"}}{{/crossLink}}\n   * property on the SpriteSheet load item. This is because the JSON loaded will have a different format depending on\n   * if it is loaded as JSON, so just changing `preferXHR` is not enough to change how it is loaded.\n   * @class SpriteSheetLoader\n   * @param {LoadItem|Object} loadItem\n   * @extends AbstractLoader\n   * @constructor\n   */\n  function SpriteSheetLoader(loadItem, preferXHR) {\n    this.AbstractLoader_constructor(loadItem, preferXHR, createjs.AbstractLoader.SPRITESHEET);\n\n    // protected properties\n    /**\n     * An internal queue which loads the SpriteSheet's images.\n     * @method _manifestQueue\n     * @type {LoadQueue}\n     * @private\n     */\n    this._manifestQueue = null;\n  }\n  var p = createjs.extend(SpriteSheetLoader, createjs.AbstractLoader);\n  var s = SpriteSheetLoader;\n\n  // static properties\n  /**\n   * The amount of progress that the manifest itself takes up.\n   * @property SPRITESHEET_PROGRESS\n   * @type {number}\n   * @default 0.25 (25%)\n   * @private\n   * @static\n   */\n  s.SPRITESHEET_PROGRESS = 0.25;\n\n  // static methods\n  /**\n   * Determines if the loader can load a specific item. This loader can only load items that are of type\n   * {{#crossLink \"AbstractLoader/SPRITESHEET:property\"}}{{/crossLink}}\n   * @method canLoadItem\n   * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\n   * @returns {Boolean} Whether the loader can load the item.\n   * @static\n   */\n  s.canLoadItem = function (item) {\n    return item.type == createjs.AbstractLoader.SPRITESHEET;\n  };\n\n  // public methods\n  p.destroy = function () {\n    this.AbstractLoader_destroy;\n    this._manifestQueue.close();\n  };\n\n  // protected methods\n  p._createRequest = function () {\n    var callback = this._item.callback;\n    if (callback != null) {\n      this._request = new createjs.JSONPLoader(this._item);\n    } else {\n      this._request = new createjs.JSONLoader(this._item);\n    }\n  };\n  p.handleEvent = function (event) {\n    switch (event.type) {\n      case \"complete\":\n        this._rawResult = event.target.getResult(true);\n        this._result = event.target.getResult();\n        this._sendProgress(s.SPRITESHEET_PROGRESS);\n        this._loadManifest(this._result);\n        return;\n      case \"progress\":\n        event.loaded *= s.SPRITESHEET_PROGRESS;\n        this.progress = event.loaded / event.total;\n        if (isNaN(this.progress) || this.progress == Infinity) {\n          this.progress = 0;\n        }\n        this._sendProgress(event);\n        return;\n    }\n    this.AbstractLoader_handleEvent(event);\n  };\n\n  /**\n   * Create and load the images once the SpriteSheet JSON has been loaded.\n   * @method _loadManifest\n   * @param {Object} json\n   * @private\n   */\n  p._loadManifest = function (json) {\n    if (json && json.images) {\n      var queue = this._manifestQueue = new createjs.LoadQueue(this._preferXHR, this._item.path, this._item.crossOrigin);\n      queue.on(\"complete\", this._handleManifestComplete, this, true);\n      queue.on(\"fileload\", this._handleManifestFileLoad, this);\n      queue.on(\"progress\", this._handleManifestProgress, this);\n      queue.on(\"error\", this._handleManifestError, this, true);\n      queue.loadManifest(json.images);\n    }\n  };\n\n  /**\n   * An item from the {{#crossLink \"_manifestQueue:property\"}}{{/crossLink}} has completed.\n   * @method _handleManifestFileLoad\n   * @param {Event} event\n   * @private\n   */\n  p._handleManifestFileLoad = function (event) {\n    var image = event.result;\n    if (image != null) {\n      var images = this.getResult().images;\n      var pos = images.indexOf(event.item.src);\n      images[pos] = image;\n    }\n  };\n\n  /**\n   * The images have completed loading. This triggers the {{#crossLink \"AbstractLoader/complete:event\"}}{{/crossLink}}\n   * {{#crossLink \"Event\"}}{{/crossLink}} from the SpriteSheetLoader.\n   * @method _handleManifestComplete\n   * @param {Event} event\n   * @private\n   */\n  p._handleManifestComplete = function (event) {\n    this._result = new createjs.SpriteSheet(this._result);\n    this._loadedItems = this._manifestQueue.getItems(true);\n    this._sendComplete();\n  };\n\n  /**\n   * The images {{#crossLink \"LoadQueue\"}}{{/crossLink}} has reported progress.\n   * @method _handleManifestProgress\n   * @param {ProgressEvent} event\n   * @private\n   */\n  p._handleManifestProgress = function (event) {\n    this.progress = event.progress * (1 - s.SPRITESHEET_PROGRESS) + s.SPRITESHEET_PROGRESS;\n    this._sendProgress(this.progress);\n  };\n\n  /**\n   * An image has reported an error.\n   * @method _handleManifestError\n   * @param {ErrorEvent} event\n   * @private\n   */\n  p._handleManifestError = function (event) {\n    var newEvent = new createjs.Event(\"fileerror\");\n    newEvent.item = event.data;\n    this.dispatchEvent(newEvent);\n  };\n  createjs.SpriteSheetLoader = createjs.promote(SpriteSheetLoader, \"AbstractLoader\");\n})();\n\n//##############################################################################\n// SVGLoader.js\n//##############################################################################\n\n(function () {\n  \"use strict\";\n\n  // constructor\n  /**\n   * A loader for SVG files.\n   * @class SVGLoader\n   * @param {LoadItem|Object} loadItem\n   * @param {Boolean} preferXHR\n   * @extends AbstractLoader\n   * @constructor\n   */\n  function SVGLoader(loadItem, preferXHR) {\n    this.AbstractLoader_constructor(loadItem, preferXHR, createjs.AbstractLoader.SVG);\n\n    // public properties\n    this.resultFormatter = this._formatResult;\n\n    // protected properties\n    this._tagSrcAttribute = \"data\";\n    if (preferXHR) {\n      this.setTag(document.createElement(\"svg\"));\n    } else {\n      this.setTag(document.createElement(\"object\"));\n      this.getTag().type = \"image/svg+xml\";\n    }\n  }\n  ;\n  var p = createjs.extend(SVGLoader, createjs.AbstractLoader);\n  var s = SVGLoader;\n\n  // static methods\n  /**\n   * Determines if the loader can load a specific item. This loader can only load items that are of type\n   * {{#crossLink \"AbstractLoader/SVG:property\"}}{{/crossLink}}\n   * @method canLoadItem\n   * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\n   * @returns {Boolean} Whether the loader can load the item.\n   * @static\n   */\n  s.canLoadItem = function (item) {\n    return item.type == createjs.AbstractLoader.SVG;\n  };\n\n  // protected methods\n  /**\n   * The result formatter for SVG files.\n   * @method _formatResult\n   * @param {AbstractLoader} loader\n   * @returns {Object}\n   * @private\n   */\n  p._formatResult = function (loader) {\n    // mime should be image/svg+xml, but Opera requires text/xml\n    var xml = createjs.DataUtils.parseXML(loader.getResult(true), \"text/xml\");\n    var tag = loader.getTag();\n    if (!this._preferXHR && document.body.contains(tag)) {\n      document.body.removeChild(tag);\n    }\n    if (xml.documentElement != null) {\n      tag.appendChild(xml.documentElement);\n      tag.style.visibility = \"visible\";\n      return tag;\n    } else {\n      // For browsers that don't support SVG, just give them the XML. (IE 9-8)\n      return xml;\n    }\n  };\n  createjs.SVGLoader = createjs.promote(SVGLoader, \"AbstractLoader\");\n})();\n\n//##############################################################################\n// XMLLoader.js\n//##############################################################################\n\n(function () {\n  \"use strict\";\n\n  // constructor\n  /**\n   * A loader for CSS files.\n   * @class XMLLoader\n   * @param {LoadItem|Object} loadItem\n   * @extends AbstractLoader\n   * @constructor\n   */\n  function XMLLoader(loadItem) {\n    this.AbstractLoader_constructor(loadItem, true, createjs.AbstractLoader.XML);\n\n    // public properties\n    this.resultFormatter = this._formatResult;\n  }\n  ;\n  var p = createjs.extend(XMLLoader, createjs.AbstractLoader);\n  var s = XMLLoader;\n\n  // static methods\n  /**\n   * Determines if the loader can load a specific item. This loader can only load items that are of type\n   * {{#crossLink \"AbstractLoader/XML:property\"}}{{/crossLink}}.\n   * @method canLoadItem\n   * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\n   * @returns {Boolean} Whether the loader can load the item.\n   * @static\n   */\n  s.canLoadItem = function (item) {\n    return item.type == createjs.AbstractLoader.XML;\n  };\n\n  // protected methods\n  /**\n   * The result formatter for XML files.\n   * @method _formatResult\n   * @param {AbstractLoader} loader\n   * @returns {XMLDocument}\n   * @private\n   */\n  p._formatResult = function (loader) {\n    return createjs.DataUtils.parseXML(loader.getResult(true), \"text/xml\");\n  };\n  createjs.XMLLoader = createjs.promote(XMLLoader, \"AbstractLoader\");\n})();\n\n//##############################################################################\n// version.js\n//##############################################################################\n\n(function () {\n  /**\n   * Static class holding library specific information such as the version and buildDate of the library.\n   * The SoundJS class has been renamed {{#crossLink \"Sound\"}}{{/crossLink}}.  Please see {{#crossLink \"Sound\"}}{{/crossLink}}\n   * for information on using sound.\n   * @class SoundJS\n   **/\n  var s = createjs.SoundJS = createjs.SoundJS || {};\n\n  /**\n   * The version string for this release.\n   * @property version\n   * @type String\n   * @static\n   **/\n  s.version = /*=version*/\"0.6.2\"; // injected by build process\n\n  /**\n   * The build date for this release in UTC format.\n   * @property buildDate\n   * @type String\n   * @static\n   **/\n  s.buildDate = /*=date*/\"Thu, 26 Nov 2015 20:44:31 GMT\"; // injected by build process\n})();\n\n//##############################################################################\n// IndexOf.js\n//##############################################################################\n\n/**\n * @class Utility Methods\n */\n\n/**\n * Finds the first occurrence of a specified value searchElement in the passed in array, and returns the index of\n * that value.  Returns -1 if value is not found.\n *\n *      var i = createjs.indexOf(myArray, myElementToFind);\n *\n * @method indexOf\n * @param {Array} array Array to search for searchElement\n * @param searchElement Element to find in array.\n * @return {Number} The first index of searchElement in array.\n */\ncreatejs.indexOf = function (array, searchElement) {\n  \"use strict\";\n\n  for (var i = 0, l = array.length; i < l; i++) {\n    if (searchElement === array[i]) {\n      return i;\n    }\n  }\n  return -1;\n};\n\n//##############################################################################\n// Proxy.js\n//##############################################################################\n\n/**\n * Various utilities that the CreateJS Suite uses. Utilities are created as separate files, and will be available on the\n * createjs namespace directly.\n *\n * <h4>Example</h4>\n *\n *      myObject.addEventListener(\"change\", createjs.proxy(myMethod, scope));\n *\n * @class Utility Methods\n * @main Utility Methods\n */\n\n(function () {\n  \"use strict\";\n\n  /**\n   * A function proxy for methods. By default, JavaScript methods do not maintain scope, so passing a method as a\n   * callback will result in the method getting called in the scope of the caller. Using a proxy ensures that the\n   * method gets called in the correct scope.\n   *\n   * Additional arguments can be passed that will be applied to the function when it is called.\n   *\n   * <h4>Example</h4>\n   *\n   *      myObject.addEventListener(\"event\", createjs.proxy(myHandler, this, arg1, arg2));\n   *\n   *      function myHandler(arg1, arg2) {\n   *           // This gets called when myObject.myCallback is executed.\n   *      }\n   *\n   * @method proxy\n   * @param {Function} method The function to call\n   * @param {Object} scope The scope to call the method name on\n   * @param {mixed} [arg] * Arguments that are appended to the callback for additional params.\n   * @public\n   * @static\n   */\n  createjs.proxy = function (method, scope) {\n    var aArgs = Array.prototype.slice.call(arguments, 2);\n    return function () {\n      return method.apply(scope, Array.prototype.slice.call(arguments, 0).concat(aArgs));\n    };\n  };\n})();\n\n//##############################################################################\n// BrowserDetect.js\n//##############################################################################\n\n/**\n * @class Utility Methods\n */\n(function () {\n  \"use strict\";\n\n  /**\n   * An object that determines the current browser, version, operating system, and other environment\n   * variables via user agent string.\n   *\n   * Used for audio because feature detection is unable to detect the many limitations of mobile devices.\n   *\n   * <h4>Example</h4>\n   *\n   *      if (createjs.BrowserDetect.isIOS) { // do stuff }\n   *\n   * @property BrowserDetect\n   * @type {Object}\n   * @param {Boolean} isFirefox True if our browser is Firefox.\n   * @param {Boolean} isOpera True if our browser is opera.\n   * @param {Boolean} isChrome True if our browser is Chrome.  Note that Chrome for Android returns true, but is a\n   * completely different browser with different abilities.\n   * @param {Boolean} isIOS True if our browser is safari for iOS devices (iPad, iPhone, and iPod).\n   * @param {Boolean} isAndroid True if our browser is Android.\n   * @param {Boolean} isBlackberry True if our browser is Blackberry.\n   * @constructor\n   * @static\n   */\n  function BrowserDetect() {\n    throw \"BrowserDetect cannot be instantiated\";\n  }\n  ;\n  var agent = BrowserDetect.agent = window.navigator.userAgent;\n  BrowserDetect.isWindowPhone = agent.indexOf(\"IEMobile\") > -1 || agent.indexOf(\"Windows Phone\") > -1;\n  BrowserDetect.isFirefox = agent.indexOf(\"Firefox\") > -1;\n  BrowserDetect.isOpera = window.opera != null;\n  BrowserDetect.isChrome = agent.indexOf(\"Chrome\") > -1; // NOTE that Chrome on Android returns true but is a completely different browser with different abilities\n  BrowserDetect.isIOS = (agent.indexOf(\"iPod\") > -1 || agent.indexOf(\"iPhone\") > -1 || agent.indexOf(\"iPad\") > -1) && !BrowserDetect.isWindowPhone;\n  BrowserDetect.isAndroid = agent.indexOf(\"Android\") > -1 && !BrowserDetect.isWindowPhone;\n  BrowserDetect.isBlackberry = agent.indexOf(\"Blackberry\") > -1;\n  createjs.BrowserDetect = BrowserDetect;\n})();\n\n//##############################################################################\n// AudioSprite.js\n//##############################################################################\n\n//  NOTE this is \"Class\" is purely to document audioSprite Setup and usage.\n\n/**\n * <strong>Note: AudioSprite is not a class, but its usage is easily lost in the documentation, so it has been called\n * out here for quick reference.</strong>\n *\n * Audio sprites are much like CSS sprites or image sprite sheets: multiple audio assets grouped into a single file.\n * Audio sprites work around limitations in certain browsers, where only a single sound can be loaded and played at a\n * time. We recommend at least 300ms of silence between audio clips to deal with HTML audio tag inaccuracy, and to prevent\n * accidentally playing bits of the neighbouring clips.\n *\n * <strong>Benefits of Audio Sprites:</strong>\n * <ul>\n *     <li>More robust support for older browsers and devices that only allow a single audio instance, such as iOS 5.</li>\n *     <li>They provide a work around for the Internet Explorer 9 audio tag limit, which restricts how many different\n *     sounds that could be loaded at once.</li>\n *     <li>Faster loading by only requiring a single network request for several sounds, especially on mobile devices\n * where the network round trip for each file can add significant latency.</li>\n * </ul>\n *\n * <strong>Drawbacks of Audio Sprites</strong>\n * <ul>\n *     <li>No guarantee of smooth looping when using HTML or Flash audio. If you have a track that needs to loop\n * \t\tsmoothly and you are supporting non-web audio browsers, do not use audio sprites for that sound if you can avoid\n * \t\tit.</li>\n *     <li>No guarantee that HTML audio will play back immediately, especially the first time. In some browsers\n *     (Chrome!), HTML audio will only load enough to play through at the current download speed  so we rely on the\n *     `canplaythrough` event to determine if the audio is loaded. Since audio sprites must jump ahead to play specific\n *     sounds, the audio may not yet have downloaded fully.</li>\n *     <li>Audio sprites share the same core source, so if you have a sprite with 5 sounds and are limited to 2\n * \t\tconcurrently playing instances, you can only play 2 of the sounds at the same time.</li>\n * </ul>\n *\n * <h4>Example</h4>\n *\n *\t\tcreatejs.Sound.initializeDefaultPlugins();\n *\t\tvar assetsPath = \"./assets/\";\n *\t\tvar sounds = [{\n *\t\t\tsrc:\"MyAudioSprite.ogg\", data: {\n *\t\t\t\taudioSprite: [\n *\t\t\t\t\t{id:\"sound1\", startTime:0, duration:500},\n *\t\t\t\t\t{id:\"sound2\", startTime:1000, duration:400},\n *\t\t\t\t\t{id:\"sound3\", startTime:1700, duration: 1000}\n *\t\t\t\t]}\n *\t\t\t}\n *\t\t];\n *\t\tcreatejs.Sound.alternateExtensions = [\"mp3\"];\n *\t\tcreatejs.Sound.on(\"fileload\", loadSound);\n *\t\tcreatejs.Sound.registerSounds(sounds, assetsPath);\n *\t\t// after load is complete\n *\t\tcreatejs.Sound.play(\"sound2\");\n *\n * You can also create audio sprites on the fly by setting the startTime and duration when creating an new AbstractSoundInstance.\n *\n * \t\tcreatejs.Sound.play(\"MyAudioSprite\", {startTime: 1000, duration: 400});\n *\n * The excellent CreateJS community has created a tool to create audio sprites, available at\n * <a href=\"https://github.com/tonistiigi/audiosprite\" target=\"_blank\">https://github.com/tonistiigi/audiosprite</a>,\n * as well as a <a href=\"http://jsfiddle.net/bharat_battu/g8fFP/12/\" target=\"_blank\">jsfiddle</a> to convert the output\n * to SoundJS format.\n *\n * @class AudioSprite\n * @since 0.6.0\n */\n\n//##############################################################################\n// PlayPropsConfig.js\n//##############################################################################\n\n(function () {\n  \"use strict\";\n\n  /**\n   * A class to store the optional play properties passed in {{#crossLink \"Sound/play\"}}{{/crossLink}} and\n   * {{#crossLink \"AbstractSoundInstance/play\"}}{{/crossLink}} calls.\n   *\n   * Optional Play Properties Include:\n   * <ul>\n   * <li>interrupt - How to interrupt any currently playing instances of audio with the same source,\n   * if the maximum number of instances of the sound are already playing. Values are defined as <code>INTERRUPT_TYPE</code>\n   * constants on the Sound class, with the default defined by {{#crossLink \"Sound/defaultInterruptBehavior:property\"}}{{/crossLink}}.</li>\n   * <li>delay - The amount of time to delay the start of audio playback, in milliseconds.</li>\n   * <li>offset - The offset from the start of the audio to begin playback, in milliseconds.</li>\n   * <li>loop - How many times the audio loops when it reaches the end of playback. The default is 0 (no\n   * loops), and -1 can be used for infinite playback.</li>\n   * <li>volume - The volume of the sound, between 0 and 1. Note that the master volume is applied\n   * against the individual volume.</li>\n   * <li>pan - The left-right pan of the sound (if supported), between -1 (left) and 1 (right).</li>\n   * <li>startTime - To create an audio sprite (with duration), the initial offset to start playback and loop from, in milliseconds.</li>\n   * <li>duration - To create an audio sprite (with startTime), the amount of time to play the clip for, in milliseconds.</li>\n   * </ul>\n   *\n   * <h4>Example</h4>\n   *\n   * \tvar ppc = new createjs.PlayPropsConfig().set({interrupt: createjs.Sound.INTERRUPT_ANY, loop: -1, volume: 0.5})\n   * \tcreatejs.Sound.play(\"mySound\", ppc);\n   * \tmySoundInstance.play(ppc);\n   *\n   * @class PlayPropsConfig\n   * @constructor\n   * @since 0.6.1\n   */\n  // TODO think of a better name for this class\n  var PlayPropsConfig = function () {\n    // Public Properties\n    /**\n     * How to interrupt any currently playing instances of audio with the same source,\n     * if the maximum number of instances of the sound are already playing. Values are defined as\n     * <code>INTERRUPT_TYPE</code> constants on the Sound class, with the default defined by\n     * {{#crossLink \"Sound/defaultInterruptBehavior:property\"}}{{/crossLink}}.\n     * @property interrupt\n     * @type {string}\n     * @default null\n     */\n    this.interrupt = null;\n\n    /**\n     * The amount of time to delay the start of audio playback, in milliseconds.\n     * @property delay\n     * @type {Number}\n     * @default null\n     */\n    this.delay = null;\n\n    /**\n     * The offset from the start of the audio to begin playback, in milliseconds.\n     * @property offset\n     * @type {number}\n     * @default null\n     */\n    this.offset = null;\n\n    /**\n     * How many times the audio loops when it reaches the end of playback. The default is 0 (no\n     * loops), and -1 can be used for infinite playback.\n     * @property loop\n     * @type {number}\n     * @default null\n     */\n    this.loop = null;\n\n    /**\n     * The volume of the sound, between 0 and 1. Note that the master volume is applied\n     * against the individual volume.\n     * @property volume\n     * @type {number}\n     * @default null\n     */\n    this.volume = null;\n\n    /**\n     * The left-right pan of the sound (if supported), between -1 (left) and 1 (right).\n     * @property pan\n     * @type {number}\n     * @default null\n     */\n    this.pan = null;\n\n    /**\n     * Used to create an audio sprite (with duration), the initial offset to start playback and loop from, in milliseconds.\n     * @property startTime\n     * @type {number}\n     * @default null\n     */\n    this.startTime = null;\n\n    /**\n     * Used to create an audio sprite (with startTime), the amount of time to play the clip for, in milliseconds.\n     * @property duration\n     * @type {number}\n     * @default null\n     */\n    this.duration = null;\n  };\n  var p = PlayPropsConfig.prototype = {};\n  var s = PlayPropsConfig;\n\n  // Static Methods\n  /**\n   * Creates a PlayPropsConfig from another PlayPropsConfig or an Object.\n   *\n   * @method create\n   * @param {PlayPropsConfig|Object} value The play properties\n   * @returns {PlayPropsConfig}\n   * @static\n   */\n  s.create = function (value) {\n    if (value instanceof s || value instanceof Object) {\n      var ppc = new createjs.PlayPropsConfig();\n      ppc.set(value);\n      return ppc;\n    } else {\n      throw new Error(\"Type not recognized.\");\n    }\n  };\n\n  // Public Methods\n  /**\n   * Provides a chainable shortcut method for setting a number of properties on the instance.\n   *\n   * <h4>Example</h4>\n   *\n   *      var PlayPropsConfig = new createjs.PlayPropsConfig().set({loop:-1, volume:0.7});\n   *\n   * @method set\n   * @param {Object} props A generic object containing properties to copy to the PlayPropsConfig instance.\n   * @return {PlayPropsConfig} Returns the instance the method is called on (useful for chaining calls.)\n  */\n  p.set = function (props) {\n    for (var n in props) {\n      this[n] = props[n];\n    }\n    return this;\n  };\n  p.toString = function () {\n    return \"[PlayPropsConfig]\";\n  };\n  createjs.PlayPropsConfig = s;\n})();\n\n//##############################################################################\n// Sound.js\n//##############################################################################\n\n(function () {\n  \"use strict\";\n\n  /**\n   * The Sound class is the public API for creating sounds, controlling the overall sound levels, and managing plugins.\n   * All Sound APIs on this class are static.\n   *\n   * <b>Registering and Preloading</b><br />\n   * Before you can play a sound, it <b>must</b> be registered. You can do this with {{#crossLink \"Sound/registerSound\"}}{{/crossLink}},\n   * or register multiple sounds using {{#crossLink \"Sound/registerSounds\"}}{{/crossLink}}. If you don't register a\n   * sound prior to attempting to play it using {{#crossLink \"Sound/play\"}}{{/crossLink}} or create it using {{#crossLink \"Sound/createInstance\"}}{{/crossLink}},\n   * the sound source will be automatically registered but playback will fail as the source will not be ready. If you use\n   * <a href=\"http://preloadjs.com\" target=\"_blank\">PreloadJS</a>, registration is handled for you when the sound is\n   * preloaded. It is recommended to preload sounds either internally using the register functions or externally using\n   * PreloadJS so they are ready when you want to use them.\n   *\n   * <b>Playback</b><br />\n   * To play a sound once it's been registered and preloaded, use the {{#crossLink \"Sound/play\"}}{{/crossLink}} method.\n   * This method returns a {{#crossLink \"AbstractSoundInstance\"}}{{/crossLink}} which can be paused, resumed, muted, etc.\n   * Please see the {{#crossLink \"AbstractSoundInstance\"}}{{/crossLink}} documentation for more on the instance control APIs.\n   *\n   * <b>Plugins</b><br />\n   * By default, the {{#crossLink \"WebAudioPlugin\"}}{{/crossLink}} or the {{#crossLink \"HTMLAudioPlugin\"}}{{/crossLink}}\n   * are used (when available), although developers can change plugin priority or add new plugins (such as the\n   * provided {{#crossLink \"FlashAudioPlugin\"}}{{/crossLink}}). Please see the {{#crossLink \"Sound\"}}{{/crossLink}} API\n   * methods for more on the playback and plugin APIs. To install plugins, or specify a different plugin order, see\n   * {{#crossLink \"Sound/installPlugins\"}}{{/crossLink}}.\n   *\n   * <h4>Example</h4>\n   *\n   *      createjs.FlashAudioPlugin.swfPath = \"../src/soundjs/flashaudio\";\n   *      createjs.Sound.registerPlugins([createjs.WebAudioPlugin, createjs.FlashAudioPlugin]);\n   *      createjs.Sound.alternateExtensions = [\"mp3\"];\n   *      createjs.Sound.on(\"fileload\", this.loadHandler, this);\n   *      createjs.Sound.registerSound(\"path/to/mySound.ogg\", \"sound\");\n   *      function loadHandler(event) {\n      *          // This is fired for each sound that is registered.\n      *          var instance = createjs.Sound.play(\"sound\");  // play using id.  Could also use full source path or event.src.\n      *          instance.on(\"complete\", this.handleComplete, this);\n      *          instance.volume = 0.5;\n   *      }\n   *\n   * The maximum number of concurrently playing instances of the same sound can be specified in the \"data\" argument\n   * of {{#crossLink \"Sound/registerSound\"}}{{/crossLink}}.  Note that if not specified, the active plugin will apply\n   * a default limit.  Currently HTMLAudioPlugin sets a default limit of 2, while WebAudioPlugin and FlashAudioPlugin set a\n   * default limit of 100.\n   *\n   *      createjs.Sound.registerSound(\"sound.mp3\", \"soundId\", 4);\n   *\n   * Sound can be used as a plugin with PreloadJS to help preload audio properly. Audio preloaded with PreloadJS is\n   * automatically registered with the Sound class. When audio is not preloaded, Sound will do an automatic internal\n   * load. As a result, it may fail to play the first time play is called if the audio is not finished loading. Use\n   * the {{#crossLink \"Sound/fileload:event\"}}{{/crossLink}} event to determine when a sound has finished internally\n   * preloading. It is recommended that all audio is preloaded before it is played.\n   *\n   *      var queue = new createjs.LoadQueue();\n   *\t\tqueue.installPlugin(createjs.Sound);\n   *\n   * <b>Audio Sprites</b><br />\n   * SoundJS has added support for {{#crossLink \"AudioSprite\"}}{{/crossLink}}, available as of version 0.6.0.\n   * For those unfamiliar with audio sprites, they are much like CSS sprites or sprite sheets: multiple audio assets\n   * grouped into a single file.\n   *\n   * <h4>Example</h4>\n   *\n   *\t\tvar assetsPath = \"./assets/\";\n   *\t\tvar sounds = [{\n   *\t\t\tsrc:\"MyAudioSprite.ogg\", data: {\n   *\t\t\t\taudioSprite: [\n   *\t\t\t\t\t{id:\"sound1\", startTime:0, duration:500},\n   *\t\t\t\t\t{id:\"sound2\", startTime:1000, duration:400},\n   *\t\t\t\t\t{id:\"sound3\", startTime:1700, duration: 1000}\n   *\t\t\t\t]}\n  \t *\t\t\t}\n   *\t\t];\n   *\t\tcreatejs.Sound.alternateExtensions = [\"mp3\"];\n   *\t\tcreatejs.Sound.on(\"fileload\", loadSound);\n   *\t\tcreatejs.Sound.registerSounds(sounds, assetsPath);\n   *\t\t// after load is complete\n   *\t\tcreatejs.Sound.play(\"sound2\");\n   *\n   * <b>Mobile Playback</b><br />\n   * Devices running iOS require the WebAudio context to be \"unlocked\" by playing at least one sound inside of a user-\n   * initiated event (such as touch/click). Earlier versions of SoundJS included a \"MobileSafe\" sample, but this is no\n   * longer necessary as of SoundJS 0.6.2.\n   * <ul>\n   *     <li>\n   *         In SoundJS 0.4.1 and above, you can either initialize plugins or use the {{#crossLink \"WebAudioPlugin/playEmptySound\"}}{{/crossLink}}\n   *         method in the call stack of a user input event to manually unlock the audio context.\n   *     </li>\n   *     <li>\n   *         In SoundJS 0.6.2 and above, SoundJS will automatically listen for the first document-level \"mousedown\"\n   *         and \"touchend\" event, and unlock WebAudio. This will continue to check these events until the WebAudio\n   *         context becomes \"unlocked\" (changes from \"suspended\" to \"running\")\n   *     </li>\n   *     <li>\n   *         Both the \"mousedown\" and \"touchend\" events can be used to unlock audio in iOS9+, the \"touchstart\" event\n   *         will work in iOS8 and below. The \"touchend\" event will only work in iOS9 when the gesture is interpreted\n   *         as a \"click\", so if the user long-presses the button, it will no longer work.\n   *     </li>\n   *     <li>\n   *         When using the <a href=\"http://www.createjs.com/docs/easeljs/classes/Touch.html\">EaselJS Touch class</a>,\n   *         the \"mousedown\" event will not fire when a canvas is clicked, since MouseEvents are prevented, to ensure\n   *         only touch events fire. To get around this, you can either rely on \"touchend\", or:\n   *         <ol>\n   *             <li>Set the `allowDefault` property on the Touch class constructor to `true` (defaults to `false`).</li>\n   *             <li>Set the `preventSelection` property on the EaselJS `Stage` to `false`.</li>\n   *         </ol>\n   *         These settings may change how your application behaves, and are not recommended.\n   *     </li>\n   * </ul>\n   *\n   * <b>Loading Alternate Paths and Extension-less Files</b><br />\n   * SoundJS supports loading alternate paths and extension-less files by passing an object instead of a string for\n   * the `src` property, which is a hash using the format `{extension:\"path\", extension2:\"path2\"}`. These labels are\n   * how SoundJS determines if the browser will support the sound. This also enables multiple formats to live in\n   * different folders, or on CDNs, which often has completely different filenames for each file.\n   *\n   * Priority is determined by the property order (first property is tried first).  This is supported by both internal loading\n   * and loading with PreloadJS.\n   *\n   * <em>Note: an id is required for playback.</em>\n   *\n   * <h4>Example</h4>\n   *\n   *\t\tvar sounds = {path:\"./audioPath/\",\n   * \t\t\t\tmanifest: [\n   *\t\t\t\t{id: \"cool\", src: {mp3:\"mp3/awesome.mp3\", ogg:\"noExtensionOggFile\"}}\n   *\t\t]};\n   *\n   *\t\tcreatejs.Sound.alternateExtensions = [\"mp3\"];\n   *\t\tcreatejs.Sound.addEventListener(\"fileload\", handleLoad);\n   *\t\tcreatejs.Sound.registerSounds(sounds);\n   *\n   * <h3>Known Browser and OS issues</h3>\n   * <b>IE 9 HTML Audio limitations</b><br />\n   * <ul><li>There is a delay in applying volume changes to tags that occurs once playback is started. So if you have\n   * muted all sounds, they will all play during this delay until the mute applies internally. This happens regardless of\n   * when or how you apply the volume change, as the tag seems to need to play to apply it.</li>\n      * <li>MP3 encoding will not always work for audio tags, particularly in Internet Explorer. We've found default\n   * encoding with 64kbps works.</li>\n   * <li>Occasionally very short samples will get cut off.</li>\n   * <li>There is a limit to how many audio tags you can load and play at once, which appears to be determined by\n   * hardware and browser settings.  See {{#crossLink \"HTMLAudioPlugin.MAX_INSTANCES\"}}{{/crossLink}} for a safe\n   * estimate.</li></ul>\n   *\n   * <b>Firefox 25 Web Audio limitations</b>\n   * <ul><li>mp3 audio files do not load properly on all windows machines, reported\n   * <a href=\"https://bugzilla.mozilla.org/show_bug.cgi?id=929969\" target=\"_blank\">here</a>. </br>\n   * For this reason it is recommended to pass another FF supported type (ie ogg) first until this bug is resolved, if\n   * possible.</li></ul>\n  \t * <b>Safari limitations</b><br />\n   * <ul><li>Safari requires Quicktime to be installed for audio playback.</li></ul>\n   *\n   * <b>iOS 6 Web Audio limitations</b><br />\n   * <ul><li>Sound is initially locked, and must be unlocked via a user-initiated event. Please see the section on\n   * Mobile Playback above.</li>\n   * <li>A bug exists that will distort un-cached web audio when a video element is present in the DOM that has audio\n   * at a different sampleRate.</li>\n   * </ul>\n   *\n   * <b>Android HTML Audio limitations</b><br />\n   * <ul><li>We have no control over audio volume. Only the user can set volume on their device.</li>\n   * <li>We can only play audio inside a user event (touch/click).  This currently means you cannot loop sound or use\n   * a delay.</li></ul>\n   *\n   * <b>Web Audio and PreloadJS</b><br />\n   * <ul><li>Web Audio must be loaded through XHR, therefore when used with PreloadJS, tag loading is not possible.\n   * This means that tag loading can not be used to avoid cross domain issues.</li><ul>\n   *\n   * @class Sound\n   * @static\n   * @uses EventDispatcher\n   */\n  function Sound() {\n    throw \"Sound cannot be instantiated\";\n  }\n  var s = Sound;\n\n  // Static Properties\n  /**\n   * The interrupt value to interrupt any currently playing instance with the same source, if the maximum number of\n   * instances of the sound are already playing.\n   * @property INTERRUPT_ANY\n   * @type {String}\n   * @default any\n   * @static\n   */\n  s.INTERRUPT_ANY = \"any\";\n\n  /**\n   * The interrupt value to interrupt the earliest currently playing instance with the same source that progressed the\n   * least distance in the audio track, if the maximum number of instances of the sound are already playing.\n   * @property INTERRUPT_EARLY\n   * @type {String}\n   * @default early\n   * @static\n   */\n  s.INTERRUPT_EARLY = \"early\";\n\n  /**\n   * The interrupt value to interrupt the currently playing instance with the same source that progressed the most\n   * distance in the audio track, if the maximum number of instances of the sound are already playing.\n   * @property INTERRUPT_LATE\n   * @type {String}\n   * @default late\n   * @static\n   */\n  s.INTERRUPT_LATE = \"late\";\n\n  /**\n   * The interrupt value to not interrupt any currently playing instances with the same source, if the maximum number of\n   * instances of the sound are already playing.\n   * @property INTERRUPT_NONE\n   * @type {String}\n   * @default none\n   * @static\n   */\n  s.INTERRUPT_NONE = \"none\";\n\n  /**\n   * Defines the playState of an instance that is still initializing.\n   * @property PLAY_INITED\n   * @type {String}\n   * @default playInited\n   * @static\n   */\n  s.PLAY_INITED = \"playInited\";\n\n  /**\n   * Defines the playState of an instance that is currently playing or paused.\n   * @property PLAY_SUCCEEDED\n   * @type {String}\n   * @default playSucceeded\n   * @static\n   */\n  s.PLAY_SUCCEEDED = \"playSucceeded\";\n\n  /**\n   * Defines the playState of an instance that was interrupted by another instance.\n   * @property PLAY_INTERRUPTED\n   * @type {String}\n   * @default playInterrupted\n   * @static\n   */\n  s.PLAY_INTERRUPTED = \"playInterrupted\";\n\n  /**\n   * Defines the playState of an instance that completed playback.\n   * @property PLAY_FINISHED\n   * @type {String}\n   * @default playFinished\n   * @static\n   */\n  s.PLAY_FINISHED = \"playFinished\";\n\n  /**\n   * Defines the playState of an instance that failed to play. This is usually caused by a lack of available channels\n   * when the interrupt mode was \"INTERRUPT_NONE\", the playback stalled, or the sound could not be found.\n   * @property PLAY_FAILED\n   * @type {String}\n   * @default playFailed\n   * @static\n   */\n  s.PLAY_FAILED = \"playFailed\";\n\n  /**\n   * A list of the default supported extensions that Sound will <i>try</i> to play. Plugins will check if the browser\n   * can play these types, so modifying this list before a plugin is initialized will allow the plugins to try to\n   * support additional media types.\n   *\n   * NOTE this does not currently work for {{#crossLink \"FlashAudioPlugin\"}}{{/crossLink}}.\n   *\n   * More details on file formats can be found at <a href=\"http://en.wikipedia.org/wiki/Audio_file_format\" target=\"_blank\">http://en.wikipedia.org/wiki/Audio_file_format</a>.<br />\n   * A very detailed list of file formats can be found at <a href=\"http://www.fileinfo.com/filetypes/audio\" target=\"_blank\">http://www.fileinfo.com/filetypes/audio</a>.\n   * @property SUPPORTED_EXTENSIONS\n   * @type {Array[String]}\n   * @default [\"mp3\", \"ogg\", \"opus\", \"mpeg\", \"wav\", \"m4a\", \"mp4\", \"aiff\", \"wma\", \"mid\"]\n   * @since 0.4.0\n   * @static\n   */\n  s.SUPPORTED_EXTENSIONS = [\"mp3\", \"ogg\", \"opus\", \"mpeg\", \"wav\", \"m4a\", \"mp4\", \"aiff\", \"wma\", \"mid\"];\n\n  /**\n   * Some extensions use another type of extension support to play (one of them is a codex).  This allows you to map\n   * that support so plugins can accurately determine if an extension is supported.  Adding to this list can help\n   * plugins determine more accurately if an extension is supported.\n   *\n  \t * A useful list of extensions for each format can be found at <a href=\"http://html5doctor.com/html5-audio-the-state-of-play/\" target=\"_blank\">http://html5doctor.com/html5-audio-the-state-of-play/</a>.\n   * @property EXTENSION_MAP\n   * @type {Object}\n   * @since 0.4.0\n   * @default {m4a:\"mp4\"}\n   * @static\n   */\n  s.EXTENSION_MAP = {\n    m4a: \"mp4\"\n  };\n\n  /**\n   * The RegExp pattern used to parse file URIs. This supports simple file names, as well as full domain URIs with\n   * query strings. The resulting match is: protocol:$1 domain:$2 path:$3 file:$4 extension:$5 query:$6.\n   * @property FILE_PATTERN\n   * @type {RegExp}\n   * @static\n   * @protected\n   */\n  s.FILE_PATTERN = /^(?:(\\w+:)\\/{2}(\\w+(?:\\.\\w+)*\\/?))?([/.]*?(?:[^?]+)?\\/)?((?:[^/?]+)\\.(\\w+))(?:\\?(\\S+)?)?$/;\n\n  // Class Public properties\n  /**\n   * Determines the default behavior for interrupting other currently playing instances with the same source, if the\n   * maximum number of instances of the sound are already playing.  Currently the default is {{#crossLink \"Sound/INTERRUPT_NONE:property\"}}{{/crossLink}}\n   * but this can be set and will change playback behavior accordingly.  This is only used when {{#crossLink \"Sound/play\"}}{{/crossLink}}\n   * is called without passing a value for interrupt.\n   * @property defaultInterruptBehavior\n   * @type {String}\n   * @default Sound.INTERRUPT_NONE, or \"none\"\n   * @static\n   * @since 0.4.0\n   */\n  s.defaultInterruptBehavior = s.INTERRUPT_NONE; // OJR does s.INTERRUPT_ANY make more sense as default?  Needs game dev testing to see which case makes more sense.\n\n  /**\n   * An array of extensions to attempt to use when loading sound, if the default is unsupported by the active plugin.\n   * These are applied in order, so if you try to Load Thunder.ogg in a browser that does not support ogg, and your\n   * extensions array is [\"mp3\", \"m4a\", \"wav\"] it will check mp3 support, then m4a, then wav. The audio files need\n   * to exist in the same location, as only the extension is altered.\n   *\n   * Note that regardless of which file is loaded, you can call {{#crossLink \"Sound/createInstance\"}}{{/crossLink}}\n   * and {{#crossLink \"Sound/play\"}}{{/crossLink}} using the same id or full source path passed for loading.\n   *\n   * <h4>Example</h4>\n   *\n   *\tvar sounds = [\n   *\t\t{src:\"myPath/mySound.ogg\", id:\"example\"},\n   *\t];\n   *\tcreatejs.Sound.alternateExtensions = [\"mp3\"]; // now if ogg is not supported, SoundJS will try asset0.mp3\n   *\tcreatejs.Sound.on(\"fileload\", handleLoad); // call handleLoad when each sound loads\n   *\tcreatejs.Sound.registerSounds(sounds, assetPath);\n   *\t// ...\n   *\tcreatejs.Sound.play(\"myPath/mySound.ogg\"); // works regardless of what extension is supported.  Note calling with ID is a better approach\n   *\n   * @property alternateExtensions\n   * @type {Array}\n   * @since 0.5.2\n   * @static\n   */\n  s.alternateExtensions = [];\n\n  /**\n   * The currently active plugin. If this is null, then no plugin could be initialized. If no plugin was specified,\n   * Sound attempts to apply the default plugins: {{#crossLink \"WebAudioPlugin\"}}{{/crossLink}}, followed by\n   * {{#crossLink \"HTMLAudioPlugin\"}}{{/crossLink}}.\n   * @property activePlugin\n   * @type {Object}\n   * @static\n   */\n  s.activePlugin = null;\n\n  // class getter / setter properties\n  /**\n   * Set the master volume of Sound. The master volume is multiplied against each sound's individual volume.  For\n   * example, if master volume is 0.5 and a sound's volume is 0.5, the resulting volume is 0.25. To set individual\n   * sound volume, use AbstractSoundInstance {{#crossLink \"AbstractSoundInstance/volume:property\"}}{{/crossLink}} instead.\n   *\n   * <h4>Example</h4>\n   *\n   *     createjs.Sound.volume = 0.5;\n   *\n   *\n   * @property volume\n   * @type {Number}\n   * @default 1\n   * @since 0.6.1\n   */\n  s._masterVolume = 1;\n  Object.defineProperty(s, \"volume\", {\n    get: function () {\n      return this._masterVolume;\n    },\n    set: function (value) {\n      if (Number(value) == null) {\n        return false;\n      }\n      value = Math.max(0, Math.min(1, value));\n      s._masterVolume = value;\n      if (!this.activePlugin || !this.activePlugin.setVolume || !this.activePlugin.setVolume(value)) {\n        var instances = this._instances;\n        for (var i = 0, l = instances.length; i < l; i++) {\n          instances[i].setMasterVolume(value);\n        }\n      }\n    }\n  });\n\n  /**\n   * Mute/Unmute all audio. Note that muted audio still plays at 0 volume. This global mute value is maintained\n   * separately and when set will override, but not change the mute property of individual instances. To mute an individual\n   * instance, use AbstractSoundInstance {{#crossLink \"AbstractSoundInstance/muted:property\"}}{{/crossLink}} instead.\n   *\n   * <h4>Example</h4>\n   *\n   *     createjs.Sound.muted = true;\n   *\n   *\n   * @property muted\n   * @type {Boolean}\n   * @default false\n   * @since 0.6.1\n   */\n  s._masterMute = false;\n  // OJR references to the methods were not working, so the code had to be duplicated here\n  Object.defineProperty(s, \"muted\", {\n    get: function () {\n      return this._masterMute;\n    },\n    set: function (value) {\n      if (value == null) {\n        return false;\n      }\n      this._masterMute = value;\n      if (!this.activePlugin || !this.activePlugin.setMute || !this.activePlugin.setMute(value)) {\n        var instances = this._instances;\n        for (var i = 0, l = instances.length; i < l; i++) {\n          instances[i].setMasterMute(value);\n        }\n      }\n      return true;\n    }\n  });\n\n  /**\n   * Get the active plugins capabilities, which help determine if a plugin can be used in the current environment,\n   * or if the plugin supports a specific feature. Capabilities include:\n   * <ul>\n   *     <li><b>panning:</b> If the plugin can pan audio from left to right</li>\n   *     <li><b>volume;</b> If the plugin can control audio volume.</li>\n   *     <li><b>tracks:</b> The maximum number of audio tracks that can be played back at a time. This will be -1\n   *     if there is no known limit.</li>\n   * <br />An entry for each file type in {{#crossLink \"Sound/SUPPORTED_EXTENSIONS:property\"}}{{/crossLink}}:\n   *     <li><b>mp3:</b> If MP3 audio is supported.</li>\n   *     <li><b>ogg:</b> If OGG audio is supported.</li>\n   *     <li><b>wav:</b> If WAV audio is supported.</li>\n   *     <li><b>mpeg:</b> If MPEG audio is supported.</li>\n   *     <li><b>m4a:</b> If M4A audio is supported.</li>\n   *     <li><b>mp4:</b> If MP4 audio is supported.</li>\n   *     <li><b>aiff:</b> If aiff audio is supported.</li>\n   *     <li><b>wma:</b> If wma audio is supported.</li>\n   *     <li><b>mid:</b> If mid audio is supported.</li>\n   * </ul>\n   *\n   * You can get a specific capability of the active plugin using standard object notation\n   *\n   * <h4>Example</h4>\n   *\n   *      var mp3 = createjs.Sound.capabilities.mp3;\n   *\n   * Note this property is read only.\n   *\n   * @property capabilities\n   * @type {Object}\n   * @static\n   * @readOnly\n   * @since 0.6.1\n   */\n  Object.defineProperty(s, \"capabilities\", {\n    get: function () {\n      if (s.activePlugin == null) {\n        return null;\n      }\n      return s.activePlugin._capabilities;\n    },\n    set: function (value) {\n      return false;\n    }\n  });\n\n  // Class Private properties\n  /**\n   * Determines if the plugins have been registered. If false, the first call to play() will instantiate the default\n   * plugins ({{#crossLink \"WebAudioPlugin\"}}{{/crossLink}}, followed by {{#crossLink \"HTMLAudioPlugin\"}}{{/crossLink}}).\n   * If plugins have been registered, but none are applicable, then sound playback will fail.\n   * @property _pluginsRegistered\n   * @type {Boolean}\n   * @default false\n   * @static\n   * @protected\n   */\n  s._pluginsRegistered = false;\n\n  /**\n   * Used internally to assign unique IDs to each AbstractSoundInstance.\n   * @property _lastID\n   * @type {Number}\n   * @static\n   * @protected\n   */\n  s._lastID = 0;\n\n  /**\n   * An array containing all currently playing instances. This allows Sound to control the volume, mute, and playback of\n   * all instances when using static APIs like {{#crossLink \"Sound/stop\"}}{{/crossLink}} and {{#crossLink \"Sound/setVolume\"}}{{/crossLink}}.\n   * When an instance has finished playback, it gets removed via the {{#crossLink \"Sound/finishedPlaying\"}}{{/crossLink}}\n   * method. If the user replays an instance, it gets added back in via the {{#crossLink \"Sound/_beginPlaying\"}}{{/crossLink}}\n   * method.\n   * @property _instances\n   * @type {Array}\n   * @protected\n   * @static\n   */\n  s._instances = [];\n\n  /**\n   * An object hash storing objects with sound sources, startTime, and duration via there corresponding ID.\n   * @property _idHash\n   * @type {Object}\n   * @protected\n   * @static\n   */\n  s._idHash = {};\n\n  /**\n   * An object hash that stores preloading sound sources via the parsed source that is passed to the plugin.  Contains the\n   * source, id, and data that was passed in by the user.  Parsed sources can contain multiple instances of source, id,\n   * and data.\n   * @property _preloadHash\n   * @type {Object}\n   * @protected\n   * @static\n   */\n  s._preloadHash = {};\n\n  /**\n   * An object hash storing {{#crossLink \"PlayPropsConfig\"}}{{/crossLink}} via the parsed source that is passed as defaultPlayProps in\n   * {{#crossLink \"Sound/registerSound\"}}{{/crossLink}} and {{#crossLink \"Sound/registerSounds\"}}{{/crossLink}}.\n   * @property _defaultPlayPropsHash\n   * @type {Object}\n   * @protected\n   * @static\n   * @since 0.6.1\n   */\n  s._defaultPlayPropsHash = {};\n\n  // EventDispatcher methods:\n  s.addEventListener = null;\n  s.removeEventListener = null;\n  s.removeAllEventListeners = null;\n  s.dispatchEvent = null;\n  s.hasEventListener = null;\n  s._listeners = null;\n  createjs.EventDispatcher.initialize(s); // inject EventDispatcher methods.\n\n  // Events\n  /**\n   * This event is fired when a file finishes loading internally. This event is fired for each loaded sound,\n   * so any handler methods should look up the <code>event.src</code> to handle a particular sound.\n   * @event fileload\n   * @param {Object} target The object that dispatched the event.\n   * @param {String} type The event type.\n   * @param {String} src The source of the sound that was loaded.\n   * @param {String} [id] The id passed in when the sound was registered. If one was not provided, it will be null.\n   * @param {Number|Object} [data] Any additional data associated with the item. If not provided, it will be undefined.\n   * @since 0.4.1\n   */\n\n  /**\n   * This event is fired when a file fails loading internally. This event is fired for each loaded sound,\n   * so any handler methods should look up the <code>event.src</code> to handle a particular sound.\n   * @event fileerror\n   * @param {Object} target The object that dispatched the event.\n   * @param {String} type The event type.\n   * @param {String} src The source of the sound that was loaded.\n   * @param {String} [id] The id passed in when the sound was registered. If one was not provided, it will be null.\n   * @param {Number|Object} [data] Any additional data associated with the item. If not provided, it will be undefined.\n   * @since 0.6.0\n   */\n\n  // Class Public Methods\n  /**\n   * Get the preload rules to allow Sound to be used as a plugin by <a href=\"http://preloadjs.com\" target=\"_blank\">PreloadJS</a>.\n   * Any load calls that have the matching type or extension will fire the callback method, and use the resulting\n   * object, which is potentially modified by Sound. This helps when determining the correct path, as well as\n   * registering the audio instance(s) with Sound. This method should not be called, except by PreloadJS.\n   * @method getPreloadHandlers\n   * @return {Object} An object containing:\n   * <ul><li>callback: A preload callback that is fired when a file is added to PreloadJS, which provides\n   *      Sound a mechanism to modify the load parameters, select the correct file format, register the sound, etc.</li>\n   *      <li>types: A list of file types that are supported by Sound (currently supports \"sound\").</li>\n   *      <li>extensions: A list of file extensions that are supported by Sound (see {{#crossLink \"Sound/SUPPORTED_EXTENSIONS:property\"}}{{/crossLink}}).</li></ul>\n   * @static\n   * @protected\n   */\n  s.getPreloadHandlers = function () {\n    return {\n      callback: createjs.proxy(s.initLoad, s),\n      types: [\"sound\"],\n      extensions: s.SUPPORTED_EXTENSIONS\n    };\n  };\n\n  /**\n   * Used to dispatch fileload events from internal loading.\n   * @method _handleLoadComplete\n   * @param event A loader event.\n   * @protected\n   * @static\n   * @since 0.6.0\n   */\n  s._handleLoadComplete = function (event) {\n    var src = event.target.getItem().src;\n    if (!s._preloadHash[src]) {\n      return;\n    }\n    for (var i = 0, l = s._preloadHash[src].length; i < l; i++) {\n      var item = s._preloadHash[src][i];\n      s._preloadHash[src][i] = true;\n      if (!s.hasEventListener(\"fileload\")) {\n        continue;\n      }\n      var event = new createjs.Event(\"fileload\");\n      event.src = item.src;\n      event.id = item.id;\n      event.data = item.data;\n      event.sprite = item.sprite;\n      s.dispatchEvent(event);\n    }\n  };\n\n  /**\n   * Used to dispatch error events from internal preloading.\n   * @param event\n   * @protected\n   * @since 0.6.0\n   * @static\n   */\n  s._handleLoadError = function (event) {\n    var src = event.target.getItem().src;\n    if (!s._preloadHash[src]) {\n      return;\n    }\n    for (var i = 0, l = s._preloadHash[src].length; i < l; i++) {\n      var item = s._preloadHash[src][i];\n      s._preloadHash[src][i] = false;\n      if (!s.hasEventListener(\"fileerror\")) {\n        continue;\n      }\n      var event = new createjs.Event(\"fileerror\");\n      event.src = item.src;\n      event.id = item.id;\n      event.data = item.data;\n      event.sprite = item.sprite;\n      s.dispatchEvent(event);\n    }\n  };\n\n  /**\n   * Used by {{#crossLink \"Sound/registerPlugins\"}}{{/crossLink}} to register a Sound plugin.\n   *\n   * @method _registerPlugin\n   * @param {Object} plugin The plugin class to install.\n   * @return {Boolean} Whether the plugin was successfully initialized.\n   * @static\n   * @private\n   */\n  s._registerPlugin = function (plugin) {\n    // Note: Each plugin is passed in as a class reference, but we store the activePlugin as an instance\n    if (plugin.isSupported()) {\n      s.activePlugin = new plugin();\n      return true;\n    }\n    return false;\n  };\n\n  /**\n   * Register a list of Sound plugins, in order of precedence. To register a single plugin, pass a single element in the array.\n   *\n   * <h4>Example</h4>\n   *\n   *      createjs.FlashAudioPlugin.swfPath = \"../src/soundjs/flashaudio/\";\n   *      createjs.Sound.registerPlugins([createjs.WebAudioPlugin, createjs.HTMLAudioPlugin, createjs.FlashAudioPlugin]);\n   *\n   * @method registerPlugins\n   * @param {Array} plugins An array of plugins classes to install.\n   * @return {Boolean} Whether a plugin was successfully initialized.\n   * @static\n   */\n  s.registerPlugins = function (plugins) {\n    s._pluginsRegistered = true;\n    for (var i = 0, l = plugins.length; i < l; i++) {\n      if (s._registerPlugin(plugins[i])) {\n        return true;\n      }\n    }\n    return false;\n  };\n\n  /**\n   * Initialize the default plugins. This method is automatically called when any audio is played or registered before\n   * the user has manually registered plugins, and enables Sound to work without manual plugin setup. Currently, the\n   * default plugins are {{#crossLink \"WebAudioPlugin\"}}{{/crossLink}} followed by {{#crossLink \"HTMLAudioPlugin\"}}{{/crossLink}}.\n   *\n   * <h4>Example</h4>\n   *\n   * \tif (!createjs.initializeDefaultPlugins()) { return; }\n   *\n   * @method initializeDefaultPlugins\n   * @returns {Boolean} True if a plugin was initialized, false otherwise.\n   * @since 0.4.0\n   * @static\n   */\n  s.initializeDefaultPlugins = function () {\n    if (s.activePlugin != null) {\n      return true;\n    }\n    if (s._pluginsRegistered) {\n      return false;\n    }\n    if (s.registerPlugins([createjs.WebAudioPlugin, createjs.HTMLAudioPlugin])) {\n      return true;\n    }\n    return false;\n  };\n\n  /**\n   * Determines if Sound has been initialized, and a plugin has been activated.\n   *\n   * <h4>Example</h4>\n   * This example sets up a Flash fallback, but only if there is no plugin specified yet.\n   *\n   * \tif (!createjs.Sound.isReady()) {\n   *\t\tcreatejs.FlashAudioPlugin.swfPath = \"../src/soundjs/flashaudio/\";\n   * \t\tcreatejs.Sound.registerPlugins([createjs.WebAudioPlugin, createjs.HTMLAudioPlugin, createjs.FlashAudioPlugin]);\n   *\t}\n   *\n   * @method isReady\n   * @return {Boolean} If Sound has initialized a plugin.\n   * @static\n   */\n  s.isReady = function () {\n    return s.activePlugin != null;\n  };\n\n  /**\n   * Deprecated, please use {{#crossLink \"Sound/capabilities:property\"}}{{/crossLink}} instead.\n   *\n   * @method getCapabilities\n   * @return {Object} An object containing the capabilities of the active plugin.\n   * @static\n   * @deprecated\n   */\n  s.getCapabilities = function () {\n    if (s.activePlugin == null) {\n      return null;\n    }\n    return s.activePlugin._capabilities;\n  };\n\n  /**\n   * Deprecated, please use {{#crossLink \"Sound/capabilities:property\"}}{{/crossLink}} instead.\n   *\n   * @method getCapability\n   * @param {String} key The capability to retrieve\n   * @return {Number|Boolean} The value of the capability.\n   * @static\n   * @see getCapabilities\n   * @deprecated\n   */\n  s.getCapability = function (key) {\n    if (s.activePlugin == null) {\n      return null;\n    }\n    return s.activePlugin._capabilities[key];\n  };\n\n  /**\n   * Process manifest items from <a href=\"http://preloadjs.com\" target=\"_blank\">PreloadJS</a>. This method is intended\n   * for usage by a plugin, and not for direct interaction.\n   * @method initLoad\n   * @param {Object} src The object to load.\n   * @return {Object|AbstractLoader} An instance of AbstractLoader.\n   * @protected\n   * @static\n   */\n  s.initLoad = function (loadItem) {\n    return s._registerSound(loadItem);\n  };\n\n  /**\n   * Internal method for loading sounds.  This should not be called directly.\n   *\n   * @method _registerSound\n   * @param {Object} src The object to load, containing src property and optionally containing id and data.\n   * @return {Object} An object with the modified values that were passed in, which defines the sound.\n   * Returns false if the source cannot be parsed or no plugins can be initialized.\n   * Returns true if the source is already loaded.\n   * @static\n   * @private\n   * @since 0.6.0\n   */\n\n  s._registerSound = function (loadItem) {\n    if (!s.initializeDefaultPlugins()) {\n      return false;\n    }\n    var details;\n    if (loadItem.src instanceof Object) {\n      details = s._parseSrc(loadItem.src);\n      details.src = loadItem.path + details.src;\n    } else {\n      details = s._parsePath(loadItem.src);\n    }\n    if (details == null) {\n      return false;\n    }\n    loadItem.src = details.src;\n    loadItem.type = \"sound\";\n    var data = loadItem.data;\n    var numChannels = null;\n    if (data != null) {\n      if (!isNaN(data.channels)) {\n        numChannels = parseInt(data.channels);\n      } else if (!isNaN(data)) {\n        numChannels = parseInt(data);\n      }\n      if (data.audioSprite) {\n        var sp;\n        for (var i = data.audioSprite.length; i--;) {\n          sp = data.audioSprite[i];\n          s._idHash[sp.id] = {\n            src: loadItem.src,\n            startTime: parseInt(sp.startTime),\n            duration: parseInt(sp.duration)\n          };\n          if (sp.defaultPlayProps) {\n            s._defaultPlayPropsHash[sp.id] = createjs.PlayPropsConfig.create(sp.defaultPlayProps);\n          }\n        }\n      }\n    }\n    if (loadItem.id != null) {\n      s._idHash[loadItem.id] = {\n        src: loadItem.src\n      };\n    }\n    ;\n    var loader = s.activePlugin.register(loadItem);\n    SoundChannel.create(loadItem.src, numChannels);\n\n    // return the number of instances to the user.  This will also be returned in the load event.\n    if (data == null || !isNaN(data)) {\n      loadItem.data = numChannels || SoundChannel.maxPerChannel();\n    } else {\n      loadItem.data.channels = numChannels || SoundChannel.maxPerChannel();\n    }\n    if (loader.type) {\n      loadItem.type = loader.type;\n    }\n    if (loadItem.defaultPlayProps) {\n      s._defaultPlayPropsHash[loadItem.src] = createjs.PlayPropsConfig.create(loadItem.defaultPlayProps);\n    }\n    return loader;\n  };\n\n  /**\n   * Register an audio file for loading and future playback in Sound. This is automatically called when using\n   * <a href=\"http://preloadjs.com\" target=\"_blank\">PreloadJS</a>.  It is recommended to register all sounds that\n   * need to be played back in order to properly prepare and preload them. Sound does internal preloading when required.\n   *\n   * <h4>Example</h4>\n   *\n   *      createjs.Sound.alternateExtensions = [\"mp3\"];\n   *      createjs.Sound.on(\"fileload\", handleLoad); // add an event listener for when load is completed\n   *      createjs.Sound.registerSound(\"myAudioPath/mySound.ogg\", \"myID\", 3);\n   *      createjs.Sound.registerSound({ogg:\"path1/mySound.ogg\", mp3:\"path2/mySoundNoExtension\"}, \"myID\", 3);\n   *\n   *\n   * @method registerSound\n   * @param {String | Object} src The source or an Object with a \"src\" property or an Object with multiple extension labeled src properties.\n   * @param {String} [id] An id specified by the user to play the sound later.  Note id is required for when src is multiple extension labeled src properties.\n   * @param {Number | Object} [data] Data associated with the item. Sound uses the data parameter as the number of\n   * channels for an audio instance, however a \"channels\" property can be appended to the data object if it is used\n   * for other information. The audio channels will set a default based on plugin if no value is found.\n   * Sound also uses the data property to hold an {{#crossLink \"AudioSprite\"}}{{/crossLink}} array of objects in the following format {id, startTime, duration}.<br/>\n   *   id used to play the sound later, in the same manner as a sound src with an id.<br/>\n   *   startTime is the initial offset to start playback and loop from, in milliseconds.<br/>\n   *   duration is the amount of time to play the clip for, in milliseconds.<br/>\n   * This allows Sound to support audio sprites that are played back by id.\n   * @param {string} basePath Set a path that will be prepended to src for loading.\n   * @param {Object | PlayPropsConfig} defaultPlayProps Optional Playback properties that will be set as the defaults on any new AbstractSoundInstance.\n   * See {{#crossLink \"PlayPropsConfig\"}}{{/crossLink}} for options.\n   * @return {Object} An object with the modified values that were passed in, which defines the sound.\n   * Returns false if the source cannot be parsed or no plugins can be initialized.\n   * Returns true if the source is already loaded.\n   * @static\n   * @since 0.4.0\n   */\n  s.registerSound = function (src, id, data, basePath, defaultPlayProps) {\n    var loadItem = {\n      src: src,\n      id: id,\n      data: data,\n      defaultPlayProps: defaultPlayProps\n    };\n    if (src instanceof Object && src.src) {\n      basePath = id;\n      loadItem = src;\n    }\n    loadItem = createjs.LoadItem.create(loadItem);\n    loadItem.path = basePath;\n    if (basePath != null && !(loadItem.src instanceof Object)) {\n      loadItem.src = basePath + src;\n    }\n    var loader = s._registerSound(loadItem);\n    if (!loader) {\n      return false;\n    }\n    if (!s._preloadHash[loadItem.src]) {\n      s._preloadHash[loadItem.src] = [];\n    }\n    s._preloadHash[loadItem.src].push(loadItem);\n    if (s._preloadHash[loadItem.src].length == 1) {\n      // OJR note this will disallow reloading a sound if loading fails or the source changes\n      loader.on(\"complete\", createjs.proxy(this._handleLoadComplete, this));\n      loader.on(\"error\", createjs.proxy(this._handleLoadError, this));\n      s.activePlugin.preload(loader);\n    } else {\n      if (s._preloadHash[loadItem.src][0] == true) {\n        return true;\n      }\n    }\n    return loadItem;\n  };\n\n  /**\n   * Register an array of audio files for loading and future playback in Sound. It is recommended to register all\n   * sounds that need to be played back in order to properly prepare and preload them. Sound does internal preloading\n   * when required.\n   *\n   * <h4>Example</h4>\n   *\n   * \t\tvar assetPath = \"./myAudioPath/\";\n   *      var sounds = [\n   *          {src:\"asset0.ogg\", id:\"example\"},\n   *          {src:\"asset1.ogg\", id:\"1\", data:6},\n   *          {src:\"asset2.mp3\", id:\"works\"}\n   *          {src:{mp3:\"path1/asset3.mp3\", ogg:\"path2/asset3NoExtension}, id:\"better\"}\n   *      ];\n   *      createjs.Sound.alternateExtensions = [\"mp3\"];\t// if the passed extension is not supported, try this extension\n   *      createjs.Sound.on(\"fileload\", handleLoad); // call handleLoad when each sound loads\n   *      createjs.Sound.registerSounds(sounds, assetPath);\n   *\n   * @method registerSounds\n   * @param {Array} sounds An array of objects to load. Objects are expected to be in the format needed for\n   * {{#crossLink \"Sound/registerSound\"}}{{/crossLink}}: <code>{src:srcURI, id:ID, data:Data}</code>\n   * with \"id\" and \"data\" being optional.\n   * You can also pass an object with path and manifest properties, where path is a basePath and manifest is an array of objects to load.\n   * Note id is required if src is an object with extension labeled src properties.\n   * @param {string} basePath Set a path that will be prepended to each src when loading.  When creating, playing, or removing\n   * audio that was loaded with a basePath by src, the basePath must be included.\n   * @return {Object} An array of objects with the modified values that were passed in, which defines each sound.\n   * Like registerSound, it will return false for any values when the source cannot be parsed or if no plugins can be initialized.\n   * Also, it will return true for any values when the source is already loaded.\n   * @static\n   * @since 0.6.0\n   */\n  s.registerSounds = function (sounds, basePath) {\n    var returnValues = [];\n    if (sounds.path) {\n      if (!basePath) {\n        basePath = sounds.path;\n      } else {\n        basePath = basePath + sounds.path;\n      }\n      sounds = sounds.manifest;\n      // TODO document this feature\n    }\n\n    for (var i = 0, l = sounds.length; i < l; i++) {\n      returnValues[i] = createjs.Sound.registerSound(sounds[i].src, sounds[i].id, sounds[i].data, basePath, sounds[i].defaultPlayProps);\n    }\n    return returnValues;\n  };\n\n  /**\n   * Remove a sound that has been registered with {{#crossLink \"Sound/registerSound\"}}{{/crossLink}} or\n   * {{#crossLink \"Sound/registerSounds\"}}{{/crossLink}}.\n   * <br />Note this will stop playback on active instances playing this sound before deleting them.\n   * <br />Note if you passed in a basePath, you need to pass it or prepend it to the src here.\n   *\n   * <h4>Example</h4>\n   *\n   *      createjs.Sound.removeSound(\"myID\");\n   *      createjs.Sound.removeSound(\"myAudioBasePath/mySound.ogg\");\n   *      createjs.Sound.removeSound(\"myPath/myOtherSound.mp3\", \"myBasePath/\");\n   *      createjs.Sound.removeSound({mp3:\"musicNoExtension\", ogg:\"music.ogg\"}, \"myBasePath/\");\n   *\n   * @method removeSound\n   * @param {String | Object} src The src or ID of the audio, or an Object with a \"src\" property, or an Object with multiple extension labeled src properties.\n   * @param {string} basePath Set a path that will be prepended to each src when removing.\n   * @return {Boolean} True if sound is successfully removed.\n   * @static\n   * @since 0.4.1\n   */\n  s.removeSound = function (src, basePath) {\n    if (s.activePlugin == null) {\n      return false;\n    }\n    if (src instanceof Object && src.src) {\n      src = src.src;\n    }\n    var details;\n    if (src instanceof Object) {\n      details = s._parseSrc(src);\n    } else {\n      src = s._getSrcById(src).src;\n      details = s._parsePath(src);\n    }\n    if (details == null) {\n      return false;\n    }\n    src = details.src;\n    if (basePath != null) {\n      src = basePath + src;\n    }\n    for (var prop in s._idHash) {\n      if (s._idHash[prop].src == src) {\n        delete s._idHash[prop];\n      }\n    }\n\n    // clear from SoundChannel, which also stops and deletes all instances\n    SoundChannel.removeSrc(src);\n    delete s._preloadHash[src];\n    s.activePlugin.removeSound(src);\n    return true;\n  };\n\n  /**\n   * Remove an array of audio files that have been registered with {{#crossLink \"Sound/registerSound\"}}{{/crossLink}} or\n   * {{#crossLink \"Sound/registerSounds\"}}{{/crossLink}}.\n   * <br />Note this will stop playback on active instances playing this audio before deleting them.\n   * <br />Note if you passed in a basePath, you need to pass it or prepend it to the src here.\n   *\n   * <h4>Example</h4>\n   *\n   * \t\tassetPath = \"./myPath/\";\n   *      var sounds = [\n   *          {src:\"asset0.ogg\", id:\"example\"},\n   *          {src:\"asset1.ogg\", id:\"1\", data:6},\n   *          {src:\"asset2.mp3\", id:\"works\"}\n   *      ];\n   *      createjs.Sound.removeSounds(sounds, assetPath);\n   *\n   * @method removeSounds\n   * @param {Array} sounds An array of objects to remove. Objects are expected to be in the format needed for\n   * {{#crossLink \"Sound/removeSound\"}}{{/crossLink}}: <code>{srcOrID:srcURIorID}</code>.\n   * You can also pass an object with path and manifest properties, where path is a basePath and manifest is an array of objects to remove.\n   * @param {string} basePath Set a path that will be prepended to each src when removing.\n   * @return {Object} An array of Boolean values representing if the sounds with the same array index were\n   * successfully removed.\n   * @static\n   * @since 0.4.1\n   */\n  s.removeSounds = function (sounds, basePath) {\n    var returnValues = [];\n    if (sounds.path) {\n      if (!basePath) {\n        basePath = sounds.path;\n      } else {\n        basePath = basePath + sounds.path;\n      }\n      sounds = sounds.manifest;\n    }\n    for (var i = 0, l = sounds.length; i < l; i++) {\n      returnValues[i] = createjs.Sound.removeSound(sounds[i].src, basePath);\n    }\n    return returnValues;\n  };\n\n  /**\n   * Remove all sounds that have been registered with {{#crossLink \"Sound/registerSound\"}}{{/crossLink}} or\n   * {{#crossLink \"Sound/registerSounds\"}}{{/crossLink}}.\n   * <br />Note this will stop playback on all active sound instances before deleting them.\n   *\n   * <h4>Example</h4>\n   *\n   *     createjs.Sound.removeAllSounds();\n   *\n   * @method removeAllSounds\n   * @static\n   * @since 0.4.1\n   */\n  s.removeAllSounds = function () {\n    s._idHash = {};\n    s._preloadHash = {};\n    SoundChannel.removeAll();\n    if (s.activePlugin) {\n      s.activePlugin.removeAllSounds();\n    }\n  };\n\n  /**\n   * Check if a source has been loaded by internal preloaders. This is necessary to ensure that sounds that are\n   * not completed preloading will not kick off a new internal preload if they are played.\n   *\n   * <h4>Example</h4>\n   *\n   *     var mySound = \"assetPath/asset0.ogg\";\n   *     if(createjs.Sound.loadComplete(mySound) {\n   *         createjs.Sound.play(mySound);\n   *     }\n   *\n   * @method loadComplete\n   * @param {String} src The src or id that is being loaded.\n   * @return {Boolean} If the src is already loaded.\n   * @since 0.4.0\n   * @static\n   */\n  s.loadComplete = function (src) {\n    if (!s.isReady()) {\n      return false;\n    }\n    var details = s._parsePath(src);\n    if (details) {\n      src = s._getSrcById(details.src).src;\n    } else {\n      src = s._getSrcById(src).src;\n    }\n    if (s._preloadHash[src] == undefined) {\n      return false;\n    }\n    return s._preloadHash[src][0] == true; // src only loads once, so if it's true for the first it's true for all\n  };\n\n  /**\n   * Parse the path of a sound. Alternate extensions will be attempted in order if the\n   * current extension is not supported\n   * @method _parsePath\n   * @param {String} value The path to an audio source.\n   * @return {Object} A formatted object that can be registered with the {{#crossLink \"Sound/activePlugin:property\"}}{{/crossLink}}\n   * and returned to a preloader like <a href=\"http://preloadjs.com\" target=\"_blank\">PreloadJS</a>.\n   * @protected\n   * @static\n   */\n  s._parsePath = function (value) {\n    if (typeof value != \"string\") {\n      value = value.toString();\n    }\n    var match = value.match(s.FILE_PATTERN);\n    if (match == null) {\n      return false;\n    }\n    var name = match[4];\n    var ext = match[5];\n    var c = s.capabilities;\n    var i = 0;\n    while (!c[ext]) {\n      ext = s.alternateExtensions[i++];\n      if (i > s.alternateExtensions.length) {\n        return null;\n      } // no extensions are supported\n    }\n\n    value = value.replace(\".\" + match[5], \".\" + ext);\n    var ret = {\n      name: name,\n      src: value,\n      extension: ext\n    };\n    return ret;\n  };\n\n  /**\n   * Parse the path of a sound based on properties of src matching with supported extensions.\n   * Returns false if none of the properties are supported\n   * @method _parseSrc\n   * @param {Object} value The paths to an audio source, indexed by extension type.\n   * @return {Object} A formatted object that can be registered with the {{#crossLink \"Sound/activePlugin:property\"}}{{/crossLink}}\n   * and returned to a preloader like <a href=\"http://preloadjs.com\" target=\"_blank\">PreloadJS</a>.\n   * @protected\n   * @static\n   */\n  s._parseSrc = function (value) {\n    var ret = {\n      name: undefined,\n      src: undefined,\n      extension: undefined\n    };\n    var c = s.capabilities;\n    for (var prop in value) {\n      if (value.hasOwnProperty(prop) && c[prop]) {\n        ret.src = value[prop];\n        ret.extension = prop;\n        break;\n      }\n    }\n    if (!ret.src) {\n      return false;\n    } // no matches\n\n    var i = ret.src.lastIndexOf(\"/\");\n    if (i != -1) {\n      ret.name = ret.src.slice(i + 1);\n    } else {\n      ret.name = ret.src;\n    }\n    return ret;\n  };\n\n  /* ---------------\n   Static API.\n   --------------- */\n  /**\n   * Play a sound and get a {{#crossLink \"AbstractSoundInstance\"}}{{/crossLink}} to control. If the sound fails to play, a\n   * AbstractSoundInstance will still be returned, and have a playState of {{#crossLink \"Sound/PLAY_FAILED:property\"}}{{/crossLink}}.\n   * Note that even on sounds with failed playback, you may still be able to call AbstractSoundInstance {{#crossLink \"AbstractSoundInstance/play\"}}{{/crossLink}},\n   * since the failure could be due to lack of available channels. If the src does not have a supported extension or\n   * if there is no available plugin, a default AbstractSoundInstance will be returned which will not play any audio, but will not generate errors.\n   *\n   * <h4>Example</h4>\n   *\n   *      createjs.Sound.on(\"fileload\", handleLoad);\n   *      createjs.Sound.registerSound(\"myAudioPath/mySound.mp3\", \"myID\", 3);\n   *      function handleLoad(event) {\n   *      \tcreatejs.Sound.play(\"myID\");\n   *      \t// store off AbstractSoundInstance for controlling\n   *      \tvar myInstance = createjs.Sound.play(\"myID\", {interrupt: createjs.Sound.INTERRUPT_ANY, loop:-1});\n   *      }\n   *\n   * NOTE to create an audio sprite that has not already been registered, both startTime and duration need to be set.\n   * This is only when creating a new audio sprite, not when playing using the id of an already registered audio sprite.\n   *\n   * <b>Parameters Deprecated</b><br />\n   * The parameters for this method are deprecated in favor of a single parameter that is an Object or {{#crossLink \"PlayPropsConfig\"}}{{/crossLink}}.\n   *\n   * @method play\n   * @param {String} src The src or ID of the audio.\n   * @param {String | Object} [interrupt=\"none\"|options] <b>This parameter will be renamed playProps in the next release.</b><br />\n   * This parameter can be an instance of {{#crossLink \"PlayPropsConfig\"}}{{/crossLink}} or an Object that contains any or all optional properties by name,\n   * including: interrupt, delay, offset, loop, volume, pan, startTime, and duration (see the above code sample).\n   * <br /><strong>OR</strong><br />\n   * <b>Deprecated</b> How to interrupt any currently playing instances of audio with the same source,\n   * if the maximum number of instances of the sound are already playing. Values are defined as <code>INTERRUPT_TYPE</code>\n   * constants on the Sound class, with the default defined by {{#crossLink \"Sound/defaultInterruptBehavior:property\"}}{{/crossLink}}.\n   * @param {Number} [delay=0] <b>Deprecated</b> The amount of time to delay the start of audio playback, in milliseconds.\n   * @param {Number} [offset=0] <b>Deprecated</b> The offset from the start of the audio to begin playback, in milliseconds.\n   * @param {Number} [loop=0] <b>Deprecated</b> How many times the audio loops when it reaches the end of playback. The default is 0 (no\n   * loops), and -1 can be used for infinite playback.\n   * @param {Number} [volume=1] <b>Deprecated</b> The volume of the sound, between 0 and 1. Note that the master volume is applied\n   * against the individual volume.\n   * @param {Number} [pan=0] <b>Deprecated</b> The left-right pan of the sound (if supported), between -1 (left) and 1 (right).\n   * @param {Number} [startTime=null] <b>Deprecated</b> To create an audio sprite (with duration), the initial offset to start playback and loop from, in milliseconds.\n   * @param {Number} [duration=null] <b>Deprecated</b> To create an audio sprite (with startTime), the amount of time to play the clip for, in milliseconds.\n   * @return {AbstractSoundInstance} A {{#crossLink \"AbstractSoundInstance\"}}{{/crossLink}} that can be controlled after it is created.\n   * @static\n   */\n  s.play = function (src, interrupt, delay, offset, loop, volume, pan, startTime, duration) {\n    var playProps;\n    if (interrupt instanceof Object || interrupt instanceof createjs.PlayPropsConfig) {\n      playProps = createjs.PlayPropsConfig.create(interrupt);\n    } else {\n      playProps = createjs.PlayPropsConfig.create({\n        interrupt: interrupt,\n        delay: delay,\n        offset: offset,\n        loop: loop,\n        volume: volume,\n        pan: pan,\n        startTime: startTime,\n        duration: duration\n      });\n    }\n    var instance = s.createInstance(src, playProps.startTime, playProps.duration);\n    var ok = s._playInstance(instance, playProps);\n    if (!ok) {\n      instance._playFailed();\n    }\n    return instance;\n  };\n\n  /**\n   * Creates a {{#crossLink \"AbstractSoundInstance\"}}{{/crossLink}} using the passed in src. If the src does not have a\n   * supported extension or if there is no available plugin, a default AbstractSoundInstance will be returned that can be\n   * called safely but does nothing.\n   *\n   * <h4>Example</h4>\n   *\n   *      var myInstance = null;\n   *      createjs.Sound.on(\"fileload\", handleLoad);\n   *      createjs.Sound.registerSound(\"myAudioPath/mySound.mp3\", \"myID\", 3);\n   *      function handleLoad(event) {\n   *      \tmyInstance = createjs.Sound.createInstance(\"myID\");\n   *      \t// alternately we could call the following\n   *      \tmyInstance = createjs.Sound.createInstance(\"myAudioPath/mySound.mp3\");\n   *      }\n   *\n   * NOTE to create an audio sprite that has not already been registered, both startTime and duration need to be set.\n   * This is only when creating a new audio sprite, not when playing using the id of an already registered audio sprite.\n   *\n   * @method createInstance\n   * @param {String} src The src or ID of the audio.\n   * @param {Number} [startTime=null] To create an audio sprite (with duration), the initial offset to start playback and loop from, in milliseconds.\n   * @param {Number} [duration=null] To create an audio sprite (with startTime), the amount of time to play the clip for, in milliseconds.\n   * @return {AbstractSoundInstance} A {{#crossLink \"AbstractSoundInstance\"}}{{/crossLink}} that can be controlled after it is created.\n   * Unsupported extensions will return the default AbstractSoundInstance.\n   * @since 0.4.0\n   * @static\n   */\n  s.createInstance = function (src, startTime, duration) {\n    if (!s.initializeDefaultPlugins()) {\n      return new createjs.DefaultSoundInstance(src, startTime, duration);\n    }\n    var defaultPlayProps = s._defaultPlayPropsHash[src]; // for audio sprites, which create and store defaults by id\n    src = s._getSrcById(src);\n    var details = s._parsePath(src.src);\n    var instance = null;\n    if (details != null && details.src != null) {\n      SoundChannel.create(details.src);\n      if (startTime == null) {\n        startTime = src.startTime;\n      }\n      instance = s.activePlugin.create(details.src, startTime, duration || src.duration);\n      defaultPlayProps = defaultPlayProps || s._defaultPlayPropsHash[details.src];\n      if (defaultPlayProps) {\n        instance.applyPlayProps(defaultPlayProps);\n      }\n    } else {\n      instance = new createjs.DefaultSoundInstance(src, startTime, duration);\n    }\n    instance.uniqueId = s._lastID++;\n    return instance;\n  };\n\n  /**\n   * Stop all audio (global stop). Stopped audio is reset, and not paused. To play audio that has been stopped,\n   * call AbstractSoundInstance {{#crossLink \"AbstractSoundInstance/play\"}}{{/crossLink}}.\n   *\n   * <h4>Example</h4>\n   *\n   *     createjs.Sound.stop();\n   *\n   * @method stop\n   * @static\n   */\n  s.stop = function () {\n    var instances = this._instances;\n    for (var i = instances.length; i--;) {\n      instances[i].stop(); // NOTE stop removes instance from this._instances\n    }\n  };\n\n  /**\n   * Deprecated, please use {{#crossLink \"Sound/volume:property\"}}{{/crossLink}} instead.\n   *\n   * @method setVolume\n   * @param {Number} value The master volume value. The acceptable range is 0-1.\n   * @static\n   * @deprecated\n   */\n  s.setVolume = function (value) {\n    if (Number(value) == null) {\n      return false;\n    }\n    value = Math.max(0, Math.min(1, value));\n    s._masterVolume = value;\n    if (!this.activePlugin || !this.activePlugin.setVolume || !this.activePlugin.setVolume(value)) {\n      var instances = this._instances;\n      for (var i = 0, l = instances.length; i < l; i++) {\n        instances[i].setMasterVolume(value);\n      }\n    }\n  };\n\n  /**\n   * Deprecated, please use {{#crossLink \"Sound/volume:property\"}}{{/crossLink}} instead.\n   *\n   * @method getVolume\n   * @return {Number} The master volume, in a range of 0-1.\n   * @static\n   * @deprecated\n   */\n  s.getVolume = function () {\n    return this._masterVolume;\n  };\n\n  /**\n   * Deprecated, please use {{#crossLink \"Sound/muted:property\"}}{{/crossLink}} instead.\n   *\n   * @method setMute\n   * @param {Boolean} value Whether the audio should be muted or not.\n   * @return {Boolean} If the mute was set.\n   * @static\n   * @since 0.4.0\n   * @deprecated\n   */\n  s.setMute = function (value) {\n    if (value == null) {\n      return false;\n    }\n    this._masterMute = value;\n    if (!this.activePlugin || !this.activePlugin.setMute || !this.activePlugin.setMute(value)) {\n      var instances = this._instances;\n      for (var i = 0, l = instances.length; i < l; i++) {\n        instances[i].setMasterMute(value);\n      }\n    }\n    return true;\n  };\n\n  /**\n   * Deprecated, please use {{#crossLink \"Sound/muted:property\"}}{{/crossLink}} instead.\n   *\n   * @method getMute\n   * @return {Boolean} The mute value of Sound.\n   * @static\n   * @since 0.4.0\n   * @deprecated\n   */\n  s.getMute = function () {\n    return this._masterMute;\n  };\n\n  /**\n   * Set the default playback properties for all new SoundInstances of the passed in src or ID.\n   * See {{#crossLink \"PlayPropsConfig\"}}{{/crossLink}} for available properties.\n   *\n   * @method setDefaultPlayProps\n   * @param {String} src The src or ID used to register the audio.\n   * @param {Object | PlayPropsConfig} playProps The playback properties you would like to set.\n   * @since 0.6.1\n   */\n  s.setDefaultPlayProps = function (src, playProps) {\n    src = s._getSrcById(src);\n    s._defaultPlayPropsHash[s._parsePath(src.src).src] = createjs.PlayPropsConfig.create(playProps);\n  };\n\n  /**\n   * Get the default playback properties for the passed in src or ID.  These properties are applied to all\n   * new SoundInstances.  Returns null if default does not exist.\n   *\n   * @method getDefaultPlayProps\n   * @param {String} src The src or ID used to register the audio.\n   * @returns {PlayPropsConfig} returns an existing PlayPropsConfig or null if one does not exist\n   * @since 0.6.1\n   */\n  s.getDefaultPlayProps = function (src) {\n    src = s._getSrcById(src);\n    return s._defaultPlayPropsHash[s._parsePath(src.src).src];\n  };\n\n  /* ---------------\n   Internal methods\n   --------------- */\n  /**\n   * Play an instance. This is called by the static API, as well as from plugins. This allows the core class to\n   * control delays.\n   * @method _playInstance\n   * @param {AbstractSoundInstance} instance The {{#crossLink \"AbstractSoundInstance\"}}{{/crossLink}} to start playing.\n   * @param {PlayPropsConfig} playProps A PlayPropsConfig object.\n   * @return {Boolean} If the sound can start playing. Sounds that fail immediately will return false. Sounds that\n   * have a delay will return true, but may still fail to play.\n   * @protected\n   * @static\n   */\n  s._playInstance = function (instance, playProps) {\n    var defaultPlayProps = s._defaultPlayPropsHash[instance.src] || {};\n    if (playProps.interrupt == null) {\n      playProps.interrupt = defaultPlayProps.interrupt || s.defaultInterruptBehavior;\n    }\n    ;\n    if (playProps.delay == null) {\n      playProps.delay = defaultPlayProps.delay || 0;\n    }\n    if (playProps.offset == null) {\n      playProps.offset = instance.getPosition();\n    }\n    if (playProps.loop == null) {\n      playProps.loop = instance.loop;\n    }\n    if (playProps.volume == null) {\n      playProps.volume = instance.volume;\n    }\n    if (playProps.pan == null) {\n      playProps.pan = instance.pan;\n    }\n    if (playProps.delay == 0) {\n      var ok = s._beginPlaying(instance, playProps);\n      if (!ok) {\n        return false;\n      }\n    } else {\n      //Note that we can't pass arguments to proxy OR setTimeout (IE only), so just wrap the function call.\n      // OJR WebAudio may want to handle this differently, so it might make sense to move this functionality into the plugins in the future\n      var delayTimeoutId = setTimeout(function () {\n        s._beginPlaying(instance, playProps);\n      }, playProps.delay);\n      instance.delayTimeoutId = delayTimeoutId;\n    }\n    this._instances.push(instance);\n    return true;\n  };\n\n  /**\n   * Begin playback. This is called immediately or after delay by {{#crossLink \"Sound/playInstance\"}}{{/crossLink}}.\n   * @method _beginPlaying\n   * @param {AbstractSoundInstance} instance A {{#crossLink \"AbstractSoundInstance\"}}{{/crossLink}} to begin playback.\n   * @param {PlayPropsConfig} playProps A PlayPropsConfig object.\n   * @return {Boolean} If the sound can start playing. If there are no available channels, or the instance fails to\n   * start, this will return false.\n   * @protected\n   * @static\n   */\n  s._beginPlaying = function (instance, playProps) {\n    if (!SoundChannel.add(instance, playProps.interrupt)) {\n      return false;\n    }\n    var result = instance._beginPlaying(playProps);\n    if (!result) {\n      var index = createjs.indexOf(this._instances, instance);\n      if (index > -1) {\n        this._instances.splice(index, 1);\n      }\n      return false;\n    }\n    return true;\n  };\n\n  /**\n   * Get the source of a sound via the ID passed in with a register call. If no ID is found the value is returned\n   * instead.\n   * @method _getSrcById\n   * @param {String} value The ID the sound was registered with.\n   * @return {String} The source of the sound if it has been registered with this ID or the value that was passed in.\n   * @protected\n   * @static\n   */\n  s._getSrcById = function (value) {\n    return s._idHash[value] || {\n      src: value\n    };\n  };\n\n  /**\n   * A sound has completed playback, been interrupted, failed, or been stopped. This method removes the instance from\n   * Sound management. It will be added again, if the sound re-plays. Note that this method is called from the\n   * instances themselves.\n   * @method _playFinished\n   * @param {AbstractSoundInstance} instance The instance that finished playback.\n   * @protected\n   * @static\n   */\n  s._playFinished = function (instance) {\n    SoundChannel.remove(instance);\n    var index = createjs.indexOf(this._instances, instance);\n    if (index > -1) {\n      this._instances.splice(index, 1);\n    } // OJR this will always be > -1, there is no way for an instance to exist without being added to this._instances\n  };\n\n  createjs.Sound = Sound;\n\n  /**\n   * An internal class that manages the number of active {{#crossLink \"AbstractSoundInstance\"}}{{/crossLink}} instances for\n   * each sound type. This method is only used internally by the {{#crossLink \"Sound\"}}{{/crossLink}} class.\n   *\n   * The number of sounds is artificially limited by Sound in order to prevent over-saturation of a\n   * single sound, as well as to stay within hardware limitations, although the latter may disappear with better\n   * browser support.\n   *\n   * When a sound is played, this class ensures that there is an available instance, or interrupts an appropriate\n   * sound that is already playing.\n   * #class SoundChannel\n   * @param {String} src The source of the instances\n   * @param {Number} [max=1] The number of instances allowed\n   * @constructor\n   * @protected\n   */\n  function SoundChannel(src, max) {\n    this.init(src, max);\n  }\n\n  /* ------------\n   Static API\n   ------------ */\n  /**\n   * A hash of channel instances indexed by source.\n   * #property channels\n   * @type {Object}\n   * @static\n   */\n  SoundChannel.channels = {};\n\n  /**\n   * Create a sound channel. Note that if the sound channel already exists, this will fail.\n   * #method create\n   * @param {String} src The source for the channel\n   * @param {Number} max The maximum amount this channel holds. The default is {{#crossLink \"SoundChannel.maxDefault\"}}{{/crossLink}}.\n   * @return {Boolean} If the channels were created.\n   * @static\n   */\n  SoundChannel.create = function (src, max) {\n    var channel = SoundChannel.get(src);\n    if (channel == null) {\n      SoundChannel.channels[src] = new SoundChannel(src, max);\n      return true;\n    }\n    return false;\n  };\n  /**\n   * Delete a sound channel, stop and delete all related instances. Note that if the sound channel does not exist, this will fail.\n   * #method remove\n   * @param {String} src The source for the channel\n   * @return {Boolean} If the channels were deleted.\n   * @static\n   */\n  SoundChannel.removeSrc = function (src) {\n    var channel = SoundChannel.get(src);\n    if (channel == null) {\n      return false;\n    }\n    channel._removeAll(); // this stops and removes all active instances\n    delete SoundChannel.channels[src];\n    return true;\n  };\n  /**\n   * Delete all sound channels, stop and delete all related instances.\n   * #method removeAll\n   * @static\n   */\n  SoundChannel.removeAll = function () {\n    for (var channel in SoundChannel.channels) {\n      SoundChannel.channels[channel]._removeAll(); // this stops and removes all active instances\n    }\n\n    SoundChannel.channels = {};\n  };\n  /**\n   * Add an instance to a sound channel.\n   * #method add\n   * @param {AbstractSoundInstance} instance The instance to add to the channel\n   * @param {String} interrupt The interrupt value to use. Please see the {{#crossLink \"Sound/play\"}}{{/crossLink}}\n   * for details on interrupt modes.\n   * @return {Boolean} The success of the method call. If the channel is full, it will return false.\n   * @static\n   */\n  SoundChannel.add = function (instance, interrupt) {\n    var channel = SoundChannel.get(instance.src);\n    if (channel == null) {\n      return false;\n    }\n    return channel._add(instance, interrupt);\n  };\n  /**\n   * Remove an instance from the channel.\n   * #method remove\n   * @param {AbstractSoundInstance} instance The instance to remove from the channel\n   * @return The success of the method call. If there is no channel, it will return false.\n   * @static\n   */\n  SoundChannel.remove = function (instance) {\n    var channel = SoundChannel.get(instance.src);\n    if (channel == null) {\n      return false;\n    }\n    channel._remove(instance);\n    return true;\n  };\n  /**\n   * Get the maximum number of sounds you can have in a channel.\n   * #method maxPerChannel\n   * @return {Number} The maximum number of sounds you can have in a channel.\n   */\n  SoundChannel.maxPerChannel = function () {\n    return p.maxDefault;\n  };\n  /**\n   * Get a channel instance by its src.\n   * #method get\n   * @param {String} src The src to use to look up the channel\n   * @static\n   */\n  SoundChannel.get = function (src) {\n    return SoundChannel.channels[src];\n  };\n  var p = SoundChannel.prototype;\n  p.constructor = SoundChannel;\n\n  /**\n   * <strong>REMOVED</strong>. Removed in favor of using `MySuperClass_constructor`.\n   * See {{#crossLink \"Utility Methods/extend\"}}{{/crossLink}} and {{#crossLink \"Utility Methods/promote\"}}{{/crossLink}}\n   * for details.\n   *\n   * There is an inheritance tutorial distributed with EaselJS in /tutorials/Inheritance.\n   *\n   * @method initialize\n   * @protected\n   * @deprecated\n   */\n  // p.initialize = function() {}; // searchable for devs wondering where it is.\n\n  /**\n   * The source of the channel.\n   * #property src\n   * @type {String}\n   */\n  p.src = null;\n\n  /**\n   * The maximum number of instances in this channel.  -1 indicates no limit\n   * #property max\n   * @type {Number}\n   */\n  p.max = null;\n\n  /**\n   * The default value to set for max, if it isn't passed in.  Also used if -1 is passed.\n   * #property maxDefault\n   * @type {Number}\n   * @default 100\n   * @since 0.4.0\n   */\n  p.maxDefault = 100;\n\n  /**\n   * The current number of active instances.\n   * #property length\n   * @type {Number}\n   */\n  p.length = 0;\n\n  /**\n   * Initialize the channel.\n   * #method init\n   * @param {String} src The source of the channel\n   * @param {Number} max The maximum number of instances in the channel\n   * @protected\n   */\n  p.init = function (src, max) {\n    this.src = src;\n    this.max = max || this.maxDefault;\n    if (this.max == -1) {\n      this.max = this.maxDefault;\n    }\n    this._instances = [];\n  };\n\n  /**\n   * Get an instance by index.\n   * #method get\n   * @param {Number} index The index to return.\n   * @return {AbstractSoundInstance} The AbstractSoundInstance at a specific instance.\n   */\n  p._get = function (index) {\n    return this._instances[index];\n  };\n\n  /**\n   * Add a new instance to the channel.\n   * #method add\n   * @param {AbstractSoundInstance} instance The instance to add.\n   * @return {Boolean} The success of the method call. If the channel is full, it will return false.\n   */\n  p._add = function (instance, interrupt) {\n    if (!this._getSlot(interrupt, instance)) {\n      return false;\n    }\n    this._instances.push(instance);\n    this.length++;\n    return true;\n  };\n\n  /**\n   * Remove an instance from the channel, either when it has finished playing, or it has been interrupted.\n   * #method remove\n   * @param {AbstractSoundInstance} instance The instance to remove\n   * @return {Boolean} The success of the remove call. If the instance is not found in this channel, it will\n   * return false.\n   */\n  p._remove = function (instance) {\n    var index = createjs.indexOf(this._instances, instance);\n    if (index == -1) {\n      return false;\n    }\n    this._instances.splice(index, 1);\n    this.length--;\n    return true;\n  };\n\n  /**\n   * Stop playback and remove all instances from the channel.  Usually in response to a delete call.\n   * #method removeAll\n   */\n  p._removeAll = function () {\n    // Note that stop() removes the item from the list\n    for (var i = this.length - 1; i >= 0; i--) {\n      this._instances[i].stop();\n    }\n  };\n\n  /**\n   * Get an available slot depending on interrupt value and if slots are available.\n   * #method getSlot\n   * @param {String} interrupt The interrupt value to use.\n   * @param {AbstractSoundInstance} instance The sound instance that will go in the channel if successful.\n   * @return {Boolean} Determines if there is an available slot. Depending on the interrupt mode, if there are no slots,\n   * an existing AbstractSoundInstance may be interrupted. If there are no slots, this method returns false.\n   */\n  p._getSlot = function (interrupt, instance) {\n    var target, replacement;\n    if (interrupt != Sound.INTERRUPT_NONE) {\n      // First replacement candidate\n      replacement = this._get(0);\n      if (replacement == null) {\n        return true;\n      }\n    }\n    for (var i = 0, l = this.max; i < l; i++) {\n      target = this._get(i);\n\n      // Available Space\n      if (target == null) {\n        return true;\n      }\n\n      // Audio is complete or not playing\n      if (target.playState == Sound.PLAY_FINISHED || target.playState == Sound.PLAY_INTERRUPTED || target.playState == Sound.PLAY_FAILED) {\n        replacement = target;\n        break;\n      }\n      if (interrupt == Sound.INTERRUPT_NONE) {\n        continue;\n      }\n\n      // Audio is a better candidate than the current target, according to playhead\n      if (interrupt == Sound.INTERRUPT_EARLY && target.getPosition() < replacement.getPosition() || interrupt == Sound.INTERRUPT_LATE && target.getPosition() > replacement.getPosition()) {\n        replacement = target;\n      }\n    }\n    if (replacement != null) {\n      replacement._interrupt();\n      this._remove(replacement);\n      return true;\n    }\n    return false;\n  };\n  p.toString = function () {\n    return \"[Sound SoundChannel]\";\n  };\n  // do not add SoundChannel to namespace\n})();\n\n//##############################################################################\n// AbstractSoundInstance.js\n//##############################################################################\n\n/**\n * A AbstractSoundInstance is created when any calls to the Sound API method {{#crossLink \"Sound/play\"}}{{/crossLink}} or\n * {{#crossLink \"Sound/createInstance\"}}{{/crossLink}} are made. The AbstractSoundInstance is returned by the active plugin\n * for control by the user.\n *\n * <h4>Example</h4>\n *\n *      var myInstance = createjs.Sound.play(\"myAssetPath/mySrcFile.mp3\");\n *\n * A number of additional parameters provide a quick way to determine how a sound is played. Please see the Sound\n * API method {{#crossLink \"Sound/play\"}}{{/crossLink}} for a list of arguments.\n *\n * Once a AbstractSoundInstance is created, a reference can be stored that can be used to control the audio directly through\n * the AbstractSoundInstance. If the reference is not stored, the AbstractSoundInstance will play out its audio (and any loops), and\n * is then de-referenced from the {{#crossLink \"Sound\"}}{{/crossLink}} class so that it can be cleaned up. If audio\n * playback has completed, a simple call to the {{#crossLink \"AbstractSoundInstance/play\"}}{{/crossLink}} instance method\n * will rebuild the references the Sound class need to control it.\n *\n *      var myInstance = createjs.Sound.play(\"myAssetPath/mySrcFile.mp3\", {loop:2});\n *      myInstance.on(\"loop\", handleLoop);\n *      function handleLoop(event) {\n *          myInstance.volume = myInstance.volume * 0.5;\n *      }\n *\n * Events are dispatched from the instance to notify when the sound has completed, looped, or when playback fails\n *\n *      var myInstance = createjs.Sound.play(\"myAssetPath/mySrcFile.mp3\");\n *      myInstance.on(\"complete\", handleComplete);\n *      myInstance.on(\"loop\", handleLoop);\n *      myInstance.on(\"failed\", handleFailed);\n *\n *\n * @class AbstractSoundInstance\n * @param {String} src The path to and file name of the sound.\n * @param {Number} startTime Audio sprite property used to apply an offset, in milliseconds.\n * @param {Number} duration Audio sprite property used to set the time the clip plays for, in milliseconds.\n * @param {Object} playbackResource Any resource needed by plugin to support audio playback.\n * @extends EventDispatcher\n * @constructor\n */\n\n(function () {\n  \"use strict\";\n\n  // Constructor:\n  var AbstractSoundInstance = function (src, startTime, duration, playbackResource) {\n    this.EventDispatcher_constructor();\n\n    // public properties:\n    /**\n     * The source of the sound.\n     * @property src\n     * @type {String}\n     * @default null\n     */\n    this.src = src;\n\n    /**\n     * The unique ID of the instance. This is set by {{#crossLink \"Sound\"}}{{/crossLink}}.\n     * @property uniqueId\n     * @type {String} | Number\n     * @default -1\n     */\n    this.uniqueId = -1;\n\n    /**\n     * The play state of the sound. Play states are defined as constants on {{#crossLink \"Sound\"}}{{/crossLink}}.\n     * @property playState\n     * @type {String}\n     * @default null\n     */\n    this.playState = null;\n\n    /**\n     * A Timeout created by {{#crossLink \"Sound\"}}{{/crossLink}} when this AbstractSoundInstance is played with a delay.\n     * This allows AbstractSoundInstance to remove the delay if stop, pause, or cleanup are called before playback begins.\n     * @property delayTimeoutId\n     * @type {timeoutVariable}\n     * @default null\n     * @protected\n     * @since 0.4.0\n     */\n    this.delayTimeoutId = null;\n    // TODO consider moving delay into AbstractSoundInstance so it can be handled by plugins\n\n    // private properties\n    // Getter / Setter Properties\n    // OJR TODO find original reason that we didn't use defined functions.  I think it was performance related\n    /**\n     * The volume of the sound, between 0 and 1.\n     *\n     * The actual output volume of a sound can be calculated using:\n     * <code>myInstance.volume * createjs.Sound.getVolume();</code>\n     *\n     * @property volume\n     * @type {Number}\n     * @default 1\n     */\n    this._volume = 1;\n    Object.defineProperty(this, \"volume\", {\n      get: this.getVolume,\n      set: this.setVolume\n    });\n\n    /**\n     * The pan of the sound, between -1 (left) and 1 (right). Note that pan is not supported by HTML Audio.\n     *\n     * <br />Note in WebAudioPlugin this only gives us the \"x\" value of what is actually 3D audio.\n     *\n     * @property pan\n     * @type {Number}\n     * @default 0\n     */\n    this._pan = 0;\n    Object.defineProperty(this, \"pan\", {\n      get: this.getPan,\n      set: this.setPan\n    });\n\n    /**\n     * Audio sprite property used to determine the starting offset.\n     * @property startTime\n     * @type {Number}\n     * @default 0\n     * @since 0.6.1\n     */\n    this._startTime = Math.max(0, startTime || 0);\n    Object.defineProperty(this, \"startTime\", {\n      get: this.getStartTime,\n      set: this.setStartTime\n    });\n\n    /**\n     * Sets or gets the length of the audio clip, value is in milliseconds.\n     *\n     * @property duration\n     * @type {Number}\n     * @default 0\n     * @since 0.6.0\n     */\n    this._duration = Math.max(0, duration || 0);\n    Object.defineProperty(this, \"duration\", {\n      get: this.getDuration,\n      set: this.setDuration\n    });\n\n    /**\n     * Object that holds plugin specific resource need for audio playback.\n     * This is set internally by the plugin.  For example, WebAudioPlugin will set an array buffer,\n     * HTMLAudioPlugin will set a tag, FlashAudioPlugin will set a flash reference.\n     *\n     * @property playbackResource\n     * @type {Object}\n     * @default null\n     */\n    this._playbackResource = null;\n    Object.defineProperty(this, \"playbackResource\", {\n      get: this.getPlaybackResource,\n      set: this.setPlaybackResource\n    });\n    if (playbackResource !== false && playbackResource !== true) {\n      this.setPlaybackResource(playbackResource);\n    }\n\n    /**\n     * The position of the playhead in milliseconds. This can be set while a sound is playing, paused, or stopped.\n     *\n     * @property position\n     * @type {Number}\n     * @default 0\n     * @since 0.6.0\n     */\n    this._position = 0;\n    Object.defineProperty(this, \"position\", {\n      get: this.getPosition,\n      set: this.setPosition\n    });\n\n    /**\n     * The number of play loops remaining. Negative values will loop infinitely.\n     *\n     * @property loop\n     * @type {Number}\n     * @default 0\n     * @public\n     * @since 0.6.0\n     */\n    this._loop = 0;\n    Object.defineProperty(this, \"loop\", {\n      get: this.getLoop,\n      set: this.setLoop\n    });\n\n    /**\n     * Mutes or unmutes the current audio instance.\n     *\n     * @property muted\n     * @type {Boolean}\n     * @default false\n     * @since 0.6.0\n     */\n    this._muted = false;\n    Object.defineProperty(this, \"muted\", {\n      get: this.getMuted,\n      set: this.setMuted\n    });\n\n    /**\n     * Pauses or resumes the current audio instance.\n     *\n     * @property paused\n     * @type {Boolean}\n     */\n    this._paused = false;\n    Object.defineProperty(this, \"paused\", {\n      get: this.getPaused,\n      set: this.setPaused\n    });\n\n    // Events\n    /**\n     * The event that is fired when playback has started successfully.\n     * @event succeeded\n     * @param {Object} target The object that dispatched the event.\n     * @param {String} type The event type.\n     * @since 0.4.0\n     */\n\n    /**\n     * The event that is fired when playback is interrupted. This happens when another sound with the same\n     * src property is played using an interrupt value that causes this instance to stop playing.\n     * @event interrupted\n     * @param {Object} target The object that dispatched the event.\n     * @param {String} type The event type.\n     * @since 0.4.0\n     */\n\n    /**\n     * The event that is fired when playback has failed. This happens when there are too many channels with the same\n     * src property already playing (and the interrupt value doesn't cause an interrupt of another instance), or\n     * the sound could not be played, perhaps due to a 404 error.\n     * @event failed\n     * @param {Object} target The object that dispatched the event.\n     * @param {String} type The event type.\n     * @since 0.4.0\n     */\n\n    /**\n     * The event that is fired when a sound has completed playing but has loops remaining.\n     * @event loop\n     * @param {Object} target The object that dispatched the event.\n     * @param {String} type The event type.\n     * @since 0.4.0\n     */\n\n    /**\n     * The event that is fired when playback completes. This means that the sound has finished playing in its\n     * entirety, including its loop iterations.\n     * @event complete\n     * @param {Object} target The object that dispatched the event.\n     * @param {String} type The event type.\n     * @since 0.4.0\n     */\n  };\n\n  var p = createjs.extend(AbstractSoundInstance, createjs.EventDispatcher);\n\n  // TODO: deprecated\n  // p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\n\n  // Public Methods:\n  /**\n   * Play an instance. This method is intended to be called on SoundInstances that already exist (created\n   * with the Sound API {{#crossLink \"Sound/createInstance\"}}{{/crossLink}} or {{#crossLink \"Sound/play\"}}{{/crossLink}}).\n   *\n   * <h4>Example</h4>\n   *\n   *      var myInstance = createjs.Sound.createInstance(mySrc);\n   *      myInstance.play({interrupt:createjs.Sound.INTERRUPT_ANY, loop:2, pan:0.5});\n   *\n   * Note that if this sound is already playing, this call will still set the passed in parameters.\n  \t * <b>Parameters Deprecated</b><br />\n   * The parameters for this method are deprecated in favor of a single parameter that is an Object or {{#crossLink \"PlayPropsConfig\"}}{{/crossLink}}.\n   *\n   * @method play\n   * @param {String | Object} [interrupt=\"none\"|options] <b>This parameter will be renamed playProps in the next release.</b><br />\n   * This parameter can be an instance of {{#crossLink \"PlayPropsConfig\"}}{{/crossLink}} or an Object that contains any or all optional properties by name,\n   * including: interrupt, delay, offset, loop, volume, pan, startTime, and duration (see the above code sample).\n   * <br /><strong>OR</strong><br />\n   * <b>Deprecated</b> How to interrupt any currently playing instances of audio with the same source,\n   * if the maximum number of instances of the sound are already playing. Values are defined as <code>INTERRUPT_TYPE</code>\n   * constants on the Sound class, with the default defined by {{#crossLink \"Sound/defaultInterruptBehavior:property\"}}{{/crossLink}}.\n   * @param {Number} [delay=0] <b>Deprecated</b> The amount of time to delay the start of audio playback, in milliseconds.\n   * @param {Number} [offset=0] <b>Deprecated</b> The offset from the start of the audio to begin playback, in milliseconds.\n   * @param {Number} [loop=0] <b>Deprecated</b> How many times the audio loops when it reaches the end of playback. The default is 0 (no\n   * loops), and -1 can be used for infinite playback.\n   * @param {Number} [volume=1] <b>Deprecated</b> The volume of the sound, between 0 and 1. Note that the master volume is applied\n   * against the individual volume.\n   * @param {Number} [pan=0] <b>Deprecated</b> The left-right pan of the sound (if supported), between -1 (left) and 1 (right).\n   * Note that pan is not supported for HTML Audio.\n   * @return {AbstractSoundInstance} A reference to itself, intended for chaining calls.\n   */\n  p.play = function (interrupt, delay, offset, loop, volume, pan) {\n    var playProps;\n    if (interrupt instanceof Object || interrupt instanceof createjs.PlayPropsConfig) {\n      playProps = createjs.PlayPropsConfig.create(interrupt);\n    } else {\n      playProps = createjs.PlayPropsConfig.create({\n        interrupt: interrupt,\n        delay: delay,\n        offset: offset,\n        loop: loop,\n        volume: volume,\n        pan: pan\n      });\n    }\n    if (this.playState == createjs.Sound.PLAY_SUCCEEDED) {\n      this.applyPlayProps(playProps);\n      if (this._paused) {\n        this.setPaused(false);\n      }\n      return;\n    }\n    this._cleanUp();\n    createjs.Sound._playInstance(this, playProps); // make this an event dispatch??\n    return this;\n  };\n\n  /**\n   * Stop playback of the instance. Stopped sounds will reset their position to 0, and calls to {{#crossLink \"AbstractSoundInstance/resume\"}}{{/crossLink}}\n   * will fail. To start playback again, call {{#crossLink \"AbstractSoundInstance/play\"}}{{/crossLink}}.\n      *\n      * If you don't want to lose your position use yourSoundInstance.paused = true instead. {{#crossLink \"AbstractSoundInstance/paused\"}}{{/crossLink}}.\n   *\n   * <h4>Example</h4>\n   *\n   *     myInstance.stop();\n   *\n   * @method stop\n   * @return {AbstractSoundInstance} A reference to itself, intended for chaining calls.\n   */\n  p.stop = function () {\n    this._position = 0;\n    this._paused = false;\n    this._handleStop();\n    this._cleanUp();\n    this.playState = createjs.Sound.PLAY_FINISHED;\n    return this;\n  };\n\n  /**\n   * Remove all external references and resources from AbstractSoundInstance.  Note this is irreversible and AbstractSoundInstance will no longer work\n   * @method destroy\n   * @since 0.6.0\n   */\n  p.destroy = function () {\n    this._cleanUp();\n    this.src = null;\n    this.playbackResource = null;\n    this.removeAllEventListeners();\n  };\n\n  /**\n   * Takes an PlayPropsConfig or Object with the same properties and sets them on this instance.\n   * @method applyPlayProps\n   * @param {PlayPropsConfig | Object} playProps A PlayPropsConfig or object containing the same properties.\n   * @since 0.6.1\n   * @return {AbstractSoundInstance} A reference to itself, intended for chaining calls.\n   */\n  p.applyPlayProps = function (playProps) {\n    if (playProps.offset != null) {\n      this.setPosition(playProps.offset);\n    }\n    if (playProps.loop != null) {\n      this.setLoop(playProps.loop);\n    }\n    if (playProps.volume != null) {\n      this.setVolume(playProps.volume);\n    }\n    if (playProps.pan != null) {\n      this.setPan(playProps.pan);\n    }\n    if (playProps.startTime != null) {\n      this.setStartTime(playProps.startTime);\n      this.setDuration(playProps.duration);\n    }\n    return this;\n  };\n  p.toString = function () {\n    return \"[AbstractSoundInstance]\";\n  };\n\n  // get/set methods that allow support for IE8\n  /**\n   * DEPRECATED, please use {{#crossLink \"AbstractSoundInstance/paused:property\"}}{{/crossLink}} directly as a property,\n   *\n   * @deprecated\n   * @method getPaused\n   * @returns {boolean} If the instance is currently paused\n   * @since 0.6.0\n   */\n  p.getPaused = function () {\n    return this._paused;\n  };\n\n  /**\n   * DEPRECATED, please use {{#crossLink \"AbstractSoundInstance/paused:property\"}}{{/crossLink}} directly as a property\n   *\n   * @deprecated\n   * @method setPaused\n   * @param {boolean} value\n   * @since 0.6.0\n   * @return {AbstractSoundInstance} A reference to itself, intended for chaining calls.\n   */\n  p.setPaused = function (value) {\n    if (value !== true && value !== false || this._paused == value) {\n      return;\n    }\n    if (value == true && this.playState != createjs.Sound.PLAY_SUCCEEDED) {\n      return;\n    }\n    this._paused = value;\n    if (value) {\n      this._pause();\n    } else {\n      this._resume();\n    }\n    clearTimeout(this.delayTimeoutId);\n    return this;\n  };\n\n  /**\n   * DEPRECATED, please use {{#crossLink \"AbstractSoundInstance/volume:property\"}}{{/crossLink}} directly as a property\n   *\n   * @deprecated\n   * @method setVolume\n   * @param {Number} value The volume to set, between 0 and 1.\n   * @return {AbstractSoundInstance} A reference to itself, intended for chaining calls.\n   */\n  p.setVolume = function (value) {\n    if (value == this._volume) {\n      return this;\n    }\n    this._volume = Math.max(0, Math.min(1, value));\n    if (!this._muted) {\n      this._updateVolume();\n    }\n    return this;\n  };\n\n  /**\n   * DEPRECATED, please use {{#crossLink \"AbstractSoundInstance/volume:property\"}}{{/crossLink}} directly as a property\n   *\n   * @deprecated\n   * @method getVolume\n   * @return {Number} The current volume of the sound instance.\n   */\n  p.getVolume = function () {\n    return this._volume;\n  };\n\n  /**\n   * DEPRECATED, please use {{#crossLink \"AbstractSoundInstance/muted:property\"}}{{/crossLink}} directly as a property\n   *\n   * @deprecated\n   * @method setMuted\n   * @param {Boolean} value If the sound should be muted.\n   * @return {AbstractSoundInstance} A reference to itself, intended for chaining calls.\n   * @since 0.6.0\n   */\n  p.setMuted = function (value) {\n    if (value !== true && value !== false) {\n      return;\n    }\n    this._muted = value;\n    this._updateVolume();\n    return this;\n  };\n\n  /**\n   * DEPRECATED, please use {{#crossLink \"AbstractSoundInstance/muted:property\"}}{{/crossLink}} directly as a property\n   *\n   * @deprecated\n   * @method getMuted\n   * @return {Boolean} If the sound is muted.\n   * @since 0.6.0\n   */\n  p.getMuted = function () {\n    return this._muted;\n  };\n\n  /**\n   * DEPRECATED, please use {{#crossLink \"AbstractSoundInstance/pan:property\"}}{{/crossLink}} directly as a property\n   *\n   * @deprecated\n   * @method setPan\n   * @param {Number} value The pan value, between -1 (left) and 1 (right).\n   * @return {AbstractSoundInstance} Returns reference to itself for chaining calls\n   */\n  p.setPan = function (value) {\n    if (value == this._pan) {\n      return this;\n    }\n    this._pan = Math.max(-1, Math.min(1, value));\n    this._updatePan();\n    return this;\n  };\n\n  /**\n   * DEPRECATED, please use {{#crossLink \"AbstractSoundInstance/pan:property\"}}{{/crossLink}} directly as a property\n   *\n   * @deprecated\n   * @method getPan\n   * @return {Number} The value of the pan, between -1 (left) and 1 (right).\n   */\n  p.getPan = function () {\n    return this._pan;\n  };\n\n  /**\n   * DEPRECATED, please use {{#crossLink \"AbstractSoundInstance/position:property\"}}{{/crossLink}} directly as a property\n   *\n   * @deprecated\n   * @method getPosition\n   * @return {Number} The position of the playhead in the sound, in milliseconds.\n   */\n  p.getPosition = function () {\n    if (!this._paused && this.playState == createjs.Sound.PLAY_SUCCEEDED) {\n      this._position = this._calculateCurrentPosition();\n    }\n    return this._position;\n  };\n\n  /**\n   * DEPRECATED, please use {{#crossLink \"AbstractSoundInstance/position:property\"}}{{/crossLink}} directly as a property\n   *\n   * @deprecated\n   * @method setPosition\n   * @param {Number} value The position to place the playhead, in milliseconds.\n   * @return {AbstractSoundInstance} Returns reference to itself for chaining calls\n   */\n  p.setPosition = function (value) {\n    this._position = Math.max(0, value);\n    if (this.playState == createjs.Sound.PLAY_SUCCEEDED) {\n      this._updatePosition();\n    }\n    return this;\n  };\n\n  /**\n   * DEPRECATED, please use {{#crossLink \"AbstractSoundInstance/startTime:property\"}}{{/crossLink}} directly as a property\n   *\n   * @deprecated\n   * @method getStartTime\n   * @return {Number} The startTime of the sound instance in milliseconds.\n   */\n  p.getStartTime = function () {\n    return this._startTime;\n  };\n\n  /**\n   * DEPRECATED, please use {{#crossLink \"AbstractSoundInstance/startTime:property\"}}{{/crossLink}} directly as a property\n   *\n   * @deprecated\n   * @method setStartTime\n   * @param {number} value The new startTime time in milli seconds.\n   * @return {AbstractSoundInstance} Returns reference to itself for chaining calls\n   */\n  p.setStartTime = function (value) {\n    if (value == this._startTime) {\n      return this;\n    }\n    this._startTime = Math.max(0, value || 0);\n    this._updateStartTime();\n    return this;\n  };\n\n  /**\n   * DEPRECATED, please use {{#crossLink \"AbstractSoundInstance/duration:property\"}}{{/crossLink}} directly as a property\n   *\n   * @deprecated\n   * @method getDuration\n   * @return {Number} The duration of the sound instance in milliseconds.\n   */\n  p.getDuration = function () {\n    return this._duration;\n  };\n\n  /**\n   * DEPRECATED, please use {{#crossLink \"AbstractSoundInstance/duration:property\"}}{{/crossLink}} directly as a property\n   *\n   * @deprecated\n   * @method setDuration\n   * @param {number} value The new duration time in milli seconds.\n   * @return {AbstractSoundInstance} Returns reference to itself for chaining calls\n   * @since 0.6.0\n   */\n  p.setDuration = function (value) {\n    if (value == this._duration) {\n      return this;\n    }\n    this._duration = Math.max(0, value || 0);\n    this._updateDuration();\n    return this;\n  };\n\n  /**\n   * DEPRECATED, please use {{#crossLink \"AbstractSoundInstance/playbackResource:property\"}}{{/crossLink}} directly as a property\n   *\n   * @deprecated\n   * @method setPlayback\n   * @param {Object} value The new playback resource.\n   * @return {AbstractSoundInstance} Returns reference to itself for chaining calls\n   * @since 0.6.0\n   **/\n  p.setPlaybackResource = function (value) {\n    this._playbackResource = value;\n    if (this._duration == 0) {\n      this._setDurationFromSource();\n    }\n    return this;\n  };\n\n  /**\n   * DEPRECATED, please use {{#crossLink \"AbstractSoundInstance/playbackResource:property\"}}{{/crossLink}} directly as a property\n   *\n   * @deprecated\n   * @method setPlayback\n   * @param {Object} value The new playback resource.\n   * @return {Object} playback resource used for playing audio\n   * @since 0.6.0\n   **/\n  p.getPlaybackResource = function () {\n    return this._playbackResource;\n  };\n\n  /**\n   * DEPRECATED, please use {{#crossLink \"AbstractSoundInstance/loop:property\"}}{{/crossLink}} directly as a property\n   *\n   * @deprecated\n   * @method getLoop\n   * @return {number}\n   * @since 0.6.0\n   **/\n  p.getLoop = function () {\n    return this._loop;\n  };\n\n  /**\n   * DEPRECATED, please use {{#crossLink \"AbstractSoundInstance/loop:property\"}}{{/crossLink}} directly as a property,\n   *\n   * @deprecated\n   * @method setLoop\n   * @param {number} value The number of times to loop after play.\n   * @since 0.6.0\n   */\n  p.setLoop = function (value) {\n    if (this._playbackResource != null) {\n      // remove looping\n      if (this._loop != 0 && value == 0) {\n        this._removeLooping(value);\n      }\n      // add looping\n      else if (this._loop == 0 && value != 0) {\n        this._addLooping(value);\n      }\n    }\n    this._loop = value;\n  };\n\n  // Private Methods:\n  /**\n   * A helper method that dispatches all events for AbstractSoundInstance.\n   * @method _sendEvent\n   * @param {String} type The event type\n   * @protected\n   */\n  p._sendEvent = function (type) {\n    var event = new createjs.Event(type);\n    this.dispatchEvent(event);\n  };\n\n  /**\n   * Clean up the instance. Remove references and clean up any additional properties such as timers.\n   * @method _cleanUp\n   * @protected\n   */\n  p._cleanUp = function () {\n    clearTimeout(this.delayTimeoutId); // clear timeout that plays delayed sound\n    this._handleCleanUp();\n    this._paused = false;\n    createjs.Sound._playFinished(this); // TODO change to an event\n  };\n\n  /**\n   * The sound has been interrupted.\n   * @method _interrupt\n   * @protected\n   */\n  p._interrupt = function () {\n    this._cleanUp();\n    this.playState = createjs.Sound.PLAY_INTERRUPTED;\n    this._sendEvent(\"interrupted\");\n  };\n\n  /**\n   * Called by the Sound class when the audio is ready to play (delay has completed). Starts sound playing if the\n   * src is loaded, otherwise playback will fail.\n   * @method _beginPlaying\n   * @param {PlayPropsConfig} playProps A PlayPropsConfig object.\n   * @return {Boolean} If playback succeeded.\n   * @protected\n   */\n  // OJR FlashAudioSoundInstance overwrites\n  p._beginPlaying = function (playProps) {\n    this.setPosition(playProps.offset);\n    this.setLoop(playProps.loop);\n    this.setVolume(playProps.volume);\n    this.setPan(playProps.pan);\n    if (playProps.startTime != null) {\n      this.setStartTime(playProps.startTime);\n      this.setDuration(playProps.duration);\n    }\n    if (this._playbackResource != null && this._position < this._duration) {\n      this._paused = false;\n      this._handleSoundReady();\n      this.playState = createjs.Sound.PLAY_SUCCEEDED;\n      this._sendEvent(\"succeeded\");\n      return true;\n    } else {\n      this._playFailed();\n      return false;\n    }\n  };\n\n  /**\n   * Play has failed, which can happen for a variety of reasons.\n   * Cleans up instance and dispatches failed event\n   * @method _playFailed\n   * @private\n   */\n  p._playFailed = function () {\n    this._cleanUp();\n    this.playState = createjs.Sound.PLAY_FAILED;\n    this._sendEvent(\"failed\");\n  };\n\n  /**\n   * Audio has finished playing. Manually loop it if required.\n   * @method _handleSoundComplete\n   * @param event\n   * @protected\n   */\n  p._handleSoundComplete = function (event) {\n    this._position = 0; // have to set this as it can be set by pause during playback\n\n    if (this._loop != 0) {\n      this._loop--; // NOTE this introduces a theoretical limit on loops = float max size x 2 - 1\n      this._handleLoop();\n      this._sendEvent(\"loop\");\n      return;\n    }\n    this._cleanUp();\n    this.playState = createjs.Sound.PLAY_FINISHED;\n    this._sendEvent(\"complete\");\n  };\n\n  // Plugin specific code\n  /**\n   * Handles starting playback when the sound is ready for playing.\n   * @method _handleSoundReady\n   * @protected\n  \t */\n  p._handleSoundReady = function () {\n    // plugin specific code\n  };\n\n  /**\n   * Internal function used to update the volume based on the instance volume, master volume, instance mute value,\n   * and master mute value.\n   * @method _updateVolume\n   * @protected\n   */\n  p._updateVolume = function () {\n    // plugin specific code\n  };\n\n  /**\n   * Internal function used to update the pan\n   * @method _updatePan\n   * @protected\n   * @since 0.6.0\n   */\n  p._updatePan = function () {\n    // plugin specific code\n  };\n\n  /**\n   * Internal function used to update the startTime of the audio.\n   * @method _updateStartTime\n   * @protected\n   * @since 0.6.1\n   */\n  p._updateStartTime = function () {\n    // plugin specific code\n  };\n\n  /**\n   * Internal function used to update the duration of the audio.\n   * @method _updateDuration\n   * @protected\n   * @since 0.6.0\n   */\n  p._updateDuration = function () {\n    // plugin specific code\n  };\n\n  /**\n   * Internal function used to get the duration of the audio from the source we'll be playing.\n   * @method _updateDuration\n   * @protected\n   * @since 0.6.0\n   */\n  p._setDurationFromSource = function () {\n    // plugin specific code\n  };\n\n  /**\n   * Internal function that calculates the current position of the playhead and sets this._position to that value\n   * @method _calculateCurrentPosition\n   * @protected\n   * @since 0.6.0\n   */\n  p._calculateCurrentPosition = function () {\n    // plugin specific code that sets this.position\n  };\n\n  /**\n   * Internal function used to update the position of the playhead.\n   * @method _updatePosition\n   * @protected\n   * @since 0.6.0\n   */\n  p._updatePosition = function () {\n    // plugin specific code\n  };\n\n  /**\n   * Internal function called when looping is removed during playback.\n   * @method _removeLooping\n   * @param {number} value The number of times to loop after play.\n   * @protected\n   * @since 0.6.0\n   */\n  p._removeLooping = function (value) {\n    // plugin specific code\n  };\n\n  /**\n   * Internal function called when looping is added during playback.\n   * @method _addLooping\n   * @param {number} value The number of times to loop after play.\n   * @protected\n   * @since 0.6.0\n   */\n  p._addLooping = function (value) {\n    // plugin specific code\n  };\n\n  /**\n   * Internal function called when pausing playback\n   * @method _pause\n   * @protected\n   * @since 0.6.0\n   */\n  p._pause = function () {\n    // plugin specific code\n  };\n\n  /**\n   * Internal function called when resuming playback\n   * @method _resume\n   * @protected\n   * @since 0.6.0\n   */\n  p._resume = function () {\n    // plugin specific code\n  };\n\n  /**\n   * Internal function called when stopping playback\n   * @method _handleStop\n   * @protected\n   * @since 0.6.0\n   */\n  p._handleStop = function () {\n    // plugin specific code\n  };\n\n  /**\n   * Internal function called when AbstractSoundInstance is being cleaned up\n   * @method _handleCleanUp\n   * @protected\n   * @since 0.6.0\n   */\n  p._handleCleanUp = function () {\n    // plugin specific code\n  };\n\n  /**\n   * Internal function called when AbstractSoundInstance has played to end and is looping\n   * @method _handleLoop\n   * @protected\n   * @since 0.6.0\n   */\n  p._handleLoop = function () {\n    // plugin specific code\n  };\n  createjs.AbstractSoundInstance = createjs.promote(AbstractSoundInstance, \"EventDispatcher\");\n  createjs.DefaultSoundInstance = createjs.AbstractSoundInstance; // used when no plugin is supported\n})();\n\n//##############################################################################\n// AbstractPlugin.js\n//##############################################################################\n\n(function () {\n  \"use strict\";\n\n  // constructor:\n  /**\n  * A default plugin class used as a base for all other plugins.\n  * @class AbstractPlugin\n  * @constructor\n  * @since 0.6.0\n  */\n  var AbstractPlugin = function () {\n    // private properties:\n    /**\n     * The capabilities of the plugin.\n     * method and is used internally.\n     * @property _capabilities\n     * @type {Object}\n     * @default null\n     * @protected\n     * @static\n     */\n    this._capabilities = null;\n\n    /**\n     * Object hash indexed by the source URI of all created loaders, used to properly destroy them if sources are removed.\n     * @type {Object}\n     * @protected\n     */\n    this._loaders = {};\n\n    /**\n     * Object hash indexed by the source URI of each file to indicate if an audio source has begun loading,\n     * is currently loading, or has completed loading.  Can be used to store non boolean data after loading\n     * is complete (for example arrayBuffers for web audio).\n     * @property _audioSources\n     * @type {Object}\n     * @protected\n     */\n    this._audioSources = {};\n\n    /**\n     * Object hash indexed by the source URI of all created SoundInstances, updates the playbackResource if it loads after they are created,\n     * and properly destroy them if sources are removed\n     * @type {Object}\n     * @protected\n     */\n    this._soundInstances = {};\n\n    /**\n     * The internal master volume value of the plugin.\n     * @property _volume\n     * @type {Number}\n     * @default 1\n     * @protected\n     */\n    this._volume = 1;\n\n    /**\n     * A reference to a loader class used by a plugin that must be set.\n     * @type {Object}\n     * @protected\n     */\n    this._loaderClass;\n\n    /**\n     * A reference to an AbstractSoundInstance class used by a plugin that must be set.\n     * @type {Object}\n     * @protected;\n     */\n    this._soundInstanceClass;\n  };\n  var p = AbstractPlugin.prototype;\n\n  /**\n   * <strong>REMOVED</strong>. Removed in favor of using `MySuperClass_constructor`.\n   * See {{#crossLink \"Utility Methods/extend\"}}{{/crossLink}} and {{#crossLink \"Utility Methods/promote\"}}{{/crossLink}}\n   * for details.\n   *\n   * There is an inheritance tutorial distributed with EaselJS in /tutorials/Inheritance.\n   *\n   * @method initialize\n   * @protected\n   * @deprecated\n   */\n  // p.initialize = function() {}; // searchable for devs wondering where it is.\n\n  // Static Properties:\n  // NOTE THESE PROPERTIES NEED TO BE ADDED TO EACH PLUGIN\n  /**\n   * The capabilities of the plugin. This is generated via the _generateCapabilities method and is used internally.\n   * @property _capabilities\n   * @type {Object}\n   * @default null\n   * @protected\n   * @static\n   */\n  AbstractPlugin._capabilities = null;\n\n  /**\n   * Determine if the plugin can be used in the current browser/OS.\n   * @method isSupported\n   * @return {Boolean} If the plugin can be initialized.\n   * @static\n   */\n  AbstractPlugin.isSupported = function () {\n    return true;\n  };\n\n  // public methods:\n  /**\n   * Pre-register a sound for preloading and setup. This is called by {{#crossLink \"Sound\"}}{{/crossLink}}.\n   * Note all plugins provide a <code>Loader</code> instance, which <a href=\"http://preloadjs.com\" target=\"_blank\">PreloadJS</a>\n   * can use to assist with preloading.\n   * @method register\n   * @param {String} loadItem An Object containing the source of the audio\n   * Note that not every plugin will manage this value.\n   * @return {Object} A result object, containing a \"tag\" for preloading purposes.\n   */\n  p.register = function (loadItem) {\n    var loader = this._loaders[loadItem.src];\n    if (loader && !loader.canceled) {\n      return this._loaders[loadItem.src];\n    } // already loading/loaded this, so don't load twice\n    // OJR potential issue that we won't be firing loaded event, might need to trigger if this is already loaded?\n    this._audioSources[loadItem.src] = true;\n    this._soundInstances[loadItem.src] = [];\n    loader = new this._loaderClass(loadItem);\n    loader.on(\"complete\", this._handlePreloadComplete, this);\n    this._loaders[loadItem.src] = loader;\n    return loader;\n  };\n\n  // note sound calls register before calling preload\n  /**\n   * Internally preload a sound.\n   * @method preload\n   * @param {Loader} loader The sound URI to load.\n   */\n  p.preload = function (loader) {\n    loader.on(\"error\", this._handlePreloadError, this);\n    loader.load();\n  };\n\n  /**\n   * Checks if preloading has started for a specific source. If the source is found, we can assume it is loading,\n   * or has already finished loading.\n   * @method isPreloadStarted\n   * @param {String} src The sound URI to check.\n   * @return {Boolean}\n   */\n  p.isPreloadStarted = function (src) {\n    return this._audioSources[src] != null;\n  };\n\n  /**\n   * Checks if preloading has finished for a specific source.\n   * @method isPreloadComplete\n   * @param {String} src The sound URI to load.\n   * @return {Boolean}\n   */\n  p.isPreloadComplete = function (src) {\n    return !(this._audioSources[src] == null || this._audioSources[src] == true);\n  };\n\n  /**\n   * Remove a sound added using {{#crossLink \"WebAudioPlugin/register\"}}{{/crossLink}}. Note this does not cancel a preload.\n   * @method removeSound\n   * @param {String} src The sound URI to unload.\n   */\n  p.removeSound = function (src) {\n    if (!this._soundInstances[src]) {\n      return;\n    }\n    for (var i = this._soundInstances[src].length; i--;) {\n      var item = this._soundInstances[src][i];\n      item.destroy();\n    }\n    delete this._soundInstances[src];\n    delete this._audioSources[src];\n    if (this._loaders[src]) {\n      this._loaders[src].destroy();\n    }\n    delete this._loaders[src];\n  };\n\n  /**\n   * Remove all sounds added using {{#crossLink \"WebAudioPlugin/register\"}}{{/crossLink}}. Note this does not cancel a preload.\n   * @method removeAllSounds\n   * @param {String} src The sound URI to unload.\n   */\n  p.removeAllSounds = function () {\n    for (var key in this._audioSources) {\n      this.removeSound(key);\n    }\n  };\n\n  /**\n   * Create a sound instance. If the sound has not been preloaded, it is internally preloaded here.\n   * @method create\n   * @param {String} src The sound source to use.\n   * @param {Number} startTime Audio sprite property used to apply an offset, in milliseconds.\n   * @param {Number} duration Audio sprite property used to set the time the clip plays for, in milliseconds.\n   * @return {AbstractSoundInstance} A sound instance for playback and control.\n   */\n  p.create = function (src, startTime, duration) {\n    if (!this.isPreloadStarted(src)) {\n      this.preload(this.register(src));\n    }\n    var si = new this._soundInstanceClass(src, startTime, duration, this._audioSources[src]);\n    this._soundInstances[src].push(si);\n    return si;\n  };\n\n  // if a plugin does not support volume and mute, it should set these to null\n  /**\n   * Set the master volume of the plugin, which affects all SoundInstances.\n   * @method setVolume\n   * @param {Number} value The volume to set, between 0 and 1.\n   * @return {Boolean} If the plugin processes the setVolume call (true). The Sound class will affect all the\n   * instances manually otherwise.\n   */\n  p.setVolume = function (value) {\n    this._volume = value;\n    this._updateVolume();\n    return true;\n  };\n\n  /**\n   * Get the master volume of the plugin, which affects all SoundInstances.\n   * @method getVolume\n   * @return {Number} The volume level, between 0 and 1.\n   */\n  p.getVolume = function () {\n    return this._volume;\n  };\n\n  /**\n   * Mute all sounds via the plugin.\n   * @method setMute\n   * @param {Boolean} value If all sound should be muted or not. Note that plugin-level muting just looks up\n   * the mute value of Sound {{#crossLink \"Sound/getMute\"}}{{/crossLink}}, so this property is not used here.\n   * @return {Boolean} If the mute call succeeds.\n   */\n  p.setMute = function (value) {\n    this._updateVolume();\n    return true;\n  };\n\n  // plugins should overwrite this method\n  p.toString = function () {\n    return \"[AbstractPlugin]\";\n  };\n\n  // private methods:\n  /**\n   * Handles internal preload completion.\n   * @method _handlePreloadComplete\n   * @protected\n   */\n  p._handlePreloadComplete = function (event) {\n    var src = event.target.getItem().src;\n    this._audioSources[src] = event.result;\n    for (var i = 0, l = this._soundInstances[src].length; i < l; i++) {\n      var item = this._soundInstances[src][i];\n      item.setPlaybackResource(this._audioSources[src]);\n      // ToDo consider adding play call here if playstate == playfailed\n    }\n  };\n\n  /**\n   * Handles internal preload erros\n   * @method _handlePreloadError\n   * @param event\n   * @protected\n   */\n  p._handlePreloadError = function (event) {\n    //delete(this._audioSources[src]);\n  };\n\n  /**\n   * Set the gain value for master audio. Should not be called externally.\n   * @method _updateVolume\n   * @protected\n   */\n  p._updateVolume = function () {\n    // Plugin Specific code\n  };\n  createjs.AbstractPlugin = AbstractPlugin;\n})();\n\n//##############################################################################\n// WebAudioLoader.js\n//##############################################################################\n\n(function () {\n  \"use strict\";\n\n  /**\n   * Loader provides a mechanism to preload Web Audio content via PreloadJS or internally. Instances are returned to\n   * the preloader, and the load method is called when the asset needs to be requested.\n   *\n   * @class WebAudioLoader\n   * @param {String} loadItem The item to be loaded\n   * @extends XHRRequest\n   * @protected\n   */\n  function Loader(loadItem) {\n    this.AbstractLoader_constructor(loadItem, true, createjs.AbstractLoader.SOUND);\n  }\n  ;\n  var p = createjs.extend(Loader, createjs.AbstractLoader);\n\n  // TODO: deprecated\n  // p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\n\n  /**\n   * web audio context required for decoding audio\n   * @property context\n   * @type {AudioContext}\n   * @static\n   */\n  Loader.context = null;\n\n  // public methods\n  p.toString = function () {\n    return \"[WebAudioLoader]\";\n  };\n\n  // private methods\n  p._createRequest = function () {\n    this._request = new createjs.XHRRequest(this._item, false);\n    this._request.setResponseType(\"arraybuffer\");\n  };\n  p._sendComplete = function (event) {\n    // OJR we leave this wrapped in Loader because we need to reference src and the handler only receives a single argument, the decodedAudio\n    Loader.context.decodeAudioData(this._rawResult, createjs.proxy(this._handleAudioDecoded, this), createjs.proxy(this._sendError, this));\n  };\n\n  /**\n  * The audio has been decoded.\n  * @method handleAudioDecoded\n  * @param decoded\n  * @protected\n  */\n  p._handleAudioDecoded = function (decodedAudio) {\n    this._result = decodedAudio;\n    this.AbstractLoader__sendComplete();\n  };\n  createjs.WebAudioLoader = createjs.promote(Loader, \"AbstractLoader\");\n})();\n\n//##############################################################################\n// WebAudioSoundInstance.js\n//##############################################################################\n\n/**\n * WebAudioSoundInstance extends the base api of {{#crossLink \"AbstractSoundInstance\"}}{{/crossLink}} and is used by\n * {{#crossLink \"WebAudioPlugin\"}}{{/crossLink}}.\n *\n * WebAudioSoundInstance exposes audioNodes for advanced users.\n *\n * @param {String} src The path to and file name of the sound.\n * @param {Number} startTime Audio sprite property used to apply an offset, in milliseconds.\n * @param {Number} duration Audio sprite property used to set the time the clip plays for, in milliseconds.\n * @param {Object} playbackResource Any resource needed by plugin to support audio playback.\n * @class WebAudioSoundInstance\n * @extends AbstractSoundInstance\n * @constructor\n */\n(function () {\n  \"use strict\";\n\n  function WebAudioSoundInstance(src, startTime, duration, playbackResource) {\n    this.AbstractSoundInstance_constructor(src, startTime, duration, playbackResource);\n\n    // public properties\n    /**\n     * NOTE this is only intended for use by advanced users.\n     * <br />GainNode for controlling <code>WebAudioSoundInstance</code> volume. Connected to the {{#crossLink \"WebAudioSoundInstance/destinationNode:property\"}}{{/crossLink}}.\n     * @property gainNode\n     * @type {AudioGainNode}\n     * @since 0.4.0\n     *\n     */\n    this.gainNode = s.context.createGain();\n\n    /**\n     * NOTE this is only intended for use by advanced users.\n     * <br />A panNode allowing left and right audio channel panning only. Connected to WebAudioSoundInstance {{#crossLink \"WebAudioSoundInstance/gainNode:property\"}}{{/crossLink}}.\n     * @property panNode\n     * @type {AudioPannerNode}\n     * @since 0.4.0\n     */\n    this.panNode = s.context.createPanner();\n    this.panNode.panningModel = s._panningModel;\n    this.panNode.connect(this.gainNode);\n    this._updatePan();\n\n    /**\n     * NOTE this is only intended for use by advanced users.\n     * <br />sourceNode is the audio source. Connected to WebAudioSoundInstance {{#crossLink \"WebAudioSoundInstance/panNode:property\"}}{{/crossLink}}.\n     * @property sourceNode\n     * @type {AudioNode}\n     * @since 0.4.0\n     *\n     */\n    this.sourceNode = null;\n\n    // private properties\n    /**\n     * Timeout that is created internally to handle sound playing to completion.\n     * Stored so we can remove it when stop, pause, or cleanup are called\n     * @property _soundCompleteTimeout\n     * @type {timeoutVariable}\n     * @default null\n     * @protected\n     * @since 0.4.0\n     */\n    this._soundCompleteTimeout = null;\n\n    /**\n     * NOTE this is only intended for use by very advanced users.\n     * _sourceNodeNext is the audio source for the next loop, inserted in a look ahead approach to allow for smooth\n     * looping. Connected to {{#crossLink \"WebAudioSoundInstance/gainNode:property\"}}{{/crossLink}}.\n     * @property _sourceNodeNext\n     * @type {AudioNode}\n     * @default null\n     * @protected\n     * @since 0.4.1\n     *\n     */\n    this._sourceNodeNext = null;\n\n    /**\n     * Time audio started playback, in seconds. Used to handle set position, get position, and resuming from paused.\n     * @property _playbackStartTime\n     * @type {Number}\n     * @default 0\n     * @protected\n     * @since 0.4.0\n     */\n    this._playbackStartTime = 0;\n\n    // Proxies, make removing listeners easier.\n    this._endedHandler = createjs.proxy(this._handleSoundComplete, this);\n  }\n  ;\n  var p = createjs.extend(WebAudioSoundInstance, createjs.AbstractSoundInstance);\n  var s = WebAudioSoundInstance;\n\n  // TODO: deprecated\n  // p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\n\n  /**\n   * Note this is only intended for use by advanced users.\n   * <br />Audio context used to create nodes.  This is and needs to be the same context used by {{#crossLink \"WebAudioPlugin\"}}{{/crossLink}}.\n   \t * @property context\n   * @type {AudioContext}\n   * @static\n   * @since 0.6.0\n   */\n  s.context = null;\n\n  /**\n   * Note this is only intended for use by advanced users.\n   * <br />The scratch buffer that will be assigned to the buffer property of a source node on close.  \n   * This is and should be the same scratch buffer referenced by {{#crossLink \"WebAudioPlugin\"}}{{/crossLink}}.\n   \t * @property _scratchBuffer\n   * @type {AudioBufferSourceNode}\n   * @static\n   */\n  s._scratchBuffer = null;\n\n  /**\n   * Note this is only intended for use by advanced users.\n   * <br /> Audio node from WebAudioPlugin that sequences to <code>context.destination</code>\n   * @property destinationNode\n   * @type {AudioNode}\n   * @static\n   * @since 0.6.0\n   */\n  s.destinationNode = null;\n\n  /**\n   * Value to set panning model to equal power for WebAudioSoundInstance.  Can be \"equalpower\" or 0 depending on browser implementation.\n   * @property _panningModel\n   * @type {Number / String}\n   * @protected\n   * @static\n   * @since 0.6.0\n   */\n  s._panningModel = \"equalpower\";\n\n  // Public methods\n  p.destroy = function () {\n    this.AbstractSoundInstance_destroy();\n    this.panNode.disconnect(0);\n    this.panNode = null;\n    this.gainNode.disconnect(0);\n    this.gainNode = null;\n  };\n  p.toString = function () {\n    return \"[WebAudioSoundInstance]\";\n  };\n\n  // Private Methods\n  p._updatePan = function () {\n    this.panNode.setPosition(this._pan, 0, -0.5);\n    // z need to be -0.5 otherwise the sound only plays in left, right, or center\n  };\n\n  p._removeLooping = function (value) {\n    this._sourceNodeNext = this._cleanUpAudioNode(this._sourceNodeNext);\n  };\n  p._addLooping = function (value) {\n    if (this.playState != createjs.Sound.PLAY_SUCCEEDED) {\n      return;\n    }\n    this._sourceNodeNext = this._createAndPlayAudioNode(this._playbackStartTime, 0);\n  };\n  p._setDurationFromSource = function () {\n    this._duration = this.playbackResource.duration * 1000;\n  };\n  p._handleCleanUp = function () {\n    if (this.sourceNode && this.playState == createjs.Sound.PLAY_SUCCEEDED) {\n      this.sourceNode = this._cleanUpAudioNode(this.sourceNode);\n      this._sourceNodeNext = this._cleanUpAudioNode(this._sourceNodeNext);\n    }\n    if (this.gainNode.numberOfOutputs != 0) {\n      this.gainNode.disconnect(0);\n    }\n    // OJR there appears to be a bug that this doesn't always work in webkit (Chrome and Safari). According to the documentation, this should work.\n\n    clearTimeout(this._soundCompleteTimeout);\n    this._playbackStartTime = 0; // This is used by getPosition\n  };\n\n  /**\n   * Turn off and disconnect an audioNode, then set reference to null to release it for garbage collection\n   * @method _cleanUpAudioNode\n   * @param audioNode\n   * @return {audioNode}\n   * @protected\n   * @since 0.4.1\n   */\n  p._cleanUpAudioNode = function (audioNode) {\n    if (audioNode) {\n      audioNode.stop(0);\n      audioNode.disconnect(0);\n      // necessary to prevent leak on iOS Safari 7-9. will throw in almost all other\n      // browser implementations.\n      try {\n        audioNode.buffer = s._scratchBuffer;\n      } catch (e) {}\n      audioNode = null;\n    }\n    return audioNode;\n  };\n  p._handleSoundReady = function (event) {\n    this.gainNode.connect(s.destinationNode); // this line can cause a memory leak.  Nodes need to be disconnected from the audioDestination or any sequence that leads to it.\n\n    var dur = this._duration * 0.001;\n    var pos = this._position * 0.001;\n    if (pos > dur) {\n      pos = dur;\n    }\n    this.sourceNode = this._createAndPlayAudioNode(s.context.currentTime - dur, pos);\n    this._playbackStartTime = this.sourceNode.startTime - pos;\n    this._soundCompleteTimeout = setTimeout(this._endedHandler, (dur - pos) * 1000);\n    if (this._loop != 0) {\n      this._sourceNodeNext = this._createAndPlayAudioNode(this._playbackStartTime, 0);\n    }\n  };\n\n  /**\n   * Creates an audio node using the current src and context, connects it to the gain node, and starts playback.\n   * @method _createAndPlayAudioNode\n   * @param {Number} startTime The time to add this to the web audio context, in seconds.\n   * @param {Number} offset The amount of time into the src audio to start playback, in seconds.\n   * @return {audioNode}\n   * @protected\n   * @since 0.4.1\n   */\n  p._createAndPlayAudioNode = function (startTime, offset) {\n    var audioNode = s.context.createBufferSource();\n    audioNode.buffer = this.playbackResource;\n    audioNode.connect(this.panNode);\n    var dur = this._duration * 0.001;\n    audioNode.startTime = startTime + dur;\n    audioNode.start(audioNode.startTime, offset + this._startTime * 0.001, dur - offset);\n    return audioNode;\n  };\n  p._pause = function () {\n    this._position = (s.context.currentTime - this._playbackStartTime) * 1000; // * 1000 to give milliseconds, lets us restart at same point\n    this.sourceNode = this._cleanUpAudioNode(this.sourceNode);\n    this._sourceNodeNext = this._cleanUpAudioNode(this._sourceNodeNext);\n    if (this.gainNode.numberOfOutputs != 0) {\n      this.gainNode.disconnect(0);\n    }\n    clearTimeout(this._soundCompleteTimeout);\n  };\n  p._resume = function () {\n    this._handleSoundReady();\n  };\n\n  /*\n  p._handleStop = function () {\n  \t// web audio does not need to do anything extra\n  };\n  */\n\n  p._updateVolume = function () {\n    var newVolume = this._muted ? 0 : this._volume;\n    if (newVolume != this.gainNode.gain.value) {\n      this.gainNode.gain.value = newVolume;\n    }\n  };\n  p._calculateCurrentPosition = function () {\n    return (s.context.currentTime - this._playbackStartTime) * 1000; // pos in seconds * 1000 to give milliseconds\n  };\n\n  p._updatePosition = function () {\n    this.sourceNode = this._cleanUpAudioNode(this.sourceNode);\n    this._sourceNodeNext = this._cleanUpAudioNode(this._sourceNodeNext);\n    clearTimeout(this._soundCompleteTimeout);\n    if (!this._paused) {\n      this._handleSoundReady();\n    }\n  };\n\n  // OJR we are using a look ahead approach to ensure smooth looping.\n  // We add _sourceNodeNext to the audio context so that it starts playing even if this callback is delayed.\n  // This technique is described here:  http://www.html5rocks.com/en/tutorials/audio/scheduling/\n  // NOTE the cost of this is that our audio loop may not always match the loop event timing precisely.\n  p._handleLoop = function () {\n    this._cleanUpAudioNode(this.sourceNode);\n    this.sourceNode = this._sourceNodeNext;\n    this._playbackStartTime = this.sourceNode.startTime;\n    this._sourceNodeNext = this._createAndPlayAudioNode(this._playbackStartTime, 0);\n    this._soundCompleteTimeout = setTimeout(this._endedHandler, this._duration);\n  };\n  p._updateDuration = function () {\n    if (this.playState == createjs.Sound.PLAY_SUCCEEDED) {\n      this._pause();\n      this._resume();\n    }\n  };\n  createjs.WebAudioSoundInstance = createjs.promote(WebAudioSoundInstance, \"AbstractSoundInstance\");\n})();\n\n//##############################################################################\n// WebAudioPlugin.js\n//##############################################################################\n\n(function () {\n  \"use strict\";\n\n  /**\n   * Play sounds using Web Audio in the browser. The WebAudioPlugin is currently the default plugin, and will be used\n   * anywhere that it is supported. To change plugin priority, check out the Sound API\n   * {{#crossLink \"Sound/registerPlugins\"}}{{/crossLink}} method.\n  \t * <h4>Known Browser and OS issues for Web Audio</h4>\n   * <b>Firefox 25</b>\n   * <li>\n   *     mp3 audio files do not load properly on all windows machines, reported <a href=\"https://bugzilla.mozilla.org/show_bug.cgi?id=929969\" target=\"_blank\">here</a>.\n   *     <br />For this reason it is recommended to pass another FireFox-supported type (i.e. ogg) as the default\n   *     extension, until this bug is resolved\n   * </li>\n   *\n   * <b>Webkit (Chrome and Safari)</b>\n   * <li>\n   *     AudioNode.disconnect does not always seem to work.  This can cause the file size to grow over time if you\n   * \t   are playing a lot of audio files.\n   * </li>\n   *\n   * <b>iOS 6 limitations</b>\n   * <ul>\n   *     <li>\n   *         Sound is initially muted and will only unmute through play being called inside a user initiated event\n   *         (touch/click). Please read the mobile playback notes in the the {{#crossLink \"Sound\"}}{{/crossLink}}\n   *         class for a full overview of the limitations, and how to get around them.\n   *     </li>\n   *\t   <li>\n   *\t       A bug exists that will distort un-cached audio when a video element is present in the DOM. You can avoid\n   *\t       this bug by ensuring the audio and video audio share the same sample rate.\n   *\t   </li>\n   * </ul>\n   * @class WebAudioPlugin\n   * @extends AbstractPlugin\n   * @constructor\n   * @since 0.4.0\n   */\n  function WebAudioPlugin() {\n    this.AbstractPlugin_constructor();\n\n    // Private Properties\n    /**\n     * Value to set panning model to equal power for WebAudioSoundInstance.  Can be \"equalpower\" or 0 depending on browser implementation.\n     * @property _panningModel\n     * @type {Number / String}\n     * @protected\n     */\n    this._panningModel = s._panningModel;\n    ;\n\n    /**\n     * The web audio context, which WebAudio uses to play audio. All nodes that interact with the WebAudioPlugin\n     * need to be created within this context.\n     * @property context\n     * @type {AudioContext}\n     */\n    this.context = s.context;\n\n    /**\n     * A DynamicsCompressorNode, which is used to improve sound quality and prevent audio distortion.\n     * It is connected to <code>context.destination</code>.\n     *\n     * Can be accessed by advanced users through createjs.Sound.activePlugin.dynamicsCompressorNode.\n     * @property dynamicsCompressorNode\n     * @type {AudioNode}\n     */\n    this.dynamicsCompressorNode = this.context.createDynamicsCompressor();\n    this.dynamicsCompressorNode.connect(this.context.destination);\n\n    /**\n     * A GainNode for controlling master volume. It is connected to {{#crossLink \"WebAudioPlugin/dynamicsCompressorNode:property\"}}{{/crossLink}}.\n     *\n     * Can be accessed by advanced users through createjs.Sound.activePlugin.gainNode.\n     * @property gainNode\n     * @type {AudioGainNode}\n     */\n    this.gainNode = this.context.createGain();\n    this.gainNode.connect(this.dynamicsCompressorNode);\n    createjs.WebAudioSoundInstance.destinationNode = this.gainNode;\n    this._capabilities = s._capabilities;\n    this._loaderClass = createjs.WebAudioLoader;\n    this._soundInstanceClass = createjs.WebAudioSoundInstance;\n    this._addPropsToClasses();\n  }\n  var p = createjs.extend(WebAudioPlugin, createjs.AbstractPlugin);\n\n  // TODO: deprecated\n  // p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\n\n  // Static Properties\n  var s = WebAudioPlugin;\n  /**\n   * The capabilities of the plugin. This is generated via the {{#crossLink \"WebAudioPlugin/_generateCapabilities:method\"}}{{/crossLink}}\n   * method and is used internally.\n   * @property _capabilities\n   * @type {Object}\n   * @default null\n   * @protected\n   * @static\n   */\n  s._capabilities = null;\n\n  /**\n   * Value to set panning model to equal power for WebAudioSoundInstance.  Can be \"equalpower\" or 0 depending on browser implementation.\n   * @property _panningModel\n   * @type {Number / String}\n   * @protected\n   * @static\n   */\n  s._panningModel = \"equalpower\";\n\n  /**\n   * The web audio context, which WebAudio uses to play audio. All nodes that interact with the WebAudioPlugin\n   * need to be created within this context.\n   *\n   * Advanced users can set this to an existing context, but <b>must</b> do so before they call\n   * {{#crossLink \"Sound/registerPlugins\"}}{{/crossLink}} or {{#crossLink \"Sound/initializeDefaultPlugins\"}}{{/crossLink}}.\n   *\n   * @property context\n   * @type {AudioContext}\n   * @static\n   */\n  s.context = null;\n\n  /**\n   * The scratch buffer that will be assigned to the buffer property of a source node on close.\n   * Works around an iOS Safari bug: https://github.com/CreateJS/SoundJS/issues/102\n   *\n   * Advanced users can set this to an existing source node, but <b>must</b> do so before they call\n   * {{#crossLink \"Sound/registerPlugins\"}}{{/crossLink}} or {{#crossLink \"Sound/initializeDefaultPlugins\"}}{{/crossLink}}.\n   *\n   * @property _scratchBuffer\n   * @type {AudioBuffer}\n   * @protected\n   * @static\n   */\n  s._scratchBuffer = null;\n\n  /**\n   * Indicated whether audio on iOS has been unlocked, which requires a touchend/mousedown event that plays an\n   * empty sound.\n   * @property _unlocked\n   * @type {boolean}\n   * @since 0.6.2\n   * @private\n   */\n  s._unlocked = false;\n\n  // Static Public Methods\n  /**\n   * Determine if the plugin can be used in the current browser/OS.\n   * @method isSupported\n   * @return {Boolean} If the plugin can be initialized.\n   * @static\n   */\n  s.isSupported = function () {\n    // check if this is some kind of mobile device, Web Audio works with local protocol under PhoneGap and it is unlikely someone is trying to run a local file\n    var isMobilePhoneGap = createjs.BrowserDetect.isIOS || createjs.BrowserDetect.isAndroid || createjs.BrowserDetect.isBlackberry;\n    // OJR isMobile may be redundant with _isFileXHRSupported available.  Consider removing.\n    if (location.protocol == \"file:\" && !isMobilePhoneGap && !this._isFileXHRSupported()) {\n      return false;\n    } // Web Audio requires XHR, which is not usually available locally\n    s._generateCapabilities();\n    if (s.context == null) {\n      return false;\n    }\n    return true;\n  };\n\n  /**\n   * Plays an empty sound in the web audio context.  This is used to enable web audio on iOS devices, as they\n   * require the first sound to be played inside of a user initiated event (touch/click).  This is called when\n   * {{#crossLink \"WebAudioPlugin\"}}{{/crossLink}} is initialized (by Sound {{#crossLink \"Sound/initializeDefaultPlugins\"}}{{/crossLink}}\n   * for example).\n   *\n   * <h4>Example</h4>\n   *\n   *     function handleTouch(event) {\n   *         createjs.WebAudioPlugin.playEmptySound();\n   *     }\n   *\n   * @method playEmptySound\n   * @static\n   * @since 0.4.1\n   */\n  s.playEmptySound = function () {\n    if (s.context == null) {\n      return;\n    }\n    var source = s.context.createBufferSource();\n    source.buffer = s._scratchBuffer;\n    source.connect(s.context.destination);\n    source.start(0, 0, 0);\n  };\n\n  // Static Private Methods\n  /**\n   * Determine if XHR is supported, which is necessary for web audio.\n   * @method _isFileXHRSupported\n   * @return {Boolean} If XHR is supported.\n   * @since 0.4.2\n   * @protected\n   * @static\n   */\n  s._isFileXHRSupported = function () {\n    // it's much easier to detect when something goes wrong, so let's start optimistically\n    var supported = true;\n    var xhr = new XMLHttpRequest();\n    try {\n      xhr.open(\"GET\", \"WebAudioPluginTest.fail\", false); // loading non-existant file triggers 404 only if it could load (synchronous call)\n    } catch (error) {\n      // catch errors in cases where the onerror is passed by\n      supported = false;\n      return supported;\n    }\n    xhr.onerror = function () {\n      supported = false;\n    }; // cause irrelevant\n    // with security turned off, we can get empty success results, which is actually a failed read (status code 0?)\n    xhr.onload = function () {\n      supported = this.status == 404 || this.status == 200 || this.status == 0 && this.response != \"\";\n    };\n    try {\n      xhr.send();\n    } catch (error) {\n      // catch errors in cases where the onerror is passed by\n      supported = false;\n    }\n    return supported;\n  };\n\n  /**\n   * Determine the capabilities of the plugin. Used internally. Please see the Sound API {{#crossLink \"Sound/getCapabilities\"}}{{/crossLink}}\n   * method for an overview of plugin capabilities.\n   * @method _generateCapabilities\n   * @static\n   * @protected\n   */\n  s._generateCapabilities = function () {\n    if (s._capabilities != null) {\n      return;\n    }\n    // Web Audio can be in any formats supported by the audio element, from http://www.w3.org/TR/webaudio/#AudioContext-section\n    var t = document.createElement(\"audio\");\n    if (t.canPlayType == null) {\n      return null;\n    }\n    if (s.context == null) {\n      if (window.AudioContext) {\n        s.context = new AudioContext();\n      } else if (window.webkitAudioContext) {\n        s.context = new webkitAudioContext();\n      } else {\n        return null;\n      }\n    }\n    if (s._scratchBuffer == null) {\n      s._scratchBuffer = s.context.createBuffer(1, 1, 22050);\n    }\n    s._compatibilitySetUp();\n\n    // Listen for document level clicks to unlock WebAudio on iOS. See the _unlock method.\n    if (\"ontouchstart\" in window && s.context.state != \"running\") {\n      s._unlock(); // When played inside of a touch event, this will enable audio on iOS immediately.\n      document.addEventListener(\"mousedown\", s._unlock, true);\n      document.addEventListener(\"touchend\", s._unlock, true);\n    }\n    s._capabilities = {\n      panning: true,\n      volume: true,\n      tracks: -1\n    };\n\n    // determine which extensions our browser supports for this plugin by iterating through Sound.SUPPORTED_EXTENSIONS\n    var supportedExtensions = createjs.Sound.SUPPORTED_EXTENSIONS;\n    var extensionMap = createjs.Sound.EXTENSION_MAP;\n    for (var i = 0, l = supportedExtensions.length; i < l; i++) {\n      var ext = supportedExtensions[i];\n      var playType = extensionMap[ext] || ext;\n      s._capabilities[ext] = t.canPlayType(\"audio/\" + ext) != \"no\" && t.canPlayType(\"audio/\" + ext) != \"\" || t.canPlayType(\"audio/\" + playType) != \"no\" && t.canPlayType(\"audio/\" + playType) != \"\";\n    } // OJR another way to do this might be canPlayType:\"m4a\", codex: mp4\n\n    // 0=no output, 1=mono, 2=stereo, 4=surround, 6=5.1 surround.\n    // See http://www.w3.org/TR/webaudio/#AudioChannelSplitter for more details on channels.\n    if (s.context.destination.numberOfChannels < 2) {\n      s._capabilities.panning = false;\n    }\n  };\n\n  /**\n   * Set up compatibility if only deprecated web audio calls are supported.\n   * See http://www.w3.org/TR/webaudio/#DeprecationNotes\n   * Needed so we can support new browsers that don't support deprecated calls (Firefox) as well as old browsers that\n   * don't support new calls.\n   *\n   * @method _compatibilitySetUp\n   * @static\n   * @protected\n   * @since 0.4.2\n   */\n  s._compatibilitySetUp = function () {\n    s._panningModel = \"equalpower\";\n    //assume that if one new call is supported, they all are\n    if (s.context.createGain) {\n      return;\n    }\n\n    // simple name change, functionality the same\n    s.context.createGain = s.context.createGainNode;\n\n    // source node, add to prototype\n    var audioNode = s.context.createBufferSource();\n    audioNode.__proto__.start = audioNode.__proto__.noteGrainOn; // note that noteGrainOn requires all 3 parameters\n    audioNode.__proto__.stop = audioNode.__proto__.noteOff;\n\n    // panningModel\n    s._panningModel = 0;\n  };\n\n  /**\n   * Try to unlock audio on iOS. This is triggered from either WebAudio plugin setup (which will work if inside of\n   * a `mousedown` or `touchend` event stack), or the first document touchend/mousedown event. If it fails (touchend\n   * will fail if the user presses for too long, indicating a scroll event instead of a click event.\n   *\n   * Note that earlier versions of iOS supported `touchstart` for this, but iOS9 removed this functionality. Adding\n   * a `touchstart` event to support older platforms may preclude a `mousedown` even from getting fired on iOS9, so we\n   * stick with `mousedown` and `touchend`.\n   * @method _unlock\n   * @since 0.6.2\n   * @private\n   */\n  s._unlock = function () {\n    if (s._unlocked) {\n      return;\n    }\n    s.playEmptySound();\n    if (s.context.state == \"running\") {\n      document.removeEventListener(\"mousedown\", s._unlock, true);\n      document.removeEventListener(\"touchend\", s._unlock, true);\n      s._unlocked = true;\n    }\n  };\n\n  // Public Methods\n  p.toString = function () {\n    return \"[WebAudioPlugin]\";\n  };\n\n  // Private Methods\n  /**\n   * Set up needed properties on supported classes WebAudioSoundInstance and WebAudioLoader.\n   * @method _addPropsToClasses\n   * @static\n   * @protected\n   * @since 0.6.0\n   */\n  p._addPropsToClasses = function () {\n    var c = this._soundInstanceClass;\n    c.context = this.context;\n    c._scratchBuffer = s._scratchBuffer;\n    c.destinationNode = this.gainNode;\n    c._panningModel = this._panningModel;\n    this._loaderClass.context = this.context;\n  };\n\n  /**\n   * Set the gain value for master audio. Should not be called externally.\n   * @method _updateVolume\n   * @protected\n   */\n  p._updateVolume = function () {\n    var newVolume = createjs.Sound._masterMute ? 0 : this._volume;\n    if (newVolume != this.gainNode.gain.value) {\n      this.gainNode.gain.value = newVolume;\n    }\n  };\n  createjs.WebAudioPlugin = createjs.promote(WebAudioPlugin, \"AbstractPlugin\");\n})();\n\n//##############################################################################\n// HTMLAudioTagPool.js\n//##############################################################################\n\n(function () {\n  \"use strict\";\n\n  /**\n   * HTMLAudioTagPool is an object pool for HTMLAudio tag instances.\n   * @class HTMLAudioTagPool\n   * @param {String} src The source of the channel.\n   * @protected\n   */\n  function HTMLAudioTagPool() {\n    throw \"HTMLAudioTagPool cannot be instantiated\";\n  }\n  var s = HTMLAudioTagPool;\n\n  // Static Properties\n  /**\n   * A hash lookup of each base audio tag, indexed by the audio source.\n   * @property _tags\n   * @type {{}}\n   * @static\n   * @protected\n   */\n  s._tags = {};\n\n  /**\n   * An object pool for html audio tags\n   * @property _tagPool\n   * @type {TagPool}\n   * @static\n   * @protected\n   */\n  s._tagPool = new TagPool();\n\n  /**\n   * A hash lookup of if a base audio tag is available, indexed by the audio source\n   * @property _tagsUsed\n   * @type {{}}\n   * @protected\n   * @static\n   */\n  s._tagUsed = {};\n\n  // Static Methods\n  /**\n    * Get an audio tag with the given source.\n    * @method get\n    * @param {String} src The source file used by the audio tag.\n    * @static\n    */\n  s.get = function (src) {\n    var t = s._tags[src];\n    if (t == null) {\n      // create new base tag\n      t = s._tags[src] = s._tagPool.get();\n      t.src = src;\n    } else {\n      // get base or pool\n      if (s._tagUsed[src]) {\n        t = s._tagPool.get();\n        t.src = src;\n      } else {\n        s._tagUsed[src] = true;\n      }\n    }\n    return t;\n  };\n\n  /**\n   * Return an audio tag to the pool.\n   * @method set\n   * @param {String} src The source file used by the audio tag.\n   * @param {HTMLElement} tag Audio tag to set.\n   * @static\n   */\n  s.set = function (src, tag) {\n    // check if this is base, if yes set boolean if not return to pool\n    if (tag == s._tags[src]) {\n      s._tagUsed[src] = false;\n    } else {\n      s._tagPool.set(tag);\n    }\n  };\n\n  /**\n   * Delete stored tag reference and return them to pool. Note that if the tag reference does not exist, this will fail.\n   * @method remove\n   * @param {String} src The source for the tag\n   * @return {Boolean} If the TagPool was deleted.\n   * @static\n   */\n  s.remove = function (src) {\n    var tag = s._tags[src];\n    if (tag == null) {\n      return false;\n    }\n    s._tagPool.set(tag);\n    delete s._tags[src];\n    delete s._tagUsed[src];\n    return true;\n  };\n\n  /**\n   * Gets the duration of the src audio in milliseconds\n   * @method getDuration\n   * @param {String} src The source file used by the audio tag.\n   * @return {Number} Duration of src in milliseconds\n   * @static\n   */\n  s.getDuration = function (src) {\n    var t = s._tags[src];\n    if (t == null || !t.duration) {\n      return 0;\n    } // OJR duration is NaN if loading has not completed\n    return t.duration * 1000;\n  };\n  createjs.HTMLAudioTagPool = HTMLAudioTagPool;\n\n  // ************************************************************************************************************\n  /**\n   * The TagPool is an object pool for HTMLAudio tag instances.\n   * #class TagPool\n   * @param {String} src The source of the channel.\n   * @protected\n   */\n  function TagPool(src) {\n    // Public Properties\n    /**\n     * A list of all available tags in the pool.\n     * #property tags\n     * @type {Array}\n     * @protected\n     */\n    this._tags = [];\n  }\n  ;\n  var p = TagPool.prototype;\n  p.constructor = TagPool;\n\n  // Public Methods\n  /**\n   * Get an HTMLAudioElement for immediate playback. This takes it out of the pool.\n   * #method get\n   * @return {HTMLAudioElement} An HTML audio tag.\n   */\n  p.get = function () {\n    var tag;\n    if (this._tags.length == 0) {\n      tag = this._createTag();\n    } else {\n      tag = this._tags.pop();\n    }\n    if (tag.parentNode == null) {\n      document.body.appendChild(tag);\n    }\n    return tag;\n  };\n\n  /**\n   * Put an HTMLAudioElement back in the pool for use.\n   * #method set\n   * @param {HTMLAudioElement} tag HTML audio tag\n   */\n  p.set = function (tag) {\n    // OJR this first step seems unnecessary\n    var index = createjs.indexOf(this._tags, tag);\n    if (index == -1) {\n      this._tags.src = null;\n      this._tags.push(tag);\n    }\n  };\n  p.toString = function () {\n    return \"[TagPool]\";\n  };\n\n  // Private Methods\n  /**\n   * Create an HTML audio tag.\n   * #method _createTag\n   * @param {String} src The source file to set for the audio tag.\n   * @return {HTMLElement} Returns an HTML audio tag.\n   * @protected\n   */\n  p._createTag = function () {\n    var tag = document.createElement(\"audio\");\n    tag.autoplay = false;\n    tag.preload = \"none\";\n    //LM: Firefox fails when this the preload=\"none\" for other tags, but it needs to be \"none\" to ensure PreloadJS works.\n    return tag;\n  };\n})();\n\n//##############################################################################\n// HTMLAudioSoundInstance.js\n//##############################################################################\n\n(function () {\n  \"use strict\";\n\n  /**\n   * HTMLAudioSoundInstance extends the base api of {{#crossLink \"AbstractSoundInstance\"}}{{/crossLink}} and is used by\n   * {{#crossLink \"HTMLAudioPlugin\"}}{{/crossLink}}.\n   *\n   * @param {String} src The path to and file name of the sound.\n   * @param {Number} startTime Audio sprite property used to apply an offset, in milliseconds.\n   * @param {Number} duration Audio sprite property used to set the time the clip plays for, in milliseconds.\n   * @param {Object} playbackResource Any resource needed by plugin to support audio playback.\n   * @class HTMLAudioSoundInstance\n   * @extends AbstractSoundInstance\n   * @constructor\n   */\n  function HTMLAudioSoundInstance(src, startTime, duration, playbackResource) {\n    this.AbstractSoundInstance_constructor(src, startTime, duration, playbackResource);\n\n    // Private Properties\n    this._audioSpriteStopTime = null;\n    this._delayTimeoutId = null;\n\n    // Proxies, make removing listeners easier.\n    this._endedHandler = createjs.proxy(this._handleSoundComplete, this);\n    this._readyHandler = createjs.proxy(this._handleTagReady, this);\n    this._stalledHandler = createjs.proxy(this._playFailed, this);\n    this._audioSpriteEndHandler = createjs.proxy(this._handleAudioSpriteLoop, this);\n    this._loopHandler = createjs.proxy(this._handleSoundComplete, this);\n    if (duration) {\n      this._audioSpriteStopTime = (startTime + duration) * 0.001;\n    } else {\n      this._duration = createjs.HTMLAudioTagPool.getDuration(this.src);\n    }\n  }\n  var p = createjs.extend(HTMLAudioSoundInstance, createjs.AbstractSoundInstance);\n\n  // TODO: deprecated\n  // p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\n\n  // Public Methods\n  /**\n   * Called by {{#crossLink \"Sound\"}}{{/crossLink}} when plugin does not handle master volume.\n   * undoc'd because it is not meant to be used outside of Sound\n   * #method setMasterVolume\n   * @param value\n   */\n  p.setMasterVolume = function (value) {\n    this._updateVolume();\n  };\n\n  /**\n   * Called by {{#crossLink \"Sound\"}}{{/crossLink}} when plugin does not handle master mute.\n   * undoc'd because it is not meant to be used outside of Sound\n   * #method setMasterMute\n   * @param value\n   */\n  p.setMasterMute = function (isMuted) {\n    this._updateVolume();\n  };\n  p.toString = function () {\n    return \"[HTMLAudioSoundInstance]\";\n  };\n\n  //Private Methods\n  p._removeLooping = function () {\n    if (this._playbackResource == null) {\n      return;\n    }\n    this._playbackResource.loop = false;\n    this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED, this._loopHandler, false);\n  };\n  p._addLooping = function () {\n    if (this._playbackResource == null || this._audioSpriteStopTime) {\n      return;\n    }\n    this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED, this._loopHandler, false);\n    this._playbackResource.loop = true;\n  };\n  p._handleCleanUp = function () {\n    var tag = this._playbackResource;\n    if (tag != null) {\n      tag.pause();\n      tag.loop = false;\n      tag.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED, this._endedHandler, false);\n      tag.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_READY, this._readyHandler, false);\n      tag.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_STALLED, this._stalledHandler, false);\n      tag.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED, this._loopHandler, false);\n      tag.removeEventListener(createjs.HTMLAudioPlugin._TIME_UPDATE, this._audioSpriteEndHandler, false);\n      try {\n        tag.currentTime = this._startTime;\n      } catch (e) {} // Reset Position\n      createjs.HTMLAudioTagPool.set(this.src, tag);\n      this._playbackResource = null;\n    }\n  };\n  p._beginPlaying = function (playProps) {\n    this._playbackResource = createjs.HTMLAudioTagPool.get(this.src);\n    return this.AbstractSoundInstance__beginPlaying(playProps);\n  };\n  p._handleSoundReady = function (event) {\n    if (this._playbackResource.readyState !== 4) {\n      var tag = this._playbackResource;\n      tag.addEventListener(createjs.HTMLAudioPlugin._AUDIO_READY, this._readyHandler, false);\n      tag.addEventListener(createjs.HTMLAudioPlugin._AUDIO_STALLED, this._stalledHandler, false);\n      tag.preload = \"auto\"; // This is necessary for Firefox, as it won't ever \"load\" until this is set.\n      tag.load();\n      return;\n    }\n    this._updateVolume();\n    this._playbackResource.currentTime = (this._startTime + this._position) * 0.001;\n    if (this._audioSpriteStopTime) {\n      this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._TIME_UPDATE, this._audioSpriteEndHandler, false);\n    } else {\n      this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED, this._endedHandler, false);\n      if (this._loop != 0) {\n        this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED, this._loopHandler, false);\n        this._playbackResource.loop = true;\n      }\n    }\n    this._playbackResource.play();\n  };\n\n  /**\n   * Used to handle when a tag is not ready for immediate playback when it is returned from the HTMLAudioTagPool.\n   * @method _handleTagReady\n   * @param event\n   * @protected\n   */\n  p._handleTagReady = function (event) {\n    this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_READY, this._readyHandler, false);\n    this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_STALLED, this._stalledHandler, false);\n    this._handleSoundReady();\n  };\n  p._pause = function () {\n    this._playbackResource.pause();\n  };\n  p._resume = function () {\n    this._playbackResource.play();\n  };\n  p._updateVolume = function () {\n    if (this._playbackResource != null) {\n      var newVolume = this._muted || createjs.Sound._masterMute ? 0 : this._volume * createjs.Sound._masterVolume;\n      if (newVolume != this._playbackResource.volume) {\n        this._playbackResource.volume = newVolume;\n      }\n    }\n  };\n  p._calculateCurrentPosition = function () {\n    return this._playbackResource.currentTime * 1000 - this._startTime;\n  };\n  p._updatePosition = function () {\n    this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED, this._loopHandler, false);\n    this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED, this._handleSetPositionSeek, false);\n    try {\n      this._playbackResource.currentTime = (this._position + this._startTime) * 0.001;\n    } catch (error) {\n      // Out of range\n      this._handleSetPositionSeek(null);\n    }\n  };\n\n  /**\n   * Used to enable setting position, as we need to wait for that seek to be done before we add back our loop handling seek listener\n   * @method _handleSetPositionSeek\n   * @param event\n   * @protected\n   */\n  p._handleSetPositionSeek = function (event) {\n    if (this._playbackResource == null) {\n      return;\n    }\n    this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED, this._handleSetPositionSeek, false);\n    this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED, this._loopHandler, false);\n  };\n\n  /**\n   * Timer used to loop audio sprites.\n   * NOTE because of the inaccuracies in the timeupdate event (15 - 250ms) and in setting the tag to the desired timed\n   * (up to 300ms), it is strongly recommended not to loop audio sprites with HTML Audio if smooth looping is desired\n   *\n   * @method _handleAudioSpriteLoop\n   * @param event\n   * @private\n   */\n  p._handleAudioSpriteLoop = function (event) {\n    if (this._playbackResource.currentTime <= this._audioSpriteStopTime) {\n      return;\n    }\n    this._playbackResource.pause();\n    if (this._loop == 0) {\n      this._handleSoundComplete(null);\n    } else {\n      this._position = 0;\n      this._loop--;\n      this._playbackResource.currentTime = this._startTime * 0.001;\n      if (!this._paused) {\n        this._playbackResource.play();\n      }\n      this._sendEvent(\"loop\");\n    }\n  };\n\n  // NOTE with this approach audio will loop as reliably as the browser allows\n  // but we could end up sending the loop event after next loop playback begins\n  p._handleLoop = function (event) {\n    if (this._loop == 0) {\n      this._playbackResource.loop = false;\n      this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED, this._loopHandler, false);\n    }\n  };\n  p._updateStartTime = function () {\n    this._audioSpriteStopTime = (this._startTime + this._duration) * 0.001;\n    if (this.playState == createjs.Sound.PLAY_SUCCEEDED) {\n      this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED, this._endedHandler, false);\n      this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._TIME_UPDATE, this._audioSpriteEndHandler, false);\n    }\n  };\n  p._updateDuration = function () {\n    this._audioSpriteStopTime = (this._startTime + this._duration) * 0.001;\n    if (this.playState == createjs.Sound.PLAY_SUCCEEDED) {\n      this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED, this._endedHandler, false);\n      this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._TIME_UPDATE, this._audioSpriteEndHandler, false);\n    }\n  };\n  p._setDurationFromSource = function () {\n    this._duration = createjs.HTMLAudioTagPool.getDuration(this.src);\n    this._playbackResource = null;\n  };\n  createjs.HTMLAudioSoundInstance = createjs.promote(HTMLAudioSoundInstance, \"AbstractSoundInstance\");\n})();\n\n//##############################################################################\n// HTMLAudioPlugin.js\n//##############################################################################\n\n(function () {\n  \"use strict\";\n\n  /**\n   * Play sounds using HTML &lt;audio&gt; tags in the browser. This plugin is the second priority plugin installed\n   * by default, after the {{#crossLink \"WebAudioPlugin\"}}{{/crossLink}}.  For older browsers that do not support html\n   * audio, include and install the {{#crossLink \"FlashAudioPlugin\"}}{{/crossLink}}.\n   *\n   * <h4>Known Browser and OS issues for HTML Audio</h4>\n   * <b>All browsers</b><br />\n   * Testing has shown in all browsers there is a limit to how many audio tag instances you are allowed.  If you exceed\n   * this limit, you can expect to see unpredictable results. Please use {{#crossLink \"Sound.MAX_INSTANCES\"}}{{/crossLink}} as\n   * a guide to how many total audio tags you can safely use in all browsers.  This issue is primarily limited to IE9.\n   *\n      * <b>IE html limitations</b><br />\n      * <ul><li>There is a delay in applying volume changes to tags that occurs once playback is started. So if you have\n      * muted all sounds, they will all play during this delay until the mute applies internally. This happens regardless of\n      * when or how you apply the volume change, as the tag seems to need to play to apply it.</li>\n      * <li>MP3 encoding will not always work for audio tags if it's not default.  We've found default encoding with\n      * 64kbps works.</li>\n   * <li>Occasionally very short samples will get cut off.</li>\n   * <li>There is a limit to how many audio tags you can load or play at once, which appears to be determined by\n   * hardware and browser settings.  See {{#crossLink \"HTMLAudioPlugin.MAX_INSTANCES\"}}{{/crossLink}} for a safe estimate.\n   * Note that audio sprites can be used as a solution to this issue.</li></ul>\n   *\n   * <b>Safari limitations</b><br />\n   * <ul><li>Safari requires Quicktime to be installed for audio playback.</li></ul>\n   *\n   * <b>iOS 6 limitations</b><br />\n   * <ul><li>can only have one &lt;audio&gt; tag</li>\n   * \t\t<li>can not preload or autoplay the audio</li>\n   * \t\t<li>can not cache the audio</li>\n   * \t\t<li>can not play the audio except inside a user initiated event.</li>\n   *\t\t<li>Note it is recommended to use {{#crossLink \"WebAudioPlugin\"}}{{/crossLink}} for iOS (6+)</li>\n   * \t\t<li>audio sprites can be used to mitigate some of these issues and are strongly recommended on iOS</li>\n   * </ul>\n   *\n   * <b>Android Native Browser limitations</b><br />\n   * <ul><li>We have no control over audio volume. Only the user can set volume on their device.</li>\n   *      <li>We can only play audio inside a user event (touch/click).  This currently means you cannot loop sound or use a delay.</li></ul>\n   * <b> Android Chrome 26.0.1410.58 specific limitations</b><br />\n   * <ul> <li>Can only play 1 sound at a time.</li>\n   *      <li>Sound is not cached.</li>\n   *      <li>Sound can only be loaded in a user initiated touch/click event.</li>\n   *      <li>There is a delay before a sound is played, presumably while the src is loaded.</li>\n   * </ul>\n   *\n   * See {{#crossLink \"Sound\"}}{{/crossLink}} for general notes on known issues.\n   *\n   * @class HTMLAudioPlugin\n   * @extends AbstractPlugin\n   * @constructor\n   */\n  function HTMLAudioPlugin() {\n    this.AbstractPlugin_constructor();\n\n    // Public Properties\n    /**\n     * This is no longer needed as we are now using object pooling for tags.\n     *\n     * <b>NOTE this property only exists as a limitation of HTML audio.</b>\n     * @property defaultNumChannels\n     * @type {Number}\n     * @default 2\n     * @since 0.4.0\n     * @deprecated\n     */\n    this.defaultNumChannels = 2;\n    this._capabilities = s._capabilities;\n    this._loaderClass = createjs.SoundLoader;\n    this._soundInstanceClass = createjs.HTMLAudioSoundInstance;\n  }\n  var p = createjs.extend(HTMLAudioPlugin, createjs.AbstractPlugin);\n  var s = HTMLAudioPlugin;\n\n  // TODO: deprecated\n  // p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\n\n  // Static Properties\n  /**\n   * The maximum number of instances that can be loaded or played. This is a browser limitation, primarily limited to IE9.\n   * The actual number varies from browser to browser (and is largely hardware dependant), but this is a safe estimate.\n   * Audio sprites work around this limitation.\n   * @property MAX_INSTANCES\n   * @type {Number}\n   * @default 30\n   * @static\n   */\n  s.MAX_INSTANCES = 30;\n\n  /**\n   * Event constant for the \"canPlayThrough\" event for cleaner code.\n   * @property _AUDIO_READY\n   * @type {String}\n   * @default canplaythrough\n   * @static\n   * @protected\n   */\n  s._AUDIO_READY = \"canplaythrough\";\n\n  /**\n   * Event constant for the \"ended\" event for cleaner code.\n   * @property _AUDIO_ENDED\n   * @type {String}\n   * @default ended\n   * @static\n   * @protected\n   */\n  s._AUDIO_ENDED = \"ended\";\n\n  /**\n   * Event constant for the \"seeked\" event for cleaner code.  We utilize this event for maintaining loop events.\n   * @property _AUDIO_SEEKED\n   * @type {String}\n   * @default seeked\n   * @static\n   * @protected\n   */\n  s._AUDIO_SEEKED = \"seeked\";\n\n  /**\n   * Event constant for the \"stalled\" event for cleaner code.\n   * @property _AUDIO_STALLED\n   * @type {String}\n   * @default stalled\n   * @static\n   * @protected\n   */\n  s._AUDIO_STALLED = \"stalled\";\n\n  /**\n   * Event constant for the \"timeupdate\" event for cleaner code.  Utilized for looping audio sprites.\n   * This event callsback ever 15 to 250ms and can be dropped by the browser for performance.\n   * @property _TIME_UPDATE\n   * @type {String}\n   * @default timeupdate\n   * @static\n   * @protected\n   */\n  s._TIME_UPDATE = \"timeupdate\";\n\n  /**\n   * The capabilities of the plugin. This is generated via the {{#crossLink \"HTMLAudioPlugin/_generateCapabilities\"}}{{/crossLink}}\n   * method. Please see the Sound {{#crossLink \"Sound/getCapabilities\"}}{{/crossLink}} method for an overview of all\n   * of the available properties.\n   * @property _capabilities\n   * @type {Object}\n   * @protected\n   * @static\n   */\n  s._capabilities = null;\n\n  // Static Methods\n  /**\n   * Determine if the plugin can be used in the current browser/OS. Note that HTML audio is available in most modern\n   * browsers, but is disabled in iOS because of its limitations.\n   * @method isSupported\n   * @return {Boolean} If the plugin can be initialized.\n   * @static\n   */\n  s.isSupported = function () {\n    s._generateCapabilities();\n    return s._capabilities != null;\n  };\n\n  /**\n   * Determine the capabilities of the plugin. Used internally. Please see the Sound API {{#crossLink \"Sound/getCapabilities\"}}{{/crossLink}}\n   * method for an overview of plugin capabilities.\n   * @method _generateCapabilities\n   * @static\n   * @protected\n   */\n  s._generateCapabilities = function () {\n    if (s._capabilities != null) {\n      return;\n    }\n    var t = document.createElement(\"audio\");\n    if (t.canPlayType == null) {\n      return null;\n    }\n    s._capabilities = {\n      panning: false,\n      volume: true,\n      tracks: -1\n    };\n\n    // determine which extensions our browser supports for this plugin by iterating through Sound.SUPPORTED_EXTENSIONS\n    var supportedExtensions = createjs.Sound.SUPPORTED_EXTENSIONS;\n    var extensionMap = createjs.Sound.EXTENSION_MAP;\n    for (var i = 0, l = supportedExtensions.length; i < l; i++) {\n      var ext = supportedExtensions[i];\n      var playType = extensionMap[ext] || ext;\n      s._capabilities[ext] = t.canPlayType(\"audio/\" + ext) != \"no\" && t.canPlayType(\"audio/\" + ext) != \"\" || t.canPlayType(\"audio/\" + playType) != \"no\" && t.canPlayType(\"audio/\" + playType) != \"\";\n    } // OJR another way to do this might be canPlayType:\"m4a\", codex: mp4\n  };\n\n  // public methods\n  p.register = function (loadItem) {\n    var tag = createjs.HTMLAudioTagPool.get(loadItem.src);\n    var loader = this.AbstractPlugin_register(loadItem);\n    loader.setTag(tag);\n    return loader;\n  };\n  p.removeSound = function (src) {\n    this.AbstractPlugin_removeSound(src);\n    createjs.HTMLAudioTagPool.remove(src);\n  };\n  p.create = function (src, startTime, duration) {\n    var si = this.AbstractPlugin_create(src, startTime, duration);\n    si.setPlaybackResource(null);\n    return si;\n  };\n  p.toString = function () {\n    return \"[HTMLAudioPlugin]\";\n  };\n\n  // plugin does not support these\n  p.setVolume = p.getVolume = p.setMute = null;\n  createjs.HTMLAudioPlugin = createjs.promote(HTMLAudioPlugin, \"AbstractPlugin\");\n})();\n\n//##############################################################################\n// Tween.js\n//##############################################################################\n\n// TODO: possibly add a END actionsMode (only runs actions that == position)?\n// TODO: evaluate a way to decouple paused from tick registration.\n\n(function () {\n  \"use strict\";\n\n  // constructor\n  /**\n   * A Tween instance tweens properties for a single target. Instance methods can be chained for easy construction and sequencing:\n   *\n   * <h4>Example</h4>\n   *\n   *      target.alpha = 1;\n   *\t    createjs.Tween.get(target)\n   *\t         .wait(500)\n   *\t         .to({alpha:0, visible:false}, 1000)\n   *\t         .call(handleComplete);\n   *\t    function handleComplete() {\n   *\t    \t//Tween complete\n   *\t    }\n   *\n   * Multiple tweens can point to the same instance, however if they affect the same properties there could be unexpected\n   * behaviour. To stop all tweens on an object, use {{#crossLink \"Tween/removeTweens\"}}{{/crossLink}} or pass `override:true`\n   * in the props argument.\n   *\n   *      createjs.Tween.get(target, {override:true}).to({x:100});\n   *\n   * Subscribe to the {{#crossLink \"Tween/change:event\"}}{{/crossLink}} event to get notified when a property of the\n   * target is changed.\n   *\n   *      createjs.Tween.get(target, {override:true}).to({x:100}).addEventListener(\"change\", handleChange);\n   *      function handleChange(event) {\n   *          // The tween changed.\n   *      }\n   *\n   * See the Tween {{#crossLink \"Tween/get\"}}{{/crossLink}} method for additional param documentation.\n   * @class Tween\n   * @param {Object} target The target object that will have its properties tweened.\n   * @param {Object} [props] The configuration properties to apply to this tween instance (ex. `{loop:true, paused:true}`.\n   * All properties default to false. Supported props are:<UL>\n   *    <LI> loop: sets the loop property on this tween.</LI>\n   *    <LI> useTicks: uses ticks for all durations instead of milliseconds.</LI>\n   *    <LI> ignoreGlobalPause: sets the {{#crossLink \"Tween/ignoreGlobalPause:property\"}}{{/crossLink}} property on this tween.</LI>\n   *    <LI> override: if true, `Tween.removeTweens(target)` will be called to remove any other tweens with the same target.\n   *    <LI> paused: indicates whether to start the tween paused.</LI>\n   *    <LI> position: indicates the initial position for this tween.</LI>\n   *    <LI> onChange: specifies a listener for the \"change\" event.</LI>\n   * </UL>\n   * @param {Object} [pluginData] An object containing data for use by installed plugins. See individual\n   * plugins' documentation for details.\n   * @extends EventDispatcher\n   * @constructor\n   */\n  function Tween(target, props, pluginData) {\n    // public properties:\n    /**\n     * Causes this tween to continue playing when a global pause is active. For example, if TweenJS is using {{#crossLink \"Ticker\"}}{{/crossLink}},\n     * then setting this to true (the default) will cause this tween to be paused when <code>Ticker.setPaused(true)</code>\n     * is called. See the Tween {{#crossLink \"Tween/tick\"}}{{/crossLink}} method for more info. Can be set via the props\n     * parameter.\n     * @property ignoreGlobalPause\n     * @type Boolean\n     * @default false\n     */\n    this.ignoreGlobalPause = false;\n\n    /**\n     * If true, the tween will loop when it reaches the end. Can be set via the props param.\n     * @property loop\n     * @type {Boolean}\n     * @default false\n     */\n    this.loop = false;\n\n    /**\n     * Specifies the total duration of this tween in milliseconds (or ticks if useTicks is true).\n     * This value is automatically updated as you modify the tween. Changing it directly could result in unexpected\n     * behaviour.\n     * @property duration\n     * @type {Number}\n     * @default 0\n     * @readonly\n     */\n    this.duration = 0;\n\n    /**\n     * Allows you to specify data that will be used by installed plugins. Each plugin uses this differently, but in general\n     * you specify data by setting it to a property of pluginData with the same name as the plugin class.\n     * @example\n     *\tmyTween.pluginData.PluginClassName = data;\n     * <br/>\n     * Also, most plugins support a property to enable or disable them. This is typically the plugin class name followed by \"_enabled\".<br/>\n     * @example\n     *\tmyTween.pluginData.PluginClassName_enabled = false;<br/>\n     * <br/>\n     * Some plugins also store instance data in this object, usually in a property named _PluginClassName.\n     * See the documentation for individual plugins for more details.\n     * @property pluginData\n     * @type {Object}\n     */\n    this.pluginData = pluginData || {};\n\n    /**\n     * The target of this tween. This is the object on which the tweened properties will be changed. Changing\n     * this property after the tween is created will not have any effect.\n     * @property target\n     * @type {Object}\n     * @readonly\n     */\n    this.target = target;\n\n    /**\n     * The current normalized position of the tween. This will always be a value between 0 and duration.\n     * Changing this property directly will have no effect.\n     * @property position\n     * @type {Object}\n     * @readonly\n     */\n    this.position = null;\n\n    /**\n     * Indicates the tween's current position is within a passive wait.\n     * @property passive\n     * @type {Boolean}\n     * @default false\n     * @readonly\n     **/\n    this.passive = false;\n\n    // private properties:\t\n    /**\n     * @property _paused\n     * @type {Boolean}\n     * @default false\n     * @protected\n     */\n    this._paused = false;\n\n    /**\n     * @property _curQueueProps\n     * @type {Object}\n     * @protected\n     */\n    this._curQueueProps = {};\n\n    /**\n     * @property _initQueueProps\n     * @type {Object}\n     * @protected\n     */\n    this._initQueueProps = {};\n\n    /**\n     * @property _steps\n     * @type {Array}\n     * @protected\n     */\n    this._steps = [];\n\n    /**\n     * @property _actions\n     * @type {Array}\n     * @protected\n     */\n    this._actions = [];\n\n    /**\n     * Raw position.\n     * @property _prevPosition\n     * @type {Number}\n     * @default 0\n     * @protected\n     */\n    this._prevPosition = 0;\n\n    /**\n     * The position within the current step.\n     * @property _stepPosition\n     * @type {Number}\n     * @default 0\n     * @protected\n     */\n    this._stepPosition = 0; // this is needed by MovieClip.\n\n    /**\n     * Normalized position.\n     * @property _prevPos\n     * @type {Number}\n     * @default -1\n     * @protected\n     */\n    this._prevPos = -1;\n\n    /**\n     * @property _target\n     * @type {Object}\n     * @protected\n     */\n    this._target = target;\n\n    /**\n     * @property _useTicks\n     * @type {Boolean}\n     * @default false\n     * @protected\n     */\n    this._useTicks = false;\n\n    /**\n     * @property _inited\n     * @type {boolean}\n     * @default false\n     * @protected\n     */\n    this._inited = false;\n\n    /**\n     * Indicates whether the tween is currently registered with Tween.\n     * @property _registered\n     * @type {boolean}\n     * @default false\n     * @protected\n     */\n    this._registered = false;\n    if (props) {\n      this._useTicks = props.useTicks;\n      this.ignoreGlobalPause = props.ignoreGlobalPause;\n      this.loop = props.loop;\n      props.onChange && this.addEventListener(\"change\", props.onChange);\n      if (props.override) {\n        Tween.removeTweens(target);\n      }\n    }\n    if (props && props.paused) {\n      this._paused = true;\n    } else {\n      createjs.Tween._register(this, true);\n    }\n    if (props && props.position != null) {\n      this.setPosition(props.position, Tween.NONE);\n    }\n  }\n  ;\n  var p = createjs.extend(Tween, createjs.EventDispatcher);\n\n  // TODO: deprecated\n  // p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\n\n  // static properties\n  /**\n   * Constant defining the none actionsMode for use with setPosition.\n   * @property NONE\n   * @type Number\n   * @default 0\n   * @static\n   */\n  Tween.NONE = 0;\n\n  /**\n   * Constant defining the loop actionsMode for use with setPosition.\n   * @property LOOP\n   * @type Number\n   * @default 1\n   * @static\n   */\n  Tween.LOOP = 1;\n\n  /**\n   * Constant defining the reverse actionsMode for use with setPosition.\n   * @property REVERSE\n   * @type Number\n   * @default 2\n   * @static\n   */\n  Tween.REVERSE = 2;\n\n  /**\n   * Constant returned by plugins to tell the tween not to use default assignment.\n   * @property IGNORE\n   * @type Object\n   * @static\n   */\n  Tween.IGNORE = {};\n\n  /**\n   * @property _listeners\n   * @type Array[Tween]\n   * @static\n   * @protected\n   */\n  Tween._tweens = [];\n\n  /**\n   * @property _plugins\n   * @type Object\n   * @static\n   * @protected\n   */\n  Tween._plugins = {};\n\n  // static methods\t\n  /**\n   * Returns a new tween instance. This is functionally identical to using \"new Tween(...)\", but looks cleaner\n   * with the chained syntax of TweenJS.\n   * <h4>Example</h4>\n   *\n   *\t\tvar tween = createjs.Tween.get(target);\n   *\n   * @method get\n   * @param {Object} target The target object that will have its properties tweened.\n   * @param {Object} [props] The configuration properties to apply to this tween instance (ex. `{loop:true, paused:true}`).\n   * All properties default to `false`. Supported props are:\n   * <UL>\n   *    <LI> loop: sets the loop property on this tween.</LI>\n   *    <LI> useTicks: uses ticks for all durations instead of milliseconds.</LI>\n   *    <LI> ignoreGlobalPause: sets the {{#crossLink \"Tween/ignoreGlobalPause:property\"}}{{/crossLink}} property on\n   *    this tween.</LI>\n   *    <LI> override: if true, `createjs.Tween.removeTweens(target)` will be called to remove any other tweens with\n   *    the same target.\n   *    <LI> paused: indicates whether to start the tween paused.</LI>\n   *    <LI> position: indicates the initial position for this tween.</LI>\n   *    <LI> onChange: specifies a listener for the {{#crossLink \"Tween/change:event\"}}{{/crossLink}} event.</LI>\n   * </UL>\n   * @param {Object} [pluginData] An object containing data for use by installed plugins. See individual plugins'\n   * documentation for details.\n   * @param {Boolean} [override=false] If true, any previous tweens on the same target will be removed. This is the\n   * same as calling `Tween.removeTweens(target)`.\n   * @return {Tween} A reference to the created tween. Additional chained tweens, method calls, or callbacks can be\n   * applied to the returned tween instance.\n   * @static\n   */\n  Tween.get = function (target, props, pluginData, override) {\n    if (override) {\n      Tween.removeTweens(target);\n    }\n    return new Tween(target, props, pluginData);\n  };\n\n  /**\n   * Advances all tweens. This typically uses the {{#crossLink \"Ticker\"}}{{/crossLink}} class, but you can call it\n   * manually if you prefer to use your own \"heartbeat\" implementation.\n   * @method tick\n   * @param {Number} delta The change in time in milliseconds since the last tick. Required unless all tweens have\n   * `useTicks` set to true.\n   * @param {Boolean} paused Indicates whether a global pause is in effect. Tweens with {{#crossLink \"Tween/ignoreGlobalPause:property\"}}{{/crossLink}}\n   * will ignore this, but all others will pause if this is `true`.\n   * @static\n   */\n  Tween.tick = function (delta, paused) {\n    var tweens = Tween._tweens.slice(); // to avoid race conditions.\n    for (var i = tweens.length - 1; i >= 0; i--) {\n      var tween = tweens[i];\n      if (paused && !tween.ignoreGlobalPause || tween._paused) {\n        continue;\n      }\n      tween.tick(tween._useTicks ? 1 : delta);\n    }\n  };\n\n  /**\n   * Handle events that result from Tween being used as an event handler. This is included to allow Tween to handle\n   * {{#crossLink \"Ticker/tick:event\"}}{{/crossLink}} events from the createjs {{#crossLink \"Ticker\"}}{{/crossLink}}.\n   * No other events are handled in Tween.\n   * @method handleEvent\n   * @param {Object} event An event object passed in by the {{#crossLink \"EventDispatcher\"}}{{/crossLink}}. Will\n   * usually be of type \"tick\".\n   * @private\n   * @static\n   * @since 0.4.2\n   */\n  Tween.handleEvent = function (event) {\n    if (event.type == \"tick\") {\n      this.tick(event.delta, event.paused);\n    }\n  };\n\n  /**\n   * Removes all existing tweens for a target. This is called automatically by new tweens if the `override`\n   * property is `true`.\n   * @method removeTweens\n   * @param {Object} target The target object to remove existing tweens from.\n   * @static\n   */\n  Tween.removeTweens = function (target) {\n    if (!target.tweenjs_count) {\n      return;\n    }\n    var tweens = Tween._tweens;\n    for (var i = tweens.length - 1; i >= 0; i--) {\n      var tween = tweens[i];\n      if (tween._target == target) {\n        tween._paused = true;\n        tweens.splice(i, 1);\n      }\n    }\n    target.tweenjs_count = 0;\n  };\n\n  /**\n   * Stop and remove all existing tweens.\n   * @method removeAllTweens\n   * @static\n   * @since 0.4.1\n   */\n  Tween.removeAllTweens = function () {\n    var tweens = Tween._tweens;\n    for (var i = 0, l = tweens.length; i < l; i++) {\n      var tween = tweens[i];\n      tween._paused = true;\n      tween.target && (tween.target.tweenjs_count = 0);\n    }\n    tweens.length = 0;\n  };\n\n  /**\n   * Indicates whether there are any active tweens (and how many) on the target object (if specified) or in general.\n   * @method hasActiveTweens\n   * @param {Object} [target] The target to check for active tweens. If not specified, the return value will indicate\n   * if there are any active tweens on any target.\n   * @return {Boolean} If there are active tweens.\n   * @static\n   */\n  Tween.hasActiveTweens = function (target) {\n    if (target) {\n      return target.tweenjs_count != null && !!target.tweenjs_count;\n    }\n    return Tween._tweens && !!Tween._tweens.length;\n  };\n\n  /**\n   * Installs a plugin, which can modify how certain properties are handled when tweened. See the {{#crossLink \"CSSPlugin\"}}{{/crossLink}}\n   * for an example of how to write TweenJS plugins.\n   * @method installPlugin\n   * @static\n   * @param {Object} plugin The plugin class to install\n   * @param {Array} properties An array of properties that the plugin will handle.\n   */\n  Tween.installPlugin = function (plugin, properties) {\n    var priority = plugin.priority;\n    if (priority == null) {\n      plugin.priority = priority = 0;\n    }\n    for (var i = 0, l = properties.length, p = Tween._plugins; i < l; i++) {\n      var n = properties[i];\n      if (!p[n]) {\n        p[n] = [plugin];\n      } else {\n        var arr = p[n];\n        for (var j = 0, jl = arr.length; j < jl; j++) {\n          if (priority < arr[j].priority) {\n            break;\n          }\n        }\n        p[n].splice(j, 0, plugin);\n      }\n    }\n  };\n\n  /**\n   * Registers or unregisters a tween with the ticking system.\n   * @method _register\n   * @param {Tween} tween The tween instance to register or unregister.\n   * @param {Boolean} value If `true`, the tween is registered. If `false` the tween is unregistered.\n   * @static\n   * @protected\n   */\n  Tween._register = function (tween, value) {\n    var target = tween._target;\n    var tweens = Tween._tweens;\n    if (value && !tween._registered) {\n      // TODO: this approach might fail if a dev is using sealed objects in ES5\n      if (target) {\n        target.tweenjs_count = target.tweenjs_count ? target.tweenjs_count + 1 : 1;\n      }\n      tweens.push(tween);\n      if (!Tween._inited && createjs.Ticker) {\n        createjs.Ticker.addEventListener(\"tick\", Tween);\n        Tween._inited = true;\n      }\n    } else if (!value && tween._registered) {\n      if (target) {\n        target.tweenjs_count--;\n      }\n      var i = tweens.length;\n      while (i--) {\n        if (tweens[i] == tween) {\n          tweens.splice(i, 1);\n          break;\n        }\n      }\n    }\n    tween._registered = value;\n  };\n\n  // events:\n  /**\n   * Called whenever the tween's position changes.\n   * @event change\n   * @since 0.4.0\n   **/\n\n  // public methods:\n  /**\n   * Queues a wait (essentially an empty tween).\n   * <h4>Example</h4>\n   *\n   *\t\t//This tween will wait 1s before alpha is faded to 0.\n   *\t\tcreatejs.Tween.get(target).wait(1000).to({alpha:0}, 1000);\n   *\n   * @method wait\n   * @param {Number} duration The duration of the wait in milliseconds (or in ticks if `useTicks` is true).\n   * @param {Boolean} [passive] Tween properties will not be updated during a passive wait. This\n   * is mostly useful for use with {{#crossLink \"Timeline\"}}{{/crossLink}} instances that contain multiple tweens\n   * affecting the same target at different times.\n   * @return {Tween} This tween instance (for chaining calls).\n   **/\n  p.wait = function (duration, passive) {\n    if (duration == null || duration <= 0) {\n      return this;\n    }\n    var o = this._cloneProps(this._curQueueProps);\n    return this._addStep({\n      d: duration,\n      p0: o,\n      e: this._linearEase,\n      p1: o,\n      v: passive\n    });\n  };\n\n  /**\n   * Queues a tween from the current values to the target properties. Set duration to 0 to jump to these value.\n   * Numeric properties will be tweened from their current value in the tween to the target value. Non-numeric\n   * properties will be set at the end of the specified duration.\n   * <h4>Example</h4>\n   *\n   *\t\tcreatejs.Tween.get(target).to({alpha:0}, 1000);\n   *\n   * @method to\n   * @param {Object} props An object specifying property target values for this tween (Ex. `{x:300}` would tween the x\n   * property of the target to 300).\n   * @param {Number} [duration=0] The duration of the wait in milliseconds (or in ticks if `useTicks` is true).\n   * @param {Function} [ease=\"linear\"] The easing function to use for this tween. See the {{#crossLink \"Ease\"}}{{/crossLink}}\n   * class for a list of built-in ease functions.\n   * @return {Tween} This tween instance (for chaining calls).\n   */\n  p.to = function (props, duration, ease) {\n    if (isNaN(duration) || duration < 0) {\n      duration = 0;\n    }\n    return this._addStep({\n      d: duration || 0,\n      p0: this._cloneProps(this._curQueueProps),\n      e: ease,\n      p1: this._cloneProps(this._appendQueueProps(props))\n    });\n  };\n\n  /**\n   * Queues an action to call the specified function.\n   * <h4>Example</h4>\n   *\n   *   \t//would call myFunction() after 1 second.\n   *   \tmyTween.wait(1000).call(myFunction);\n   *\n   * @method call\n   * @param {Function} callback The function to call.\n   * @param {Array} [params]. The parameters to call the function with. If this is omitted, then the function\n   *      will be called with a single param pointing to this tween.\n   * @param {Object} [scope]. The scope to call the function in. If omitted, it will be called in the target's\n   *      scope.\n   * @return {Tween} This tween instance (for chaining calls).\n   */\n  p.call = function (callback, params, scope) {\n    return this._addAction({\n      f: callback,\n      p: params ? params : [this],\n      o: scope ? scope : this._target\n    });\n  };\n\n  // TODO: add clarification between this and a 0 duration .to:\n  /**\n   * Queues an action to set the specified props on the specified target. If target is null, it will use this tween's\n   * target.\n   * <h4>Example</h4>\n   *\n   *\t\tmyTween.wait(1000).set({visible:false},foo);\n   *\n   * @method set\n   * @param {Object} props The properties to set (ex. `{visible:false}`).\n   * @param {Object} [target] The target to set the properties on. If omitted, they will be set on the tween's target.\n   * @return {Tween} This tween instance (for chaining calls).\n   */\n  p.set = function (props, target) {\n    return this._addAction({\n      f: this._set,\n      o: this,\n      p: [props, target ? target : this._target]\n    });\n  };\n\n  /**\n   * Queues an action to play (unpause) the specified tween. This enables you to sequence multiple tweens.\n   * <h4>Example</h4>\n   *\n   *\t\tmyTween.to({x:100},500).play(otherTween);\n   *\n   * @method play\n   * @param {Tween} tween The tween to play.\n   * @return {Tween} This tween instance (for chaining calls).\n   */\n  p.play = function (tween) {\n    if (!tween) {\n      tween = this;\n    }\n    return this.call(tween.setPaused, [false], tween);\n  };\n\n  /**\n   * Queues an action to pause the specified tween.\n   * @method pause\n   * @param {Tween} tween The tween to pause. If null, it pauses this tween.\n   * @return {Tween} This tween instance (for chaining calls)\n   */\n  p.pause = function (tween) {\n    if (!tween) {\n      tween = this;\n    }\n    return this.call(tween.setPaused, [true], tween);\n  };\n\n  /**\n   * Advances the tween to a specified position.\n   * @method setPosition\n   * @param {Number} value The position to seek to in milliseconds (or ticks if useTicks is true).\n   * @param {Number} [actionsMode=1] Specifies how actions are handled (ie. call, set, play, pause):\n   * <ul>\n   *      <li>{{#crossLink \"Tween/NONE:property\"}}{{/crossLink}} (0) - run no actions.</li>\n   *      <li>{{#crossLink \"Tween/LOOP:property\"}}{{/crossLink}} (1) - if new position is less than old, then run all\n   *      actions between old and duration, then all actions between 0 and new.</li>\n   *      <li>{{#crossLink \"Tween/REVERSE:property\"}}{{/crossLink}} (2) - if new position is less than old, run all\n   *      actions between them in reverse.</li>\n   * </ul>\n   * @return {Boolean} Returns `true` if the tween is complete (ie. the full tween has run & {{#crossLink \"Tween/loop:property\"}}{{/crossLink}}\n   * is `false`).\n   */\n  p.setPosition = function (value, actionsMode) {\n    if (value < 0) {\n      value = 0;\n    }\n    if (actionsMode == null) {\n      actionsMode = 1;\n    }\n\n    // normalize position:\n    var t = value;\n    var end = false;\n    if (t >= this.duration) {\n      if (this.loop) {\n        t = t % this.duration;\n      } else {\n        t = this.duration;\n        end = true;\n      }\n    }\n    if (t == this._prevPos) {\n      return end;\n    }\n    var prevPos = this._prevPos;\n    this.position = this._prevPos = t; // set this in advance in case an action modifies position.\n    this._prevPosition = value;\n\n    // handle tweens:\n    if (this._target) {\n      if (end) {\n        // addresses problems with an ending zero length step.\n        this._updateTargetProps(null, 1);\n      } else if (this._steps.length > 0) {\n        // find our new tween index:\n        for (var i = 0, l = this._steps.length; i < l; i++) {\n          if (this._steps[i].t > t) {\n            break;\n          }\n        }\n        var step = this._steps[i - 1];\n        this._updateTargetProps(step, (this._stepPosition = t - step.t) / step.d);\n      }\n    }\n\n    // run actions:\n    if (actionsMode != 0 && this._actions.length > 0) {\n      if (this._useTicks) {\n        // only run the actions we landed on.\n        this._runActions(t, t);\n      } else if (actionsMode == 1 && t < prevPos) {\n        if (prevPos != this.duration) {\n          this._runActions(prevPos, this.duration);\n        }\n        this._runActions(0, t, true);\n      } else {\n        this._runActions(prevPos, t);\n      }\n    }\n    if (end) {\n      this.setPaused(true);\n    }\n    this.dispatchEvent(\"change\");\n    return end;\n  };\n\n  /**\n   * Advances this tween by the specified amount of time in milliseconds (or ticks if`useTicks` is `true`).\n   * This is normally called automatically by the Tween engine (via {{#crossLink \"Tween/tick\"}}{{/crossLink}}), but is\n   * exposed for advanced uses.\n   * @method tick\n   * @param {Number} delta The time to advance in milliseconds (or ticks if `useTicks` is `true`).\n   */\n  p.tick = function (delta) {\n    if (this._paused) {\n      return;\n    }\n    this.setPosition(this._prevPosition + delta);\n  };\n\n  /**\n   * Pauses or plays this tween.\n   * @method setPaused\n   * @param {Boolean} [value=true] Indicates whether the tween should be paused (`true`) or played (`false`).\n   * @return {Tween} This tween instance (for chaining calls)\n   */\n  p.setPaused = function (value) {\n    if (this._paused === !!value) {\n      return this;\n    }\n    this._paused = !!value;\n    Tween._register(this, !value);\n    return this;\n  };\n\n  // tiny api (primarily for tool output):\n  p.w = p.wait;\n  p.t = p.to;\n  p.c = p.call;\n  p.s = p.set;\n\n  /**\n   * Returns a string representation of this object.\n   * @method toString\n   * @return {String} a string representation of the instance.\n   */\n  p.toString = function () {\n    return \"[Tween]\";\n  };\n\n  /**\n   * @method clone\n   * @protected\n   */\n  p.clone = function () {\n    throw \"Tween can not be cloned.\";\n  };\n\n  // private methods:\n  /**\n   * @method _updateTargetProps\n   * @param {Object} step\n   * @param {Number} ratio\n   * @protected\n   */\n  p._updateTargetProps = function (step, ratio) {\n    var p0, p1, v, v0, v1, arr;\n    if (!step && ratio == 1) {\n      // GDS: when does this run? Just at the very end? Shouldn't.\n      this.passive = false;\n      p0 = p1 = this._curQueueProps;\n    } else {\n      this.passive = !!step.v;\n      if (this.passive) {\n        return;\n      } // don't update props.\n      // apply ease to ratio.\n      if (step.e) {\n        ratio = step.e(ratio, 0, 1, 1);\n      }\n      p0 = step.p0;\n      p1 = step.p1;\n    }\n    for (var n in this._initQueueProps) {\n      if ((v0 = p0[n]) == null) {\n        p0[n] = v0 = this._initQueueProps[n];\n      }\n      if ((v1 = p1[n]) == null) {\n        p1[n] = v1 = v0;\n      }\n      if (v0 == v1 || ratio == 0 || ratio == 1 || typeof v0 != \"number\") {\n        // no interpolation - either at start, end, values don't change, or the value is non-numeric.\n        v = ratio == 1 ? v1 : v0;\n      } else {\n        v = v0 + (v1 - v0) * ratio;\n      }\n      var ignore = false;\n      if (arr = Tween._plugins[n]) {\n        for (var i = 0, l = arr.length; i < l; i++) {\n          var v2 = arr[i].tween(this, n, v, p0, p1, ratio, !!step && p0 == p1, !step);\n          if (v2 == Tween.IGNORE) {\n            ignore = true;\n          } else {\n            v = v2;\n          }\n        }\n      }\n      if (!ignore) {\n        this._target[n] = v;\n      }\n    }\n  };\n\n  /**\n   * @method _runActions\n   * @param {Number} startPos\n   * @param {Number} endPos\n   * @param {Boolean} includeStart\n   * @protected\n   */\n  p._runActions = function (startPos, endPos, includeStart) {\n    var sPos = startPos;\n    var ePos = endPos;\n    var i = -1;\n    var j = this._actions.length;\n    var k = 1;\n    if (startPos > endPos) {\n      // running backwards, flip everything:\n      sPos = endPos;\n      ePos = startPos;\n      i = j;\n      j = k = -1;\n    }\n    while ((i += k) != j) {\n      var action = this._actions[i];\n      var pos = action.t;\n      if (pos == ePos || pos > sPos && pos < ePos || includeStart && pos == startPos) {\n        action.f.apply(action.o, action.p);\n      }\n    }\n  };\n\n  /**\n   * @method _appendQueueProps\n   * @param {Object} o\n   * @protected\n   */\n  p._appendQueueProps = function (o) {\n    var arr, oldValue, i, l, injectProps;\n    for (var n in o) {\n      if (this._initQueueProps[n] === undefined) {\n        oldValue = this._target[n];\n\n        // init plugins:\n        if (arr = Tween._plugins[n]) {\n          for (i = 0, l = arr.length; i < l; i++) {\n            oldValue = arr[i].init(this, n, oldValue);\n          }\n        }\n        this._initQueueProps[n] = this._curQueueProps[n] = oldValue === undefined ? null : oldValue;\n      } else {\n        oldValue = this._curQueueProps[n];\n      }\n    }\n    for (var n in o) {\n      oldValue = this._curQueueProps[n];\n      if (arr = Tween._plugins[n]) {\n        injectProps = injectProps || {};\n        for (i = 0, l = arr.length; i < l; i++) {\n          // TODO: remove the check for .step in the next version. It's here for backwards compatibility.\n          if (arr[i].step) {\n            arr[i].step(this, n, oldValue, o[n], injectProps);\n          }\n        }\n      }\n      this._curQueueProps[n] = o[n];\n    }\n    if (injectProps) {\n      this._appendQueueProps(injectProps);\n    }\n    return this._curQueueProps;\n  };\n\n  /**\n   * @method _cloneProps\n   * @param {Object} props\n   * @protected\n   */\n  p._cloneProps = function (props) {\n    var o = {};\n    for (var n in props) {\n      o[n] = props[n];\n    }\n    return o;\n  };\n\n  /**\n   * @method _addStep\n   * @param {Object} o\n   * @protected\n   */\n  p._addStep = function (o) {\n    if (o.d > 0) {\n      this._steps.push(o);\n      o.t = this.duration;\n      this.duration += o.d;\n    }\n    return this;\n  };\n\n  /**\n   * @method _addAction\n   * @param {Object} o\n   * @protected\n   */\n  p._addAction = function (o) {\n    o.t = this.duration;\n    this._actions.push(o);\n    return this;\n  };\n\n  /**\n   * @method _set\n   * @param {Object} props\n   * @param {Object} o\n   * @protected\n   */\n  p._set = function (props, o) {\n    for (var n in props) {\n      o[n] = props[n];\n    }\n  };\n  createjs.Tween = createjs.promote(Tween, \"EventDispatcher\");\n})();\n\n//##############################################################################\n// Timeline.js\n//##############################################################################\n\n(function () {\n  \"use strict\";\n\n  // constructor\t\n  /**\n   * The Timeline class synchronizes multiple tweens and allows them to be controlled as a group. Please note that if a\n   * timeline is looping, the tweens on it may appear to loop even if the \"loop\" property of the tween is false.\n   * @class Timeline\n   * @param {Array} tweens An array of Tweens to add to this timeline. See {{#crossLink \"Timeline/addTween\"}}{{/crossLink}}\n   * for more info.\n   * @param {Object} labels An object defining labels for using {{#crossLink \"Timeline/gotoAndPlay\"}}{{/crossLink}}/{{#crossLink \"Timeline/gotoAndStop\"}}{{/crossLink}}.\n   * See {{#crossLink \"Timeline/setLabels\"}}{{/crossLink}}\n   * for details.\n   * @param {Object} props The configuration properties to apply to this tween instance (ex. `{loop:true}`). All properties\n   * default to false. Supported props are:<UL>\n   *    <LI> loop: sets the loop property on this tween.</LI>\n   *    <LI> useTicks: uses ticks for all durations instead of milliseconds.</LI>\n   *    <LI> ignoreGlobalPause: sets the ignoreGlobalPause property on this tween.</LI>\n   *    <LI> paused: indicates whether to start the tween paused.</LI>\n   *    <LI> position: indicates the initial position for this timeline.</LI>\n   *    <LI> onChange: specifies a listener to add for the {{#crossLink \"Timeline/change:event\"}}{{/crossLink}} event.</LI>\n   * </UL>\n   * @extends EventDispatcher\n   * @constructor\n   **/\n  function Timeline(tweens, labels, props) {\n    this.EventDispatcher_constructor();\n\n    // public properties:\n    /**\n     * Causes this timeline to continue playing when a global pause is active.\n     * @property ignoreGlobalPause\n     * @type Boolean\n     **/\n    this.ignoreGlobalPause = false;\n\n    /**\n     * The total duration of this timeline in milliseconds (or ticks if `useTicks `is `true`). This value is usually\n     * automatically updated as you modify the timeline. See {{#crossLink \"Timeline/updateDuration\"}}{{/crossLink}}\n     * for more information.\n     * @property duration\n     * @type Number\n     * @default 0\n     * @readonly\n     **/\n    this.duration = 0;\n\n    /**\n     * If true, the timeline will loop when it reaches the end. Can be set via the props param.\n     * @property loop\n     * @type Boolean\n     **/\n    this.loop = false;\n\n    /**\n     * The current normalized position of the timeline. This will always be a value between 0 and\n     * {{#crossLink \"Timeline/duration:property\"}}{{/crossLink}}.\n     * Changing this property directly will have no effect.\n     * @property position\n     * @type Object\n     * @readonly\n     **/\n    this.position = null;\n\n    // private properties:\n    /**\n     * @property _paused\n     * @type Boolean\n     * @protected\n     **/\n    this._paused = false;\n\n    /**\n     * @property _tweens\n     * @type Array[Tween]\n     * @protected\n     **/\n    this._tweens = [];\n\n    /**\n     * @property _labels\n     * @type Object\n     * @protected\n     **/\n    this._labels = null;\n\n    /**\n     * @property _labelList\n     * @type Array[Object]\n     * @protected\n     **/\n    this._labelList = null;\n\n    /**\n     * @property _prevPosition\n     * @type Number\n     * @default 0\n     * @protected\n     **/\n    this._prevPosition = 0;\n\n    /**\n     * @property _prevPos\n     * @type Number\n     * @default -1\n     * @protected\n     **/\n    this._prevPos = -1;\n\n    /**\n     * @property _useTicks\n     * @type Boolean\n     * @default false\n     * @protected\n     **/\n    this._useTicks = false;\n\n    /**\n     * Indicates whether the timeline is currently registered with Tween.\n     * @property _registered\n     * @type {boolean}\n     * @default false\n     * @protected\n     */\n    this._registered = false;\n    if (props) {\n      this._useTicks = props.useTicks;\n      this.loop = props.loop;\n      this.ignoreGlobalPause = props.ignoreGlobalPause;\n      props.onChange && this.addEventListener(\"change\", props.onChange);\n    }\n    if (tweens) {\n      this.addTween.apply(this, tweens);\n    }\n    this.setLabels(labels);\n    if (props && props.paused) {\n      this._paused = true;\n    } else {\n      createjs.Tween._register(this, true);\n    }\n    if (props && props.position != null) {\n      this.setPosition(props.position, createjs.Tween.NONE);\n    }\n  }\n  ;\n  var p = createjs.extend(Timeline, createjs.EventDispatcher);\n\n  // TODO: deprecated\n  // p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\n\n  // events:\n  /**\n   * Called whenever the timeline's position changes.\n   * @event change\n   * @since 0.5.0\n   **/\n\n  // public methods:\n  /**\n   * Adds one or more tweens (or timelines) to this timeline. The tweens will be paused (to remove them from the\n   * normal ticking system) and managed by this timeline. Adding a tween to multiple timelines will result in\n   * unexpected behaviour.\n   * @method addTween\n   * @param {Tween} ...tween The tween(s) to add. Accepts multiple arguments.\n   * @return {Tween} The first tween that was passed in.\n   **/\n  p.addTween = function (tween) {\n    var l = arguments.length;\n    if (l > 1) {\n      for (var i = 0; i < l; i++) {\n        this.addTween(arguments[i]);\n      }\n      return arguments[0];\n    } else if (l == 0) {\n      return null;\n    }\n    this.removeTween(tween);\n    this._tweens.push(tween);\n    tween.setPaused(true);\n    tween._paused = false;\n    tween._useTicks = this._useTicks;\n    if (tween.duration > this.duration) {\n      this.duration = tween.duration;\n    }\n    if (this._prevPos >= 0) {\n      tween.setPosition(this._prevPos, createjs.Tween.NONE);\n    }\n    return tween;\n  };\n\n  /**\n   * Removes one or more tweens from this timeline.\n   * @method removeTween\n   * @param {Tween} ...tween The tween(s) to remove. Accepts multiple arguments.\n   * @return Boolean Returns `true` if all of the tweens were successfully removed.\n   **/\n  p.removeTween = function (tween) {\n    var l = arguments.length;\n    if (l > 1) {\n      var good = true;\n      for (var i = 0; i < l; i++) {\n        good = good && this.removeTween(arguments[i]);\n      }\n      return good;\n    } else if (l == 0) {\n      return false;\n    }\n    var tweens = this._tweens;\n    var i = tweens.length;\n    while (i--) {\n      if (tweens[i] == tween) {\n        tweens.splice(i, 1);\n        if (tween.duration >= this.duration) {\n          this.updateDuration();\n        }\n        return true;\n      }\n    }\n    return false;\n  };\n\n  /**\n   * Adds a label that can be used with {{#crossLink \"Timeline/gotoAndPlay\"}}{{/crossLink}}/{{#crossLink \"Timeline/gotoAndStop\"}}{{/crossLink}}.\n   * @method addLabel\n   * @param {String} label The label name.\n   * @param {Number} position The position this label represents.\n   **/\n  p.addLabel = function (label, position) {\n    this._labels[label] = position;\n    var list = this._labelList;\n    if (list) {\n      for (var i = 0, l = list.length; i < l; i++) {\n        if (position < list[i].position) {\n          break;\n        }\n      }\n      list.splice(i, 0, {\n        label: label,\n        position: position\n      });\n    }\n  };\n\n  /**\n   * Defines labels for use with gotoAndPlay/Stop. Overwrites any previously set labels.\n   * @method setLabels\n   * @param {Object} o An object defining labels for using {{#crossLink \"Timeline/gotoAndPlay\"}}{{/crossLink}}/{{#crossLink \"Timeline/gotoAndStop\"}}{{/crossLink}}\n   * in the form `{labelName:time}` where time is in milliseconds (or ticks if `useTicks` is `true`).\n   **/\n  p.setLabels = function (o) {\n    this._labels = o ? o : {};\n  };\n\n  /**\n   * Returns a sorted list of the labels defined on this timeline.\n   * @method getLabels\n   * @return {Array[Object]} A sorted array of objects with label and position properties.\n   **/\n  p.getLabels = function () {\n    var list = this._labelList;\n    if (!list) {\n      list = this._labelList = [];\n      var labels = this._labels;\n      for (var n in labels) {\n        list.push({\n          label: n,\n          position: labels[n]\n        });\n      }\n      list.sort(function (a, b) {\n        return a.position - b.position;\n      });\n    }\n    return list;\n  };\n\n  /**\n   * Returns the name of the label on or immediately before the current position. For example, given a timeline with\n   * two labels, \"first\" on frame index 4, and \"second\" on frame 8, getCurrentLabel would return:\n   * <UL>\n   * \t\t<LI>null if the current position is 2.</LI>\n   * \t\t<LI>\"first\" if the current position is 4.</LI>\n   * \t\t<LI>\"first\" if the current position is 7.</LI>\n   * \t\t<LI>\"second\" if the current position is 15.</LI>\n   * </UL>\n   * @method getCurrentLabel\n   * @return {String} The name of the current label or null if there is no label\n   **/\n  p.getCurrentLabel = function () {\n    var labels = this.getLabels();\n    var pos = this.position;\n    var l = labels.length;\n    if (l) {\n      for (var i = 0; i < l; i++) {\n        if (pos < labels[i].position) {\n          break;\n        }\n      }\n      return i == 0 ? null : labels[i - 1].label;\n    }\n    return null;\n  };\n\n  /**\n   * Unpauses this timeline and jumps to the specified position or label.\n   * @method gotoAndPlay\n   * @param {String|Number} positionOrLabel The position in milliseconds (or ticks if `useTicks` is `true`)\n   * or label to jump to.\n   **/\n  p.gotoAndPlay = function (positionOrLabel) {\n    this.setPaused(false);\n    this._goto(positionOrLabel);\n  };\n\n  /**\n   * Pauses this timeline and jumps to the specified position or label.\n   * @method gotoAndStop\n   * @param {String|Number} positionOrLabel The position in milliseconds (or ticks if `useTicks` is `true`) or label\n   * to jump to.\n   **/\n  p.gotoAndStop = function (positionOrLabel) {\n    this.setPaused(true);\n    this._goto(positionOrLabel);\n  };\n\n  /**\n   * Advances the timeline to the specified position.\n   * @method setPosition\n   * @param {Number} value The position to seek to in milliseconds (or ticks if `useTicks` is `true`).\n   * @param {Number} [actionsMode] parameter specifying how actions are handled. See the Tween {{#crossLink \"Tween/setPosition\"}}{{/crossLink}}\n   * method for more details.\n   * @return {Boolean} Returns `true` if the timeline is complete (ie. the full timeline has run & {{#crossLink \"Timeline/loop:property\"}}{{/crossLink}}\n   * is `false`).\n   **/\n  p.setPosition = function (value, actionsMode) {\n    var t = this._calcPosition(value);\n    var end = !this.loop && value >= this.duration;\n    if (t == this._prevPos) {\n      return end;\n    }\n    this._prevPosition = value;\n    this.position = this._prevPos = t; // in case an action changes the current frame.\n    for (var i = 0, l = this._tweens.length; i < l; i++) {\n      this._tweens[i].setPosition(t, actionsMode);\n      if (t != this._prevPos) {\n        return false;\n      } // an action changed this timeline's position.\n    }\n\n    if (end) {\n      this.setPaused(true);\n    }\n    this.dispatchEvent(\"change\");\n    return end;\n  };\n\n  /**\n   * Pauses or plays this timeline.\n   * @method setPaused\n   * @param {Boolean} value Indicates whether the tween should be paused (`true`) or played (`false`).\n   **/\n  p.setPaused = function (value) {\n    this._paused = !!value;\n    createjs.Tween._register(this, !value);\n  };\n\n  /**\n   * Recalculates the duration of the timeline. The duration is automatically updated when tweens are added or removed,\n   * but this method is useful if you modify a tween after it was added to the timeline.\n   * @method updateDuration\n   **/\n  p.updateDuration = function () {\n    this.duration = 0;\n    for (var i = 0, l = this._tweens.length; i < l; i++) {\n      var tween = this._tweens[i];\n      if (tween.duration > this.duration) {\n        this.duration = tween.duration;\n      }\n    }\n  };\n\n  /**\n   * Advances this timeline by the specified amount of time in milliseconds (or ticks if `useTicks` is `true`).\n   * This is normally called automatically by the Tween engine (via the {{#crossLink \"Tween/tick:event\"}}{{/crossLink}}\n   * event), but is exposed for advanced uses.\n   * @method tick\n   * @param {Number} delta The time to advance in milliseconds (or ticks if useTicks is true).\n   **/\n  p.tick = function (delta) {\n    this.setPosition(this._prevPosition + delta);\n  };\n\n  /**\n   * If a numeric position is passed, it is returned unchanged. If a string is passed, the position of the\n   * corresponding frame label will be returned, or `null` if a matching label is not defined.\n   * @method resolve\n   * @param {String|Number} positionOrLabel A numeric position value or label string.\n   **/\n  p.resolve = function (positionOrLabel) {\n    var pos = Number(positionOrLabel);\n    if (isNaN(pos)) {\n      pos = this._labels[positionOrLabel];\n    }\n    return pos;\n  };\n\n  /**\n  * Returns a string representation of this object.\n  * @method toString\n  * @return {String} a string representation of the instance.\n  **/\n  p.toString = function () {\n    return \"[Timeline]\";\n  };\n\n  /**\n   * @method clone\n   * @protected\n   **/\n  p.clone = function () {\n    throw \"Timeline can not be cloned.\";\n  };\n\n  // private methods:\n  /**\n   * @method _goto\n   * @param {String | Number} positionOrLabel\n   * @protected\n   **/\n  p._goto = function (positionOrLabel) {\n    var pos = this.resolve(positionOrLabel);\n    if (pos != null) {\n      this.setPosition(pos);\n    }\n  };\n\n  /**\n   * @method _calcPosition\n   * @param {Number} value\n   * @return {Number}\n   * @protected\n   **/\n  p._calcPosition = function (value) {\n    if (value < 0) {\n      return 0;\n    }\n    if (value < this.duration) {\n      return value;\n    }\n    return this.loop ? value % this.duration : this.duration;\n  };\n  createjs.Timeline = createjs.promote(Timeline, \"EventDispatcher\");\n})();\n\n//##############################################################################\n// Ease.js\n//##############################################################################\n\n(function () {\n  \"use strict\";\n\n  /**\n   * The Ease class provides a collection of easing functions for use with TweenJS. It does not use the standard 4 param\n   * easing signature. Instead it uses a single param which indicates the current linear ratio (0 to 1) of the tween.\n   *\n   * Most methods on Ease can be passed directly as easing functions:\n   *\n   *      Tween.get(target).to({x:100}, 500, Ease.linear);\n   *\n   * However, methods beginning with \"get\" will return an easing function based on parameter values:\n   *\n   *      Tween.get(target).to({y:200}, 500, Ease.getPowIn(2.2));\n   *\n   * Please see the <a href=\"http://www.createjs.com/Demos/TweenJS/Tween_SparkTable\">spark table demo</a> for an\n   * overview of the different ease types on <a href=\"http://tweenjs.com\">TweenJS.com</a>.\n   *\n   * <em>Equations derived from work by Robert Penner.</em>\n   * @class Ease\n   * @static\n   **/\n  function Ease() {\n    throw \"Ease cannot be instantiated.\";\n  }\n\n  // static methods and properties\n  /**\n   * @method linear\n   * @param {Number} t\n   * @static\n   * @return {Number}\n   **/\n  Ease.linear = function (t) {\n    return t;\n  };\n\n  /**\n   * Identical to linear.\n   * @method none\n   * @param {Number} t\n   * @static\n   * @return {Number}\n   **/\n  Ease.none = Ease.linear;\n\n  /**\n   * Mimics the simple -100 to 100 easing in Flash Pro.\n   * @method get\n   * @param {Number} amount A value from -1 (ease in) to 1 (ease out) indicating the strength and direction of the ease.\n   * @static\n   * @return {Function}\n   **/\n  Ease.get = function (amount) {\n    if (amount < -1) {\n      amount = -1;\n    }\n    if (amount > 1) {\n      amount = 1;\n    }\n    return function (t) {\n      if (amount == 0) {\n        return t;\n      }\n      if (amount < 0) {\n        return t * (t * -amount + 1 + amount);\n      }\n      return t * ((2 - t) * amount + (1 - amount));\n    };\n  };\n\n  /**\n   * Configurable exponential ease.\n   * @method getPowIn\n   * @param {Number} pow The exponent to use (ex. 3 would return a cubic ease).\n   * @static\n   * @return {Function}\n   **/\n  Ease.getPowIn = function (pow) {\n    return function (t) {\n      return Math.pow(t, pow);\n    };\n  };\n\n  /**\n   * Configurable exponential ease.\n   * @method getPowOut\n   * @param {Number} pow The exponent to use (ex. 3 would return a cubic ease).\n   * @static\n   * @return {Function}\n   **/\n  Ease.getPowOut = function (pow) {\n    return function (t) {\n      return 1 - Math.pow(1 - t, pow);\n    };\n  };\n\n  /**\n   * Configurable exponential ease.\n   * @method getPowInOut\n   * @param {Number} pow The exponent to use (ex. 3 would return a cubic ease).\n   * @static\n   * @return {Function}\n   **/\n  Ease.getPowInOut = function (pow) {\n    return function (t) {\n      if ((t *= 2) < 1) return 0.5 * Math.pow(t, pow);\n      return 1 - 0.5 * Math.abs(Math.pow(2 - t, pow));\n    };\n  };\n\n  /**\n   * @method quadIn\n   * @param {Number} t\n   * @static\n   * @return {Number}\n   **/\n  Ease.quadIn = Ease.getPowIn(2);\n  /**\n   * @method quadOut\n   * @param {Number} t\n   * @static\n   * @return {Number}\n   **/\n  Ease.quadOut = Ease.getPowOut(2);\n  /**\n   * @method quadInOut\n   * @param {Number} t\n   * @static\n   * @return {Number}\n   **/\n  Ease.quadInOut = Ease.getPowInOut(2);\n\n  /**\n   * @method cubicIn\n   * @param {Number} t\n   * @static\n   * @return {Number}\n   **/\n  Ease.cubicIn = Ease.getPowIn(3);\n  /**\n   * @method cubicOut\n   * @param {Number} t\n   * @static\n   * @return {Number}\n   **/\n  Ease.cubicOut = Ease.getPowOut(3);\n  /**\n   * @method cubicInOut\n   * @param {Number} t\n   * @static\n   * @return {Number}\n   **/\n  Ease.cubicInOut = Ease.getPowInOut(3);\n\n  /**\n   * @method quartIn\n   * @param {Number} t\n   * @static\n   * @return {Number}\n   **/\n  Ease.quartIn = Ease.getPowIn(4);\n  /**\n   * @method quartOut\n   * @param {Number} t\n   * @static\n   * @return {Number}\n   **/\n  Ease.quartOut = Ease.getPowOut(4);\n  /**\n   * @method quartInOut\n   * @param {Number} t\n   * @static\n   * @return {Number}\n   **/\n  Ease.quartInOut = Ease.getPowInOut(4);\n\n  /**\n   * @method quintIn\n   * @param {Number} t\n   * @static\n   * @return {Number}\n   **/\n  Ease.quintIn = Ease.getPowIn(5);\n  /**\n   * @method quintOut\n   * @param {Number} t\n   * @static\n   * @return {Number}\n   **/\n  Ease.quintOut = Ease.getPowOut(5);\n  /**\n   * @method quintInOut\n   * @param {Number} t\n   * @static\n   * @return {Number}\n   **/\n  Ease.quintInOut = Ease.getPowInOut(5);\n\n  /**\n   * @method sineIn\n   * @param {Number} t\n   * @static\n   * @return {Number}\n   **/\n  Ease.sineIn = function (t) {\n    return 1 - Math.cos(t * Math.PI / 2);\n  };\n\n  /**\n   * @method sineOut\n   * @param {Number} t\n   * @static\n   * @return {Number}\n   **/\n  Ease.sineOut = function (t) {\n    return Math.sin(t * Math.PI / 2);\n  };\n\n  /**\n   * @method sineInOut\n   * @param {Number} t\n   * @static\n   * @return {Number}\n   **/\n  Ease.sineInOut = function (t) {\n    return -0.5 * (Math.cos(Math.PI * t) - 1);\n  };\n\n  /**\n   * Configurable \"back in\" ease.\n   * @method getBackIn\n   * @param {Number} amount The strength of the ease.\n   * @static\n   * @return {Function}\n   **/\n  Ease.getBackIn = function (amount) {\n    return function (t) {\n      return t * t * ((amount + 1) * t - amount);\n    };\n  };\n  /**\n   * @method backIn\n   * @param {Number} t\n   * @static\n   * @return {Number}\n   **/\n  Ease.backIn = Ease.getBackIn(1.7);\n\n  /**\n   * Configurable \"back out\" ease.\n   * @method getBackOut\n   * @param {Number} amount The strength of the ease.\n   * @static\n   * @return {Function}\n   **/\n  Ease.getBackOut = function (amount) {\n    return function (t) {\n      return --t * t * ((amount + 1) * t + amount) + 1;\n    };\n  };\n  /**\n   * @method backOut\n   * @param {Number} t\n   * @static\n   * @return {Number}\n   **/\n  Ease.backOut = Ease.getBackOut(1.7);\n\n  /**\n   * Configurable \"back in out\" ease.\n   * @method getBackInOut\n   * @param {Number} amount The strength of the ease.\n   * @static\n   * @return {Function}\n   **/\n  Ease.getBackInOut = function (amount) {\n    amount *= 1.525;\n    return function (t) {\n      if ((t *= 2) < 1) return 0.5 * (t * t * ((amount + 1) * t - amount));\n      return 0.5 * ((t -= 2) * t * ((amount + 1) * t + amount) + 2);\n    };\n  };\n  /**\n   * @method backInOut\n   * @param {Number} t\n   * @static\n   * @return {Number}\n   **/\n  Ease.backInOut = Ease.getBackInOut(1.7);\n\n  /**\n   * @method circIn\n   * @param {Number} t\n   * @static\n   * @return {Number}\n   **/\n  Ease.circIn = function (t) {\n    return -(Math.sqrt(1 - t * t) - 1);\n  };\n\n  /**\n   * @method circOut\n   * @param {Number} t\n   * @static\n   * @return {Number}\n   **/\n  Ease.circOut = function (t) {\n    return Math.sqrt(1 - --t * t);\n  };\n\n  /**\n   * @method circInOut\n   * @param {Number} t\n   * @static\n   * @return {Number}\n   **/\n  Ease.circInOut = function (t) {\n    if ((t *= 2) < 1) return -0.5 * (Math.sqrt(1 - t * t) - 1);\n    return 0.5 * (Math.sqrt(1 - (t -= 2) * t) + 1);\n  };\n\n  /**\n   * @method bounceIn\n   * @param {Number} t\n   * @static\n   * @return {Number}\n   **/\n  Ease.bounceIn = function (t) {\n    return 1 - Ease.bounceOut(1 - t);\n  };\n\n  /**\n   * @method bounceOut\n   * @param {Number} t\n   * @static\n   * @return {Number}\n   **/\n  Ease.bounceOut = function (t) {\n    if (t < 1 / 2.75) {\n      return 7.5625 * t * t;\n    } else if (t < 2 / 2.75) {\n      return 7.5625 * (t -= 1.5 / 2.75) * t + 0.75;\n    } else if (t < 2.5 / 2.75) {\n      return 7.5625 * (t -= 2.25 / 2.75) * t + 0.9375;\n    } else {\n      return 7.5625 * (t -= 2.625 / 2.75) * t + 0.984375;\n    }\n  };\n\n  /**\n   * @method bounceInOut\n   * @param {Number} t\n   * @static\n   * @return {Number}\n   **/\n  Ease.bounceInOut = function (t) {\n    if (t < 0.5) return Ease.bounceIn(t * 2) * .5;\n    return Ease.bounceOut(t * 2 - 1) * 0.5 + 0.5;\n  };\n\n  /**\n   * Configurable elastic ease.\n   * @method getElasticIn\n   * @param {Number} amplitude\n   * @param {Number} period\n   * @static\n   * @return {Function}\n   **/\n  Ease.getElasticIn = function (amplitude, period) {\n    var pi2 = Math.PI * 2;\n    return function (t) {\n      if (t == 0 || t == 1) return t;\n      var s = period / pi2 * Math.asin(1 / amplitude);\n      return -(amplitude * Math.pow(2, 10 * (t -= 1)) * Math.sin((t - s) * pi2 / period));\n    };\n  };\n  /**\n   * @method elasticIn\n   * @param {Number} t\n   * @static\n   * @return {Number}\n   **/\n  Ease.elasticIn = Ease.getElasticIn(1, 0.3);\n\n  /**\n   * Configurable elastic ease.\n   * @method getElasticOut\n   * @param {Number} amplitude\n   * @param {Number} period\n   * @static\n   * @return {Function}\n   **/\n  Ease.getElasticOut = function (amplitude, period) {\n    var pi2 = Math.PI * 2;\n    return function (t) {\n      if (t == 0 || t == 1) return t;\n      var s = period / pi2 * Math.asin(1 / amplitude);\n      return amplitude * Math.pow(2, -10 * t) * Math.sin((t - s) * pi2 / period) + 1;\n    };\n  };\n  /**\n   * @method elasticOut\n   * @param {Number} t\n   * @static\n   * @return {Number}\n   **/\n  Ease.elasticOut = Ease.getElasticOut(1, 0.3);\n\n  /**\n   * Configurable elastic ease.\n   * @method getElasticInOut\n   * @param {Number} amplitude\n   * @param {Number} period\n   * @static\n   * @return {Function}\n   **/\n  Ease.getElasticInOut = function (amplitude, period) {\n    var pi2 = Math.PI * 2;\n    return function (t) {\n      var s = period / pi2 * Math.asin(1 / amplitude);\n      if ((t *= 2) < 1) return -0.5 * (amplitude * Math.pow(2, 10 * (t -= 1)) * Math.sin((t - s) * pi2 / period));\n      return amplitude * Math.pow(2, -10 * (t -= 1)) * Math.sin((t - s) * pi2 / period) * 0.5 + 1;\n    };\n  };\n  /**\n   * @method elasticInOut\n   * @param {Number} t\n   * @static\n   * @return {Number}\n   **/\n  Ease.elasticInOut = Ease.getElasticInOut(1, 0.3 * 1.5);\n  createjs.Ease = Ease;\n})();\n\n//##############################################################################\n// MotionGuidePlugin.js\n//##############################################################################\n\n(function () {\n  \"use strict\";\n\n  /**\n   * A TweenJS plugin for working with motion guides.\n   *\n   * To use, install the plugin after TweenJS has loaded. Next tween the 'guide' property with an object as detailed below.\n   *\n   *       createjs.MotionGuidePlugin.install();\n   *\n   * <h4>Example</h4>\n   *\n   *      // Using a Motion Guide\n   *\t    createjs.Tween.get(target).to({guide:{ path:[0,0, 0,200,200,200, 200,0,0,0] }},7000);\n   *\t    // Visualizing the line\n   *\t    graphics.moveTo(0,0).curveTo(0,200,200,200).curveTo(200,0,0,0);\n   *\n   * Each path needs pre-computation to ensure there's fast performance. Because of the pre-computation there's no\n   * built in support for path changes mid tween. These are the Guide Object's properties:<UL>\n   *      <LI> path: Required, Array : The x/y points used to draw the path with a moveTo and 1 to n curveTo calls.</LI>\n   *      <LI> start: Optional, 0-1 : Initial position, default 0 except for when continuing along the same path.</LI>\n   *      <LI> end: Optional, 0-1 : Final position, default 1 if not specified.</LI>\n   *      <LI> orient: Optional, string : \"fixed\"/\"auto\"/\"cw\"/\"ccw\"<UL>\n   *\t\t\t\t<LI>\"fixed\" forces the object to face down the path all movement (relative to start rotation),</LI>\n   *      \t\t<LI>\"auto\" rotates the object along the path relative to the line.</LI>\n   *      \t\t<LI>\"cw\"/\"ccw\" force clockwise or counter clockwise rotations including flash like behaviour</LI>\n   * \t\t</UL></LI>\n   * </UL>\n   * Guide objects should not be shared between tweens even if all properties are identical, the library stores\n   * information on these objects in the background and sharing them can cause unexpected behaviour. Values\n   * outside 0-1 range of tweens will be a \"best guess\" from the appropriate part of the defined curve.\n   *\n   * @class MotionGuidePlugin\n   * @constructor\n   **/\n  function MotionGuidePlugin() {\n    throw \"MotionGuidePlugin cannot be instantiated.\";\n  }\n  ;\n\n  // static properties:\n  /**\n   * @property priority\n   * @protected\n   * @static\n   **/\n  MotionGuidePlugin.priority = 0; // high priority, should run sooner\n\n  /**\n   * @property temporary variable storage\n   * @private\n   * @static\n   */\n  MotionGuidePlugin._rotOffS;\n  /**\n   * @property temporary variable storage\n   * @private\n   * @static\n   */\n  MotionGuidePlugin._rotOffE;\n  /**\n   * @property temporary variable storage\n   * @private\n   * @static\n   */\n  MotionGuidePlugin._rotNormS;\n  /**\n   * @property temporary variable storage\n   * @private\n   * @static\n   */\n  MotionGuidePlugin._rotNormE;\n\n  // static methods\n  /**\n   * Installs this plugin for use with TweenJS. Call this once after TweenJS is loaded to enable this plugin.\n   * @method install\n   * @static\n   **/\n  MotionGuidePlugin.install = function () {\n    createjs.Tween.installPlugin(MotionGuidePlugin, [\"guide\", \"x\", \"y\", \"rotation\"]);\n    return createjs.Tween.IGNORE;\n  };\n\n  /**\n   * @method init\n   * @protected\n   * @static\n   **/\n  MotionGuidePlugin.init = function (tween, prop, value) {\n    var target = tween.target;\n    if (!target.hasOwnProperty(\"x\")) {\n      target.x = 0;\n    }\n    if (!target.hasOwnProperty(\"y\")) {\n      target.y = 0;\n    }\n    if (!target.hasOwnProperty(\"rotation\")) {\n      target.rotation = 0;\n    }\n    if (prop == \"rotation\") {\n      tween.__needsRot = true;\n    }\n    return prop == \"guide\" ? null : value;\n  };\n\n  /**\n   * @method step\n   * @protected\n   * @static\n   **/\n  MotionGuidePlugin.step = function (tween, prop, startValue, endValue, injectProps) {\n    // other props\n    if (prop == \"rotation\") {\n      tween.__rotGlobalS = startValue;\n      tween.__rotGlobalE = endValue;\n      MotionGuidePlugin.testRotData(tween, injectProps);\n    }\n    if (prop != \"guide\") {\n      return endValue;\n    }\n\n    // guide only information - Start -\n    var temp,\n      data = endValue;\n    if (!data.hasOwnProperty(\"path\")) {\n      data.path = [];\n    }\n    var path = data.path;\n    if (!data.hasOwnProperty(\"end\")) {\n      data.end = 1;\n    }\n    if (!data.hasOwnProperty(\"start\")) {\n      data.start = startValue && startValue.hasOwnProperty(\"end\") && startValue.path === path ? startValue.end : 0;\n    }\n\n    // Figure out subline information\n    if (data.hasOwnProperty(\"_segments\") && data._length) {\n      return endValue;\n    }\n    var l = path.length;\n    var accuracy = 10; // Adjust to improve line following precision but sacrifice performance (# of seg)\n    if (l >= 6 && (l - 2) % 4 == 0) {\n      // Enough points && contains correct number per entry ignoring start\n      data._segments = [];\n      data._length = 0;\n      for (var i = 2; i < l; i += 4) {\n        var sx = path[i - 2],\n          sy = path[i - 1];\n        var cx = path[i + 0],\n          cy = path[i + 1];\n        var ex = path[i + 2],\n          ey = path[i + 3];\n        var oldX = sx,\n          oldY = sy;\n        var tempX,\n          tempY,\n          total = 0;\n        var sublines = [];\n        for (var j = 1; j <= accuracy; j++) {\n          var t = j / accuracy;\n          var inv = 1 - t;\n          tempX = inv * inv * sx + 2 * inv * t * cx + t * t * ex;\n          tempY = inv * inv * sy + 2 * inv * t * cy + t * t * ey;\n          total += sublines[sublines.push(Math.sqrt((temp = tempX - oldX) * temp + (temp = tempY - oldY) * temp)) - 1];\n          oldX = tempX;\n          oldY = tempY;\n        }\n        data._segments.push(total);\n        data._segments.push(sublines);\n        data._length += total;\n      }\n    } else {\n      throw \"invalid 'path' data, please see documentation for valid paths\";\n    }\n\n    // Setup x/y tweens\n    temp = data.orient;\n    data.orient = true;\n    var o = {};\n    MotionGuidePlugin.calc(data, data.start, o);\n    tween.__rotPathS = Number(o.rotation.toFixed(5));\n    MotionGuidePlugin.calc(data, data.end, o);\n    tween.__rotPathE = Number(o.rotation.toFixed(5));\n    data.orient = false; //here and now we don't know if we need to\n    MotionGuidePlugin.calc(data, data.end, injectProps);\n    data.orient = temp;\n\n    // Setup rotation properties\n    if (!data.orient) {\n      return endValue;\n    }\n    tween.__guideData = data;\n    MotionGuidePlugin.testRotData(tween, injectProps);\n    return endValue;\n  };\n\n  /**\n   * @method testRotData\n   * @protected\n   * @static\n   **/\n  MotionGuidePlugin.testRotData = function (tween, injectProps) {\n    // no rotation informat? if we need it come back, if we don't use 0 & ensure we have guide data\n    if (tween.__rotGlobalS === undefined || tween.__rotGlobalE === undefined) {\n      if (tween.__needsRot) {\n        return;\n      }\n      if (tween._curQueueProps.rotation !== undefined) {\n        tween.__rotGlobalS = tween.__rotGlobalE = tween._curQueueProps.rotation;\n      } else {\n        tween.__rotGlobalS = tween.__rotGlobalE = injectProps.rotation = tween.target.rotation || 0;\n      }\n    }\n    if (tween.__guideData === undefined) {\n      return;\n    }\n\n    // Process rotation properties\n    var data = tween.__guideData;\n    var rotGlobalD = tween.__rotGlobalE - tween.__rotGlobalS;\n    var rotPathD = tween.__rotPathE - tween.__rotPathS;\n    var rot = rotGlobalD - rotPathD;\n    if (data.orient == \"auto\") {\n      if (rot > 180) {\n        rot -= 360;\n      } else if (rot < -180) {\n        rot += 360;\n      }\n    } else if (data.orient == \"cw\") {\n      while (rot < 0) {\n        rot += 360;\n      }\n      if (rot == 0 && rotGlobalD > 0 && rotGlobalD != 180) {\n        rot += 360;\n      }\n    } else if (data.orient == \"ccw\") {\n      rot = rotGlobalD - (rotPathD > 180 ? 360 - rotPathD : rotPathD); // sign flipping on path\n      while (rot > 0) {\n        rot -= 360;\n      }\n      if (rot == 0 && rotGlobalD < 0 && rotGlobalD != -180) {\n        rot -= 360;\n      }\n    }\n    data.rotDelta = rot;\n    data.rotOffS = tween.__rotGlobalS - tween.__rotPathS;\n\n    // reset\n    tween.__rotGlobalS = tween.__rotGlobalE = tween.__guideData = tween.__needsRot = undefined;\n  };\n\n  /**\n   * @method tween\n   * @protected\n   * @static\n   **/\n  MotionGuidePlugin.tween = function (tween, prop, value, startValues, endValues, ratio, wait, end) {\n    var data = endValues.guide;\n    if (data == undefined || data === startValues.guide) {\n      return value;\n    }\n    if (data.lastRatio != ratio) {\n      // first time through so calculate what I need to\n      var t = (data.end - data.start) * (wait ? data.end : ratio) + data.start;\n      MotionGuidePlugin.calc(data, t, tween.target);\n      switch (data.orient) {\n        case \"cw\": // mix in the original rotation\n        case \"ccw\":\n        case \"auto\":\n          tween.target.rotation += data.rotOffS + data.rotDelta * ratio;\n          break;\n        case \"fixed\": // follow fixed behaviour to solve potential issues\n        default:\n          tween.target.rotation += data.rotOffS;\n          break;\n      }\n      data.lastRatio = ratio;\n    }\n    if (prop == \"rotation\" && (!data.orient || data.orient == \"false\")) {\n      return value;\n    }\n    return tween.target[prop];\n  };\n\n  /**\n   * Determine the appropriate x/y/rotation information about a path for a given ratio along the path.\n   * Assumes a path object with all optional parameters specified.\n   * @param data Data object you would pass to the \"guide:\" property in a Tween\n   * @param ratio 0-1 Distance along path, values outside 0-1 are \"best guess\"\n   * @param target Object to copy the results onto, will use a new object if not supplied.\n   * @return {Object} The target object or a new object w/ the tweened properties\n   * @static\n   */\n  MotionGuidePlugin.calc = function (data, ratio, target) {\n    if (data._segments == undefined) {\n      throw \"Missing critical pre-calculated information, please file a bug\";\n    }\n    if (target == undefined) {\n      target = {\n        x: 0,\n        y: 0,\n        rotation: 0\n      };\n    }\n    var seg = data._segments;\n    var path = data.path;\n\n    // find segment\n    var pos = data._length * ratio;\n    var cap = seg.length - 2;\n    var n = 0;\n    while (pos > seg[n] && n < cap) {\n      pos -= seg[n];\n      n += 2;\n    }\n\n    // find subline\n    var sublines = seg[n + 1];\n    var i = 0;\n    cap = sublines.length - 1;\n    while (pos > sublines[i] && i < cap) {\n      pos -= sublines[i];\n      i++;\n    }\n    var t = i / ++cap + pos / (cap * sublines[i]);\n\n    // find x/y\n    n = n * 2 + 2;\n    var inv = 1 - t;\n    target.x = inv * inv * path[n - 2] + 2 * inv * t * path[n + 0] + t * t * path[n + 2];\n    target.y = inv * inv * path[n - 1] + 2 * inv * t * path[n + 1] + t * t * path[n + 3];\n\n    // orientation\n    if (data.orient) {\n      target.rotation = 57.2957795 * Math.atan2((path[n + 1] - path[n - 1]) * inv + (path[n + 3] - path[n + 1]) * t, (path[n + 0] - path[n - 2]) * inv + (path[n + 2] - path[n + 0]) * t);\n    }\n    return target;\n  };\n  createjs.MotionGuidePlugin = MotionGuidePlugin;\n})();\n\n//##############################################################################\n// version.js\n//##############################################################################\n\n(function () {\n  \"use strict\";\n\n  /**\n   * Static class holding library specific information such as the version and buildDate of\n   * the library.\n   * @class TweenJS\n   **/\n  var s = createjs.TweenJS = createjs.TweenJS || {};\n\n  /**\n   * The version string for this release.\n   * @property version\n   * @type String\n   * @static\n   **/\n  s.version = /*=version*/\"0.6.2\"; // injected by build process\n\n  /**\n   * The build date for this release in UTC format.\n   * @property buildDate\n   * @type String\n   * @static\n   **/\n  s.buildDate = /*=date*/\"Thu, 26 Nov 2015 20:44:31 GMT\"; // injected by build process\n})();\n\nif (typeof module !== \"undefined\" && typeof module.exports !== \"undefined\") module.exports = this.createjs;","map":{"version":3,"names":["createjs","extend","subclass","superclass","o","constructor","prototype","promote","prefix","subP","supP","Object","getPrototypeOf","__proto__","n","hasOwnProperty","indexOf","array","searchElement","i","l","length","Event","type","bubbles","cancelable","target","currentTarget","eventPhase","timeStamp","Date","getTime","defaultPrevented","propagationStopped","immediatePropagationStopped","removed","p","preventDefault","stopPropagation","stopImmediatePropagation","remove","clone","set","props","toString","EventDispatcher","_listeners","_captureListeners","initialize","addEventListener","on","removeEventListener","off","removeAllEventListeners","hasEventListener","dispatchEvent","_dispatchEvent","willTrigger","listener","useCapture","listeners","arr","push","scope","once","data","handleEvent","evt","call","splice","eventObj","e","parent","top","list","captureListeners","slice","Ticker","RAF_SYNCHED","RAF","TIMEOUT","useRAF","timingMode","maxDelta","paused","_addEventListener","_inited","init","apply","arguments","_startTime","_pausedTime","_ticks","_pausedTicks","_interval","_lastTime","_times","_tickTimes","_timerId","_raf","setInterval","interval","_setupTick","getInterval","setFPS","value","getFPS","defineProperties","get","framerate","console","log","_getTime","reset","f","window","cancelAnimationFrame","webkitCancelAnimationFrame","mozCancelAnimationFrame","oCancelAnimationFrame","msCancelAnimationFrame","clearTimeout","getMeasuredTickTime","ticks","ttl","times","Math","min","getMeasuredFPS","setPaused","getPaused","runTime","getEventTime","getTicks","pauseable","_handleSynch","_tick","_handleRAF","_handleTimeout","mode","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","setTimeout","time","elapsedTime","event","delta","unshift","pop","now","performance","mozNow","msNow","oNow","webkitNow","UID","_nextID","MouseEvent","stageX","stageY","nativeEvent","pointerID","primary","rawX","rawY","relatedTarget","Event_constructor","_get_localX","globalToLocal","x","_get_localY","y","_get_isTouch","localX","localY","isTouch","Matrix2D","a","b","c","d","tx","ty","setValues","DEG_TO_RAD","PI","identity","append","a1","b1","c1","d1","prepend","tx1","appendMatrix","matrix","prependMatrix","appendTransform","scaleX","scaleY","rotation","skewX","skewY","regX","regY","r","cos","sin","prependTransform","rotate","angle","skew","scale","translate","invert","isIdentity","equals","transformPoint","pt","decompose","sqrt","atan2","abs","copy","DisplayProps","visible","alpha","shadow","compositeOperation","Point","point","Rectangle","width","height","pad","left","bottom","right","rectangle","contains","union","rect","intersection","x1","y1","x2","y2","intersects","isEmpty","ButtonHelper","outLabel","overLabel","downLabel","play","hitArea","hitLabel","_isPressed","_isOver","_enabled","mouseChildren","enabled","actionsEnabled","gotoAndStop","setEnabled","cursor","_reset","__reset","getEnabled","label","t","gotoAndPlay","Shadow","color","offsetX","offsetY","blur","SpriteSheet","EventDispatcher_constructor","complete","_animations","_frames","_images","_data","_loadCount","_frameHeight","_frameWidth","_numFrames","_regX","_regY","_spacing","_margin","_parseData","getAnimations","animations","getNumFrames","animation","frames","getAnimation","name","getFrame","frameIndex","frame","getFrameBounds","images","img","src","document","createElement","getContext","naturalWidth","onload","_handleImageLoad","onerror","_handleImageError","Array","isArray","image","spacing","margin","count","_calculateFrames","anim","obj","speed","next","undefined","errorEvent","maxFrames","frameCount","frameWidth","frameHeight","imgLoop","imgs","imgW","imgH","Graphics","command","_stroke","_strokeStyle","_oldStrokeStyle","_strokeDash","_oldStrokeDash","_strokeIgnoreScale","_fill","_instructions","_commitIndex","_activeInstructions","_dirty","_storeIndex","clear","G","getRGB","g","getHSL","hue","saturation","lightness","BASE_64","STROKE_CAPS_MAP","STROKE_JOINTS_MAP","canvas","createCanvas","_ctx","getInstructions","_updateInstructions","instructions","draw","ctx","instr","exec","drawAsPath","instrs","path","moveTo","MoveTo","lineTo","LineTo","arcTo","radius","ArcTo","arc","startAngle","endAngle","anticlockwise","Arc","quadraticCurveTo","cpx","cpy","QuadraticCurveTo","bezierCurveTo","cp1x","cp1y","cp2x","cp2y","BezierCurveTo","w","h","Rect","closePath","ClosePath","beginFill","_setFill","Fill","beginLinearGradientFill","colors","ratios","x0","y0","linearGradient","beginRadialGradientFill","r0","r1","radialGradient","beginBitmapFill","repetition","bitmap","endFill","setStrokeStyle","thickness","caps","joints","miterLimit","ignoreScale","StrokeStyle","setStrokeDash","segments","offset","StrokeDash","beginStroke","_setStroke","Stroke","beginLinearGradientStroke","beginRadialGradientStroke","beginBitmapStroke","endStroke","curveTo","drawRect","drawRoundRect","drawRoundRectComplex","radiusTL","radiusTR","radiusBR","radiusBL","RoundRect","drawCircle","Circle","drawEllipse","Ellipse","drawPolyStar","sides","pointSize","PolyStar","clean","decodePath","str","paramCount","params","base64","charAt","fi","pl","charCount","num","sign","store","unstore","mt","lt","at","bt","qt","cp","lf","rf","bf","ef","ss","sd","s","ls","rs","bs","es","dr","rr","rc","dc","de","dp","commit","active","commitIndex","beginCmd","ll","fill","stroke","BeginPath","beginPath","style","fillStyle","mtx","save","transform","restore","createLinearGradient","addColorStop","createRadialGradient","readyState","createPattern","strokeStyle","setTransform","lineWidth","lineCap","isNaN","lineJoin","setLineDash","EMPTY_SEGMENTS","lineDashOffset","max","mTL","mTR","mBR","mBL","rTL","rTR","rBR","rBL","k","ox","oy","xe","ye","xm","ym","ps","DisplayObject","cacheCanvas","cacheID","id","mouseEnabled","tickEnabled","transformMatrix","snapToPixel","filters","mask","_cacheOffsetX","_cacheOffsetY","_filterOffsetX","_filterOffsetY","_cacheScale","_cacheDataURLID","_cacheDataURL","_props","_rectangle","_bounds","_MOUSE_EVENTS","suppressCrossDomainErrors","_snapToPixelEnabled","_hitTestCanvas","_hitTestContext","_nextCacheID","getStage","_Stage","stage","isVisible","ignoreCache","drawImage","updateContext","graphics","getMatrix","clip","globalAlpha","globalCompositeOperation","_applyShadow","cache","_cacheWidth","_cacheHeight","updateCache","offX","offY","fBounds","_getFilterBounds","ceil","clearRect","_applyFilters","uncache","getCacheDataURL","toDataURL","localToGlobal","getConcatenatedMatrix","localToLocal","getConcatenatedDisplayProps","hitTest","hit","_testHit","getBounds","getTransformedBounds","_getBounds","setBounds","_cloneProps","shadowColor","shadowOffsetX","shadowOffsetY","shadowBlur","evtObj","getImageData","applyFilter","bounds","ignoreTransform","_transformBounds","x_a","x_b","y_c","y_d","minX","maxX","minY","maxY","_hasMouseEventListener","evts","Container","DisplayObject_constructor","children","tickChildren","getNumChildren","numChildren","hasContent","DisplayObject_draw","child","addChild","removeChild","addChildAt","index","indx","good","removeChildAt","sort","removeAllChildren","kids","getChildAt","getChildByName","sortChildren","sortFunction","getChildIndex","swapChildrenAt","index1","index2","o1","o2","swapChildren","child1","child2","setChildIndex","getObjectUnderPoint","getObjectsUnderPoint","_getObjectsUnderPoint","recursive","_cloneChildren","DisplayObject__tick","mouse","activeListener","currentDepth","_testMask","result","DisplayObject_getBounds","Stage","Container_constructor","autoClear","getElementById","mouseX","mouseY","snapToPixelEnabled","mouseInBounds","tickOnUpdate","mouseMoveOutside","preventSelection","_pointerData","_pointerCount","_primaryPointerID","_mouseOverIntervalID","_nextStage","_prevStage","enableDOMEvents","_get_nextStage","_set_nextStage","nextStage","update","tick","backgroundColor","mimeType","fillRect","dataURL","putImageData","enableMouseOver","frequency","clearInterval","_testMouseOver","enable","_eventListeners","_this","_handleMouseUp","_handleMouseMove","_handleDoubleClick","_handleMouseDown","_getElementRect","getBoundingClientRect","err","offsetTop","offsetLeft","offsetWidth","offsetHeight","pageXOffset","scrollLeft","clientLeft","body","pageYOffset","scrollTop","clientTop","styles","getComputedStyle","currentStyle","padL","parseInt","paddingLeft","borderLeftWidth","padT","paddingTop","borderTopWidth","padR","paddingRight","borderRightWidth","padB","paddingBottom","borderBottomWidth","_getPointerData","_handlePointerMove","pageX","pageY","owner","inBounds","_updatePointerPosition","_dispatchMouseEvent","posEvtObj","_handlePointerUp","oTarget","down","_handlePointerDown","eventTarget","_mouseOverX","_mouseOverY","isEventTarget","common","oldList","_mouseOverTarget","oldTarget","pointerId","Bitmap","imageOrUri","sourceRect","Sprite","spriteSheet","frameOrAnimation","currentFrame","currentAnimation","currentAnimationFrame","_animation","_currentFrame","_skipAdvance","_normalizeFrame","stop","_goto","advance","fps","DisplayObject__cloneProps","frameDelta","animFrame","_dispatchAnimationEnd","end","changed","Shape","Text","text","font","textAlign","textBaseline","maxWidth","outline","lineHeight","_workingContext","H_OFFSETS","start","center","V_OFFSETS","hanging","middle","alphabetic","ideographic","col","_drawText","_prepContext","getMeasuredWidth","_getMeasuredWidth","getMeasuredLineHeight","getMeasuredHeight","getMetrics","lines","vOffset","substr","paint","maxW","hardLines","String","split","measureText","words","j","jl","wordW","_drawTextLine","strokeText","fillText","BitmapText","letterSpacing","spaceWidth","_oldProps","maxPoolSize","_spritePool","_updateText","Container_draw","Container_getBounds","Container__cloneProps","_getFrameIndex","character","toUpperCase","toLowerCase","_getFrame","_getLineHeight","_getSpaceWidth","change","spaceW","lineH","pool","childIndex","numKids","sprite","hasSpace","MovieClip","startPosition","loop","labels","inited","INDEPENDENT","timeline","Timeline","position","useTicks","autoReset","frameBounds","_synchOffset","_prevPos","_prevPosition","_t","_managed","SINGLE_FRAME","SYNCHED","MovieClipPlugin","install","getLabels","getCurrentLabel","_updateTimeline","getDuration","duration","currentLabel","totalFrames","positionOrLabel","independent","_framerate","Container__tick","pos","resolve","NaN","tl","synched","Tween","NONE","_calcPosition","setPosition","tweens","_tweens","tween","_target","passive","_stepPosition","_addManagedChild","_setState","state","_off","Container__getBounds","priority","installPlugin","prop","step","startValues","endValues","ratio","wait","SpriteSheetUtils","_workingCanvas","addFlippedFrames","horizontal","vertical","both","_flip","extractFrame","mergeAlpha","rgbImage","alphaImage","v","il","__tmp","fl","sfx","names","al","SpriteSheetBuilder","maxHeight","padding","timeSlice","progress","_nextFrameIndex","_index","_timerID","_scale","ERR_DIMENSIONS","ERR_RUNNING","addFrame","source","setupFunction","setupData","nominalBounds","funct","addAnimation","addMovieClip","labelFunction","rects","baseFrameIndex","_setupMovieClipFrame","_labels","lbls","build","_startBuild","_drawNext","_endBuild","buildAsync","_run","stopAsync","dataFrames","_fillRow","_getSize","ae","size","pow","maxH","sc","rx","floor","ry","rh","rw","round","ts","DOMElement","htmlElement","transformOrigin","WebkitTransformOrigin","msTransformOrigin","MozTransformOrigin","OTransformOrigin","_handleDrawEnd","visibility","oldProps","oldMtx","WebkitTransform","OTransform","msTransform","MozTransform","opacity","Filter","targetCtx","targetX","targetY","imageData","_applyFilter","BlurFilter","blurX","blurY","quality","MUL_TABLE","SHG_TABLE","q","radiusX","radiusY","iterations","px","yp","yi","yw","pr","pg","pb","pa","divx","divy","w1","h1","rxp1","ryp1","ssx","sx","ssy","sy","si","stx","mty","sty","ms","AlphaMapFilter","alphaMap","_alphaMap","_mapData","_prepAlphaMap","map","HTMLCanvasElement","imgData","AlphaMaskFilter","ColorFilter","redMultiplier","greenMultiplier","blueMultiplier","alphaMultiplier","redOffset","greenOffset","blueOffset","alphaOffset","ColorMatrix","brightness","contrast","setColor","DELTA_INDEX","IDENTITY_MATRIX","LENGTH","adjustColor","adjustHue","adjustContrast","adjustBrightness","adjustSaturation","_cleanValue","_multiplyMatrix","lumR","lumG","lumB","cosVal","sinVal","concat","_fixMatrix","toArray","val","limit","ColorMatrixFilter","m0","m1","m2","m3","m4","m5","m6","m7","m8","m9","m10","m11","m12","m13","m14","m15","m16","m17","m18","m19","Touch","isSupported","navigator","singleTouch","allowDefault","__touch","pointers","multitouch","_IOS_enable","_IE_enable","disable","_IOS_disable","_IE_disable","_IOS_handleEvent","touches","changedTouches","touch","identifier","_handleStart","_handleMove","_handleEnd","_IE_handleEvent","msTouchAction","touchAction","activeIDs","ids","srcElement","EaselJS","version","buildDate","PreloadJS","proxy","method","aArgs","ErrorEvent","title","message","ProgressEvent","loaded","total","isLoader","define","amd","objectTypes","freeExports","exports","nodeType","root","freeGlobal","module","global","runInContext","context","Number","SyntaxError","TypeError","nativeJSON","stringify","parse","objectProto","getClass","isProperty","forEach","undef","isExtended","getUTCFullYear","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","getUTCMilliseconds","exception","has","serialized","stringifySupported","toJSON","parseSupported","functionClass","dateClass","numberClass","stringClass","arrayClass","booleanClass","charIndexBuggy","Months","getDay","year","month","property","members","original","object","callback","Properties","valueOf","isFunction","hasProperty","isConstructor","Escapes","leadingZeroes","toPaddedString","unicodePrefix","quote","useCharIndex","symbols","charCode","charCodeAt","serialize","properties","whitespace","indentation","stack","className","date","hours","minutes","seconds","milliseconds","results","element","join","filter","fromCharCode","Unescapes","Index","Source","abort","lex","begin","isSigned","hasMembers","walk","JSON","previousJSON","isRestored","JSON3","noConflict","appendToHead","el","getHead","appendChild","head","getElementsByTagName","getBody","DomUtils","parseXML","xml","DOMParser","parser","parseFromString","ActiveXObject","async","loadXML","parseJSON","DataUtils","LoadItem","maintainOrder","GET","values","headers","withCredentials","crossOrigin","loadTimeout","LOAD_TIMEOUT_DEFAULT","create","item","Error","ABSOLUTE_PATT","RELATIVE_PATT","EXTENSION_PATT","parseURI","info","absolute","relative","queryIndex","match","test","extension","formatQueryString","query","escape","buildPath","idx","isCrossDomain","href","host","location","crossdomain","hostname","port","protocol","isLocal","isBinary","AbstractLoader","IMAGE","BINARY","isImageTag","HTMLImageElement","isAudioTag","HTMLAudioElement","isVideoTag","HTMLVideoElement","isText","TEXT","MANIFEST","XML","CSS","SVG","JAVASCRIPT","SPRITESHEET","getTypeByExtension","SOUND","VIDEO","RequestUtils","loadItem","preferXHR","canceled","resultFormatter","_item","_preferXHR","_result","_rawResult","_loadedItems","_tagSrcAttribute","_tag","POST","JSONP","getItem","getResult","raw","getTag","setTag","tag","load","_createRequest","_request","loader","cancel","destroy","_loadItems","getLoadedItems","TagRequest","_createTag","XHRRequest","_sendLoadStart","_isCanceled","_sendProgress","Infinity","_sendComplete","rawResult","_sendError","_response","Function","_resultFormatSuccess","_resultFormatFailed","AbstractMediaLoader","AbstractLoader_constructor","_formatResult","_updateXHR","preload","AbstractLoader_load","MediaTagRequest","setResponseType","_loadedHandler","onstalled","URL","webkitURL","createObjectURL","AbstractRequest","srcAttribute","AbstractRequest_constructor","_handleTagComplete","_addedToDOM","_startTagVisibility","onreadystatechange","_handleReadyStateChange","_handleError","_hideTag","_loadTimeout","parentNode","_clean","AbstractRequest_destroy","_showTag","_handleStalled","_stalledCallback","pc","_handleProgress","TagRequest_load","newEvent","_progressCallback","TagRequest__clean","_xhrLevel","_rawResponse","_canceled","_handleLoadStartProxy","_handleLoadStart","_handleProgressProxy","_handleAbortProxy","_handleAbort","_handleErrorProxy","_handleTimeoutProxy","_handleLoadProxy","_handleLoad","_handleReadyStateChangeProxy","_createXHR","ACTIVEX_VERSIONS","onloadstart","onprogress","onabort","ontimeout","send","error","_responseType","responseType","getAllResponseHeaders","getResponseHeader","header","_checkError","_getResponse","Blob","BlobBuilder","WebKitBlobBuilder","MozBlobBuilder","MSBlobBuilder","builder","getBlob","status","response","responseText","responseXML","req","XMLHttpRequest","XDomainRequest","axVersion","overrideMimeType","open","origin","setRequestHeader","LoadQueue","basePath","_plugins","_typeCallbacks","_extensionCallbacks","maintainScriptOrder","stopOnError","_maxConnections","_availableLoaders","ImageLoader","JavaScriptLoader","CSSLoader","JSONLoader","JSONPLoader","SoundLoader","ManifestLoader","SpriteSheetLoader","XMLLoader","SVGLoader","BinaryLoader","VideoLoader","TextLoader","_defaultLoaderLength","useXHR","setPreferXHR","_paused","_basePath","_crossOrigin","_loadStartWasDispatched","_currentlyLoadingScript","_currentLoads","_loadQueue","_loadQueueBackup","_loadItemsById","_loadItemsBySrc","_loadedResults","_loadedRawResults","_numItems","_numItemsLoaded","_scriptOrder","_loadedScripts","_lastProgress","LOAD_TIMEOUT","registerLoader","canLoadItem","unregisterLoader","setUseXHR","removeAll","idsOrUrls","args","itemsWereRemoved","close","_disposeItem","_loadNext","loadManifest","plugin","getPreloadHandlers","types","extensions","setMaxConnections","loadFile","file","loadNow","_addItem","manifest","fileList","getItems","loadStartWasDispatched","_itemCount","_createLoadItem","_createLoader","plugins","_loader","_updateProgress","bp","useBasePath","pathMatch","ext","autoId","customHandler","_canStartLoad","_loadItem","_handleFileLoad","_handleFileComplete","_handleFileError","_sendFileStart","_finishOrderedItem","_removeLoadItem","_cleanLoadItem","_saveLoadedItems","_processFinishedLoad","loadFailed","_checkScriptLoadOrder","_sendFileComplete","checkItem","_sendFileProgress","remaining","chunk","completeHandler","rel","styleSheet","cssText","textNode","createTextNode","_formatImage","successCallback","errorCallback","objURL","_cleanUpURL","revokeObjectURL","json","AbstractLoader_cancel","_dispose","_manifestQueue","MANIFEST_PROGRESS","_loadManifest","AbstractLoader_handleEvent","AbstractLoader_destroy","queue","_handleManifestFileLoad","_handleManifestProgress","_handleManifestComplete","_handleManifestError","AbstractMediaLoader_constructor","autoplay","SPRITESHEET_PROGRESS","documentElement","SoundJS","BrowserDetect","agent","userAgent","isWindowPhone","isFirefox","isOpera","opera","isChrome","isIOS","isAndroid","isBlackberry","PlayPropsConfig","interrupt","delay","volume","pan","startTime","ppc","Sound","INTERRUPT_ANY","INTERRUPT_EARLY","INTERRUPT_LATE","INTERRUPT_NONE","PLAY_INITED","PLAY_SUCCEEDED","PLAY_INTERRUPTED","PLAY_FINISHED","PLAY_FAILED","SUPPORTED_EXTENSIONS","EXTENSION_MAP","m4a","FILE_PATTERN","defaultInterruptBehavior","alternateExtensions","activePlugin","_masterVolume","defineProperty","setVolume","instances","_instances","setMasterVolume","_masterMute","setMute","setMasterMute","_capabilities","_pluginsRegistered","_lastID","_idHash","_preloadHash","_defaultPlayPropsHash","initLoad","_handleLoadComplete","_handleLoadError","_registerPlugin","registerPlugins","initializeDefaultPlugins","WebAudioPlugin","HTMLAudioPlugin","isReady","getCapabilities","getCapability","key","_registerSound","details","_parseSrc","_parsePath","numChannels","channels","audioSprite","sp","defaultPlayProps","register","SoundChannel","maxPerChannel","registerSound","registerSounds","sounds","returnValues","removeSound","_getSrcById","removeSrc","removeSounds","removeAllSounds","loadComplete","capabilities","replace","ret","lastIndexOf","playProps","instance","createInstance","ok","_playInstance","_playFailed","DefaultSoundInstance","applyPlayProps","uniqueId","getVolume","getMute","setDefaultPlayProps","getDefaultPlayProps","getPosition","_beginPlaying","delayTimeoutId","add","_playFinished","channel","_removeAll","_add","_remove","maxDefault","_get","_getSlot","replacement","playState","_interrupt","AbstractSoundInstance","playbackResource","_volume","_pan","getPan","setPan","getStartTime","setStartTime","_duration","setDuration","_playbackResource","getPlaybackResource","setPlaybackResource","_position","_loop","getLoop","setLoop","_muted","getMuted","setMuted","_cleanUp","_handleStop","_pause","_resume","_updateVolume","_updatePan","_calculateCurrentPosition","_updatePosition","_updateStartTime","_updateDuration","_setDurationFromSource","_removeLooping","_addLooping","_sendEvent","_handleCleanUp","_handleSoundReady","_handleSoundComplete","_handleLoop","AbstractPlugin","_loaders","_audioSources","_soundInstances","_loaderClass","_soundInstanceClass","_handlePreloadComplete","_handlePreloadError","isPreloadStarted","isPreloadComplete","Loader","decodeAudioData","_handleAudioDecoded","decodedAudio","AbstractLoader__sendComplete","WebAudioLoader","WebAudioSoundInstance","AbstractSoundInstance_constructor","gainNode","createGain","panNode","createPanner","panningModel","_panningModel","connect","sourceNode","_soundCompleteTimeout","_sourceNodeNext","_playbackStartTime","_endedHandler","_scratchBuffer","destinationNode","AbstractSoundInstance_destroy","disconnect","_cleanUpAudioNode","_createAndPlayAudioNode","numberOfOutputs","audioNode","buffer","dur","currentTime","createBufferSource","newVolume","gain","AbstractPlugin_constructor","dynamicsCompressorNode","createDynamicsCompressor","destination","_addPropsToClasses","_unlocked","isMobilePhoneGap","_isFileXHRSupported","_generateCapabilities","playEmptySound","supported","xhr","canPlayType","AudioContext","webkitAudioContext","createBuffer","_compatibilitySetUp","_unlock","panning","tracks","supportedExtensions","extensionMap","playType","numberOfChannels","createGainNode","noteGrainOn","noteOff","HTMLAudioTagPool","_tags","_tagPool","TagPool","_tagUsed","HTMLAudioSoundInstance","_audioSpriteStopTime","_delayTimeoutId","_readyHandler","_handleTagReady","_stalledHandler","_audioSpriteEndHandler","_handleAudioSpriteLoop","_loopHandler","isMuted","_AUDIO_SEEKED","pause","_AUDIO_ENDED","_AUDIO_READY","_AUDIO_STALLED","_TIME_UPDATE","AbstractSoundInstance__beginPlaying","_handleSetPositionSeek","defaultNumChannels","MAX_INSTANCES","AbstractPlugin_register","AbstractPlugin_removeSound","AbstractPlugin_create","pluginData","ignoreGlobalPause","_curQueueProps","_initQueueProps","_steps","_actions","_useTicks","_registered","onChange","override","removeTweens","_register","LOOP","REVERSE","IGNORE","tweenjs_count","removeAllTweens","hasActiveTweens","_addStep","p0","_linearEase","p1","to","ease","_appendQueueProps","_addAction","_set","actionsMode","prevPos","_updateTargetProps","_runActions","v0","v1","ignore","v2","startPos","endPos","includeStart","sPos","ePos","action","oldValue","injectProps","_labelList","addTween","setLabels","removeTween","updateDuration","addLabel","Ease","linear","none","amount","getPowIn","getPowOut","getPowInOut","quadIn","quadOut","quadInOut","cubicIn","cubicOut","cubicInOut","quartIn","quartOut","quartInOut","quintIn","quintOut","quintInOut","sineIn","sineOut","sineInOut","getBackIn","backIn","getBackOut","backOut","getBackInOut","backInOut","circIn","circOut","circInOut","bounceIn","bounceOut","bounceInOut","getElasticIn","amplitude","period","pi2","asin","elasticIn","getElasticOut","elasticOut","getElasticInOut","elasticInOut","MotionGuidePlugin","_rotOffS","_rotOffE","_rotNormS","_rotNormE","__needsRot","startValue","endValue","__rotGlobalS","__rotGlobalE","testRotData","temp","_length","accuracy","_segments","cx","cy","ex","ey","oldX","oldY","tempX","tempY","sublines","inv","orient","calc","__rotPathS","toFixed","__rotPathE","__guideData","rotGlobalD","rotPathD","rot","rotDelta","rotOffS","guide","lastRatio","seg","cap","TweenJS"],"sources":["/Users/canozdemir/Downloads/web-based-navigation-rosbridge/node_modules/createjs-module/createjs.js"],"sourcesContent":["var createjs = (this.createjs = (this.createjs || {}));\n/*!\n* CreateJS\n* Visit http://createjs.com/ for documentation, updates and examples.\n*\n* Copyright (c) 2010 gskinner.com, inc.\n*\n* Permission is hereby granted, free of charge, to any person\n* obtaining a copy of this software and associated documentation\n* files (the \"Software\"), to deal in the Software without\n* restriction, including without limitation the rights to use,\n* copy, modify, merge, publish, distribute, sublicense, and/or sell\n* copies of the Software, and to permit persons to whom the\n* Software is furnished to do so, subject to the following\n* conditions:\n*\n* The above copyright notice and this permission notice shall be\n* included in all copies or substantial portions of the Software.\n*\n* THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n* EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\n* OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n* NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n* HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\n* WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n* FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\n* OTHER DEALINGS IN THE SOFTWARE.\n*/\n\nthis.createjs = this.createjs||{};\n\n\n//##############################################################################\n// extend.js\n//##############################################################################\n\n/**\n * @class Utility Methods\n */\n\n/**\n * Sets up the prototype chain and constructor property for a new class.\n *\n * This should be called right after creating the class constructor.\n *\n * \tfunction MySubClass() {}\n * \tcreatejs.extend(MySubClass, MySuperClass);\n * \tMySubClass.prototype.doSomething = function() { }\n *\n * \tvar foo = new MySubClass();\n * \tconsole.log(foo instanceof MySuperClass); // true\n * \tconsole.log(foo.prototype.constructor === MySubClass); // true\n *\n * @method extend\n * @param {Function} subclass The subclass.\n * @param {Function} superclass The superclass to extend.\n * @return {Function} Returns the subclass's new prototype.\n */\ncreatejs.extend = function(subclass, superclass) {\n\t\"use strict\";\n\n\tfunction o() { this.constructor = subclass; }\n\to.prototype = superclass.prototype;\n\treturn (subclass.prototype = new o());\n};\n\n//##############################################################################\n// promote.js\n//##############################################################################\n\n/**\n * @class Utility Methods\n */\n\n/**\n * Promotes any methods on the super class that were overridden, by creating an alias in the format `prefix_methodName`.\n * It is recommended to use the super class's name as the prefix.\n * An alias to the super class's constructor is always added in the format `prefix_constructor`.\n * This allows the subclass to call super class methods without using `function.call`, providing better performance.\n *\n * For example, if `MySubClass` extends `MySuperClass`, and both define a `draw` method, then calling `promote(MySubClass, \"MySuperClass\")`\n * would add a `MySuperClass_constructor` method to MySubClass and promote the `draw` method on `MySuperClass` to the\n * prototype of `MySubClass` as `MySuperClass_draw`.\n *\n * This should be called after the class's prototype is fully defined.\n *\n * \tfunction ClassA(name) {\n * \t\tthis.name = name;\n * \t}\n * \tClassA.prototype.greet = function() {\n * \t\treturn \"Hello \"+this.name;\n * \t}\n *\n * \tfunction ClassB(name, punctuation) {\n * \t\tthis.ClassA_constructor(name);\n * \t\tthis.punctuation = punctuation;\n * \t}\n * \tcreatejs.extend(ClassB, ClassA);\n * \tClassB.prototype.greet = function() {\n * \t\treturn this.ClassA_greet()+this.punctuation;\n * \t}\n * \tcreatejs.promote(ClassB, \"ClassA\");\n *\n * \tvar foo = new ClassB(\"World\", \"!?!\");\n * \tconsole.log(foo.greet()); // Hello World!?!\n *\n * @method promote\n * @param {Function} subclass The class to promote super class methods on.\n * @param {String} prefix The prefix to add to the promoted method names. Usually the name of the superclass.\n * @return {Function} Returns the subclass.\n */\ncreatejs.promote = function(subclass, prefix) {\n\t\"use strict\";\n\n\tvar subP = subclass.prototype, supP = (Object.getPrototypeOf&&Object.getPrototypeOf(subP))||subP.__proto__;\n\tif (supP) {\n\t\tsubP[(prefix+=\"_\") + \"constructor\"] = supP.constructor; // constructor is not always innumerable\n\t\tfor (var n in supP) {\n\t\t\tif (subP.hasOwnProperty(n) && (typeof supP[n] == \"function\")) { subP[prefix + n] = supP[n]; }\n\t\t}\n\t}\n\treturn subclass;\n};\n\n//##############################################################################\n// indexOf.js\n//##############################################################################\n\n/**\n * @class Utility Methods\n */\n\n/**\n * Finds the first occurrence of a specified value searchElement in the passed in array, and returns the index of\n * that value.  Returns -1 if value is not found.\n *\n *      var i = createjs.indexOf(myArray, myElementToFind);\n *\n * @method indexOf\n * @param {Array} array Array to search for searchElement\n * @param searchElement Element to find in array.\n * @return {Number} The first index of searchElement in array.\n */\ncreatejs.indexOf = function (array, searchElement){\n\t\"use strict\";\n\n\tfor (var i = 0,l=array.length; i < l; i++) {\n\t\tif (searchElement === array[i]) {\n\t\t\treturn i;\n\t\t}\n\t}\n\treturn -1;\n};\n\n//##############################################################################\n// Event.js\n//##############################################################################\n\n(function() {\n\t\"use strict\";\n\n// constructor:\n\t/**\n\t * Contains properties and methods shared by all events for use with\n\t * {{#crossLink \"EventDispatcher\"}}{{/crossLink}}.\n\t * \n\t * Note that Event objects are often reused, so you should never\n\t * rely on an event object's state outside of the call stack it was received in.\n\t * @class Event\n\t * @param {String} type The event type.\n\t * @param {Boolean} bubbles Indicates whether the event will bubble through the display list.\n\t * @param {Boolean} cancelable Indicates whether the default behaviour of this event can be cancelled.\n\t * @constructor\n\t **/\n\tfunction Event(type, bubbles, cancelable) {\n\t\t\n\t\n\t// public properties:\n\t\t/**\n\t\t * The type of event.\n\t\t * @property type\n\t\t * @type String\n\t\t **/\n\t\tthis.type = type;\n\t\n\t\t/**\n\t\t * The object that generated an event.\n\t\t * @property target\n\t\t * @type Object\n\t\t * @default null\n\t\t * @readonly\n\t\t*/\n\t\tthis.target = null;\n\t\n\t\t/**\n\t\t * The current target that a bubbling event is being dispatched from. For non-bubbling events, this will\n\t\t * always be the same as target. For example, if childObj.parent = parentObj, and a bubbling event\n\t\t * is generated from childObj, then a listener on parentObj would receive the event with\n\t\t * target=childObj (the original target) and currentTarget=parentObj (where the listener was added).\n\t\t * @property currentTarget\n\t\t * @type Object\n\t\t * @default null\n\t\t * @readonly\n\t\t*/\n\t\tthis.currentTarget = null;\n\t\n\t\t/**\n\t\t * For bubbling events, this indicates the current event phase:<OL>\n\t\t * \t<LI> capture phase: starting from the top parent to the target</LI>\n\t\t * \t<LI> at target phase: currently being dispatched from the target</LI>\n\t\t * \t<LI> bubbling phase: from the target to the top parent</LI>\n\t\t * </OL>\n\t\t * @property eventPhase\n\t\t * @type Number\n\t\t * @default 0\n\t\t * @readonly\n\t\t*/\n\t\tthis.eventPhase = 0;\n\t\n\t\t/**\n\t\t * Indicates whether the event will bubble through the display list.\n\t\t * @property bubbles\n\t\t * @type Boolean\n\t\t * @default false\n\t\t * @readonly\n\t\t*/\n\t\tthis.bubbles = !!bubbles;\n\t\n\t\t/**\n\t\t * Indicates whether the default behaviour of this event can be cancelled via\n\t\t * {{#crossLink \"Event/preventDefault\"}}{{/crossLink}}. This is set via the Event constructor.\n\t\t * @property cancelable\n\t\t * @type Boolean\n\t\t * @default false\n\t\t * @readonly\n\t\t*/\n\t\tthis.cancelable = !!cancelable;\n\t\n\t\t/**\n\t\t * The epoch time at which this event was created.\n\t\t * @property timeStamp\n\t\t * @type Number\n\t\t * @default 0\n\t\t * @readonly\n\t\t*/\n\t\tthis.timeStamp = (new Date()).getTime();\n\t\n\t\t/**\n\t\t * Indicates if {{#crossLink \"Event/preventDefault\"}}{{/crossLink}} has been called\n\t\t * on this event.\n\t\t * @property defaultPrevented\n\t\t * @type Boolean\n\t\t * @default false\n\t\t * @readonly\n\t\t*/\n\t\tthis.defaultPrevented = false;\n\t\n\t\t/**\n\t\t * Indicates if {{#crossLink \"Event/stopPropagation\"}}{{/crossLink}} or\n\t\t * {{#crossLink \"Event/stopImmediatePropagation\"}}{{/crossLink}} has been called on this event.\n\t\t * @property propagationStopped\n\t\t * @type Boolean\n\t\t * @default false\n\t\t * @readonly\n\t\t*/\n\t\tthis.propagationStopped = false;\n\t\n\t\t/**\n\t\t * Indicates if {{#crossLink \"Event/stopImmediatePropagation\"}}{{/crossLink}} has been called\n\t\t * on this event.\n\t\t * @property immediatePropagationStopped\n\t\t * @type Boolean\n\t\t * @default false\n\t\t * @readonly\n\t\t*/\n\t\tthis.immediatePropagationStopped = false;\n\t\t\n\t\t/**\n\t\t * Indicates if {{#crossLink \"Event/remove\"}}{{/crossLink}} has been called on this event.\n\t\t * @property removed\n\t\t * @type Boolean\n\t\t * @default false\n\t\t * @readonly\n\t\t*/\n\t\tthis.removed = false;\n\t}\n\tvar p = Event.prototype;\n\n\t/**\n\t * <strong>REMOVED</strong>. Removed in favor of using `MySuperClass_constructor`.\n\t * See {{#crossLink \"Utility Methods/extend\"}}{{/crossLink}} and {{#crossLink \"Utility Methods/promote\"}}{{/crossLink}}\n\t * for details.\n\t *\n\t * There is an inheritance tutorial distributed with EaselJS in /tutorials/Inheritance.\n\t *\n\t * @method initialize\n\t * @protected\n\t * @deprecated\n\t */\n\t// p.initialize = function() {}; // searchable for devs wondering where it is.\n\n// public methods:\n\t/**\n\t * Sets {{#crossLink \"Event/defaultPrevented\"}}{{/crossLink}} to true if the event is cancelable.\n\t * Mirrors the DOM level 2 event standard. In general, cancelable events that have `preventDefault()` called will\n\t * cancel the default behaviour associated with the event.\n\t * @method preventDefault\n\t **/\n\tp.preventDefault = function() {\n\t\tthis.defaultPrevented = this.cancelable&&true;\n\t};\n\n\t/**\n\t * Sets {{#crossLink \"Event/propagationStopped\"}}{{/crossLink}} to true.\n\t * Mirrors the DOM event standard.\n\t * @method stopPropagation\n\t **/\n\tp.stopPropagation = function() {\n\t\tthis.propagationStopped = true;\n\t};\n\n\t/**\n\t * Sets {{#crossLink \"Event/propagationStopped\"}}{{/crossLink}} and\n\t * {{#crossLink \"Event/immediatePropagationStopped\"}}{{/crossLink}} to true.\n\t * Mirrors the DOM event standard.\n\t * @method stopImmediatePropagation\n\t **/\n\tp.stopImmediatePropagation = function() {\n\t\tthis.immediatePropagationStopped = this.propagationStopped = true;\n\t};\n\t\n\t/**\n\t * Causes the active listener to be removed via removeEventListener();\n\t * \n\t * \t\tmyBtn.addEventListener(\"click\", function(evt) {\n\t * \t\t\t// do stuff...\n\t * \t\t\tevt.remove(); // removes this listener.\n\t * \t\t});\n\t * \n\t * @method remove\n\t **/\n\tp.remove = function() {\n\t\tthis.removed = true;\n\t};\n\t\n\t/**\n\t * Returns a clone of the Event instance.\n\t * @method clone\n\t * @return {Event} a clone of the Event instance.\n\t **/\n\tp.clone = function() {\n\t\treturn new Event(this.type, this.bubbles, this.cancelable);\n\t};\n\t\n\t/**\n\t * Provides a chainable shortcut method for setting a number of properties on the instance.\n\t *\n\t * @method set\n\t * @param {Object} props A generic object containing properties to copy to the instance.\n\t * @return {Event} Returns the instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t*/\n\tp.set = function(props) {\n\t\tfor (var n in props) { this[n] = props[n]; }\n\t\treturn this;\n\t};\n\n\t/**\n\t * Returns a string representation of this object.\n\t * @method toString\n\t * @return {String} a string representation of the instance.\n\t **/\n\tp.toString = function() {\n\t\treturn \"[Event (type=\"+this.type+\")]\";\n\t};\n\n\tcreatejs.Event = Event;\n}());\n\n//##############################################################################\n// EventDispatcher.js\n//##############################################################################\n\n(function() {\n\t\"use strict\";\n\n\n// constructor:\n\t/**\n\t * EventDispatcher provides methods for managing queues of event listeners and dispatching events.\n\t *\n\t * You can either extend EventDispatcher or mix its methods into an existing prototype or instance by using the\n\t * EventDispatcher {{#crossLink \"EventDispatcher/initialize\"}}{{/crossLink}} method.\n\t * \n\t * Together with the CreateJS Event class, EventDispatcher provides an extended event model that is based on the\n\t * DOM Level 2 event model, including addEventListener, removeEventListener, and dispatchEvent. It supports\n\t * bubbling / capture, preventDefault, stopPropagation, stopImmediatePropagation, and handleEvent.\n\t * \n\t * EventDispatcher also exposes a {{#crossLink \"EventDispatcher/on\"}}{{/crossLink}} method, which makes it easier\n\t * to create scoped listeners, listeners that only run once, and listeners with associated arbitrary data. The \n\t * {{#crossLink \"EventDispatcher/off\"}}{{/crossLink}} method is merely an alias to\n\t * {{#crossLink \"EventDispatcher/removeEventListener\"}}{{/crossLink}}.\n\t * \n\t * Another addition to the DOM Level 2 model is the {{#crossLink \"EventDispatcher/removeAllEventListeners\"}}{{/crossLink}}\n\t * method, which can be used to listeners for all events, or listeners for a specific event. The Event object also \n\t * includes a {{#crossLink \"Event/remove\"}}{{/crossLink}} method which removes the active listener.\n\t *\n\t * <h4>Example</h4>\n\t * Add EventDispatcher capabilities to the \"MyClass\" class.\n\t *\n\t *      EventDispatcher.initialize(MyClass.prototype);\n\t *\n\t * Add an event (see {{#crossLink \"EventDispatcher/addEventListener\"}}{{/crossLink}}).\n\t *\n\t *      instance.addEventListener(\"eventName\", handlerMethod);\n\t *      function handlerMethod(event) {\n\t *          console.log(event.target + \" Was Clicked\");\n\t *      }\n\t *\n\t * <b>Maintaining proper scope</b><br />\n\t * Scope (ie. \"this\") can be be a challenge with events. Using the {{#crossLink \"EventDispatcher/on\"}}{{/crossLink}}\n\t * method to subscribe to events simplifies this.\n\t *\n\t *      instance.addEventListener(\"click\", function(event) {\n\t *          console.log(instance == this); // false, scope is ambiguous.\n\t *      });\n\t *      \n\t *      instance.on(\"click\", function(event) {\n\t *          console.log(instance == this); // true, \"on\" uses dispatcher scope by default.\n\t *      });\n\t * \n\t * If you want to use addEventListener instead, you may want to use function.bind() or a similar proxy to manage\n\t * scope.\n\t *\n\t * <b>Browser support</b>\n\t * The event model in CreateJS can be used separately from the suite in any project, however the inheritance model\n\t * requires modern browsers (IE9+).\n\t *      \n\t *\n\t * @class EventDispatcher\n\t * @constructor\n\t **/\n\tfunction EventDispatcher() {\n\t\n\t\n\t// private properties:\n\t\t/**\n\t\t * @protected\n\t\t * @property _listeners\n\t\t * @type Object\n\t\t **/\n\t\tthis._listeners = null;\n\t\t\n\t\t/**\n\t\t * @protected\n\t\t * @property _captureListeners\n\t\t * @type Object\n\t\t **/\n\t\tthis._captureListeners = null;\n\t}\n\tvar p = EventDispatcher.prototype;\n\n\t/**\n\t * <strong>REMOVED</strong>. Removed in favor of using `MySuperClass_constructor`.\n\t * See {{#crossLink \"Utility Methods/extend\"}}{{/crossLink}} and {{#crossLink \"Utility Methods/promote\"}}{{/crossLink}}\n\t * for details.\n\t *\n\t * There is an inheritance tutorial distributed with EaselJS in /tutorials/Inheritance.\n\t *\n\t * @method initialize\n\t * @protected\n\t * @deprecated\n\t */\n\t// p.initialize = function() {}; // searchable for devs wondering where it is.\n\n\n// static public methods:\n\t/**\n\t * Static initializer to mix EventDispatcher methods into a target object or prototype.\n\t * \n\t * \t\tEventDispatcher.initialize(MyClass.prototype); // add to the prototype of the class\n\t * \t\tEventDispatcher.initialize(myObject); // add to a specific instance\n\t * \n\t * @method initialize\n\t * @static\n\t * @param {Object} target The target object to inject EventDispatcher methods into. This can be an instance or a\n\t * prototype.\n\t **/\n\tEventDispatcher.initialize = function(target) {\n\t\ttarget.addEventListener = p.addEventListener;\n\t\ttarget.on = p.on;\n\t\ttarget.removeEventListener = target.off =  p.removeEventListener;\n\t\ttarget.removeAllEventListeners = p.removeAllEventListeners;\n\t\ttarget.hasEventListener = p.hasEventListener;\n\t\ttarget.dispatchEvent = p.dispatchEvent;\n\t\ttarget._dispatchEvent = p._dispatchEvent;\n\t\ttarget.willTrigger = p.willTrigger;\n\t};\n\t\n\n// public methods:\n\t/**\n\t * Adds the specified event listener. Note that adding multiple listeners to the same function will result in\n\t * multiple callbacks getting fired.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      displayObject.addEventListener(\"click\", handleClick);\n\t *      function handleClick(event) {\n\t *         // Click happened.\n\t *      }\n\t *\n\t * @method addEventListener\n\t * @param {String} type The string type of the event.\n\t * @param {Function | Object} listener An object with a handleEvent method, or a function that will be called when\n\t * the event is dispatched.\n\t * @param {Boolean} [useCapture] For events that bubble, indicates whether to listen for the event in the capture or bubbling/target phase.\n\t * @return {Function | Object} Returns the listener for chaining or assignment.\n\t **/\n\tp.addEventListener = function(type, listener, useCapture) {\n\t\tvar listeners;\n\t\tif (useCapture) {\n\t\t\tlisteners = this._captureListeners = this._captureListeners||{};\n\t\t} else {\n\t\t\tlisteners = this._listeners = this._listeners||{};\n\t\t}\n\t\tvar arr = listeners[type];\n\t\tif (arr) { this.removeEventListener(type, listener, useCapture); }\n\t\tarr = listeners[type]; // remove may have deleted the array\n\t\tif (!arr) { listeners[type] = [listener];  }\n\t\telse { arr.push(listener); }\n\t\treturn listener;\n\t};\n\t\n\t/**\n\t * A shortcut method for using addEventListener that makes it easier to specify an execution scope, have a listener\n\t * only run once, associate arbitrary data with the listener, and remove the listener.\n\t * \n\t * This method works by creating an anonymous wrapper function and subscribing it with addEventListener.\n\t * The wrapper function is returned for use with `removeEventListener` (or `off`).\n\t * \n\t * <b>IMPORTANT:</b> To remove a listener added with `on`, you must pass in the returned wrapper function as the listener, or use\n\t * {{#crossLink \"Event/remove\"}}{{/crossLink}}. Likewise, each time you call `on` a NEW wrapper function is subscribed, so multiple calls\n\t * to `on` with the same params will create multiple listeners.\n\t * \n\t * <h4>Example</h4>\n\t * \n\t * \t\tvar listener = myBtn.on(\"click\", handleClick, null, false, {count:3});\n\t * \t\tfunction handleClick(evt, data) {\n\t * \t\t\tdata.count -= 1;\n\t * \t\t\tconsole.log(this == myBtn); // true - scope defaults to the dispatcher\n\t * \t\t\tif (data.count == 0) {\n\t * \t\t\t\talert(\"clicked 3 times!\");\n\t * \t\t\t\tmyBtn.off(\"click\", listener);\n\t * \t\t\t\t// alternately: evt.remove();\n\t * \t\t\t}\n\t * \t\t}\n\t * \n\t * @method on\n\t * @param {String} type The string type of the event.\n\t * @param {Function | Object} listener An object with a handleEvent method, or a function that will be called when\n\t * the event is dispatched.\n\t * @param {Object} [scope] The scope to execute the listener in. Defaults to the dispatcher/currentTarget for function listeners, and to the listener itself for object listeners (ie. using handleEvent).\n\t * @param {Boolean} [once=false] If true, the listener will remove itself after the first time it is triggered.\n\t * @param {*} [data] Arbitrary data that will be included as the second parameter when the listener is called.\n\t * @param {Boolean} [useCapture=false] For events that bubble, indicates whether to listen for the event in the capture or bubbling/target phase.\n\t * @return {Function} Returns the anonymous function that was created and assigned as the listener. This is needed to remove the listener later using .removeEventListener.\n\t **/\n\tp.on = function(type, listener, scope, once, data, useCapture) {\n\t\tif (listener.handleEvent) {\n\t\t\tscope = scope||listener;\n\t\t\tlistener = listener.handleEvent;\n\t\t}\n\t\tscope = scope||this;\n\t\treturn this.addEventListener(type, function(evt) {\n\t\t\t\tlistener.call(scope, evt, data);\n\t\t\t\tonce&&evt.remove();\n\t\t\t}, useCapture);\n\t};\n\n\t/**\n\t * Removes the specified event listener.\n\t *\n\t * <b>Important Note:</b> that you must pass the exact function reference used when the event was added. If a proxy\n\t * function, or function closure is used as the callback, the proxy/closure reference must be used - a new proxy or\n\t * closure will not work.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      displayObject.removeEventListener(\"click\", handleClick);\n\t *\n\t * @method removeEventListener\n\t * @param {String} type The string type of the event.\n\t * @param {Function | Object} listener The listener function or object.\n\t * @param {Boolean} [useCapture] For events that bubble, indicates whether to listen for the event in the capture or bubbling/target phase.\n\t **/\n\tp.removeEventListener = function(type, listener, useCapture) {\n\t\tvar listeners = useCapture ? this._captureListeners : this._listeners;\n\t\tif (!listeners) { return; }\n\t\tvar arr = listeners[type];\n\t\tif (!arr) { return; }\n\t\tfor (var i=0,l=arr.length; i<l; i++) {\n\t\t\tif (arr[i] == listener) {\n\t\t\t\tif (l==1) { delete(listeners[type]); } // allows for faster checks.\n\t\t\t\telse { arr.splice(i,1); }\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t};\n\t\n\t/**\n\t * A shortcut to the removeEventListener method, with the same parameters and return value. This is a companion to the\n\t * .on method.\n\t * \n\t * <b>IMPORTANT:</b> To remove a listener added with `on`, you must pass in the returned wrapper function as the listener. See \n\t * {{#crossLink \"EventDispatcher/on\"}}{{/crossLink}} for an example.\n\t *\n\t * @method off\n\t * @param {String} type The string type of the event.\n\t * @param {Function | Object} listener The listener function or object.\n\t * @param {Boolean} [useCapture] For events that bubble, indicates whether to listen for the event in the capture or bubbling/target phase.\n\t **/\n\tp.off = p.removeEventListener;\n\n\t/**\n\t * Removes all listeners for the specified type, or all listeners of all types.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      // Remove all listeners\n\t *      displayObject.removeAllEventListeners();\n\t *\n\t *      // Remove all click listeners\n\t *      displayObject.removeAllEventListeners(\"click\");\n\t *\n\t * @method removeAllEventListeners\n\t * @param {String} [type] The string type of the event. If omitted, all listeners for all types will be removed.\n\t **/\n\tp.removeAllEventListeners = function(type) {\n\t\tif (!type) { this._listeners = this._captureListeners = null; }\n\t\telse {\n\t\t\tif (this._listeners) { delete(this._listeners[type]); }\n\t\t\tif (this._captureListeners) { delete(this._captureListeners[type]); }\n\t\t}\n\t};\n\n\t/**\n\t * Dispatches the specified event to all listeners.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      // Use a string event\n\t *      this.dispatchEvent(\"complete\");\n\t *\n\t *      // Use an Event instance\n\t *      var event = new createjs.Event(\"progress\");\n\t *      this.dispatchEvent(event);\n\t *\n\t * @method dispatchEvent\n\t * @param {Object | String | Event} eventObj An object with a \"type\" property, or a string type.\n\t * While a generic object will work, it is recommended to use a CreateJS Event instance. If a string is used,\n\t * dispatchEvent will construct an Event instance if necessary with the specified type. This latter approach can\n\t * be used to avoid event object instantiation for non-bubbling events that may not have any listeners.\n\t * @param {Boolean} [bubbles] Specifies the `bubbles` value when a string was passed to eventObj.\n\t * @param {Boolean} [cancelable] Specifies the `cancelable` value when a string was passed to eventObj.\n\t * @return {Boolean} Returns false if `preventDefault()` was called on a cancelable event, true otherwise.\n\t **/\n\tp.dispatchEvent = function(eventObj, bubbles, cancelable) {\n\t\tif (typeof eventObj == \"string\") {\n\t\t\t// skip everything if there's no listeners and it doesn't bubble:\n\t\t\tvar listeners = this._listeners;\n\t\t\tif (!bubbles && (!listeners || !listeners[eventObj])) { return true; }\n\t\t\teventObj = new createjs.Event(eventObj, bubbles, cancelable);\n\t\t} else if (eventObj.target && eventObj.clone) {\n\t\t\t// redispatching an active event object, so clone it:\n\t\t\teventObj = eventObj.clone();\n\t\t}\n\t\t\n\t\t// TODO: it would be nice to eliminate this. Maybe in favour of evtObj instanceof Event? Or !!evtObj.createEvent\n\t\ttry { eventObj.target = this; } catch (e) {} // try/catch allows redispatching of native events\n\n\t\tif (!eventObj.bubbles || !this.parent) {\n\t\t\tthis._dispatchEvent(eventObj, 2);\n\t\t} else {\n\t\t\tvar top=this, list=[top];\n\t\t\twhile (top.parent) { list.push(top = top.parent); }\n\t\t\tvar i, l=list.length;\n\n\t\t\t// capture & atTarget\n\t\t\tfor (i=l-1; i>=0 && !eventObj.propagationStopped; i--) {\n\t\t\t\tlist[i]._dispatchEvent(eventObj, 1+(i==0));\n\t\t\t}\n\t\t\t// bubbling\n\t\t\tfor (i=1; i<l && !eventObj.propagationStopped; i++) {\n\t\t\t\tlist[i]._dispatchEvent(eventObj, 3);\n\t\t\t}\n\t\t}\n\t\treturn !eventObj.defaultPrevented;\n\t};\n\n\t/**\n\t * Indicates whether there is at least one listener for the specified event type.\n\t * @method hasEventListener\n\t * @param {String} type The string type of the event.\n\t * @return {Boolean} Returns true if there is at least one listener for the specified event.\n\t **/\n\tp.hasEventListener = function(type) {\n\t\tvar listeners = this._listeners, captureListeners = this._captureListeners;\n\t\treturn !!((listeners && listeners[type]) || (captureListeners && captureListeners[type]));\n\t};\n\t\n\t/**\n\t * Indicates whether there is at least one listener for the specified event type on this object or any of its\n\t * ancestors (parent, parent's parent, etc). A return value of true indicates that if a bubbling event of the\n\t * specified type is dispatched from this object, it will trigger at least one listener.\n\t * \n\t * This is similar to {{#crossLink \"EventDispatcher/hasEventListener\"}}{{/crossLink}}, but it searches the entire\n\t * event flow for a listener, not just this object.\n\t * @method willTrigger\n\t * @param {String} type The string type of the event.\n\t * @return {Boolean} Returns `true` if there is at least one listener for the specified event.\n\t **/\n\tp.willTrigger = function(type) {\n\t\tvar o = this;\n\t\twhile (o) {\n\t\t\tif (o.hasEventListener(type)) { return true; }\n\t\t\to = o.parent;\n\t\t}\n\t\treturn false;\n\t};\n\n\t/**\n\t * @method toString\n\t * @return {String} a string representation of the instance.\n\t **/\n\tp.toString = function() {\n\t\treturn \"[EventDispatcher]\";\n\t};\n\n\n// private methods:\n\t/**\n\t * @method _dispatchEvent\n\t * @param {Object | String | Event} eventObj\n\t * @param {Object} eventPhase\n\t * @protected\n\t **/\n\tp._dispatchEvent = function(eventObj, eventPhase) {\n\t\tvar l, listeners = (eventPhase==1) ? this._captureListeners : this._listeners;\n\t\tif (eventObj && listeners) {\n\t\t\tvar arr = listeners[eventObj.type];\n\t\t\tif (!arr||!(l=arr.length)) { return; }\n\t\t\ttry { eventObj.currentTarget = this; } catch (e) {}\n\t\t\ttry { eventObj.eventPhase = eventPhase; } catch (e) {}\n\t\t\teventObj.removed = false;\n\t\t\t\n\t\t\tarr = arr.slice(); // to avoid issues with items being removed or added during the dispatch\n\t\t\tfor (var i=0; i<l && !eventObj.immediatePropagationStopped; i++) {\n\t\t\t\tvar o = arr[i];\n\t\t\t\tif (o.handleEvent) { o.handleEvent(eventObj); }\n\t\t\t\telse { o(eventObj); }\n\t\t\t\tif (eventObj.removed) {\n\t\t\t\t\tthis.off(eventObj.type, o, eventPhase==1);\n\t\t\t\t\teventObj.removed = false;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\n\tcreatejs.EventDispatcher = EventDispatcher;\n}());\n\n//##############################################################################\n// Ticker.js\n//##############################################################################\n\n(function() {\n\t\"use strict\";\n\n\n// constructor:\n\t/**\n\t * The Ticker provides a centralized tick or heartbeat broadcast at a set interval. Listeners can subscribe to the tick\n\t * event to be notified when a set time interval has elapsed.\n\t *\n\t * Note that the interval that the tick event is called is a target interval, and may be broadcast at a slower interval\n\t * when under high CPU load. The Ticker class uses a static interface (ex. `Ticker.framerate = 30;`) and\n\t * can not be instantiated.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      createjs.Ticker.addEventListener(\"tick\", handleTick);\n\t *      function handleTick(event) {\n\t *          // Actions carried out each tick (aka frame)\n\t *          if (!event.paused) {\n\t *              // Actions carried out when the Ticker is not paused.\n\t *          }\n\t *      }\n\t *\n\t * @class Ticker\n\t * @uses EventDispatcher\n\t * @static\n\t **/\n\tfunction Ticker() {\n\t\tthrow \"Ticker cannot be instantiated.\";\n\t}\n\n\n// constants:\n\t/**\n\t * In this mode, Ticker uses the requestAnimationFrame API, but attempts to synch the ticks to target framerate. It\n\t * uses a simple heuristic that compares the time of the RAF return to the target time for the current frame and\n\t * dispatches the tick when the time is within a certain threshold.\n\t *\n\t * This mode has a higher variance for time between frames than {{#crossLink \"Ticker/TIMEOUT:property\"}}{{/crossLink}},\n\t * but does not require that content be time based as with {{#crossLink \"Ticker/RAF:property\"}}{{/crossLink}} while\n\t * gaining the benefits of that API (screen synch, background throttling).\n\t *\n\t * Variance is usually lowest for framerates that are a divisor of the RAF frequency. This is usually 60, so\n\t * framerates of 10, 12, 15, 20, and 30 work well.\n\t *\n\t * Falls back to {{#crossLink \"Ticker/TIMEOUT:property\"}}{{/crossLink}} if the requestAnimationFrame API is not\n\t * supported.\n\t * @property RAF_SYNCHED\n\t * @static\n\t * @type {String}\n\t * @default \"synched\"\n\t * @readonly\n\t **/\n\tTicker.RAF_SYNCHED = \"synched\";\n\n\t/**\n\t * In this mode, Ticker passes through the requestAnimationFrame heartbeat, ignoring the target framerate completely.\n\t * Because requestAnimationFrame frequency is not deterministic, any content using this mode should be time based.\n\t * You can leverage {{#crossLink \"Ticker/getTime\"}}{{/crossLink}} and the {{#crossLink \"Ticker/tick:event\"}}{{/crossLink}}\n\t * event object's \"delta\" properties to make this easier.\n\t *\n\t * Falls back on {{#crossLink \"Ticker/TIMEOUT:property\"}}{{/crossLink}} if the requestAnimationFrame API is not\n\t * supported.\n\t * @property RAF\n\t * @static\n\t * @type {String}\n\t * @default \"raf\"\n\t * @readonly\n\t **/\n\tTicker.RAF = \"raf\";\n\n\t/**\n\t * In this mode, Ticker uses the setTimeout API. This provides predictable, adaptive frame timing, but does not\n\t * provide the benefits of requestAnimationFrame (screen synch, background throttling).\n\t * @property TIMEOUT\n\t * @static\n\t * @type {String}\n\t * @default \"timeout\"\n\t * @readonly\n\t **/\n\tTicker.TIMEOUT = \"timeout\";\n\n\n// static events:\n\t/**\n\t * Dispatched each tick. The event will be dispatched to each listener even when the Ticker has been paused using\n\t * {{#crossLink \"Ticker/setPaused\"}}{{/crossLink}}.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      createjs.Ticker.addEventListener(\"tick\", handleTick);\n\t *      function handleTick(event) {\n\t *          console.log(\"Paused:\", event.paused, event.delta);\n\t *      }\n\t *\n\t * @event tick\n\t * @param {Object} target The object that dispatched the event.\n\t * @param {String} type The event type.\n\t * @param {Boolean} paused Indicates whether the ticker is currently paused.\n\t * @param {Number} delta The time elapsed in ms since the last tick.\n\t * @param {Number} time The total time in ms since Ticker was initialized.\n\t * @param {Number} runTime The total time in ms that Ticker was not paused since it was initialized. For example,\n\t * \tyou could determine the amount of time that the Ticker has been paused since initialization with `time-runTime`.\n\t * @since 0.6.0\n\t */\n\n\n// public static properties:\n\t/**\n\t * Deprecated in favour of {{#crossLink \"Ticker/timingMode\"}}{{/crossLink}}, and will be removed in a future version. If true, timingMode will\n\t * use {{#crossLink \"Ticker/RAF_SYNCHED\"}}{{/crossLink}} by default.\n\t * @deprecated Deprecated in favour of {{#crossLink \"Ticker/timingMode\"}}{{/crossLink}}.\n\t * @property useRAF\n\t * @static\n\t * @type {Boolean}\n\t * @default false\n\t **/\n\tTicker.useRAF = false;\n\n\t/**\n\t * Specifies the timing api (setTimeout or requestAnimationFrame) and mode to use. See\n\t * {{#crossLink \"Ticker/TIMEOUT\"}}{{/crossLink}}, {{#crossLink \"Ticker/RAF\"}}{{/crossLink}}, and\n\t * {{#crossLink \"Ticker/RAF_SYNCHED\"}}{{/crossLink}} for mode details.\n\t * @property timingMode\n\t * @static\n\t * @type {String}\n\t * @default Ticker.TIMEOUT\n\t **/\n\tTicker.timingMode = null;\n\n\t/**\n\t * Specifies a maximum value for the delta property in the tick event object. This is useful when building time\n\t * based animations and systems to prevent issues caused by large time gaps caused by background tabs, system sleep,\n\t * alert dialogs, or other blocking routines. Double the expected frame duration is often an effective value\n\t * (ex. maxDelta=50 when running at 40fps).\n\t * \n\t * This does not impact any other values (ex. time, runTime, etc), so you may experience issues if you enable maxDelta\n\t * when using both delta and other values.\n\t * \n\t * If 0, there is no maximum.\n\t * @property maxDelta\n\t * @static\n\t * @type {number}\n\t * @default 0\n\t */\n\tTicker.maxDelta = 0;\n\t\n\t/**\n\t * When the ticker is paused, all listeners will still receive a tick event, but the <code>paused</code> property\n\t * of the event will be `true`. Also, while paused the `runTime` will not increase. See {{#crossLink \"Ticker/tick:event\"}}{{/crossLink}},\n\t * {{#crossLink \"Ticker/getTime\"}}{{/crossLink}}, and {{#crossLink \"Ticker/getEventTime\"}}{{/crossLink}} for more\n\t * info.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      createjs.Ticker.addEventListener(\"tick\", handleTick);\n\t *      createjs.Ticker.paused = true;\n\t *      function handleTick(event) {\n\t *          console.log(event.paused,\n\t *          \tcreatejs.Ticker.getTime(false),\n\t *          \tcreatejs.Ticker.getTime(true));\n\t *      }\n\t *\n\t * @property paused\n\t * @static\n\t * @type {Boolean}\n\t * @default false\n\t **/\n\tTicker.paused = false;\n\n\n// mix-ins:\n\t// EventDispatcher methods:\n\tTicker.removeEventListener = null;\n\tTicker.removeAllEventListeners = null;\n\tTicker.dispatchEvent = null;\n\tTicker.hasEventListener = null;\n\tTicker._listeners = null;\n\tcreatejs.EventDispatcher.initialize(Ticker); // inject EventDispatcher methods.\n\tTicker._addEventListener = Ticker.addEventListener;\n\tTicker.addEventListener = function() {\n\t\t!Ticker._inited&&Ticker.init();\n\t\treturn Ticker._addEventListener.apply(Ticker, arguments);\n\t};\n\n\n// private static properties:\n\t/**\n\t * @property _inited\n\t * @static\n\t * @type {Boolean}\n\t * @protected\n\t **/\n\tTicker._inited = false;\n\n\t/**\n\t * @property _startTime\n\t * @static\n\t * @type {Number}\n\t * @protected\n\t **/\n\tTicker._startTime = 0;\n\n\t/**\n\t * @property _pausedTime\n\t * @static\n\t * @type {Number}\n\t * @protected\n\t **/\n\tTicker._pausedTime=0;\n\n\t/**\n\t * The number of ticks that have passed\n\t * @property _ticks\n\t * @static\n\t * @type {Number}\n\t * @protected\n\t **/\n\tTicker._ticks = 0;\n\n\t/**\n\t * The number of ticks that have passed while Ticker has been paused\n\t * @property _pausedTicks\n\t * @static\n\t * @type {Number}\n\t * @protected\n\t **/\n\tTicker._pausedTicks = 0;\n\n\t/**\n\t * @property _interval\n\t * @static\n\t * @type {Number}\n\t * @protected\n\t **/\n\tTicker._interval = 50;\n\n\t/**\n\t * @property _lastTime\n\t * @static\n\t * @type {Number}\n\t * @protected\n\t **/\n\tTicker._lastTime = 0;\n\n\t/**\n\t * @property _times\n\t * @static\n\t * @type {Array}\n\t * @protected\n\t **/\n\tTicker._times = null;\n\n\t/**\n\t * @property _tickTimes\n\t * @static\n\t * @type {Array}\n\t * @protected\n\t **/\n\tTicker._tickTimes = null;\n\n\t/**\n\t * Stores the timeout or requestAnimationFrame id.\n\t * @property _timerId\n\t * @static\n\t * @type {Number}\n\t * @protected\n\t **/\n\tTicker._timerId = null;\n\t\n\t/**\n\t * True if currently using requestAnimationFrame, false if using setTimeout. This may be different than timingMode\n\t * if that property changed and a tick hasn't fired.\n\t * @property _raf\n\t * @static\n\t * @type {Boolean}\n\t * @protected\n\t **/\n\tTicker._raf = true;\n\t\n\n// static getter / setters:\n\t/**\n\t * Use the {{#crossLink \"Ticker/interval:property\"}}{{/crossLink}} property instead.\n\t * @method setInterval\n\t * @static\n\t * @param {Number} interval\n\t * @deprecated\n\t **/\n\tTicker.setInterval = function(interval) {\n\t\tTicker._interval = interval;\n\t\tif (!Ticker._inited) { return; }\n\t\tTicker._setupTick();\n\t};\n\n\t/**\n\t * Use the {{#crossLink \"Ticker/interval:property\"}}{{/crossLink}} property instead.\n\t * @method getInterval\n\t * @static\n\t * @return {Number}\n\t * @deprecated\n\t **/\n\tTicker.getInterval = function() {\n\t\treturn Ticker._interval;\n\t};\n\n\t/**\n\t * Use the {{#crossLink \"Ticker/framerate:property\"}}{{/crossLink}} property instead.\n\t * @method setFPS\n\t * @static\n\t * @param {Number} value\n\t * @deprecated\n\t **/\n\tTicker.setFPS = function(value) {\n\t\tTicker.setInterval(1000/value);\n\t};\n\n\t/**\n\t * Use the {{#crossLink \"Ticker/framerate:property\"}}{{/crossLink}} property instead.\n\t * @method getFPS\n\t * @static\n\t * @return {Number}\n\t * @deprecated\n\t **/\n\tTicker.getFPS = function() {\n\t\treturn 1000/Ticker._interval;\n\t};\n\n\t/**\n\t * Indicates the target time (in milliseconds) between ticks. Default is 50 (20 FPS).\n\t * Note that actual time between ticks may be more than specified depending on CPU load.\n\t * This property is ignored if the ticker is using the `RAF` timing mode.\n\t * @property interval\n\t * @static\n\t * @type {Number}\n\t **/\n\t \n\t/**\n\t * Indicates the target frame rate in frames per second (FPS). Effectively just a shortcut to `interval`, where\n\t * `framerate == 1000/interval`.\n\t * @property framerate\n\t * @static\n\t * @type {Number}\n\t **/\n\ttry {\n\t\tObject.defineProperties(Ticker, {\n\t\t\tinterval: { get: Ticker.getInterval, set: Ticker.setInterval },\n\t\t\tframerate: { get: Ticker.getFPS, set: Ticker.setFPS }\n\t\t});\n\t} catch (e) { console.log(e); }\n\n\n// public static methods:\n\t/**\n\t * Starts the tick. This is called automatically when the first listener is added.\n\t * @method init\n\t * @static\n\t **/\n\tTicker.init = function() {\n\t\tif (Ticker._inited) { return; }\n\t\tTicker._inited = true;\n\t\tTicker._times = [];\n\t\tTicker._tickTimes = [];\n\t\tTicker._startTime = Ticker._getTime();\n\t\tTicker._times.push(Ticker._lastTime = 0);\n\t\tTicker.interval = Ticker._interval;\n\t};\n\t\n\t/**\n\t * Stops the Ticker and removes all listeners. Use init() to restart the Ticker.\n\t * @method reset\n\t * @static\n\t **/\n\tTicker.reset = function() {\n\t\tif (Ticker._raf) {\n\t\t\tvar f = window.cancelAnimationFrame || window.webkitCancelAnimationFrame || window.mozCancelAnimationFrame || window.oCancelAnimationFrame || window.msCancelAnimationFrame;\n\t\t\tf&&f(Ticker._timerId);\n\t\t} else {\n\t\t\tclearTimeout(Ticker._timerId);\n\t\t}\n\t\tTicker.removeAllEventListeners(\"tick\");\n\t\tTicker._timerId = Ticker._times = Ticker._tickTimes = null;\n\t\tTicker._startTime = Ticker._lastTime = Ticker._ticks = 0;\n\t\tTicker._inited = false;\n\t};\n\n\t/**\n\t * Returns the average time spent within a tick. This can vary significantly from the value provided by getMeasuredFPS\n\t * because it only measures the time spent within the tick execution stack. \n\t * \n\t * Example 1: With a target FPS of 20, getMeasuredFPS() returns 20fps, which indicates an average of 50ms between \n\t * the end of one tick and the end of the next. However, getMeasuredTickTime() returns 15ms. This indicates that \n\t * there may be up to 35ms of \"idle\" time between the end of one tick and the start of the next.\n\t *\n\t * Example 2: With a target FPS of 30, getFPS() returns 10fps, which indicates an average of 100ms between the end of\n\t * one tick and the end of the next. However, getMeasuredTickTime() returns 20ms. This would indicate that something\n\t * other than the tick is using ~80ms (another script, DOM rendering, etc).\n\t * @method getMeasuredTickTime\n\t * @static\n\t * @param {Number} [ticks] The number of previous ticks over which to measure the average time spent in a tick.\n\t * Defaults to the number of ticks per second. To get only the last tick's time, pass in 1.\n\t * @return {Number} The average time spent in a tick in milliseconds.\n\t **/\n\tTicker.getMeasuredTickTime = function(ticks) {\n\t\tvar ttl=0, times=Ticker._tickTimes;\n\t\tif (!times || times.length < 1) { return -1; }\n\n\t\t// by default, calculate average for the past ~1 second:\n\t\tticks = Math.min(times.length, ticks||(Ticker.getFPS()|0));\n\t\tfor (var i=0; i<ticks; i++) { ttl += times[i]; }\n\t\treturn ttl/ticks;\n\t};\n\n\t/**\n\t * Returns the actual frames / ticks per second.\n\t * @method getMeasuredFPS\n\t * @static\n\t * @param {Number} [ticks] The number of previous ticks over which to measure the actual frames / ticks per second.\n\t * Defaults to the number of ticks per second.\n\t * @return {Number} The actual frames / ticks per second. Depending on performance, this may differ\n\t * from the target frames per second.\n\t **/\n\tTicker.getMeasuredFPS = function(ticks) {\n\t\tvar times = Ticker._times;\n\t\tif (!times || times.length < 2) { return -1; }\n\n\t\t// by default, calculate fps for the past ~1 second:\n\t\tticks = Math.min(times.length-1, ticks||(Ticker.getFPS()|0));\n\t\treturn 1000/((times[0]-times[ticks])/ticks);\n\t};\n\n\t/**\n\t * Use the {{#crossLink \"Ticker/paused:property\"}}{{/crossLink}} property instead.\n\t * @method setPaused\n\t * @static\n\t * @param {Boolean} value\n\t * @deprecated\n\t **/\n\tTicker.setPaused = function(value) {\n\t\t// TODO: deprecated.\n\t\tTicker.paused = value;\n\t};\n\n\t/**\n\t * Use the {{#crossLink \"Ticker/paused:property\"}}{{/crossLink}} property instead.\n\t * @method getPaused\n\t * @static\n\t * @return {Boolean}\n\t * @deprecated\n\t **/\n\tTicker.getPaused = function() {\n\t\t// TODO: deprecated.\n\t\treturn Ticker.paused;\n\t};\n\n\t/**\n\t * Returns the number of milliseconds that have elapsed since Ticker was initialized via {{#crossLink \"Ticker/init\"}}.\n\t * Returns -1 if Ticker has not been initialized. For example, you could use\n\t * this in a time synchronized animation to determine the exact amount of time that has elapsed.\n\t * @method getTime\n\t * @static\n\t * @param {Boolean} [runTime=false] If true only time elapsed while Ticker was not paused will be returned.\n\t * If false, the value returned will be total time elapsed since the first tick event listener was added.\n\t * @return {Number} Number of milliseconds that have elapsed since Ticker was initialized or -1.\n\t **/\n\tTicker.getTime = function(runTime) {\n\t\treturn Ticker._startTime ? Ticker._getTime() - (runTime ? Ticker._pausedTime : 0) : -1;\n\t};\n\n\t/**\n\t * Similar to the {{#crossLink \"Ticker/getTime\"}}{{/crossLink}} method, but returns the time on the most recent {{#crossLink \"Ticker/tick:event\"}}{{/crossLink}}\n\t * event object.\n\t * @method getEventTime\n\t * @static\n\t * @param runTime {Boolean} [runTime=false] If true, the runTime property will be returned instead of time.\n\t * @returns {number} The time or runTime property from the most recent tick event or -1.\n\t */\n\tTicker.getEventTime = function(runTime) {\n\t\treturn Ticker._startTime ? (Ticker._lastTime || Ticker._startTime) - (runTime ? Ticker._pausedTime : 0) : -1;\n\t};\n\t\n\t/**\n\t * Returns the number of ticks that have been broadcast by Ticker.\n\t * @method getTicks\n\t * @static\n\t * @param {Boolean} pauseable Indicates whether to include ticks that would have been broadcast\n\t * while Ticker was paused. If true only tick events broadcast while Ticker is not paused will be returned.\n\t * If false, tick events that would have been broadcast while Ticker was paused will be included in the return\n\t * value. The default value is false.\n\t * @return {Number} of ticks that have been broadcast.\n\t **/\n\tTicker.getTicks = function(pauseable) {\n\t\treturn  Ticker._ticks - (pauseable ? Ticker._pausedTicks : 0);\n\t};\n\n\n// private static methods:\n\t/**\n\t * @method _handleSynch\n\t * @static\n\t * @protected\n\t **/\n\tTicker._handleSynch = function() {\n\t\tTicker._timerId = null;\n\t\tTicker._setupTick();\n\n\t\t// run if enough time has elapsed, with a little bit of flexibility to be early:\n\t\tif (Ticker._getTime() - Ticker._lastTime >= (Ticker._interval-1)*0.97) {\n\t\t\tTicker._tick();\n\t\t}\n\t};\n\n\t/**\n\t * @method _handleRAF\n\t * @static\n\t * @protected\n\t **/\n\tTicker._handleRAF = function() {\n\t\tTicker._timerId = null;\n\t\tTicker._setupTick();\n\t\tTicker._tick();\n\t};\n\n\t/**\n\t * @method _handleTimeout\n\t * @static\n\t * @protected\n\t **/\n\tTicker._handleTimeout = function() {\n\t\tTicker._timerId = null;\n\t\tTicker._setupTick();\n\t\tTicker._tick();\n\t};\n\n\t/**\n\t * @method _setupTick\n\t * @static\n\t * @protected\n\t **/\n\tTicker._setupTick = function() {\n\t\tif (Ticker._timerId != null) { return; } // avoid duplicates\n\n\t\tvar mode = Ticker.timingMode||(Ticker.useRAF&&Ticker.RAF_SYNCHED);\n\t\tif (mode == Ticker.RAF_SYNCHED || mode == Ticker.RAF) {\n\t\t\tvar f = window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame;\n\t\t\tif (f) {\n\t\t\t\tTicker._timerId = f(mode == Ticker.RAF ? Ticker._handleRAF : Ticker._handleSynch);\n\t\t\t\tTicker._raf = true;\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tTicker._raf = false;\n\t\tTicker._timerId = setTimeout(Ticker._handleTimeout, Ticker._interval);\n\t};\n\n\t/**\n\t * @method _tick\n\t * @static\n\t * @protected\n\t **/\n\tTicker._tick = function() {\n\t\tvar paused = Ticker.paused;\n\t\tvar time = Ticker._getTime();\n\t\tvar elapsedTime = time-Ticker._lastTime;\n\t\tTicker._lastTime = time;\n\t\tTicker._ticks++;\n\t\t\n\t\tif (paused) {\n\t\t\tTicker._pausedTicks++;\n\t\t\tTicker._pausedTime += elapsedTime;\n\t\t}\n\t\t\n\t\tif (Ticker.hasEventListener(\"tick\")) {\n\t\t\tvar event = new createjs.Event(\"tick\");\n\t\t\tvar maxDelta = Ticker.maxDelta;\n\t\t\tevent.delta = (maxDelta && elapsedTime > maxDelta) ? maxDelta : elapsedTime;\n\t\t\tevent.paused = paused;\n\t\t\tevent.time = time;\n\t\t\tevent.runTime = time-Ticker._pausedTime;\n\t\t\tTicker.dispatchEvent(event);\n\t\t}\n\t\t\n\t\tTicker._tickTimes.unshift(Ticker._getTime()-time);\n\t\twhile (Ticker._tickTimes.length > 100) { Ticker._tickTimes.pop(); }\n\n\t\tTicker._times.unshift(time);\n\t\twhile (Ticker._times.length > 100) { Ticker._times.pop(); }\n\t};\n\n\t/**\n\t * @method _getTime\n\t * @static\n\t * @protected\n\t **/\n\tvar now = window.performance && (performance.now || performance.mozNow || performance.msNow || performance.oNow || performance.webkitNow);\n\tTicker._getTime = function() {\n\t\treturn ((now&&now.call(performance))||(new Date().getTime())) - Ticker._startTime;\n\t};\n\n\n\tcreatejs.Ticker = Ticker;\n}());\n\n//##############################################################################\n// UID.js\n//##############################################################################\n\n(function() {\n\t\"use strict\";\n\n\n// constructor:\n\t/**\n\t * Global utility for generating sequential unique ID numbers. The UID class uses a static interface (ex. <code>UID.get()</code>)\n\t * and should not be instantiated.\n\t * @class UID\n\t * @static\n\t **/\n\tfunction UID() {\n\t\tthrow \"UID cannot be instantiated\";\n\t}\n\n\n// private static properties:\n\t/**\n\t * @property _nextID\n\t * @type Number\n\t * @protected\n\t **/\n\tUID._nextID = 0;\n\n\n// public static methods:\n\t/**\n\t * Returns the next unique id.\n\t * @method get\n\t * @return {Number} The next unique id\n\t * @static\n\t **/\n\tUID.get = function() {\n\t\treturn UID._nextID++;\n\t};\n\n\n\tcreatejs.UID = UID;\n}());\n\n//##############################################################################\n// MouseEvent.js\n//##############################################################################\n\n(function() {\n\t\"use strict\";\n\n\n// constructor:\n\t/**\n\t * Passed as the parameter to all mouse/pointer/touch related events. For a listing of mouse events and their properties,\n\t * see the {{#crossLink \"DisplayObject\"}}{{/crossLink}} and {{#crossLink \"Stage\"}}{{/crossLink}} event listings.\n\t * @class MouseEvent\n\t * @param {String} type The event type.\n\t * @param {Boolean} bubbles Indicates whether the event will bubble through the display list.\n\t * @param {Boolean} cancelable Indicates whether the default behaviour of this event can be cancelled.\n\t * @param {Number} stageX The normalized x position relative to the stage.\n\t * @param {Number} stageY The normalized y position relative to the stage.\n\t * @param {MouseEvent} nativeEvent The native DOM event related to this mouse event.\n\t * @param {Number} pointerID The unique id for the pointer.\n\t * @param {Boolean} primary Indicates whether this is the primary pointer in a multitouch environment.\n\t * @param {Number} rawX The raw x position relative to the stage.\n\t * @param {Number} rawY The raw y position relative to the stage.\n\t * @param {DisplayObject} relatedTarget The secondary target for the event.\n\t * @extends Event\n\t * @constructor\n\t **/\n\tfunction MouseEvent(type, bubbles, cancelable, stageX, stageY, nativeEvent, pointerID, primary, rawX, rawY, relatedTarget) {\n\t\tthis.Event_constructor(type, bubbles, cancelable);\n\t\t\n\t\t\n\t// public properties:\n\t\t/**\n\t\t * The normalized x position on the stage. This will always be within the range 0 to stage width.\n\t\t * @property stageX\n\t\t * @type Number\n\t\t*/\n\t\tthis.stageX = stageX;\n\t\n\t\t/**\n\t\t * The normalized y position on the stage. This will always be within the range 0 to stage height.\n\t\t * @property stageY\n\t\t * @type Number\n\t\t **/\n\t\tthis.stageY = stageY;\n\t\n\t\t/**\n\t\t * The raw x position relative to the stage. Normally this will be the same as the stageX value, unless\n\t\t * stage.mouseMoveOutside is true and the pointer is outside of the stage bounds.\n\t\t * @property rawX\n\t\t * @type Number\n\t\t*/\n\t\tthis.rawX = (rawX==null)?stageX:rawX;\n\t\n\t\t/**\n\t\t * The raw y position relative to the stage. Normally this will be the same as the stageY value, unless\n\t\t * stage.mouseMoveOutside is true and the pointer is outside of the stage bounds.\n\t\t * @property rawY\n\t\t * @type Number\n\t\t*/\n\t\tthis.rawY = (rawY==null)?stageY:rawY;\n\t\n\t\t/**\n\t\t * The native MouseEvent generated by the browser. The properties and API for this\n\t\t * event may differ between browsers. This property will be null if the\n\t\t * EaselJS property was not directly generated from a native MouseEvent.\n\t\t * @property nativeEvent\n\t\t * @type HtmlMouseEvent\n\t\t * @default null\n\t\t **/\n\t\tthis.nativeEvent = nativeEvent;\n\t\n\t\t/**\n\t\t * The unique id for the pointer (touch point or cursor). This will be either -1 for the mouse, or the system\n\t\t * supplied id value.\n\t\t * @property pointerID\n\t\t * @type {Number}\n\t\t */\n\t\tthis.pointerID = pointerID;\n\t\n\t\t/**\n\t\t * Indicates whether this is the primary pointer in a multitouch environment. This will always be true for the mouse.\n\t\t * For touch pointers, the first pointer in the current stack will be considered the primary pointer.\n\t\t * @property primary\n\t\t * @type {Boolean}\n\t\t */\n\t\tthis.primary = !!primary;\n\t\t\n\t\t/**\n\t\t * The secondary target for the event, if applicable. This is used for mouseout/rollout\n\t\t * events to indicate the object that the mouse entered from, mouseover/rollover for the object the mouse exited,\n\t\t * and stagemousedown/stagemouseup events for the object that was the under the cursor, if any.\n\t\t * \n\t\t * Only valid interaction targets will be returned (ie. objects with mouse listeners or a cursor set).\n\t\t * @property relatedTarget\n\t\t * @type {DisplayObject}\n\t\t */\n\t\tthis.relatedTarget = relatedTarget;\n\t}\n\tvar p = createjs.extend(MouseEvent, createjs.Event);\n\n\t// TODO: deprecated\n\t// p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\n\t\n\t\n// getter / setters:\n\t/**\n\t * Returns the x position of the mouse in the local coordinate system of the current target (ie. the dispatcher).\n\t * @property localX\n\t * @type {Number}\n\t * @readonly\n\t */\n\tp._get_localX = function() {\n\t\treturn this.currentTarget.globalToLocal(this.rawX, this.rawY).x;\n\t};\n\t\n\t/**\n\t * Returns the y position of the mouse in the local coordinate system of the current target (ie. the dispatcher).\n\t * @property localY\n\t * @type {Number}\n\t * @readonly\n\t */\n\tp._get_localY = function() {\n\t\treturn this.currentTarget.globalToLocal(this.rawX, this.rawY).y;\n\t};\n\t\n\t/**\n\t * Indicates whether the event was generated by a touch input (versus a mouse input).\n\t * @property isTouch\n\t * @type {Boolean}\n\t * @readonly\n\t */\n\tp._get_isTouch = function() {\n\t\treturn this.pointerID !== -1;\n\t};\n\t\n\t\n\ttry {\n\t\tObject.defineProperties(p, {\n\t\t\tlocalX: { get: p._get_localX },\n\t\t\tlocalY: { get: p._get_localY },\n\t\t\tisTouch: { get: p._get_isTouch }\n\t\t});\n\t} catch (e) {} // TODO: use Log\n\n\n// public methods:\n\t/**\n\t * Returns a clone of the MouseEvent instance.\n\t * @method clone\n\t * @return {MouseEvent} a clone of the MouseEvent instance.\n\t **/\n\tp.clone = function() {\n\t\treturn new MouseEvent(this.type, this.bubbles, this.cancelable, this.stageX, this.stageY, this.nativeEvent, this.pointerID, this.primary, this.rawX, this.rawY);\n\t};\n\n\t/**\n\t * Returns a string representation of this object.\n\t * @method toString\n\t * @return {String} a string representation of the instance.\n\t **/\n\tp.toString = function() {\n\t\treturn \"[MouseEvent (type=\"+this.type+\" stageX=\"+this.stageX+\" stageY=\"+this.stageY+\")]\";\n\t};\n\n\n\tcreatejs.MouseEvent = createjs.promote(MouseEvent, \"Event\");\n}());\n\n//##############################################################################\n// Matrix2D.js\n//##############################################################################\n\n(function() {\n\t\"use strict\";\n\n\n// constructor:\n\t/**\n\t * Represents an affine transformation matrix, and provides tools for constructing and concatenating matrices.\n\t *\n\t * This matrix can be visualized as:\n\t *\n\t * \t[ a  c  tx\n\t * \t  b  d  ty\n\t * \t  0  0  1  ]\n\t *\n\t * Note the locations of b and c.\n\t *\n\t * @class Matrix2D\n\t * @param {Number} [a=1] Specifies the a property for the new matrix.\n\t * @param {Number} [b=0] Specifies the b property for the new matrix.\n\t * @param {Number} [c=0] Specifies the c property for the new matrix.\n\t * @param {Number} [d=1] Specifies the d property for the new matrix.\n\t * @param {Number} [tx=0] Specifies the tx property for the new matrix.\n\t * @param {Number} [ty=0] Specifies the ty property for the new matrix.\n\t * @constructor\n\t **/\n\tfunction Matrix2D(a, b, c, d, tx, ty) {\n\t\tthis.setValues(a,b,c,d,tx,ty);\n\t\t\n\t// public properties:\n\t\t// assigned in the setValues method.\n\t\t/**\n\t\t * Position (0, 0) in a 3x3 affine transformation matrix.\n\t\t * @property a\n\t\t * @type Number\n\t\t **/\n\t\n\t\t/**\n\t\t * Position (0, 1) in a 3x3 affine transformation matrix.\n\t\t * @property b\n\t\t * @type Number\n\t\t **/\n\t\n\t\t/**\n\t\t * Position (1, 0) in a 3x3 affine transformation matrix.\n\t\t * @property c\n\t\t * @type Number\n\t\t **/\n\t\n\t\t/**\n\t\t * Position (1, 1) in a 3x3 affine transformation matrix.\n\t\t * @property d\n\t\t * @type Number\n\t\t **/\n\t\n\t\t/**\n\t\t * Position (2, 0) in a 3x3 affine transformation matrix.\n\t\t * @property tx\n\t\t * @type Number\n\t\t **/\n\t\n\t\t/**\n\t\t * Position (2, 1) in a 3x3 affine transformation matrix.\n\t\t * @property ty\n\t\t * @type Number\n\t\t **/\n\t}\n\tvar p = Matrix2D.prototype;\n\n\t/**\n\t * <strong>REMOVED</strong>. Removed in favor of using `MySuperClass_constructor`.\n\t * See {{#crossLink \"Utility Methods/extend\"}}{{/crossLink}} and {{#crossLink \"Utility Methods/promote\"}}{{/crossLink}}\n\t * for details.\n\t *\n\t * There is an inheritance tutorial distributed with EaselJS in /tutorials/Inheritance.\n\t *\n\t * @method initialize\n\t * @protected\n\t * @deprecated\n\t */\n\t// p.initialize = function() {}; // searchable for devs wondering where it is.\n\n\n// constants:\n\t/**\n\t * Multiplier for converting degrees to radians. Used internally by Matrix2D.\n\t * @property DEG_TO_RAD\n\t * @static\n\t * @final\n\t * @type Number\n\t * @readonly\n\t **/\n\tMatrix2D.DEG_TO_RAD = Math.PI/180;\n\n\n// static public properties:\n\t/**\n\t * An identity matrix, representing a null transformation.\n\t * @property identity\n\t * @static\n\t * @type Matrix2D\n\t * @readonly\n\t **/\n\tMatrix2D.identity = null; // set at bottom of class definition.\n\t\n\n// public methods:\n\t/**\n\t * Sets the specified values on this instance. \n\t * @method setValues\n\t * @param {Number} [a=1] Specifies the a property for the new matrix.\n\t * @param {Number} [b=0] Specifies the b property for the new matrix.\n\t * @param {Number} [c=0] Specifies the c property for the new matrix.\n\t * @param {Number} [d=1] Specifies the d property for the new matrix.\n\t * @param {Number} [tx=0] Specifies the tx property for the new matrix.\n\t * @param {Number} [ty=0] Specifies the ty property for the new matrix.\n\t * @return {Matrix2D} This instance. Useful for chaining method calls.\n\t*/\n\tp.setValues = function(a, b, c, d, tx, ty) {\n\t\t// don't forget to update docs in the constructor if these change:\n\t\tthis.a = (a == null) ? 1 : a;\n\t\tthis.b = b || 0;\n\t\tthis.c = c || 0;\n\t\tthis.d = (d == null) ? 1 : d;\n\t\tthis.tx = tx || 0;\n\t\tthis.ty = ty || 0;\n\t\treturn this;\n\t};\n\n\t/**\n\t * Appends the specified matrix properties to this matrix. All parameters are required.\n\t * This is the equivalent of multiplying `(this matrix) * (specified matrix)`.\n\t * @method append\n\t * @param {Number} a\n\t * @param {Number} b\n\t * @param {Number} c\n\t * @param {Number} d\n\t * @param {Number} tx\n\t * @param {Number} ty\n\t * @return {Matrix2D} This matrix. Useful for chaining method calls.\n\t **/\n\tp.append = function(a, b, c, d, tx, ty) {\n\t\tvar a1 = this.a;\n\t\tvar b1 = this.b;\n\t\tvar c1 = this.c;\n\t\tvar d1 = this.d;\n\t\tif (a != 1 || b != 0 || c != 0 || d != 1) {\n\t\t\tthis.a  = a1*a+c1*b;\n\t\t\tthis.b  = b1*a+d1*b;\n\t\t\tthis.c  = a1*c+c1*d;\n\t\t\tthis.d  = b1*c+d1*d;\n\t\t}\n\t\tthis.tx = a1*tx+c1*ty+this.tx;\n\t\tthis.ty = b1*tx+d1*ty+this.ty;\n\t\treturn this;\n\t};\n\n\t/**\n\t * Prepends the specified matrix properties to this matrix.\n\t * This is the equivalent of multiplying `(specified matrix) * (this matrix)`.\n\t * All parameters are required.\n\t * @method prepend\n\t * @param {Number} a\n\t * @param {Number} b\n\t * @param {Number} c\n\t * @param {Number} d\n\t * @param {Number} tx\n\t * @param {Number} ty\n\t * @return {Matrix2D} This matrix. Useful for chaining method calls.\n\t **/\n\tp.prepend = function(a, b, c, d, tx, ty) {\n\t\tvar a1 = this.a;\n\t\tvar c1 = this.c;\n\t\tvar tx1 = this.tx;\n\n\t\tthis.a  = a*a1+c*this.b;\n\t\tthis.b  = b*a1+d*this.b;\n\t\tthis.c  = a*c1+c*this.d;\n\t\tthis.d  = b*c1+d*this.d;\n\t\tthis.tx = a*tx1+c*this.ty+tx;\n\t\tthis.ty = b*tx1+d*this.ty+ty;\n\t\treturn this;\n\t};\n\n\t/**\n\t * Appends the specified matrix to this matrix.\n\t * This is the equivalent of multiplying `(this matrix) * (specified matrix)`.\n\t * @method appendMatrix\n\t * @param {Matrix2D} matrix\n\t * @return {Matrix2D} This matrix. Useful for chaining method calls.\n\t **/\n\tp.appendMatrix = function(matrix) {\n\t\treturn this.append(matrix.a, matrix.b, matrix.c, matrix.d, matrix.tx, matrix.ty);\n\t};\n\n\t/**\n\t * Prepends the specified matrix to this matrix.\n\t * This is the equivalent of multiplying `(specified matrix) * (this matrix)`.\n\t * For example, you could calculate the combined transformation for a child object using:\n\t * \n\t * \tvar o = myDisplayObject;\n\t * \tvar mtx = o.getMatrix();\n\t * \twhile (o = o.parent) {\n\t * \t\t// prepend each parent's transformation in turn:\n\t * \t\to.prependMatrix(o.getMatrix());\n\t * \t}\n\t * @method prependMatrix\n\t * @param {Matrix2D} matrix\n\t * @return {Matrix2D} This matrix. Useful for chaining method calls.\n\t **/\n\tp.prependMatrix = function(matrix) {\n\t\treturn this.prepend(matrix.a, matrix.b, matrix.c, matrix.d, matrix.tx, matrix.ty);\n\t};\n\n\t/**\n\t * Generates matrix properties from the specified display object transform properties, and appends them to this matrix.\n\t * For example, you can use this to generate a matrix representing the transformations of a display object:\n\t * \n\t * \tvar mtx = new createjs.Matrix2D();\n\t * \tmtx.appendTransform(o.x, o.y, o.scaleX, o.scaleY, o.rotation);\n\t * @method appendTransform\n\t * @param {Number} x\n\t * @param {Number} y\n\t * @param {Number} scaleX\n\t * @param {Number} scaleY\n\t * @param {Number} rotation\n\t * @param {Number} skewX\n\t * @param {Number} skewY\n\t * @param {Number} regX Optional.\n\t * @param {Number} regY Optional.\n\t * @return {Matrix2D} This matrix. Useful for chaining method calls.\n\t **/\n\tp.appendTransform = function(x, y, scaleX, scaleY, rotation, skewX, skewY, regX, regY) {\n\t\tif (rotation%360) {\n\t\t\tvar r = rotation*Matrix2D.DEG_TO_RAD;\n\t\t\tvar cos = Math.cos(r);\n\t\t\tvar sin = Math.sin(r);\n\t\t} else {\n\t\t\tcos = 1;\n\t\t\tsin = 0;\n\t\t}\n\n\t\tif (skewX || skewY) {\n\t\t\t// TODO: can this be combined into a single append operation?\n\t\t\tskewX *= Matrix2D.DEG_TO_RAD;\n\t\t\tskewY *= Matrix2D.DEG_TO_RAD;\n\t\t\tthis.append(Math.cos(skewY), Math.sin(skewY), -Math.sin(skewX), Math.cos(skewX), x, y);\n\t\t\tthis.append(cos*scaleX, sin*scaleX, -sin*scaleY, cos*scaleY, 0, 0);\n\t\t} else {\n\t\t\tthis.append(cos*scaleX, sin*scaleX, -sin*scaleY, cos*scaleY, x, y);\n\t\t}\n\t\t\n\t\tif (regX || regY) {\n\t\t\t// append the registration offset:\n\t\t\tthis.tx -= regX*this.a+regY*this.c; \n\t\t\tthis.ty -= regX*this.b+regY*this.d;\n\t\t}\n\t\treturn this;\n\t};\n\n\t/**\n\t * Generates matrix properties from the specified display object transform properties, and prepends them to this matrix.\n\t * For example, you could calculate the combined transformation for a child object using:\n\t * \n\t * \tvar o = myDisplayObject;\n\t * \tvar mtx = new createjs.Matrix2D();\n\t * \tdo  {\n\t * \t\t// prepend each parent's transformation in turn:\n\t * \t\tmtx.prependTransform(o.x, o.y, o.scaleX, o.scaleY, o.rotation, o.skewX, o.skewY, o.regX, o.regY);\n\t * \t} while (o = o.parent);\n\t * \t\n\t * \tNote that the above example would not account for {{#crossLink \"DisplayObject/transformMatrix:property\"}}{{/crossLink}}\n\t * \tvalues. See {{#crossLink \"Matrix2D/prependMatrix\"}}{{/crossLink}} for an example that does.\n\t * @method prependTransform\n\t * @param {Number} x\n\t * @param {Number} y\n\t * @param {Number} scaleX\n\t * @param {Number} scaleY\n\t * @param {Number} rotation\n\t * @param {Number} skewX\n\t * @param {Number} skewY\n\t * @param {Number} regX Optional.\n\t * @param {Number} regY Optional.\n\t * @return {Matrix2D} This matrix. Useful for chaining method calls.\n\t **/\n\tp.prependTransform = function(x, y, scaleX, scaleY, rotation, skewX, skewY, regX, regY) {\n\t\tif (rotation%360) {\n\t\t\tvar r = rotation*Matrix2D.DEG_TO_RAD;\n\t\t\tvar cos = Math.cos(r);\n\t\t\tvar sin = Math.sin(r);\n\t\t} else {\n\t\t\tcos = 1;\n\t\t\tsin = 0;\n\t\t}\n\n\t\tif (regX || regY) {\n\t\t\t// prepend the registration offset:\n\t\t\tthis.tx -= regX; this.ty -= regY;\n\t\t}\n\t\tif (skewX || skewY) {\n\t\t\t// TODO: can this be combined into a single prepend operation?\n\t\t\tskewX *= Matrix2D.DEG_TO_RAD;\n\t\t\tskewY *= Matrix2D.DEG_TO_RAD;\n\t\t\tthis.prepend(cos*scaleX, sin*scaleX, -sin*scaleY, cos*scaleY, 0, 0);\n\t\t\tthis.prepend(Math.cos(skewY), Math.sin(skewY), -Math.sin(skewX), Math.cos(skewX), x, y);\n\t\t} else {\n\t\t\tthis.prepend(cos*scaleX, sin*scaleX, -sin*scaleY, cos*scaleY, x, y);\n\t\t}\n\t\treturn this;\n\t};\n\n\t/**\n\t * Applies a clockwise rotation transformation to the matrix.\n\t * @method rotate\n\t * @param {Number} angle The angle to rotate by, in degrees. To use a value in radians, multiply it by `180/Math.PI`.\n\t * @return {Matrix2D} This matrix. Useful for chaining method calls.\n\t **/\n\tp.rotate = function(angle) {\n\t\tangle = angle*Matrix2D.DEG_TO_RAD;\n\t\tvar cos = Math.cos(angle);\n\t\tvar sin = Math.sin(angle);\n\n\t\tvar a1 = this.a;\n\t\tvar b1 = this.b;\n\n\t\tthis.a = a1*cos+this.c*sin;\n\t\tthis.b = b1*cos+this.d*sin;\n\t\tthis.c = -a1*sin+this.c*cos;\n\t\tthis.d = -b1*sin+this.d*cos;\n\t\treturn this;\n\t};\n\n\t/**\n\t * Applies a skew transformation to the matrix.\n\t * @method skew\n\t * @param {Number} skewX The amount to skew horizontally in degrees. To use a value in radians, multiply it by `180/Math.PI`.\n\t * @param {Number} skewY The amount to skew vertically in degrees.\n\t * @return {Matrix2D} This matrix. Useful for chaining method calls.\n\t*/\n\tp.skew = function(skewX, skewY) {\n\t\tskewX = skewX*Matrix2D.DEG_TO_RAD;\n\t\tskewY = skewY*Matrix2D.DEG_TO_RAD;\n\t\tthis.append(Math.cos(skewY), Math.sin(skewY), -Math.sin(skewX), Math.cos(skewX), 0, 0);\n\t\treturn this;\n\t};\n\n\t/**\n\t * Applies a scale transformation to the matrix.\n\t * @method scale\n\t * @param {Number} x The amount to scale horizontally. E.G. a value of 2 will double the size in the X direction, and 0.5 will halve it.\n\t * @param {Number} y The amount to scale vertically.\n\t * @return {Matrix2D} This matrix. Useful for chaining method calls.\n\t **/\n\tp.scale = function(x, y) {\n\t\tthis.a *= x;\n\t\tthis.b *= x;\n\t\tthis.c *= y;\n\t\tthis.d *= y;\n\t\t//this.tx *= x;\n\t\t//this.ty *= y;\n\t\treturn this;\n\t};\n\n\t/**\n\t * Translates the matrix on the x and y axes.\n\t * @method translate\n\t * @param {Number} x\n\t * @param {Number} y\n\t * @return {Matrix2D} This matrix. Useful for chaining method calls.\n\t **/\n\tp.translate = function(x, y) {\n\t\tthis.tx += this.a*x + this.c*y;\n\t\tthis.ty += this.b*x + this.d*y;\n\t\treturn this;\n\t};\n\n\t/**\n\t * Sets the properties of the matrix to those of an identity matrix (one that applies a null transformation).\n\t * @method identity\n\t * @return {Matrix2D} This matrix. Useful for chaining method calls.\n\t **/\n\tp.identity = function() {\n\t\tthis.a = this.d = 1;\n\t\tthis.b = this.c = this.tx = this.ty = 0;\n\t\treturn this;\n\t};\n\n\t/**\n\t * Inverts the matrix, causing it to perform the opposite transformation.\n\t * @method invert\n\t * @return {Matrix2D} This matrix. Useful for chaining method calls.\n\t **/\n\tp.invert = function() {\n\t\tvar a1 = this.a;\n\t\tvar b1 = this.b;\n\t\tvar c1 = this.c;\n\t\tvar d1 = this.d;\n\t\tvar tx1 = this.tx;\n\t\tvar n = a1*d1-b1*c1;\n\n\t\tthis.a = d1/n;\n\t\tthis.b = -b1/n;\n\t\tthis.c = -c1/n;\n\t\tthis.d = a1/n;\n\t\tthis.tx = (c1*this.ty-d1*tx1)/n;\n\t\tthis.ty = -(a1*this.ty-b1*tx1)/n;\n\t\treturn this;\n\t};\n\n\t/**\n\t * Returns true if the matrix is an identity matrix.\n\t * @method isIdentity\n\t * @return {Boolean}\n\t **/\n\tp.isIdentity = function() {\n\t\treturn this.tx === 0 && this.ty === 0 && this.a === 1 && this.b === 0 && this.c === 0 && this.d === 1;\n\t};\n\t\n\t/**\n\t * Returns true if this matrix is equal to the specified matrix (all property values are equal).\n\t * @method equals\n\t * @param {Matrix2D} matrix The matrix to compare.\n\t * @return {Boolean}\n\t **/\n\tp.equals = function(matrix) {\n\t\treturn this.tx === matrix.tx && this.ty === matrix.ty && this.a === matrix.a && this.b === matrix.b && this.c === matrix.c && this.d === matrix.d;\n\t};\n\n\t/**\n\t * Transforms a point according to this matrix.\n\t * @method transformPoint\n\t * @param {Number} x The x component of the point to transform.\n\t * @param {Number} y The y component of the point to transform.\n\t * @param {Point | Object} [pt] An object to copy the result into. If omitted a generic object with x/y properties will be returned.\n\t * @return {Point} This matrix. Useful for chaining method calls.\n\t **/\n\tp.transformPoint = function(x, y, pt) {\n\t\tpt = pt||{};\n\t\tpt.x = x*this.a+y*this.c+this.tx;\n\t\tpt.y = x*this.b+y*this.d+this.ty;\n\t\treturn pt;\n\t};\n\n\t/**\n\t * Decomposes the matrix into transform properties (x, y, scaleX, scaleY, and rotation). Note that these values\n\t * may not match the transform properties you used to generate the matrix, though they will produce the same visual\n\t * results.\n\t * @method decompose\n\t * @param {Object} target The object to apply the transform properties to. If null, then a new object will be returned.\n\t * @return {Object} The target, or a new generic object with the transform properties applied.\n\t*/\n\tp.decompose = function(target) {\n\t\t// TODO: it would be nice to be able to solve for whether the matrix can be decomposed into only scale/rotation even when scale is negative\n\t\tif (target == null) { target = {}; }\n\t\ttarget.x = this.tx;\n\t\ttarget.y = this.ty;\n\t\ttarget.scaleX = Math.sqrt(this.a * this.a + this.b * this.b);\n\t\ttarget.scaleY = Math.sqrt(this.c * this.c + this.d * this.d);\n\n\t\tvar skewX = Math.atan2(-this.c, this.d);\n\t\tvar skewY = Math.atan2(this.b, this.a);\n\n\t\tvar delta = Math.abs(1-skewX/skewY);\n\t\tif (delta < 0.00001) { // effectively identical, can use rotation:\n\t\t\ttarget.rotation = skewY/Matrix2D.DEG_TO_RAD;\n\t\t\tif (this.a < 0 && this.d >= 0) {\n\t\t\t\ttarget.rotation += (target.rotation <= 0) ? 180 : -180;\n\t\t\t}\n\t\t\ttarget.skewX = target.skewY = 0;\n\t\t} else {\n\t\t\ttarget.skewX = skewX/Matrix2D.DEG_TO_RAD;\n\t\t\ttarget.skewY = skewY/Matrix2D.DEG_TO_RAD;\n\t\t}\n\t\treturn target;\n\t};\n\t\n\t/**\n\t * Copies all properties from the specified matrix to this matrix.\n\t * @method copy\n\t * @param {Matrix2D} matrix The matrix to copy properties from.\n\t * @return {Matrix2D} This matrix. Useful for chaining method calls.\n\t*/\n\tp.copy = function(matrix) {\n\t\treturn this.setValues(matrix.a, matrix.b, matrix.c, matrix.d, matrix.tx, matrix.ty);\n\t};\n\n\t/**\n\t * Returns a clone of the Matrix2D instance.\n\t * @method clone\n\t * @return {Matrix2D} a clone of the Matrix2D instance.\n\t **/\n\tp.clone = function() {\n\t\treturn new Matrix2D(this.a, this.b, this.c, this.d, this.tx, this.ty);\n\t};\n\n\t/**\n\t * Returns a string representation of this object.\n\t * @method toString\n\t * @return {String} a string representation of the instance.\n\t **/\n\tp.toString = function() {\n\t\treturn \"[Matrix2D (a=\"+this.a+\" b=\"+this.b+\" c=\"+this.c+\" d=\"+this.d+\" tx=\"+this.tx+\" ty=\"+this.ty+\")]\";\n\t};\n\n\t// this has to be populated after the class is defined:\n\tMatrix2D.identity = new Matrix2D();\n\n\n\tcreatejs.Matrix2D = Matrix2D;\n}());\n\n//##############################################################################\n// DisplayProps.js\n//##############################################################################\n\n(function() {\n\t\"use strict\";\n\n\t/**\n\t * Used for calculating and encapsulating display related properties.\n\t * @class DisplayProps\n\t * @param {Number} [visible=true] Visible value.\n\t * @param {Number} [alpha=1] Alpha value.\n\t * @param {Number} [shadow=null] A Shadow instance or null.\n\t * @param {Number} [compositeOperation=null] A compositeOperation value or null.\n\t * @param {Number} [matrix] A transformation matrix. Defaults to a new identity matrix.\n\t * @constructor\n\t **/\n\tfunction DisplayProps(visible, alpha, shadow, compositeOperation, matrix) {\n\t\tthis.setValues(visible, alpha, shadow, compositeOperation, matrix);\n\t\t\n\t// public properties:\n\t\t// assigned in the setValues method.\n\t\t/**\n\t\t * Property representing the alpha that will be applied to a display object.\n\t\t * @property alpha\n\t\t * @type Number\n\t\t **/\n\t\n\t\t/**\n\t\t * Property representing the shadow that will be applied to a display object.\n\t\t * @property shadow\n\t\t * @type Shadow\n\t\t **/\n\t\n\t\t/**\n\t\t * Property representing the compositeOperation that will be applied to a display object.\n\t\t * You can find a list of valid composite operations at:\n\t\t * <a href=\"https://developer.mozilla.org/en/Canvas_tutorial/Compositing\">https://developer.mozilla.org/en/Canvas_tutorial/Compositing</a>\n\t\t * @property compositeOperation\n\t\t * @type String\n\t\t **/\n\t\t\n\t\t/**\n\t\t * Property representing the value for visible that will be applied to a display object.\n\t\t * @property visible\n\t\t * @type Boolean\n\t\t **/\n\t\t\n\t\t/**\n\t\t * The transformation matrix that will be applied to a display object.\n\t\t * @property matrix\n\t\t * @type Matrix2D\n\t\t **/\n\t}\n\tvar p = DisplayProps.prototype;\n\n// initialization:\n\t/**\n\t * Reinitializes the instance with the specified values.\n\t * @method setValues\n\t * @param {Number} [visible=true] Visible value.\n\t * @param {Number} [alpha=1] Alpha value.\n\t * @param {Number} [shadow=null] A Shadow instance or null.\n\t * @param {Number} [compositeOperation=null] A compositeOperation value or null.\n\t * @param {Number} [matrix] A transformation matrix. Defaults to an identity matrix.\n\t * @return {DisplayProps} This instance. Useful for chaining method calls.\n\t * @chainable\n\t*/\n\tp.setValues = function (visible, alpha, shadow, compositeOperation, matrix) {\n\t\tthis.visible = visible == null ? true : !!visible;\n\t\tthis.alpha = alpha == null ? 1 : alpha;\n\t\tthis.shadow = shadow;\n\t\tthis.compositeOperation = compositeOperation;\n\t\tthis.matrix = matrix || (this.matrix&&this.matrix.identity()) || new createjs.Matrix2D();\n\t\treturn this;\n\t};\n\n// public methods:\n\t/**\n\t * Appends the specified display properties. This is generally used to apply a child's properties its parent's.\n\t * @method append\n\t * @param {Boolean} visible desired visible value\n\t * @param {Number} alpha desired alpha value\n\t * @param {Shadow} shadow desired shadow value\n\t * @param {String} compositeOperation desired composite operation value\n\t * @param {Matrix2D} [matrix] a Matrix2D instance\n\t * @return {DisplayProps} This instance. Useful for chaining method calls.\n\t * @chainable\n\t*/\n\tp.append = function(visible, alpha, shadow, compositeOperation, matrix) {\n\t\tthis.alpha *= alpha;\n\t\tthis.shadow = shadow || this.shadow;\n\t\tthis.compositeOperation = compositeOperation || this.compositeOperation;\n\t\tthis.visible = this.visible && visible;\n\t\tmatrix&&this.matrix.appendMatrix(matrix);\n\t\treturn this;\n\t};\n\t\n\t/**\n\t * Prepends the specified display properties. This is generally used to apply a parent's properties to a child's.\n\t * For example, to get the combined display properties that would be applied to a child, you could use:\n\t * \n\t * \tvar o = myDisplayObject;\n\t * \tvar props = new createjs.DisplayProps();\n\t * \tdo {\n\t * \t\t// prepend each parent's props in turn:\n\t * \t\tprops.prepend(o.visible, o.alpha, o.shadow, o.compositeOperation, o.getMatrix());\n\t * \t} while (o = o.parent);\n\t * \t\n\t * @method prepend\n\t * @param {Boolean} visible desired visible value\n\t * @param {Number} alpha desired alpha value\n\t * @param {Shadow} shadow desired shadow value\n\t * @param {String} compositeOperation desired composite operation value\n\t * @param {Matrix2D} [matrix] a Matrix2D instance\n\t * @return {DisplayProps} This instance. Useful for chaining method calls.\n\t * @chainable\n\t*/\n\tp.prepend = function(visible, alpha, shadow, compositeOperation, matrix) {\n\t\tthis.alpha *= alpha;\n\t\tthis.shadow = this.shadow || shadow;\n\t\tthis.compositeOperation = this.compositeOperation || compositeOperation;\n\t\tthis.visible = this.visible && visible;\n\t\tmatrix&&this.matrix.prependMatrix(matrix);\n\t\treturn this;\n\t};\n\t\n\t/**\n\t * Resets this instance and its matrix to default values.\n\t * @method identity\n\t * @return {DisplayProps} This instance. Useful for chaining method calls.\n\t * @chainable\n\t*/\n\tp.identity = function() {\n\t\tthis.visible = true;\n\t\tthis.alpha = 1;\n\t\tthis.shadow = this.compositeOperation = null;\n\t\tthis.matrix.identity();\n\t\treturn this;\n\t};\n\t\n\t/**\n\t * Returns a clone of the DisplayProps instance. Clones the associated matrix.\n\t * @method clone\n\t * @return {DisplayProps} a clone of the DisplayProps instance.\n\t **/\n\tp.clone = function() {\n\t\treturn new DisplayProps(this.alpha, this.shadow, this.compositeOperation, this.visible, this.matrix.clone());\n\t};\n\n// private methods:\n\n\tcreatejs.DisplayProps = DisplayProps;\n})();\n\n//##############################################################################\n// Point.js\n//##############################################################################\n\n(function() {\n\t\"use strict\";\n\n\n// constructor:\n\t/**\n\t * Represents a point on a 2 dimensional x / y coordinate system.\n\t *\n\t * <h4>Example</h4>\n\t * \n\t *      var point = new createjs.Point(0, 100);\n\t * \n\t * @class Point\n\t * @param {Number} [x=0] X position.\n\t * @param {Number} [y=0] Y position.\n\t * @constructor\n\t **/\n\tfunction Point(x, y) {\n\t \tthis.setValues(x, y);\n\t \t\n\t \t\n\t// public properties:\n\t\t// assigned in the setValues method.\n\t\t/**\n\t\t * X position.\n\t\t * @property x\n\t\t * @type Number\n\t\t **/\n\t\n\t\t/**\n\t\t * Y position.\n\t\t * @property y\n\t\t * @type Number\n\t\t **/\n\t}\n\tvar p = Point.prototype;\n\n\t/**\n\t * <strong>REMOVED</strong>. Removed in favor of using `MySuperClass_constructor`.\n\t * See {{#crossLink \"Utility Methods/extend\"}}{{/crossLink}} and {{#crossLink \"Utility Methods/promote\"}}{{/crossLink}}\n\t * for details.\n\t *\n\t * There is an inheritance tutorial distributed with EaselJS in /tutorials/Inheritance.\n\t *\n\t * @method initialize\n\t * @protected\n\t * @deprecated\n\t */\n\t// p.initialize = function() {}; // searchable for devs wondering where it is.\n\n\t\n// public methods:\n\t/** \n\t * Sets the specified values on this instance.\n\t * @method setValues\n\t * @param {Number} [x=0] X position.\n\t * @param {Number} [y=0] Y position.\n\t * @return {Point} This instance. Useful for chaining method calls.\n\t * @chainable\n\t*/\n\tp.setValues = function(x, y) {\n\t\tthis.x = x||0;\n\t\tthis.y = y||0;\n\t\treturn this;\n\t};\n\t\n\t/**\n\t * Copies all properties from the specified point to this point.\n\t * @method copy\n\t * @param {Point} point The point to copy properties from.\n\t * @return {Point} This point. Useful for chaining method calls.\n\t * @chainable\n\t*/\n\tp.copy = function(point) {\n\t\tthis.x = point.x;\n\t\tthis.y = point.y;\n\t\treturn this;\n\t};\n\t\n\t/**\n\t * Returns a clone of the Point instance.\n\t * @method clone\n\t * @return {Point} a clone of the Point instance.\n\t **/\n\tp.clone = function() {\n\t\treturn new Point(this.x, this.y);\n\t};\n\n\t/**\n\t * Returns a string representation of this object.\n\t * @method toString\n\t * @return {String} a string representation of the instance.\n\t **/\n\tp.toString = function() {\n\t\treturn \"[Point (x=\"+this.x+\" y=\"+this.y+\")]\";\n\t};\n\t\n\t\n\tcreatejs.Point = Point;\n}());\n\n//##############################################################################\n// Rectangle.js\n//##############################################################################\n\n(function() {\n\t\"use strict\";\n\n\n// constructor:\n\t/**\n\t * Represents a rectangle as defined by the points (x, y) and (x+width, y+height).\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      var rect = new createjs.Rectangle(0, 0, 100, 100);\n\t *\n\t * @class Rectangle\n\t * @param {Number} [x=0] X position.\n\t * @param {Number} [y=0] Y position.\n\t * @param {Number} [width=0] The width of the Rectangle.\n\t * @param {Number} [height=0] The height of the Rectangle.\n\t * @constructor\n\t **/\n\tfunction Rectangle(x, y, width, height) {\n\t\tthis.setValues(x, y, width, height);\n\t\t\n\t\t\n\t// public properties:\n\t\t// assigned in the setValues method.\n\t\t/**\n\t\t * X position.\n\t\t * @property x\n\t\t * @type Number\n\t\t **/\n\t\n\t\t/**\n\t\t * Y position.\n\t\t * @property y\n\t\t * @type Number\n\t\t **/\n\t\n\t\t/**\n\t\t * Width.\n\t\t * @property width\n\t\t * @type Number\n\t\t **/\n\t\n\t\t/**\n\t\t * Height.\n\t\t * @property height\n\t\t * @type Number\n\t\t **/\n\t}\n\tvar p = Rectangle.prototype;\n\n\t/**\n\t * <strong>REMOVED</strong>. Removed in favor of using `MySuperClass_constructor`.\n\t * See {{#crossLink \"Utility Methods/extend\"}}{{/crossLink}} and {{#crossLink \"Utility Methods/promote\"}}{{/crossLink}}\n\t * for details.\n\t *\n\t * There is an inheritance tutorial distributed with EaselJS in /tutorials/Inheritance.\n\t *\n\t * @method initialize\n\t * @protected\n\t * @deprecated\n\t */\n\t// p.initialize = function() {}; // searchable for devs wondering where it is.\n\n\n// public methods:\n\t/** \n\t * Sets the specified values on this instance.\n\t * @method setValues\n\t * @param {Number} [x=0] X position.\n\t * @param {Number} [y=0] Y position.\n\t * @param {Number} [width=0] The width of the Rectangle.\n\t * @param {Number} [height=0] The height of the Rectangle.\n\t * @return {Rectangle} This instance. Useful for chaining method calls.\n\t * @chainable\n\t*/\n\tp.setValues = function(x, y, width, height) {\n\t\t// don't forget to update docs in the constructor if these change:\n\t\tthis.x = x||0;\n\t\tthis.y = y||0;\n\t\tthis.width = width||0;\n\t\tthis.height = height||0;\n\t\treturn this;\n\t};\n\t\n\t/** \n\t * Extends the rectangle's bounds to include the described point or rectangle.\n\t * @method extend\n\t * @param {Number} x X position of the point or rectangle.\n\t * @param {Number} y Y position of the point or rectangle.\n\t * @param {Number} [width=0] The width of the rectangle.\n\t * @param {Number} [height=0] The height of the rectangle.\n\t * @return {Rectangle} This instance. Useful for chaining method calls.\n\t * @chainable\n\t*/\n\tp.extend = function(x, y, width, height) {\n\t\twidth = width||0;\n\t\theight = height||0;\n\t\tif (x+width > this.x+this.width) { this.width = x+width-this.x; }\n\t\tif (y+height > this.y+this.height) { this.height = y+height-this.y; }\n\t\tif (x < this.x) { this.width += this.x-x; this.x = x; }\n\t\tif (y < this.y) { this.height += this.y-y; this.y = y; }\n\t\treturn this;\n\t};\n\t\n\t/** \n\t * Adds the specified padding to the rectangle's bounds.\n\t * @method pad\n\t * @param {Number} top\n\t * @param {Number} left\n\t * @param {Number} right\n\t * @param {Number} bottom\n\t * @return {Rectangle} This instance. Useful for chaining method calls.\n\t * @chainable\n\t*/\n\tp.pad = function(top, left, bottom, right) {\n\t\tthis.x -= left;\n\t\tthis.y -= top;\n\t\tthis.width += left+right;\n\t\tthis.height += top+bottom;\n\t\treturn this;\n\t};\n\t\n\t/**\n\t * Copies all properties from the specified rectangle to this rectangle.\n\t * @method copy\n\t * @param {Rectangle} rectangle The rectangle to copy properties from.\n\t * @return {Rectangle} This rectangle. Useful for chaining method calls.\n\t * @chainable\n\t*/\n\tp.copy = function(rectangle) {\n\t\treturn this.setValues(rectangle.x, rectangle.y, rectangle.width, rectangle.height);\n\t};\n\t\n\t/** \n\t * Returns true if this rectangle fully encloses the described point or rectangle.\n\t * @method contains\n\t * @param {Number} x X position of the point or rectangle.\n\t * @param {Number} y Y position of the point or rectangle.\n\t * @param {Number} [width=0] The width of the rectangle.\n\t * @param {Number} [height=0] The height of the rectangle.\n\t * @return {Boolean} True if the described point or rectangle is contained within this rectangle.\n\t*/\n\tp.contains = function(x, y, width, height) {\n\t\twidth = width||0;\n\t\theight = height||0;\n\t\treturn (x >= this.x && x+width <= this.x+this.width && y >= this.y && y+height <= this.y+this.height);\n\t};\n\t\n\t/** \n\t * Returns a new rectangle which contains this rectangle and the specified rectangle.\n\t * @method union\n\t * @param {Rectangle} rect The rectangle to calculate a union with.\n\t * @return {Rectangle} A new rectangle describing the union.\n\t*/\n\tp.union = function(rect) {\n\t\treturn this.clone().extend(rect.x, rect.y, rect.width, rect.height);\n\t};\n\t\n\t/** \n\t * Returns a new rectangle which describes the intersection (overlap) of this rectangle and the specified rectangle,\n\t * or null if they do not intersect.\n\t * @method intersection\n\t * @param {Rectangle} rect The rectangle to calculate an intersection with.\n\t * @return {Rectangle} A new rectangle describing the intersection or null.\n\t*/\n\tp.intersection = function(rect) {\n\t\tvar x1 = rect.x, y1 = rect.y, x2 = x1+rect.width, y2 = y1+rect.height;\n\t\tif (this.x > x1) { x1 = this.x; }\n\t\tif (this.y > y1) { y1 = this.y; }\n\t\tif (this.x + this.width < x2) { x2 = this.x + this.width; }\n\t\tif (this.y + this.height < y2) { y2 = this.y + this.height; }\n\t\treturn (x2 <= x1 || y2 <= y1) ? null : new Rectangle(x1, y1, x2-x1, y2-y1);\n\t};\n\t\n\t/** \n\t * Returns true if the specified rectangle intersects (has any overlap) with this rectangle.\n\t * @method intersects\n\t * @param {Rectangle} rect The rectangle to compare.\n\t * @return {Boolean} True if the rectangles intersect.\n\t*/\n\tp.intersects = function(rect) {\n\t\treturn (rect.x <= this.x+this.width && this.x <= rect.x+rect.width && rect.y <= this.y+this.height && this.y <= rect.y + rect.height);\n\t};\n\t\n\t/** \n\t * Returns true if the width or height are equal or less than 0.\n\t * @method isEmpty\n\t * @return {Boolean} True if the rectangle is empty.\n\t*/\n\tp.isEmpty = function() {\n\t\treturn this.width <= 0 || this.height <= 0;\n\t};\n\t\n\t/**\n\t * Returns a clone of the Rectangle instance.\n\t * @method clone\n\t * @return {Rectangle} a clone of the Rectangle instance.\n\t **/\n\tp.clone = function() {\n\t\treturn new Rectangle(this.x, this.y, this.width, this.height);\n\t};\n\n\t/**\n\t * Returns a string representation of this object.\n\t * @method toString\n\t * @return {String} a string representation of the instance.\n\t **/\n\tp.toString = function() {\n\t\treturn \"[Rectangle (x=\"+this.x+\" y=\"+this.y+\" width=\"+this.width+\" height=\"+this.height+\")]\";\n\t};\n\t\n\t\n\tcreatejs.Rectangle = Rectangle;\n}());\n\n//##############################################################################\n// ButtonHelper.js\n//##############################################################################\n\n(function() {\n\t\"use strict\";\n\n\n// constructor:\n\t/**\n\t * The ButtonHelper is a helper class to create interactive buttons from {{#crossLink \"MovieClip\"}}{{/crossLink}} or\n\t * {{#crossLink \"Sprite\"}}{{/crossLink}} instances. This class will intercept mouse events from an object, and\n\t * automatically call {{#crossLink \"Sprite/gotoAndStop\"}}{{/crossLink}} or {{#crossLink \"Sprite/gotoAndPlay\"}}{{/crossLink}},\n\t * to the respective animation labels, add a pointer cursor, and allows the user to define a hit state frame.\n\t *\n\t * The ButtonHelper instance does not need to be added to the stage, but a reference should be maintained to prevent\n\t * garbage collection.\n\t * \n\t * Note that over states will not work unless you call {{#crossLink \"Stage/enableMouseOver\"}}{{/crossLink}}.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      var helper = new createjs.ButtonHelper(myInstance, \"out\", \"over\", \"down\", false, myInstance, \"hit\");\n\t *      myInstance.addEventListener(\"click\", handleClick);\n\t *      function handleClick(event) {\n\t *          // Click Happened.\n\t *      }\n\t *\n\t * @class ButtonHelper\n\t * @param {Sprite|MovieClip} target The instance to manage.\n\t * @param {String} [outLabel=\"out\"] The label or animation to go to when the user rolls out of the button.\n\t * @param {String} [overLabel=\"over\"] The label or animation to go to when the user rolls over the button.\n\t * @param {String} [downLabel=\"down\"] The label or animation to go to when the user presses the button.\n\t * @param {Boolean} [play=false] If the helper should call \"gotoAndPlay\" or \"gotoAndStop\" on the button when changing\n\t * states.\n\t * @param {DisplayObject} [hitArea] An optional item to use as the hit state for the button. If this is not defined,\n\t * then the button's visible states will be used instead. Note that the same instance as the \"target\" argument can be\n\t * used for the hitState.\n\t * @param {String} [hitLabel] The label or animation on the hitArea instance that defines the hitArea bounds. If this is\n\t * null, then the default state of the hitArea will be used. *\n\t * @constructor\n\t */\n\tfunction ButtonHelper(target, outLabel, overLabel, downLabel, play, hitArea, hitLabel) {\n\t\tif (!target.addEventListener) { return; }\n\t\n\t\n\t// public properties:\n\t\t/**\n\t\t * The target for this button helper.\n\t\t * @property target\n\t\t * @type MovieClip | Sprite\n\t\t * @readonly\n\t\t **/\n\t\tthis.target = target;\n\t\n\t\t/**\n\t\t * The label name or frame number to display when the user mouses out of the target. Defaults to \"over\".\n\t\t * @property overLabel\n\t\t * @type String | Number\n\t\t **/\n\t\tthis.overLabel = overLabel == null ? \"over\" : overLabel;\n\t\n\t\t/**\n\t\t * The label name or frame number to display when the user mouses over the target. Defaults to \"out\".\n\t\t * @property outLabel\n\t\t * @type String | Number\n\t\t **/\n\t\tthis.outLabel = outLabel == null ? \"out\" : outLabel;\n\t\n\t\t/**\n\t\t * The label name or frame number to display when the user presses on the target. Defaults to \"down\".\n\t\t * @property downLabel\n\t\t * @type String | Number\n\t\t **/\n\t\tthis.downLabel = downLabel == null ? \"down\" : downLabel;\n\t\n\t\t/**\n\t\t * If true, then ButtonHelper will call gotoAndPlay, if false, it will use gotoAndStop. Default is false.\n\t\t * @property play\n\t\t * @default false\n\t\t * @type Boolean\n\t\t **/\n\t\tthis.play = play;\n\t\t\n\t\t\n\t//  private properties\n\t\t/**\n\t\t * @property _isPressed\n\t\t * @type Boolean\n\t\t * @protected\n\t\t **/\n\t\tthis._isPressed = false;\n\t\n\t\t/**\n\t\t * @property _isOver\n\t\t * @type Boolean\n\t\t * @protected\n\t\t **/\n\t\tthis._isOver = false;\n\t\n\t\t/**\n\t\t * @property _enabled\n\t\t * @type Boolean\n\t\t * @protected\n\t\t **/\n\t\tthis._enabled = false;\n\t\t\n\t// setup:\n\t\ttarget.mouseChildren = false; // prevents issues when children are removed from the display list when state changes.\n\t\tthis.enabled = true;\n\t\tthis.handleEvent({});\n\t\tif (hitArea) {\n\t\t\tif (hitLabel) {\n\t\t\t\thitArea.actionsEnabled = false;\n\t\t\t\thitArea.gotoAndStop&&hitArea.gotoAndStop(hitLabel);\n\t\t\t}\n\t\t\ttarget.hitArea = hitArea;\n\t\t}\n\t}\n\tvar p = ButtonHelper.prototype;\n\n\t/**\n\t * <strong>REMOVED</strong>. Removed in favor of using `MySuperClass_constructor`.\n\t * See {{#crossLink \"Utility Methods/extend\"}}{{/crossLink}} and {{#crossLink \"Utility Methods/promote\"}}{{/crossLink}}\n\t * for details.\n\t *\n\t * There is an inheritance tutorial distributed with EaselJS in /tutorials/Inheritance.\n\t *\n\t * @method initialize\n\t * @protected\n\t * @deprecated\n\t */\n\t// p.initialize = function() {}; // searchable for devs wondering where it is.\n\n\t\n// getter / setters:\n\t/**\n\t * Use the {{#crossLink \"ButtonHelper/enabled:property\"}}{{/crossLink}} property instead.\n\t * @method setEnabled\n\t * @param {Boolean} value\n\t * @deprecated\n\t **/\n\tp.setEnabled = function(value) { // TODO: deprecated.\n\t\tif (value == this._enabled) { return; }\n\t\tvar o = this.target;\n\t\tthis._enabled = value;\n\t\tif (value) {\n\t\t\to.cursor = \"pointer\";\n\t\t\to.addEventListener(\"rollover\", this);\n\t\t\to.addEventListener(\"rollout\", this);\n\t\t\to.addEventListener(\"mousedown\", this);\n\t\t\to.addEventListener(\"pressup\", this);\n\t\t\tif (o._reset) { o.__reset = o._reset; o._reset = this._reset;}\n\t\t} else {\n\t\t\to.cursor = null;\n\t\t\to.removeEventListener(\"rollover\", this);\n\t\t\to.removeEventListener(\"rollout\", this);\n\t\t\to.removeEventListener(\"mousedown\", this);\n\t\t\to.removeEventListener(\"pressup\", this);\n\t\t\tif (o.__reset) { o._reset = o.__reset; delete(o.__reset); }\n\t\t}\n\t};\n\t/**\n\t * Use the {{#crossLink \"ButtonHelper/enabled:property\"}}{{/crossLink}} property instead.\n\t * @method getEnabled\n\t * @return {Boolean}\n\t * @deprecated\n\t **/\n\tp.getEnabled = function() {\n\t\treturn this._enabled;\n\t};\n\n\t/**\n\t * Enables or disables the button functionality on the target.\n\t * @property enabled\n\t * @type {Boolean}\n\t **/\n\ttry {\n\t\tObject.defineProperties(p, {\n\t\t\tenabled: { get: p.getEnabled, set: p.setEnabled }\n\t\t});\n\t} catch (e) {} // TODO: use Log\n\n\n// public methods:\n\t/**\n\t * Returns a string representation of this object.\n\t * @method toString\n\t * @return {String} a string representation of the instance.\n\t **/\n\tp.toString = function() {\n\t\treturn \"[ButtonHelper]\";\n\t};\n\n\n// private methods:\n\t/**\n\t * @method handleEvent\n\t * @param {Object} evt The mouse event to handle.\n\t * @protected\n\t **/\n\tp.handleEvent = function(evt) {\n\t\tvar label, t = this.target, type = evt.type;\n\t\tif (type == \"mousedown\") {\n\t\t\tthis._isPressed = true;\n\t\t\tlabel = this.downLabel;\n\t\t} else if (type == \"pressup\") {\n\t\t\tthis._isPressed = false;\n\t\t\tlabel = this._isOver ? this.overLabel : this.outLabel;\n\t\t} else if (type == \"rollover\") {\n\t\t\tthis._isOver = true;\n\t\t\tlabel = this._isPressed ? this.downLabel : this.overLabel;\n\t\t} else { // rollout and default\n\t\t\tthis._isOver = false;\n\t\t\tlabel = this._isPressed ? this.overLabel : this.outLabel;\n\t\t}\n\t\tif (this.play) {\n\t\t\tt.gotoAndPlay&&t.gotoAndPlay(label);\n\t\t} else {\n\t\t\tt.gotoAndStop&&t.gotoAndStop(label);\n\t\t}\n\t};\n\t\n\t/**\n\t * Injected into target. Preserves the paused state through a reset.\n\t * @method _reset\n\t * @protected\n\t **/\n\tp._reset = function() {\n\t\t// TODO: explore better ways to handle this issue. This is hacky & disrupts object signatures.\n\t\tvar p = this.paused;\n\t\tthis.__reset();\n\t\tthis.paused = p;\n\t};\n\n\n\tcreatejs.ButtonHelper = ButtonHelper;\n}());\n\n//##############################################################################\n// Shadow.js\n//##############################################################################\n\n(function() {\n\t\"use strict\";\n\n\n// constructor:\n\t/**\n\t * This class encapsulates the properties required to define a shadow to apply to a {{#crossLink \"DisplayObject\"}}{{/crossLink}}\n\t * via its <code>shadow</code> property.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      myImage.shadow = new createjs.Shadow(\"#000000\", 5, 5, 10);\n\t *\n\t * @class Shadow\n\t * @constructor\n\t * @param {String} color The color of the shadow. This can be any valid CSS color value.\n\t * @param {Number} offsetX The x offset of the shadow in pixels.\n\t * @param {Number} offsetY The y offset of the shadow in pixels.\n\t * @param {Number} blur The size of the blurring effect.\n\t **/\n\tfunction Shadow(color, offsetX, offsetY, blur) {\n\t\t\n\t\t\n\t// public properties:\n\t\t/** \n\t\t * The color of the shadow. This can be any valid CSS color value.\n\t\t * @property color\n\t\t * @type String\n\t\t * @default null\n\t\t */\n\t\tthis.color = color||\"black\";\n\t\n\t\t/** The x offset of the shadow.\n\t\t * @property offsetX\n\t\t * @type Number\n\t\t * @default 0\n\t\t */\n\t\tthis.offsetX = offsetX||0;\n\t\n\t\t/** The y offset of the shadow.\n\t\t * @property offsetY\n\t\t * @type Number\n\t\t * @default 0\n\t\t */\n\t\tthis.offsetY = offsetY||0;\n\t\n\t\t/** The blur of the shadow.\n\t\t * @property blur\n\t\t * @type Number\n\t\t * @default 0\n\t\t */\n\t\tthis.blur = blur||0;\n\t}\n\tvar p = Shadow.prototype;\n\n\t/**\n\t * <strong>REMOVED</strong>. Removed in favor of using `MySuperClass_constructor`.\n\t * See {{#crossLink \"Utility Methods/extend\"}}{{/crossLink}} and {{#crossLink \"Utility Methods/promote\"}}{{/crossLink}}\n\t * for details.\n\t *\n\t * There is an inheritance tutorial distributed with EaselJS in /tutorials/Inheritance.\n\t *\n\t * @method initialize\n\t * @protected\n\t * @deprecated\n\t */\n\t// p.initialize = function() {}; // searchable for devs wondering where it is.\n\n\n// static public properties:\n\t/**\n\t * An identity shadow object (all properties are set to 0).\n\t * @property identity\n\t * @type Shadow\n\t * @static\n\t * @final\n\t * @readonly\n\t **/\n\tShadow.identity = new Shadow(\"transparent\", 0, 0, 0);\n\n\n// public methods:\n\t/**\n\t * Returns a string representation of this object.\n\t * @method toString\n\t * @return {String} a string representation of the instance.\n\t **/\n\tp.toString = function() {\n\t\treturn \"[Shadow]\";\n\t};\n\n\t/**\n\t * Returns a clone of this Shadow instance.\n\t * @method clone\n\t * @return {Shadow} A clone of the current Shadow instance.\n\t **/\n\tp.clone = function() {\n\t\treturn new Shadow(this.color, this.offsetX, this.offsetY, this.blur);\n\t};\n\t\n\n\tcreatejs.Shadow = Shadow;\n}());\n\n//##############################################################################\n// SpriteSheet.js\n//##############################################################################\n\n(function() {\n\t\"use strict\";\n\n\n// constructor:\n\t/**\n\t * Encapsulates the properties and methods associated with a sprite sheet. A sprite sheet is a series of images (usually\n\t * animation frames) combined into a larger image (or images). For example, an animation consisting of eight 100x100\n\t * images could be combined into a single 400x200 sprite sheet (4 frames across by 2 high).\n\t *\n\t * The data passed to the SpriteSheet constructor defines:\n\t * <ol>\n\t * \t<li> The source image or images to use.</li>\n\t * \t<li> The positions of individual image frames.</li>\n\t * \t<li> Sequences of frames that form named animations. Optional.</li>\n\t * \t<li> The target playback framerate. Optional.</li>\n\t * </ol>\n\t * <h3>SpriteSheet Format</h3>\n\t * SpriteSheets are an object with two required properties (`images` and `frames`), and two optional properties\n\t * (`framerate` and `animations`). This makes them easy to define in javascript code, or in JSON.\n\t *\n\t * <h4>images</h4>\n\t * An array of source images. Images can be either an HTMlimage\n\t * instance, or a uri to an image. The former is recommended to control preloading.\n\t *\n\t * \timages: [image1, \"path/to/image2.png\"],\n\t *\n\t * <h4>frames</h4>\n\t * Defines the individual frames. There are two supported formats for frame data:\n\t * When all of the frames are the same size (in a grid), use an object with `width`, `height`, `regX`, `regY`,\n\t * and `count` properties.\n\t *\n\t * <ul>\n\t *  <li>`width` & `height` are required and specify the dimensions of the frames</li>\n\t *  <li>`regX` & `regY` indicate the registration point or \"origin\" of the frames</li>\n\t *  <li>`spacing` indicate the spacing between frames</li>\n\t *  <li>`margin` specify the margin around the image(s)</li>\n\t *  <li>`count` allows you to specify the total number of frames in the spritesheet; if omitted, this will\n\t *  be calculated based on the dimensions of the source images and the frames. Frames will be assigned\n\t *  indexes based on their position in the source images (left to right, top to bottom).</li>\n\t * </ul>\n\t *\n\t *  \tframes: {width:64, height:64, count:20, regX: 32, regY:64, spacing:0, margin:0}\n\t *\n\t * If the frames are of different sizes, use an array of frame definitions. Each definition is itself an array\n\t * with 4 required and 3 optional entries, in the order:\n\t *\n\t * <ul>\n\t *  <li>The first four, `x`, `y`, `width`, and `height` are required and define the frame rectangle.</li>\n\t *  <li>The fifth, `imageIndex`, specifies the index of the source image (defaults to 0)</li>\n\t *  <li>The last two, `regX` and `regY` specify the registration point of the frame</li>\n\t * </ul>\n\t *\n\t * \tframes: [\n\t * \t\t// x, y, width, height, imageIndex*, regX*, regY*\n\t * \t\t[64, 0, 96, 64],\n\t * \t\t[0, 0, 64, 64, 1, 32, 32]\n\t * \t\t// etc.\n\t * \t]\n\t *\n\t * <h4>animations</h4>\n\t * Optional. An object defining sequences of frames to play as named animations. Each property corresponds to an\n\t * animation of the same name. Each animation must specify the frames to play, and may\n\t * also include a relative playback `speed` (ex. 2 would playback at double speed, 0.5 at half), and\n\t * the name of the `next` animation to sequence to after it completes.\n\t *\n\t * There are three formats supported for defining the frames in an animation, which can be mixed and matched as appropriate:\n\t * <ol>\n\t * \t<li>for a single frame animation, you can simply specify the frame index\n\t *\n\t * \t\tanimations: {\n\t * \t\t\tsit: 7\n\t * \t\t}\n\t *\n\t * </li>\n\t * <li>\n\t *      for an animation of consecutive frames, you can use an array with two required, and two optional entries\n\t * \t\tin the order: `start`, `end`, `next`, and `speed`. This will play the frames from start to end inclusive.\n\t *\n\t * \t\tanimations: {\n\t * \t\t\t// start, end, next*, speed*\n\t * \t\t\trun: [0, 8],\n\t * \t\t\tjump: [9, 12, \"run\", 2]\n\t * \t\t}\n\t *\n\t *  </li>\n\t *  <li>\n\t *     for non-consecutive frames, you can use an object with a `frames` property defining an array of frame\n\t *     indexes to play in order. The object can also specify `next` and `speed` properties.\n\t *\n\t * \t\tanimations: {\n\t * \t\t\twalk: {\n\t * \t\t\t\tframes: [1,2,3,3,2,1]\n\t * \t\t\t},\n\t * \t\t\tshoot: {\n\t * \t\t\t\tframes: [1,4,5,6],\n\t * \t\t\t\tnext: \"walk\",\n\t * \t\t\t\tspeed: 0.5\n\t * \t\t\t}\n\t * \t\t}\n\t *\n\t *  </li>\n\t * </ol>\n\t * <strong>Note:</strong> the `speed` property was added in EaselJS 0.7.0. Earlier versions had a `frequency`\n\t * property instead, which was the inverse of `speed`. For example, a value of \"4\" would be 1/4 normal speed in\n\t * earlier versions, but is 4x normal speed in EaselJS 0.7.0+.\n\t *\n\t * <h4>framerate</h4>\n\t * Optional. Indicates the default framerate to play this spritesheet at in frames per second. See\n\t * {{#crossLink \"SpriteSheet/framerate:property\"}}{{/crossLink}} for more information.\n\t *\n\t * \t\tframerate: 20\n\t *\n\t * Note that the Sprite framerate will only work if the stage update method is provided with the {{#crossLink \"Ticker/tick:event\"}}{{/crossLink}}\n\t * event generated by the {{#crossLink \"Ticker\"}}{{/crossLink}}.\n\t *\n\t * \t\tcreatejs.Ticker.on(\"tick\", handleTick);\n\t * \t\tfunction handleTick(event) {\n\t *\t\t\tstage.update(event);\n\t *\t\t}\n\t *\n\t * <h3>Example</h3>\n\t * To define a simple sprite sheet, with a single image \"sprites.jpg\" arranged in a regular 50x50 grid with three\n\t * animations: \"stand\" showing the first frame, \"run\" looping frame 1-5 inclusive, and \"jump\" playing frame 6-8 and\n\t * sequencing back to run.\n\t *\n\t * \t\tvar data = {\n\t * \t\t\timages: [\"sprites.jpg\"],\n\t * \t\t\tframes: {width:50, height:50},\n\t * \t\t\tanimations: {\n\t * \t\t\t\tstand:0,\n\t * \t\t\t\trun:[1,5],\n\t * \t\t\t\tjump:[6,8,\"run\"]\n\t * \t\t\t}\n\t * \t\t};\n\t * \t\tvar spriteSheet = new createjs.SpriteSheet(data);\n\t * \t\tvar animation = new createjs.Sprite(spriteSheet, \"run\");\n\t *\n\t * <h3>Generating SpriteSheet Images</h3>\n\t * Spritesheets can be created manually by combining images in PhotoShop, and specifying the frame size or\n\t * coordinates manually, however there are a number of tools that facilitate this.\n\t * <ul>\n\t *     <li>Exporting SpriteSheets or HTML5 content from Flash Pro supports the EaselJS SpriteSheet format.</li>\n\t *     <li>The popular <a href=\"https://www.codeandweb.com/texturepacker/easeljs\" target=\"_blank\">Texture Packer</a> has\n\t *     EaselJS support.\n\t *     <li>SWF animations in Flash can be exported to SpriteSheets using <a href=\"http://createjs.com/zoe\" target=\"_blank\"></a></li>\n\t * </ul>\n\t *\n\t * <h3>Cross Origin Issues</h3>\n\t * <strong>Warning:</strong> Images loaded cross-origin will throw cross-origin security errors when interacted with\n\t * using:\n\t * <ul>\n\t *     <li>a mouse</li>\n\t *     <li>methods such as {{#crossLink \"Container/getObjectUnderPoint\"}}{{/crossLink}}</li>\n\t *     <li>Filters (see {{#crossLink \"Filter\"}}{{/crossLink}})</li>\n\t *     <li>caching (see {{#crossLink \"DisplayObject/cache\"}}{{/crossLink}})</li>\n\t * </ul>\n\t * You can get around this by setting `crossOrigin` property on your images before passing them to EaselJS, or\n\t * setting the `crossOrigin` property on PreloadJS' LoadQueue or LoadItems.\n\t *\n\t * \t\tvar image = new Image();\n\t * \t\timg.crossOrigin=\"Anonymous\";\n\t * \t\timg.src = \"http://server-with-CORS-support.com/path/to/image.jpg\";\n\t *\n\t * If you pass string paths to SpriteSheets, they will not work cross-origin. The server that stores the image must\n\t * support cross-origin requests, or this will not work. For more information, check out\n\t * <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Access_control_CORS\" target=\"_blank\">CORS overview on MDN</a>.\n\t *\n\t * @class SpriteSheet\n\t * @constructor\n\t * @param {Object} data An object describing the SpriteSheet data.\n\t * @extends EventDispatcher\n\t **/\n\tfunction SpriteSheet(data) {\n\t\tthis.EventDispatcher_constructor();\n\n\n\t\t// public properties:\n\t\t/**\n\t\t * Indicates whether all images are finished loading.\n\t\t * @property complete\n\t\t * @type Boolean\n\t\t * @readonly\n\t\t **/\n\t\tthis.complete = true;\n\n\t\t/**\n\t\t * Specifies the framerate to use by default for Sprite instances using the SpriteSheet. See the Sprite class\n\t\t * {{#crossLink \"Sprite/framerate:property\"}}{{/crossLink}} for more information.\n\t\t * @property framerate\n\t\t * @type Number\n\t\t **/\n\t\tthis.framerate = 0;\n\n\n\t\t// private properties:\n\t\t/**\n\t\t * @property _animations\n\t\t * @protected\n\t\t * @type Array\n\t\t **/\n\t\tthis._animations = null;\n\n\t\t/**\n\t\t * @property _frames\n\t\t * @protected\n\t\t * @type Array\n\t\t **/\n\t\tthis._frames = null;\n\n\t\t/**\n\t\t * @property _images\n\t\t * @protected\n\t\t * @type Array\n\t\t **/\n\t\tthis._images = null;\n\n\t\t/**\n\t\t * @property _data\n\t\t * @protected\n\t\t * @type Object\n\t\t **/\n\t\tthis._data = null;\n\n\t\t/**\n\t\t * @property _loadCount\n\t\t * @protected\n\t\t * @type Number\n\t\t **/\n\t\tthis._loadCount = 0;\n\n\t\t// only used for simple frame defs:\n\t\t/**\n\t\t * @property _frameHeight\n\t\t * @protected\n\t\t * @type Number\n\t\t **/\n\t\tthis._frameHeight = 0;\n\n\t\t/**\n\t\t * @property _frameWidth\n\t\t * @protected\n\t\t * @type Number\n\t\t **/\n\t\tthis._frameWidth = 0;\n\n\t\t/**\n\t\t * @property _numFrames\n\t\t * @protected\n\t\t * @type Number\n\t\t **/\n\t\tthis._numFrames = 0;\n\n\t\t/**\n\t\t * @property _regX\n\t\t * @protected\n\t\t * @type Number\n\t\t **/\n\t\tthis._regX = 0;\n\n\t\t/**\n\t\t * @property _regY\n\t\t * @protected\n\t\t * @type Number\n\t\t **/\n\t\tthis._regY = 0;\n\n\t\t/**\n\t\t * @property _spacing\n\t\t * @protected\n\t\t * @type Number\n\t\t **/\n\t\tthis._spacing = 0;\n\n\t\t/**\n\t\t * @property _margin\n\t\t * @protected\n\t\t * @type Number\n\t\t **/\n\t\tthis._margin = 0;\n\n\t\t// setup:\n\t\tthis._parseData(data);\n\t}\n\tvar p = createjs.extend(SpriteSheet, createjs.EventDispatcher);\n\n\t// TODO: deprecated\n\t// p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\n\n\n// events:\n\t/**\n\t * Dispatched when all images are loaded.  Note that this only fires if the images\n\t * were not fully loaded when the sprite sheet was initialized. You should check the complete property\n\t * to prior to adding a listener. Ex.\n\t *\n\t * \tvar sheet = new createjs.SpriteSheet(data);\n\t * \tif (!sheet.complete) {\n\t * \t\t// not preloaded, listen for the complete event:\n\t * \t\tsheet.addEventListener(\"complete\", handler);\n\t * \t}\n\t *\n\t * @event complete\n\t * @param {Object} target The object that dispatched the event.\n\t * @param {String} type The event type.\n\t * @since 0.6.0\n\t */\n\n\t/**\n\t * Dispatched when getFrame is called with a valid frame index. This is primarily intended for use by {{#crossLink \"SpriteSheetBuilder\"}}{{/crossLink}}\n\t * when doing on-demand rendering.\n\t * @event getframe\n\t * @param {Number} index The frame index.\n\t * @param {Object} frame The frame object that getFrame will return.\n\t */\n\n\t/**\n\t * Dispatched when an image encounters an error. A SpriteSheet will dispatch an error event for each image that\n\t * encounters an error, and will still dispatch a {{#crossLink \"SpriteSheet/complete:event\"}}{{/crossLink}}\n\t * event once all images are finished processing, even if an error is encountered.\n\t * @event error\n\t * @param {String} src The source of the image that failed to load.\n\t * @since 0.8.2\n\t */\n\n\n// getter / setters:\n\t/**\n\t * Use the {{#crossLink \"SpriteSheet/animations:property\"}}{{/crossLink}} property instead.\n\t * @method getAnimations\n\t * @return {Array}\n\t * @deprecated\n\t **/\n\tp.getAnimations = function() {\n\t\treturn this._animations.slice();\n\t};\n\n\t/**\n\t * Returns an array of all available animation names available on this sprite sheet as strings.\n\t * @property animations\n\t * @type {Array}\n\t * @readonly\n\t **/\n\ttry {\n\t\tObject.defineProperties(p, {\n\t\t\tanimations: { get: p.getAnimations }\n\t\t});\n\t} catch (e) {}\n\n\n// public methods:\n\t/**\n\t * Returns the total number of frames in the specified animation, or in the whole sprite\n\t * sheet if the animation param is omitted. Returns 0 if the spritesheet relies on calculated frame counts, and\n\t * the images have not been fully loaded.\n\t * @method getNumFrames\n\t * @param {String} animation The name of the animation to get a frame count for.\n\t * @return {Number} The number of frames in the animation, or in the entire sprite sheet if the animation param is omitted.\n\t */\n\tp.getNumFrames = function(animation) {\n\t\tif (animation == null) {\n\t\t\treturn this._frames ? this._frames.length : this._numFrames || 0;\n\t\t} else {\n\t\t\tvar data = this._data[animation];\n\t\t\tif (data == null) { return 0; }\n\t\t\telse { return data.frames.length; }\n\t\t}\n\t};\n\n\t/**\n\t * Returns an object defining the specified animation. The returned object contains:<UL>\n\t * \t<li>frames: an array of the frame ids in the animation</li>\n\t * \t<li>speed: the playback speed for this animation</li>\n\t * \t<li>name: the name of the animation</li>\n\t * \t<li>next: the default animation to play next. If the animation loops, the name and next property will be the\n\t * \tsame.</li>\n\t * </UL>\n\t * @method getAnimation\n\t * @param {String} name The name of the animation to get.\n\t * @return {Object} a generic object with frames, speed, name, and next properties.\n\t **/\n\tp.getAnimation = function(name) {\n\t\treturn this._data[name];\n\t};\n\n\t/**\n\t * Returns an object specifying the image and source rect of the specified frame. The returned object has:<UL>\n\t * \t<li>an image property holding a reference to the image object in which the frame is found</li>\n\t * \t<li>a rect property containing a Rectangle instance which defines the boundaries for the frame within that\n\t * \timage.</li>\n\t * \t<li> A regX and regY property corresponding to the regX/Y values for the frame.\n\t * </UL>\n\t * @method getFrame\n\t * @param {Number} frameIndex The index of the frame.\n\t * @return {Object} a generic object with image and rect properties. Returns null if the frame does not exist.\n\t **/\n\tp.getFrame = function(frameIndex) {\n\t\tvar frame;\n\t\tif (this._frames && (frame=this._frames[frameIndex])) { return frame; }\n\t\treturn null;\n\t};\n\n\t/**\n\t * Returns a {{#crossLink \"Rectangle\"}}{{/crossLink}} instance defining the bounds of the specified frame relative\n\t * to the origin. For example, a 90 x 70 frame with a regX of 50 and a regY of 40 would return:\n\t *\n\t * \t[x=-50, y=-40, width=90, height=70]\n\t *\n\t * @method getFrameBounds\n\t * @param {Number} frameIndex The index of the frame.\n\t * @param {Rectangle} [rectangle] A Rectangle instance to copy the values into. By default a new instance is created.\n\t * @return {Rectangle} A Rectangle instance. Returns null if the frame does not exist, or the image is not fully loaded.\n\t **/\n\tp.getFrameBounds = function(frameIndex, rectangle) {\n\t\tvar frame = this.getFrame(frameIndex);\n\t\treturn frame ? (rectangle||new createjs.Rectangle()).setValues(-frame.regX, -frame.regY, frame.rect.width, frame.rect.height) : null;\n\t};\n\n\t/**\n\t * Returns a string representation of this object.\n\t * @method toString\n\t * @return {String} a string representation of the instance.\n\t **/\n\tp.toString = function() {\n\t\treturn \"[SpriteSheet]\";\n\t};\n\n\t/**\n\t * SpriteSheet cannot be cloned. A SpriteSheet can be shared by multiple Sprite instances without cloning it.\n\t * @method clone\n\t **/\n\tp.clone = function() {\n\t\tthrow(\"SpriteSheet cannot be cloned.\")\n\t};\n\n// private methods:\n\t/**\n\t * @method _parseData\n\t * @param {Object} data An object describing the SpriteSheet data.\n\t * @protected\n\t **/\n\tp._parseData = function(data) {\n\t\tvar i,l,o,a;\n\t\tif (data == null) { return; }\n\n\t\tthis.framerate = data.framerate||0;\n\n\t\t// parse images:\n\t\tif (data.images && (l=data.images.length) > 0) {\n\t\t\ta = this._images = [];\n\t\t\tfor (i=0; i<l; i++) {\n\t\t\t\tvar img = data.images[i];\n\t\t\t\tif (typeof img == \"string\") {\n\t\t\t\t\tvar src = img;\n\t\t\t\t\timg = document.createElement(\"img\");\n\t\t\t\t\timg.src = src;\n\t\t\t\t}\n\t\t\t\ta.push(img);\n\t\t\t\tif (!img.getContext && !img.naturalWidth) {\n\t\t\t\t\tthis._loadCount++;\n\t\t\t\t\tthis.complete = false;\n\t\t\t\t\t(function(o, src) { img.onload = function() { o._handleImageLoad(src); } })(this, src);\n\t\t\t\t\t(function(o, src) { img.onerror = function() { o._handleImageError(src); } })(this, src);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// parse frames:\n\t\tif (data.frames == null) { // nothing\n\t\t} else if (Array.isArray(data.frames)) {\n\t\t\tthis._frames = [];\n\t\t\ta = data.frames;\n\t\t\tfor (i=0,l=a.length;i<l;i++) {\n\t\t\t\tvar arr = a[i];\n\t\t\t\tthis._frames.push({image:this._images[arr[4]?arr[4]:0], rect:new createjs.Rectangle(arr[0],arr[1],arr[2],arr[3]), regX:arr[5]||0, regY:arr[6]||0 });\n\t\t\t}\n\t\t} else {\n\t\t\to = data.frames;\n\t\t\tthis._frameWidth = o.width;\n\t\t\tthis._frameHeight = o.height;\n\t\t\tthis._regX = o.regX||0;\n\t\t\tthis._regY = o.regY||0;\n\t\t\tthis._spacing = o.spacing||0;\n\t\t\tthis._margin = o.margin||0;\n\t\t\tthis._numFrames = o.count;\n\t\t\tif (this._loadCount == 0) { this._calculateFrames(); }\n\t\t}\n\n\t\t// parse animations:\n\t\tthis._animations = [];\n\t\tif ((o=data.animations) != null) {\n\t\t\tthis._data = {};\n\t\t\tvar name;\n\t\t\tfor (name in o) {\n\t\t\t\tvar anim = {name:name};\n\t\t\t\tvar obj = o[name];\n\t\t\t\tif (typeof obj == \"number\") { // single frame\n\t\t\t\t\ta = anim.frames = [obj];\n\t\t\t\t} else if (Array.isArray(obj)) { // simple\n\t\t\t\t\tif (obj.length == 1) { anim.frames = [obj[0]]; }\n\t\t\t\t\telse {\n\t\t\t\t\t\tanim.speed = obj[3];\n\t\t\t\t\t\tanim.next = obj[2];\n\t\t\t\t\t\ta = anim.frames = [];\n\t\t\t\t\t\tfor (i=obj[0];i<=obj[1];i++) {\n\t\t\t\t\t\t\ta.push(i);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else { // complex\n\t\t\t\t\tanim.speed = obj.speed;\n\t\t\t\t\tanim.next = obj.next;\n\t\t\t\t\tvar frames = obj.frames;\n\t\t\t\t\ta = anim.frames = (typeof frames == \"number\") ? [frames] : frames.slice(0);\n\t\t\t\t}\n\t\t\t\tif (anim.next === true || anim.next === undefined) { anim.next = name; } // loop\n\t\t\t\tif (anim.next === false || (a.length < 2 && anim.next == name)) { anim.next = null; } // stop\n\t\t\t\tif (!anim.speed) { anim.speed = 1; }\n\t\t\t\tthis._animations.push(name);\n\t\t\t\tthis._data[name] = anim;\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t * @method _handleImageLoad\n\t * @protected\n\t **/\n\tp._handleImageLoad = function(src) {\n\t\tif (--this._loadCount == 0) {\n\t\t\tthis._calculateFrames();\n\t\t\tthis.complete = true;\n\t\t\tthis.dispatchEvent(\"complete\");\n\t\t}\n\t};\n\n\t/**\n\t * @method _handleImageError\n\t * @protected\n\t */\n\tp._handleImageError = function (src) {\n\t\tvar errorEvent = new createjs.Event(\"error\");\n\t\terrorEvent.src = src;\n\t\tthis.dispatchEvent(errorEvent);\n\n\t\t// Complete is still dispatched.\n\t\tif (--this._loadCount == 0) {\n\t\t\tthis.dispatchEvent(\"complete\");\n\t\t}\n\t};\n\n\t/**\n\t * @method _calculateFrames\n\t * @protected\n\t **/\n\tp._calculateFrames = function() {\n\t\tif (this._frames || this._frameWidth == 0) { return; }\n\n\t\tthis._frames = [];\n\n\t\tvar maxFrames = this._numFrames || 100000; // if we go over this, something is wrong.\n\t\tvar frameCount = 0, frameWidth = this._frameWidth, frameHeight = this._frameHeight;\n\t\tvar spacing = this._spacing, margin = this._margin;\n\t\t\n\t\timgLoop:\n\t\tfor (var i=0, imgs=this._images; i<imgs.length; i++) {\n\t\t\tvar img = imgs[i], imgW = img.width, imgH = img.height;\n\n\t\t\tvar y = margin;\n\t\t\twhile (y <= imgH-margin-frameHeight) {\n\t\t\t\tvar x = margin;\n\t\t\t\twhile (x <= imgW-margin-frameWidth) {\n\t\t\t\t\tif (frameCount >= maxFrames) { break imgLoop; }\n\t\t\t\t\tframeCount++;\n\t\t\t\t\tthis._frames.push({\n\t\t\t\t\t\t\timage: img,\n\t\t\t\t\t\t\trect: new createjs.Rectangle(x, y, frameWidth, frameHeight),\n\t\t\t\t\t\t\tregX: this._regX,\n\t\t\t\t\t\t\tregY: this._regY\n\t\t\t\t\t\t});\n\t\t\t\t\tx += frameWidth+spacing;\n\t\t\t\t}\n\t\t\t\ty += frameHeight+spacing;\n\t\t\t}\n\t\t}\n\t\tthis._numFrames = frameCount;\n\t};\n\n\n\tcreatejs.SpriteSheet = createjs.promote(SpriteSheet, \"EventDispatcher\");\n}());\n\n//##############################################################################\n// Graphics.js\n//##############################################################################\n\n(function() {\n\t\"use strict\";\n\n\n// constructor:\n\t/**\n\t * The Graphics class exposes an easy to use API for generating vector drawing instructions and drawing them to a\n\t * specified context. Note that you can use Graphics without any dependency on the EaselJS framework by calling {{#crossLink \"Graphics/draw\"}}{{/crossLink}}\n\t * directly, or it can be used with the {{#crossLink \"Shape\"}}{{/crossLink}} object to draw vector graphics within the\n\t * context of an EaselJS display list.\n\t *\n\t * There are two approaches to working with Graphics object: calling methods on a Graphics instance (the \"Graphics API\"), or\n\t * instantiating Graphics command objects and adding them to the graphics queue via {{#crossLink \"Graphics/append\"}}{{/crossLink}}.\n\t * The former abstracts the latter, simplifying beginning and ending paths, fills, and strokes.\n\t *\n\t *      var g = new createjs.Graphics();\n\t *      g.setStrokeStyle(1);\n\t *      g.beginStroke(\"#000000\");\n\t *      g.beginFill(\"red\");\n\t *      g.drawCircle(0,0,30);\n\t *\n\t * All drawing methods in Graphics return the Graphics instance, so they can be chained together. For example,\n\t * the following line of code would generate the instructions to draw a rectangle with a red stroke and blue fill:\n\t *\n\t *      myGraphics.beginStroke(\"red\").beginFill(\"blue\").drawRect(20, 20, 100, 50);\n\t *\n\t * Each graphics API call generates a command object (see below). The last command to be created can be accessed via\n\t * {{#crossLink \"Graphics/command:property\"}}{{/crossLink}}:\n\t *\n\t *      var fillCommand = myGraphics.beginFill(\"red\").command;\n\t *      // ... later, update the fill style/color:\n\t *      fillCommand.style = \"blue\";\n\t *      // or change it to a bitmap fill:\n\t *      fillCommand.bitmap(myImage);\n\t *\n\t * For more direct control of rendering, you can instantiate and append command objects to the graphics queue directly. In this case, you\n\t * need to manage path creation manually, and ensure that fill/stroke is applied to a defined path:\n\t *\n\t *      // start a new path. Graphics.beginCmd is a reusable BeginPath instance:\n\t *      myGraphics.append(createjs.Graphics.beginCmd);\n\t *      // we need to define the path before applying the fill:\n\t *      var circle = new createjs.Graphics.Circle(0,0,30);\n\t *      myGraphics.append(circle);\n\t *      // fill the path we just defined:\n\t *      var fill = new createjs.Graphics.Fill(\"red\");\n\t *      myGraphics.append(fill);\n\t *\n\t * These approaches can be used together, for example to insert a custom command:\n\t *\n\t *      myGraphics.beginFill(\"red\");\n\t *      var customCommand = new CustomSpiralCommand(etc);\n\t *      myGraphics.append(customCommand);\n\t *      myGraphics.beginFill(\"blue\");\n\t *      myGraphics.drawCircle(0, 0, 30);\n\t *\n\t * See {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more info on creating custom commands.\n\t *\n\t * <h4>Tiny API</h4>\n\t * The Graphics class also includes a \"tiny API\", which is one or two-letter methods that are shortcuts for all of the\n\t * Graphics methods. These methods are great for creating compact instructions, and is used by the Toolkit for CreateJS\n\t * to generate readable code. All tiny methods are marked as protected, so you can view them by enabling protected\n\t * descriptions in the docs.\n\t *\n\t * <table>\n\t *     <tr><td><b>Tiny</b></td><td><b>Method</b></td><td><b>Tiny</b></td><td><b>Method</b></td></tr>\n\t *     <tr><td>mt</td><td>{{#crossLink \"Graphics/moveTo\"}}{{/crossLink}} </td>\n\t *     <td>lt</td> <td>{{#crossLink \"Graphics/lineTo\"}}{{/crossLink}}</td></tr>\n\t *     <tr><td>a/at</td><td>{{#crossLink \"Graphics/arc\"}}{{/crossLink}} / {{#crossLink \"Graphics/arcTo\"}}{{/crossLink}} </td>\n\t *     <td>bt</td><td>{{#crossLink \"Graphics/bezierCurveTo\"}}{{/crossLink}} </td></tr>\n\t *     <tr><td>qt</td><td>{{#crossLink \"Graphics/quadraticCurveTo\"}}{{/crossLink}} (also curveTo)</td>\n\t *     <td>r</td><td>{{#crossLink \"Graphics/rect\"}}{{/crossLink}} </td></tr>\n\t *     <tr><td>cp</td><td>{{#crossLink \"Graphics/closePath\"}}{{/crossLink}} </td>\n\t *     <td>c</td><td>{{#crossLink \"Graphics/clear\"}}{{/crossLink}} </td></tr>\n\t *     <tr><td>f</td><td>{{#crossLink \"Graphics/beginFill\"}}{{/crossLink}} </td>\n\t *     <td>lf</td><td>{{#crossLink \"Graphics/beginLinearGradientFill\"}}{{/crossLink}} </td></tr>\n\t *     <tr><td>rf</td><td>{{#crossLink \"Graphics/beginRadialGradientFill\"}}{{/crossLink}} </td>\n\t *     <td>bf</td><td>{{#crossLink \"Graphics/beginBitmapFill\"}}{{/crossLink}} </td></tr>\n\t *     <tr><td>ef</td><td>{{#crossLink \"Graphics/endFill\"}}{{/crossLink}} </td>\n\t *     <td>ss / sd</td><td>{{#crossLink \"Graphics/setStrokeStyle\"}}{{/crossLink}} / {{#crossLink \"Graphics/setStrokeDash\"}}{{/crossLink}} </td></tr>\n\t *     <tr><td>s</td><td>{{#crossLink \"Graphics/beginStroke\"}}{{/crossLink}} </td>\n\t *     <td>ls</td><td>{{#crossLink \"Graphics/beginLinearGradientStroke\"}}{{/crossLink}} </td></tr>\n\t *     <tr><td>rs</td><td>{{#crossLink \"Graphics/beginRadialGradientStroke\"}}{{/crossLink}} </td>\n\t *     <td>bs</td><td>{{#crossLink \"Graphics/beginBitmapStroke\"}}{{/crossLink}} </td></tr>\n\t *     <tr><td>es</td><td>{{#crossLink \"Graphics/endStroke\"}}{{/crossLink}} </td>\n\t *     <td>dr</td><td>{{#crossLink \"Graphics/drawRect\"}}{{/crossLink}} </td></tr>\n\t *     <tr><td>rr</td><td>{{#crossLink \"Graphics/drawRoundRect\"}}{{/crossLink}} </td>\n\t *     <td>rc</td><td>{{#crossLink \"Graphics/drawRoundRectComplex\"}}{{/crossLink}} </td></tr>\n\t *     <tr><td>dc</td><td>{{#crossLink \"Graphics/drawCircle\"}}{{/crossLink}} </td>\n\t *     <td>de</td><td>{{#crossLink \"Graphics/drawEllipse\"}}{{/crossLink}} </td></tr>\n\t *     <tr><td>dp</td><td>{{#crossLink \"Graphics/drawPolyStar\"}}{{/crossLink}} </td>\n\t *     <td>p</td><td>{{#crossLink \"Graphics/decodePath\"}}{{/crossLink}} </td></tr>\n\t * </table>\n\t *\n\t * Here is the above example, using the tiny API instead.\n\t *\n\t *      myGraphics.s(\"red\").f(\"blue\").r(20, 20, 100, 50);\n\t *\n\t * @class Graphics\n\t * @constructor\n\t **/\n\tfunction Graphics() {\n\n\n\t// public properties\n\t\t/**\n\t\t * Holds a reference to the last command that was created or appended. For example, you could retain a reference\n\t\t * to a Fill command in order to dynamically update the color later by using:\n\t\t *\n\t\t * \t\tvar myFill = myGraphics.beginFill(\"red\").command;\n\t\t * \t\t// update color later:\n\t\t * \t\tmyFill.style = \"yellow\";\n\t\t *\n\t\t * @property command\n\t\t * @type Object\n\t\t **/\n\t\tthis.command = null;\n\n\n\t// private properties\n\t\t/**\n\t\t * @property _stroke\n\t\t * @protected\n\t\t * @type {Stroke}\n\t\t **/\n\t\tthis._stroke = null;\n\n\t\t/**\n\t\t * @property _strokeStyle\n\t\t * @protected\n\t\t * @type {StrokeStyle}\n\t\t **/\n\t\tthis._strokeStyle = null;\n\t\t\n\t\t/**\n\t\t * @property _oldStrokeStyle\n\t\t * @protected\n\t\t * @type {StrokeStyle}\n\t\t **/\n\t\tthis._oldStrokeStyle = null;\n\t\t\n\t\t/**\n\t\t * @property _strokeDash\n\t\t * @protected\n\t\t * @type {StrokeDash}\n\t\t **/\n\t\tthis._strokeDash = null;\n\t\t\n\t\t/**\n\t\t * @property _oldStrokeDash\n\t\t * @protected\n\t\t * @type {StrokeDash}\n\t\t **/\n\t\tthis._oldStrokeDash = null;\n\n\t\t/**\n\t\t * @property _strokeIgnoreScale\n\t\t * @protected\n\t\t * @type Boolean\n\t\t **/\n\t\tthis._strokeIgnoreScale = false;\n\n\t\t/**\n\t\t * @property _fill\n\t\t * @protected\n\t\t * @type {Fill}\n\t\t **/\n\t\tthis._fill = null;\n\n\t\t/**\n\t\t * @property _instructions\n\t\t * @protected\n\t\t * @type {Array}\n\t\t **/\n\t\tthis._instructions = [];\n\n\t\t/**\n\t\t * Indicates the last instruction index that was committed.\n\t\t * @property _commitIndex\n\t\t * @protected\n\t\t * @type {Number}\n\t\t **/\n\t\tthis._commitIndex = 0;\n\n\t\t/**\n\t\t * Uncommitted instructions.\n\t\t * @property _activeInstructions\n\t\t * @protected\n\t\t * @type {Array}\n\t\t **/\n\t\tthis._activeInstructions = [];\n\n\t\t/**\n\t\t * This indicates that there have been changes to the activeInstruction list since the last updateInstructions call.\n\t\t * @property _dirty\n\t\t * @protected\n\t\t * @type {Boolean}\n\t\t * @default false\n\t\t **/\n\t\tthis._dirty = false;\n\n\t\t/**\n\t\t * Index to draw from if a store operation has happened.\n\t\t * @property _storeIndex\n\t\t * @protected\n\t\t * @type {Number}\n\t\t * @default 0\n\t\t **/\n\t\tthis._storeIndex = 0;\n\n\t// setup:\n\t\tthis.clear();\n\t}\n\tvar p = Graphics.prototype;\n\tvar G = Graphics; // shortcut\n\n\t/**\n\t * <strong>REMOVED</strong>. Removed in favor of using `MySuperClass_constructor`.\n\t * See {{#crossLink \"Utility Methods/extend\"}}{{/crossLink}} and {{#crossLink \"Utility Methods/promote\"}}{{/crossLink}}\n\t * for details.\n\t *\n\t * There is an inheritance tutorial distributed with EaselJS in /tutorials/Inheritance.\n\t *\n\t * @method initialize\n\t * @protected\n\t * @deprecated\n\t */\n\t// p.initialize = function() {}; // searchable for devs wondering where it is.\n\n\n// static public methods:\n\t/**\n\t * Returns a CSS compatible color string based on the specified RGB numeric color values in the format\n\t * \"rgba(255,255,255,1.0)\", or if alpha is null then in the format \"rgb(255,255,255)\". For example,\n\t *\n\t *      createjs.Graphics.getRGB(50, 100, 150, 0.5);\n\t *      // Returns \"rgba(50,100,150,0.5)\"\n\t *\n\t * It also supports passing a single hex color value as the first param, and an optional alpha value as the second\n\t * param. For example,\n\t *\n\t *      createjs.Graphics.getRGB(0xFF00FF, 0.2);\n\t *      // Returns \"rgba(255,0,255,0.2)\"\n\t *\n\t * @method getRGB\n\t * @static\n\t * @param {Number} r The red component for the color, between 0 and 0xFF (255).\n\t * @param {Number} g The green component for the color, between 0 and 0xFF (255).\n\t * @param {Number} b The blue component for the color, between 0 and 0xFF (255).\n\t * @param {Number} [alpha] The alpha component for the color where 0 is fully transparent and 1 is fully opaque.\n\t * @return {String} A CSS compatible color string based on the specified RGB numeric color values in the format\n\t * \"rgba(255,255,255,1.0)\", or if alpha is null then in the format \"rgb(255,255,255)\".\n\t **/\n\tGraphics.getRGB = function(r, g, b, alpha) {\n\t\tif (r != null && b == null) {\n\t\t\talpha = g;\n\t\t\tb = r&0xFF;\n\t\t\tg = r>>8&0xFF;\n\t\t\tr = r>>16&0xFF;\n\t\t}\n\t\tif (alpha == null) {\n\t\t\treturn \"rgb(\"+r+\",\"+g+\",\"+b+\")\";\n\t\t} else {\n\t\t\treturn \"rgba(\"+r+\",\"+g+\",\"+b+\",\"+alpha+\")\";\n\t\t}\n\t};\n\n\t/**\n\t * Returns a CSS compatible color string based on the specified HSL numeric color values in the format \"hsla(360,100,100,1.0)\",\n\t * or if alpha is null then in the format \"hsl(360,100,100)\".\n\t *\n\t *      createjs.Graphics.getHSL(150, 100, 70);\n\t *      // Returns \"hsl(150,100,70)\"\n\t *\n\t * @method getHSL\n\t * @static\n\t * @param {Number} hue The hue component for the color, between 0 and 360.\n\t * @param {Number} saturation The saturation component for the color, between 0 and 100.\n\t * @param {Number} lightness The lightness component for the color, between 0 and 100.\n\t * @param {Number} [alpha] The alpha component for the color where 0 is fully transparent and 1 is fully opaque.\n\t * @return {String} A CSS compatible color string based on the specified HSL numeric color values in the format\n\t * \"hsla(360,100,100,1.0)\", or if alpha is null then in the format \"hsl(360,100,100)\".\n\t **/\n\tGraphics.getHSL = function(hue, saturation, lightness, alpha) {\n\t\tif (alpha == null) {\n\t\t\treturn \"hsl(\"+(hue%360)+\",\"+saturation+\"%,\"+lightness+\"%)\";\n\t\t} else {\n\t\t\treturn \"hsla(\"+(hue%360)+\",\"+saturation+\"%,\"+lightness+\"%,\"+alpha+\")\";\n\t\t}\n\t};\n\n\n// static properties:\n\t/**\n\t * A reusable instance of {{#crossLink \"Graphics/BeginPath\"}}{{/crossLink}} to avoid\n\t * unnecessary instantiation.\n\t * @property beginCmd\n\t * @type {Graphics.BeginPath}\n\t * @static\n\t **/\n\t // defined at the bottom of this file.\n\n\t/**\n\t * Map of Base64 characters to values. Used by {{#crossLink \"Graphics/decodePath\"}}{{/crossLink}}.\n\t * @property BASE_64\n\t * @static\n\t * @final\n\t * @readonly\n\t * @type {Object}\n\t **/\n\tGraphics.BASE_64 = {\"A\":0,\"B\":1,\"C\":2,\"D\":3,\"E\":4,\"F\":5,\"G\":6,\"H\":7,\"I\":8,\"J\":9,\"K\":10,\"L\":11,\"M\":12,\"N\":13,\"O\":14,\"P\":15,\"Q\":16,\"R\":17,\"S\":18,\"T\":19,\"U\":20,\"V\":21,\"W\":22,\"X\":23,\"Y\":24,\"Z\":25,\"a\":26,\"b\":27,\"c\":28,\"d\":29,\"e\":30,\"f\":31,\"g\":32,\"h\":33,\"i\":34,\"j\":35,\"k\":36,\"l\":37,\"m\":38,\"n\":39,\"o\":40,\"p\":41,\"q\":42,\"r\":43,\"s\":44,\"t\":45,\"u\":46,\"v\":47,\"w\":48,\"x\":49,\"y\":50,\"z\":51,\"0\":52,\"1\":53,\"2\":54,\"3\":55,\"4\":56,\"5\":57,\"6\":58,\"7\":59,\"8\":60,\"9\":61,\"+\":62,\"/\":63};\n\n\t/**\n\t * Maps numeric values for the caps parameter of {{#crossLink \"Graphics/setStrokeStyle\"}}{{/crossLink}} to\n\t * corresponding string values. This is primarily for use with the tiny API. The mappings are as follows: 0 to\n\t * \"butt\", 1 to \"round\", and 2 to \"square\".\n\t * For example, to set the line caps to \"square\":\n\t *\n\t *      myGraphics.ss(16, 2);\n\t *\n\t * @property STROKE_CAPS_MAP\n\t * @static\n\t * @final\n\t * @readonly\n\t * @type {Array}\n\t **/\n\tGraphics.STROKE_CAPS_MAP = [\"butt\", \"round\", \"square\"];\n\n\t/**\n\t * Maps numeric values for the joints parameter of {{#crossLink \"Graphics/setStrokeStyle\"}}{{/crossLink}} to\n\t * corresponding string values. This is primarily for use with the tiny API. The mappings are as follows: 0 to\n\t * \"miter\", 1 to \"round\", and 2 to \"bevel\".\n\t * For example, to set the line joints to \"bevel\":\n\t *\n\t *      myGraphics.ss(16, 0, 2);\n\t *\n\t * @property STROKE_JOINTS_MAP\n\t * @static\n\t * @final\n\t * @readonly\n\t * @type {Array}\n\t **/\n\tGraphics.STROKE_JOINTS_MAP = [\"miter\", \"round\", \"bevel\"];\n\n\t/**\n\t * @property _ctx\n\t * @static\n\t * @protected\n\t * @type {CanvasRenderingContext2D}\n\t **/\n\tvar canvas = (createjs.createCanvas?createjs.createCanvas():document.createElement(\"canvas\"));\n\tif (canvas.getContext) {\n\t\tGraphics._ctx = canvas.getContext(\"2d\");\n\t\tcanvas.width = canvas.height = 1;\n\t}\n\n\n// getter / setters:\n\t/**\n\t * Use the {{#crossLink \"Graphics/instructions:property\"}}{{/crossLink}} property instead.\n\t * @method getInstructions\n\t * @return {Array}\n\t * @deprecated\n\t **/\n\tp.getInstructions = function() {\n\t\tthis._updateInstructions();\n\t\treturn this._instructions;\n\t};\n\n\t/**\n\t * Returns the graphics instructions array. Each entry is a graphics command object (ex. Graphics.Fill, Graphics.Rect)\n\t * Modifying the returned array directly is not recommended, and is likely to result in unexpected behaviour.\n\t *\n\t * This property is mainly intended for introspection of the instructions (ex. for graphics export).\n\t * @property instructions\n\t * @type {Array}\n\t * @readonly\n\t **/\n\ttry {\n\t\tObject.defineProperties(p, {\n\t\t\tinstructions: { get: p.getInstructions }\n\t\t});\n\t} catch (e) {}\n\n\n// public methods:\n\t/**\n\t * Returns true if this Graphics instance has no drawing commands.\n\t * @method isEmpty\n\t * @return {Boolean} Returns true if this Graphics instance has no drawing commands.\n\t **/\n\tp.isEmpty = function() {\n\t\treturn !(this._instructions.length || this._activeInstructions.length);\n\t};\n\n\t/**\n\t * Draws the display object into the specified context ignoring its visible, alpha, shadow, and transform.\n\t * Returns true if the draw was handled (useful for overriding functionality).\n\t *\n\t * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n\t * @method draw\n\t * @param {CanvasRenderingContext2D} ctx The canvas 2D context object to draw into.\n\t * @param {Object} data Optional data that is passed to graphics command exec methods. When called from a Shape instance, the shape passes itself as the data parameter. This can be used by custom graphic commands to insert contextual data.\n\t **/\n\tp.draw = function(ctx, data) {\n\t\tthis._updateInstructions();\n\t\tvar instr = this._instructions;\n\t\tfor (var i=this._storeIndex, l=instr.length; i<l; i++) {\n\t\t\tinstr[i].exec(ctx, data);\n\t\t}\n\t};\n\n\t/**\n\t * Draws only the path described for this Graphics instance, skipping any non-path instructions, including fill and\n\t * stroke descriptions. Used for <code>DisplayObject.mask</code> to draw the clipping path, for example.\n\t *\n\t * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n\t * @method drawAsPath\n\t * @param {CanvasRenderingContext2D} ctx The canvas 2D context object to draw into.\n\t **/\n\tp.drawAsPath = function(ctx) {\n\t\tthis._updateInstructions();\n\t\tvar instr, instrs = this._instructions;\n\t\tfor (var i=this._storeIndex, l=instrs.length; i<l; i++) {\n\t\t\t// the first command is always a beginPath command.\n\t\t\tif ((instr = instrs[i]).path !== false) { instr.exec(ctx); }\n\t\t}\n\t};\n\n\n// public methods that map directly to context 2D calls:\n\t/**\n\t * Moves the drawing point to the specified position. A tiny API method \"mt\" also exists.\n\t * @method moveTo\n\t * @param {Number} x The x coordinate the drawing point should move to.\n\t * @param {Number} y The y coordinate the drawing point should move to.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls).\n\t * @chainable\n\t **/\n\tp.moveTo = function(x, y) {\n\t\treturn this.append(new G.MoveTo(x,y), true);\n\t};\n\n\t/**\n\t * Draws a line from the current drawing point to the specified position, which become the new current drawing\n\t * point. Note that you *must* call {{#crossLink \"Graphics/moveTo\"}}{{/crossLink}} before the first `lineTo()`.\n\t * A tiny API method \"lt\" also exists.\n\t *\n\t * For detailed information, read the\n\t * <a href=\"http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#complex-shapes-(paths)\">\n\t * whatwg spec</a>.\n\t * @method lineTo\n\t * @param {Number} x The x coordinate the drawing point should draw to.\n\t * @param {Number} y The y coordinate the drawing point should draw to.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.lineTo = function(x, y) {\n\t\treturn this.append(new G.LineTo(x,y));\n\t};\n\n\t/**\n\t * Draws an arc with the specified control points and radius.  For detailed information, read the\n\t * <a href=\"http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#dom-context-2d-arcto\">\n\t * whatwg spec</a>. A tiny API method \"at\" also exists.\n\t * @method arcTo\n\t * @param {Number} x1\n\t * @param {Number} y1\n\t * @param {Number} x2\n\t * @param {Number} y2\n\t * @param {Number} radius\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.arcTo = function(x1, y1, x2, y2, radius) {\n\t\treturn this.append(new G.ArcTo(x1, y1, x2, y2, radius));\n\t};\n\n\t/**\n\t * Draws an arc defined by the radius, startAngle and endAngle arguments, centered at the position (x, y). For\n\t * example, to draw a full circle with a radius of 20 centered at (100, 100):\n\t *\n\t *      arc(100, 100, 20, 0, Math.PI*2);\n\t *\n\t * For detailed information, read the\n\t * <a href=\"http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#dom-context-2d-arc\">whatwg spec</a>.\n\t * A tiny API method \"a\" also exists.\n\t * @method arc\n\t * @param {Number} x\n\t * @param {Number} y\n\t * @param {Number} radius\n\t * @param {Number} startAngle Measured in radians.\n\t * @param {Number} endAngle Measured in radians.\n\t * @param {Boolean} anticlockwise\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.arc = function(x, y, radius, startAngle, endAngle, anticlockwise) {\n\t\treturn this.append(new G.Arc(x, y, radius, startAngle, endAngle, anticlockwise));\n\t};\n\n\t/**\n\t * Draws a quadratic curve from the current drawing point to (x, y) using the control point (cpx, cpy). For detailed\n\t * information, read the <a href=\"http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#dom-context-2d-quadraticcurveto\">\n\t * whatwg spec</a>. A tiny API method \"qt\" also exists.\n\t * @method quadraticCurveTo\n\t * @param {Number} cpx\n\t * @param {Number} cpy\n\t * @param {Number} x\n\t * @param {Number} y\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.quadraticCurveTo = function(cpx, cpy, x, y) {\n\t\treturn this.append(new G.QuadraticCurveTo(cpx, cpy, x, y));\n\t};\n\n\t/**\n\t * Draws a bezier curve from the current drawing point to (x, y) using the control points (cp1x, cp1y) and (cp2x,\n\t * cp2y). For detailed information, read the\n\t * <a href=\"http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#dom-context-2d-beziercurveto\">\n\t * whatwg spec</a>. A tiny API method \"bt\" also exists.\n\t * @method bezierCurveTo\n\t * @param {Number} cp1x\n\t * @param {Number} cp1y\n\t * @param {Number} cp2x\n\t * @param {Number} cp2y\n\t * @param {Number} x\n\t * @param {Number} y\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.bezierCurveTo = function(cp1x, cp1y, cp2x, cp2y, x, y) {\n\t\treturn this.append(new G.BezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y));\n\t};\n\n\t/**\n\t * Draws a rectangle at (x, y) with the specified width and height using the current fill and/or stroke.\n\t * For detailed information, read the\n\t * <a href=\"http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#dom-context-2d-rect\">\n\t * whatwg spec</a>. A tiny API method \"r\" also exists.\n\t * @method rect\n\t * @param {Number} x\n\t * @param {Number} y\n\t * @param {Number} w Width of the rectangle\n\t * @param {Number} h Height of the rectangle\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.rect = function(x, y, w, h) {\n\t\treturn this.append(new G.Rect(x, y, w, h));\n\t};\n\n\t/**\n\t * Closes the current path, effectively drawing a line from the current drawing point to the first drawing point specified\n\t * since the fill or stroke was last set. A tiny API method \"cp\" also exists.\n\t * @method closePath\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.closePath = function() {\n\t\treturn this._activeInstructions.length ? this.append(new G.ClosePath()) : this;\n\t};\n\n\n// public methods that roughly map to Flash graphics APIs:\n\t/**\n\t * Clears all drawing instructions, effectively resetting this Graphics instance. Any line and fill styles will need\n\t * to be redefined to draw shapes following a clear call. A tiny API method \"c\" also exists.\n\t * @method clear\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.clear = function() {\n\t\tthis._instructions.length = this._activeInstructions.length = this._commitIndex = 0;\n\t\tthis._strokeStyle = this._oldStrokeStyle = this._stroke = this._fill = this._strokeDash = this._oldStrokeDash = null;\n\t\tthis._dirty = this._strokeIgnoreScale = false;\n\t\treturn this;\n\t};\n\n\t/**\n\t * Begins a fill with the specified color. This ends the current sub-path. A tiny API method \"f\" also exists.\n\t * @method beginFill\n\t * @param {String} color A CSS compatible color value (ex. \"red\", \"#FF0000\", or \"rgba(255,0,0,0.5)\"). Setting to\n\t * null will result in no fill.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.beginFill = function(color) {\n\t\treturn this._setFill(color ? new G.Fill(color) : null);\n\t};\n\n\t/**\n\t * Begins a linear gradient fill defined by the line (x0, y0) to (x1, y1). This ends the current sub-path. For\n\t * example, the following code defines a black to white vertical gradient ranging from 20px to 120px, and draws a\n\t * square to display it:\n\t *\n\t *      myGraphics.beginLinearGradientFill([\"#000\",\"#FFF\"], [0, 1], 0, 20, 0, 120).drawRect(20, 20, 120, 120);\n\t *\n\t * A tiny API method \"lf\" also exists.\n\t * @method beginLinearGradientFill\n\t * @param {Array} colors An array of CSS compatible color values. For example, [\"#F00\",\"#00F\"] would define a gradient\n\t * drawing from red to blue.\n\t * @param {Array} ratios An array of gradient positions which correspond to the colors. For example, [0.1, 0.9] would draw\n\t * the first color to 10% then interpolating to the second color at 90%.\n\t * @param {Number} x0 The position of the first point defining the line that defines the gradient direction and size.\n\t * @param {Number} y0 The position of the first point defining the line that defines the gradient direction and size.\n\t * @param {Number} x1 The position of the second point defining the line that defines the gradient direction and size.\n\t * @param {Number} y1 The position of the second point defining the line that defines the gradient direction and size.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.beginLinearGradientFill = function(colors, ratios, x0, y0, x1, y1) {\n\t\treturn this._setFill(new G.Fill().linearGradient(colors, ratios, x0, y0, x1, y1));\n\t};\n\n\t/**\n\t * Begins a radial gradient fill. This ends the current sub-path. For example, the following code defines a red to\n\t * blue radial gradient centered at (100, 100), with a radius of 50, and draws a circle to display it:\n\t *\n\t *      myGraphics.beginRadialGradientFill([\"#F00\",\"#00F\"], [0, 1], 100, 100, 0, 100, 100, 50).drawCircle(100, 100, 50);\n\t *\n\t * A tiny API method \"rf\" also exists.\n\t * @method beginRadialGradientFill\n\t * @param {Array} colors An array of CSS compatible color values. For example, [\"#F00\",\"#00F\"] would define\n\t * a gradient drawing from red to blue.\n\t * @param {Array} ratios An array of gradient positions which correspond to the colors. For example, [0.1,\n\t * 0.9] would draw the first color to 10% then interpolating to the second color at 90%.\n\t * @param {Number} x0 Center position of the inner circle that defines the gradient.\n\t * @param {Number} y0 Center position of the inner circle that defines the gradient.\n\t * @param {Number} r0 Radius of the inner circle that defines the gradient.\n\t * @param {Number} x1 Center position of the outer circle that defines the gradient.\n\t * @param {Number} y1 Center position of the outer circle that defines the gradient.\n\t * @param {Number} r1 Radius of the outer circle that defines the gradient.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.beginRadialGradientFill = function(colors, ratios, x0, y0, r0, x1, y1, r1) {\n\t\treturn this._setFill(new G.Fill().radialGradient(colors, ratios, x0, y0, r0, x1, y1, r1));\n\t};\n\n\t/**\n\t * Begins a pattern fill using the specified image. This ends the current sub-path. A tiny API method \"bf\" also\n\t * exists.\n\t * @method beginBitmapFill\n\t * @param {HTMLImageElement | HTMLCanvasElement | HTMLVideoElement} image The Image, Canvas, or Video object to use\n\t * as the pattern. Must be loaded prior to creating a bitmap fill, or the fill will be empty.\n\t * @param {String} repetition Optional. Indicates whether to repeat the image in the fill area. One of \"repeat\",\n\t * \"repeat-x\", \"repeat-y\", or \"no-repeat\". Defaults to \"repeat\". Note that Firefox does not support \"repeat-x\" or\n\t * \"repeat-y\" (latest tests were in FF 20.0), and will default to \"repeat\".\n\t * @param {Matrix2D} matrix Optional. Specifies a transformation matrix for the bitmap fill. This transformation\n\t * will be applied relative to the parent transform.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.beginBitmapFill = function(image, repetition, matrix) {\n\t\treturn this._setFill(new G.Fill(null,matrix).bitmap(image, repetition));\n\t};\n\n\t/**\n\t * Ends the current sub-path, and begins a new one with no fill. Functionally identical to <code>beginFill(null)</code>.\n\t * A tiny API method \"ef\" also exists.\n\t * @method endFill\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.endFill = function() {\n\t\treturn this.beginFill();\n\t};\n\n\t/**\n\t * Sets the stroke style. Like all drawing methods, this can be chained, so you can define\n\t * the stroke style and color in a single line of code like so:\n\t *\n\t * \tmyGraphics.setStrokeStyle(8,\"round\").beginStroke(\"#F00\");\n\t *\n\t * A tiny API method \"ss\" also exists.\n\t * @method setStrokeStyle\n\t * @param {Number} thickness The width of the stroke.\n\t * @param {String | Number} [caps=0] Indicates the type of caps to use at the end of lines. One of butt,\n\t * round, or square. Defaults to \"butt\". Also accepts the values 0 (butt), 1 (round), and 2 (square) for use with\n\t * the tiny API.\n\t * @param {String | Number} [joints=0] Specifies the type of joints that should be used where two lines meet.\n\t * One of bevel, round, or miter. Defaults to \"miter\". Also accepts the values 0 (miter), 1 (round), and 2 (bevel)\n\t * for use with the tiny API.\n\t * @param {Number} [miterLimit=10] If joints is set to \"miter\", then you can specify a miter limit ratio which\n\t * controls at what point a mitered joint will be clipped.\n\t * @param {Boolean} [ignoreScale=false] If true, the stroke will be drawn at the specified thickness regardless\n\t * of active transformations.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.setStrokeStyle = function(thickness, caps, joints, miterLimit, ignoreScale) {\n\t\tthis._updateInstructions(true);\n\t\tthis._strokeStyle = this.command = new G.StrokeStyle(thickness, caps, joints, miterLimit, ignoreScale);\n\n\t\t// ignoreScale lives on Stroke, not StrokeStyle, so we do a little trickery:\n\t\tif (this._stroke) { this._stroke.ignoreScale = ignoreScale; }\n\t\tthis._strokeIgnoreScale = ignoreScale;\n\t\treturn this;\n\t};\n\t\n\t/**\n\t * Sets or clears the stroke dash pattern.\n\t *\n\t * \tmyGraphics.setStrokeDash([20, 10], 0);\n\t *\n\t * A tiny API method `sd` also exists.\n\t * @method setStrokeDash\n\t * @param {Array} [segments] An array specifying the dash pattern, alternating between line and gap.\n\t * For example, `[20,10]` would create a pattern of 20 pixel lines with 10 pixel gaps between them.\n\t * Passing null or an empty array will clear the existing stroke dash.\n\t * @param {Number} [offset=0] The offset of the dash pattern. For example, you could increment this value to create a \"marching ants\" effect.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.setStrokeDash = function(segments, offset) {\n\t\tthis._updateInstructions(true);\n\t\tthis._strokeDash = this.command = new G.StrokeDash(segments, offset);\n\t\treturn this;\n\t};\n\n\t/**\n\t * Begins a stroke with the specified color. This ends the current sub-path. A tiny API method \"s\" also exists.\n\t * @method beginStroke\n\t * @param {String} color A CSS compatible color value (ex. \"#FF0000\", \"red\", or \"rgba(255,0,0,0.5)\"). Setting to\n\t * null will result in no stroke.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.beginStroke = function(color) {\n\t\treturn this._setStroke(color ? new G.Stroke(color) : null);\n\t};\n\n\t/**\n\t * Begins a linear gradient stroke defined by the line (x0, y0) to (x1, y1). This ends the current sub-path. For\n\t * example, the following code defines a black to white vertical gradient ranging from 20px to 120px, and draws a\n\t * square to display it:\n\t *\n\t *      myGraphics.setStrokeStyle(10).\n\t *          beginLinearGradientStroke([\"#000\",\"#FFF\"], [0, 1], 0, 20, 0, 120).drawRect(20, 20, 120, 120);\n\t *\n\t * A tiny API method \"ls\" also exists.\n\t * @method beginLinearGradientStroke\n\t * @param {Array} colors An array of CSS compatible color values. For example, [\"#F00\",\"#00F\"] would define\n\t * a gradient drawing from red to blue.\n\t * @param {Array} ratios An array of gradient positions which correspond to the colors. For example, [0.1,\n\t * 0.9] would draw the first color to 10% then interpolating to the second color at 90%.\n\t * @param {Number} x0 The position of the first point defining the line that defines the gradient direction and size.\n\t * @param {Number} y0 The position of the first point defining the line that defines the gradient direction and size.\n\t * @param {Number} x1 The position of the second point defining the line that defines the gradient direction and size.\n\t * @param {Number} y1 The position of the second point defining the line that defines the gradient direction and size.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.beginLinearGradientStroke = function(colors, ratios, x0, y0, x1, y1) {\n\t\treturn this._setStroke(new G.Stroke().linearGradient(colors, ratios, x0, y0, x1, y1));\n\t};\n\n\t/**\n\t * Begins a radial gradient stroke. This ends the current sub-path. For example, the following code defines a red to\n\t * blue radial gradient centered at (100, 100), with a radius of 50, and draws a rectangle to display it:\n\t *\n\t *      myGraphics.setStrokeStyle(10)\n\t *          .beginRadialGradientStroke([\"#F00\",\"#00F\"], [0, 1], 100, 100, 0, 100, 100, 50)\n\t *          .drawRect(50, 90, 150, 110);\n\t *\n\t * A tiny API method \"rs\" also exists.\n\t * @method beginRadialGradientStroke\n\t * @param {Array} colors An array of CSS compatible color values. For example, [\"#F00\",\"#00F\"] would define\n\t * a gradient drawing from red to blue.\n\t * @param {Array} ratios An array of gradient positions which correspond to the colors. For example, [0.1,\n\t * 0.9] would draw the first color to 10% then interpolating to the second color at 90%, then draw the second color\n\t * to 100%.\n\t * @param {Number} x0 Center position of the inner circle that defines the gradient.\n\t * @param {Number} y0 Center position of the inner circle that defines the gradient.\n\t * @param {Number} r0 Radius of the inner circle that defines the gradient.\n\t * @param {Number} x1 Center position of the outer circle that defines the gradient.\n\t * @param {Number} y1 Center position of the outer circle that defines the gradient.\n\t * @param {Number} r1 Radius of the outer circle that defines the gradient.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.beginRadialGradientStroke = function(colors, ratios, x0, y0, r0, x1, y1, r1) {\n\t\treturn this._setStroke(new G.Stroke().radialGradient(colors, ratios, x0, y0, r0, x1, y1, r1));\n\t};\n\n\t/**\n\t * Begins a pattern fill using the specified image. This ends the current sub-path. Note that unlike bitmap fills,\n\t * strokes do not currently support a matrix parameter due to limitations in the canvas API. A tiny API method \"bs\"\n\t * also exists.\n\t * @method beginBitmapStroke\n\t * @param {HTMLImageElement | HTMLCanvasElement | HTMLVideoElement} image The Image, Canvas, or Video object to use\n\t * as the pattern. Must be loaded prior to creating a bitmap fill, or the fill will be empty.\n\t * @param {String} [repetition=repeat] Optional. Indicates whether to repeat the image in the fill area. One of\n\t * \"repeat\", \"repeat-x\", \"repeat-y\", or \"no-repeat\". Defaults to \"repeat\".\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.beginBitmapStroke = function(image, repetition) {\n\t\t// NOTE: matrix is not supported for stroke because transforms on strokes also affect the drawn stroke width.\n\t\treturn this._setStroke(new G.Stroke().bitmap(image, repetition));\n\t};\n\n\t/**\n\t * Ends the current sub-path, and begins a new one with no stroke. Functionally identical to <code>beginStroke(null)</code>.\n\t * A tiny API method \"es\" also exists.\n\t * @method endStroke\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.endStroke = function() {\n\t\treturn this.beginStroke();\n\t};\n\n\t/**\n\t * Maps the familiar ActionScript <code>curveTo()</code> method to the functionally similar {{#crossLink \"Graphics/quadraticCurveTo\"}}{{/crossLink}}\n\t * method.\n\t * @method quadraticCurveTo\n\t * @param {Number} cpx\n\t * @param {Number} cpy\n\t * @param {Number} x\n\t * @param {Number} y\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.curveTo = p.quadraticCurveTo;\n\n\t/**\n\t *\n\t * Maps the familiar ActionScript <code>drawRect()</code> method to the functionally similar {{#crossLink \"Graphics/rect\"}}{{/crossLink}}\n\t * method.\n\t * @method drawRect\n\t * @param {Number} x\n\t * @param {Number} y\n\t * @param {Number} w Width of the rectangle\n\t * @param {Number} h Height of the rectangle\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.drawRect = p.rect;\n\n\t/**\n\t * Draws a rounded rectangle with all corners with the specified radius.\n\t * @method drawRoundRect\n\t * @param {Number} x\n\t * @param {Number} y\n\t * @param {Number} w\n\t * @param {Number} h\n\t * @param {Number} radius Corner radius.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.drawRoundRect = function(x, y, w, h, radius) {\n\t\treturn this.drawRoundRectComplex(x, y, w, h, radius, radius, radius, radius);\n\t};\n\n\t/**\n\t * Draws a rounded rectangle with different corner radii. Supports positive and negative corner radii. A tiny API\n\t * method \"rc\" also exists.\n\t * @method drawRoundRectComplex\n\t * @param {Number} x The horizontal coordinate to draw the round rect.\n\t * @param {Number} y The vertical coordinate to draw the round rect.\n\t * @param {Number} w The width of the round rect.\n\t * @param {Number} h The height of the round rect.\n\t * @param {Number} radiusTL Top left corner radius.\n\t * @param {Number} radiusTR Top right corner radius.\n\t * @param {Number} radiusBR Bottom right corner radius.\n\t * @param {Number} radiusBL Bottom left corner radius.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.drawRoundRectComplex = function(x, y, w, h, radiusTL, radiusTR, radiusBR, radiusBL) {\n\t\treturn this.append(new G.RoundRect(x, y, w, h, radiusTL, radiusTR, radiusBR, radiusBL));\n\t};\n\n\t/**\n\t * Draws a circle with the specified radius at (x, y).\n\t *\n\t *      var g = new createjs.Graphics();\n\t *\t    g.setStrokeStyle(1);\n\t *\t    g.beginStroke(createjs.Graphics.getRGB(0,0,0));\n\t *\t    g.beginFill(createjs.Graphics.getRGB(255,0,0));\n\t *\t    g.drawCircle(0,0,3);\n\t *\n\t *\t    var s = new createjs.Shape(g);\n\t *\t\ts.x = 100;\n\t *\t\ts.y = 100;\n\t *\n\t *\t    stage.addChild(s);\n\t *\t    stage.update();\n\t *\n\t * A tiny API method \"dc\" also exists.\n\t * @method drawCircle\n\t * @param {Number} x x coordinate center point of circle.\n\t * @param {Number} y y coordinate center point of circle.\n\t * @param {Number} radius Radius of circle.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.drawCircle = function(x, y, radius) {\n\t\treturn this.append(new G.Circle(x, y, radius));\n\t};\n\n\t/**\n\t * Draws an ellipse (oval) with a specified width (w) and height (h). Similar to {{#crossLink \"Graphics/drawCircle\"}}{{/crossLink}},\n\t * except the width and height can be different. A tiny API method \"de\" also exists.\n\t * @method drawEllipse\n\t * @param {Number} x The left coordinate point of the ellipse. Note that this is different from {{#crossLink \"Graphics/drawCircle\"}}{{/crossLink}}\n\t * which draws from center.\n\t * @param {Number} y The top coordinate point of the ellipse. Note that this is different from {{#crossLink \"Graphics/drawCircle\"}}{{/crossLink}}\n\t * which draws from the center.\n\t * @param {Number} w The height (horizontal diameter) of the ellipse. The horizontal radius will be half of this\n\t * number.\n\t * @param {Number} h The width (vertical diameter) of the ellipse. The vertical radius will be half of this number.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.drawEllipse = function(x, y, w, h) {\n\t\treturn this.append(new G.Ellipse(x, y, w, h));\n\t};\n\n\t/**\n\t * Draws a star if pointSize is greater than 0, or a regular polygon if pointSize is 0 with the specified number of\n\t * points. For example, the following code will draw a familiar 5 pointed star shape centered at 100, 100 and with a\n\t * radius of 50:\n\t *\n\t *      myGraphics.beginFill(\"#FF0\").drawPolyStar(100, 100, 50, 5, 0.6, -90);\n\t *      // Note: -90 makes the first point vertical\n\t *\n\t * A tiny API method \"dp\" also exists.\n\t *\n\t * @method drawPolyStar\n\t * @param {Number} x Position of the center of the shape.\n\t * @param {Number} y Position of the center of the shape.\n\t * @param {Number} radius The outer radius of the shape.\n\t * @param {Number} sides The number of points on the star or sides on the polygon.\n\t * @param {Number} pointSize The depth or \"pointy-ness\" of the star points. A pointSize of 0 will draw a regular\n\t * polygon (no points), a pointSize of 1 will draw nothing because the points are infinitely pointy.\n\t * @param {Number} angle The angle of the first point / corner. For example a value of 0 will draw the first point\n\t * directly to the right of the center.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.drawPolyStar = function(x, y, radius, sides, pointSize, angle) {\n\t\treturn this.append(new G.PolyStar(x, y, radius, sides, pointSize, angle));\n\t};\n\n\t// TODO: deprecated.\n\t/**\n\t * Removed in favour of using custom command objects with {{#crossLink \"Graphics/append\"}}{{/crossLink}}.\n\t * @method inject\n\t * @deprecated\n\t **/\n\n\t/**\n\t * Appends a graphics command object to the graphics queue. Command objects expose an \"exec\" method\n\t * that accepts two parameters: the Context2D to operate on, and an arbitrary data object passed into\n\t * {{#crossLink \"Graphics/draw\"}}{{/crossLink}}. The latter will usually be the Shape instance that called draw.\n\t *\n\t * This method is used internally by Graphics methods, such as drawCircle, but can also be used directly to insert\n\t * built-in or custom graphics commands. For example:\n\t *\n\t * \t\t// attach data to our shape, so we can access it during the draw:\n\t * \t\tmyShape.color = \"red\";\n\t *\n\t * \t\t// append a Circle command object:\n\t * \t\tmyShape.graphics.append(new createjs.Graphics.Circle(50, 50, 30));\n\t *\n\t * \t\t// append a custom command object with an exec method that sets the fill style\n\t * \t\t// based on the shape's data, and then fills the circle.\n\t * \t\tmyShape.graphics.append({exec:function(ctx, shape) {\n\t * \t\t\tctx.fillStyle = shape.color;\n\t * \t\t\tctx.fill();\n\t * \t\t}});\n\t *\n\t * @method append\n\t * @param {Object} command A graphics command object exposing an \"exec\" method.\n\t * @param {boolean} clean The clean param is primarily for internal use. A value of true indicates that a command does not generate a path that should be stroked or filled.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.append = function(command, clean) {\n\t\tthis._activeInstructions.push(command);\n\t\tthis.command = command;\n\t\tif (!clean) { this._dirty = true; }\n\t\treturn this;\n\t};\n\n\t/**\n\t * Decodes a compact encoded path string into a series of draw instructions.\n\t * This format is not intended to be human readable, and is meant for use by authoring tools.\n\t * The format uses a base64 character set, with each character representing 6 bits, to define a series of draw\n\t * commands.\n\t *\n\t * Each command is comprised of a single \"header\" character followed by a variable number of alternating x and y\n\t * position values. Reading the header bits from left to right (most to least significant): bits 1 to 3 specify the\n\t * type of operation (0-moveTo, 1-lineTo, 2-quadraticCurveTo, 3-bezierCurveTo, 4-closePath, 5-7 unused). Bit 4\n\t * indicates whether position values use 12 bits (2 characters) or 18 bits (3 characters), with a one indicating the\n\t * latter. Bits 5 and 6 are currently unused.\n\t *\n\t * Following the header is a series of 0 (closePath), 2 (moveTo, lineTo), 4 (quadraticCurveTo), or 6 (bezierCurveTo)\n\t * parameters. These parameters are alternating x/y positions represented by 2 or 3 characters (as indicated by the\n\t * 4th bit in the command char). These characters consist of a 1 bit sign (1 is negative, 0 is positive), followed\n\t * by an 11 (2 char) or 17 (3 char) bit integer value. All position values are in tenths of a pixel. Except in the\n\t * case of move operations which are absolute, this value is a delta from the previous x or y position (as\n\t * appropriate).\n\t *\n\t * For example, the string \"A3cAAMAu4AAA\" represents a line starting at -150,0 and ending at 150,0.\n\t * <br />A - bits 000000. First 3 bits (000) indicate a moveTo operation. 4th bit (0) indicates 2 chars per\n\t * parameter.\n\t * <br />n0 - 110111011100. Absolute x position of -150.0px. First bit indicates a negative value, remaining bits\n\t * indicate 1500 tenths of a pixel.\n\t * <br />AA - 000000000000. Absolute y position of 0.\n\t * <br />I - 001100. First 3 bits (001) indicate a lineTo operation. 4th bit (1) indicates 3 chars per parameter.\n\t * <br />Au4 - 000000101110111000. An x delta of 300.0px, which is added to the previous x value of -150.0px to\n\t * provide an absolute position of +150.0px.\n\t * <br />AAA - 000000000000000000. A y delta value of 0.\n\t *\n\t * A tiny API method \"p\" also exists.\n\t * @method decodePath\n\t * @param {String} str The path string to decode.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.decodePath = function(str) {\n\t\tvar instructions = [this.moveTo, this.lineTo, this.quadraticCurveTo, this.bezierCurveTo, this.closePath];\n\t\tvar paramCount = [2, 2, 4, 6, 0];\n\t\tvar i=0, l=str.length;\n\t\tvar params = [];\n\t\tvar x=0, y=0;\n\t\tvar base64 = Graphics.BASE_64;\n\n\t\twhile (i<l) {\n\t\t\tvar c = str.charAt(i);\n\t\t\tvar n = base64[c];\n\t\t\tvar fi = n>>3; // highest order bits 1-3 code for operation.\n\t\t\tvar f = instructions[fi];\n\t\t\t// check that we have a valid instruction & that the unused bits are empty:\n\t\t\tif (!f || (n&3)) { throw(\"bad path data (@\"+i+\"): \"+c); }\n\t\t\tvar pl = paramCount[fi];\n\t\t\tif (!fi) { x=y=0; } // move operations reset the position.\n\t\t\tparams.length = 0;\n\t\t\ti++;\n\t\t\tvar charCount = (n>>2&1)+2;  // 4th header bit indicates number size for this operation.\n\t\t\tfor (var p=0; p<pl; p++) {\n\t\t\t\tvar num = base64[str.charAt(i)];\n\t\t\t\tvar sign = (num>>5) ? -1 : 1;\n\t\t\t\tnum = ((num&31)<<6)|(base64[str.charAt(i+1)]);\n\t\t\t\tif (charCount == 3) { num = (num<<6)|(base64[str.charAt(i+2)]); }\n\t\t\t\tnum = sign*num/10;\n\t\t\t\tif (p%2) { x = (num += x); }\n\t\t\t\telse { y = (num += y); }\n\t\t\t\tparams[p] = num;\n\t\t\t\ti += charCount;\n\t\t\t}\n\t\t\tf.apply(this,params);\n\t\t}\n\t\treturn this;\n\t};\n\n\t/**\n\t * Stores all graphics commands so they won't be executed in future draws. Calling store() a second time adds to\n\t * the existing store. This also affects `drawAsPath()`.\n\t *\n\t * This is useful in cases where you are creating vector graphics in an iterative manner (ex. generative art), so\n\t * that only new graphics need to be drawn (which can provide huge performance benefits), but you wish to retain all\n\t * of the vector instructions for later use (ex. scaling, modifying, or exporting).\n\t *\n\t * Note that calling store() will force the active path (if any) to be ended in a manner similar to changing\n\t * the fill or stroke.\n\t *\n\t * For example, consider a application where the user draws lines with the mouse. As each line segment (or collection of\n\t * segments) are added to a Shape, it can be rasterized using {{#crossLink \"DisplayObject/updateCache\"}}{{/crossLink}},\n\t * and then stored, so that it can be redrawn at a different scale when the application is resized, or exported to SVG.\n\t *\n\t * \t// set up cache:\n\t * \tmyShape.cache(0,0,500,500,scale);\n\t *\n\t * \t// when the user drags, draw a new line:\n\t * \tmyShape.graphics.moveTo(oldX,oldY).lineTo(newX,newY);\n\t * \t// then draw it into the existing cache:\n\t * \tmyShape.updateCache(\"source-over\");\n\t * \t// store the new line, so it isn't redrawn next time:\n\t * \tmyShape.store();\n\t *\n\t * \t// then, when the window resizes, we can re-render at a different scale:\n\t * \t// first, unstore all our lines:\n\t * \tmyShape.unstore();\n\t * \t// then cache using the new scale:\n\t * \tmyShape.cache(0,0,500,500,newScale);\n\t * \t// finally, store the existing commands again:\n\t * \tmyShape.store();\n\t *\n\t * @method store\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.store = function() {\n\t\tthis._updateInstructions(true);\n\t\tthis._storeIndex = this._instructions.length;\n\t\treturn this;\n\t};\n\n\t/**\n\t * Unstores any graphics commands that were previously stored using {{#crossLink \"Graphics/store\"}}{{/crossLink}}\n\t * so that they will be executed in subsequent draw calls.\n\t *\n\t * @method unstore\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.unstore = function() {\n\t\tthis._storeIndex = 0;\n\t\treturn this;\n\t};\n\n\t/**\n\t * Returns a clone of this Graphics instance. Note that the individual command objects are not cloned.\n\t * @method clone\n\t * @return {Graphics} A clone of the current Graphics instance.\n\t **/\n\tp.clone = function() {\n\t\tvar o = new Graphics();\n\t\to.command = this.command;\n\t\to._stroke = this._stroke;\n\t\to._strokeStyle = this._strokeStyle;\n\t\to._strokeDash = this._strokeDash;\n\t\to._strokeIgnoreScale = this._strokeIgnoreScale;\n\t\to._fill = this._fill;\n\t\to._instructions = this._instructions.slice();\n\t\to._commitIndex = this._commitIndex;\n\t\to._activeInstructions = this._activeInstructions.slice();\n\t\to._dirty = this._dirty;\n\t\to._storeIndex = this._storeIndex;\n\t\treturn o;\n\t};\n\n\t/**\n\t * Returns a string representation of this object.\n\t * @method toString\n\t * @return {String} a string representation of the instance.\n\t **/\n\tp.toString = function() {\n\t\treturn \"[Graphics]\";\n\t};\n\n\n// tiny API:\n\t/**\n\t * Shortcut to moveTo.\n\t * @method mt\n\t * @param {Number} x The x coordinate the drawing point should move to.\n\t * @param {Number} y The y coordinate the drawing point should move to.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls).\n\t * @chainable\n\t * @protected\n\t **/\n\tp.mt = p.moveTo;\n\n\t/**\n\t * Shortcut to lineTo.\n\t * @method lt\n\t * @param {Number} x The x coordinate the drawing point should draw to.\n\t * @param {Number} y The y coordinate the drawing point should draw to.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t * @protected\n\t **/\n\tp.lt = p.lineTo;\n\n\t/**\n\t * Shortcut to arcTo.\n\t * @method at\n\t * @param {Number} x1\n\t * @param {Number} y1\n\t * @param {Number} x2\n\t * @param {Number} y2\n\t * @param {Number} radius\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t * @protected\n\t **/\n\tp.at = p.arcTo;\n\n\t/**\n\t * Shortcut to bezierCurveTo.\n\t * @method bt\n\t * @param {Number} cp1x\n\t * @param {Number} cp1y\n\t * @param {Number} cp2x\n\t * @param {Number} cp2y\n\t * @param {Number} x\n\t * @param {Number} y\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t * @protected\n\t **/\n\tp.bt = p.bezierCurveTo;\n\n\t/**\n\t * Shortcut to quadraticCurveTo / curveTo.\n\t * @method qt\n\t * @param {Number} cpx\n\t * @param {Number} cpy\n\t * @param {Number} x\n\t * @param {Number} y\n\t * @protected\n\t * @chainable\n\t **/\n\tp.qt = p.quadraticCurveTo;\n\n\t/**\n\t * Shortcut to arc.\n\t * @method a\n\t * @param {Number} x\n\t * @param {Number} y\n\t * @param {Number} radius\n\t * @param {Number} startAngle Measured in radians.\n\t * @param {Number} endAngle Measured in radians.\n\t * @param {Boolean} anticlockwise\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @protected\n\t * @chainable\n\t **/\n\tp.a = p.arc;\n\n\t/**\n\t * Shortcut to rect.\n\t * @method r\n\t * @param {Number} x\n\t * @param {Number} y\n\t * @param {Number} w Width of the rectangle\n\t * @param {Number} h Height of the rectangle\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t * @protected\n\t **/\n\tp.r = p.rect;\n\n\t/**\n\t * Shortcut to closePath.\n\t * @method cp\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t * @protected\n\t **/\n\tp.cp = p.closePath;\n\n\t/**\n\t * Shortcut to clear.\n\t * @method c\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t * @protected\n\t **/\n\tp.c = p.clear;\n\n\t/**\n\t * Shortcut to beginFill.\n\t * @method f\n\t * @param {String} color A CSS compatible color value (ex. \"red\", \"#FF0000\", or \"rgba(255,0,0,0.5)\"). Setting to\n\t * null will result in no fill.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t * @protected\n\t **/\n\tp.f = p.beginFill;\n\n\t/**\n\t * Shortcut to beginLinearGradientFill.\n\t * @method lf\n\t * @param {Array} colors An array of CSS compatible color values. For example, [\"#F00\",\"#00F\"] would define a gradient\n\t * drawing from red to blue.\n\t * @param {Array} ratios An array of gradient positions which correspond to the colors. For example, [0.1, 0.9] would draw\n\t * the first color to 10% then interpolating to the second color at 90%.\n\t * @param {Number} x0 The position of the first point defining the line that defines the gradient direction and size.\n\t * @param {Number} y0 The position of the first point defining the line that defines the gradient direction and size.\n\t * @param {Number} x1 The position of the second point defining the line that defines the gradient direction and size.\n\t * @param {Number} y1 The position of the second point defining the line that defines the gradient direction and size.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t * @protected\n\t **/\n\tp.lf = p.beginLinearGradientFill;\n\n\t/**\n\t * Shortcut to beginRadialGradientFill.\n\t * @method rf\n\t * @param {Array} colors An array of CSS compatible color values. For example, [\"#F00\",\"#00F\"] would define\n\t * a gradient drawing from red to blue.\n\t * @param {Array} ratios An array of gradient positions which correspond to the colors. For example, [0.1,\n\t * 0.9] would draw the first color to 10% then interpolating to the second color at 90%.\n\t * @param {Number} x0 Center position of the inner circle that defines the gradient.\n\t * @param {Number} y0 Center position of the inner circle that defines the gradient.\n\t * @param {Number} r0 Radius of the inner circle that defines the gradient.\n\t * @param {Number} x1 Center position of the outer circle that defines the gradient.\n\t * @param {Number} y1 Center position of the outer circle that defines the gradient.\n\t * @param {Number} r1 Radius of the outer circle that defines the gradient.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t * @protected\n\t **/\n\tp.rf = p.beginRadialGradientFill;\n\n\t/**\n\t * Shortcut to beginBitmapFill.\n\t * @method bf\n\t * @param {HTMLImageElement | HTMLCanvasElement | HTMLVideoElement} image The Image, Canvas, or Video object to use\n\t * as the pattern.\n\t * @param {String} repetition Optional. Indicates whether to repeat the image in the fill area. One of \"repeat\",\n\t * \"repeat-x\", \"repeat-y\", or \"no-repeat\". Defaults to \"repeat\". Note that Firefox does not support \"repeat-x\" or\n\t * \"repeat-y\" (latest tests were in FF 20.0), and will default to \"repeat\".\n\t * @param {Matrix2D} matrix Optional. Specifies a transformation matrix for the bitmap fill. This transformation\n\t * will be applied relative to the parent transform.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t * @protected\n\t **/\n\tp.bf = p.beginBitmapFill;\n\n\t/**\n\t * Shortcut to endFill.\n\t * @method ef\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t * @protected\n\t **/\n\tp.ef = p.endFill;\n\n\t/**\n\t * Shortcut to setStrokeStyle.\n\t * @method ss\n\t * @param {Number} thickness The width of the stroke.\n\t * @param {String | Number} [caps=0] Indicates the type of caps to use at the end of lines. One of butt,\n\t * round, or square. Defaults to \"butt\". Also accepts the values 0 (butt), 1 (round), and 2 (square) for use with\n\t * the tiny API.\n\t * @param {String | Number} [joints=0] Specifies the type of joints that should be used where two lines meet.\n\t * One of bevel, round, or miter. Defaults to \"miter\". Also accepts the values 0 (miter), 1 (round), and 2 (bevel)\n\t * for use with the tiny API.\n\t * @param {Number} [miterLimit=10] If joints is set to \"miter\", then you can specify a miter limit ratio which\n\t * controls at what point a mitered joint will be clipped.\n\t * @param {Boolean} [ignoreScale=false] If true, the stroke will be drawn at the specified thickness regardless\n\t * of active transformations.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t * @protected\n\t **/\n\tp.ss = p.setStrokeStyle;\n\t\n\t/**\n\t * Shortcut to setStrokeDash.\n\t * @method sd\n\t * @param {Array} [segments] An array specifying the dash pattern, alternating between line and gap.\n\t * For example, [20,10] would create a pattern of 20 pixel lines with 10 pixel gaps between them.\n\t * Passing null or an empty array will clear any existing dash.\n\t * @param {Number} [offset=0] The offset of the dash pattern. For example, you could increment this value to create a \"marching ants\" effect.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t * @protected\n\t **/\n\tp.sd = p.setStrokeDash;\n\n\t/**\n\t * Shortcut to beginStroke.\n\t * @method s\n\t * @param {String} color A CSS compatible color value (ex. \"#FF0000\", \"red\", or \"rgba(255,0,0,0.5)\"). Setting to\n\t * null will result in no stroke.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t * @protected\n\t **/\n\tp.s = p.beginStroke;\n\n\t/**\n\t * Shortcut to beginLinearGradientStroke.\n\t * @method ls\n\t * @param {Array} colors An array of CSS compatible color values. For example, [\"#F00\",\"#00F\"] would define\n\t * a gradient drawing from red to blue.\n\t * @param {Array} ratios An array of gradient positions which correspond to the colors. For example, [0.1,\n\t * 0.9] would draw the first color to 10% then interpolating to the second color at 90%.\n\t * @param {Number} x0 The position of the first point defining the line that defines the gradient direction and size.\n\t * @param {Number} y0 The position of the first point defining the line that defines the gradient direction and size.\n\t * @param {Number} x1 The position of the second point defining the line that defines the gradient direction and size.\n\t * @param {Number} y1 The position of the second point defining the line that defines the gradient direction and size.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t * @protected\n\t **/\n\tp.ls = p.beginLinearGradientStroke;\n\n\t/**\n\t * Shortcut to beginRadialGradientStroke.\n\t * @method rs\n\t * @param {Array} colors An array of CSS compatible color values. For example, [\"#F00\",\"#00F\"] would define\n\t * a gradient drawing from red to blue.\n\t * @param {Array} ratios An array of gradient positions which correspond to the colors. For example, [0.1,\n\t * 0.9] would draw the first color to 10% then interpolating to the second color at 90%, then draw the second color\n\t * to 100%.\n\t * @param {Number} x0 Center position of the inner circle that defines the gradient.\n\t * @param {Number} y0 Center position of the inner circle that defines the gradient.\n\t * @param {Number} r0 Radius of the inner circle that defines the gradient.\n\t * @param {Number} x1 Center position of the outer circle that defines the gradient.\n\t * @param {Number} y1 Center position of the outer circle that defines the gradient.\n\t * @param {Number} r1 Radius of the outer circle that defines the gradient.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t * @protected\n\t **/\n\tp.rs = p.beginRadialGradientStroke;\n\n\t/**\n\t * Shortcut to beginBitmapStroke.\n\t * @method bs\n\t * @param {HTMLImageElement | HTMLCanvasElement | HTMLVideoElement} image The Image, Canvas, or Video object to use\n\t * as the pattern.\n\t * @param {String} [repetition=repeat] Optional. Indicates whether to repeat the image in the fill area. One of\n\t * \"repeat\", \"repeat-x\", \"repeat-y\", or \"no-repeat\". Defaults to \"repeat\".\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t * @protected\n\t **/\n\tp.bs = p.beginBitmapStroke;\n\n\t/**\n\t * Shortcut to endStroke.\n\t * @method es\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t * @protected\n\t **/\n\tp.es = p.endStroke;\n\n\t/**\n\t * Shortcut to drawRect.\n\t * @method dr\n\t * @param {Number} x\n\t * @param {Number} y\n\t * @param {Number} w Width of the rectangle\n\t * @param {Number} h Height of the rectangle\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t * @protected\n\t **/\n\tp.dr = p.drawRect;\n\n\t/**\n\t * Shortcut to drawRoundRect.\n\t * @method rr\n\t * @param {Number} x\n\t * @param {Number} y\n\t * @param {Number} w\n\t * @param {Number} h\n\t * @param {Number} radius Corner radius.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t * @protected\n\t **/\n\tp.rr = p.drawRoundRect;\n\n\t/**\n\t * Shortcut to drawRoundRectComplex.\n\t * @method rc\n\t * @param {Number} x The horizontal coordinate to draw the round rect.\n\t * @param {Number} y The vertical coordinate to draw the round rect.\n\t * @param {Number} w The width of the round rect.\n\t * @param {Number} h The height of the round rect.\n\t * @param {Number} radiusTL Top left corner radius.\n\t * @param {Number} radiusTR Top right corner radius.\n\t * @param {Number} radiusBR Bottom right corner radius.\n\t * @param {Number} radiusBL Bottom left corner radius.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t * @protected\n\t **/\n\tp.rc = p.drawRoundRectComplex;\n\n\t/**\n\t * Shortcut to drawCircle.\n\t * @method dc\n\t * @param {Number} x x coordinate center point of circle.\n\t * @param {Number} y y coordinate center point of circle.\n\t * @param {Number} radius Radius of circle.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t * @protected\n\t **/\n\tp.dc = p.drawCircle;\n\n\t/**\n\t * Shortcut to drawEllipse.\n\t * @method de\n\t * @param {Number} x The left coordinate point of the ellipse. Note that this is different from {{#crossLink \"Graphics/drawCircle\"}}{{/crossLink}}\n\t * which draws from center.\n\t * @param {Number} y The top coordinate point of the ellipse. Note that this is different from {{#crossLink \"Graphics/drawCircle\"}}{{/crossLink}}\n\t * which draws from the center.\n\t * @param {Number} w The height (horizontal diameter) of the ellipse. The horizontal radius will be half of this\n\t * number.\n\t * @param {Number} h The width (vertical diameter) of the ellipse. The vertical radius will be half of this number.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t * @protected\n\t **/\n\tp.de = p.drawEllipse;\n\n\t/**\n\t * Shortcut to drawPolyStar.\n\t * @method dp\n\t * @param {Number} x Position of the center of the shape.\n\t * @param {Number} y Position of the center of the shape.\n\t * @param {Number} radius The outer radius of the shape.\n\t * @param {Number} sides The number of points on the star or sides on the polygon.\n\t * @param {Number} pointSize The depth or \"pointy-ness\" of the star points. A pointSize of 0 will draw a regular\n\t * polygon (no points), a pointSize of 1 will draw nothing because the points are infinitely pointy.\n\t * @param {Number} angle The angle of the first point / corner. For example a value of 0 will draw the first point\n\t * directly to the right of the center.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t * @protected\n\t **/\n\tp.dp = p.drawPolyStar;\n\n\t/**\n\t * Shortcut to decodePath.\n\t * @method p\n\t * @param {String} str The path string to decode.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t * @protected\n\t **/\n\tp.p = p.decodePath;\n\n\n// private methods:\n\t/**\n\t * @method _updateInstructions\n\t * @param commit\n\t * @protected\n\t **/\n\tp._updateInstructions = function(commit) {\n\t\tvar instr = this._instructions, active = this._activeInstructions, commitIndex = this._commitIndex;\n\n\t\tif (this._dirty && active.length) {\n\t\t\tinstr.length = commitIndex; // remove old, uncommitted commands\n\t\t\tinstr.push(Graphics.beginCmd);\n\n\t\t\tvar l = active.length, ll = instr.length;\n\t\t\tinstr.length = ll+l;\n\t\t\tfor (var i=0; i<l; i++) { instr[i+ll] = active[i]; }\n\n\t\t\tif (this._fill) { instr.push(this._fill); }\n\t\t\tif (this._stroke) {\n\t\t\t\t// doesn't need to be re-applied if it hasn't changed.\n\t\t\t\tif (this._strokeDash !== this._oldStrokeDash) {\n\t\t\t\t\tthis._oldStrokeDash = this._strokeDash;\n\t\t\t\t\tinstr.push(this._strokeDash);\n\t\t\t\t}\n\t\t\t\tif (this._strokeStyle !== this._oldStrokeStyle) {\n\t\t\t\t\tthis._oldStrokeStyle = this._strokeStyle;\n\t\t\t\t\tinstr.push(this._strokeStyle);\n\t\t\t\t}\n\t\t\t\tinstr.push(this._stroke);\n\t\t\t}\n\n\t\t\tthis._dirty = false;\n\t\t}\n\n\t\tif (commit) {\n\t\t\tactive.length = 0;\n\t\t\tthis._commitIndex = instr.length;\n\t\t}\n\t};\n\n\t/**\n\t * @method _setFill\n\t * @param fill\n\t * @protected\n\t **/\n\tp._setFill = function(fill) {\n\t\tthis._updateInstructions(true);\n\t\tthis.command = this._fill = fill;\n\t\treturn this;\n\t};\n\n\t/**\n\t * @method _setStroke\n\t * @param stroke\n\t * @protected\n\t **/\n\tp._setStroke = function(stroke) {\n\t\tthis._updateInstructions(true);\n\t\tif (this.command = this._stroke = stroke) {\n\t\t\tstroke.ignoreScale = this._strokeIgnoreScale;\n\t\t}\n\t\treturn this;\n\t};\n\n// Command Objects:\n\t/**\n\t * @namespace Graphics\n\t */\n\t/**\n\t * Graphics command object. See {{#crossLink \"Graphics/lineTo\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information. See {{#crossLink \"Graphics\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\n\t * @class LineTo\n\t * @constructor\n\t * @param {Number} x\n\t * @param {Number} y\n\t **/\n\t/**\n\t * @property x\n\t * @type Number\n\t */\n\t/**\n\t * @property y\n\t * @type Number\n\t */\n\t/**\n\t * Execute the Graphics command in the provided Canvas context.\n\t * @method exec\n\t * @param {CanvasRenderingContext2D} ctx The canvas rendering context\n\t */\n\t(G.LineTo = function(x, y) {\n\t\tthis.x = x; this.y = y;\n\t}).prototype.exec = function(ctx) { ctx.lineTo(this.x,this.y); };\n\n\t/**\n\t * Graphics command object. See {{#crossLink \"Graphics/moveTo\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\n\t * @class MoveTo\n\t * @constructor\n\t * @param {Number} x\n\t * @param {Number} y\n\t **/\n\t/**\n\t * @property x\n\t * @type Number\n\t */\n\t/**\n\t * @property y\n\t * @type Number\n\t */\n\t/**\n\t * @method exec\n\t * @param {CanvasRenderingContext2D} ctx\n\t */\n\t(G.MoveTo = function(x, y) {\n\t\tthis.x = x; this.y = y;\n\t}).prototype.exec = function(ctx) { ctx.moveTo(this.x, this.y); };\n\n\n\t/**\n\t * Graphics command object. See {{#crossLink \"Graphics/arcTo\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\n\t * @class ArcTo\n\t * @constructor\n\t * @param {Number} x1\n\t * @param {Number} y1\n\t * @param {Number} x2\n\t * @param {Number} y2\n\t * @param {Number} radius\n\t **/\n\t/**\n\t * @property x1\n\t * @type Number\n\t */\n\t/**\n\t * @property y1\n\t * @type Number\n\t */\n\t/**\n\t * @property x2\n\t * @type Number\n\t */\n\t/**\n\t * @property y2\n\t * @type Number\n\t */\n\t/**\n\t * @property radius\n\t * @type Number\n\t */\n\t/**\n\t * Execute the Graphics command in the provided Canvas context.\n\t * @method exec\n\t * @param {CanvasRenderingContext2D} ctx The canvas rendering context\n\t */\n\t(G.ArcTo = function(x1, y1, x2, y2, radius) {\n\t\tthis.x1 = x1; this.y1 = y1;\n\t\tthis.x2 = x2; this.y2 = y2;\n\t\tthis.radius = radius;\n\t}).prototype.exec = function(ctx) { ctx.arcTo(this.x1, this.y1, this.x2, this.y2, this.radius); };\n\n\t/**\n\t * Graphics command object. See {{#crossLink \"Graphics/arc\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\n\t * @class Arc\n\t * @constructor\n\t * @param {Number} x\n\t * @param {Number} y\n\t * @param {Number} radius\n\t * @param {Number} startAngle\n\t * @param {Number} endAngle\n\t * @param {Number} anticlockwise\n\t **/\n\t/**\n\t * @property x\n\t * @type Number\n\t */\n\t/**\n\t * @property y\n\t * @type Number\n\t */\n\t/**\n\t * @property radius\n\t * @type Number\n\t */\n\t/**\n\t * @property startAngle\n\t * @type Number\n\t */\n\t/**\n\t * @property endAngle\n\t * @type Number\n\t */\n\t/**\n\t * @property anticlockwise\n\t * @type Number\n\t */\n\t/**\n\t * Execute the Graphics command in the provided Canvas context.\n\t * @method exec\n\t * @param {CanvasRenderingContext2D} ctx The canvas rendering context\n\t */\n\t(G.Arc = function(x, y, radius, startAngle, endAngle, anticlockwise) {\n\t\tthis.x = x; this.y = y;\n\t\tthis.radius = radius;\n\t\tthis.startAngle = startAngle; this.endAngle = endAngle;\n\t\tthis.anticlockwise = !!anticlockwise;\n\t}).prototype.exec = function(ctx) { ctx.arc(this.x, this.y, this.radius, this.startAngle, this.endAngle, this.anticlockwise); };\n\n\t/**\n\t * Graphics command object. See {{#crossLink \"Graphics/quadraticCurveTo\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\n\t * @class QuadraticCurveTo\n\t * @constructor\n\t * @param {Number} cpx\n\t * @param {Number} cpy\n\t * @param {Number} x\n\t * @param {Number} y\n\t **/\n\t/**\n\t * @property cpx\n\t * @type Number\n\t */\n\t/**\n\t * @property cpy\n\t * @type Number\n\t */\n\t/**\n\t * @property x\n\t * @type Number\n\t */\n\t/**\n\t * @property y\n\t * @type Number\n\t */\n\t/**\n\t * Execute the Graphics command in the provided Canvas context.\n\t * @method exec\n\t * @param {CanvasRenderingContext2D} ctx The canvas rendering context\n\t */\n\t(G.QuadraticCurveTo = function(cpx, cpy, x, y) {\n\t\tthis.cpx = cpx; this.cpy = cpy;\n\t\tthis.x = x; this.y = y;\n\t}).prototype.exec = function(ctx) { ctx.quadraticCurveTo(this.cpx, this.cpy, this.x, this.y); };\n\n\t/**\n\t * Graphics command object. See {{#crossLink \"Graphics/bezierCurveTo\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\n\t * @class BezierCurveTo\n\t * @constructor\n\t * @param {Number} cp1x\n\t * @param {Number} cp1y\n\t * @param {Number} cp2x\n\t * @param {Number} cp2y\n\t * @param {Number} x\n\t * @param {Number} y\n\t **/\n\t/**\n\t * @property cp1x\n\t * @type Number\n\t */\n\t/**\n\t * @property cp1y\n\t * @type Number\n\t */\n\t/**\n\t * @property cp2x\n\t * @type Number\n\t */\n\t/**\n\t * @property cp2y\n\t * @type Number\n\t */\n\t/**\n\t * @property x\n\t * @type Number\n\t */\n\t/**\n\t * @property y\n\t * @type Number\n\t */\n\t/**\n\t * Execute the Graphics command in the provided Canvas context.\n\t * @method exec\n\t * @param {CanvasRenderingContext2D} ctx The canvas rendering context\n\t */\n\t(G.BezierCurveTo = function(cp1x, cp1y, cp2x, cp2y, x, y) {\n\t\tthis.cp1x = cp1x; this.cp1y = cp1y;\n\t\tthis.cp2x = cp2x; this.cp2y = cp2y;\n\t\tthis.x = x; this.y = y;\n\t}).prototype.exec = function(ctx) { ctx.bezierCurveTo(this.cp1x, this.cp1y, this.cp2x, this.cp2y, this.x, this.y); };\n\n\t/**\n\t * Graphics command object. See {{#crossLink \"Graphics/rect\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\n\t * @class Rect\n\t * @constructor\n\t * @param {Number} x\n\t * @param {Number} y\n\t * @param {Number} w\n\t * @param {Number} h\n\t **/\n\t/**\n\t * @property x\n\t * @type Number\n\t */\n\t/**\n\t * @property y\n\t * @type Number\n\t */\n\t/**\n\t * @property w\n\t * @type Number\n\t */\n\t/**\n\t * @property h\n\t * @type Number\n\t */\n\t/**\n\t * Execute the Graphics command in the provided Canvas context.\n\t * @method exec\n\t * @param {CanvasRenderingContext2D} ctx The canvas rendering context\n\t */\n\t(G.Rect = function(x, y, w, h) {\n\t\tthis.x = x; this.y = y;\n\t\tthis.w = w; this.h = h;\n\t}).prototype.exec = function(ctx) { ctx.rect(this.x, this.y, this.w, this.h); };\n\n\t/**\n\t * Graphics command object. See {{#crossLink \"Graphics/closePath\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\n\t * @class ClosePath\n\t * @constructor\n\t **/\n\t/**\n\t * Execute the Graphics command in the provided Canvas context.\n\t * @method exec\n\t * @param {CanvasRenderingContext2D} ctx The canvas rendering context\n\t */\n\t(G.ClosePath = function() {\n\t}).prototype.exec = function(ctx) { ctx.closePath(); };\n\n\t/**\n\t * Graphics command object to begin a new path. See {{#crossLink \"Graphics\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\n\t * @class BeginPath\n\t * @constructor\n\t **/\n\t/**\n\t * Execute the Graphics command in the provided Canvas context.\n\t * @method exec\n\t * @param {CanvasRenderingContext2D} ctx The canvas rendering context\n\t */\n\t(G.BeginPath = function() {\n\t}).prototype.exec = function(ctx) { ctx.beginPath(); };\n\n\t/**\n\t * Graphics command object. See {{#crossLink \"Graphics/beginFill\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\n\t * @class Fill\n\t * @constructor\n\t * @param {Object} style A valid Context2D fillStyle.\n\t * @param {Matrix2D} matrix\n\t **/\n\t/**\n\t * A valid Context2D fillStyle.\n\t * @property style\n\t * @type Object\n\t */\n\t/**\n\t * @property matrix\n\t * @type Matrix2D\n\t */\n\t/**\n\t * Execute the Graphics command in the provided Canvas context.\n\t * @method exec\n\t * @param {CanvasRenderingContext2D} ctx The canvas rendering context\n\t */\n\tp = (G.Fill = function(style, matrix) {\n\t\tthis.style = style;\n\t\tthis.matrix = matrix;\n\t}).prototype;\n\tp.exec = function(ctx) {\n\t\tif (!this.style) { return; }\n\t\tctx.fillStyle = this.style;\n\t\tvar mtx = this.matrix;\n\t\tif (mtx) { ctx.save(); ctx.transform(mtx.a, mtx.b, mtx.c, mtx.d, mtx.tx, mtx.ty); }\n\t\tctx.fill();\n\t\tif (mtx) { ctx.restore(); }\n\t};\n\t/**\n\t * Creates a linear gradient style and assigns it to {{#crossLink \"Fill/style:property\"}}{{/crossLink}}.\n\t * See {{#crossLink \"Graphics/beginLinearGradientFill\"}}{{/crossLink}} for more information.\n\t * @method linearGradient\n\t * @param {Array} colors\n\t *\n\t * @param {Array} ratios\n\t * @param {Number} x0\n\t * @param {Number} y0\n\t * @param {Number} x1\n\t * @param {Number} y1\n\t * @return {Fill} Returns this Fill object for chaining or assignment.\n\t */\n\tp.linearGradient = function(colors, ratios, x0, y0, x1, y1) {\n\t\tvar o = this.style =  Graphics._ctx.createLinearGradient(x0, y0, x1, y1);\n\t\tfor (var i=0, l=colors.length; i<l; i++) { o.addColorStop(ratios[i], colors[i]); }\n\t\to.props = {colors:colors, ratios:ratios, x0:x0, y0:y0, x1:x1, y1:y1, type:\"linear\"};\n\t\treturn this;\n\t};\n\t/**\n\t * Creates a radial gradient style and assigns it to {{#crossLink \"Fill/style:property\"}}{{/crossLink}}.\n\t * See {{#crossLink \"Graphics/beginRadialGradientFill\"}}{{/crossLink}} for more information.\n\t * @method radialGradient\n\t * @param {Array} colors\n\t * @param {Array} ratios\n\t * @param {Number} x0\n\t * @param {Number} y0\n\t * @param {Number} r0\n\t * @param {Number} x1\n\t * @param {Number} y1\n\t * @param {Number} r1\n\t * @return {Fill} Returns this Fill object for chaining or assignment.\n\t */\n\tp.radialGradient = function(colors, ratios, x0, y0, r0, x1, y1, r1) {\n\t\tvar o = this.style =  Graphics._ctx.createRadialGradient(x0, y0, r0, x1, y1, r1);\n\t\tfor (var i=0, l=colors.length; i<l; i++) { o.addColorStop(ratios[i], colors[i]); }\n\t\to.props = {colors:colors, ratios:ratios, x0:x0, y0:y0, r0:r0, x1:x1, y1:y1, r1:r1, type:\"radial\"};\n\t\treturn this;\n\t};\n\t/**\n\t * Creates a bitmap fill style and assigns it to the {{#crossLink \"Fill/style:property\"}}{{/crossLink}}.\n\t * See {{#crossLink \"Graphics/beginBitmapFill\"}}{{/crossLink}} for more information.\n\t * @method bitmap\n\t * @param {HTMLImageElement | HTMLCanvasElement | HTMLVideoElement} image  Must be loaded prior to creating a bitmap fill, or the fill will be empty.\n\t * @param {String} [repetition] One of: repeat, repeat-x, repeat-y, or no-repeat.\n\t * @return {Fill} Returns this Fill object for chaining or assignment.\n\t */\n\tp.bitmap = function(image, repetition) {\n\t\tif (image.naturalWidth || image.getContext || image.readyState >= 2) {\n\t\t\tvar o = this.style = Graphics._ctx.createPattern(image, repetition || \"\");\n\t\t\to.props = {image: image, repetition: repetition, type: \"bitmap\"};\n\t\t}\n\t\treturn this;\n\t};\n\tp.path = false;\n\n\t/**\n\t * Graphics command object. See {{#crossLink \"Graphics/beginStroke\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\n\t * @class Stroke\n\t * @constructor\n\t * @param {Object} style A valid Context2D fillStyle.\n\t * @param {Boolean} ignoreScale\n\t **/\n\t/**\n\t * A valid Context2D strokeStyle.\n\t * @property style\n\t * @type Object\n\t */\n\t/**\n\t * @property ignoreScale\n\t * @type Boolean\n\t */\n\t/**\n\t * Execute the Graphics command in the provided Canvas context.\n\t * @method exec\n\t * @param {CanvasRenderingContext2D} ctx The canvas rendering context\n\t */\n\tp = (G.Stroke = function(style, ignoreScale) {\n\t\tthis.style = style;\n\t\tthis.ignoreScale = ignoreScale;\n\t}).prototype;\n\tp.exec = function(ctx) {\n\t\tif (!this.style) { return; }\n\t\tctx.strokeStyle = this.style;\n\t\tif (this.ignoreScale) { ctx.save(); ctx.setTransform(1,0,0,1,0,0); }\n\t\tctx.stroke();\n\t\tif (this.ignoreScale) { ctx.restore(); }\n\t};\n\t/**\n\t * Creates a linear gradient style and assigns it to {{#crossLink \"Stroke/style:property\"}}{{/crossLink}}.\n\t * See {{#crossLink \"Graphics/beginLinearGradientStroke\"}}{{/crossLink}} for more information.\n\t * @method linearGradient\n\t * @param {Array} colors\n\t * @param {Array} ratios\n\t * @param {Number} x0\n\t * @param {Number} y0\n\t * @param {Number} x1\n\t * @param {Number} y1\n\t * @return {Fill} Returns this Stroke object for chaining or assignment.\n\t */\n\tp.linearGradient = G.Fill.prototype.linearGradient;\n\t/**\n\t * Creates a radial gradient style and assigns it to {{#crossLink \"Stroke/style:property\"}}{{/crossLink}}.\n\t * See {{#crossLink \"Graphics/beginRadialGradientStroke\"}}{{/crossLink}} for more information.\n\t * @method radialGradient\n\t * @param {Array} colors\n\t * @param {Array} ratios\n\t * @param {Number} x0\n\t * @param {Number} y0\n\t * @param {Number} r0\n\t * @param {Number} x1\n\t * @param {Number} y1\n\t * @param {Number} r1\n\t * @return {Fill} Returns this Stroke object for chaining or assignment.\n\t */\n\tp.radialGradient = G.Fill.prototype.radialGradient;\n\t/**\n\t * Creates a bitmap fill style and assigns it to {{#crossLink \"Stroke/style:property\"}}{{/crossLink}}.\n\t * See {{#crossLink \"Graphics/beginBitmapStroke\"}}{{/crossLink}} for more information.\n\t * @method bitmap\n\t * @param {HTMLImageElement} image\n\t * @param {String} [repetition] One of: repeat, repeat-x, repeat-y, or no-repeat.\n\t * @return {Fill} Returns this Stroke object for chaining or assignment.\n\t */\n\tp.bitmap = G.Fill.prototype.bitmap;\n\tp.path = false;\n\n\t/**\n\t * Graphics command object. See {{#crossLink \"Graphics/setStrokeStyle\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\n\t * @class StrokeStyle\n\t * @constructor\n\t * @param {Number} width\n\t * @param {String} [caps=butt]\n\t * @param {String} [joints=miter]\n\t * @param {Number} [miterLimit=10]\n\t * @param {Boolean} [ignoreScale=false]\n\t **/\n\t/**\n\t * @property width\n\t * @type Number\n\t */\n\t/**\n\t * One of: butt, round, square\n\t * @property caps\n\t * @type String\n\t */\n\t/**\n\t * One of: round, bevel, miter\n\t * @property joints\n\t * @type String\n\t */\n\t/**\n\t * @property miterLimit\n\t * @type Number\n\t */\n\t/**\n\t * Execute the Graphics command in the provided Canvas context.\n\t * @method exec\n\t * @param {CanvasRenderingContext2D} ctx The canvas rendering context\n\t */\n\tp = (G.StrokeStyle = function(width, caps, joints, miterLimit, ignoreScale) {\n\t\tthis.width = width;\n\t\tthis.caps = caps;\n\t\tthis.joints = joints;\n\t\tthis.miterLimit = miterLimit;\n\t\tthis.ignoreScale = ignoreScale;\n\t}).prototype;\n\tp.exec = function(ctx) {\n\t\tctx.lineWidth = (this.width == null ? \"1\" : this.width);\n\t\tctx.lineCap = (this.caps == null ? \"butt\" : (isNaN(this.caps) ? this.caps : Graphics.STROKE_CAPS_MAP[this.caps]));\n\t\tctx.lineJoin = (this.joints == null ? \"miter\" : (isNaN(this.joints) ? this.joints : Graphics.STROKE_JOINTS_MAP[this.joints]));\n\t\tctx.miterLimit = (this.miterLimit == null ? \"10\" : this.miterLimit);\n\t\tctx.ignoreScale = (this.ignoreScale == null ? false : this.ignoreScale);\n\t};\n\tp.path = false;\n\t\n\t/**\n\t * Graphics command object. See {{#crossLink \"Graphics/setStrokeDash\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\n\t * @class StrokeDash\n\t * @constructor\n\t * @param {Array} [segments]\n\t * @param {Number} [offset=0]\n\t **/\n\t/**\n\t * @property segments\n\t * @type Array\n\t */\n\t/**\n\t * @property offset\n\t * @type Number\n\t */\n\t/**\n\t * Execute the Graphics command in the provided Canvas context.\n\t * @method exec\n\t * @param {CanvasRenderingContext2D} ctx The canvas rendering context\n\t */\n\t(G.StrokeDash = function(segments, offset) {\n\t\tthis.segments = segments;\n\t\tthis.offset = offset||0;\n\t}).prototype.exec = function(ctx) {\n\t\tif (ctx.setLineDash) { // feature detection.\n\t\t\tctx.setLineDash(this.segments|| G.StrokeDash.EMPTY_SEGMENTS); // instead of [] to reduce churn.\n\t\t\tctx.lineDashOffset = this.offset||0;\n\t\t}\n\t};\n\t/**\n\t * The default value for segments (ie. no dash).\n\t * @property EMPTY_SEGMENTS\n\t * @static\n\t * @final\n\t * @readonly\n\t * @protected\n\t * @type {Array}\n\t **/\n\tG.StrokeDash.EMPTY_SEGMENTS = [];\n\n\t/**\n\t * Graphics command object. See {{#crossLink \"Graphics/drawRoundRectComplex\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\n\t * @class RoundRect\n\t * @constructor\n\t * @param {Number} x\n\t * @param {Number} y\n\t * @param {Number} w\n\t * @param {Number} h\n\t * @param {Number} radiusTL\n\t * @param {Number} radiusTR\n\t * @param {Number} radiusBR\n\t * @param {Number} radiusBL\n\t **/\n\t/**\n\t * @property x\n\t * @type Number\n\t */\n\t/**\n\t * @property y\n\t * @type Number\n\t */\n\t/**\n\t * @property w\n\t * @type Number\n\t */\n\t/**\n\t * @property h\n\t * @type Number\n\t */\n\t/**\n\t * @property radiusTL\n\t * @type Number\n\t */\n\t/**\n\t * @property radiusTR\n\t * @type Number\n\t */\n\t/**\n\t * @property radiusBR\n\t * @type Number\n\t */\n\t/**\n\t * @property radiusBL\n\t * @type Number\n\t */\n\t/**\n\t * Execute the Graphics command in the provided Canvas context.\n\t * @method exec\n\t * @param {CanvasRenderingContext2D} ctx The canvas rendering context\n\t */\n\t(G.RoundRect = function(x, y, w, h, radiusTL, radiusTR, radiusBR, radiusBL) {\n\t\tthis.x = x; this.y = y;\n\t\tthis.w = w; this.h = h;\n\t\tthis.radiusTL = radiusTL; this.radiusTR = radiusTR;\n\t\tthis.radiusBR = radiusBR; this.radiusBL = radiusBL;\n\t}).prototype.exec = function(ctx) {\n\t\tvar max = (w<h?w:h)/2;\n\t\tvar mTL=0, mTR=0, mBR=0, mBL=0;\n\t\tvar x = this.x, y = this.y, w = this.w, h = this.h;\n\t\tvar rTL = this.radiusTL, rTR = this.radiusTR, rBR = this.radiusBR, rBL = this.radiusBL;\n\n\t\tif (rTL < 0) { rTL *= (mTL=-1); }\n\t\tif (rTL > max) { rTL = max; }\n\t\tif (rTR < 0) { rTR *= (mTR=-1); }\n\t\tif (rTR > max) { rTR = max; }\n\t\tif (rBR < 0) { rBR *= (mBR=-1); }\n\t\tif (rBR > max) { rBR = max; }\n\t\tif (rBL < 0) { rBL *= (mBL=-1); }\n\t\tif (rBL > max) { rBL = max; }\n\n\t\tctx.moveTo(x+w-rTR, y);\n\t\tctx.arcTo(x+w+rTR*mTR, y-rTR*mTR, x+w, y+rTR, rTR);\n\t\tctx.lineTo(x+w, y+h-rBR);\n\t\tctx.arcTo(x+w+rBR*mBR, y+h+rBR*mBR, x+w-rBR, y+h, rBR);\n\t\tctx.lineTo(x+rBL, y+h);\n\t\tctx.arcTo(x-rBL*mBL, y+h+rBL*mBL, x, y+h-rBL, rBL);\n\t\tctx.lineTo(x, y+rTL);\n\t\tctx.arcTo(x-rTL*mTL, y-rTL*mTL, x+rTL, y, rTL);\n\t\tctx.closePath();\n\t};\n\n\t/**\n\t * Graphics command object. See {{#crossLink \"Graphics/drawCircle\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\n\t * @class Circle\n\t * @constructor\n\t * @param {Number} x\n\t * @param {Number} y\n\t * @param {Number} radius\n\t **/\n\t/**\n\t * @property x\n\t * @type Number\n\t */\n\t/**\n\t * @property y\n\t * @type Number\n\t */\n\t/**\n\t * @property radius\n\t * @type Number\n\t */\n\t/**\n\t * Execute the Graphics command in the provided Canvas context.\n\t * @method exec\n\t * @param {CanvasRenderingContext2D} ctx The canvas rendering context\n\t */\n\t(G.Circle = function(x, y, radius) {\n\t\tthis.x = x; this.y = y;\n\t\tthis.radius = radius;\n\t}).prototype.exec = function(ctx) { ctx.arc(this.x, this.y, this.radius, 0, Math.PI*2); };\n\n\t/**\n\t * Graphics command object. See {{#crossLink \"Graphics/drawEllipse\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\n\t * @class Ellipse\n\t * @constructor\n\t * @param {Number} x\n\t * @param {Number} y\n\t * @param {Number} w\n\t * @param {Number} h\n\t **/\n\t/**\n\t * @property x\n\t * @type Number\n\t */\n\t/**\n\t * @property y\n\t * @type Number\n\t */\n\t/**\n\t * @property w\n\t * @type Number\n\t */\n\t/**\n\t * @property h\n\t * @type Number\n\t */\n\t/**\n\t * Execute the Graphics command in the provided Canvas context.\n\t * @method exec\n\t * @param {CanvasRenderingContext2D} ctx The canvas rendering context\n\t */\n\t(G.Ellipse = function(x, y, w, h) {\n\t\tthis.x = x; this.y = y;\n\t\tthis.w = w; this.h = h;\n\t}).prototype.exec = function(ctx) {\n\t\tvar x = this.x, y = this.y;\n\t\tvar w = this.w, h = this.h;\n\n\t\tvar k = 0.5522848;\n\t\tvar ox = (w / 2) * k;\n\t\tvar oy = (h / 2) * k;\n\t\tvar xe = x + w;\n\t\tvar ye = y + h;\n\t\tvar xm = x + w / 2;\n\t\tvar ym = y + h / 2;\n\n\t\tctx.moveTo(x, ym);\n\t\tctx.bezierCurveTo(x, ym-oy, xm-ox, y, xm, y);\n\t\tctx.bezierCurveTo(xm+ox, y, xe, ym-oy, xe, ym);\n\t\tctx.bezierCurveTo(xe, ym+oy, xm+ox, ye, xm, ye);\n\t\tctx.bezierCurveTo(xm-ox, ye, x, ym+oy, x, ym);\n\t};\n\n\t/**\n\t * Graphics command object. See {{#crossLink \"Graphics/drawPolyStar\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\n\t * @class PolyStar\n\t * @constructor\n\t * @param {Number} x\n\t * @param {Number} y\n\t * @param {Number} radius\n\t * @param {Number} sides\n\t * @param {Number} pointSize\n\t * @param {Number} angle\n\t **/\n\t/**\n\t * @property x\n\t * @type Number\n\t */\n\t/**\n\t * @property y\n\t * @type Number\n\t */\n\t/**\n\t * @property radius\n\t * @type Number\n\t */\n\t/**\n\t * @property sides\n\t * @type Number\n\t */\n\t/**\n\t * @property pointSize\n\t * @type Number\n\t */\n\t/**\n\t * @property angle\n\t * @type Number\n\t */\n\t/**\n\t * Execute the Graphics command in the provided Canvas context.\n\t * @method exec\n\t * @param {CanvasRenderingContext2D} ctx The canvas rendering context\n\t */\n\t(G.PolyStar = function(x, y, radius, sides, pointSize, angle) {\n\t\tthis.x = x; this.y = y;\n\t\tthis.radius = radius;\n\t\tthis.sides = sides;\n\t\tthis.pointSize = pointSize;\n\t\tthis.angle = angle;\n\t}).prototype.exec = function(ctx) {\n\t\tvar x = this.x, y = this.y;\n\t\tvar radius = this.radius;\n\t\tvar angle = (this.angle||0)/180*Math.PI;\n\t\tvar sides = this.sides;\n\t\tvar ps = 1-(this.pointSize||0);\n\t\tvar a = Math.PI/sides;\n\n\t\tctx.moveTo(x+Math.cos(angle)*radius, y+Math.sin(angle)*radius);\n\t\tfor (var i=0; i<sides; i++) {\n\t\t\tangle += a;\n\t\t\tif (ps != 1) {\n\t\t\t\tctx.lineTo(x+Math.cos(angle)*radius*ps, y+Math.sin(angle)*radius*ps);\n\t\t\t}\n\t\t\tangle += a;\n\t\t\tctx.lineTo(x+Math.cos(angle)*radius, y+Math.sin(angle)*radius);\n\t\t}\n\t\tctx.closePath();\n\t};\n\n\t// docced above.\n\tGraphics.beginCmd = new G.BeginPath(); // so we don't have to instantiate multiple instances.\n\n\n\tcreatejs.Graphics = Graphics;\n}());\n\n//##############################################################################\n// DisplayObject.js\n//##############################################################################\n\n(function() {\n\t\"use strict\";\n\n\n// constructor:\n\t/**\n\t * DisplayObject is an abstract class that should not be constructed directly. Instead construct subclasses such as\n\t * {{#crossLink \"Container\"}}{{/crossLink}}, {{#crossLink \"Bitmap\"}}{{/crossLink}}, and {{#crossLink \"Shape\"}}{{/crossLink}}.\n\t * DisplayObject is the base class for all display classes in the EaselJS library. It defines the core properties and\n\t * methods that are shared between all display objects, such as transformation properties (x, y, scaleX, scaleY, etc),\n\t * caching, and mouse handlers.\n\t * @class DisplayObject\n\t * @extends EventDispatcher\n\t * @constructor\n\t **/\n\tfunction DisplayObject() {\n\t\tthis.EventDispatcher_constructor();\n\t\t\n\t\t\n\t// public properties:\n\t\t/**\n\t\t * The alpha (transparency) for this display object. 0 is fully transparent, 1 is fully opaque.\n\t\t * @property alpha\n\t\t * @type {Number}\n\t\t * @default 1\n\t\t **/\n\t\tthis.alpha = 1;\n\t\n\t\t/**\n\t\t * If a cache is active, this returns the canvas that holds the cached version of this display object. See {{#crossLink \"cache\"}}{{/crossLink}}\n\t\t * for more information.\n\t\t * @property cacheCanvas\n\t\t * @type {HTMLCanvasElement | Object}\n\t\t * @default null\n\t\t * @readonly\n\t\t **/\n\t\tthis.cacheCanvas = null;\n\t\n\t\t/**\n\t\t * Returns an ID number that uniquely identifies the current cache for this display object. This can be used to\n\t\t * determine if the cache has changed since a previous check.\n\t\t * @property cacheID\n\t\t * @type {Number}\n\t\t * @default 0\n\t\t */\n\t\tthis.cacheID = 0;\n\t\n\t\t/**\n\t\t * Unique ID for this display object. Makes display objects easier for some uses.\n\t\t * @property id\n\t\t * @type {Number}\n\t\t * @default -1\n\t\t **/\n\t\tthis.id = createjs.UID.get();\n\t\n\t\t/**\n\t\t * Indicates whether to include this object when running mouse interactions. Setting this to `false` for children\n\t\t * of a {{#crossLink \"Container\"}}{{/crossLink}} will cause events on the Container to not fire when that child is\n\t\t * clicked. Setting this property to `false` does not prevent the {{#crossLink \"Container/getObjectsUnderPoint\"}}{{/crossLink}}\n\t\t * method from returning the child.\n\t\t *\n\t\t * <strong>Note:</strong> In EaselJS 0.7.0, the mouseEnabled property will not work properly with nested Containers. Please\n\t\t * check out the latest NEXT version in <a href=\"https://github.com/CreateJS/EaselJS/tree/master/lib\">GitHub</a> for an updated version with this issue resolved. The fix will be\n\t\t * provided in the next release of EaselJS.\n\t\t * @property mouseEnabled\n\t\t * @type {Boolean}\n\t\t * @default true\n\t\t **/\n\t\tthis.mouseEnabled = true;\n\t\t\n\t\t/**\n\t\t * If false, the tick will not run on this display object (or its children). This can provide some performance benefits.\n\t\t * In addition to preventing the \"tick\" event from being dispatched, it will also prevent tick related updates\n\t\t * on some display objects (ex. Sprite & MovieClip frame advancing, DOMElement visibility handling).\n\t\t * @property tickEnabled\n\t\t * @type Boolean\n\t\t * @default true\n\t\t **/\n\t\tthis.tickEnabled = true;\n\t\n\t\t/**\n\t\t * An optional name for this display object. Included in {{#crossLink \"DisplayObject/toString\"}}{{/crossLink}} . Useful for\n\t\t * debugging.\n\t\t * @property name\n\t\t * @type {String}\n\t\t * @default null\n\t\t **/\n\t\tthis.name = null;\n\t\n\t\t/**\n\t\t * A reference to the {{#crossLink \"Container\"}}{{/crossLink}} or {{#crossLink \"Stage\"}}{{/crossLink}} object that\n\t\t * contains this display object, or null if it has not been added\n\t\t * to one.\n\t\t * @property parent\n\t\t * @final\n\t\t * @type {Container}\n\t\t * @default null\n\t\t * @readonly\n\t\t **/\n\t\tthis.parent = null;\n\t\n\t\t/**\n\t\t * The left offset for this display object's registration point. For example, to make a 100x100px Bitmap rotate\n\t\t * around its center, you would set regX and {{#crossLink \"DisplayObject/regY:property\"}}{{/crossLink}} to 50.\n\t\t * @property regX\n\t\t * @type {Number}\n\t\t * @default 0\n\t\t **/\n\t\tthis.regX = 0;\n\t\n\t\t/**\n\t\t * The y offset for this display object's registration point. For example, to make a 100x100px Bitmap rotate around\n\t\t * its center, you would set {{#crossLink \"DisplayObject/regX:property\"}}{{/crossLink}} and regY to 50.\n\t\t * @property regY\n\t\t * @type {Number}\n\t\t * @default 0\n\t\t **/\n\t\tthis.regY = 0;\n\t\n\t\t/**\n\t\t * The rotation in degrees for this display object.\n\t\t * @property rotation\n\t\t * @type {Number}\n\t\t * @default 0\n\t\t **/\n\t\tthis.rotation = 0;\n\t\n\t\t/**\n\t\t * The factor to stretch this display object horizontally. For example, setting scaleX to 2 will stretch the display\n\t\t * object to twice its nominal width. To horizontally flip an object, set the scale to a negative number.\n\t\t * @property scaleX\n\t\t * @type {Number}\n\t\t * @default 1\n\t\t **/\n\t\tthis.scaleX = 1;\n\t\n\t\t/**\n\t\t * The factor to stretch this display object vertically. For example, setting scaleY to 0.5 will stretch the display\n\t\t * object to half its nominal height. To vertically flip an object, set the scale to a negative number.\n\t\t * @property scaleY\n\t\t * @type {Number}\n\t\t * @default 1\n\t\t **/\n\t\tthis.scaleY = 1;\n\t\n\t\t/**\n\t\t * The factor to skew this display object horizontally.\n\t\t * @property skewX\n\t\t * @type {Number}\n\t\t * @default 0\n\t\t **/\n\t\tthis.skewX = 0;\n\t\n\t\t/**\n\t\t * The factor to skew this display object vertically.\n\t\t * @property skewY\n\t\t * @type {Number}\n\t\t * @default 0\n\t\t **/\n\t\tthis.skewY = 0;\n\t\n\t\t/**\n\t\t * A shadow object that defines the shadow to render on this display object. Set to `null` to remove a shadow. If\n\t\t * null, this property is inherited from the parent container.\n\t\t * @property shadow\n\t\t * @type {Shadow}\n\t\t * @default null\n\t\t **/\n\t\tthis.shadow = null;\n\t\n\t\t/**\n\t\t * Indicates whether this display object should be rendered to the canvas and included when running the Stage\n\t\t * {{#crossLink \"Stage/getObjectsUnderPoint\"}}{{/crossLink}} method.\n\t\t * @property visible\n\t\t * @type {Boolean}\n\t\t * @default true\n\t\t **/\n\t\tthis.visible = true;\n\t\n\t\t/**\n\t\t * The x (horizontal) position of the display object, relative to its parent.\n\t\t * @property x\n\t\t * @type {Number}\n\t\t * @default 0\n\t\t **/\n\t\tthis.x = 0;\n\t\n\t\t/** The y (vertical) position of the display object, relative to its parent.\n\t\t * @property y\n\t\t * @type {Number}\n\t\t * @default 0\n\t\t **/\n\t\tthis.y = 0;\n\t\t\n\t\t/**\n\t\t * If set, defines the transformation for this display object, overriding all other transformation properties\n\t\t * (x, y, rotation, scale, skew).\n\t\t * @property transformMatrix\n\t\t * @type {Matrix2D}\n\t\t * @default null\n\t\t **/\n\t\tthis.transformMatrix = null;\n\t\t\n\t\t/**\n\t\t * The composite operation indicates how the pixels of this display object will be composited with the elements\n\t\t * behind it. If `null`, this property is inherited from the parent container. For more information, read the\n\t\t * <a href=\"http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#compositing\">\n\t\t * whatwg spec on compositing</a>.\n\t\t * @property compositeOperation\n\t\t * @type {String}\n\t\t * @default null\n\t\t **/\n\t\tthis.compositeOperation = null;\n\t\n\t\t/**\n\t\t * Indicates whether the display object should be drawn to a whole pixel when\n\t\t * {{#crossLink \"Stage/snapToPixelEnabled\"}}{{/crossLink}} is true. To enable/disable snapping on whole\n\t\t * categories of display objects, set this value on the prototype (Ex. Text.prototype.snapToPixel = true).\n\t\t * @property snapToPixel\n\t\t * @type {Boolean}\n\t\t * @default true\n\t\t **/\n\t\tthis.snapToPixel = true;\n\t\n\t\t/**\n\t\t * An array of Filter objects to apply to this display object. Filters are only applied / updated when {{#crossLink \"cache\"}}{{/crossLink}}\n\t\t * or {{#crossLink \"updateCache\"}}{{/crossLink}} is called on the display object, and only apply to the area that is\n\t\t * cached.\n\t\t * @property filters\n\t\t * @type {Array}\n\t\t * @default null\n\t\t **/\n\t\tthis.filters = null;\n\t\t\n\t\t/**\n\t\t * A Shape instance that defines a vector mask (clipping path) for this display object.  The shape's transformation\n\t\t * will be applied relative to the display object's parent coordinates (as if it were a child of the parent).\n\t\t * @property mask\n\t\t * @type {Shape}\n\t\t * @default null\n\t\t */\n\t\tthis.mask = null;\n\t\t\n\t\t/**\n\t\t * A display object that will be tested when checking mouse interactions or testing {{#crossLink \"Container/getObjectsUnderPoint\"}}{{/crossLink}}.\n\t\t * The hit area will have its transformation applied relative to this display object's coordinate space (as though\n\t\t * the hit test object were a child of this display object and relative to its regX/Y). The hitArea will be tested\n\t\t * using only its own `alpha` value regardless of the alpha value on the target display object, or the target's\n\t\t * ancestors (parents).\n\t\t * \n\t\t * If set on a {{#crossLink \"Container\"}}{{/crossLink}}, children of the Container will not receive mouse events.\n\t\t * This is similar to setting {{#crossLink \"mouseChildren\"}}{{/crossLink}} to false.\n\t\t *\n\t\t * Note that hitArea is NOT currently used by the `hitTest()` method, nor is it supported for {{#crossLink \"Stage\"}}{{/crossLink}}.\n\t\t * @property hitArea\n\t\t * @type {DisplayObject}\n\t\t * @default null\n\t\t */\n\t\tthis.hitArea = null;\n\t\t\n\t\t/**\n\t\t * A CSS cursor (ex. \"pointer\", \"help\", \"text\", etc) that will be displayed when the user hovers over this display\n\t\t * object. You must enable mouseover events using the {{#crossLink \"Stage/enableMouseOver\"}}{{/crossLink}} method to\n\t\t * use this property. Setting a non-null cursor on a Container will override the cursor set on its descendants.\n\t\t * @property cursor\n\t\t * @type {String}\n\t\t * @default null\n\t\t */\n\t\tthis.cursor = null;\n\t\n\t\n\t// private properties:\n\t\t/**\n\t\t * @property _cacheOffsetX\n\t\t * @protected\n\t\t * @type {Number}\n\t\t * @default 0\n\t\t **/\n\t\tthis._cacheOffsetX = 0;\n\t\n\t\t/**\n\t\t * @property _cacheOffsetY\n\t\t * @protected\n\t\t * @type {Number}\n\t\t * @default 0\n\t\t **/\n\t\tthis._cacheOffsetY = 0;\n\t\t\n\t\t/**\n\t\t * @property _filterOffsetX\n\t\t * @protected\n\t\t * @type {Number}\n\t\t * @default 0\n\t\t **/\n\t\tthis._filterOffsetX = 0;\n\t\t\n\t\t/**\n\t\t * @property _filterOffsetY\n\t\t * @protected\n\t\t * @type {Number}\n\t\t * @default 0\n\t\t **/\n\t\tthis._filterOffsetY = 0;\n\t\t\n\t\t/**\n\t\t * @property _cacheScale\n\t\t * @protected\n\t\t * @type {Number}\n\t\t * @default 1\n\t\t **/\n\t\tthis._cacheScale = 1;\n\t\n\t\t/**\n\t\t* @property _cacheDataURLID\n\t\t* @protected\n\t\t* @type {Number}\n\t\t* @default 0\n\t\t*/\n\t\tthis._cacheDataURLID = 0;\n\t\t\n\t\t/**\n\t\t* @property _cacheDataURL\n\t\t* @protected\n\t\t* @type {String}\n\t\t* @default null\n\t\t*/\n\t\tthis._cacheDataURL = null;\n\t\n\t\t/**\n\t\t * @property _props\n\t\t * @protected\n\t\t * @type {DisplayObject}\n\t\t * @default null\n\t\t **/\n\t\tthis._props = new createjs.DisplayProps();\n\t\n\t\t/**\n\t\t * @property _rectangle\n\t\t * @protected\n\t\t * @type {Rectangle}\n\t\t * @default null\n\t\t **/\n\t\tthis._rectangle = new createjs.Rectangle();\n\t\n\t\t/**\n\t\t * @property _bounds\n\t\t * @protected\n\t\t * @type {Rectangle}\n\t\t * @default null\n\t\t **/\n\t\tthis._bounds = null;\n\t}\n\tvar p = createjs.extend(DisplayObject, createjs.EventDispatcher);\n\n\t// TODO: deprecated\n\t// p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\n\t\n// static properties:\n\t/**\n\t * Listing of mouse event names. Used in _hasMouseEventListener.\n\t * @property _MOUSE_EVENTS\n\t * @protected\n\t * @static\n\t * @type {Array}\n\t **/\n\tDisplayObject._MOUSE_EVENTS = [\"click\",\"dblclick\",\"mousedown\",\"mouseout\",\"mouseover\",\"pressmove\",\"pressup\",\"rollout\",\"rollover\"];\n\n\t/**\n\t * Suppresses errors generated when using features like hitTest, mouse events, and {{#crossLink \"getObjectsUnderPoint\"}}{{/crossLink}}\n\t * with cross domain content.\n\t * @property suppressCrossDomainErrors\n\t * @static\n\t * @type {Boolean}\n\t * @default false\n\t **/\n\tDisplayObject.suppressCrossDomainErrors = false;\n\t\n\t/**\n\t * @property _snapToPixelEnabled\n\t * @protected\n\t * @static\n\t * @type {Boolean}\n\t * @default false\n\t **/\n\tDisplayObject._snapToPixelEnabled = false; // stage.snapToPixelEnabled is temporarily copied here during a draw to provide global access.\n\n\t/**\n\t * @property _hitTestCanvas\n\t * @type {HTMLCanvasElement | Object}\n\t * @static\n\t * @protected\n\t **/\n\t/**\n\t * @property _hitTestContext\n\t * @type {CanvasRenderingContext2D}\n\t * @static\n\t * @protected\n\t **/\n\tvar canvas = createjs.createCanvas?createjs.createCanvas():document.createElement(\"canvas\"); // prevent errors on load in browsers without canvas.\n\tif (canvas.getContext) {\n\t\tDisplayObject._hitTestCanvas = canvas;\n\t\tDisplayObject._hitTestContext = canvas.getContext(\"2d\");\n\t\tcanvas.width = canvas.height = 1;\n\t}\n\n\t/**\n\t * @property _nextCacheID\n\t * @type {Number}\n\t * @static\n\t * @protected\n\t **/\n\tDisplayObject._nextCacheID = 1;\n\n\n// events:\n\t/**\n\t * Dispatched when the user presses their left mouse button over the display object. See the \n\t * {{#crossLink \"MouseEvent\"}}{{/crossLink}} class for a listing of event properties.\n\t * @event mousedown\n\t * @since 0.6.0\n\t */\n\t \n\t/**\n\t * Dispatched when the user presses their left mouse button and then releases it while over the display object.\n\t * See the {{#crossLink \"MouseEvent\"}}{{/crossLink}} class for a listing of event properties.\n\t * @event click\n\t * @since 0.6.0\n\t */\n\t \n\t/**\n\t * Dispatched when the user double clicks their left mouse button over this display object.\n\t * See the {{#crossLink \"MouseEvent\"}}{{/crossLink}} class for a listing of event properties.\n\t * @event dblclick\n\t * @since 0.6.0\n\t */\n\t \n\t/**\n\t * Dispatched when the user's mouse enters this display object. This event must be enabled using \n\t * {{#crossLink \"Stage/enableMouseOver\"}}{{/crossLink}}. See also {{#crossLink \"DisplayObject/rollover:event\"}}{{/crossLink}}.\n\t * See the {{#crossLink \"MouseEvent\"}}{{/crossLink}} class for a listing of event properties.\n\t * @event mouseover\n\t * @since 0.6.0\n\t */\n\n\t/**\n\t * Dispatched when the user's mouse leaves this display object. This event must be enabled using \n\t * {{#crossLink \"Stage/enableMouseOver\"}}{{/crossLink}}. See also {{#crossLink \"DisplayObject/rollout:event\"}}{{/crossLink}}.\n\t * See the {{#crossLink \"MouseEvent\"}}{{/crossLink}} class for a listing of event properties.\n\t * @event mouseout\n\t * @since 0.6.0\n\t */\n\t \n\t/**\n\t * This event is similar to {{#crossLink \"DisplayObject/mouseover:event\"}}{{/crossLink}}, with the following\n\t * differences: it does not bubble, and it considers {{#crossLink \"Container\"}}{{/crossLink}} instances as an\n\t * aggregate of their content.\n\t * \n\t * For example, myContainer contains two overlapping children: shapeA and shapeB. The user moves their mouse over\n\t * shapeA and then directly on to shapeB. With a listener for {{#crossLink \"mouseover:event\"}}{{/crossLink}} on\n\t * myContainer, two events would be received, each targeting a child element:<OL>\n\t * <LI>when the mouse enters shapeA (target=shapeA)</LI>\n\t * <LI>when the mouse enters shapeB (target=shapeB)</LI>\n\t * </OL>\n\t * However, with a listener for \"rollover\" instead, only a single event is received when the mouse first enters\n\t * the aggregate myContainer content (target=myContainer).\n\t * \n\t * This event must be enabled using {{#crossLink \"Stage/enableMouseOver\"}}{{/crossLink}}.\n\t * See the {{#crossLink \"MouseEvent\"}}{{/crossLink}} class for a listing of event properties.\n\t * @event rollover\n\t * @since 0.7.0\n\t */\n\t \n\t/**\n\t * This event is similar to {{#crossLink \"DisplayObject/mouseout:event\"}}{{/crossLink}}, with the following\n\t * differences: it does not bubble, and it considers {{#crossLink \"Container\"}}{{/crossLink}} instances as an\n\t * aggregate of their content.\n\t * \n\t * For example, myContainer contains two overlapping children: shapeA and shapeB. The user moves their mouse over\n\t * shapeA, then directly on to shapeB, then off both. With a listener for {{#crossLink \"mouseout:event\"}}{{/crossLink}}\n\t * on myContainer, two events would be received, each targeting a child element:<OL>\n\t * <LI>when the mouse leaves shapeA (target=shapeA)</LI>\n\t * <LI>when the mouse leaves shapeB (target=shapeB)</LI>\n\t * </OL>\n\t * However, with a listener for \"rollout\" instead, only a single event is received when the mouse leaves\n\t * the aggregate myContainer content (target=myContainer).\n\t * \n\t * This event must be enabled using {{#crossLink \"Stage/enableMouseOver\"}}{{/crossLink}}.\n\t * See the {{#crossLink \"MouseEvent\"}}{{/crossLink}} class for a listing of event properties.\n\t * @event rollout\n\t * @since 0.7.0\n\t */\n\t \n\t/**\n\t * After a {{#crossLink \"DisplayObject/mousedown:event\"}}{{/crossLink}} occurs on a display object, a pressmove\n\t * event will be generated on that object whenever the mouse moves until the mouse press is released. This can be\n\t * useful for dragging and similar operations.\n\t * @event pressmove\n\t * @since 0.7.0\n\t */\n\t \n\t/**\n\t * After a {{#crossLink \"DisplayObject/mousedown:event\"}}{{/crossLink}} occurs on a display object, a pressup event\n\t * will be generated on that object when that mouse press is released. This can be useful for dragging and similar\n\t * operations.\n\t * @event pressup\n\t * @since 0.7.0\n\t */\n\t \n\t/**\n\t * Dispatched when the display object is added to a parent container.\n\t * @event added\n\t */\n\t \n\t/**\n\t * Dispatched when the display object is removed from its parent container.\n\t * @event removed\n\t */\n\t \n\t/**\n\t * Dispatched on each display object on a stage whenever the stage updates. This occurs immediately before the\n\t * rendering (draw) pass. When {{#crossLink \"Stage/update\"}}{{/crossLink}} is called, first all display objects on\n\t * the stage dispatch the tick event, then all of the display objects are drawn to stage. Children will have their\n\t * {{#crossLink \"tick:event\"}}{{/crossLink}} event dispatched in order of their depth prior to the event being\n\t * dispatched on their parent.\n\t * @event tick\n\t * @param {Object} target The object that dispatched the event.\n\t * @param {String} type The event type.\n\t * @param {Array} params An array containing any arguments that were passed to the Stage.update() method. For\n\t *      example if you called stage.update(\"hello\"), then the params would be [\"hello\"].\n\t * @since 0.6.0\n\t */\n\t\n\t\n// getter / setters:\n\t/**\n\t * Use the {{#crossLink \"DisplayObject/stage:property\"}}{{/crossLink}} property instead.\n\t * @method getStage\n\t * @return {Stage}\n\t * @deprecated\n\t **/\n\tp.getStage = function() {\n\t\t// uses dynamic access to avoid circular dependencies;\n\t\tvar o = this, _Stage = createjs[\"Stage\"];\n\t\twhile (o.parent) { o = o.parent; }\n\t\tif (o instanceof _Stage) { return o; }\n\t\treturn null;\n\t};\n\n\t/**\n\t * Returns the Stage instance that this display object will be rendered on, or null if it has not been added to one.\n\t * @property stage\n\t * @type {Stage}\n\t * @readonly\n\t **/\n\ttry {\n\t\tObject.defineProperties(p, {\n\t\t\tstage: { get: p.getStage }\n\t\t});\n\t} catch (e) {}\n\n\n// public methods:\n\t/**\n\t * Returns true or false indicating whether the display object would be visible if drawn to a canvas.\n\t * This does not account for whether it would be visible within the boundaries of the stage.\n\t *\n\t * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n\t * @method isVisible\n\t * @return {Boolean} Boolean indicating whether the display object would be visible if drawn to a canvas\n\t **/\n\tp.isVisible = function() {\n\t\treturn !!(this.visible && this.alpha > 0 && this.scaleX != 0 && this.scaleY != 0);\n\t};\n\n\t/**\n\t * Draws the display object into the specified context ignoring its visible, alpha, shadow, and transform.\n\t * Returns <code>true</code> if the draw was handled (useful for overriding functionality).\n\t *\n\t * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n\t * @method draw\n\t * @param {CanvasRenderingContext2D} ctx The canvas 2D context object to draw into.\n\t * @param {Boolean} [ignoreCache=false] Indicates whether the draw operation should ignore any current cache. For example,\n\t * used for drawing the cache (to prevent it from simply drawing an existing cache back into itself).\n\t * @return {Boolean}\n\t **/\n\tp.draw = function(ctx, ignoreCache) {\n\t\tvar cacheCanvas = this.cacheCanvas;\n\t\tif (ignoreCache || !cacheCanvas) { return false; }\n\t\tvar scale = this._cacheScale;\n\t\tctx.drawImage(cacheCanvas, this._cacheOffsetX+this._filterOffsetX, this._cacheOffsetY+this._filterOffsetY, cacheCanvas.width/scale, cacheCanvas.height/scale);\n\t\treturn true;\n\t};\n\t\n\t/**\n\t * Applies this display object's transformation, alpha, globalCompositeOperation, clipping path (mask), and shadow\n\t * to the specified context. This is typically called prior to {{#crossLink \"DisplayObject/draw\"}}{{/crossLink}}.\n\t * @method updateContext\n\t * @param {CanvasRenderingContext2D} ctx The canvas 2D to update.\n\t **/\n\tp.updateContext = function(ctx) {\n\t\tvar o=this, mask=o.mask, mtx= o._props.matrix;\n\t\t\n\t\tif (mask && mask.graphics && !mask.graphics.isEmpty()) {\n\t\t\tmask.getMatrix(mtx);\n\t\t\tctx.transform(mtx.a,  mtx.b, mtx.c, mtx.d, mtx.tx, mtx.ty);\n\t\t\t\n\t\t\tmask.graphics.drawAsPath(ctx);\n\t\t\tctx.clip();\n\t\t\t\n\t\t\tmtx.invert();\n\t\t\tctx.transform(mtx.a,  mtx.b, mtx.c, mtx.d, mtx.tx, mtx.ty);\n\t\t}\n\t\t\n\t\tthis.getMatrix(mtx);\n\t\tvar tx = mtx.tx, ty = mtx.ty;\n\t\tif (DisplayObject._snapToPixelEnabled && o.snapToPixel) {\n\t\t\ttx = tx + (tx < 0 ? -0.5 : 0.5) | 0;\n\t\t\tty = ty + (ty < 0 ? -0.5 : 0.5) | 0;\n\t\t}\n\t\tctx.transform(mtx.a,  mtx.b, mtx.c, mtx.d, tx, ty);\n\t\tctx.globalAlpha *= o.alpha;\n\t\tif (o.compositeOperation) { ctx.globalCompositeOperation = o.compositeOperation; }\n\t\tif (o.shadow) { this._applyShadow(ctx, o.shadow); }\n\t};\n\n\t/**\n\t * Draws the display object into a new canvas, which is then used for subsequent draws. For complex content\n\t * that does not change frequently (ex. a Container with many children that do not move, or a complex vector Shape),\n\t * this can provide for much faster rendering because the content does not need to be re-rendered each tick. The\n\t * cached display object can be moved, rotated, faded, etc freely, however if its content changes, you must\n\t * manually update the cache by calling <code>updateCache()</code> or <code>cache()</code> again. You must specify\n\t * the cache area via the x, y, w, and h parameters. This defines the rectangle that will be rendered and cached\n\t * using this display object's coordinates.\n\t *\n\t * <h4>Example</h4>\n\t * For example if you defined a Shape that drew a circle at 0, 0 with a radius of 25:\n\t *\n\t *      var shape = new createjs.Shape();\n\t *      shape.graphics.beginFill(\"#ff0000\").drawCircle(0, 0, 25);\n\t *      myShape.cache(-25, -25, 50, 50);\n\t *\n\t * Note that filters need to be defined <em>before</em> the cache is applied. Check out the {{#crossLink \"Filter\"}}{{/crossLink}}\n\t * class for more information. Some filters (ex. BlurFilter) will not work as expected in conjunction with the scale param.\n\t * \n\t * Usually, the resulting cacheCanvas will have the dimensions width*scale by height*scale, however some filters (ex. BlurFilter)\n\t * will add padding to the canvas dimensions.\n\t *\n\t * @method cache\n\t * @param {Number} x The x coordinate origin for the cache region.\n\t * @param {Number} y The y coordinate origin for the cache region.\n\t * @param {Number} width The width of the cache region.\n\t * @param {Number} height The height of the cache region.\n\t * @param {Number} [scale=1] The scale at which the cache will be created. For example, if you cache a vector shape using\n\t * \tmyShape.cache(0,0,100,100,2) then the resulting cacheCanvas will be 200x200 px. This lets you scale and rotate\n\t * \tcached elements with greater fidelity. Default is 1.\n\t **/\n\tp.cache = function(x, y, width, height, scale) {\n\t\t// draw to canvas.\n\t\tscale = scale||1;\n\t\tif (!this.cacheCanvas) { this.cacheCanvas = createjs.createCanvas?createjs.createCanvas():document.createElement(\"canvas\"); }\n\t\tthis._cacheWidth = width;\n\t\tthis._cacheHeight = height;\n\t\tthis._cacheOffsetX = x;\n\t\tthis._cacheOffsetY = y;\n\t\tthis._cacheScale = scale;\n\t\tthis.updateCache();\n\t};\n\n\t/**\n\t * Redraws the display object to its cache. Calling updateCache without an active cache will throw an error.\n\t * If compositeOperation is null the current cache will be cleared prior to drawing. Otherwise the display object\n\t * will be drawn over the existing cache using the specified compositeOperation.\n\t *\n\t * <h4>Example</h4>\n\t * Clear the current graphics of a cached shape, draw some new instructions, and then update the cache. The new line\n\t * will be drawn on top of the old one.\n\t *\n\t *      // Not shown: Creating the shape, and caching it.\n\t *      shapeInstance.clear();\n\t *      shapeInstance.setStrokeStyle(3).beginStroke(\"#ff0000\").moveTo(100, 100).lineTo(200,200);\n\t *      shapeInstance.updateCache();\n\t *\n\t * @method updateCache\n\t * @param {String} compositeOperation The compositeOperation to use, or null to clear the cache and redraw it.\n\t * <a href=\"http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#compositing\">\n\t * whatwg spec on compositing</a>.\n\t **/\n\tp.updateCache = function(compositeOperation) {\n\t\tvar cacheCanvas = this.cacheCanvas;\n\t\tif (!cacheCanvas) { throw \"cache() must be called before updateCache()\"; }\n\t\tvar scale = this._cacheScale, offX = this._cacheOffsetX*scale, offY = this._cacheOffsetY*scale;\n\t\tvar w = this._cacheWidth, h = this._cacheHeight, ctx = cacheCanvas.getContext(\"2d\");\n\t\t\n\t\tvar fBounds = this._getFilterBounds();\n\t\toffX += (this._filterOffsetX = fBounds.x);\n\t\toffY += (this._filterOffsetY = fBounds.y);\n\t\t\n\t\tw = Math.ceil(w*scale) + fBounds.width;\n\t\th = Math.ceil(h*scale) + fBounds.height;\n\t\tif (w != cacheCanvas.width || h != cacheCanvas.height) {\n\t\t\t// TODO: it would be nice to preserve the content if there is a compositeOperation.\n\t\t\tcacheCanvas.width = w;\n\t\t\tcacheCanvas.height = h;\n\t\t} else if (!compositeOperation) {\n\t\t\tctx.clearRect(0, 0, w+1, h+1);\n\t\t}\n\t\t\n\t\tctx.save();\n\t\tctx.globalCompositeOperation = compositeOperation;\n\t\tctx.setTransform(scale, 0, 0, scale, -offX, -offY);\n\t\tthis.draw(ctx, true);\n\t\t// TODO: filters and cache scale don't play well together at present.\n\t\tthis._applyFilters();\n\t\tctx.restore();\n\t\tthis.cacheID = DisplayObject._nextCacheID++;\n\t};\n\n\t/**\n\t * Clears the current cache. See {{#crossLink \"DisplayObject/cache\"}}{{/crossLink}} for more information.\n\t * @method uncache\n\t **/\n\tp.uncache = function() {\n\t\tthis._cacheDataURL = this.cacheCanvas = null;\n\t\tthis.cacheID = this._cacheOffsetX = this._cacheOffsetY = this._filterOffsetX = this._filterOffsetY = 0;\n\t\tthis._cacheScale = 1;\n\t};\n\t\n\t/**\n\t * Returns a data URL for the cache, or null if this display object is not cached.\n\t * Uses cacheID to ensure a new data URL is not generated if the cache has not changed.\n\t * @method getCacheDataURL\n\t * @return {String} The image data url for the cache.\n\t **/\n\tp.getCacheDataURL = function() {\n\t\tif (!this.cacheCanvas) { return null; }\n\t\tif (this.cacheID != this._cacheDataURLID) { this._cacheDataURL = this.cacheCanvas.toDataURL(); }\n\t\treturn this._cacheDataURL;\n\t};\n\n\t/**\n\t * Transforms the specified x and y position from the coordinate space of the display object\n\t * to the global (stage) coordinate space. For example, this could be used to position an HTML label\n\t * over a specific point on a nested display object. Returns a Point instance with x and y properties\n\t * correlating to the transformed coordinates on the stage.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      displayObject.x = 300;\n\t *      displayObject.y = 200;\n\t *      stage.addChild(displayObject);\n\t *      var point = displayObject.localToGlobal(100, 100);\n\t *      // Results in x=400, y=300\n\t *\n\t * @method localToGlobal\n\t * @param {Number} x The x position in the source display object to transform.\n\t * @param {Number} y The y position in the source display object to transform.\n\t * @param {Point | Object} [pt] An object to copy the result into. If omitted a new Point object with x/y properties will be returned. \n\t * @return {Point} A Point instance with x and y properties correlating to the transformed coordinates\n\t * on the stage.\n\t **/\n\tp.localToGlobal = function(x, y, pt) {\n\t\treturn this.getConcatenatedMatrix(this._props.matrix).transformPoint(x,y, pt||new createjs.Point());\n\t};\n\n\t/**\n\t * Transforms the specified x and y position from the global (stage) coordinate space to the\n\t * coordinate space of the display object. For example, this could be used to determine\n\t * the current mouse position within the display object. Returns a Point instance with x and y properties\n\t * correlating to the transformed position in the display object's coordinate space.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      displayObject.x = 300;\n\t *      displayObject.y = 200;\n\t *      stage.addChild(displayObject);\n\t *      var point = displayObject.globalToLocal(100, 100);\n\t *      // Results in x=-200, y=-100\n\t *\n\t * @method globalToLocal\n\t * @param {Number} x The x position on the stage to transform.\n\t * @param {Number} y The y position on the stage to transform.\n\t * @param {Point | Object} [pt] An object to copy the result into. If omitted a new Point object with x/y properties will be returned. \n\t * @return {Point} A Point instance with x and y properties correlating to the transformed position in the\n\t * display object's coordinate space.\n\t **/\n\tp.globalToLocal = function(x, y, pt) {\n\t\treturn this.getConcatenatedMatrix(this._props.matrix).invert().transformPoint(x,y, pt||new createjs.Point());\n\t};\n\n\t/**\n\t * Transforms the specified x and y position from the coordinate space of this display object to the coordinate\n\t * space of the target display object. Returns a Point instance with x and y properties correlating to the\n\t * transformed position in the target's coordinate space. Effectively the same as using the following code with\n\t * {{#crossLink \"DisplayObject/localToGlobal\"}}{{/crossLink}} and {{#crossLink \"DisplayObject/globalToLocal\"}}{{/crossLink}}.\n\t *\n\t *      var pt = this.localToGlobal(x, y);\n\t *      pt = target.globalToLocal(pt.x, pt.y);\n\t *\n\t * @method localToLocal\n\t * @param {Number} x The x position in the source display object to transform.\n\t * @param {Number} y The y position on the source display object to transform.\n\t * @param {DisplayObject} target The target display object to which the coordinates will be transformed.\n\t * @param {Point | Object} [pt] An object to copy the result into. If omitted a new Point object with x/y properties will be returned. \n\t * @return {Point} Returns a Point instance with x and y properties correlating to the transformed position\n\t * in the target's coordinate space.\n\t **/\n\tp.localToLocal = function(x, y, target, pt) {\n\t\tpt = this.localToGlobal(x, y, pt);\n\t\treturn target.globalToLocal(pt.x, pt.y, pt);\n\t};\n\n\t/**\n\t * Shortcut method to quickly set the transform properties on the display object. All parameters are optional.\n\t * Omitted parameters will have the default value set.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      displayObject.setTransform(100, 100, 2, 2);\n\t *\n\t * @method setTransform\n\t * @param {Number} [x=0] The horizontal translation (x position) in pixels\n\t * @param {Number} [y=0] The vertical translation (y position) in pixels\n\t * @param {Number} [scaleX=1] The horizontal scale, as a percentage of 1\n\t * @param {Number} [scaleY=1] the vertical scale, as a percentage of 1\n\t * @param {Number} [rotation=0] The rotation, in degrees\n\t * @param {Number} [skewX=0] The horizontal skew factor\n\t * @param {Number} [skewY=0] The vertical skew factor\n\t * @param {Number} [regX=0] The horizontal registration point in pixels\n\t * @param {Number} [regY=0] The vertical registration point in pixels\n\t * @return {DisplayObject} Returns this instance. Useful for chaining commands.\n\t * @chainable\n\t*/\n\tp.setTransform = function(x, y, scaleX, scaleY, rotation, skewX, skewY, regX, regY) {\n\t\tthis.x = x || 0;\n\t\tthis.y = y || 0;\n\t\tthis.scaleX = scaleX == null ? 1 : scaleX;\n\t\tthis.scaleY = scaleY == null ? 1 : scaleY;\n\t\tthis.rotation = rotation || 0;\n\t\tthis.skewX = skewX || 0;\n\t\tthis.skewY = skewY || 0;\n\t\tthis.regX = regX || 0;\n\t\tthis.regY = regY || 0;\n\t\treturn this;\n\t};\n\t\n\t/**\n\t * Returns a matrix based on this object's current transform.\n\t * @method getMatrix\n\t * @param {Matrix2D} matrix Optional. A Matrix2D object to populate with the calculated values. If null, a new\n\t * Matrix object is returned.\n\t * @return {Matrix2D} A matrix representing this display object's transform.\n\t **/\n\tp.getMatrix = function(matrix) {\n\t\tvar o = this, mtx = matrix&&matrix.identity() || new createjs.Matrix2D();\n\t\treturn o.transformMatrix ?  mtx.copy(o.transformMatrix) : mtx.appendTransform(o.x, o.y, o.scaleX, o.scaleY, o.rotation, o.skewX, o.skewY, o.regX, o.regY);\n\t};\n\t\n\t/**\n\t * Generates a Matrix2D object representing the combined transform of the display object and all of its\n\t * parent Containers up to the highest level ancestor (usually the {{#crossLink \"Stage\"}}{{/crossLink}}). This can\n\t * be used to transform positions between coordinate spaces, such as with {{#crossLink \"DisplayObject/localToGlobal\"}}{{/crossLink}}\n\t * and {{#crossLink \"DisplayObject/globalToLocal\"}}{{/crossLink}}.\n\t * @method getConcatenatedMatrix\n\t * @param {Matrix2D} [matrix] A {{#crossLink \"Matrix2D\"}}{{/crossLink}} object to populate with the calculated values.\n\t * If null, a new Matrix2D object is returned.\n\t * @return {Matrix2D} The combined matrix.\n\t **/\n\tp.getConcatenatedMatrix = function(matrix) {\n\t\tvar o = this, mtx = this.getMatrix(matrix);\n\t\twhile (o = o.parent) {\n\t\t\tmtx.prependMatrix(o.getMatrix(o._props.matrix));\n\t\t}\n\t\treturn mtx;\n\t};\n\t\n\t/**\n\t * Generates a DisplayProps object representing the combined display properties of the  object and all of its\n\t * parent Containers up to the highest level ancestor (usually the {{#crossLink \"Stage\"}}{{/crossLink}}).\n\t * @method getConcatenatedDisplayProps\n\t * @param {DisplayProps} [props] A {{#crossLink \"DisplayProps\"}}{{/crossLink}} object to populate with the calculated values.\n\t * If null, a new DisplayProps object is returned.\n\t * @return {DisplayProps} The combined display properties.\n\t **/\n\tp.getConcatenatedDisplayProps = function(props) {\n\t\tprops = props ? props.identity() : new createjs.DisplayProps();\n\t\tvar o = this, mtx = o.getMatrix(props.matrix); \n\t\tdo {\n\t\t\tprops.prepend(o.visible, o.alpha, o.shadow, o.compositeOperation);\n\t\t\t\n\t\t\t// we do this to avoid problems with the matrix being used for both operations when o._props.matrix is passed in as the props param.\n\t\t\t// this could be simplified (ie. just done as part of the prepend above) if we switched to using a pool.\n\t\t\tif (o != this) { mtx.prependMatrix(o.getMatrix(o._props.matrix)); }\n\t\t} while (o = o.parent);\n\t\treturn props;\n\t};\n\n\t/**\n\t * Tests whether the display object intersects the specified point in <em>local</em> coordinates (ie. draws a pixel\n\t * with alpha > 0 at the specified position). This ignores the alpha, shadow, hitArea, mask, and compositeOperation\n\t * of the display object.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t * \t\tvar myShape = new createjs.Shape();\n\t * \t\tmyShape.graphics.beginFill(\"red\").drawRect(100, 100, 20, 50);\n\t *\n\t * \t\tconsole.log(myShape.hitTest(10,10); // false\n\t * \t\tconsole.log(myShape.hitTest(110, 25); // true\n\t *\n\t * Note that to use Stage coordinates (such as {{#crossLink \"Stage/mouseX:property\"}}{{/crossLink}}), they must\n\t * first be converted to local coordinates:\n\t *\n\t *      stage.addEventListener(\"stagemousedown\", handleMouseDown);\n\t *      function handleMouseDown(event) {\n\t *      \tvar p = myShape.globalToLocal(stage.mouseX, stage.mouseY);\n\t *          var hit = myShape.hitTest(p.x, p.y);\n\t *      }\n\t *\n\t * Shape-to-shape collision is not currently supported by EaselJS.\n\t *\n\t * @method hitTest\n\t * @param {Number} x The x position to check in the display object's local coordinates.\n\t * @param {Number} y The y position to check in the display object's local coordinates.\n\t * @return {Boolean} A Boolean indicating whether a visible portion of the DisplayObject intersect the specified\n\t * local Point.\n\t*/\n\tp.hitTest = function(x, y) {\n\t\tvar ctx = DisplayObject._hitTestContext;\n\t\tctx.setTransform(1, 0, 0, 1, -x, -y);\n\t\tthis.draw(ctx);\n\n\t\tvar hit = this._testHit(ctx);\n\t\tctx.setTransform(1, 0, 0, 1, 0, 0);\n\t\tctx.clearRect(0, 0, 2, 2);\n\t\treturn hit;\n\t};\n\t\n\t/**\n\t * Provides a chainable shortcut method for setting a number of properties on the instance.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      var myGraphics = new createjs.Graphics().beginFill(\"#ff0000\").drawCircle(0, 0, 25);\n\t *      var shape = stage.addChild(new createjs.Shape()).set({graphics:myGraphics, x:100, y:100, alpha:0.5});\n\t *\n\t * @method set\n\t * @param {Object} props A generic object containing properties to copy to the DisplayObject instance.\n\t * @return {DisplayObject} Returns the instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t*/\n\tp.set = function(props) {\n\t\tfor (var n in props) { this[n] = props[n]; }\n\t\treturn this;\n\t};\n\t\n\t/**\n\t * Returns a rectangle representing this object's bounds in its local coordinate system (ie. with no transformation).\n\t * Objects that have been cached will return the bounds of the cache.\n\t * \n\t * Not all display objects can calculate their own bounds (ex. Shape). For these objects, you can use \n\t * {{#crossLink \"DisplayObject/setBounds\"}}{{/crossLink}} so that they are included when calculating Container\n\t * bounds.\n\t * \n\t * <table>\n\t * \t<tr><td><b>All</b></td><td>\n\t * \t\tAll display objects support setting bounds manually using setBounds(). Likewise, display objects that\n\t * \t\thave been cached using cache() will return the bounds of their cache. Manual and cache bounds will override\n\t * \t\tthe automatic calculations listed below.\n\t * \t</td></tr>\n\t * \t<tr><td><b>Bitmap</b></td><td>\n\t * \t\tReturns the width and height of the sourceRect (if specified) or image, extending from (x=0,y=0).\n\t * \t</td></tr>\n\t * \t<tr><td><b>Sprite</b></td><td>\n\t * \t\tReturns the bounds of the current frame. May have non-zero x/y if a frame registration point was specified\n\t * \t\tin the spritesheet data. See also {{#crossLink \"SpriteSheet/getFrameBounds\"}}{{/crossLink}}\n\t * \t</td></tr>\n\t * \t<tr><td><b>Container</b></td><td>\n\t * \t\tReturns the aggregate (combined) bounds of all children that return a non-null value from getBounds().\n\t * \t</td></tr>\n\t * \t<tr><td><b>Shape</b></td><td>\n\t * \t\tDoes not currently support automatic bounds calculations. Use setBounds() to manually define bounds.\n\t * \t</td></tr>\n\t * \t<tr><td><b>Text</b></td><td>\n\t * \t\tReturns approximate bounds. Horizontal values (x/width) are quite accurate, but vertical values (y/height) are\n\t * \t\tnot, especially when using textBaseline values other than \"top\".\n\t * \t</td></tr>\n\t * \t<tr><td><b>BitmapText</b></td><td>\n\t * \t\tReturns approximate bounds. Values will be more accurate if spritesheet frame registration points are close\n\t * \t\tto (x=0,y=0).\n\t * \t</td></tr>\n\t* </table>\n\t * \n\t * Bounds can be expensive to calculate for some objects (ex. text, or containers with many children), and\n\t * are recalculated each time you call getBounds(). You can prevent recalculation on static objects by setting the\n\t * bounds explicitly:\n\t * \n\t * \tvar bounds = obj.getBounds();\n\t * \tobj.setBounds(bounds.x, bounds.y, bounds.width, bounds.height);\n\t * \t// getBounds will now use the set values, instead of recalculating\n\t * \n\t * To reduce memory impact, the returned Rectangle instance may be reused internally; clone the instance or copy its\n\t * values if you need to retain it.\n\t * \n\t * \tvar myBounds = obj.getBounds().clone();\n\t * \t// OR:\n\t * \tmyRect.copy(obj.getBounds());\n\t * \n\t * @method getBounds\n\t * @return {Rectangle} A Rectangle instance representing the bounds, or null if bounds are not available for this\n\t * object.\n\t **/\n\tp.getBounds = function() {\n\t\tif (this._bounds) { return this._rectangle.copy(this._bounds); }\n\t\tvar cacheCanvas = this.cacheCanvas;\n\t\tif (cacheCanvas) {\n\t\t\tvar scale = this._cacheScale;\n\t\t\treturn this._rectangle.setValues(this._cacheOffsetX, this._cacheOffsetY, cacheCanvas.width/scale, cacheCanvas.height/scale);\n\t\t}\n\t\treturn null;\n\t};\n\t\n\t/**\n\t * Returns a rectangle representing this object's bounds in its parent's coordinate system (ie. with transformations applied).\n\t * Objects that have been cached will return the transformed bounds of the cache.\n\t * \n\t * Not all display objects can calculate their own bounds (ex. Shape). For these objects, you can use \n\t * {{#crossLink \"DisplayObject/setBounds\"}}{{/crossLink}} so that they are included when calculating Container\n\t * bounds.\n\t * \n\t * To reduce memory impact, the returned Rectangle instance may be reused internally; clone the instance or copy its\n\t * values if you need to retain it.\n\t * \n\t * Container instances calculate aggregate bounds for all children that return bounds via getBounds.\n\t * @method getTransformedBounds\n\t * @return {Rectangle} A Rectangle instance representing the bounds, or null if bounds are not available for this object.\n\t **/\n\tp.getTransformedBounds = function() {\n\t\treturn this._getBounds();\n\t};\n\t\n\t/**\n\t * Allows you to manually specify the bounds of an object that either cannot calculate their own bounds (ex. Shape &\n\t * Text) for future reference, or so the object can be included in Container bounds. Manually set bounds will always\n\t * override calculated bounds.\n\t * \n\t * The bounds should be specified in the object's local (untransformed) coordinates. For example, a Shape instance\n\t * with a 25px radius circle centered at 0,0 would have bounds of (-25, -25, 50, 50).\n\t * @method setBounds\n\t * @param {Number} x The x origin of the bounds. Pass null to remove the manual bounds.\n\t * @param {Number} y The y origin of the bounds.\n\t * @param {Number} width The width of the bounds.\n\t * @param {Number} height The height of the bounds.\n\t **/\n\tp.setBounds = function(x, y, width, height) {\n\t\tif (x == null) { this._bounds = x; }\n\t\tthis._bounds = (this._bounds || new createjs.Rectangle()).setValues(x, y, width, height);\n\t};\n\n\t/**\n\t * Returns a clone of this DisplayObject. Some properties that are specific to this instance's current context are\n\t * reverted to their defaults (for example .parent). Caches are not maintained across clones, and some elements\n\t * are copied by reference (masks, individual filter instances, hit area)\n\t * @method clone\n\t * @return {DisplayObject} A clone of the current DisplayObject instance.\n\t **/\n\tp.clone = function() {\n\t\treturn this._cloneProps(new DisplayObject());\n\t};\n\n\t/**\n\t * Returns a string representation of this object.\n\t * @method toString\n\t * @return {String} a string representation of the instance.\n\t **/\n\tp.toString = function() {\n\t\treturn \"[DisplayObject (name=\"+  this.name +\")]\";\n\t};\n\n\n// private methods:\n\t// separated so it can be used more easily in subclasses:\n\t/**\n\t * @method _cloneProps\n\t * @param {DisplayObject} o The DisplayObject instance which will have properties from the current DisplayObject\n\t * instance copied into.\n\t * @return {DisplayObject} o\n\t * @protected\n\t **/\n\tp._cloneProps = function(o) {\n\t\to.alpha = this.alpha;\n\t\to.mouseEnabled = this.mouseEnabled;\n\t\to.tickEnabled = this.tickEnabled;\n\t\to.name = this.name;\n\t\to.regX = this.regX;\n\t\to.regY = this.regY;\n\t\to.rotation = this.rotation;\n\t\to.scaleX = this.scaleX;\n\t\to.scaleY = this.scaleY;\n\t\to.shadow = this.shadow;\n\t\to.skewX = this.skewX;\n\t\to.skewY = this.skewY;\n\t\to.visible = this.visible;\n\t\to.x  = this.x;\n\t\to.y = this.y;\n\t\to.compositeOperation = this.compositeOperation;\n\t\to.snapToPixel = this.snapToPixel;\n\t\to.filters = this.filters==null?null:this.filters.slice(0);\n\t\to.mask = this.mask;\n\t\to.hitArea = this.hitArea;\n\t\to.cursor = this.cursor;\n\t\to._bounds = this._bounds;\n\t\treturn o;\n\t};\n\n\t/**\n\t * @method _applyShadow\n\t * @protected\n\t * @param {CanvasRenderingContext2D} ctx\n\t * @param {Shadow} shadow\n\t **/\n\tp._applyShadow = function(ctx, shadow) {\n\t\tshadow = shadow || Shadow.identity;\n\t\tctx.shadowColor = shadow.color;\n\t\tctx.shadowOffsetX = shadow.offsetX;\n\t\tctx.shadowOffsetY = shadow.offsetY;\n\t\tctx.shadowBlur = shadow.blur;\n\t};\n\t\n\t\n\t/**\n\t * @method _tick\n\t * @param {Object} evtObj An event object that will be dispatched to all tick listeners. This object is reused between dispatchers to reduce construction & GC costs.\n\t * @protected\n\t **/\n\tp._tick = function(evtObj) {\n\t\t// because tick can be really performance sensitive, check for listeners before calling dispatchEvent.\n\t\tvar ls = this._listeners;\n\t\tif (ls && ls[\"tick\"]) {\n\t\t\t// reset & reuse the event object to avoid construction / GC costs:\n\t\t\tevtObj.target = null;\n\t\t\tevtObj.propagationStopped = evtObj.immediatePropagationStopped = false;\n\t\t\tthis.dispatchEvent(evtObj);\n\t\t}\n\t};\n\n\t/**\n\t * @method _testHit\n\t * @protected\n\t * @param {CanvasRenderingContext2D} ctx\n\t * @return {Boolean}\n\t **/\n\tp._testHit = function(ctx) {\n\t\ttry {\n\t\t\tvar hit = ctx.getImageData(0, 0, 1, 1).data[3] > 1;\n\t\t} catch (e) {\n\t\t\tif (!DisplayObject.suppressCrossDomainErrors) {\n\t\t\t\tthrow \"An error has occurred. This is most likely due to security restrictions on reading canvas pixel data with local or cross-domain images.\";\n\t\t\t}\n\t\t}\n\t\treturn hit;\n\t};\n\n\t/**\n\t * @method _applyFilters\n\t * @protected\n\t **/\n\tp._applyFilters = function() {\n\t\tif (!this.filters || this.filters.length == 0 || !this.cacheCanvas) { return; }\n\t\tvar l = this.filters.length;\n\t\tvar ctx = this.cacheCanvas.getContext(\"2d\");\n\t\tvar w = this.cacheCanvas.width;\n\t\tvar h = this.cacheCanvas.height;\n\t\tfor (var i=0; i<l; i++) {\n\t\t\tthis.filters[i].applyFilter(ctx, 0, 0, w, h);\n\t\t}\n\t};\n\t\n\t/**\n\t * @method _getFilterBounds\n\t * @return {Rectangle}\n\t * @protected\n\t **/\n\tp._getFilterBounds = function(rect) {\n\t\tvar l, filters = this.filters, bounds = this._rectangle.setValues(0,0,0,0);\n\t\tif (!filters || !(l=filters.length)) { return bounds; }\n\t\t\n\t\tfor (var i=0; i<l; i++) {\n\t\t\tvar f = this.filters[i];\n\t\t\tf.getBounds&&f.getBounds(bounds);\n\t\t}\n\t\treturn bounds;\n\t};\n\t\n\t/**\n\t * @method _getBounds\n\t * @param {Matrix2D} matrix\n\t * @param {Boolean} ignoreTransform If true, does not apply this object's transform.\n\t * @return {Rectangle}\n\t * @protected\n\t **/\n\tp._getBounds = function(matrix, ignoreTransform){\n\t\treturn this._transformBounds(this.getBounds(), matrix, ignoreTransform);\n\t};\n\t\n\t/**\n\t * @method _transformBounds\n\t * @param {Rectangle} bounds\n\t * @param {Matrix2D} matrix\n\t * @param {Boolean} ignoreTransform\n\t * @return {Rectangle}\n\t * @protected\n\t **/\n\tp._transformBounds = function(bounds, matrix, ignoreTransform) {\n\t\tif (!bounds) { return bounds; }\n\t\tvar x = bounds.x, y = bounds.y, width = bounds.width, height = bounds.height, mtx = this._props.matrix;\n\t\tmtx = ignoreTransform ? mtx.identity() : this.getMatrix(mtx);\n\t\t\n\t\tif (x || y) { mtx.appendTransform(0,0,1,1,0,0,0,-x,-y); } // TODO: simplify this.\n\t\tif (matrix) { mtx.prependMatrix(matrix); }\n\t\t\n\t\tvar x_a = width*mtx.a, x_b = width*mtx.b;\n\t\tvar y_c = height*mtx.c, y_d = height*mtx.d;\n\t\tvar tx = mtx.tx, ty = mtx.ty;\n\t\t\n\t\tvar minX = tx, maxX = tx, minY = ty, maxY = ty;\n\n\t\tif ((x = x_a + tx) < minX) { minX = x; } else if (x > maxX) { maxX = x; }\n\t\tif ((x = x_a + y_c + tx) < minX) { minX = x; } else if (x > maxX) { maxX = x; }\n\t\tif ((x = y_c + tx) < minX) { minX = x; } else if (x > maxX) { maxX = x; }\n\t\t\n\t\tif ((y = x_b + ty) < minY) { minY = y; } else if (y > maxY) { maxY = y; }\n\t\tif ((y = x_b + y_d + ty) < minY) { minY = y; } else if (y > maxY) { maxY = y; }\n\t\tif ((y = y_d + ty) < minY) { minY = y; } else if (y > maxY) { maxY = y; }\n\t\t\n\t\treturn bounds.setValues(minX, minY, maxX-minX, maxY-minY);\n\t};\n\t\n\t/**\n\t * Indicates whether the display object has any mouse event listeners or a cursor.\n\t * @method _isMouseOpaque\n\t * @return {Boolean}\n\t * @protected\n\t **/\n\tp._hasMouseEventListener = function() {\n\t\tvar evts = DisplayObject._MOUSE_EVENTS;\n\t\tfor (var i= 0, l=evts.length; i<l; i++) {\n\t\t\tif (this.hasEventListener(evts[i])) { return true; }\n\t\t}\n\t\treturn !!this.cursor;\n\t};\n\n\tcreatejs.DisplayObject = createjs.promote(DisplayObject, \"EventDispatcher\");\n}());\n\n//##############################################################################\n// Container.js\n//##############################################################################\n\n(function() {\n\t\"use strict\";\n\t\n\n// constructor:\n/**\n * A Container is a nestable display list that allows you to work with compound display elements. For  example you could\n * group arm, leg, torso and head {{#crossLink \"Bitmap\"}}{{/crossLink}} instances together into a Person Container, and\n * transform them as a group, while still being able to move the individual parts relative to each other. Children of\n * containers have their <code>transform</code> and <code>alpha</code> properties concatenated with their parent\n * Container.\n *\n * For example, a {{#crossLink \"Shape\"}}{{/crossLink}} with x=100 and alpha=0.5, placed in a Container with <code>x=50</code>\n * and <code>alpha=0.7</code> will be rendered to the canvas at <code>x=150</code> and <code>alpha=0.35</code>.\n * Containers have some overhead, so you generally shouldn't create a Container to hold a single child.\n *\n * <h4>Example</h4>\n *\n *      var container = new createjs.Container();\n *      container.addChild(bitmapInstance, shapeInstance);\n *      container.x = 100;\n *\n * @class Container\n * @extends DisplayObject\n * @constructor\n **/\n\tfunction Container() {\n\t\tthis.DisplayObject_constructor();\n\t\t\n\t// public properties:\n\t\t/**\n\t\t * The array of children in the display list. You should usually use the child management methods such as\n\t\t * {{#crossLink \"Container/addChild\"}}{{/crossLink}}, {{#crossLink \"Container/removeChild\"}}{{/crossLink}},\n\t\t * {{#crossLink \"Container/swapChildren\"}}{{/crossLink}}, etc, rather than accessing this directly, but it is\n\t\t * included for advanced uses.\n\t\t * @property children\n\t\t * @type Array\n\t\t * @default null\n\t\t **/\n\t\tthis.children = [];\n\t\t\n\t\t/**\n\t\t * Indicates whether the children of this container are independently enabled for mouse/pointer interaction.\n\t\t * If false, the children will be aggregated under the container - for example, a click on a child shape would\n\t\t * trigger a click event on the container.\n\t\t * @property mouseChildren\n\t\t * @type Boolean\n\t\t * @default true\n\t\t **/\n\t\tthis.mouseChildren = true;\n\t\t\n\t\t/**\n\t\t * If false, the tick will not be propagated to children of this Container. This can provide some performance benefits.\n\t\t * In addition to preventing the \"tick\" event from being dispatched, it will also prevent tick related updates\n\t\t * on some display objects (ex. Sprite & MovieClip frame advancing, DOMElement visibility handling).\n\t\t * @property tickChildren\n\t\t * @type Boolean\n\t\t * @default true\n\t\t **/\n\t\tthis.tickChildren = true;\n\t}\n\tvar p = createjs.extend(Container, createjs.DisplayObject);\n\t\n\t\n// getter / setters:\n\t/**\n\t * Use the {{#crossLink \"Container/numChildren:property\"}}{{/crossLink}} property instead.\n\t * @method getNumChildren\n\t * @return {Number}\n\t * @deprecated\n\t **/\n\tp.getNumChildren = function() {\n\t\treturn this.children.length;\n\t};\n\n\t/**\n\t * Returns the number of children in the container.\n\t * @property numChildren\n\t * @type {Number}\n\t * @readonly\n\t **/\n\ttry {\n\t\tObject.defineProperties(p, {\n\t\t\tnumChildren: { get: p.getNumChildren }\n\t\t});\n\t} catch (e) {}\n\t\n\n// public methods:\n\t/**\n\t * Constructor alias for backwards compatibility. This method will be removed in future versions.\n\t * Subclasses should be updated to use {{#crossLink \"Utility Methods/extends\"}}{{/crossLink}}.\n\t * @method initialize\n\t * @deprecated in favour of `createjs.promote()`\n\t **/\n\tp.initialize = Container; // TODO: deprecated.\n\t\n\t/**\n\t * Returns true or false indicating whether the display object would be visible if drawn to a canvas.\n\t * This does not account for whether it would be visible within the boundaries of the stage.\n\t *\n\t * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n\t * @method isVisible\n\t * @return {Boolean} Boolean indicating whether the display object would be visible if drawn to a canvas\n\t **/\n\tp.isVisible = function() {\n\t\tvar hasContent = this.cacheCanvas || this.children.length;\n\t\treturn !!(this.visible && this.alpha > 0 && this.scaleX != 0 && this.scaleY != 0 && hasContent);\n\t};\n\n\t/**\n\t * Draws the display object into the specified context ignoring its visible, alpha, shadow, and transform.\n\t * Returns true if the draw was handled (useful for overriding functionality).\n\t *\n\t * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n\t * @method draw\n\t * @param {CanvasRenderingContext2D} ctx The canvas 2D context object to draw into.\n\t * @param {Boolean} [ignoreCache=false] Indicates whether the draw operation should ignore any current cache.\n\t * For example, used for drawing the cache (to prevent it from simply drawing an existing cache back\n\t * into itself).\n\t **/\n\tp.draw = function(ctx, ignoreCache) {\n\t\tif (this.DisplayObject_draw(ctx, ignoreCache)) { return true; }\n\t\t\n\t\t// this ensures we don't have issues with display list changes that occur during a draw:\n\t\tvar list = this.children.slice();\n\t\tfor (var i=0,l=list.length; i<l; i++) {\n\t\t\tvar child = list[i];\n\t\t\tif (!child.isVisible()) { continue; }\n\t\t\t\n\t\t\t// draw the child:\n\t\t\tctx.save();\n\t\t\tchild.updateContext(ctx);\n\t\t\tchild.draw(ctx);\n\t\t\tctx.restore();\n\t\t}\n\t\treturn true;\n\t};\n\t\n\t/**\n\t * Adds a child to the top of the display list.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t * \t\tcontainer.addChild(bitmapInstance);\n\t *\n\t * You can also add multiple children at once:\n\t *\n\t * \t\tcontainer.addChild(bitmapInstance, shapeInstance, textInstance);\n\t *\n\t * @method addChild\n\t * @param {DisplayObject} child The display object to add.\n\t * @return {DisplayObject} The child that was added, or the last child if multiple children were added.\n\t **/\n\tp.addChild = function(child) {\n\t\tif (child == null) { return child; }\n\t\tvar l = arguments.length;\n\t\tif (l > 1) {\n\t\t\tfor (var i=0; i<l; i++) { this.addChild(arguments[i]); }\n\t\t\treturn arguments[l-1];\n\t\t}\n\t\tif (child.parent) { child.parent.removeChild(child); }\n\t\tchild.parent = this;\n\t\tthis.children.push(child);\n\t\tchild.dispatchEvent(\"added\");\n\t\treturn child;\n\t};\n\n\t/**\n\t * Adds a child to the display list at the specified index, bumping children at equal or greater indexes up one, and\n\t * setting its parent to this Container.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      addChildAt(child1, index);\n\t *\n\t * You can also add multiple children, such as:\n\t *\n\t *      addChildAt(child1, child2, ..., index);\n\t *\n\t * The index must be between 0 and numChildren. For example, to add myShape under otherShape in the display list,\n\t * you could use:\n\t *\n\t *      container.addChildAt(myShape, container.getChildIndex(otherShape));\n\t *\n\t * This would also bump otherShape's index up by one. Fails silently if the index is out of range.\n\t *\n\t * @method addChildAt\n\t * @param {DisplayObject} child The display object to add.\n\t * @param {Number} index The index to add the child at.\n\t * @return {DisplayObject} Returns the last child that was added, or the last child if multiple children were added.\n\t **/\n\tp.addChildAt = function(child, index) {\n\t\tvar l = arguments.length;\n\t\tvar indx = arguments[l-1]; // can't use the same name as the index param or it replaces arguments[1]\n\t\tif (indx < 0 || indx > this.children.length) { return arguments[l-2]; }\n\t\tif (l > 2) {\n\t\t\tfor (var i=0; i<l-1; i++) { this.addChildAt(arguments[i], indx+i); }\n\t\t\treturn arguments[l-2];\n\t\t}\n\t\tif (child.parent) { child.parent.removeChild(child); }\n\t\tchild.parent = this;\n\t\tthis.children.splice(index, 0, child);\n\t\tchild.dispatchEvent(\"added\");\n\t\treturn child;\n\t};\n\n\t/**\n\t * Removes the specified child from the display list. Note that it is faster to use removeChildAt() if the index is\n\t * already known.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      container.removeChild(child);\n\t *\n\t * You can also remove multiple children:\n\t *\n\t *      removeChild(child1, child2, ...);\n\t *\n\t * Returns true if the child (or children) was removed, or false if it was not in the display list.\n\t * @method removeChild\n\t * @param {DisplayObject} child The child to remove.\n\t * @return {Boolean} true if the child (or children) was removed, or false if it was not in the display list.\n\t **/\n\tp.removeChild = function(child) {\n\t\tvar l = arguments.length;\n\t\tif (l > 1) {\n\t\t\tvar good = true;\n\t\t\tfor (var i=0; i<l; i++) { good = good && this.removeChild(arguments[i]); }\n\t\t\treturn good;\n\t\t}\n\t\treturn this.removeChildAt(createjs.indexOf(this.children, child));\n\t};\n\n\t/**\n\t * Removes the child at the specified index from the display list, and sets its parent to null.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      container.removeChildAt(2);\n\t *\n\t * You can also remove multiple children:\n\t *\n\t *      container.removeChild(2, 7, ...)\n\t *\n\t * Returns true if the child (or children) was removed, or false if any index was out of range.\n\t * @method removeChildAt\n\t * @param {Number} index The index of the child to remove.\n\t * @return {Boolean} true if the child (or children) was removed, or false if any index was out of range.\n\t **/\n\tp.removeChildAt = function(index) {\n\t\tvar l = arguments.length;\n\t\tif (l > 1) {\n\t\t\tvar a = [];\n\t\t\tfor (var i=0; i<l; i++) { a[i] = arguments[i]; }\n\t\t\ta.sort(function(a, b) { return b-a; });\n\t\t\tvar good = true;\n\t\t\tfor (var i=0; i<l; i++) { good = good && this.removeChildAt(a[i]); }\n\t\t\treturn good;\n\t\t}\n\t\tif (index < 0 || index > this.children.length-1) { return false; }\n\t\tvar child = this.children[index];\n\t\tif (child) { child.parent = null; }\n\t\tthis.children.splice(index, 1);\n\t\tchild.dispatchEvent(\"removed\");\n\t\treturn true;\n\t};\n\n\t/**\n\t * Removes all children from the display list.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t * \tcontainer.removeAllChildren();\n\t *\n\t * @method removeAllChildren\n\t **/\n\tp.removeAllChildren = function() {\n\t\tvar kids = this.children;\n\t\twhile (kids.length) { this.removeChildAt(0); }\n\t};\n\n\t/**\n\t * Returns the child at the specified index.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      container.getChildAt(2);\n\t *\n\t * @method getChildAt\n\t * @param {Number} index The index of the child to return.\n\t * @return {DisplayObject} The child at the specified index. Returns null if there is no child at the index.\n\t **/\n\tp.getChildAt = function(index) {\n\t\treturn this.children[index];\n\t};\n\t\n\t/**\n\t * Returns the child with the specified name.\n\t * @method getChildByName\n\t * @param {String} name The name of the child to return.\n\t * @return {DisplayObject} The child with the specified name.\n\t **/\n\tp.getChildByName = function(name) {\n\t\tvar kids = this.children;\n\t\tfor (var i=0,l=kids.length;i<l;i++) {\n\t\t\tif(kids[i].name == name) { return kids[i]; }\n\t\t}\n\t\treturn null;\n\t};\n\n\t/**\n\t * Performs an array sort operation on the child list.\n\t *\n\t * <h4>Example: Display children with a higher y in front.</h4>\n\t * \n\t *      var sortFunction = function(obj1, obj2, options) {\n\t *          if (obj1.y > obj2.y) { return 1; }\n\t *          if (obj1.y < obj2.y) { return -1; }\n\t *          return 0;\n\t *      }\n\t *      container.sortChildren(sortFunction);\n\t *\n\t * @method sortChildren\n\t * @param {Function} sortFunction the function to use to sort the child list. See JavaScript's <code>Array.sort</code>\n\t * documentation for details.\n\t **/\n\tp.sortChildren = function(sortFunction) {\n\t\tthis.children.sort(sortFunction);\n\t};\n\n\t/**\n\t * Returns the index of the specified child in the display list, or -1 if it is not in the display list.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      var index = container.getChildIndex(child);\n\t *\n\t * @method getChildIndex\n\t * @param {DisplayObject} child The child to return the index of.\n\t * @return {Number} The index of the specified child. -1 if the child is not found.\n\t **/\n\tp.getChildIndex = function(child) {\n\t\treturn createjs.indexOf(this.children, child);\n\t};\n\t\n\t/**\n\t * Swaps the children at the specified indexes. Fails silently if either index is out of range.\n\t * @method swapChildrenAt\n\t * @param {Number} index1\n\t * @param {Number} index2\n\t **/\n\tp.swapChildrenAt = function(index1, index2) {\n\t\tvar kids = this.children;\n\t\tvar o1 = kids[index1];\n\t\tvar o2 = kids[index2];\n\t\tif (!o1 || !o2) { return; }\n\t\tkids[index1] = o2;\n\t\tkids[index2] = o1;\n\t};\n\t\n\t/**\n\t * Swaps the specified children's depth in the display list. Fails silently if either child is not a child of this\n\t * Container.\n\t * @method swapChildren\n\t * @param {DisplayObject} child1\n\t * @param {DisplayObject} child2\n\t **/\n\tp.swapChildren = function(child1, child2) {\n\t\tvar kids = this.children;\n\t\tvar index1,index2;\n\t\tfor (var i=0,l=kids.length;i<l;i++) {\n\t\t\tif (kids[i] == child1) { index1 = i; }\n\t\t\tif (kids[i] == child2) { index2 = i; }\n\t\t\tif (index1 != null && index2 != null) { break; }\n\t\t}\n\t\tif (i==l) { return; } // TODO: throw error?\n\t\tkids[index1] = child2;\n\t\tkids[index2] = child1;\n\t};\n\t\n\t/**\n\t * Changes the depth of the specified child. Fails silently if the child is not a child of this container, or the index is out of range.\n\t * @param {DisplayObject} child\n\t * @param {Number} index  \n\t * @method setChildIndex\n\t **/\n\tp.setChildIndex = function(child, index) {\n\t\tvar kids = this.children, l=kids.length;\n\t\tif (child.parent != this || index < 0 || index >= l) { return; }\n\t\tfor (var i=0;i<l;i++) {\n\t\t\tif (kids[i] == child) { break; }\n\t\t}\n\t\tif (i==l || i == index) { return; }\n\t\tkids.splice(i,1);\n\t\tkids.splice(index,0,child);\n\t};\n\n\t/**\n\t * Returns true if the specified display object either is this container or is a descendent (child, grandchild, etc)\n\t * of this container.\n\t * @method contains\n\t * @param {DisplayObject} child The DisplayObject to be checked.\n\t * @return {Boolean} true if the specified display object either is this container or is a descendent.\n\t **/\n\tp.contains = function(child) {\n\t\twhile (child) {\n\t\t\tif (child == this) { return true; }\n\t\t\tchild = child.parent;\n\t\t}\n\t\treturn false;\n\t};\n\n\t/**\n\t * Tests whether the display object intersects the specified local point (ie. draws a pixel with alpha > 0 at the\n\t * specified position). This ignores the alpha, shadow and compositeOperation of the display object, and all\n\t * transform properties including regX/Y.\n\t * @method hitTest\n\t * @param {Number} x The x position to check in the display object's local coordinates.\n\t * @param {Number} y The y position to check in the display object's local coordinates.\n\t * @return {Boolean} A Boolean indicating whether there is a visible section of a DisplayObject that overlaps the specified\n\t * coordinates.\n\t **/\n\tp.hitTest = function(x, y) {\n\t\t// TODO: optimize to use the fast cache check where possible.\n\t\treturn (this.getObjectUnderPoint(x, y) != null);\n\t};\n\n\t/**\n\t * Returns an array of all display objects under the specified coordinates that are in this container's display\n\t * list. This routine ignores any display objects with {{#crossLink \"DisplayObject/mouseEnabled:property\"}}{{/crossLink}}\n\t * set to `false`. The array will be sorted in order of visual depth, with the top-most display object at index 0.\n\t * This uses shape based hit detection, and can be an expensive operation to run, so it is best to use it carefully.\n\t * For example, if testing for objects under the mouse, test on tick (instead of on {{#crossLink \"DisplayObject/mousemove:event\"}}{{/crossLink}}),\n\t * and only if the mouse's position has changed.\n\t * \n\t * <ul>\n\t *     <li>By default (mode=0) this method evaluates all display objects.</li>\n\t *     <li>By setting the `mode` parameter to `1`, the {{#crossLink \"DisplayObject/mouseEnabled:property\"}}{{/crossLink}}\n\t * \t\tand {{#crossLink \"mouseChildren:property\"}}{{/crossLink}} properties will be respected.</li>\n\t * \t   <li>Setting the `mode` to `2` additionally excludes display objects that do not have active mouse event\n\t * \t   \tlisteners or a {{#crossLink \"DisplayObject:cursor:property\"}}{{/crossLink}} property. That is, only objects\n\t * \t   \tthat would normally intercept mouse interaction will be included. This can significantly improve performance\n\t * \t   \tin some cases by reducing the number of display objects that need to be tested.</li>\n\t * </li>\n\t * \n\t * This method accounts for both {{#crossLink \"DisplayObject/hitArea:property\"}}{{/crossLink}} and {{#crossLink \"DisplayObject/mask:property\"}}{{/crossLink}}.\n\t * @method getObjectsUnderPoint\n\t * @param {Number} x The x position in the container to test.\n\t * @param {Number} y The y position in the container to test.\n\t * @param {Number} [mode=0] The mode to use to determine which display objects to include. 0-all, 1-respect mouseEnabled/mouseChildren, 2-only mouse opaque objects.\n\t * @return {Array} An Array of DisplayObjects under the specified coordinates.\n\t **/\n\tp.getObjectsUnderPoint = function(x, y, mode) {\n\t\tvar arr = [];\n\t\tvar pt = this.localToGlobal(x, y);\n\t\tthis._getObjectsUnderPoint(pt.x, pt.y, arr, mode>0, mode==1);\n\t\treturn arr;\n\t};\n\n\t/**\n\t * Similar to {{#crossLink \"Container/getObjectsUnderPoint\"}}{{/crossLink}}, but returns only the top-most display\n\t * object. This runs significantly faster than <code>getObjectsUnderPoint()</code>, but is still potentially an expensive\n\t * operation. See {{#crossLink \"Container/getObjectsUnderPoint\"}}{{/crossLink}} for more information.\n\t * @method getObjectUnderPoint\n\t * @param {Number} x The x position in the container to test.\n\t * @param {Number} y The y position in the container to test.\n\t * @param {Number} mode The mode to use to determine which display objects to include.  0-all, 1-respect mouseEnabled/mouseChildren, 2-only mouse opaque objects.\n\t * @return {DisplayObject} The top-most display object under the specified coordinates.\n\t **/\n\tp.getObjectUnderPoint = function(x, y, mode) {\n\t\tvar pt = this.localToGlobal(x, y);\n\t\treturn this._getObjectsUnderPoint(pt.x, pt.y, null, mode>0, mode==1);\n\t};\n\t\n\t/**\n\t * Docced in superclass.\n\t */\n\tp.getBounds = function() {\n\t\treturn this._getBounds(null, true);\n\t};\n\t\n\t\n\t/**\n\t * Docced in superclass.\n\t */\n\tp.getTransformedBounds = function() {\n\t\treturn this._getBounds();\n\t};\n\n\t/**\n\t * Returns a clone of this Container. Some properties that are specific to this instance's current context are\n\t * reverted to their defaults (for example .parent).\n\t * @method clone\n\t * @param {Boolean} [recursive=false] If true, all of the descendants of this container will be cloned recursively. If false, the\n\t * properties of the container will be cloned, but the new instance will not have any children.\n\t * @return {Container} A clone of the current Container instance.\n\t **/\n\tp.clone = function(recursive) {\n\t\tvar o = this._cloneProps(new Container());\n\t\tif (recursive) { this._cloneChildren(o); }\n\t\treturn o;\n\t};\n\n\t/**\n\t * Returns a string representation of this object.\n\t * @method toString\n\t * @return {String} a string representation of the instance.\n\t **/\n\tp.toString = function() {\n\t\treturn \"[Container (name=\"+  this.name +\")]\";\n\t};\n\n\n// private methods:\n\t/**\n\t * @method _tick\n\t * @param {Object} evtObj An event object that will be dispatched to all tick listeners. This object is reused between dispatchers to reduce construction & GC costs.\n\t * @protected\n\t **/\n\tp._tick = function(evtObj) {\n\t\tif (this.tickChildren) {\n\t\t\tfor (var i=this.children.length-1; i>=0; i--) {\n\t\t\t\tvar child = this.children[i];\n\t\t\t\tif (child.tickEnabled && child._tick) { child._tick(evtObj); }\n\t\t\t}\n\t\t}\n\t\tthis.DisplayObject__tick(evtObj);\n\t};\n\t\n\t/**\n\t * Recursively clones all children of this container, and adds them to the target container.\n\t * @method cloneChildren\n\t * @protected\n\t * @param {Container} o The target container.\n\t **/\n\tp._cloneChildren = function(o) {\n\t\tif (o.children.length) { o.removeAllChildren(); }\n\t\tvar arr = o.children;\n\t\tfor (var i=0, l=this.children.length; i<l; i++) {\n\t\t\tvar clone = this.children[i].clone(true);\n\t\t\tclone.parent = o;\n\t\t\tarr.push(clone);\n\t\t}\n\t};\n\n\t/**\n\t * @method _getObjectsUnderPoint\n\t * @param {Number} x\n\t * @param {Number} y\n\t * @param {Array} arr\n\t * @param {Boolean} mouse If true, it will respect mouse interaction properties like mouseEnabled, mouseChildren, and active listeners.\n\t * @param {Boolean} activeListener If true, there is an active mouse event listener on a parent object.\n\t * @param {Number} currentDepth Indicates the current depth of the search.\n\t * @return {DisplayObject}\n\t * @protected\n\t **/\n\tp._getObjectsUnderPoint = function(x, y, arr, mouse, activeListener, currentDepth) {\n\t\tcurrentDepth = currentDepth || 0;\n\t\tif (!currentDepth && !this._testMask(this, x, y)) { return null; }\n\t\tvar mtx, ctx = createjs.DisplayObject._hitTestContext;\n\t\tactiveListener = activeListener || (mouse&&this._hasMouseEventListener());\n\n\t\t// draw children one at a time, and check if we get a hit:\n\t\tvar children = this.children, l = children.length;\n\t\tfor (var i=l-1; i>=0; i--) {\n\t\t\tvar child = children[i];\n\t\t\tvar hitArea = child.hitArea;\n\t\t\tif (!child.visible || (!hitArea && !child.isVisible()) || (mouse && !child.mouseEnabled)) { continue; }\n\t\t\tif (!hitArea && !this._testMask(child, x, y)) { continue; }\n\t\t\t\n\t\t\t// if a child container has a hitArea then we only need to check its hitArea, so we can treat it as a normal DO:\n\t\t\tif (!hitArea && child instanceof Container) {\n\t\t\t\tvar result = child._getObjectsUnderPoint(x, y, arr, mouse, activeListener, currentDepth+1);\n\t\t\t\tif (!arr && result) { return (mouse && !this.mouseChildren) ? this : result; }\n\t\t\t} else {\n\t\t\t\tif (mouse && !activeListener && !child._hasMouseEventListener()) { continue; }\n\t\t\t\t\n\t\t\t\t// TODO: can we pass displayProps forward, to avoid having to calculate this backwards every time? It's kind of a mixed bag. When we're only hunting for DOs with event listeners, it may not make sense.\n\t\t\t\tvar props = child.getConcatenatedDisplayProps(child._props);\n\t\t\t\tmtx = props.matrix;\n\t\t\t\t\n\t\t\t\tif (hitArea) {\n\t\t\t\t\tmtx.appendMatrix(hitArea.getMatrix(hitArea._props.matrix));\n\t\t\t\t\tprops.alpha = hitArea.alpha;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tctx.globalAlpha = props.alpha;\n\t\t\t\tctx.setTransform(mtx.a,  mtx.b, mtx.c, mtx.d, mtx.tx-x, mtx.ty-y);\n\t\t\t\t(hitArea||child).draw(ctx);\n\t\t\t\tif (!this._testHit(ctx)) { continue; }\n\t\t\t\tctx.setTransform(1, 0, 0, 1, 0, 0);\n\t\t\t\tctx.clearRect(0, 0, 2, 2);\n\t\t\t\tif (arr) { arr.push(child); }\n\t\t\t\telse { return (mouse && !this.mouseChildren) ? this : child; }\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t};\n\t\n\t/**\n\t * @method _testMask\n\t * @param {DisplayObject} target\n\t * @param {Number} x\n\t * @param {Number} y\n\t * @return {Boolean} Indicates whether the x/y is within the masked region.\n\t * @protected\n\t **/\n\tp._testMask = function(target, x, y) {\n\t\tvar mask = target.mask;\n\t\tif (!mask || !mask.graphics || mask.graphics.isEmpty()) { return true; }\n\t\t\n\t\tvar mtx = this._props.matrix, parent = target.parent;\n\t\tmtx = parent ? parent.getConcatenatedMatrix(mtx) : mtx.identity();\n\t\tmtx = mask.getMatrix(mask._props.matrix).prependMatrix(mtx);\n\t\t\n\t\tvar ctx = createjs.DisplayObject._hitTestContext;\n\t\tctx.setTransform(mtx.a,  mtx.b, mtx.c, mtx.d, mtx.tx-x, mtx.ty-y);\n\t\t\n\t\t// draw the mask as a solid fill:\n\t\tmask.graphics.drawAsPath(ctx);\n\t\tctx.fillStyle = \"#000\";\n\t\tctx.fill();\n\t\t\n\t\tif (!this._testHit(ctx)) { return false; }\n\t\tctx.setTransform(1, 0, 0, 1, 0, 0);\n\t\tctx.clearRect(0, 0, 2, 2);\n\t\t\n\t\treturn true;\n\t};\n\t\n\t/**\n\t * @method _getBounds\n\t * @param {Matrix2D} matrix\n\t * @param {Boolean} ignoreTransform If true, does not apply this object's transform.\n\t * @return {Rectangle}\n\t * @protected\n\t **/\n\tp._getBounds = function(matrix, ignoreTransform) {\n\t\tvar bounds = this.DisplayObject_getBounds();\n\t\tif (bounds) { return this._transformBounds(bounds, matrix, ignoreTransform); }\n\t\t\n\t\tvar mtx = this._props.matrix;\n\t\tmtx = ignoreTransform ? mtx.identity() : this.getMatrix(mtx);\n\t\tif (matrix) { mtx.prependMatrix(matrix); }\n\t\t\n\t\tvar l = this.children.length, rect=null;\n\t\tfor (var i=0; i<l; i++) {\n\t\t\tvar child = this.children[i];\n\t\t\tif (!child.visible || !(bounds = child._getBounds(mtx))) { continue; }\n\t\t\tif (rect) { rect.extend(bounds.x, bounds.y, bounds.width, bounds.height); }\n\t\t\telse { rect = bounds.clone(); }\n\t\t}\n\t\treturn rect;\n\t};\n\n\n\tcreatejs.Container = createjs.promote(Container, \"DisplayObject\");\n}());\n\n//##############################################################################\n// Stage.js\n//##############################################################################\n\n(function() {\n\t\"use strict\";\n\n\n// constructor:\n\t/**\n\t * A stage is the root level {{#crossLink \"Container\"}}{{/crossLink}} for a display list. Each time its {{#crossLink \"Stage/tick\"}}{{/crossLink}}\n\t * method is called, it will render its display list to its target canvas.\n\t *\n\t * <h4>Example</h4>\n\t * This example creates a stage, adds a child to it, then uses {{#crossLink \"Ticker\"}}{{/crossLink}} to update the child\n\t * and redraw the stage using {{#crossLink \"Stage/update\"}}{{/crossLink}}.\n\t *\n\t *      var stage = new createjs.Stage(\"canvasElementId\");\n\t *      var image = new createjs.Bitmap(\"imagePath.png\");\n\t *      stage.addChild(image);\n\t *      createjs.Ticker.addEventListener(\"tick\", handleTick);\n\t *      function handleTick(event) {\n\t *          image.x += 10;\n\t *          stage.update();\n\t *      }\n\t *\n\t * @class Stage\n\t * @extends Container\n\t * @constructor\n\t * @param {HTMLCanvasElement | String | Object} canvas A canvas object that the Stage will render to, or the string id\n\t * of a canvas object in the current document.\n\t **/\n\tfunction Stage(canvas) {\n\t\tthis.Container_constructor();\n\t\n\t\n\t// public properties:\n\t\t/**\n\t\t * Indicates whether the stage should automatically clear the canvas before each render. You can set this to <code>false</code>\n\t\t * to manually control clearing (for generative art, or when pointing multiple stages at the same canvas for\n\t\t * example).\n\t\t *\n\t\t * <h4>Example</h4>\n\t\t *\n\t\t *      var stage = new createjs.Stage(\"canvasId\");\n\t\t *      stage.autoClear = false;\n\t\t *\n\t\t * @property autoClear\n\t\t * @type Boolean\n\t\t * @default true\n\t\t **/\n\t\tthis.autoClear = true;\n\t\n\t\t/**\n\t\t * The canvas the stage will render to. Multiple stages can share a single canvas, but you must disable autoClear for all but the\n\t\t * first stage that will be ticked (or they will clear each other's render).\n\t\t *\n\t\t * When changing the canvas property you must disable the events on the old canvas, and enable events on the\n\t\t * new canvas or mouse events will not work as expected. For example:\n\t\t *\n\t\t *      myStage.enableDOMEvents(false);\n\t\t *      myStage.canvas = anotherCanvas;\n\t\t *      myStage.enableDOMEvents(true);\n\t\t *\n\t\t * @property canvas\n\t\t * @type HTMLCanvasElement | Object\n\t\t **/\n\t\tthis.canvas = (typeof canvas == \"string\") ? document.getElementById(canvas) : canvas;\n\t\n\t\t/**\n\t\t * The current mouse X position on the canvas. If the mouse leaves the canvas, this will indicate the most recent\n\t\t * position over the canvas, and mouseInBounds will be set to false.\n\t\t * @property mouseX\n\t\t * @type Number\n\t\t * @readonly\n\t\t **/\n\t\tthis.mouseX = 0;\n\t\n\t\t/**\n\t\t * The current mouse Y position on the canvas. If the mouse leaves the canvas, this will indicate the most recent\n\t\t * position over the canvas, and mouseInBounds will be set to false.\n\t\t * @property mouseY\n\t\t * @type Number\n\t\t * @readonly\n\t\t **/\n\t\tthis.mouseY = 0;\n\t\n\t\t/**\n\t\t * Specifies the area of the stage to affect when calling update. This can be use to selectively\n\t\t * re-draw specific regions of the canvas. If null, the whole canvas area is drawn.\n\t\t * @property drawRect\n\t\t * @type {Rectangle}\n\t\t */\n\t\tthis.drawRect = null;\n\t\n\t\t/**\n\t\t * Indicates whether display objects should be rendered on whole pixels. You can set the\n\t\t * {{#crossLink \"DisplayObject/snapToPixel\"}}{{/crossLink}} property of\n\t\t * display objects to false to enable/disable this behaviour on a per instance basis.\n\t\t * @property snapToPixelEnabled\n\t\t * @type Boolean\n\t\t * @default false\n\t\t **/\n\t\tthis.snapToPixelEnabled = false;\n\t\n\t\t/**\n\t\t * Indicates whether the mouse is currently within the bounds of the canvas.\n\t\t * @property mouseInBounds\n\t\t * @type Boolean\n\t\t * @default false\n\t\t **/\n\t\tthis.mouseInBounds = false;\n\t\n\t\t/**\n\t\t * If true, tick callbacks will be called on all display objects on the stage prior to rendering to the canvas.\n\t\t * @property tickOnUpdate\n\t\t * @type Boolean\n\t\t * @default true\n\t\t **/\n\t\tthis.tickOnUpdate = true;\n\t\n\t\t/**\n\t\t * If true, mouse move events will continue to be called when the mouse leaves the target canvas. See\n\t\t * {{#crossLink \"Stage/mouseInBounds:property\"}}{{/crossLink}}, and {{#crossLink \"MouseEvent\"}}{{/crossLink}}\n\t\t * x/y/rawX/rawY.\n\t\t * @property mouseMoveOutside\n\t\t * @type Boolean\n\t\t * @default false\n\t\t **/\n\t\tthis.mouseMoveOutside = false;\n\t\t\n\t\t\n\t\t/**\n\t\t * Prevents selection of other elements in the html page if the user clicks and drags, or double clicks on the canvas.\n\t\t * This works by calling `preventDefault()` on any mousedown events (or touch equivalent) originating on the canvas.\n\t\t * @property preventSelection\n\t\t * @type Boolean\n\t\t * @default true\n\t\t **/\n\t\tthis.preventSelection = true;\n\t\n\t\t/**\n\t\t * The hitArea property is not supported for Stage.\n\t\t * @property hitArea\n\t\t * @type {DisplayObject}\n\t\t * @default null\n\t\t */\n\t\t \n\t\t \n\t// private properties:\n\t\t/**\n\t\t * Holds objects with data for each active pointer id. Each object has the following properties:\n\t\t * x, y, event, target, overTarget, overX, overY, inBounds, posEvtObj (native event that last updated position)\n\t\t * @property _pointerData\n\t\t * @type {Object}\n\t\t * @private\n\t\t */\n\t\tthis._pointerData = {};\n\t\n\t\t/**\n\t\t * Number of active pointers.\n\t\t * @property _pointerCount\n\t\t * @type {Object}\n\t\t * @private\n\t\t */\n\t\tthis._pointerCount = 0;\n\t\n\t\t/**\n\t\t * The ID of the primary pointer.\n\t\t * @property _primaryPointerID\n\t\t * @type {Object}\n\t\t * @private\n\t\t */\n\t\tthis._primaryPointerID = null;\n\t\n\t\t/**\n\t\t * @property _mouseOverIntervalID\n\t\t * @protected\n\t\t * @type Number\n\t\t **/\n\t\tthis._mouseOverIntervalID = null;\n\t\t\n\t\t/**\n\t\t * @property _nextStage\n\t\t * @protected\n\t\t * @type Stage\n\t\t **/\n\t\tthis._nextStage = null;\n\t\t\n\t\t/**\n\t\t * @property _prevStage\n\t\t * @protected\n\t\t * @type Stage\n\t\t **/\n\t\tthis._prevStage = null;\n\t\t\n\t\t\n\t// initialize:\n\t\tthis.enableDOMEvents(true);\n\t}\n\tvar p = createjs.extend(Stage, createjs.Container);\n\n\t/**\n\t * <strong>REMOVED</strong>. Removed in favor of using `MySuperClass_constructor`.\n\t * See {{#crossLink \"Utility Methods/extend\"}}{{/crossLink}} and {{#crossLink \"Utility Methods/promote\"}}{{/crossLink}}\n\t * for details.\n\t *\n\t * There is an inheritance tutorial distributed with EaselJS in /tutorials/Inheritance.\n\t *\n\t * @method initialize\n\t * @protected\n\t * @deprecated\n\t */\n\t// p.initialize = function() {}; // searchable for devs wondering where it is.\n\n\n// events:\n\t/**\n\t * Dispatched when the user moves the mouse over the canvas.\n\t * See the {{#crossLink \"MouseEvent\"}}{{/crossLink}} class for a listing of event properties.\n\t * @event stagemousemove\n\t * @since 0.6.0\n\t */\n\n\t/**\n\t * Dispatched when the user presses their left mouse button on the canvas. See the {{#crossLink \"MouseEvent\"}}{{/crossLink}}\n\t * class for a listing of event properties.\n\t * @event stagemousedown\n\t * @since 0.6.0\n\t */\n\n\t/**\n\t * Dispatched when the user the user presses somewhere on the stage, then releases the mouse button anywhere that the page can detect it (this varies slightly between browsers).\n\t * You can use {{#crossLink \"Stage/mouseInBounds:property\"}}{{/crossLink}} to check whether the mouse is currently within the stage bounds.\n\t * See the {{#crossLink \"MouseEvent\"}}{{/crossLink}} class for a listing of event properties.\n\t * @event stagemouseup\n\t * @since 0.6.0\n\t */\n\n\t/**\n\t * Dispatched when the mouse moves from within the canvas area (mouseInBounds == true) to outside it (mouseInBounds == false).\n\t * This is currently only dispatched for mouse input (not touch). See the {{#crossLink \"MouseEvent\"}}{{/crossLink}}\n\t * class for a listing of event properties.\n\t * @event mouseleave\n\t * @since 0.7.0\n\t */\n\n\t/**\n\t * Dispatched when the mouse moves into the canvas area (mouseInBounds == false) from outside it (mouseInBounds == true).\n\t * This is currently only dispatched for mouse input (not touch). See the {{#crossLink \"MouseEvent\"}}{{/crossLink}}\n\t * class for a listing of event properties.\n\t * @event mouseenter\n\t * @since 0.7.0\n\t */\n\t \n\t/**\n\t * Dispatched each update immediately before the tick event is propagated through the display list.\n\t * You can call preventDefault on the event object to cancel propagating the tick event.\n\t * @event tickstart\n\t * @since 0.7.0\n\t */\n\t \n\t/**\n\t * Dispatched each update immediately after the tick event is propagated through the display list. Does not fire if\n\t * tickOnUpdate is false. Precedes the \"drawstart\" event.\n\t * @event tickend\n\t * @since 0.7.0\n\t */\n\t \n\t/**\n\t * Dispatched each update immediately before the canvas is cleared and the display list is drawn to it.\n\t * You can call preventDefault on the event object to cancel the draw.\n\t * @event drawstart\n\t * @since 0.7.0\n\t */\n\t \n\t/**\n\t * Dispatched each update immediately after the display list is drawn to the canvas and the canvas context is restored.\n\t * @event drawend\n\t * @since 0.7.0\n\t */\n\n\t \n// getter / setters:\n\t/**\n\t * Specifies a target stage that will have mouse / touch interactions relayed to it after this stage handles them.\n\t * This can be useful in cases where you have multiple layered canvases and want user interactions\n\t * events to pass through. For example, this would relay mouse events from topStage to bottomStage:\n\t *\n\t *      topStage.nextStage = bottomStage;\n\t *\n\t * To disable relaying, set nextStage to null.\n\t * \n\t * MouseOver, MouseOut, RollOver, and RollOut interactions are also passed through using the mouse over settings\n\t * of the top-most stage, but are only processed if the target stage has mouse over interactions enabled.\n\t * Considerations when using roll over in relay targets:<OL>\n\t * <LI> The top-most (first) stage must have mouse over interactions enabled (via enableMouseOver)</LI>\n\t * <LI> All stages that wish to participate in mouse over interaction must enable them via enableMouseOver</LI>\n\t * <LI> All relay targets will share the frequency value of the top-most stage</LI>\n\t * </OL>\n\t * To illustrate, in this example the targetStage would process mouse over interactions at 10hz (despite passing\n\t * 30 as it's desired frequency):\n\t * \ttopStage.nextStage = targetStage;\n\t * \ttopStage.enableMouseOver(10);\n\t * \ttargetStage.enableMouseOver(30);\n\t * \n\t * If the target stage's canvas is completely covered by this stage's canvas, you may also want to disable its\n\t * DOM events using:\n\t * \n\t *\ttargetStage.enableDOMEvents(false);\n\t * \n\t * @property nextStage\n\t * @type {Stage}\n\t **/\n\tp._get_nextStage = function() {\n\t\treturn this._nextStage;\n\t};\n\tp._set_nextStage = function(value) {\n\t\tif (this._nextStage) { this._nextStage._prevStage = null; }\n\t\tif (value) { value._prevStage = this; }\n\t\tthis._nextStage = value;\n\t};\n\t\n\ttry {\n\t\tObject.defineProperties(p, {\n\t\t\tnextStage: { get: p._get_nextStage, set: p._set_nextStage }\n\t\t});\n\t} catch (e) {} // TODO: use Log\n\n\n// public methods:\n\t/**\n\t * Each time the update method is called, the stage will call {{#crossLink \"Stage/tick\"}}{{/crossLink}}\n\t * unless {{#crossLink \"Stage/tickOnUpdate:property\"}}{{/crossLink}} is set to false,\n\t * and then render the display list to the canvas.\n\t *\n\t * @method update\n\t * @param {Object} [props] Props object to pass to `tick()`. Should usually be a {{#crossLink \"Ticker\"}}{{/crossLink}} event object, or similar object with a delta property.\n\t **/\n\tp.update = function(props) {\n\t\tif (!this.canvas) { return; }\n\t\tif (this.tickOnUpdate) { this.tick(props); }\n\t\tif (this.dispatchEvent(\"drawstart\", false, true) === false) { return; }\n\t\tcreatejs.DisplayObject._snapToPixelEnabled = this.snapToPixelEnabled;\n\t\tvar r = this.drawRect, ctx = this.canvas.getContext(\"2d\");\n\t\tctx.setTransform(1, 0, 0, 1, 0, 0);\n\t\tif (this.autoClear) {\n\t\t\tif (r) { ctx.clearRect(r.x, r.y, r.width, r.height); }\n\t\t\telse { ctx.clearRect(0, 0, this.canvas.width+1, this.canvas.height+1); }\n\t\t}\n\t\tctx.save();\n\t\tif (this.drawRect) {\n\t\t\tctx.beginPath();\n\t\t\tctx.rect(r.x, r.y, r.width, r.height);\n\t\t\tctx.clip();\n\t\t}\n\t\tthis.updateContext(ctx);\n\t\tthis.draw(ctx, false);\n\t\tctx.restore();\n\t\tthis.dispatchEvent(\"drawend\");\n\t};\n\t\n\t/**\n\t * Propagates a tick event through the display list. This is automatically called by {{#crossLink \"Stage/update\"}}{{/crossLink}}\n\t * unless {{#crossLink \"Stage/tickOnUpdate:property\"}}{{/crossLink}} is set to false.\n\t *\n\t * If a props object is passed to `tick()`, then all of its properties will be copied to the event object that is\n\t * propagated to listeners.\n\t *\n\t * Some time-based features in EaselJS (for example {{#crossLink \"Sprite/framerate\"}}{{/crossLink}} require that\n\t * a {{#crossLink \"Ticker/tick:event\"}}{{/crossLink}} event object (or equivalent object with a delta property) be\n\t * passed as the `props` parameter to `tick()`. For example:\n\t *\n\t * \tTicker.on(\"tick\", handleTick);\n\t * \tfunction handleTick(evtObj) {\n\t * \t\t// clone the event object from Ticker, and add some custom data to it:\n\t * \t\tvar evt = evtObj.clone().set({greeting:\"hello\", name:\"world\"});\n\t * \t\t\n\t * \t\t// pass it to stage.update():\n\t * \t\tmyStage.update(evt); // subsequently calls tick() with the same param\n\t * \t}\n\t * \t\n\t * \t// ...\n\t * \tmyDisplayObject.on(\"tick\", handleDisplayObjectTick);\n\t * \tfunction handleDisplayObjectTick(evt) {\n\t * \t\tconsole.log(evt.delta); // the delta property from the Ticker tick event object\n\t * \t\tconsole.log(evt.greeting, evt.name); // custom data: \"hello world\"\n\t * \t}\n\t * \n\t * @method tick\n\t * @param {Object} [props] An object with properties that should be copied to the event object. Should usually be a Ticker event object, or similar object with a delta property.\n\t **/\n\tp.tick = function(props) {\n\t\tif (!this.tickEnabled || this.dispatchEvent(\"tickstart\", false, true) === false) { return; }\n\t\tvar evtObj = new createjs.Event(\"tick\");\n\t\tif (props) {\n\t\t\tfor (var n in props) {\n\t\t\t\tif (props.hasOwnProperty(n)) { evtObj[n] = props[n]; }\n\t\t\t}\n\t\t}\n\t\tthis._tick(evtObj);\n\t\tthis.dispatchEvent(\"tickend\");\n\t};\n\n\t/**\n\t * Default event handler that calls the Stage {{#crossLink \"Stage/update\"}}{{/crossLink}} method when a {{#crossLink \"DisplayObject/tick:event\"}}{{/crossLink}}\n\t * event is received. This allows you to register a Stage instance as a event listener on {{#crossLink \"Ticker\"}}{{/crossLink}}\n\t * directly, using:\n\t *\n\t *      Ticker.addEventListener(\"tick\", myStage\");\n\t *\n\t * Note that if you subscribe to ticks using this pattern, then the tick event object will be passed through to\n\t * display object tick handlers, instead of <code>delta</code> and <code>paused</code> parameters.\n\t * @property handleEvent\n\t * @type Function\n\t **/\n\tp.handleEvent = function(evt) {\n\t\tif (evt.type == \"tick\") { this.update(evt); }\n\t};\n\n\t/**\n\t * Clears the target canvas. Useful if {{#crossLink \"Stage/autoClear:property\"}}{{/crossLink}} is set to `false`.\n\t * @method clear\n\t **/\n\tp.clear = function() {\n\t\tif (!this.canvas) { return; }\n\t\tvar ctx = this.canvas.getContext(\"2d\");\n\t\tctx.setTransform(1, 0, 0, 1, 0, 0);\n\t\tctx.clearRect(0, 0, this.canvas.width+1, this.canvas.height+1);\n\t};\n\n\t/**\n\t * Returns a data url that contains a Base64-encoded image of the contents of the stage. The returned data url can\n\t * be specified as the src value of an image element.\n\t * @method toDataURL\n\t * @param {String} [backgroundColor] The background color to be used for the generated image. Any valid CSS color\n\t * value is allowed. The default value is a transparent background.\n\t * @param {String} [mimeType=\"image/png\"] The MIME type of the image format to be create. The default is \"image/png\". If an unknown MIME type\n\t * is passed in, or if the browser does not support the specified MIME type, the default value will be used.\n\t * @return {String} a Base64 encoded image.\n\t **/\n\tp.toDataURL = function(backgroundColor, mimeType) {\n\t\tvar data, ctx = this.canvas.getContext('2d'), w = this.canvas.width, h = this.canvas.height;\n\n\t\tif (backgroundColor) {\n\t\t\tdata = ctx.getImageData(0, 0, w, h);\n\t\t\tvar compositeOperation = ctx.globalCompositeOperation;\n\t\t\tctx.globalCompositeOperation = \"destination-over\";\n\t\t\t\n\t\t\tctx.fillStyle = backgroundColor;\n\t\t\tctx.fillRect(0, 0, w, h);\n\t\t}\n\n\t\tvar dataURL = this.canvas.toDataURL(mimeType||\"image/png\");\n\n\t\tif(backgroundColor) {\n\t\t\tctx.putImageData(data, 0, 0);\n\t\t\tctx.globalCompositeOperation = compositeOperation;\n\t\t}\n\n\t\treturn dataURL;\n\t};\n\n\t/**\n\t * Enables or disables (by passing a frequency of 0) mouse over ({{#crossLink \"DisplayObject/mouseover:event\"}}{{/crossLink}}\n\t * and {{#crossLink \"DisplayObject/mouseout:event\"}}{{/crossLink}}) and roll over events ({{#crossLink \"DisplayObject/rollover:event\"}}{{/crossLink}}\n\t * and {{#crossLink \"DisplayObject/rollout:event\"}}{{/crossLink}}) for this stage's display list. These events can\n\t * be expensive to generate, so they are disabled by default. The frequency of the events can be controlled\n\t * independently of mouse move events via the optional `frequency` parameter.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      var stage = new createjs.Stage(\"canvasId\");\n\t *      stage.enableMouseOver(10); // 10 updates per second\n\t *\n\t * @method enableMouseOver\n\t * @param {Number} [frequency=20] Optional param specifying the maximum number of times per second to broadcast\n\t * mouse over/out events. Set to 0 to disable mouse over events completely. Maximum is 50. A lower frequency is less\n\t * responsive, but uses less CPU.\n\t **/\n\tp.enableMouseOver = function(frequency) {\n\t\tif (this._mouseOverIntervalID) {\n\t\t\tclearInterval(this._mouseOverIntervalID);\n\t\t\tthis._mouseOverIntervalID = null;\n\t\t\tif (frequency == 0) {\n\t\t\t\tthis._testMouseOver(true);\n\t\t\t}\n\t\t}\n\t\tif (frequency == null) { frequency = 20; }\n\t\telse if (frequency <= 0) { return; }\n\t\tvar o = this;\n\t\tthis._mouseOverIntervalID = setInterval(function(){ o._testMouseOver(); }, 1000/Math.min(50,frequency));\n\t};\n\n\t/**\n\t * Enables or disables the event listeners that stage adds to DOM elements (window, document and canvas). It is good\n\t * practice to disable events when disposing of a Stage instance, otherwise the stage will continue to receive\n\t * events from the page.\n\t *\n\t * When changing the canvas property you must disable the events on the old canvas, and enable events on the\n\t * new canvas or mouse events will not work as expected. For example:\n\t *\n\t *      myStage.enableDOMEvents(false);\n\t *      myStage.canvas = anotherCanvas;\n\t *      myStage.enableDOMEvents(true);\n\t *\n\t * @method enableDOMEvents\n\t * @param {Boolean} [enable=true] Indicates whether to enable or disable the events. Default is true.\n\t **/\n\tp.enableDOMEvents = function(enable) {\n\t\tif (enable == null) { enable = true; }\n\t\tvar n, o, ls = this._eventListeners;\n\t\tif (!enable && ls) {\n\t\t\tfor (n in ls) {\n\t\t\t\to = ls[n];\n\t\t\t\to.t.removeEventListener(n, o.f, false);\n\t\t\t}\n\t\t\tthis._eventListeners = null;\n\t\t} else if (enable && !ls && this.canvas) {\n\t\t\tvar t = window.addEventListener ? window : document;\n\t\t\tvar _this = this;\n\t\t\tls = this._eventListeners = {};\n\t\t\tls[\"mouseup\"] = {t:t, f:function(e) { _this._handleMouseUp(e)} };\n\t\t\tls[\"mousemove\"] = {t:t, f:function(e) { _this._handleMouseMove(e)} };\n\t\t\tls[\"dblclick\"] = {t:this.canvas, f:function(e) { _this._handleDoubleClick(e)} };\n\t\t\tls[\"mousedown\"] = {t:this.canvas, f:function(e) { _this._handleMouseDown(e)} };\n\n\t\t\tfor (n in ls) {\n\t\t\t\to = ls[n];\n\t\t\t\to.t.addEventListener(n, o.f, false);\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t * Stage instances cannot be cloned.\n\t * @method clone\n\t **/\n\tp.clone = function() {\n\t\tthrow(\"Stage cannot be cloned.\");\n\t};\n\n\t/**\n\t * Returns a string representation of this object.\n\t * @method toString\n\t * @return {String} a string representation of the instance.\n\t **/\n\tp.toString = function() {\n\t\treturn \"[Stage (name=\"+  this.name +\")]\";\n\t};\n\n\n// private methods:\n\t/**\n\t * @method _getElementRect\n\t * @protected\n\t * @param {HTMLElement} e\n\t **/\n\tp._getElementRect = function(e) {\n\t\tvar bounds;\n\t\ttry { bounds = e.getBoundingClientRect(); } // this can fail on disconnected DOM elements in IE9\n\t\tcatch (err) { bounds = {top: e.offsetTop, left: e.offsetLeft, width:e.offsetWidth, height:e.offsetHeight}; }\n\n\t\tvar offX = (window.pageXOffset || document.scrollLeft || 0) - (document.clientLeft || document.body.clientLeft || 0);\n\t\tvar offY = (window.pageYOffset || document.scrollTop || 0) - (document.clientTop  || document.body.clientTop  || 0);\n\n\t\tvar styles = window.getComputedStyle ? getComputedStyle(e,null) : e.currentStyle; // IE <9 compatibility.\n\t\tvar padL = parseInt(styles.paddingLeft)+parseInt(styles.borderLeftWidth);\n\t\tvar padT = parseInt(styles.paddingTop)+parseInt(styles.borderTopWidth);\n\t\tvar padR = parseInt(styles.paddingRight)+parseInt(styles.borderRightWidth);\n\t\tvar padB = parseInt(styles.paddingBottom)+parseInt(styles.borderBottomWidth);\n\n\t\t// note: in some browsers bounds properties are read only.\n\t\treturn {\n\t\t\tleft: bounds.left+offX+padL,\n\t\t\tright: bounds.right+offX-padR,\n\t\t\ttop: bounds.top+offY+padT,\n\t\t\tbottom: bounds.bottom+offY-padB\n\t\t}\n\t};\n\n\t/**\n\t * @method _getPointerData\n\t * @protected\n\t * @param {Number} id\n\t **/\n\tp._getPointerData = function(id) {\n\t\tvar data = this._pointerData[id];\n\t\tif (!data) { data = this._pointerData[id] = {x:0,y:0}; }\n\t\treturn data;\n\t};\n\n\t/**\n\t * @method _handleMouseMove\n\t * @protected\n\t * @param {MouseEvent} e\n\t **/\n\tp._handleMouseMove = function(e) {\n\t\tif(!e){ e = window.event; }\n\t\tthis._handlePointerMove(-1, e, e.pageX, e.pageY);\n\t};\n\n\t/**\n\t * @method _handlePointerMove\n\t * @protected\n\t * @param {Number} id\n\t * @param {Event} e\n\t * @param {Number} pageX\n\t * @param {Number} pageY\n\t * @param {Stage} owner Indicates that the event has already been captured & handled by the indicated stage.\n\t **/\n\tp._handlePointerMove = function(id, e, pageX, pageY, owner) {\n\t\tif (this._prevStage && owner === undefined) { return; } // redundant listener.\n\t\tif (!this.canvas) { return; }\n\t\tvar nextStage=this._nextStage, o=this._getPointerData(id);\n\n\t\tvar inBounds = o.inBounds;\n\t\tthis._updatePointerPosition(id, e, pageX, pageY);\n\t\tif (inBounds || o.inBounds || this.mouseMoveOutside) {\n\t\t\tif (id === -1 && o.inBounds == !inBounds) {\n\t\t\t\tthis._dispatchMouseEvent(this, (inBounds ? \"mouseleave\" : \"mouseenter\"), false, id, o, e);\n\t\t\t}\n\t\t\t\n\t\t\tthis._dispatchMouseEvent(this, \"stagemousemove\", false, id, o, e);\n\t\t\tthis._dispatchMouseEvent(o.target, \"pressmove\", true, id, o, e);\n\t\t}\n\t\t\n\t\tnextStage&&nextStage._handlePointerMove(id, e, pageX, pageY, null);\n\t};\n\n\t/**\n\t * @method _updatePointerPosition\n\t * @protected\n\t * @param {Number} id\n\t * @param {Event} e\n\t * @param {Number} pageX\n\t * @param {Number} pageY\n\t **/\n\tp._updatePointerPosition = function(id, e, pageX, pageY) {\n\t\tvar rect = this._getElementRect(this.canvas);\n\t\tpageX -= rect.left;\n\t\tpageY -= rect.top;\n\n\t\tvar w = this.canvas.width;\n\t\tvar h = this.canvas.height;\n\t\tpageX /= (rect.right-rect.left)/w;\n\t\tpageY /= (rect.bottom-rect.top)/h;\n\t\tvar o = this._getPointerData(id);\n\t\tif (o.inBounds = (pageX >= 0 && pageY >= 0 && pageX <= w-1 && pageY <= h-1)) {\n\t\t\to.x = pageX;\n\t\t\to.y = pageY;\n\t\t} else if (this.mouseMoveOutside) {\n\t\t\to.x = pageX < 0 ? 0 : (pageX > w-1 ? w-1 : pageX);\n\t\t\to.y = pageY < 0 ? 0 : (pageY > h-1 ? h-1 : pageY);\n\t\t}\n\n\t\to.posEvtObj = e;\n\t\to.rawX = pageX;\n\t\to.rawY = pageY;\n\n\t\tif (id === this._primaryPointerID || id === -1) {\n\t\t\tthis.mouseX = o.x;\n\t\t\tthis.mouseY = o.y;\n\t\t\tthis.mouseInBounds = o.inBounds;\n\t\t}\n\t};\n\n\t/**\n\t * @method _handleMouseUp\n\t * @protected\n\t * @param {MouseEvent} e\n\t **/\n\tp._handleMouseUp = function(e) {\n\t\tthis._handlePointerUp(-1, e, false);\n\t};\n\n\t/**\n\t * @method _handlePointerUp\n\t * @protected\n\t * @param {Number} id\n\t * @param {Event} e\n\t * @param {Boolean} clear\n\t * @param {Stage} owner Indicates that the event has already been captured & handled by the indicated stage.\n\t **/\n\tp._handlePointerUp = function(id, e, clear, owner) {\n\t\tvar nextStage = this._nextStage, o = this._getPointerData(id);\n\t\tif (this._prevStage && owner === undefined) { return; } // redundant listener.\n\t\t\n\t\tvar target=null, oTarget = o.target;\n\t\tif (!owner && (oTarget || nextStage)) { target = this._getObjectsUnderPoint(o.x, o.y, null, true); }\n\t\t\n\t\tif (o.down) { this._dispatchMouseEvent(this, \"stagemouseup\", false, id, o, e, target); o.down = false; }\n\t\t\n\t\tif (target == oTarget) { this._dispatchMouseEvent(oTarget, \"click\", true, id, o, e); }\n\t\tthis._dispatchMouseEvent(oTarget, \"pressup\", true, id, o, e);\n\t\t\n\t\tif (clear) {\n\t\t\tif (id==this._primaryPointerID) { this._primaryPointerID = null; }\n\t\t\tdelete(this._pointerData[id]);\n\t\t} else { o.target = null; }\n\t\t\n\t\tnextStage&&nextStage._handlePointerUp(id, e, clear, owner || target && this);\n\t};\n\n\t/**\n\t * @method _handleMouseDown\n\t * @protected\n\t * @param {MouseEvent} e\n\t **/\n\tp._handleMouseDown = function(e) {\n\t\tthis._handlePointerDown(-1, e, e.pageX, e.pageY);\n\t};\n\n\t/**\n\t * @method _handlePointerDown\n\t * @protected\n\t * @param {Number} id\n\t * @param {Event} e\n\t * @param {Number} pageX\n\t * @param {Number} pageY\n\t * @param {Stage} owner Indicates that the event has already been captured & handled by the indicated stage.\n\t **/\n\tp._handlePointerDown = function(id, e, pageX, pageY, owner) {\n\t\tif (this.preventSelection) { e.preventDefault(); }\n\t\tif (this._primaryPointerID == null || id === -1) { this._primaryPointerID = id; } // mouse always takes over.\n\t\t\n\t\tif (pageY != null) { this._updatePointerPosition(id, e, pageX, pageY); }\n\t\tvar target = null, nextStage = this._nextStage, o = this._getPointerData(id);\n\t\tif (!owner) { target = o.target = this._getObjectsUnderPoint(o.x, o.y, null, true); }\n\n\t\tif (o.inBounds) { this._dispatchMouseEvent(this, \"stagemousedown\", false, id, o, e, target); o.down = true; }\n\t\tthis._dispatchMouseEvent(target, \"mousedown\", true, id, o, e);\n\t\t\n\t\tnextStage&&nextStage._handlePointerDown(id, e, pageX, pageY, owner || target && this);\n\t};\n\n\t/**\n\t * @method _testMouseOver\n\t * @param {Boolean} clear If true, clears the mouseover / rollover (ie. no target)\n\t * @param {Stage} owner Indicates that the event has already been captured & handled by the indicated stage.\n\t * @param {Stage} eventTarget The stage that the cursor is actively over.\n\t * @protected\n\t **/\n\tp._testMouseOver = function(clear, owner, eventTarget) {\n\t\tif (this._prevStage && owner === undefined) { return; } // redundant listener.\n\t\t\n\t\tvar nextStage = this._nextStage;\n\t\tif (!this._mouseOverIntervalID) {\n\t\t\t// not enabled for mouseover, but should still relay the event.\n\t\t\tnextStage&&nextStage._testMouseOver(clear, owner, eventTarget);\n\t\t\treturn;\n\t\t}\n\t\tvar o = this._getPointerData(-1);\n\t\t// only update if the mouse position has changed. This provides a lot of optimization, but has some trade-offs.\n\t\tif (!o || (!clear && this.mouseX == this._mouseOverX && this.mouseY == this._mouseOverY && this.mouseInBounds)) { return; }\n\t\t\n\t\tvar e = o.posEvtObj;\n\t\tvar isEventTarget = eventTarget || e&&(e.target == this.canvas);\n\t\tvar target=null, common = -1, cursor=\"\", t, i, l;\n\t\t\n\t\tif (!owner && (clear || this.mouseInBounds && isEventTarget)) {\n\t\t\ttarget = this._getObjectsUnderPoint(this.mouseX, this.mouseY, null, true);\n\t\t\tthis._mouseOverX = this.mouseX;\n\t\t\tthis._mouseOverY = this.mouseY;\n\t\t}\n\n\t\tvar oldList = this._mouseOverTarget||[];\n\t\tvar oldTarget = oldList[oldList.length-1];\n\t\tvar list = this._mouseOverTarget = [];\n\n\t\t// generate ancestor list and check for cursor:\n\t\tt = target;\n\t\twhile (t) {\n\t\t\tlist.unshift(t);\n\t\t\tif (!cursor) { cursor = t.cursor; }\n\t\t\tt = t.parent;\n\t\t}\n\t\tthis.canvas.style.cursor = cursor;\n\t\tif (!owner && eventTarget) { eventTarget.canvas.style.cursor = cursor; }\n\n\t\t// find common ancestor:\n\t\tfor (i=0,l=list.length; i<l; i++) {\n\t\t\tif (list[i] != oldList[i]) { break; }\n\t\t\tcommon = i;\n\t\t}\n\n\t\tif (oldTarget != target) {\n\t\t\tthis._dispatchMouseEvent(oldTarget, \"mouseout\", true, -1, o, e, target);\n\t\t}\n\n\t\tfor (i=oldList.length-1; i>common; i--) {\n\t\t\tthis._dispatchMouseEvent(oldList[i], \"rollout\", false, -1, o, e, target);\n\t\t}\n\n\t\tfor (i=list.length-1; i>common; i--) {\n\t\t\tthis._dispatchMouseEvent(list[i], \"rollover\", false, -1, o, e, oldTarget);\n\t\t}\n\n\t\tif (oldTarget != target) {\n\t\t\tthis._dispatchMouseEvent(target, \"mouseover\", true, -1, o, e, oldTarget);\n\t\t}\n\t\t\n\t\tnextStage&&nextStage._testMouseOver(clear, owner || target && this, eventTarget || isEventTarget && this);\n\t};\n\n\t/**\n\t * @method _handleDoubleClick\n\t * @protected\n\t * @param {MouseEvent} e\n\t * @param {Stage} owner Indicates that the event has already been captured & handled by the indicated stage.\n\t **/\n\tp._handleDoubleClick = function(e, owner) {\n\t\tvar target=null, nextStage=this._nextStage, o=this._getPointerData(-1);\n\t\tif (!owner) {\n\t\t\ttarget = this._getObjectsUnderPoint(o.x, o.y, null, true);\n\t\t\tthis._dispatchMouseEvent(target, \"dblclick\", true, -1, o, e);\n\t\t}\n\t\tnextStage&&nextStage._handleDoubleClick(e, owner || target && this);\n\t};\n\n\t/**\n\t * @method _dispatchMouseEvent\n\t * @protected\n\t * @param {DisplayObject} target\n\t * @param {String} type\n\t * @param {Boolean} bubbles\n\t * @param {Number} pointerId\n\t * @param {Object} o\n\t * @param {MouseEvent} [nativeEvent]\n\t * @param {DisplayObject} [relatedTarget]\n\t **/\n\tp._dispatchMouseEvent = function(target, type, bubbles, pointerId, o, nativeEvent, relatedTarget) {\n\t\t// TODO: might be worth either reusing MouseEvent instances, or adding a willTrigger method to avoid GC.\n\t\tif (!target || (!bubbles && !target.hasEventListener(type))) { return; }\n\t\t/*\n\t\t// TODO: account for stage transformations?\n\t\tthis._mtx = this.getConcatenatedMatrix(this._mtx).invert();\n\t\tvar pt = this._mtx.transformPoint(o.x, o.y);\n\t\tvar evt = new createjs.MouseEvent(type, bubbles, false, pt.x, pt.y, nativeEvent, pointerId, pointerId==this._primaryPointerID || pointerId==-1, o.rawX, o.rawY);\n\t\t*/\n\t\tvar evt = new createjs.MouseEvent(type, bubbles, false, o.x, o.y, nativeEvent, pointerId, pointerId === this._primaryPointerID || pointerId === -1, o.rawX, o.rawY, relatedTarget);\n\t\ttarget.dispatchEvent(evt);\n\t};\n\n\n\tcreatejs.Stage = createjs.promote(Stage, \"Container\");\n}());\n\n//##############################################################################\n// Bitmap.js\n//##############################################################################\n\n(function() {\n\t\n\t/**\n\t * A Bitmap represents an Image, Canvas, or Video in the display list. A Bitmap can be instantiated using an existing\n\t * HTML element, or a string.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      var bitmap = new createjs.Bitmap(\"imagePath.jpg\");\n\t *\n\t * <strong>Notes:</strong>\n\t * <ol>\n\t *     <li>When a string path or image tag that is not yet loaded is used, the stage may need to be redrawn before it\n\t *      will be displayed.</li>\n\t *     <li>Bitmaps with an SVG source currently will not respect an alpha value other than 0 or 1. To get around this,\n\t *     the Bitmap can be cached.</li>\n\t *     <li>Bitmaps with an SVG source will taint the canvas with cross-origin data, which prevents interactivity. This\n\t *     happens in all browsers except recent Firefox builds.</li>\n\t *     <li>Images loaded cross-origin will throw cross-origin security errors when interacted with using a mouse, using\n\t *     methods such as `getObjectUnderPoint`, or using filters, or caching. You can get around this by setting\n\t *     `crossOrigin` flags on your images before passing them to EaselJS, eg: `img.crossOrigin=\"Anonymous\";`</li>\n\t * </ol>\n\t *\n\t * @class Bitmap\n\t * @extends DisplayObject\n\t * @constructor\n\t * @param {HTMLImageElement | HTMLCanvasElement | HTMLVideoElement | String} imageOrUri The source object or URI to an image to\n\t * display. This can be either an Image, Canvas, or Video object, or a string URI to an image file to load and use.\n\t * If it is a URI, a new Image object will be constructed and assigned to the .image property.\n\t **/\n\tfunction Bitmap(imageOrUri) {\n\t\tthis.DisplayObject_constructor();\n\t\t\n\t\t\n\t// public properties:\n\t\t/**\n\t\t * The image to render. This can be an Image, a Canvas, or a Video. Not all browsers (especially\n\t\t * mobile browsers) support drawing video to a canvas.\n\t\t * @property image\n\t\t * @type HTMLImageElement | HTMLCanvasElement | HTMLVideoElement\n\t\t **/\n\t\tif (typeof imageOrUri == \"string\") {\n\t\t\tthis.image = document.createElement(\"img\");\n\t\t\tthis.image.src = imageOrUri;\n\t\t} else {\n\t\t\tthis.image = imageOrUri;\n\t\t}\n\t\n\t\t/**\n\t\t * Specifies an area of the source image to draw. If omitted, the whole image will be drawn.\n\t\t * Note that video sources must have a width / height set to work correctly with `sourceRect`.\n\t\t * @property sourceRect\n\t\t * @type Rectangle\n\t\t * @default null\n\t\t */\n\t\tthis.sourceRect = null;\n\t}\n\tvar p = createjs.extend(Bitmap, createjs.DisplayObject);\n\t\n\t\n// public methods:\n\t/**\n\t * Constructor alias for backwards compatibility. This method will be removed in future versions.\n\t * Subclasses should be updated to use {{#crossLink \"Utility Methods/extends\"}}{{/crossLink}}.\n\t * @method initialize\n\t * @deprecated in favour of `createjs.promote()`\n\t **/\n\tp.initialize = Bitmap; // TODO: deprecated.\n\n\t/**\n\t * Returns true or false indicating whether the display object would be visible if drawn to a canvas.\n\t * This does not account for whether it would be visible within the boundaries of the stage.\n\t *\n\t * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n\t * @method isVisible\n\t * @return {Boolean} Boolean indicating whether the display object would be visible if drawn to a canvas\n\t **/\n\tp.isVisible = function() {\n\t\tvar image = this.image;\n\t\tvar hasContent = this.cacheCanvas || (image && (image.naturalWidth || image.getContext || image.readyState >= 2));\n\t\treturn !!(this.visible && this.alpha > 0 && this.scaleX != 0 && this.scaleY != 0 && hasContent);\n\t};\n\n\t/**\n\t * Draws the display object into the specified context ignoring its visible, alpha, shadow, and transform.\n\t * Returns true if the draw was handled (useful for overriding functionality).\n\t *\n\t * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n\t * @method draw\n\t * @param {CanvasRenderingContext2D} ctx The canvas 2D context object to draw into.\n\t * @param {Boolean} [ignoreCache=false] Indicates whether the draw operation should ignore any current cache.\n\t * For example, used for drawing the cache (to prevent it from simply drawing an existing cache back\n\t * into itself).\n\t * @return {Boolean}\n\t **/\n\tp.draw = function(ctx, ignoreCache) {\n\t\tif (this.DisplayObject_draw(ctx, ignoreCache) || !this.image) { return true; }\n\t\tvar img = this.image, rect = this.sourceRect;\n\t\tif (rect) {\n\t\t\t// some browsers choke on out of bound values, so we'll fix them:\n\t\t\tvar x1 = rect.x, y1 = rect.y, x2 = x1 + rect.width, y2 = y1 + rect.height, x = 0, y = 0, w = img.width, h = img.height;\n\t\t\tif (x1 < 0) { x -= x1; x1 = 0; }\n\t\t\tif (x2 > w) { x2 = w; }\n\t\t\tif (y1 < 0) { y -= y1; y1 = 0; }\n\t\t\tif (y2 > h) { y2 = h; }\n\t\t\tctx.drawImage(img, x1, y1, x2-x1, y2-y1, x, y, x2-x1, y2-y1);\n\t\t} else {\n\t\t\tctx.drawImage(img, 0, 0);\n\t\t}\n\t\treturn true;\n\t};\n\t\n\t//Note, the doc sections below document using the specified APIs (from DisplayObject)  from\n\t//Bitmap. This is why they have no method implementations.\n\t\n\t/**\n\t * Because the content of a Bitmap is already in a simple format, cache is unnecessary for Bitmap instances.\n\t * You should <b>not</b> cache Bitmap instances as it can degrade performance.\n\t *\n\t * <strong>However: If you want to use a filter on a Bitmap, you <em>MUST</em> cache it, or it will not work.</strong>\n\t * To see the API for caching, please visit the DisplayObject {{#crossLink \"DisplayObject/cache\"}}{{/crossLink}}\n\t * method.\n\t * @method cache\n\t **/\n\t\n\t/**\n\t * Because the content of a Bitmap is already in a simple format, cache is unnecessary for Bitmap instances.\n\t * You should <b>not</b> cache Bitmap instances as it can degrade performance.\n\t *\n\t * <strong>However: If you want to use a filter on a Bitmap, you <em>MUST</em> cache it, or it will not work.</strong>\n\t * To see the API for caching, please visit the DisplayObject {{#crossLink \"DisplayObject/cache\"}}{{/crossLink}}\n\t * method.\n\t * @method updateCache\n\t **/\n\t\n\t/**\n\t * Because the content of a Bitmap is already in a simple format, cache is unnecessary for Bitmap instances.\n\t * You should <b>not</b> cache Bitmap instances as it can degrade performance.\n\t *\n\t * <strong>However: If you want to use a filter on a Bitmap, you <em>MUST</em> cache it, or it will not work.</strong>\n\t * To see the API for caching, please visit the DisplayObject {{#crossLink \"DisplayObject/cache\"}}{{/crossLink}}\n\t * method.\n\t * @method uncache\n\t **/\n\n\t/**\n\t * Docced in superclass.\n\t */\n\tp.getBounds = function() {\n\t\tvar rect = this.DisplayObject_getBounds();\n\t\tif (rect) { return rect; }\n\t\tvar image = this.image, o = this.sourceRect || image;\n\t\tvar hasContent = (image && (image.naturalWidth || image.getContext || image.readyState >= 2));\n\t\treturn hasContent ? this._rectangle.setValues(0, 0, o.width, o.height) : null;\n\t};\n\t\n\t/**\n\t * Returns a clone of the Bitmap instance.\n\t * @method clone\n\t * @return {Bitmap} a clone of the Bitmap instance.\n\t **/\n\tp.clone = function() {\n\t\tvar o = new Bitmap(this.image);\n\t\tif (this.sourceRect) { o.sourceRect = this.sourceRect.clone(); }\n\t\tthis._cloneProps(o);\n\t\treturn o;\n\t};\n\t\n\t/**\n\t * Returns a string representation of this object.\n\t * @method toString\n\t * @return {String} a string representation of the instance.\n\t **/\n\tp.toString = function() {\n\t\treturn \"[Bitmap (name=\"+  this.name +\")]\";\n\t};\n\n\t\n\tcreatejs.Bitmap = createjs.promote(Bitmap, \"DisplayObject\");\n}());\n\n//##############################################################################\n// Sprite.js\n//##############################################################################\n\n(function() {\n\t\"use strict\";\n\n\n// constructor:\n\t/**\n\t * Displays a frame or sequence of frames (ie. an animation) from a SpriteSheet instance. A sprite sheet is a series of\n\t * images (usually animation frames) combined into a single image. For example, an animation consisting of 8 100x100\n\t * images could be combined into a 400x200 sprite sheet (4 frames across by 2 high). You can display individual frames,\n\t * play frames as an animation, and even sequence animations together.\n\t *\n\t * See the {{#crossLink \"SpriteSheet\"}}{{/crossLink}} class for more information on setting up frames and animations.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      var instance = new createjs.Sprite(spriteSheet);\n\t *      instance.gotoAndStop(\"frameName\");\n\t *\n\t * Until {{#crossLink \"Sprite/gotoAndStop\"}}{{/crossLink}} or {{#crossLink \"Sprite/gotoAndPlay\"}}{{/crossLink}} is called,\n\t * only the first defined frame defined in the sprite sheet will be displayed.\n\t *\n\t * @class Sprite\n\t * @extends DisplayObject\n\t * @constructor\n\t * @param {SpriteSheet} spriteSheet The SpriteSheet instance to play back. This includes the source image(s), frame\n\t * dimensions, and frame data. See {{#crossLink \"SpriteSheet\"}}{{/crossLink}} for more information.\n\t * @param {String|Number} [frameOrAnimation] The frame number or animation to play initially.\n\t **/\n\tfunction Sprite(spriteSheet, frameOrAnimation) {\n\t\tthis.DisplayObject_constructor();\n\t\t\n\t\t\n\t// public properties:\n\t\t/**\n\t\t * The frame index that will be drawn when draw is called. Note that with some {{#crossLink \"SpriteSheet\"}}{{/crossLink}}\n\t\t * definitions, this will advance non-sequentially. This will always be an integer value.\n\t\t * @property currentFrame\n\t\t * @type {Number}\n\t\t * @default 0\n\t\t * @readonly\n\t\t **/\n\t\tthis.currentFrame = 0;\n\t\n\t\t/**\n\t\t * Returns the name of the currently playing animation.\n\t\t * @property currentAnimation\n\t\t * @type {String}\n\t\t * @final\n\t\t * @readonly\n\t\t **/\n\t\tthis.currentAnimation = null;\n\t\n\t\t/**\n\t\t * Prevents the animation from advancing each tick automatically. For example, you could create a sprite\n\t\t * sheet of icons, set paused to true, and display the appropriate icon by setting <code>currentFrame</code>.\n\t\t * @property paused\n\t\t * @type {Boolean}\n\t\t * @default false\n\t\t **/\n\t\tthis.paused = true;\n\t\n\t\t/**\n\t\t * The SpriteSheet instance to play back. This includes the source image, frame dimensions, and frame\n\t\t * data. See {{#crossLink \"SpriteSheet\"}}{{/crossLink}} for more information.\n\t\t * @property spriteSheet\n\t\t * @type {SpriteSheet}\n\t\t * @readonly\n\t\t **/\n\t\tthis.spriteSheet = spriteSheet;\n\t\n\t\t/**\n\t\t * Specifies the current frame index within the currently playing animation. When playing normally, this will increase\n\t\t * from 0 to n-1, where n is the number of frames in the current animation.\n\t\t *\n\t\t * This could be a non-integer value if\n\t\t * using time-based playback (see {{#crossLink \"Sprite/framerate\"}}{{/crossLink}}, or if the animation's speed is\n\t\t * not an integer.\n\t\t * @property currentAnimationFrame\n\t\t * @type {Number}\n\t\t * @default 0\n\t\t **/\n\t\tthis.currentAnimationFrame = 0;\n\t\n\t\t/**\n\t\t * By default Sprite instances advance one frame per tick. Specifying a framerate for the Sprite (or its related\n\t\t * SpriteSheet) will cause it to advance based on elapsed time between ticks as appropriate to maintain the target\n\t\t * framerate.\n\t\t *\n\t\t * For example, if a Sprite with a framerate of 10 is placed on a Stage being updated at 40fps, then the Sprite will\n\t\t * advance roughly one frame every 4 ticks. This will not be exact, because the time between each tick will\n\t\t * vary slightly between frames.\n\t\t *\n\t\t * This feature is dependent on the tick event object (or an object with an appropriate \"delta\" property) being\n\t\t * passed into {{#crossLink \"Stage/update\"}}{{/crossLink}}.\n\t\t * @property framerate\n\t\t * @type {Number}\n\t\t * @default 0\n\t\t **/\n\t\tthis.framerate = 0;\n\t\n\t\n\t// private properties:\n\t\t/**\n\t\t * Current animation object.\n\t\t * @property _animation\n\t\t * @protected\n\t\t * @type {Object}\n\t\t * @default null\n\t\t **/\n\t\tthis._animation = null;\n\t\n\t\t/**\n\t\t * Current frame index.\n\t\t * @property _currentFrame\n\t\t * @protected\n\t\t * @type {Number}\n\t\t * @default null\n\t\t **/\n\t\tthis._currentFrame = null;\n\t\t\n\t\t/**\n\t\t * Skips the next auto advance. Used by gotoAndPlay to avoid immediately jumping to the next frame\n\t\t * @property _skipAdvance\n\t\t * @protected\n\t\t * @type {Boolean}\n\t\t * @default false\n\t\t **/\n\t\tthis._skipAdvance = false;\n\t\t\n\t\t\n\t\tif (frameOrAnimation != null) { this.gotoAndPlay(frameOrAnimation); }\n\t}\n\tvar p = createjs.extend(Sprite, createjs.DisplayObject);\n\n\t/**\n\t * Constructor alias for backwards compatibility. This method will be removed in future versions.\n\t * Subclasses should be updated to use {{#crossLink \"Utility Methods/extends\"}}{{/crossLink}}.\n\t * @method initialize\n\t * @deprecated in favour of `createjs.promote()`\n\t **/\n\tp.initialize = Sprite; // TODO: Deprecated. This is for backwards support of FlashCC spritesheet export.\n\n\n// events:\n\t/**\n\t * Dispatched when an animation reaches its ends.\n\t * @event animationend\n\t * @param {Object} target The object that dispatched the event.\n\t * @param {String} type The event type.\n\t * @param {String} name The name of the animation that just ended.\n\t * @param {String} next The name of the next animation that will be played, or null. This will be the same as name if the animation is looping.\n\t * @since 0.6.0\n\t */\n\t \n\t/**\n\t * Dispatched any time the current frame changes. For example, this could be due to automatic advancement on a tick,\n\t * or calling gotoAndPlay() or gotoAndStop().\n\t * @event change\n\t * @param {Object} target The object that dispatched the event.\n\t * @param {String} type The event type.\n\t */\n\n\n// public methods:\n\t/**\n\t * Returns true or false indicating whether the display object would be visible if drawn to a canvas.\n\t * This does not account for whether it would be visible within the boundaries of the stage.\n\t * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n\t * @method isVisible\n\t * @return {Boolean} Boolean indicating whether the display object would be visible if drawn to a canvas\n\t **/\n\tp.isVisible = function() {\n\t\tvar hasContent = this.cacheCanvas || this.spriteSheet.complete;\n\t\treturn !!(this.visible && this.alpha > 0 && this.scaleX != 0 && this.scaleY != 0 && hasContent);\n\t};\n\n\t/**\n\t * Draws the display object into the specified context ignoring its visible, alpha, shadow, and transform.\n\t * Returns true if the draw was handled (useful for overriding functionality).\n\t * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n\t * @method draw\n\t * @param {CanvasRenderingContext2D} ctx The canvas 2D context object to draw into.\n\t * @param {Boolean} ignoreCache Indicates whether the draw operation should ignore any current cache.\n\t * For example, used for drawing the cache (to prevent it from simply drawing an existing cache back\n\t * into itself).\n\t **/\n\tp.draw = function(ctx, ignoreCache) {\n\t\tif (this.DisplayObject_draw(ctx, ignoreCache)) { return true; }\n\t\tthis._normalizeFrame();\n\t\tvar o = this.spriteSheet.getFrame(this._currentFrame|0);\n\t\tif (!o) { return false; }\n\t\tvar rect = o.rect;\n\t\tif (rect.width && rect.height) { ctx.drawImage(o.image, rect.x, rect.y, rect.width, rect.height, -o.regX, -o.regY, rect.width, rect.height); }\n\t\treturn true;\n\t};\n\n\t//Note, the doc sections below document using the specified APIs (from DisplayObject)  from\n\t//Bitmap. This is why they have no method implementations.\n\n\t/**\n\t * Because the content of a Sprite is already in a raster format, cache is unnecessary for Sprite instances.\n\t * You should not cache Sprite instances as it can degrade performance.\n\t * @method cache\n\t **/\n\n\t/**\n\t * Because the content of a Sprite is already in a raster format, cache is unnecessary for Sprite instances.\n\t * You should not cache Sprite instances as it can degrade performance.\n\t * @method updateCache\n\t **/\n\n\t/**\n\t * Because the content of a Sprite is already in a raster format, cache is unnecessary for Sprite instances.\n\t * You should not cache Sprite instances as it can degrade performance.\n\t * @method uncache\n\t **/\n\n\t/**\n\t * Play (unpause) the current animation. The Sprite will be paused if either {{#crossLink \"Sprite/stop\"}}{{/crossLink}}\n\t * or {{#crossLink \"Sprite/gotoAndStop\"}}{{/crossLink}} is called. Single frame animations will remain\n\t * unchanged.\n\t * @method play\n\t **/\n\tp.play = function() {\n\t\tthis.paused = false;\n\t};\n\n\t/**\n\t * Stop playing a running animation. The Sprite will be playing if {{#crossLink \"Sprite/gotoAndPlay\"}}{{/crossLink}}\n\t * is called. Note that calling {{#crossLink \"Sprite/gotoAndPlay\"}}{{/crossLink}} or {{#crossLink \"Sprite/play\"}}{{/crossLink}}\n\t * will resume playback.\n\t * @method stop\n\t **/\n\tp.stop = function() {\n\t\tthis.paused = true;\n\t};\n\n\t/**\n\t * Sets paused to false and plays the specified animation name, named frame, or frame number.\n\t * @method gotoAndPlay\n\t * @param {String|Number} frameOrAnimation The frame number or animation name that the playhead should move to\n\t * and begin playing.\n\t **/\n\tp.gotoAndPlay = function(frameOrAnimation) {\n\t\tthis.paused = false;\n\t\tthis._skipAdvance = true;\n\t\tthis._goto(frameOrAnimation);\n\t};\n\n\t/**\n\t * Sets paused to true and seeks to the specified animation name, named frame, or frame number.\n\t * @method gotoAndStop\n\t * @param {String|Number} frameOrAnimation The frame number or animation name that the playhead should move to\n\t * and stop.\n\t **/\n\tp.gotoAndStop = function(frameOrAnimation) {\n\t\tthis.paused = true;\n\t\tthis._goto(frameOrAnimation);\n\t};\n\n\t/**\n\t * Advances the playhead. This occurs automatically each tick by default.\n\t * @param [time] {Number} The amount of time in ms to advance by. Only applicable if framerate is set on the Sprite\n\t * or its SpriteSheet.\n\t * @method advance\n\t*/\n\tp.advance = function(time) {\n\t\tvar fps = this.framerate || this.spriteSheet.framerate;\n\t\tvar t = (fps && time != null) ? time/(1000/fps) : 1;\n\t\tthis._normalizeFrame(t);\n\t};\n\t\n\t/**\n\t * Returns a {{#crossLink \"Rectangle\"}}{{/crossLink}} instance defining the bounds of the current frame relative to\n\t * the origin. For example, a 90 x 70 frame with <code>regX=50</code> and <code>regY=40</code> would return a\n\t * rectangle with [x=-50, y=-40, width=90, height=70]. This ignores transformations on the display object.\n\t *\n\t * Also see the SpriteSheet {{#crossLink \"SpriteSheet/getFrameBounds\"}}{{/crossLink}} method.\n\t * @method getBounds\n\t * @return {Rectangle} A Rectangle instance. Returns null if the frame does not exist, or the image is not fully\n\t * loaded.\n\t **/\n\tp.getBounds = function() {\n\t\t// TODO: should this normalizeFrame?\n\t\treturn this.DisplayObject_getBounds() || this.spriteSheet.getFrameBounds(this.currentFrame, this._rectangle);\n\t};\n\n\t/**\n\t * Returns a clone of the Sprite instance. Note that the same SpriteSheet is shared between cloned\n\t * instances.\n\t * @method clone\n\t * @return {Sprite} a clone of the Sprite instance.\n\t **/\n\tp.clone = function() {\n\t\treturn this._cloneProps(new Sprite(this.spriteSheet));\n\t};\n\n\t/**\n\t * Returns a string representation of this object.\n\t * @method toString\n\t * @return {String} a string representation of the instance.\n\t **/\n\tp.toString = function() {\n\t\treturn \"[Sprite (name=\"+  this.name +\")]\";\n\t};\n\n// private methods:\n\t/**\n\t * @method _cloneProps\n\t * @param {Sprite} o\n\t * @return {Sprite} o\n\t * @protected\n\t **/\n\tp._cloneProps = function(o) {\n\t\tthis.DisplayObject__cloneProps(o);\n\t\to.currentFrame = this.currentFrame;\n\t\to.currentAnimation = this.currentAnimation;\n\t\to.paused = this.paused;\n\t\to.currentAnimationFrame = this.currentAnimationFrame;\n\t\to.framerate = this.framerate;\n\t\t\n\t\to._animation = this._animation;\n\t\to._currentFrame = this._currentFrame;\n\t\to._skipAdvance = this._skipAdvance;\n\t\treturn o;\n\t};\n\t\n\t/**\n\t * Advances the <code>currentFrame</code> if paused is not true. This is called automatically when the {{#crossLink \"Stage\"}}{{/crossLink}}\n\t * ticks.\n\t * @param {Object} evtObj An event object that will be dispatched to all tick listeners. This object is reused between dispatchers to reduce construction & GC costs.\n\t * @protected\n\t * @method _tick\n\t **/\n\tp._tick = function(evtObj) {\n\t\tif (!this.paused) {\n\t\t\tif (!this._skipAdvance) { this.advance(evtObj&&evtObj.delta); }\n\t\t\tthis._skipAdvance = false;\n\t\t}\n\t\tthis.DisplayObject__tick(evtObj);\n\t};\n\n\n\t/**\n\t * Normalizes the current frame, advancing animations and dispatching callbacks as appropriate.\n\t * @protected\n\t * @method _normalizeFrame\n\t **/\n\tp._normalizeFrame = function(frameDelta) {\n\t\tframeDelta = frameDelta || 0;\n\t\tvar animation = this._animation;\n\t\tvar paused = this.paused;\n\t\tvar frame = this._currentFrame;\n\t\tvar l;\n\t\t\n\t\tif (animation) {\n\t\t\tvar speed = animation.speed || 1;\n\t\t\tvar animFrame = this.currentAnimationFrame;\n\t\t\tl = animation.frames.length;\n\t\t\tif (animFrame + frameDelta * speed >= l) {\n\t\t\t\tvar next = animation.next;\n\t\t\t\tif (this._dispatchAnimationEnd(animation, frame, paused, next, l - 1)) {\n\t\t\t\t\t// something changed in the event stack, so we shouldn't make any more changes here.\n\t\t\t\t\treturn;\n\t\t\t\t} else if (next) {\n\t\t\t\t\t// sequence. Automatically calls _normalizeFrame again with the remaining frames.\n\t\t\t\t\treturn this._goto(next, frameDelta - (l - animFrame) / speed);\n\t\t\t\t} else {\n\t\t\t\t\t// end.\n\t\t\t\t\tthis.paused = true;\n\t\t\t\t\tanimFrame = animation.frames.length - 1;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tanimFrame += frameDelta * speed;\n\t\t\t}\n\t\t\tthis.currentAnimationFrame = animFrame;\n\t\t\tthis._currentFrame = animation.frames[animFrame | 0]\n\t\t} else {\n\t\t\tframe = (this._currentFrame += frameDelta);\n\t\t\tl = this.spriteSheet.getNumFrames();\n\t\t\tif (frame >= l && l > 0) {\n\t\t\t\tif (!this._dispatchAnimationEnd(animation, frame, paused, l - 1)) {\n\t\t\t\t\t// looped.\n\t\t\t\t\tif ((this._currentFrame -= l) >= l) { return this._normalizeFrame(); }\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tframe = this._currentFrame | 0;\n\t\tif (this.currentFrame != frame) {\n\t\t\tthis.currentFrame = frame;\n\t\t\tthis.dispatchEvent(\"change\");\n\t\t}\n\t};\n\n\t/**\n\t * Dispatches the \"animationend\" event. Returns true if a handler changed the animation (ex. calling {{#crossLink \"Sprite/stop\"}}{{/crossLink}},\n\t * {{#crossLink \"Sprite/gotoAndPlay\"}}{{/crossLink}}, etc.)\n\t * @property _dispatchAnimationEnd\n\t * @private\n\t * @type {Function}\n\t **/\n\tp._dispatchAnimationEnd = function(animation, frame, paused, next, end) {\n\t\tvar name = animation ? animation.name : null;\n\t\tif (this.hasEventListener(\"animationend\")) {\n\t\t\tvar evt = new createjs.Event(\"animationend\");\n\t\t\tevt.name = name;\n\t\t\tevt.next = next;\n\t\t\tthis.dispatchEvent(evt);\n\t\t}\n\t\t// did the animation get changed in the event stack?:\n\t\tvar changed = (this._animation != animation || this._currentFrame != frame);\n\t\t// if the animation hasn't changed, but the sprite was paused, then we want to stick to the last frame:\n\t\tif (!changed && !paused && this.paused) { this.currentAnimationFrame = end; changed = true; }\n\t\treturn changed;\n\t};\n\n\t/**\n\t * Moves the playhead to the specified frame number or animation.\n\t * @method _goto\n\t * @param {String|Number} frameOrAnimation The frame number or animation that the playhead should move to.\n\t * @param {Boolean} [frame] The frame of the animation to go to. Defaults to 0.\n\t * @protected\n\t **/\n\tp._goto = function(frameOrAnimation, frame) {\n\t\tthis.currentAnimationFrame = 0;\n\t\tif (isNaN(frameOrAnimation)) {\n\t\t\tvar data = this.spriteSheet.getAnimation(frameOrAnimation);\n\t\t\tif (data) {\n\t\t\t\tthis._animation = data;\n\t\t\t\tthis.currentAnimation = frameOrAnimation;\n\t\t\t\tthis._normalizeFrame(frame);\n\t\t\t}\n\t\t} else {\n\t\t\tthis.currentAnimation = this._animation = null;\n\t\t\tthis._currentFrame = frameOrAnimation;\n\t\t\tthis._normalizeFrame();\n\t\t}\n\t};\n\n\n\tcreatejs.Sprite = createjs.promote(Sprite, \"DisplayObject\");\n}());\n\n//##############################################################################\n// Shape.js\n//##############################################################################\n\n(function() {\n\t\"use strict\";\n\n\n// constructor:\n\t/**\n\t * A Shape allows you to display vector art in the display list. It composites a {{#crossLink \"Graphics\"}}{{/crossLink}}\n\t * instance which exposes all of the vector drawing methods. The Graphics instance can be shared between multiple Shape\n\t * instances to display the same vector graphics with different positions or transforms.\n\t *\n\t * If the vector art will not\n\t * change between draws, you may want to use the {{#crossLink \"DisplayObject/cache\"}}{{/crossLink}} method to reduce the\n\t * rendering cost.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      var graphics = new createjs.Graphics().beginFill(\"#ff0000\").drawRect(0, 0, 100, 100);\n\t *      var shape = new createjs.Shape(graphics);\n\t *\n\t *      //Alternatively use can also use the graphics property of the Shape class to renderer the same as above.\n\t *      var shape = new createjs.Shape();\n\t *      shape.graphics.beginFill(\"#ff0000\").drawRect(0, 0, 100, 100);\n\t *\n\t * @class Shape\n\t * @extends DisplayObject\n\t * @constructor\n\t * @param {Graphics} graphics Optional. The graphics instance to display. If null, a new Graphics instance will be created.\n\t **/\n\tfunction Shape(graphics) {\n\t\tthis.DisplayObject_constructor();\n\t\t\n\t\t\n\t// public properties:\n\t\t/**\n\t\t * The graphics instance to display.\n\t\t * @property graphics\n\t\t * @type Graphics\n\t\t **/\n\t\tthis.graphics = graphics ? graphics : new createjs.Graphics();\n\t}\n\tvar p = createjs.extend(Shape, createjs.DisplayObject);\n\n\t// TODO: deprecated\n\t// p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\n\n\n// public methods:\n\t/**\n\t * Returns true or false indicating whether the Shape would be visible if drawn to a canvas.\n\t * This does not account for whether it would be visible within the boundaries of the stage.\n\t * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n\t * @method isVisible\n\t * @return {Boolean} Boolean indicating whether the Shape would be visible if drawn to a canvas\n\t **/\n\tp.isVisible = function() {\n\t\tvar hasContent = this.cacheCanvas || (this.graphics && !this.graphics.isEmpty());\n\t\treturn !!(this.visible && this.alpha > 0 && this.scaleX != 0 && this.scaleY != 0 && hasContent);\n\t};\n\n\t/**\n\t * Draws the Shape into the specified context ignoring its visible, alpha, shadow, and transform. Returns true if\n\t * the draw was handled (useful for overriding functionality).\n\t *\n\t * <i>NOTE: This method is mainly for internal use, though it may be useful for advanced uses.</i>\n\t * @method draw\n\t * @param {CanvasRenderingContext2D} ctx The canvas 2D context object to draw into.\n\t * @param {Boolean} [ignoreCache=false] Indicates whether the draw operation should ignore any current cache. For example,\n\t * used for drawing the cache (to prevent it from simply drawing an existing cache back into itself).\n\t * @return {Boolean}\n\t **/\n\tp.draw = function(ctx, ignoreCache) {\n\t\tif (this.DisplayObject_draw(ctx, ignoreCache)) { return true; }\n\t\tthis.graphics.draw(ctx, this);\n\t\treturn true;\n\t};\n\n\t/**\n\t * Returns a clone of this Shape. Some properties that are specific to this instance's current context are reverted to\n\t * their defaults (for example .parent).\n\t * @method clone\n\t * @param {Boolean} recursive If true, this Shape's {{#crossLink \"Graphics\"}}{{/crossLink}} instance will also be\n\t * cloned. If false, the Graphics instance will be shared with the new Shape.\n\t **/\n\tp.clone = function(recursive) {\n\t\tvar g = (recursive && this.graphics) ? this.graphics.clone() : this.graphics;\n\t\treturn  this._cloneProps(new Shape(g));\n\t};\n\n\t/**\n\t * Returns a string representation of this object.\n\t * @method toString\n\t * @return {String} a string representation of the instance.\n\t **/\n\tp.toString = function() {\n\t\treturn \"[Shape (name=\"+  this.name +\")]\";\n\t};\n\n\n\tcreatejs.Shape = createjs.promote(Shape, \"DisplayObject\");\n}());\n\n//##############################################################################\n// Text.js\n//##############################################################################\n\n(function() {\n\t\"use strict\";\n\n\n// constructor:\n\t/**\n\t * Display one or more lines of dynamic text (not user editable) in the display list. Line wrapping support (using the\n\t * lineWidth) is very basic, wrapping on spaces and tabs only. Note that as an alternative to Text, you can position HTML\n\t * text above or below the canvas relative to items in the display list using the {{#crossLink \"DisplayObject/localToGlobal\"}}{{/crossLink}}\n\t * method, or using {{#crossLink \"DOMElement\"}}{{/crossLink}}.\n\t *\n\t * <b>Please note that Text does not support HTML text, and can only display one font style at a time.</b> To use\n\t * multiple font styles, you will need to create multiple text instances, and position them manually.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      var text = new createjs.Text(\"Hello World\", \"20px Arial\", \"#ff7700\");\n\t *      text.x = 100;\n\t *      text.textBaseline = \"alphabetic\";\n\t *\n\t * CreateJS Text supports web fonts (the same rules as Canvas). The font must be loaded and supported by the browser\n\t * before it can be displayed.\n\t *\n\t * <strong>Note:</strong> Text can be expensive to generate, so cache instances where possible. Be aware that not all\n\t * browsers will render Text exactly the same.\n\t * @class Text\n\t * @extends DisplayObject\n\t * @constructor\n\t * @param {String} [text] The text to display.\n\t * @param {String} [font] The font style to use. Any valid value for the CSS font attribute is acceptable (ex. \"bold\n\t * 36px Arial\").\n\t * @param {String} [color] The color to draw the text in. Any valid value for the CSS color attribute is acceptable (ex.\n\t * \"#F00\", \"red\", or \"#FF0000\").\n\t **/\n\tfunction Text(text, font, color) {\n\t\tthis.DisplayObject_constructor();\n\t\t\n\t\t\n\t// public properties:\n\t\t/**\n\t\t * The text to display.\n\t\t * @property text\n\t\t * @type String\n\t\t **/\n\t\tthis.text = text;\n\t\n\t\t/**\n\t\t * The font style to use. Any valid value for the CSS font attribute is acceptable (ex. \"bold 36px Arial\").\n\t\t * @property font\n\t\t * @type String\n\t\t **/\n\t\tthis.font = font;\n\t\n\t\t/**\n\t\t * The color to draw the text in. Any valid value for the CSS color attribute is acceptable (ex. \"#F00\"). Default is \"#000\".\n\t\t * It will also accept valid canvas fillStyle values.\n\t\t * @property color\n\t\t * @type String\n\t\t **/\n\t\tthis.color = color;\n\t\n\t\t/**\n\t\t * The horizontal text alignment. Any of \"start\", \"end\", \"left\", \"right\", and \"center\". For detailed\n\t\t * information view the\n\t\t * <a href=\"http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#text-styles\">\n\t\t * whatwg spec</a>. Default is \"left\".\n\t\t * @property textAlign\n\t\t * @type String\n\t\t **/\n\t\tthis.textAlign = \"left\";\n\t\n\t\t/**\n\t\t * The vertical alignment point on the font. Any of \"top\", \"hanging\", \"middle\", \"alphabetic\", \"ideographic\", or\n\t\t * \"bottom\". For detailed information view the <a href=\"http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#text-styles\">\n\t\t * whatwg spec</a>. Default is \"top\".\n\t\t * @property textBaseline\n\t\t * @type String\n\t\t*/\n\t\tthis.textBaseline = \"top\";\n\t\n\t\t/**\n\t\t * The maximum width to draw the text. If maxWidth is specified (not null), the text will be condensed or\n\t\t * shrunk to make it fit in this width. For detailed information view the\n\t\t * <a href=\"http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#text-styles\">\n\t\t * whatwg spec</a>.\n\t\t * @property maxWidth\n\t\t * @type Number\n\t\t*/\n\t\tthis.maxWidth = null;\n\t\n\t\t/**\n\t\t * If greater than 0, the text will be drawn as a stroke (outline) of the specified width.\n\t\t * @property outline\n\t\t * @type Number\n\t\t **/\n\t\tthis.outline = 0;\n\t\n\t\t/**\n\t\t * Indicates the line height (vertical distance between baselines) for multi-line text. If null or 0,\n\t\t * the value of getMeasuredLineHeight is used.\n\t\t * @property lineHeight\n\t\t * @type Number\n\t\t **/\n\t\tthis.lineHeight = 0;\n\t\n\t\t/**\n\t\t * Indicates the maximum width for a line of text before it is wrapped to multiple lines. If null,\n\t\t * the text will not be wrapped.\n\t\t * @property lineWidth\n\t\t * @type Number\n\t\t **/\n\t\tthis.lineWidth = null;\n\t}\n\tvar p = createjs.extend(Text, createjs.DisplayObject);\n\n\t// TODO: deprecated\n\t// p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\n\n\t\n// static properties:\n\t/**\n\t * @property _workingContext\n\t * @type CanvasRenderingContext2D\n\t * @private\n\t **/\n\tvar canvas = (createjs.createCanvas?createjs.createCanvas():document.createElement(\"canvas\"));\n\tif (canvas.getContext) { Text._workingContext = canvas.getContext(\"2d\"); canvas.width = canvas.height = 1; }\n\t\n\t\n// constants:\n\t/**\n\t * Lookup table for the ratio to offset bounds x calculations based on the textAlign property.\n\t * @property H_OFFSETS\n\t * @type Object\n\t * @protected\n\t * @static\n\t **/\n\tText.H_OFFSETS = {start: 0, left: 0, center: -0.5, end: -1, right: -1};\n\t\n\t/**\n\t * Lookup table for the ratio to offset bounds y calculations based on the textBaseline property.\n\t * @property H_OFFSETS\n\t * @type Object\n\t * @protected\n\t * @static\n\t **/\n\tText.V_OFFSETS = {top: 0, hanging: -0.01, middle: -0.4, alphabetic: -0.8, ideographic: -0.85, bottom: -1};\n\n\n// public methods:\n\t/**\n\t * Returns true or false indicating whether the display object would be visible if drawn to a canvas.\n\t * This does not account for whether it would be visible within the boundaries of the stage.\n\t * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n\t * @method isVisible\n\t * @return {Boolean} Whether the display object would be visible if drawn to a canvas\n\t **/\n\tp.isVisible = function() {\n\t\tvar hasContent = this.cacheCanvas || (this.text != null && this.text !== \"\");\n\t\treturn !!(this.visible && this.alpha > 0 && this.scaleX != 0 && this.scaleY != 0 && hasContent);\n\t};\n\n\t/**\n\t * Draws the Text into the specified context ignoring its visible, alpha, shadow, and transform.\n\t * Returns true if the draw was handled (useful for overriding functionality).\n\t * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n\t * @method draw\n\t * @param {CanvasRenderingContext2D} ctx The canvas 2D context object to draw into.\n\t * @param {Boolean} ignoreCache Indicates whether the draw operation should ignore any current cache.\n\t * For example, used for drawing the cache (to prevent it from simply drawing an existing cache back\n\t * into itself).\n\t **/\n\tp.draw = function(ctx, ignoreCache) {\n\t\tif (this.DisplayObject_draw(ctx, ignoreCache)) { return true; }\n\n\t\tvar col = this.color || \"#000\";\n\t\tif (this.outline) { ctx.strokeStyle = col; ctx.lineWidth = this.outline*1; }\n\t\telse { ctx.fillStyle = col; }\n\t\t\n\t\tthis._drawText(this._prepContext(ctx));\n\t\treturn true;\n\t};\n\n\t/**\n\t * Returns the measured, untransformed width of the text without wrapping. Use getBounds for a more robust value.\n\t * @method getMeasuredWidth\n\t * @return {Number} The measured, untransformed width of the text.\n\t **/\n\tp.getMeasuredWidth = function() {\n\t\treturn this._getMeasuredWidth(this.text);\n\t};\n\n\t/**\n\t * Returns an approximate line height of the text, ignoring the lineHeight property. This is based on the measured\n\t * width of a \"M\" character multiplied by 1.2, which provides an approximate line height for most fonts.\n\t * @method getMeasuredLineHeight\n\t * @return {Number} an approximate line height of the text, ignoring the lineHeight property. This is\n\t * based on the measured width of a \"M\" character multiplied by 1.2, which approximates em for most fonts.\n\t **/\n\tp.getMeasuredLineHeight = function() {\n\t\treturn this._getMeasuredWidth(\"M\")*1.2;\n\t};\n\n\t/**\n\t * Returns the approximate height of multi-line text by multiplying the number of lines against either the\n\t * <code>lineHeight</code> (if specified) or {{#crossLink \"Text/getMeasuredLineHeight\"}}{{/crossLink}}. Note that\n\t * this operation requires the text flowing logic to run, which has an associated CPU cost.\n\t * @method getMeasuredHeight\n\t * @return {Number} The approximate height of the untransformed multi-line text.\n\t **/\n\tp.getMeasuredHeight = function() {\n\t\treturn this._drawText(null,{}).height;\n\t};\n\n\t/**\n\t * Docced in superclass.\n\t */\n\tp.getBounds = function() {\n\t\tvar rect = this.DisplayObject_getBounds();\n\t\tif (rect) { return rect; }\n\t\tif (this.text == null || this.text === \"\") { return null; }\n\t\tvar o = this._drawText(null, {});\n\t\tvar w = (this.maxWidth && this.maxWidth < o.width) ? this.maxWidth : o.width;\n\t\tvar x = w * Text.H_OFFSETS[this.textAlign||\"left\"];\n\t\tvar lineHeight = this.lineHeight||this.getMeasuredLineHeight();\n\t\tvar y = lineHeight * Text.V_OFFSETS[this.textBaseline||\"top\"];\n\t\treturn this._rectangle.setValues(x, y, w, o.height);\n\t};\n\t\n\t/**\n\t * Returns an object with width, height, and lines properties. The width and height are the visual width and height\n\t * of the drawn text. The lines property contains an array of strings, one for\n\t * each line of text that will be drawn, accounting for line breaks and wrapping. These strings have trailing\n\t * whitespace removed.\n\t * @method getMetrics\n\t * @return {Object} An object with width, height, and lines properties.\n\t **/\n\tp.getMetrics = function() {\n\t\tvar o = {lines:[]};\n\t\to.lineHeight = this.lineHeight || this.getMeasuredLineHeight();\n\t\to.vOffset = o.lineHeight * Text.V_OFFSETS[this.textBaseline||\"top\"];\n\t\treturn this._drawText(null, o, o.lines);\n\t};\n\n\t/**\n\t * Returns a clone of the Text instance.\n\t * @method clone\n\t * @return {Text} a clone of the Text instance.\n\t **/\n\tp.clone = function() {\n\t\treturn this._cloneProps(new Text(this.text, this.font, this.color));\n\t};\n\n\t/**\n\t * Returns a string representation of this object.\n\t * @method toString\n\t * @return {String} a string representation of the instance.\n\t **/\n\tp.toString = function() {\n\t\treturn \"[Text (text=\"+  (this.text.length > 20 ? this.text.substr(0, 17)+\"...\" : this.text) +\")]\";\n\t};\n\n\n// private methods:\n\t/**\n\t * @method _cloneProps\n\t * @param {Text} o\n\t * @protected\n\t * @return {Text} o\n\t **/\n\tp._cloneProps = function(o) {\n\t\tthis.DisplayObject__cloneProps(o);\n\t\to.textAlign = this.textAlign;\n\t\to.textBaseline = this.textBaseline;\n\t\to.maxWidth = this.maxWidth;\n\t\to.outline = this.outline;\n\t\to.lineHeight = this.lineHeight;\n\t\to.lineWidth = this.lineWidth;\n\t\treturn o;\n\t};\n\n\t/**\n\t * @method _getWorkingContext\n\t * @param {CanvasRenderingContext2D} ctx\n\t * @return {CanvasRenderingContext2D}\n\t * @protected\n\t **/\n\tp._prepContext = function(ctx) {\n\t\tctx.font = this.font||\"10px sans-serif\";\n\t\tctx.textAlign = this.textAlign||\"left\";\n\t\tctx.textBaseline = this.textBaseline||\"top\";\n\t\treturn ctx;\n\t};\n\n\t/**\n\t * Draws multiline text.\n\t * @method _drawText\n\t * @param {CanvasRenderingContext2D} ctx\n\t * @param {Object} o\n\t * @param {Array} lines\n\t * @return {Object}\n\t * @protected\n\t **/\n\tp._drawText = function(ctx, o, lines) {\n\t\tvar paint = !!ctx;\n\t\tif (!paint) {\n\t\t\tctx = Text._workingContext;\n\t\t\tctx.save();\n\t\t\tthis._prepContext(ctx);\n\t\t}\n\t\tvar lineHeight = this.lineHeight||this.getMeasuredLineHeight();\n\t\t\n\t\tvar maxW = 0, count = 0;\n\t\tvar hardLines = String(this.text).split(/(?:\\r\\n|\\r|\\n)/);\n\t\tfor (var i=0, l=hardLines.length; i<l; i++) {\n\t\t\tvar str = hardLines[i];\n\t\t\tvar w = null;\n\t\t\t\n\t\t\tif (this.lineWidth != null && (w = ctx.measureText(str).width) > this.lineWidth) {\n\t\t\t\t// text wrapping:\n\t\t\t\tvar words = str.split(/(\\s)/);\n\t\t\t\tstr = words[0];\n\t\t\t\tw = ctx.measureText(str).width;\n\t\t\t\t\n\t\t\t\tfor (var j=1, jl=words.length; j<jl; j+=2) {\n\t\t\t\t\t// Line needs to wrap:\n\t\t\t\t\tvar wordW = ctx.measureText(words[j] + words[j+1]).width;\n\t\t\t\t\tif (w + wordW > this.lineWidth) {\n\t\t\t\t\t\tif (paint) { this._drawTextLine(ctx, str, count*lineHeight); }\n\t\t\t\t\t\tif (lines) { lines.push(str); }\n\t\t\t\t\t\tif (w > maxW) { maxW = w; }\n\t\t\t\t\t\tstr = words[j+1];\n\t\t\t\t\t\tw = ctx.measureText(str).width;\n\t\t\t\t\t\tcount++;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tstr += words[j] + words[j+1];\n\t\t\t\t\t\tw += wordW;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif (paint) { this._drawTextLine(ctx, str, count*lineHeight); }\n\t\t\tif (lines) { lines.push(str); }\n\t\t\tif (o && w == null) { w = ctx.measureText(str).width; }\n\t\t\tif (w > maxW) { maxW = w; }\n\t\t\tcount++;\n\t\t}\n\t\t\n\t\tif (o) {\n\t\t\to.width = maxW;\n\t\t\to.height = count*lineHeight;\n\t\t}\n\t\tif (!paint) { ctx.restore(); }\n\t\treturn o;\n\t};\n\n\t/**\n\t * @method _drawTextLine\n\t * @param {CanvasRenderingContext2D} ctx\n\t * @param {String} text\n\t * @param {Number} y\n\t * @protected\n\t **/\n\tp._drawTextLine = function(ctx, text, y) {\n\t\t// Chrome 17 will fail to draw the text if the last param is included but null, so we feed it a large value instead:\n\t\tif (this.outline) { ctx.strokeText(text, 0, y, this.maxWidth||0xFFFF); }\n\t\telse { ctx.fillText(text, 0, y, this.maxWidth||0xFFFF); }\n\t};\n\t\n\t\n\t/**\n\t * @method _getMeasuredWidth\n\t * @param {String} text\n\t * @protected\n\t **/\n\tp._getMeasuredWidth = function(text) {\n\t\tvar ctx = Text._workingContext;\n\t\tctx.save();\n\t\tvar w = this._prepContext(ctx).measureText(text).width;\n\t\tctx.restore();\n\t\treturn w;\n\t};\n\n\n\tcreatejs.Text = createjs.promote(Text, \"DisplayObject\");\n}());\n\n//##############################################################################\n// BitmapText.js\n//##############################################################################\n\n(function () {\n\t\"use strict\";\n\n\n// constructor:\n\t/**\n\t * Displays text using bitmap glyphs defined in a sprite sheet. Multi-line text is supported\n\t * using new line characters, but automatic wrapping is not supported. See the \n\t * {{#crossLink \"BitmapText/spriteSheet:property\"}}{{/crossLink}}\n\t * property for more information on defining glyphs.\n\t * \n\t * <strong>Important:</strong> BitmapText extends Container, but is not designed to be used as one.\n\t * As such, methods like addChild and removeChild are disabled.\n\t * @class BitmapText\n\t * @extends DisplayObject\n\t * @param {String} [text=\"\"] The text to display.\n\t * @param {SpriteSheet} [spriteSheet=null] The spritesheet that defines the character glyphs.\n\t * @constructor\n\t **/\n\tfunction BitmapText(text, spriteSheet) {\n\t\tthis.Container_constructor();\n\t\t\n\t\t\n\t// public properties:\n\t\t/**\n\t\t * The text to display.\n\t\t * @property text\n\t\t * @type String\n\t\t * @default \"\"\n\t\t **/\n\t\tthis.text = text||\"\";\n\t\t\n\t\t/**\n\t\t * A SpriteSheet instance that defines the glyphs for this bitmap text. Each glyph/character\n\t\t * should have a single frame animation defined in the sprite sheet named the same as\n\t\t * corresponding character. For example, the following animation definition:\n\t\t *\n\t\t * \t\t\"A\": {frames: [0]}\n\t\t *\n\t\t * would indicate that the frame at index 0 of the spritesheet should be drawn for the \"A\" character. The short form\n\t\t * is also acceptable:\n\t\t * \n\t\t * \t\t\"A\": 0\n\t\t *\n\t\t * Note that if a character in the text is not found in the sprite sheet, it will also\n\t\t * try to use the alternate case (upper or lower).\n\t\t *\n\t\t * See SpriteSheet for more information on defining sprite sheet data.\n\t\t * @property spriteSheet\n\t\t * @type SpriteSheet\n\t\t * @default null\n\t\t **/\n\t\tthis.spriteSheet = spriteSheet;\n\t\n\t\t/**\n\t\t * The height of each line of text. If 0, then it will use a line height calculated\n\t\t * by checking for the height of the \"1\", \"T\", or \"L\" character (in that order). If\n\t\t * those characters are not defined, it will use the height of the first frame of the\n\t\t * sprite sheet.\n\t\t * @property lineHeight\n\t\t * @type Number\n\t\t * @default 0\n\t\t **/\n\t\tthis.lineHeight = 0;\n\t\n\t\t/**\n\t\t * This spacing (in pixels) will be added after each character in the output.\n\t\t * @property letterSpacing\n\t\t * @type Number\n\t\t * @default 0\n\t\t **/\n\t\tthis.letterSpacing = 0;\n\t\n\t\t/**\n\t\t * If a space character is not defined in the sprite sheet, then empty pixels equal to\n\t\t * spaceWidth will be inserted instead. If 0, then it will use a value calculated\n\t\t * by checking for the width of the \"1\", \"l\", \"E\", or \"A\" character (in that order). If\n\t\t * those characters are not defined, it will use the width of the first frame of the\n\t\t * sprite sheet.\n\t\t * @property spaceWidth\n\t\t * @type Number\n\t\t * @default 0\n\t\t **/\n\t\tthis.spaceWidth = 0;\n\t\t\n\t\t\n\t// private properties:\n\t \t/**\n\t\t * @property _oldProps\n\t\t * @type Object\n\t\t * @protected\n\t\t **/\n\t\tthis._oldProps = {text:0,spriteSheet:0,lineHeight:0,letterSpacing:0,spaceWidth:0};\n\t}\n\tvar p = createjs.extend(BitmapText, createjs.Container);\n\n\t/**\n\t * <strong>REMOVED</strong>. Removed in favor of using `MySuperClass_constructor`.\n\t * See {{#crossLink \"Utility Methods/extend\"}}{{/crossLink}} and {{#crossLink \"Utility Methods/promote\"}}{{/crossLink}}\n\t * for details.\n\t *\n\t * There is an inheritance tutorial distributed with EaselJS in /tutorials/Inheritance.\n\t *\n\t * @method initialize\n\t * @protected\n\t * @deprecated\n\t */\n\t// p.initialize = function() {}; // searchable for devs wondering where it is.\n\n// static properties:\n\t/**\n\t * BitmapText uses Sprite instances to draw text. To reduce the creation and destruction of instances (and thus garbage collection), it maintains\n\t * an internal object pool of sprite instances to reuse. Increasing this value can cause more sprites to be\n\t * retained, slightly increasing memory use, but reducing instantiation.\n\t * @property maxPoolSize\n\t * @type Number\n\t * @static\n\t * @default 100\n\t **/\n\tBitmapText.maxPoolSize = 100;\n\t\n\t/**\n\t * Sprite object pool.\n\t * @type {Array}\n\t * @static\n\t * @private\n\t */\n\tBitmapText._spritePool = [];\n\n\t\n// public methods:\n\t/**\n\t * Docced in superclass.\n\t **/\n\tp.draw = function(ctx, ignoreCache) {\n\t\tif (this.DisplayObject_draw(ctx, ignoreCache)) { return; }\n\t\tthis._updateText();\n\t\tthis.Container_draw(ctx, ignoreCache);\n\t};\n\t\n\t/**\n\t * Docced in superclass.\n\t **/\n\tp.getBounds = function() {\n\t\tthis._updateText();\n\t\treturn this.Container_getBounds();\n\t};\n\t\n\t/**\n\t * Returns true or false indicating whether the display object would be visible if drawn to a canvas.\n\t * This does not account for whether it would be visible within the boundaries of the stage.\n\t * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n\t * @method isVisible\n\t * @return {Boolean} Boolean indicating whether the display object would be visible if drawn to a canvas\n\t **/\n\tp.isVisible = function() {\n\t\tvar hasContent = this.cacheCanvas || (this.spriteSheet && this.spriteSheet.complete && this.text);\n\t\treturn !!(this.visible && this.alpha > 0 && this.scaleX !== 0 && this.scaleY !== 0 && hasContent);\n\t};\n\t\n\tp.clone = function() {\n\t\treturn this._cloneProps(new BitmapText(this.text, this.spriteSheet));\n\t};\n\t\n\t/**\n\t * <strong>Disabled in BitmapText.</strong>\n\t * @method addChild\n\t **/\n\t/**\n\t * <strong>Disabled in BitmapText.</strong>\n\t * @method addChildAt\n\t **/\n\t/**\n\t * <strong>Disabled in BitmapText.</strong>\n\t * @method removeChild\n\t **/\n\t/**\n\t * <strong>Disabled in BitmapText.</strong>\n\t * @method removeChildAt\n\t **/\n\t/**\n\t * <strong>Disabled in BitmapText.</strong>\n\t * @method removeAllChildren\n\t **/\n\tp.addChild = p.addChildAt = p.removeChild = p.removeChildAt = p.removeAllChildren = function() {};\n\n\n// private methods:\n \t/**\n\t * @method _cloneProps\n\t * @param {BitmapText} o\n\t * @return {BitmapText} o\n\t * @protected\n\t **/\n\tp._cloneProps = function(o) {\n\t\tthis.Container__cloneProps(o);\n\t\to.lineHeight = this.lineHeight;\n\t\to.letterSpacing = this.letterSpacing;\n\t\to.spaceWidth = this.spaceWidth;\n\t\treturn o;\n\t};\n\t\n\t/**\n\t * @method _getFrameIndex\n\t * @param {String} character\n\t * @param {SpriteSheet} spriteSheet\n\t * @return {Number}\n\t * @protected\n\t **/\n\tp._getFrameIndex = function(character, spriteSheet) {\n\t\tvar c, o = spriteSheet.getAnimation(character);\n\t\tif (!o) {\n\t\t\t(character != (c = character.toUpperCase())) || (character != (c = character.toLowerCase())) || (c=null);\n\t\t\tif (c) { o = spriteSheet.getAnimation(c); }\n\t\t}\n\t\treturn o && o.frames[0];\n\t};\n\t\n\t/**\n\t * @method _getFrame\n\t * @param {String} character\n\t * @param {SpriteSheet} spriteSheet\n\t * @return {Object}\n\t * @protected\n\t **/\n\tp._getFrame = function(character, spriteSheet) {\n\t\tvar index = this._getFrameIndex(character, spriteSheet);\n\t\treturn index == null ? index : spriteSheet.getFrame(index);\n\t};\n\t\n\t/**\n\t * @method _getLineHeight\n\t * @param {SpriteSheet} ss\n\t * @return {Number}\n\t * @protected\n\t **/\n\tp._getLineHeight = function(ss) {\n\t\tvar frame = this._getFrame(\"1\",ss) || this._getFrame(\"T\",ss) || this._getFrame(\"L\",ss) || ss.getFrame(0);\n\t\treturn frame ? frame.rect.height : 1;\n\t};\n\t/**\n\t * @method _getSpaceWidth\n\t * @param {SpriteSheet} ss\n\t * @return {Number}\n\t * @protected\n\t **/\n\tp._getSpaceWidth = function(ss) {\n\t\tvar frame = this._getFrame(\"1\",ss) || this._getFrame(\"l\",ss) || this._getFrame(\"e\",ss) || this._getFrame(\"a\",ss) || ss.getFrame(0);\n\t\treturn frame ? frame.rect.width : 1;\n\t};\n\t\n\t/**\n\t * @method _drawText\n\t * @protected\n\t **/\n\tp._updateText = function() {\n\t\tvar x=0, y=0, o=this._oldProps, change=false, spaceW=this.spaceWidth, lineH=this.lineHeight, ss=this.spriteSheet;\n\t\tvar pool=BitmapText._spritePool, kids=this.children, childIndex=0, numKids=kids.length, sprite;\n\t\t\n\t\tfor (var n in o) {\n\t\t\tif (o[n] != this[n]) {\n\t\t\t\to[n] = this[n];\n\t\t\t\tchange = true;\n\t\t\t}\n\t\t}\n\t\tif (!change) { return; }\n\t\t\n\t\tvar hasSpace = !!this._getFrame(\" \", ss);\n\t\tif (!hasSpace && !spaceW) { spaceW = this._getSpaceWidth(ss); }\n\t\tif (!lineH) { lineH = this._getLineHeight(ss); }\n\t\t\n\t\tfor(var i=0, l=this.text.length; i<l; i++) {\n\t\t\tvar character = this.text.charAt(i);\n\t\t\tif (character == \" \" && !hasSpace) {\n\t\t\t\tx += spaceW;\n\t\t\t\tcontinue;\n\t\t\t} else if (character==\"\\n\" || character==\"\\r\") {\n\t\t\t\tif (character==\"\\r\" && this.text.charAt(i+1) == \"\\n\") { i++; } // crlf\n\t\t\t\tx = 0;\n\t\t\t\ty += lineH;\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tvar index = this._getFrameIndex(character, ss);\n\t\t\tif (index == null) { continue; }\n\t\t\t\n\t\t\tif (childIndex < numKids) {\n\t\t\t\tsprite = kids[childIndex];\n\t\t\t} else {\n\t\t\t\tkids.push(sprite = pool.length ? pool.pop() : new createjs.Sprite());\n\t\t\t\tsprite.parent = this;\n\t\t\t\tnumKids++;\n\t\t\t}\n\t\t\tsprite.spriteSheet = ss;\n\t\t\tsprite.gotoAndStop(index);\n\t\t\tsprite.x = x;\n\t\t\tsprite.y = y;\n\t\t\tchildIndex++;\n\t\t\t\n\t\t\tx += sprite.getBounds().width + this.letterSpacing;\n\t\t}\n\t\twhile (numKids > childIndex) {\n\t\t\t // faster than removeChild.\n\t\t\tpool.push(sprite = kids.pop());\n\t\t\tsprite.parent = null;\n\t\t\tnumKids--;\n\t\t}\n\t\tif (pool.length > BitmapText.maxPoolSize) { pool.length = BitmapText.maxPoolSize; }\n\t};\n\n\n\tcreatejs.BitmapText = createjs.promote(BitmapText, \"Container\");\n}());\n\n//##############################################################################\n// MovieClip.js\n//##############################################################################\n\n(function() {\n\t\"use strict\";\n\n\n// constructor:\n\t/**\n\t * The MovieClip class associates a TweenJS Timeline with an EaselJS {{#crossLink \"Container\"}}{{/crossLink}}. It allows\n\t * you to create objects which encapsulate timeline animations, state changes, and synched actions. Due to the\n\t * complexities inherent in correctly setting up a MovieClip, it is largely intended for tool output and is not included\n\t * in the main EaselJS library.\n\t *\n\t * Currently MovieClip only works properly if it is tick based (as opposed to time based) though some concessions have\n\t * been made to support time-based timelines in the future.\n\t *\n\t * <h4>Example</h4>\n\t * This example animates two shapes back and forth. The grey shape starts on the left, but we jump to a mid-point in\n\t * the animation using {{#crossLink \"MovieClip/gotoAndPlay\"}}{{/crossLink}}.\n\t *\n\t *      var stage = new createjs.Stage(\"canvas\");\n\t *      createjs.Ticker.addEventListener(\"tick\", stage);\n\t *\n\t *      var mc = new createjs.MovieClip(null, 0, true, {start:20});\n\t *      stage.addChild(mc);\n\t *\n\t *      var child1 = new createjs.Shape(\n\t *          new createjs.Graphics().beginFill(\"#999999\")\n\t *              .drawCircle(30,30,30));\n\t *      var child2 = new createjs.Shape(\n\t *          new createjs.Graphics().beginFill(\"#5a9cfb\")\n\t *              .drawCircle(30,30,30));\n\t *\n\t *      mc.timeline.addTween(\n\t *          createjs.Tween.get(child1)\n\t *              .to({x:0}).to({x:60}, 50).to({x:0}, 50));\n\t *      mc.timeline.addTween(\n\t *          createjs.Tween.get(child2)\n\t *              .to({x:60}).to({x:0}, 50).to({x:60}, 50));\n\t *\n\t *      mc.gotoAndPlay(\"start\");\n\t *\n\t * It is recommended to use <code>tween.to()</code> to animate and set properties (use no duration to have it set\n\t * immediately), and the <code>tween.wait()</code> method to create delays between animations. Note that using the\n\t * <code>tween.set()</code> method to affect properties will likely not provide the desired result.\n\t *\n\t * @class MovieClip\n\t * @main MovieClip\n\t * @extends Container\n\t * @constructor\n\t * @param {String} [mode=independent] Initial value for the mode property. One of {{#crossLink \"MovieClip/INDEPENDENT:property\"}}{{/crossLink}},\n\t * {{#crossLink \"MovieClip/SINGLE_FRAME:property\"}}{{/crossLink}}, or {{#crossLink \"MovieClip/SYNCHED:property\"}}{{/crossLink}}.\n\t * The default is {{#crossLink \"MovieClip/INDEPENDENT:property\"}}{{/crossLink}}.\n\t * @param {Number} [startPosition=0] Initial value for the {{#crossLink \"MovieClip/startPosition:property\"}}{{/crossLink}}\n\t * property.\n\t * @param {Boolean} [loop=true] Initial value for the {{#crossLink \"MovieClip/loop:property\"}}{{/crossLink}}\n\t * property. The default is `true`.\n\t * @param {Object} [labels=null] A hash of labels to pass to the {{#crossLink \"MovieClip/timeline:property\"}}{{/crossLink}}\n\t * instance associated with this MovieClip. Labels only need to be passed if they need to be used.\n\t **/\n\tfunction MovieClip(mode, startPosition, loop, labels) {\n\t\tthis.Container_constructor();\n\t\t!MovieClip.inited&&MovieClip.init(); // static init\n\t\t\n\t\t\n\t// public properties:\n\t\t/**\n\t\t * Controls how this MovieClip advances its time. Must be one of 0 (INDEPENDENT), 1 (SINGLE_FRAME), or 2 (SYNCHED).\n\t\t * See each constant for a description of the behaviour.\n\t\t * @property mode\n\t\t * @type String\n\t\t * @default null\n\t\t **/\n\t\tthis.mode = mode||MovieClip.INDEPENDENT;\n\t\n\t\t/**\n\t\t * Specifies what the first frame to play in this movieclip, or the only frame to display if mode is SINGLE_FRAME.\n\t\t * @property startPosition\n\t\t * @type Number\n\t\t * @default 0\n\t\t */\n\t\tthis.startPosition = startPosition || 0;\n\t\n\t\t/**\n\t\t * Indicates whether this MovieClip should loop when it reaches the end of its timeline.\n\t\t * @property loop\n\t\t * @type Boolean\n\t\t * @default true\n\t\t */\n\t\tthis.loop = loop;\n\t\n\t\t/**\n\t\t * The current frame of the movieclip.\n\t\t * @property currentFrame\n\t\t * @type Number\n\t\t * @default 0\n\t\t * @readonly\n\t\t */\n\t\tthis.currentFrame = 0;\n\t\n\t\t/**\n\t\t * The TweenJS Timeline that is associated with this MovieClip. This is created automatically when the MovieClip\n\t\t * instance is initialized. Animations are created by adding <a href=\"http://tweenjs.com\">TweenJS</a> Tween\n\t\t * instances to the timeline.\n\t\t *\n\t\t * <h4>Example</h4>\n\t\t *\n\t\t *      var tween = createjs.Tween.get(target).to({x:0}).to({x:100}, 30);\n\t\t *      var mc = new createjs.MovieClip();\n\t\t *      mc.timeline.addTween(tween);\n\t\t *\n\t\t * Elements can be added and removed from the timeline by toggling an \"_off\" property\n\t\t * using the <code>tweenInstance.to()</code> method. Note that using <code>Tween.set</code> is not recommended to\n\t\t * create MovieClip animations. The following example will toggle the target off on frame 0, and then back on for\n\t\t * frame 1. You can use the \"visible\" property to achieve the same effect.\n\t\t *\n\t\t *      var tween = createjs.Tween.get(target).to({_off:false})\n\t\t *          .wait(1).to({_off:true})\n\t\t *          .wait(1).to({_off:false});\n\t\t *\n\t\t * @property timeline\n\t\t * @type Timeline\n\t\t * @default null\n\t\t */\n\t\tthis.timeline = new createjs.Timeline(null, labels, {paused:true, position:startPosition, useTicks:true});\n\t\n\t\t/**\n\t\t * If true, the MovieClip's position will not advance when ticked.\n\t\t * @property paused\n\t\t * @type Boolean\n\t\t * @default false\n\t\t */\n\t\tthis.paused = false;\n\t\n\t\t/**\n\t\t * If true, actions in this MovieClip's tweens will be run when the playhead advances.\n\t\t * @property actionsEnabled\n\t\t * @type Boolean\n\t\t * @default true\n\t\t */\n\t\tthis.actionsEnabled = true;\n\t\n\t\t/**\n\t\t * If true, the MovieClip will automatically be reset to its first frame whenever the timeline adds\n\t\t * it back onto the display list. This only applies to MovieClip instances with mode=INDEPENDENT.\n\t\t * <br><br>\n\t\t * For example, if you had a character animation with a \"body\" child MovieClip instance\n\t\t * with different costumes on each frame, you could set body.autoReset = false, so that\n\t\t * you can manually change the frame it is on, without worrying that it will be reset\n\t\t * automatically.\n\t\t * @property autoReset\n\t\t * @type Boolean\n\t\t * @default true\n\t\t */\n\t\tthis.autoReset = true;\n\t\t\n\t\t/**\n\t\t * An array of bounds for each frame in the MovieClip. This is mainly intended for tool output.\n\t\t * @property frameBounds\n\t\t * @type Array\n\t\t * @default null\n\t\t */\n\t\tthis.frameBounds = this.frameBounds||null; // TODO: Deprecated. This is for backwards support of FlashCC\n\t\t\n\t\t/**\n\t\t * By default MovieClip instances advance one frame per tick. Specifying a framerate for the MovieClip\n\t\t * will cause it to advance based on elapsed time between ticks as appropriate to maintain the target\n\t\t * framerate.\n\t\t *\n\t\t * For example, if a MovieClip with a framerate of 10 is placed on a Stage being updated at 40fps, then the MovieClip will\n\t\t * advance roughly one frame every 4 ticks. This will not be exact, because the time between each tick will\n\t\t * vary slightly between frames.\n\t\t *\n\t\t * This feature is dependent on the tick event object (or an object with an appropriate \"delta\" property) being\n\t\t * passed into {{#crossLink \"Stage/update\"}}{{/crossLink}}.\n\t\t * @property framerate\n\t\t * @type {Number}\n\t\t * @default null\n\t\t **/\n\t\tthis.framerate = null;\n\t\t\n\t\t\n\t// private properties:\n\t\t/**\n\t\t * @property _synchOffset\n\t\t * @type Number\n\t\t * @default 0\n\t\t * @private\n\t\t */\n\t\tthis._synchOffset = 0;\n\t\n\t\t/**\n\t\t * @property _prevPos\n\t\t * @type Number\n\t\t * @default -1\n\t\t * @private\n\t\t */\n\t\tthis._prevPos = -1; // TODO: evaluate using a ._reset Boolean prop instead of -1.\n\t\n\t\t/**\n\t\t * @property _prevPosition\n\t\t * @type Number\n\t\t * @default 0\n\t\t * @private\n\t\t */\n\t\tthis._prevPosition = 0;\n\t\n\t\t/**\n\t\t * The time remaining from the previous tick, only applicable when .framerate is set.\n\t\t * @property _t\n\t\t * @type Number\n\t\t * @private\n\t\t */\n\t\tthis._t = 0;\n\t\n\t\t/**\n\t\t * List of display objects that are actively being managed by the MovieClip.\n\t\t * @property _managed\n\t\t * @type Object\n\t\t * @private\n\t\t */\n\t\tthis._managed = {};\n\t}\n\tvar p = createjs.extend(MovieClip, createjs.Container);\n\n\n// constants:\n\t/**\n\t * The MovieClip will advance independently of its parent, even if its parent is paused.\n\t * This is the default mode.\n\t * @property INDEPENDENT\n\t * @static\n\t * @type String\n\t * @default \"independent\"\n\t * @readonly\n\t **/\n\tMovieClip.INDEPENDENT = \"independent\";\n\n\t/**\n\t * The MovieClip will only display a single frame (as determined by the startPosition property).\n\t * @property SINGLE_FRAME\n\t * @static\n\t * @type String\n\t * @default \"single\"\n\t * @readonly\n\t **/\n\tMovieClip.SINGLE_FRAME = \"single\";\n\n\t/**\n\t * The MovieClip will be advanced only when its parent advances and will be synched to the position of\n\t * the parent MovieClip.\n\t * @property SYNCHED\n\t * @static\n\t * @type String\n\t * @default \"synched\"\n\t * @readonly\n\t **/\n\tMovieClip.SYNCHED = \"synched\";\n\t\n\t\n// static properties:\n\tMovieClip.inited = false;\n\t\n\t\n// static methods:\n\tMovieClip.init = function() {\n\t\tif (MovieClip.inited) { return; }\n\t\t// plugins introduce some overhead to Tween, so we only install this if an MC is instantiated.\n\t\tMovieClipPlugin.install();\n\t\tMovieClip.inited = true;\n\t};\n\t\n\t\n// getter / setters:\n\t/**\n\t * Use the {{#crossLink \"MovieClip/labels:property\"}}{{/crossLink}} property instead.\n\t * @method getLabels\n\t * @return {Array}\n\t * @deprecated\n\t **/\n\tp.getLabels = function() {\n\t\treturn this.timeline.getLabels();\n\t};\n\t\n\t/**\n\t * Use the {{#crossLink \"MovieClip/currentLabel:property\"}}{{/crossLink}} property instead.\n\t * @method getCurrentLabel\n\t * @return {String}\n\t * @deprecated\n\t **/\n\tp.getCurrentLabel = function() {\n\t\tthis._updateTimeline();\n\t\treturn this.timeline.getCurrentLabel();\n\t};\n\t\n\t/**\n\t * Use the {{#crossLink \"MovieClip/duration:property\"}}{{/crossLink}} property instead.\n\t * @method getDuration\n\t * @return {Number}\n\t * @protected\n\t **/\n\tp.getDuration = function() {\n\t\treturn this.timeline.duration;\n\t};\n\n\t/**\n\t * Returns an array of objects with label and position (aka frame) properties, sorted by position.\n\t * Shortcut to TweenJS: Timeline.getLabels();\n\t * @property labels\n\t * @type {Array}\n\t * @readonly\n\t **/\n\t\n\t/**\n\t * Returns the name of the label on or immediately before the current frame. See TweenJS: Timeline.getCurrentLabel()\n\t * for more information.\n\t * @property currentLabel\n\t * @type {String}\n\t * @readonly\n\t **/\n\t\n\t/**\n\t * Returns the duration of this MovieClip in seconds or ticks. Identical to {{#crossLink \"MovieClip/duration:property\"}}{{/crossLink}}\n\t * and provided for Flash API compatibility.\n\t * @property totalFrames\n\t * @type {Number}\n\t * @readonly\n\t **/\n\t\n\t/**\n\t * Returns the duration of this MovieClip in seconds or ticks.\n\t * @property duration\n\t * @type {Number}\n\t * @readonly\n\t **/\n\ttry {\n\t\tObject.defineProperties(p, {\n\t\t\tlabels: { get: p.getLabels },\n\t\t\tcurrentLabel: { get: p.getCurrentLabel },\n\t\t\ttotalFrames: { get: p.getDuration },\n\t\t\tduration: { get: p.getDuration }\n\t\t});\n\t} catch (e) {}\n\n\n// public methods:\n\t/**\n\t * Constructor alias for backwards compatibility. This method will be removed in future versions.\n\t * Subclasses should be updated to use {{#crossLink \"Utility Methods/extends\"}}{{/crossLink}}.\n\t * @method initialize\n\t * @deprecated in favour of `createjs.promote()`\n\t **/\n\tp.initialize = MovieClip; // TODO: Deprecated. This is for backwards support of FlashCC\n\n\t/**\n\t * Returns true or false indicating whether the display object would be visible if drawn to a canvas.\n\t * This does not account for whether it would be visible within the boundaries of the stage.\n\t * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n\t * @method isVisible\n\t * @return {Boolean} Boolean indicating whether the display object would be visible if drawn to a canvas\n\t **/\n\tp.isVisible = function() {\n\t\t// children are placed in draw, so we can't determine if we have content.\n\t\treturn !!(this.visible && this.alpha > 0 && this.scaleX != 0 && this.scaleY != 0);\n\t};\n\n\t/**\n\t * Draws the display object into the specified context ignoring its visible, alpha, shadow, and transform.\n\t * Returns true if the draw was handled (useful for overriding functionality).\n\t * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n\t * @method draw\n\t * @param {CanvasRenderingContext2D} ctx The canvas 2D context object to draw into.\n\t * @param {Boolean} ignoreCache Indicates whether the draw operation should ignore any current cache.\n\t * For example, used for drawing the cache (to prevent it from simply drawing an existing cache back\n\t * into itself).\n\t **/\n\tp.draw = function(ctx, ignoreCache) {\n\t\t// draw to cache first:\n\t\tif (this.DisplayObject_draw(ctx, ignoreCache)) { return true; }\n\t\tthis._updateTimeline();\n\t\tthis.Container_draw(ctx, ignoreCache);\n\t\treturn true;\n\t};\n\t\n\t/**\n\t * Sets paused to false.\n\t * @method play\n\t **/\n\tp.play = function() {\n\t\tthis.paused = false;\n\t};\n\t\n\t/**\n\t * Sets paused to true.\n\t * @method stop\n\t **/\n\tp.stop = function() {\n\t\tthis.paused = true;\n\t};\n\t\n\t/**\n\t * Advances this movie clip to the specified position or label and sets paused to false.\n\t * @method gotoAndPlay\n\t * @param {String|Number} positionOrLabel The animation name or frame number to go to.\n\t **/\n\tp.gotoAndPlay = function(positionOrLabel) {\n\t\tthis.paused = false;\n\t\tthis._goto(positionOrLabel);\n\t};\n\t\n\t/**\n\t * Advances this movie clip to the specified position or label and sets paused to true.\n\t * @method gotoAndStop\n\t * @param {String|Number} positionOrLabel The animation or frame name to go to.\n\t **/\n\tp.gotoAndStop = function(positionOrLabel) {\n\t\tthis.paused = true;\n\t\tthis._goto(positionOrLabel);\n\t};\n\t\n\t/**\n\t * Advances the playhead. This occurs automatically each tick by default.\n\t * @param [time] {Number} The amount of time in ms to advance by. Only applicable if framerate is set.\n\t * @method advance\n\t*/\n\tp.advance = function(time) {\n\t\t// TODO: should we worry at all about clips who change their own modes via frame scripts?\n\t\tvar independent = MovieClip.INDEPENDENT;\n\t\tif (this.mode != independent) { return; }\n\t\t\n\t\tvar o=this, fps = o.framerate;\n\t\twhile ((o = o.parent) && fps == null) {\n\t\t\tif (o.mode == independent) { fps = o._framerate; }\n\t\t}\n\t\tthis._framerate = fps;\n\t\t\n\t\tvar t = (fps != null && fps != -1 && time != null) ? time/(1000/fps) + this._t : 1;\n\t\tvar frames = t|0;\n\t\tthis._t = t-frames; // leftover time\n\t\t\n\t\twhile (!this.paused && frames--) {\n\t\t\tthis._prevPosition = (this._prevPos < 0) ? 0 : this._prevPosition+1;\n\t\t\tthis._updateTimeline();\n\t\t}\n\t};\n\t\n\t/**\n\t * MovieClip instances cannot be cloned.\n\t * @method clone\n\t **/\n\tp.clone = function() {\n\t\t// TODO: add support for this? Need to clone the Timeline & retarget tweens - pretty complex.\n\t\tthrow(\"MovieClip cannot be cloned.\")\n\t};\n\t\n\t/**\n\t * Returns a string representation of this object.\n\t * @method toString\n\t * @return {String} a string representation of the instance.\n\t **/\n\tp.toString = function() {\n\t\treturn \"[MovieClip (name=\"+  this.name +\")]\";\n\t};\n\n\n// private methods:\n\t/**\n\t * @method _tick\n\t * @param {Object} evtObj An event object that will be dispatched to all tick listeners. This object is reused between dispatchers to reduce construction & GC costs.\n\t * function.\n\t * @protected\n\t **/\n\tp._tick = function(evtObj) {\n\t\tthis.advance(evtObj&&evtObj.delta);\n\t\tthis.Container__tick(evtObj);\n\t};\n\t\n\t/**\n\t * @method _goto\n\t * @param {String|Number} positionOrLabel The animation name or frame number to go to.\n\t * @protected\n\t **/\n\tp._goto = function(positionOrLabel) {\n\t\tvar pos = this.timeline.resolve(positionOrLabel);\n\t\tif (pos == null) { return; }\n\t\t// prevent _updateTimeline from overwriting the new position because of a reset:\n\t\tif (this._prevPos == -1) { this._prevPos = NaN; }\n\t\tthis._prevPosition = pos;\n\t\tthis._t = 0;\n\t\tthis._updateTimeline();\n\t};\n\t\n\t/**\n\t * @method _reset\n\t * @private\n\t **/\n\tp._reset = function() {\n\t\tthis._prevPos = -1;\n\t\tthis._t = this.currentFrame = 0;\n\t\tthis.paused = false;\n\t};\n\t\n\t/**\n\t * @method _updateTimeline\n\t * @protected\n\t **/\n\tp._updateTimeline = function() {\n\t\tvar tl = this.timeline;\n\t\tvar synched = this.mode != MovieClip.INDEPENDENT;\n\t\ttl.loop = (this.loop==null) ? true : this.loop;\n\t\t\n\t\tvar pos = synched ? this.startPosition + (this.mode==MovieClip.SINGLE_FRAME?0:this._synchOffset) : (this._prevPos < 0 ? 0 : this._prevPosition);\n\t\tvar mode = synched || !this.actionsEnabled ? createjs.Tween.NONE : null;\n\t\t\n\t\t// pre-assign currentFrame so it is available to frame scripts:\n\t\tthis.currentFrame = tl._calcPosition(pos);\n\t\t\n\t\t// update timeline position, ignoring actions if this is a graphic.\n\t\ttl.setPosition(pos, mode);\n\n\t\tthis._prevPosition = tl._prevPosition;\n\t\tif (this._prevPos == tl._prevPos) { return; }\n\t\tthis.currentFrame = this._prevPos = tl._prevPos;\n\n\t\tfor (var n in this._managed) { this._managed[n] = 1; }\n\n\t\tvar tweens = tl._tweens;\n\t\tfor (var i=0, l=tweens.length; i<l; i++) {\n\t\t\tvar tween = tweens[i];\n\t\t\tvar target = tween._target;\n\t\t\tif (target == this || tween.passive) { continue; } // TODO: this assumes actions tween has this as the target. Valid?\n\t\t\tvar offset = tween._stepPosition;\n\n\t\t\tif (target instanceof createjs.DisplayObject) {\n\t\t\t\t// motion tween.\n\t\t\t\tthis._addManagedChild(target, offset);\n\t\t\t} else {\n\t\t\t\t// state tween.\n\t\t\t\tthis._setState(target.state, offset);\n\t\t\t}\n\t\t}\n\n\t\tvar kids = this.children;\n\t\tfor (i=kids.length-1; i>=0; i--) {\n\t\t\tvar id = kids[i].id;\n\t\t\tif (this._managed[id] == 1) {\n\t\t\t\tthis.removeChildAt(i);\n\t\t\t\tdelete(this._managed[id]);\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t * @method _setState\n\t * @param {Array} state\n\t * @param {Number} offset\n\t * @protected\n\t **/\n\tp._setState = function(state, offset) {\n\t\tif (!state) { return; }\n\t\tfor (var i=state.length-1;i>=0;i--) {\n\t\t\tvar o = state[i];\n\t\t\tvar target = o.t;\n\t\t\tvar props = o.p;\n\t\t\tfor (var n in props) { target[n] = props[n]; }\n\t\t\tthis._addManagedChild(target, offset);\n\t\t}\n\t};\n\n\t/**\n\t * Adds a child to the timeline, and sets it up as a managed child.\n\t * @method _addManagedChild\n\t * @param {MovieClip} child The child MovieClip to manage\n\t * @param {Number} offset\n\t * @private\n\t **/\n\tp._addManagedChild = function(child, offset) {\n\t\tif (child._off) { return; }\n\t\tthis.addChildAt(child,0);\n\n\t\tif (child instanceof MovieClip) {\n\t\t\tchild._synchOffset = offset;\n\t\t\t// TODO: this does not precisely match Flash. Flash loses track of the clip if it is renamed or removed from the timeline, which causes it to reset.\n\t\t\tif (child.mode == MovieClip.INDEPENDENT && child.autoReset && !this._managed[child.id]) { child._reset(); }\n\t\t}\n\t\tthis._managed[child.id] = 2;\n\t};\n\t\n\t/**\n\t * @method _getBounds\n\t * @param {Matrix2D} matrix\n\t * @param {Boolean} ignoreTransform\n\t * @return {Rectangle}\n\t * @protected\n\t **/\n\tp._getBounds = function(matrix, ignoreTransform) {\n\t\tvar bounds = this.DisplayObject_getBounds();\n\t\tif (!bounds) {\n\t\t\tthis._updateTimeline();\n\t\t\tif (this.frameBounds) { bounds = this._rectangle.copy(this.frameBounds[this.currentFrame]); }\n\t\t}\n\t\tif (bounds) { return this._transformBounds(bounds, matrix, ignoreTransform); }\n\t\treturn this.Container__getBounds(matrix, ignoreTransform);\n\t};\n\n\n\tcreatejs.MovieClip = createjs.promote(MovieClip, \"Container\");\n\n\n\n// MovieClipPlugin for TweenJS:\n\t/**\n\t * This plugin works with <a href=\"http://tweenjs.com\" target=\"_blank\">TweenJS</a> to prevent the startPosition\n\t * property from tweening.\n\t * @private\n\t * @class MovieClipPlugin\n\t * @constructor\n\t **/\n\tfunction MovieClipPlugin() {\n\t\tthrow(\"MovieClipPlugin cannot be instantiated.\")\n\t}\n\t\n\t/**\n\t * @method priority\n\t * @private\n\t **/\n\tMovieClipPlugin.priority = 100; // very high priority, should run first\n\n\t/**\n\t * @method install\n\t * @private\n\t **/\n\tMovieClipPlugin.install = function() {\n\t\tcreatejs.Tween.installPlugin(MovieClipPlugin, [\"startPosition\"]);\n\t};\n\t\n\t/**\n\t * @method init\n\t * @param {Tween} tween\n\t * @param {String} prop\n\t * @param {String|Number|Boolean} value\n\t * @private\n\t **/\n\tMovieClipPlugin.init = function(tween, prop, value) {\n\t\treturn value;\n\t};\n\t\n\t/**\n\t * @method step\n\t * @private\n\t **/\n\tMovieClipPlugin.step = function() {\n\t\t// unused.\n\t};\n\n\t/**\n\t * @method tween\n\t * @param {Tween} tween\n\t * @param {String} prop\n\t * @param {String | Number | Boolean} value\n\t * @param {Array} startValues\n\t * @param {Array} endValues\n\t * @param {Number} ratio\n\t * @param {Object} wait\n\t * @param {Object} end\n\t * @return {*}\n\t */\n\tMovieClipPlugin.tween = function(tween, prop, value, startValues, endValues, ratio, wait, end) {\n\t\tif (!(tween.target instanceof MovieClip)) { return value; }\n\t\treturn (ratio == 1 ? endValues[prop] : startValues[prop]);\n\t};\n\n}());\n\n//##############################################################################\n// SpriteSheetUtils.js\n//##############################################################################\n\n(function() {\n\t\"use strict\";\n\t\n\t\n// constructor:\n\t/**\n\t * The SpriteSheetUtils class is a collection of static methods for working with {{#crossLink \"SpriteSheet\"}}{{/crossLink}}s.\n\t * A sprite sheet is a series of images (usually animation frames) combined into a single image on a regular grid. For\n\t * example, an animation consisting of 8 100x100 images could be combined into a 400x200 sprite sheet (4 frames across\n\t * by 2 high). The SpriteSheetUtils class uses a static interface and should not be instantiated.\n\t * @class SpriteSheetUtils\n\t * @static\n\t **/\n\tfunction SpriteSheetUtils() {\n\t\tthrow \"SpriteSheetUtils cannot be instantiated\";\n\t}\n\n\n// private static properties:\n\t/**\n\t * @property _workingCanvas\n\t * @static\n\t * @type HTMLCanvasElement | Object\n\t * @protected\n\t*/\n\t/**\n\t * @property _workingContext\n\t * @static\n\t * @type CanvasRenderingContext2D\n\t * @protected\n\t*/\n\tvar canvas = (createjs.createCanvas?createjs.createCanvas():document.createElement(\"canvas\"));\n\tif (canvas.getContext) {\n\t\tSpriteSheetUtils._workingCanvas = canvas;\n\t\tSpriteSheetUtils._workingContext = canvas.getContext(\"2d\");\n\t\tcanvas.width = canvas.height = 1;\n\t}\n\n\n// public static methods:\n\t/**\n\t * <b>This is an experimental method, and may be buggy. Please report issues.</b><br/><br/>\n\t * Extends the existing sprite sheet by flipping the original frames horizontally, vertically, or both,\n\t * and adding appropriate animation & frame data. The flipped animations will have a suffix added to their names\n\t * (_h, _v, _hv as appropriate). Make sure the sprite sheet images are fully loaded before using this method.\n\t * <br/><br/>\n\t * For example:<br/>\n\t * SpriteSheetUtils.addFlippedFrames(mySpriteSheet, true, true);\n\t * The above would add frames that are flipped horizontally AND frames that are flipped vertically.\n\t * <br/><br/>\n\t * Note that you can also flip any display object by setting its scaleX or scaleY to a negative value. On some\n\t * browsers (especially those without hardware accelerated canvas) this can result in slightly degraded performance,\n\t * which is why addFlippedFrames is available.\n\t * @method addFlippedFrames\n\t * @static\n\t * @param {SpriteSheet} spriteSheet\n\t * @param {Boolean} horizontal If true, horizontally flipped frames will be added.\n\t * @param {Boolean} vertical If true, vertically flipped frames will be added.\n\t * @param {Boolean} both If true, frames that are flipped both horizontally and vertically will be added.\n\t * @deprecated Modern browsers perform better when flipping via a transform (ex. scaleX=-1) rendering this obsolete.\n\t **/\n\tSpriteSheetUtils.addFlippedFrames = function(spriteSheet, horizontal, vertical, both) {\n\t\tif (!horizontal && !vertical && !both) { return; }\n\n\t\tvar count = 0;\n\t\tif (horizontal) { SpriteSheetUtils._flip(spriteSheet,++count,true,false); }\n\t\tif (vertical) { SpriteSheetUtils._flip(spriteSheet,++count,false,true); }\n\t\tif (both) { SpriteSheetUtils._flip(spriteSheet,++count,true,true); }\n\t};\n\n\t/**\n\t * Returns a single frame of the specified sprite sheet as a new PNG image. An example of when this may be useful is\n\t * to use a spritesheet frame as the source for a bitmap fill.\n\t *\n\t * <strong>WARNING:</strong> In almost all cases it is better to display a single frame using a {{#crossLink \"Sprite\"}}{{/crossLink}}\n\t * with a {{#crossLink \"Sprite/gotoAndStop\"}}{{/crossLink}} call than it is to slice out a frame using this\n\t * method and display it with a Bitmap instance. You can also crop an image using the {{#crossLink \"Bitmap/sourceRect\"}}{{/crossLink}}\n\t * property of {{#crossLink \"Bitmap\"}}{{/crossLink}}.\n\t *\n\t * The extractFrame method may cause cross-domain warnings since it accesses pixels directly on the canvas.\n\t * @method extractFrame\n\t * @static\n\t * @param {SpriteSheet} spriteSheet The SpriteSheet instance to extract a frame from.\n\t * @param {Number|String} frameOrAnimation The frame number or animation name to extract. If an animation\n\t * name is specified, only the first frame of the animation will be extracted.\n\t * @return {HTMLImageElement} a single frame of the specified sprite sheet as a new PNG image.\n\t*/\n\tSpriteSheetUtils.extractFrame = function(spriteSheet, frameOrAnimation) {\n\t\tif (isNaN(frameOrAnimation)) {\n\t\t\tframeOrAnimation = spriteSheet.getAnimation(frameOrAnimation).frames[0];\n\t\t}\n\t\tvar data = spriteSheet.getFrame(frameOrAnimation);\n\t\tif (!data) { return null; }\n\t\tvar r = data.rect;\n\t\tvar canvas = SpriteSheetUtils._workingCanvas;\n\t\tcanvas.width = r.width;\n\t\tcanvas.height = r.height;\n\t\tSpriteSheetUtils._workingContext.drawImage(data.image, r.x, r.y, r.width, r.height, 0, 0, r.width, r.height);\n\t\tvar img = document.createElement(\"img\");\n\t\timg.src = canvas.toDataURL(\"image/png\");\n\t\treturn img;\n\t};\n\n\t/**\n\t * Merges the rgb channels of one image with the alpha channel of another. This can be used to combine a compressed\n\t * JPEG image containing color data with a PNG32 monochromatic image containing alpha data. With certain types of\n\t * images (those with detail that lend itself to JPEG compression) this can provide significant file size savings\n\t * versus a single RGBA PNG32. This method is very fast (generally on the order of 1-2 ms to run).\n\t * @method mergeAlpha\n\t * @static\n\t * @param {HTMLImageElement} rbgImage The image (or canvas) containing the RGB channels to use.\n\t * @param {HTMLImageElement} alphaImage The image (or canvas) containing the alpha channel to use.\n\t * @param {HTMLCanvasElement} canvas Optional. If specified, this canvas will be used and returned. If not, a new canvas will be created.\n\t * @return {HTMLCanvasElement} A canvas with the combined image data. This can be used as a source for Bitmap or SpriteSheet.\n\t * @deprecated Tools such as ImageAlpha generally provide better results. This will be moved to sandbox in the future.\n\t*/\n\tSpriteSheetUtils.mergeAlpha = function(rgbImage, alphaImage, canvas) {\n\t\tif (!canvas) { canvas = createjs.createCanvas?createjs.createCanvas():document.createElement(\"canvas\"); }\n\t\tcanvas.width = Math.max(alphaImage.width, rgbImage.width);\n\t\tcanvas.height = Math.max(alphaImage.height, rgbImage.height);\n\t\tvar ctx = canvas.getContext(\"2d\");\n\t\tctx.save();\n\t\tctx.drawImage(rgbImage,0,0);\n\t\tctx.globalCompositeOperation = \"destination-in\";\n\t\tctx.drawImage(alphaImage,0,0);\n\t\tctx.restore();\n\t\treturn canvas;\n\t};\n\n\n// private static methods:\n\tSpriteSheetUtils._flip = function(spriteSheet, count, h, v) {\n\t\tvar imgs = spriteSheet._images;\n\t\tvar canvas = SpriteSheetUtils._workingCanvas;\n\t\tvar ctx = SpriteSheetUtils._workingContext;\n\t\tvar il = imgs.length/count;\n\t\tfor (var i=0;i<il;i++) {\n\t\t\tvar src = imgs[i];\n\t\t\tsrc.__tmp = i; // a bit hacky, but faster than doing indexOf below.\n\t\t\tctx.setTransform(1,0,0,1,0,0);\n\t\t\tctx.clearRect(0,0,canvas.width+1,canvas.height+1);\n\t\t\tcanvas.width = src.width;\n\t\t\tcanvas.height = src.height;\n\t\t\tctx.setTransform(h?-1:1, 0, 0, v?-1:1, h?src.width:0, v?src.height:0);\n\t\t\tctx.drawImage(src,0,0);\n\t\t\tvar img = document.createElement(\"img\");\n\t\t\timg.src = canvas.toDataURL(\"image/png\");\n\t\t\t// work around a strange bug in Safari:\n\t\t\timg.width = src.width;\n\t\t\timg.height = src.height;\n\t\t\timgs.push(img);\n\t\t}\n\n\t\tvar frames = spriteSheet._frames;\n\t\tvar fl = frames.length/count;\n\t\tfor (i=0;i<fl;i++) {\n\t\t\tsrc = frames[i];\n\t\t\tvar rect = src.rect.clone();\n\t\t\timg = imgs[src.image.__tmp+il*count];\n\n\t\t\tvar frame = {image:img,rect:rect,regX:src.regX,regY:src.regY};\n\t\t\tif (h) {\n\t\t\t\trect.x = img.width-rect.x-rect.width; // update rect\n\t\t\t\tframe.regX = rect.width-src.regX; // update registration point\n\t\t\t}\n\t\t\tif (v) {\n\t\t\t\trect.y = img.height-rect.y-rect.height;  // update rect\n\t\t\t\tframe.regY = rect.height-src.regY; // update registration point\n\t\t\t}\n\t\t\tframes.push(frame);\n\t\t}\n\n\t\tvar sfx = \"_\"+(h?\"h\":\"\")+(v?\"v\":\"\");\n\t\tvar names = spriteSheet._animations;\n\t\tvar data = spriteSheet._data;\n\t\tvar al = names.length/count;\n\t\tfor (i=0;i<al;i++) {\n\t\t\tvar name = names[i];\n\t\t\tsrc = data[name];\n\t\t\tvar anim = {name:name+sfx,speed:src.speed,next:src.next,frames:[]};\n\t\t\tif (src.next) { anim.next += sfx; }\n\t\t\tframes = src.frames;\n\t\t\tfor (var j=0,l=frames.length;j<l;j++) {\n\t\t\t\tanim.frames.push(frames[j]+fl*count);\n\t\t\t}\n\t\t\tdata[anim.name] = anim;\n\t\t\tnames.push(anim.name);\n\t\t}\n\t};\n\n\n\tcreatejs.SpriteSheetUtils = SpriteSheetUtils;\n}());\n\n//##############################################################################\n// SpriteSheetBuilder.js\n//##############################################################################\n\n(function() {\n\t\"use strict\";\n\n\n// constructor:\n\t/**\n\t * The SpriteSheetBuilder allows you to generate {{#crossLink \"SpriteSheet\"}}{{/crossLink}} instances at run time\n\t * from any display object. This can allow you to maintain your assets as vector graphics (for low file size), and\n\t * render them at run time as SpriteSheets for better performance.\n\t *\n\t * SpriteSheets can be built either synchronously, or asynchronously, so that large SpriteSheets can be generated\n\t * without locking the UI.\n\t *\n\t * Note that the \"images\" used in the generated SpriteSheet are actually canvas elements, and that they will be\n\t * sized to the nearest power of 2 up to the value of {{#crossLink \"SpriteSheetBuilder/maxWidth:property\"}}{{/crossLink}}\n\t * or {{#crossLink \"SpriteSheetBuilder/maxHeight:property\"}}{{/crossLink}}.\n\t * @class SpriteSheetBuilder\n\t * @param {Number} [framerate=0] The {{#crossLink \"SpriteSheet/framerate:property\"}}{{/crossLink}} of\n\t * {{#crossLink \"SpriteSheet\"}}{{/crossLink}} instances that are created.\n\t * @extends EventDispatcher\n\t * @constructor\n\t **/\n\tfunction SpriteSheetBuilder(framerate) {\n\t\tthis.EventDispatcher_constructor();\n\t\t\n\t// public properties:\n\t\t/**\n\t\t * The maximum width for the images (not individual frames) in the generated SpriteSheet. It is recommended to\n\t\t * use a power of 2 for this value (ex. 1024, 2048, 4096). If the frames cannot all fit within the max\n\t\t * dimensions, then additional images will be created as needed.\n\t\t * @property maxWidth\n\t\t * @type Number\n\t\t * @default 2048\n\t\t*/\n\t\tthis.maxWidth = 2048;\n\t\n\t\t/**\n\t\t * The maximum height for the images (not individual frames) in the generated SpriteSheet. It is recommended to\n\t\t * use a power of 2 for this value (ex. 1024, 2048, 4096). If the frames cannot all fit within the max\n\t\t * dimensions, then additional images will be created as needed.\n\t\t * @property maxHeight\n\t\t * @type Number\n\t\t * @default 2048\n\t\t **/\n\t\tthis.maxHeight = 2048;\n\t\n\t\t/**\n\t\t * The SpriteSheet that was generated. This will be null before a build is completed successfully.\n\t\t * @property spriteSheet\n\t\t * @type SpriteSheet\n\t\t **/\n\t\tthis.spriteSheet = null;\n\t\n\t\t/**\n\t\t * The scale to apply when drawing all frames to the SpriteSheet. This is multiplied against any scale specified\n\t\t * in the addFrame call. This can be used, for example, to generate a SpriteSheet at run time that is tailored\n\t\t * to the a specific device resolution (ex. tablet vs mobile).\n\t\t * @property scale\n\t\t * @type Number\n\t\t * @default 1\n\t\t **/\n\t\tthis.scale = 1;\n\t\n\t\t/**\n\t\t* The padding to use between frames. This is helpful to preserve antialiasing on drawn vector content.\n\t\t* @property padding\n\t\t* @type Number\n\t\t* @default 1\n\t\t**/\n\t\tthis.padding = 1;\n\t\n\t\t/**\n\t\t * A number from 0.01 to 0.99 that indicates what percentage of time the builder can use. This can be\n\t\t * thought of as the number of seconds per second the builder will use. For example, with a timeSlice value of 0.3,\n\t\t * the builder will run 20 times per second, using approximately 15ms per build (30% of available time, or 0.3s per second).\n\t\t * Defaults to 0.3.\n\t\t * @property timeSlice\n\t\t * @type Number\n\t\t * @default 0.3\n\t\t **/\n\t\tthis.timeSlice = 0.3;\n\t\n\t\t/**\n\t\t * A value between 0 and 1 that indicates the progress of a build, or -1 if a build has not\n\t\t * been initiated.\n\t\t * @property progress\n\t\t * @type Number\n\t\t * @default -1\n\t\t * @readonly\n\t\t */\n\t\tthis.progress = -1;\n\n\t\t/**\n\t\t * A {{#crossLink \"SpriteSheet/framerate:property\"}}{{/crossLink}} value that will be passed to new {{#crossLink \"SpriteSheet\"}}{{/crossLink}} instances that are\n\t\t * created. If no framerate is specified (or it is 0), then SpriteSheets will use the {{#crossLink \"Ticker\"}}{{/crossLink}}\n\t\t * framerate.\n\t\t * @property framerate\n\t\t * @type Number\n\t\t * @default 0\n\t\t */\n\t\tthis.framerate = framerate || 0;\n\t\n\t\n\t// private properties:\n\t\t/**\n\t\t * @property _frames\n\t\t * @protected\n\t\t * @type Array\n\t\t **/\n\t\tthis._frames = [];\n\t\n\t\t/**\n\t\t * @property _animations\n\t\t * @protected\n\t\t * @type Array\n\t\t **/\n\t\tthis._animations = {};\n\t\n\t\t/**\n\t\t * @property _data\n\t\t * @protected\n\t\t * @type Array\n\t\t **/\n\t\tthis._data = null;\n\t\n\t\t/**\n\t\t * @property _nextFrameIndex\n\t\t * @protected\n\t\t * @type Number\n\t\t **/\n\t\tthis._nextFrameIndex = 0;\n\t\n\t\t/**\n\t\t * @property _index\n\t\t * @protected\n\t\t * @type Number\n\t\t **/\n\t\tthis._index = 0;\n\t\n\t\t/**\n\t\t * @property _timerID\n\t\t * @protected\n\t\t * @type Number\n\t\t **/\n\t\tthis._timerID = null;\n\t\n\t\t/**\n\t\t * @property _scale\n\t\t * @protected\n\t\t * @type Number\n\t\t **/\n\t\tthis._scale = 1;\n\t}\n\tvar p = createjs.extend(SpriteSheetBuilder, createjs.EventDispatcher);\n\n\t/**\n\t * <strong>REMOVED</strong>. Removed in favor of using `MySuperClass_constructor`.\n\t * See {{#crossLink \"Utility Methods/extend\"}}{{/crossLink}} and {{#crossLink \"Utility Methods/promote\"}}{{/crossLink}}\n\t * for details.\n\t *\n\t * There is an inheritance tutorial distributed with EaselJS in /tutorials/Inheritance.\n\t *\n\t * @method initialize\n\t * @protected\n\t * @deprecated\n\t */\n\t// p.initialize = function() {}; // searchable for devs wondering where it is.\n\n\n// constants:\n\tSpriteSheetBuilder.ERR_DIMENSIONS = \"frame dimensions exceed max spritesheet dimensions\";\n\tSpriteSheetBuilder.ERR_RUNNING = \"a build is already running\";\n\n// events:\n\t/**\n\t * Dispatched when a build completes.\n\t * @event complete\n\t * @param {Object} target The object that dispatched the event.\n\t * @param {String} type The event type.\n\t * @since 0.6.0\n\t */\n\n\t/**\n\t * Dispatched when an asynchronous build has progress.\n\t * @event progress\n\t * @param {Object} target The object that dispatched the event.\n\t * @param {String} type The event type.\n\t * @param {Number} progress The current progress value (0-1).\n\t * @since 0.6.0\n\t */\n\n\n// public methods:\n\t/**\n\t * Adds a frame to the {{#crossLink \"SpriteSheet\"}}{{/crossLink}}. Note that the frame will not be drawn until you\n\t * call {{#crossLink \"SpriteSheetBuilder/build\"}}{{/crossLink}} method. The optional setup params allow you to have\n\t * a function run immediately before the draw occurs. For example, this allows you to add a single source multiple\n\t * times, but manipulate it or its children to change it to generate different frames.\n\t *\n\t * Note that the source's transformations (x, y, scale, rotate, alpha) will be ignored, except for regX/Y. To apply\n\t * transforms to a source object and have them captured in the SpriteSheet, simply place it into a {{#crossLink \"Container\"}}{{/crossLink}}\n\t * and pass in the Container as the source.\n\t * @method addFrame\n\t * @param {DisplayObject} source The source {{#crossLink \"DisplayObject\"}}{{/crossLink}}  to draw as the frame.\n\t * @param {Rectangle} [sourceRect] A {{#crossLink \"Rectangle\"}}{{/crossLink}} defining the portion of the\n\t * source to draw to the frame. If not specified, it will look for a `getBounds` method, bounds property, or\n\t * `nominalBounds` property on the source to use. If one is not found, the frame will be skipped.\n\t * @param {Number} [scale=1] Optional. The scale to draw this frame at. Default is 1.\n\t * @param {Function} [setupFunction] A function to call immediately before drawing this frame. It will be called with two parameters: the source, and setupData.\n\t * @param {Object} [setupData] Arbitrary setup data to pass to setupFunction as the second parameter.\n\t * @return {Number} The index of the frame that was just added, or null if a sourceRect could not be determined.\n\t **/\n\tp.addFrame = function(source, sourceRect, scale, setupFunction, setupData) {\n\t\tif (this._data) { throw SpriteSheetBuilder.ERR_RUNNING; }\n\t\tvar rect = sourceRect||source.bounds||source.nominalBounds;\n\t\tif (!rect&&source.getBounds) { rect = source.getBounds(); }\n\t\tif (!rect) { return null; }\n\t\tscale = scale||1;\n\t\treturn this._frames.push({source:source, sourceRect:rect, scale:scale, funct:setupFunction, data:setupData, index:this._frames.length, height:rect.height*scale})-1;\n\t};\n\n\t/**\n\t * Adds an animation that will be included in the created {{#crossLink \"SpriteSheet\"}}{{/crossLink}}.\n\t * @method addAnimation\n\t * @param {String} name The name for the animation.\n\t * @param {Array} frames An array of frame indexes that comprise the animation. Ex. [3,6,5] would describe an animation\n\t * that played frame indexes 3, 6, and 5 in that order.\n\t * @param {String} [next] Specifies the name of the animation to continue to after this animation ends. You can\n\t * also pass false to have the animation stop when it ends. By default it will loop to the start of the same animation.\n\t * @param {Number} [speed] Specifies a frame advance speed for this animation. For example, a value of 0.5 would\n\t * cause the animation to advance every second tick. Note that earlier versions used `frequency` instead, which had\n\t * the opposite effect.\n\t **/\n\tp.addAnimation = function(name, frames, next, speed) {\n\t\tif (this._data) { throw SpriteSheetBuilder.ERR_RUNNING; }\n\t\tthis._animations[name] = {frames:frames, next:next, speed:speed};\n\t};\n\n\t/**\n\t * This will take a {{#crossLink \"MovieClip\"}}{{/crossLink}} instance, and add its frames and labels to this\n\t * builder. Labels will be added as an animation running from the label index to the next label. For example, if\n\t * there is a label named \"foo\" at frame 0 and a label named \"bar\" at frame 10, in a MovieClip with 15 frames, it\n\t * will add an animation named \"foo\" that runs from frame index 0 to 9, and an animation named \"bar\" that runs from\n\t * frame index 10 to 14.\n\t *\n\t * Note that this will iterate through the full MovieClip with {{#crossLink \"MovieClip/actionsEnabled:property\"}}{{/crossLink}}\n\t * set to `false`, ending on the last frame.\n\t * @method addMovieClip\n\t * @param {MovieClip} source The source MovieClip instance to add to the SpriteSheet.\n\t * @param {Rectangle} [sourceRect] A {{#crossLink \"Rectangle\"}}{{/crossLink}} defining the portion of the source to\n\t * draw to the frame. If not specified, it will look for a {{#crossLink \"DisplayObject/getBounds\"}}{{/crossLink}}\n\t * method, `frameBounds` Array, `bounds` property, or `nominalBounds` property on the source to use. If one is not\n\t * found, the MovieClip will be skipped.\n\t * @param {Number} [scale=1] The scale to draw the movie clip at.\n\t * @param {Function} [setupFunction] A function to call immediately before drawing each frame. It will be called\n\t * with three parameters: the source, setupData, and the frame index.\n\t * @param {Object} [setupData] Arbitrary setup data to pass to setupFunction as the second parameter.\n\t * @param {Function} [labelFunction] This method will be called for each MovieClip label that is added with four\n\t * parameters: the label name, the source MovieClip instance, the starting frame index (in the movieclip timeline)\n\t * and the end index. It must return a new name for the label/animation, or `false` to exclude the label.\n\t **/\n\tp.addMovieClip = function(source, sourceRect, scale, setupFunction, setupData, labelFunction) {\n\t\tif (this._data) { throw SpriteSheetBuilder.ERR_RUNNING; }\n\t\tvar rects = source.frameBounds;\n\t\tvar rect = sourceRect||source.bounds||source.nominalBounds;\n\t\tif (!rect&&source.getBounds) { rect = source.getBounds(); }\n\t\tif (!rect && !rects) { return; }\n\n\t\tvar i, l, baseFrameIndex = this._frames.length;\n\t\tvar duration = source.timeline.duration;\n\t\tfor (i=0; i<duration; i++) {\n\t\t\tvar r = (rects&&rects[i]) ? rects[i] : rect;\n\t\t\tthis.addFrame(source, r, scale, this._setupMovieClipFrame, {i:i, f:setupFunction, d:setupData});\n\t\t}\n\t\tvar labels = source.timeline._labels;\n\t\tvar lbls = [];\n\t\tfor (var n in labels) {\n\t\t\tlbls.push({index:labels[n], label:n});\n\t\t}\n\t\tif (lbls.length) {\n\t\t\tlbls.sort(function(a,b){ return a.index-b.index; });\n\t\t\tfor (i=0,l=lbls.length; i<l; i++) {\n\t\t\t\tvar label = lbls[i].label;\n\t\t\t\tvar start = baseFrameIndex+lbls[i].index;\n\t\t\t\tvar end = baseFrameIndex+((i == l-1) ? duration : lbls[i+1].index);\n\t\t\t\tvar frames = [];\n\t\t\t\tfor (var j=start; j<end; j++) { frames.push(j); }\n\t\t\t\tif (labelFunction) {\n\t\t\t\t\tlabel = labelFunction(label, source, start, end);\n\t\t\t\t\tif (!label) { continue; }\n\t\t\t\t}\n\t\t\t\tthis.addAnimation(label, frames, true); // for now, this loops all animations.\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t * Builds a {{#crossLink \"SpriteSheet\"}}{{/crossLink}} instance based on the current frames.\n\t * @method build\n\t * @return {SpriteSheet} The created SpriteSheet instance, or null if a build is already running or an error\n\t * occurred.\n\t **/\n\tp.build = function() {\n\t\tif (this._data) { throw SpriteSheetBuilder.ERR_RUNNING; }\n\t\tthis._startBuild();\n\t\twhile (this._drawNext()) {}\n\t\tthis._endBuild();\n\t\treturn this.spriteSheet;\n\t};\n\n\t/**\n\t * Asynchronously builds a {{#crossLink \"SpriteSheet\"}}{{/crossLink}} instance based on the current frames. It will\n\t * run 20 times per second, using an amount of time defined by `timeSlice`. When it is complete it will call the\n\t * specified callback.\n\t * @method buildAsync\n\t * @param {Number} [timeSlice] Sets the timeSlice property on this instance.\n\t **/\n\tp.buildAsync = function(timeSlice) {\n\t\tif (this._data) { throw SpriteSheetBuilder.ERR_RUNNING; }\n\t\tthis.timeSlice = timeSlice;\n\t\tthis._startBuild();\n\t\tvar _this = this;\n\t\tthis._timerID = setTimeout(function() { _this._run(); }, 50-Math.max(0.01, Math.min(0.99, this.timeSlice||0.3))*50);\n\t};\n\n\t/**\n\t * Stops the current asynchronous build.\n\t * @method stopAsync\n\t **/\n\tp.stopAsync = function() {\n\t\tclearTimeout(this._timerID);\n\t\tthis._data = null;\n\t};\n\n\t/**\n\t * SpriteSheetBuilder instances cannot be cloned.\n\t * @method clone\n\t **/\n\tp.clone = function() {\n\t\tthrow(\"SpriteSheetBuilder cannot be cloned.\");\n\t};\n\n\t/**\n\t * Returns a string representation of this object.\n\t * @method toString\n\t * @return {String} a string representation of the instance.\n\t **/\n\tp.toString = function() {\n\t\treturn \"[SpriteSheetBuilder]\";\n\t};\n\n\n// private methods:\n\t/**\n\t * @method _startBuild\n\t * @protected\n\t **/\n\tp._startBuild = function() {\n\t\tvar pad = this.padding||0;\n\t\tthis.progress = 0;\n\t\tthis.spriteSheet = null;\n\t\tthis._index = 0;\n\t\tthis._scale = this.scale;\n\t\tvar dataFrames = [];\n\t\tthis._data = {\n\t\t\timages: [],\n\t\t\tframes: dataFrames,\n\t\t\tframerate: this.framerate,\n\t\t\tanimations: this._animations // TODO: should we \"clone\" _animations in case someone adds more animations after a build?\n\t\t};\n\n\t\tvar frames = this._frames.slice();\n\t\tframes.sort(function(a,b) { return (a.height<=b.height) ? -1 : 1; });\n\n\t\tif (frames[frames.length-1].height+pad*2 > this.maxHeight) { throw SpriteSheetBuilder.ERR_DIMENSIONS; }\n\t\tvar y=0, x=0;\n\t\tvar img = 0;\n\t\twhile (frames.length) {\n\t\t\tvar o = this._fillRow(frames, y, img, dataFrames, pad);\n\t\t\tif (o.w > x) { x = o.w; }\n\t\t\ty += o.h;\n\t\t\tif (!o.h || !frames.length) {\n\t\t\t\tvar canvas = createjs.createCanvas?createjs.createCanvas():document.createElement(\"canvas\");\n\t\t\t\tcanvas.width = this._getSize(x,this.maxWidth);\n\t\t\t\tcanvas.height = this._getSize(y,this.maxHeight);\n\t\t\t\tthis._data.images[img] = canvas;\n\t\t\t\tif (!o.h) {\n\t\t\t\t\tx=y=0;\n\t\t\t\t\timg++;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\t\n\t/**\n\t * @method _setupMovieClipFrame\n\t * @protected\n\t * @return {Number} The width & height of the row.\n\t **/\n\tp._setupMovieClipFrame = function(source, data) {\n\t\tvar ae = source.actionsEnabled;\n\t\tsource.actionsEnabled = false;\n\t\tsource.gotoAndStop(data.i);\n\t\tsource.actionsEnabled = ae;\n\t\tdata.f&&data.f(source, data.d, data.i);\n\t};\n\n\t/**\n\t * @method _getSize\n\t * @protected\n\t * @return {Number} The width & height of the row.\n\t **/\n\tp._getSize = function(size,max) {\n\t\tvar pow = 4;\n\t\twhile (Math.pow(2,++pow) < size){}\n\t\treturn Math.min(max,Math.pow(2,pow));\n\t};\n\n\t/**\n\t * @method _fillRow\n\t * @param {Array} frames\n\t * @param {Number} y\n\t * @param {HTMLImageElement} img\n\t * @param {Object} dataFrames\n\t * @param {Number} pad\n\t * @protected\n\t * @return {Number} The width & height of the row.\n\t **/\n\tp._fillRow = function(frames, y, img, dataFrames, pad) {\n\t\tvar w = this.maxWidth;\n\t\tvar maxH = this.maxHeight;\n\t\ty += pad;\n\t\tvar h = maxH-y;\n\t\tvar x = pad;\n\t\tvar height = 0;\n\t\tfor (var i=frames.length-1; i>=0; i--) {\n\t\t\tvar frame = frames[i];\n\t\t\tvar sc = this._scale*frame.scale;\n\t\t\tvar rect = frame.sourceRect;\n\t\t\tvar source = frame.source;\n\t\t\tvar rx = Math.floor(sc*rect.x-pad);\n\t\t\tvar ry = Math.floor(sc*rect.y-pad);\n\t\t\tvar rh = Math.ceil(sc*rect.height+pad*2);\n\t\t\tvar rw = Math.ceil(sc*rect.width+pad*2);\n\t\t\tif (rw > w) { throw SpriteSheetBuilder.ERR_DIMENSIONS; }\n\t\t\tif (rh > h || x+rw > w) { continue; }\n\t\t\tframe.img = img;\n\t\t\tframe.rect = new createjs.Rectangle(x,y,rw,rh);\n\t\t\theight = height || rh;\n\t\t\tframes.splice(i,1);\n\t\t\tdataFrames[frame.index] = [x,y,rw,rh,img,Math.round(-rx+sc*source.regX-pad),Math.round(-ry+sc*source.regY-pad)];\n\t\t\tx += rw;\n\t\t}\n\t\treturn {w:x, h:height};\n\t};\n\n\t/**\n\t * @method _endBuild\n\t * @protected\n\t **/\n\tp._endBuild = function() {\n\t\tthis.spriteSheet = new createjs.SpriteSheet(this._data);\n\t\tthis._data = null;\n\t\tthis.progress = 1;\n\t\tthis.dispatchEvent(\"complete\");\n\t};\n\n\t/**\n\t * @method _run\n\t * @protected\n\t **/\n\tp._run = function() {\n\t\tvar ts = Math.max(0.01, Math.min(0.99, this.timeSlice||0.3))*50;\n\t\tvar t = (new Date()).getTime()+ts;\n\t\tvar complete = false;\n\t\twhile (t > (new Date()).getTime()) {\n\t\t\tif (!this._drawNext()) { complete = true; break; }\n\t\t}\n\t\tif (complete) {\n\t\t\tthis._endBuild();\n\t\t} else {\n\t\t\tvar _this = this;\n\t\t\tthis._timerID = setTimeout(function() { _this._run(); }, 50-ts);\n\t\t}\n\t\tvar p = this.progress = this._index/this._frames.length;\n\t\tif (this.hasEventListener(\"progress\")) {\n\t\t\tvar evt = new createjs.Event(\"progress\");\n\t\t\tevt.progress = p;\n\t\t\tthis.dispatchEvent(evt);\n\t\t}\n\t};\n\n\t/**\n\t * @method _drawNext\n\t * @protected\n\t * @return Boolean Returns false if this is the last draw.\n\t **/\n\tp._drawNext = function() {\n\t\tvar frame = this._frames[this._index];\n\t\tvar sc = frame.scale*this._scale;\n\t\tvar rect = frame.rect;\n\t\tvar sourceRect = frame.sourceRect;\n\t\tvar canvas = this._data.images[frame.img];\n\t\tvar ctx = canvas.getContext(\"2d\");\n\t\tframe.funct&&frame.funct(frame.source, frame.data);\n\t\tctx.save();\n\t\tctx.beginPath();\n\t\tctx.rect(rect.x, rect.y, rect.width, rect.height);\n\t\tctx.clip();\n\t\tctx.translate(Math.ceil(rect.x-sourceRect.x*sc), Math.ceil(rect.y-sourceRect.y*sc));\n\t\tctx.scale(sc,sc);\n\t\tframe.source.draw(ctx); // display object will draw itself.\n\t\tctx.restore();\n\t\treturn (++this._index) < this._frames.length;\n\t};\n\n\n\tcreatejs.SpriteSheetBuilder = createjs.promote(SpriteSheetBuilder, \"EventDispatcher\");\n}());\n\n//##############################################################################\n// DOMElement.js\n//##############################################################################\n\n(function() {\n\t\"use strict\";\n\n\n// constructor:\n\t/**\n\t * <b>This class is still experimental, and more advanced use is likely to be buggy. Please report bugs.</b>\n\t *\n\t * A DOMElement allows you to associate a HTMLElement with the display list. It will be transformed\n\t * within the DOM as though it is child of the {{#crossLink \"Container\"}}{{/crossLink}} it is added to. However, it is\n\t * not rendered to canvas, and as such will retain whatever z-index it has relative to the canvas (ie. it will be\n\t * drawn in front of or behind the canvas).\n\t *\n\t * The position of a DOMElement is relative to their parent node in the DOM. It is recommended that\n\t * the DOM Object be added to a div that also contains the canvas so that they share the same position\n\t * on the page.\n\t *\n\t * DOMElement is useful for positioning HTML elements over top of canvas content, and for elements\n\t * that you want to display outside the bounds of the canvas. For example, a tooltip with rich HTML\n\t * content.\n\t *\n\t * <h4>Mouse Interaction</h4>\n\t *\n\t * DOMElement instances are not full EaselJS display objects, and do not participate in EaselJS mouse\n\t * events or support methods like hitTest. To get mouse events from a DOMElement, you must instead add handlers to\n\t * the htmlElement (note, this does not support EventDispatcher)\n\t *\n\t *      var domElement = new createjs.DOMElement(htmlElement);\n\t *      domElement.htmlElement.onclick = function() {\n\t *          console.log(\"clicked\");\n\t *      }\n\t *\n\t * @class DOMElement\n\t * @extends DisplayObject\n\t * @constructor\n\t * @param {HTMLElement} htmlElement A reference or id for the DOM element to manage.\n\t */\n\tfunction DOMElement(htmlElement) {\n\t\tthis.DisplayObject_constructor();\n\t\t\n\t\tif (typeof(htmlElement)==\"string\") { htmlElement = document.getElementById(htmlElement); }\n\t\tthis.mouseEnabled = false;\n\t\t\n\t\tvar style = htmlElement.style;\n\t\tstyle.position = \"absolute\";\n\t\tstyle.transformOrigin = style.WebkitTransformOrigin = style.msTransformOrigin = style.MozTransformOrigin = style.OTransformOrigin = \"0% 0%\";\n\t\t\n\t\t\n\t// public properties:\n\t\t/**\n\t\t * The DOM object to manage.\n\t\t * @property htmlElement\n\t\t * @type HTMLElement\n\t\t */\n\t\tthis.htmlElement = htmlElement;\n\t\n\t\n\t// private properties:\n\t\t/**\n\t\t * @property _oldMtx\n\t\t * @type Matrix2D\n\t\t * @protected\n\t\t */\n\t\tthis._oldProps = null;\n\t}\n\tvar p = createjs.extend(DOMElement, createjs.DisplayObject);\n\n\t// TODO: deprecated\n\t// p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\n\n\n// public methods:\n\t/**\n\t * Returns true or false indicating whether the display object would be visible if drawn to a canvas.\n\t * This does not account for whether it would be visible within the boundaries of the stage.\n\t * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n\t * @method isVisible\n\t * @return {Boolean} Boolean indicating whether the display object would be visible if drawn to a canvas\n\t */\n\tp.isVisible = function() {\n\t\treturn this.htmlElement != null;\n\t};\n\n\t/**\n\t * Draws the display object into the specified context ignoring its visible, alpha, shadow, and transform.\n\t * Returns true if the draw was handled (useful for overriding functionality).\n\t * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n\t * @method draw\n\t * @param {CanvasRenderingContext2D} ctx The canvas 2D context object to draw into.\n\t * @param {Boolean} ignoreCache Indicates whether the draw operation should ignore any current cache.\n\t * For example, used for drawing the cache (to prevent it from simply drawing an existing cache back\n\t * into itself).\n\t * @return {Boolean}\n\t */\n\tp.draw = function(ctx, ignoreCache) {\n\t\t// this relies on the _tick method because draw isn't called if the parent is not visible.\n\t\t// the actual update happens in _handleDrawEnd\n\t\treturn true;\n\t};\n\n\t/**\n\t * Not applicable to DOMElement.\n\t * @method cache\n\t */\n\tp.cache = function() {};\n\n\t/**\n\t * Not applicable to DOMElement.\n\t * @method uncache\n\t */\n\tp.uncache = function() {};\n\n\t/**\n\t * Not applicable to DOMElement.\n\t * @method updateCache\n\t */\n\tp.updateCache = function() {};\n\n\t/**\n\t * Not applicable to DOMElement.\n\t * @method hitTest\n\t */\n\tp.hitTest = function() {};\n\n\t/**\n\t * Not applicable to DOMElement.\n\t * @method localToGlobal\n\t */\n\tp.localToGlobal = function() {};\n\n\t/**\n\t * Not applicable to DOMElement.\n\t * @method globalToLocal\n\t */\n\tp.globalToLocal = function() {};\n\n\t/**\n\t * Not applicable to DOMElement.\n\t * @method localToLocal\n\t */\n\tp.localToLocal = function() {};\n\n\t/**\n\t * DOMElement cannot be cloned. Throws an error.\n\t * @method clone\n\t */\n\tp.clone = function() {\n\t\tthrow(\"DOMElement cannot be cloned.\")\n\t};\n\n\t/**\n\t * Returns a string representation of this object.\n\t * @method toString\n\t * @return {String} a string representation of the instance.\n\t */\n\tp.toString = function() {\n\t\treturn \"[DOMElement (name=\"+  this.name +\")]\";\n\t};\n\n\t/**\n     * Interaction events should be added to `htmlElement`, and not the DOMElement instance, since DOMElement instances\n\t * are not full EaselJS display objects and do not participate in EaselJS mouse events.\n\t * @event click\n\t */\n\n     /**\n     * Interaction events should be added to `htmlElement`, and not the DOMElement instance, since DOMElement instances\n \t * are not full EaselJS display objects and do not participate in EaselJS mouse events.\n\t * @event dblClick\n\t */\n\n     /**\n      * Interaction events should be added to `htmlElement`, and not the DOMElement instance, since DOMElement instances\n \t  * are not full EaselJS display objects and do not participate in EaselJS mouse events.\n\t  * @event mousedown\n\t  */\n\n     /**\n      * The HTMLElement can listen for the mouseover event, not the DOMElement instance.\n      * Since DOMElement instances are not full EaselJS display objects and do not participate in EaselJS mouse events.\n      * @event mouseover\n\t  */\n\n     /**\n      * Not applicable to DOMElement.\n\t  * @event tick\n\t  */\n\n\n// private methods:\n\t/**\n\t * @method _tick\n\t * @param {Object} evtObj An event object that will be dispatched to all tick listeners. This object is reused between dispatchers to reduce construction & GC costs.\n\t * function.\n\t * @protected\n\t */\n\tp._tick = function(evtObj) {\n\t\tvar stage = this.getStage();\n\t\tstage&&stage.on(\"drawend\", this._handleDrawEnd, this, true);\n\t\tthis.DisplayObject__tick(evtObj);\n\t};\n\t\n\t/**\n\t * @method _handleDrawEnd\n\t * @param {Event} evt\n\t * @protected\n\t */\n\tp._handleDrawEnd = function(evt) {\n\t\tvar o = this.htmlElement;\n\t\tif (!o) { return; }\n\t\tvar style = o.style;\n\t\t\n\t\tvar props = this.getConcatenatedDisplayProps(this._props), mtx = props.matrix;\n\t\t\n\t\tvar visibility = props.visible ? \"visible\" : \"hidden\";\n\t\tif (visibility != style.visibility) { style.visibility = visibility; }\n\t\tif (!props.visible) { return; }\n\t\t\n\t\tvar oldProps = this._oldProps, oldMtx = oldProps&&oldProps.matrix;\n\t\tvar n = 10000; // precision\n\t\t\n\t\tif (!oldMtx || !oldMtx.equals(mtx)) {\n\t\t\tvar str = \"matrix(\" + (mtx.a*n|0)/n +\",\"+ (mtx.b*n|0)/n +\",\"+ (mtx.c*n|0)/n +\",\"+ (mtx.d*n|0)/n +\",\"+ (mtx.tx+0.5|0);\n\t\t\tstyle.transform = style.WebkitTransform = style.OTransform = style.msTransform = str +\",\"+ (mtx.ty+0.5|0) +\")\";\n\t\t\tstyle.MozTransform = str +\"px,\"+ (mtx.ty+0.5|0) +\"px)\";\n\t\t\tif (!oldProps) { oldProps = this._oldProps = new createjs.DisplayProps(true, NaN); }\n\t\t\toldProps.matrix.copy(mtx);\n\t\t}\n\t\t\n\t\tif (oldProps.alpha != props.alpha) {\n\t\t\tstyle.opacity = \"\"+(props.alpha*n|0)/n;\n\t\t\toldProps.alpha = props.alpha;\n\t\t}\n\t};\n\n\n\tcreatejs.DOMElement = createjs.promote(DOMElement, \"DisplayObject\");\n}());\n\n//##############################################################################\n// Filter.js\n//##############################################################################\n\n(function() {\n\t\"use strict\";\n\n\n// constructor:\n\t/**\n\t * Base class that all filters should inherit from. Filters need to be applied to objects that have been cached using\n\t * the {{#crossLink \"DisplayObject/cache\"}}{{/crossLink}} method. If an object changes, please cache it again, or use\n\t * {{#crossLink \"DisplayObject/updateCache\"}}{{/crossLink}}. Note that the filters must be applied before caching.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      myInstance.filters = [\n\t *          new createjs.ColorFilter(0, 0, 0, 1, 255, 0, 0),\n\t *          new createjs.BlurFilter(5, 5, 10)\n\t *      ];\n\t *      myInstance.cache(0,0, 100, 100);\n\t *\n\t * Note that each filter can implement a {{#crossLink \"Filter/getBounds\"}}{{/crossLink}} method, which returns the\n\t * margins that need to be applied in order to fully display the filter. For example, the {{#crossLink \"BlurFilter\"}}{{/crossLink}}\n\t * will cause an object to feather outwards, resulting in a margin around the shape.\n\t *\n\t * <h4>EaselJS Filters</h4>\n\t * EaselJS comes with a number of pre-built filters:\n\t * <ul><li>{{#crossLink \"AlphaMapFilter\"}}{{/crossLink}} : Map a greyscale image to the alpha channel of a display object</li>\n\t *      <li>{{#crossLink \"AlphaMaskFilter\"}}{{/crossLink}}: Map an image's alpha channel to the alpha channel of a display object</li>\n\t *      <li>{{#crossLink \"BlurFilter\"}}{{/crossLink}}: Apply vertical and horizontal blur to a display object</li>\n\t *      <li>{{#crossLink \"ColorFilter\"}}{{/crossLink}}: Color transform a display object</li>\n\t *      <li>{{#crossLink \"ColorMatrixFilter\"}}{{/crossLink}}: Transform an image using a {{#crossLink \"ColorMatrix\"}}{{/crossLink}}</li>\n\t * </ul>\n\t *\n\t * @class Filter\n\t * @constructor\n\t **/\n\tfunction Filter() {}\n\tvar p = Filter.prototype;\n\n\t/**\n\t * <strong>REMOVED</strong>. Removed in favor of using `MySuperClass_constructor`.\n\t * See {{#crossLink \"Utility Methods/extend\"}}{{/crossLink}} and {{#crossLink \"Utility Methods/promote\"}}{{/crossLink}}\n\t * for details.\n\t *\n\t * There is an inheritance tutorial distributed with EaselJS in /tutorials/Inheritance.\n\t *\n\t * @method initialize\n\t * @protected\n\t * @deprecated\n\t */\n\t// p.initialize = function() {}; // searchable for devs wondering where it is.\n\n\n// public methods:\n\t/**\n\t * Provides padding values for this filter. That is, how much the filter will extend the visual bounds of an object it is applied to.\n\t * @method getBounds\n\t * @param {Rectangle} [rect] If specified, the provided Rectangle instance will be expanded by the padding amounts and returned.\n\t * @return {Rectangle} If a `rect` param was provided, it is returned. If not, either a new rectangle with the padding values, or null if no padding is required for this filter.\n\t **/\n\tp.getBounds = function(rect) {\n\t\treturn rect;\n\t};\n\n\t/**\n\t * Applies the filter to the specified context.\n\t * @method applyFilter\n\t * @param {CanvasRenderingContext2D} ctx The 2D context to use as the source.\n\t * @param {Number} x The x position to use for the source rect.\n\t * @param {Number} y The y position to use for the source rect.\n\t * @param {Number} width The width to use for the source rect.\n\t * @param {Number} height The height to use for the source rect.\n\t * @param {CanvasRenderingContext2D} [targetCtx] The 2D context to draw the result to. Defaults to the context passed to ctx.\n\t * @param {Number} [targetX] The x position to draw the result to. Defaults to the value passed to x.\n\t * @param {Number} [targetY] The y position to draw the result to. Defaults to the value passed to y.\n\t * @return {Boolean} If the filter was applied successfully.\n\t **/\n\tp.applyFilter = function(ctx, x, y, width, height, targetCtx, targetX, targetY) {\n\t\t// this is the default behaviour because most filters access pixel data. It is overridden when not needed.\n\t\ttargetCtx = targetCtx || ctx;\n\t\tif (targetX == null) { targetX = x; }\n\t\tif (targetY == null) { targetY = y; }\n\t\ttry {\n\t\t\tvar imageData = ctx.getImageData(x, y, width, height);\n\t\t} catch (e) {\n\t\t\treturn false;\n\t\t}\n\t\tif (this._applyFilter(imageData)) {\n\t\t\ttargetCtx.putImageData(imageData, targetX, targetY);\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t};\n\n\t/**\n\t * Returns a string representation of this object.\n\t * @method toString\n\t * @return {String} a string representation of the instance.\n\t **/\n\tp.toString = function() {\n\t\treturn \"[Filter]\";\n\t};\n\n\t/**\n\t * Returns a clone of this Filter instance.\n\t * @method clone\n\t * @return {Filter} A clone of the current Filter instance.\n\t **/\n\tp.clone = function() {\n\t\treturn new Filter();\n\t};\n\t\n// private methods:\n\t/**\n\t * @method _applyFilter\n\t * @param {ImageData} imageData Target ImageData instance.\n\t * @return {Boolean}\n\t **/\n\tp._applyFilter = function(imageData) { return true; };\n\n\n\tcreatejs.Filter = Filter;\n}());\n\n//##############################################################################\n// BlurFilter.js\n//##############################################################################\n\n(function() {\n\t\"use strict\";\n\n\n// constructor:\n\t/**\n\t * Applies a box blur to DisplayObjects. Note that this filter is fairly CPU intensive, particularly if the quality is\n\t * set higher than 1.\n\t *\n\t * <h4>Example</h4>\n\t * This example creates a red circle, and then applies a 5 pixel blur to it. It uses the {{#crossLink \"Filter/getBounds\"}}{{/crossLink}}\n\t * method to account for the spread that the blur causes.\n\t *\n\t *      var shape = new createjs.Shape().set({x:100,y:100});\n\t *      shape.graphics.beginFill(\"#ff0000\").drawCircle(0,0,50);\n\t *\n\t *      var blurFilter = new createjs.BlurFilter(5, 5, 1);\n\t *      shape.filters = [blurFilter];\n\t *      var bounds = blurFilter.getBounds();\n\t *\n\t *      shape.cache(-50+bounds.x, -50+bounds.y, 100+bounds.width, 100+bounds.height);\n\t *\n\t * See {{#crossLink \"Filter\"}}{{/crossLink}} for an more information on applying filters.\n\t * @class BlurFilter\n\t * @extends Filter\n\t * @constructor\n\t * @param {Number} [blurX=0] The horizontal blur radius in pixels.\n\t * @param {Number} [blurY=0] The vertical blur radius in pixels.\n\t * @param {Number} [quality=1] The number of blur iterations.\n\t **/\n\tfunction BlurFilter( blurX, blurY, quality) {\n\t\tif ( isNaN(blurX) || blurX < 0 ) blurX = 0;\n\t\tif ( isNaN(blurY) || blurY < 0 ) blurY = 0;\n\t\tif ( isNaN(quality) || quality < 1  ) quality = 1;\n\n\n\t\t// public properties:\n\t\t/**\n\t\t * Horizontal blur radius in pixels\n\t\t * @property blurX\n\t\t * @default 0\n\t\t * @type Number\n\t\t **/\n\t\tthis.blurX = blurX | 0;\n\n\t\t/**\n\t\t * Vertical blur radius in pixels\n\t\t * @property blurY\n\t\t * @default 0\n\t\t * @type Number\n\t\t **/\n\t\tthis.blurY = blurY | 0;\n\n\t\t/**\n\t\t * Number of blur iterations. For example, a value of 1 will produce a rough blur. A value of 2 will produce a\n\t\t * smoother blur, but take twice as long to run.\n\t\t * @property quality\n\t\t * @default 1\n\t\t * @type Number\n\t\t **/\n\t\tthis.quality = quality | 0;\n\t}\n\tvar p = createjs.extend(BlurFilter, createjs.Filter);\n\n\t// TODO: deprecated\n\t// p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\n\n\n// constants:\n\t/**\n\t * Array of multiply values for blur calculations.\n\t * @property MUL_TABLE\n\t * @type Array\n\t * @protected\n\t * @static\n\t **/\n\tBlurFilter.MUL_TABLE = [1, 171, 205, 293, 57, 373, 79, 137, 241, 27, 391, 357, 41, 19, 283, 265, 497, 469, 443, 421, 25, 191, 365, 349, 335, 161, 155, 149, 9, 278, 269, 261, 505, 245, 475, 231, 449, 437, 213, 415, 405, 395, 193, 377, 369, 361, 353, 345, 169, 331, 325, 319, 313, 307, 301, 37, 145, 285, 281, 69, 271, 267, 263, 259, 509, 501, 493, 243, 479, 118, 465, 459, 113, 446, 55, 435, 429, 423, 209, 413, 51, 403, 199, 393, 97, 3, 379, 375, 371, 367, 363, 359, 355, 351, 347, 43, 85, 337, 333, 165, 327, 323, 5, 317, 157, 311, 77, 305, 303, 75, 297, 294, 73, 289, 287, 71, 141, 279, 277, 275, 68, 135, 67, 133, 33, 262, 260, 129, 511, 507, 503, 499, 495, 491, 61, 121, 481, 477, 237, 235, 467, 232, 115, 457, 227, 451, 7, 445, 221, 439, 218, 433, 215, 427, 425, 211, 419, 417, 207, 411, 409, 203, 202, 401, 399, 396, 197, 49, 389, 387, 385, 383, 95, 189, 47, 187, 93, 185, 23, 183, 91, 181, 45, 179, 89, 177, 11, 175, 87, 173, 345, 343, 341, 339, 337, 21, 167, 83, 331, 329, 327, 163, 81, 323, 321, 319, 159, 79, 315, 313, 39, 155, 309, 307, 153, 305, 303, 151, 75, 299, 149, 37, 295, 147, 73, 291, 145, 289, 287, 143, 285, 71, 141, 281, 35, 279, 139, 69, 275, 137, 273, 17, 271, 135, 269, 267, 133, 265, 33, 263, 131, 261, 130, 259, 129, 257, 1];\n\n\t/**\n\t * Array of shift values for blur calculations.\n\t * @property SHG_TABLE\n\t * @type Array\n\t * @protected\n\t * @static\n\t **/\n\tBlurFilter.SHG_TABLE = [0, 9, 10, 11, 9, 12, 10, 11, 12, 9, 13, 13, 10, 9, 13, 13, 14, 14, 14, 14, 10, 13, 14, 14, 14, 13, 13, 13, 9, 14, 14, 14, 15, 14, 15, 14, 15, 15, 14, 15, 15, 15, 14, 15, 15, 15, 15, 15, 14, 15, 15, 15, 15, 15, 15, 12, 14, 15, 15, 13, 15, 15, 15, 15, 16, 16, 16, 15, 16, 14, 16, 16, 14, 16, 13, 16, 16, 16, 15, 16, 13, 16, 15, 16, 14, 9, 16, 16, 16, 16, 16, 16, 16, 16, 16, 13, 14, 16, 16, 15, 16, 16, 10, 16, 15, 16, 14, 16, 16, 14, 16, 16, 14, 16, 16, 14, 15, 16, 16, 16, 14, 15, 14, 15, 13, 16, 16, 15, 17, 17, 17, 17, 17, 17, 14, 15, 17, 17, 16, 16, 17, 16, 15, 17, 16, 17, 11, 17, 16, 17, 16, 17, 16, 17, 17, 16, 17, 17, 16, 17, 17, 16, 16, 17, 17, 17, 16, 14, 17, 17, 17, 17, 15, 16, 14, 16, 15, 16, 13, 16, 15, 16, 14, 16, 15, 16, 12, 16, 15, 16, 17, 17, 17, 17, 17, 13, 16, 15, 17, 17, 17, 16, 15, 17, 17, 17, 16, 15, 17, 17, 14, 16, 17, 17, 16, 17, 17, 16, 15, 17, 16, 14, 17, 16, 15, 17, 16, 17, 17, 16, 17, 15, 16, 17, 14, 17, 16, 15, 17, 16, 17, 13, 17, 16, 17, 17, 16, 17, 14, 17, 16, 17, 16, 17, 16, 17, 9];\n\n// public methods:\n\t/** docced in super class **/\n\tp.getBounds = function (rect) {\n\t\tvar x = this.blurX|0, y = this.blurY| 0;\n\t\tif (x <= 0 && y <= 0) { return rect; }\n\t\tvar q = Math.pow(this.quality, 0.2);\n\t\treturn (rect || new createjs.Rectangle()).pad(x*q+1,y*q+1,x*q+1,y*q+1);\n\t};\n\n\t/** docced in super class **/\n\tp.clone = function() {\n\t\treturn new BlurFilter(this.blurX, this.blurY, this.quality);\n\t};\n\n\t/** docced in super class **/\n\tp.toString = function() {\n\t\treturn \"[BlurFilter]\";\n\t};\n\n\n// private methods:\n\n\t/** docced in super class **/\n\tp._applyFilter = function (imageData) {\n\n\t\tvar radiusX = this.blurX >> 1;\n\t\tif (isNaN(radiusX) || radiusX < 0) return false;\n\t\tvar radiusY = this.blurY >> 1;\n\t\tif (isNaN(radiusY) || radiusY < 0) return false;\n\t\tif (radiusX == 0 && radiusY == 0) return false;\n\n\t\tvar iterations = this.quality;\n\t\tif (isNaN(iterations) || iterations < 1) iterations = 1;\n\t\titerations |= 0;\n\t\tif (iterations > 3) iterations = 3;\n\t\tif (iterations < 1) iterations = 1;\n\n\t\tvar px = imageData.data;\n\t\tvar x=0, y=0, i=0, p=0, yp=0, yi=0, yw=0, r=0, g=0, b=0, a=0, pr=0, pg=0, pb=0, pa=0;\n\n\t\tvar divx = (radiusX + radiusX + 1) | 0;\n\t\tvar divy = (radiusY + radiusY + 1) | 0;\n\t\tvar w = imageData.width | 0;\n\t\tvar h = imageData.height | 0;\n\n\t\tvar w1 = (w - 1) | 0;\n\t\tvar h1 = (h - 1) | 0;\n\t\tvar rxp1 = (radiusX + 1) | 0;\n\t\tvar ryp1 = (radiusY + 1) | 0;\n\n\t\tvar ssx = {r:0,b:0,g:0,a:0};\n\t\tvar sx = ssx;\n\t\tfor ( i = 1; i < divx; i++ )\n\t\t{\n\t\t\tsx = sx.n = {r:0,b:0,g:0,a:0};\n\t\t}\n\t\tsx.n = ssx;\n\n\t\tvar ssy = {r:0,b:0,g:0,a:0};\n\t\tvar sy = ssy;\n\t\tfor ( i = 1; i < divy; i++ )\n\t\t{\n\t\t\tsy = sy.n = {r:0,b:0,g:0,a:0};\n\t\t}\n\t\tsy.n = ssy;\n\n\t\tvar si = null;\n\n\n\t\tvar mtx = BlurFilter.MUL_TABLE[radiusX] | 0;\n\t\tvar stx = BlurFilter.SHG_TABLE[radiusX] | 0;\n\t\tvar mty = BlurFilter.MUL_TABLE[radiusY] | 0;\n\t\tvar sty = BlurFilter.SHG_TABLE[radiusY] | 0;\n\n\t\twhile (iterations-- > 0) {\n\n\t\t\tyw = yi = 0;\n\t\t\tvar ms = mtx;\n\t\t\tvar ss = stx;\n\t\t\tfor (y = h; --y > -1;) {\n\t\t\t\tr = rxp1 * (pr = px[(yi) | 0]);\n\t\t\t\tg = rxp1 * (pg = px[(yi + 1) | 0]);\n\t\t\t\tb = rxp1 * (pb = px[(yi + 2) | 0]);\n\t\t\t\ta = rxp1 * (pa = px[(yi + 3) | 0]);\n\n\t\t\t\tsx = ssx;\n\n\t\t\t\tfor( i = rxp1; --i > -1; )\n\t\t\t\t{\n\t\t\t\t\tsx.r = pr;\n\t\t\t\t\tsx.g = pg;\n\t\t\t\t\tsx.b = pb;\n\t\t\t\t\tsx.a = pa;\n\t\t\t\t\tsx = sx.n;\n\t\t\t\t}\n\n\t\t\t\tfor( i = 1; i < rxp1; i++ )\n\t\t\t\t{\n\t\t\t\t\tp = (yi + ((w1 < i ? w1 : i) << 2)) | 0;\n\t\t\t\t\tr += ( sx.r = px[p]);\n\t\t\t\t\tg += ( sx.g = px[p+1]);\n\t\t\t\t\tb += ( sx.b = px[p+2]);\n\t\t\t\t\ta += ( sx.a = px[p+3]);\n\n\t\t\t\t\tsx = sx.n;\n\t\t\t\t}\n\n\t\t\t\tsi = ssx;\n\t\t\t\tfor ( x = 0; x < w; x++ )\n\t\t\t\t{\n\t\t\t\t\tpx[yi++] = (r * ms) >>> ss;\n\t\t\t\t\tpx[yi++] = (g * ms) >>> ss;\n\t\t\t\t\tpx[yi++] = (b * ms) >>> ss;\n\t\t\t\t\tpx[yi++] = (a * ms) >>> ss;\n\n\t\t\t\t\tp = ((yw + ((p = x + radiusX + 1) < w1 ? p : w1)) << 2);\n\n\t\t\t\t\tr -= si.r - ( si.r = px[p]);\n\t\t\t\t\tg -= si.g - ( si.g = px[p+1]);\n\t\t\t\t\tb -= si.b - ( si.b = px[p+2]);\n\t\t\t\t\ta -= si.a - ( si.a = px[p+3]);\n\n\t\t\t\t\tsi = si.n;\n\n\t\t\t\t}\n\t\t\t\tyw += w;\n\t\t\t}\n\n\t\t\tms = mty;\n\t\t\tss = sty;\n\t\t\tfor (x = 0; x < w; x++) {\n\t\t\t\tyi = (x << 2) | 0;\n\n\t\t\t\tr = (ryp1 * (pr = px[yi])) | 0;\n\t\t\t\tg = (ryp1 * (pg = px[(yi + 1) | 0])) | 0;\n\t\t\t\tb = (ryp1 * (pb = px[(yi + 2) | 0])) | 0;\n\t\t\t\ta = (ryp1 * (pa = px[(yi + 3) | 0])) | 0;\n\n\t\t\t\tsy = ssy;\n\t\t\t\tfor( i = 0; i < ryp1; i++ )\n\t\t\t\t{\n\t\t\t\t\tsy.r = pr;\n\t\t\t\t\tsy.g = pg;\n\t\t\t\t\tsy.b = pb;\n\t\t\t\t\tsy.a = pa;\n\t\t\t\t\tsy = sy.n;\n\t\t\t\t}\n\n\t\t\t\typ = w;\n\n\t\t\t\tfor( i = 1; i <= radiusY; i++ )\n\t\t\t\t{\n\t\t\t\t\tyi = ( yp + x ) << 2;\n\n\t\t\t\t\tr += ( sy.r = px[yi]);\n\t\t\t\t\tg += ( sy.g = px[yi+1]);\n\t\t\t\t\tb += ( sy.b = px[yi+2]);\n\t\t\t\t\ta += ( sy.a = px[yi+3]);\n\n\t\t\t\t\tsy = sy.n;\n\n\t\t\t\t\tif( i < h1 )\n\t\t\t\t\t{\n\t\t\t\t\t\typ += w;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tyi = x;\n\t\t\t\tsi = ssy;\n\t\t\t\tif ( iterations > 0 )\n\t\t\t\t{\n\t\t\t\t\tfor ( y = 0; y < h; y++ )\n\t\t\t\t\t{\n\t\t\t\t\t\tp = yi << 2;\n\t\t\t\t\t\tpx[p+3] = pa =(a * ms) >>> ss;\n\t\t\t\t\t\tif ( pa > 0 )\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tpx[p]   = ((r * ms) >>> ss );\n\t\t\t\t\t\t\tpx[p+1] = ((g * ms) >>> ss );\n\t\t\t\t\t\t\tpx[p+2] = ((b * ms) >>> ss );\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tpx[p] = px[p+1] = px[p+2] = 0\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tp = ( x + (( ( p = y + ryp1) < h1 ? p : h1 ) * w )) << 2;\n\n\t\t\t\t\t\tr -= si.r - ( si.r = px[p]);\n\t\t\t\t\t\tg -= si.g - ( si.g = px[p+1]);\n\t\t\t\t\t\tb -= si.b - ( si.b = px[p+2]);\n\t\t\t\t\t\ta -= si.a - ( si.a = px[p+3]);\n\n\t\t\t\t\t\tsi = si.n;\n\n\t\t\t\t\t\tyi += w;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tfor ( y = 0; y < h; y++ )\n\t\t\t\t\t{\n\t\t\t\t\t\tp = yi << 2;\n\t\t\t\t\t\tpx[p+3] = pa =(a * ms) >>> ss;\n\t\t\t\t\t\tif ( pa > 0 )\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tpa = 255 / pa;\n\t\t\t\t\t\t\tpx[p]   = ((r * ms) >>> ss ) * pa;\n\t\t\t\t\t\t\tpx[p+1] = ((g * ms) >>> ss ) * pa;\n\t\t\t\t\t\t\tpx[p+2] = ((b * ms) >>> ss ) * pa;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tpx[p] = px[p+1] = px[p+2] = 0\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tp = ( x + (( ( p = y + ryp1) < h1 ? p : h1 ) * w )) << 2;\n\n\t\t\t\t\t\tr -= si.r - ( si.r = px[p]);\n\t\t\t\t\t\tg -= si.g - ( si.g = px[p+1]);\n\t\t\t\t\t\tb -= si.b - ( si.b = px[p+2]);\n\t\t\t\t\t\ta -= si.a - ( si.a = px[p+3]);\n\n\t\t\t\t\t\tsi = si.n;\n\n\t\t\t\t\t\tyi += w;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t}\n\t\treturn true;\n\t};\n\n\tcreatejs.BlurFilter = createjs.promote(BlurFilter, \"Filter\");\n}());\n\n//##############################################################################\n// AlphaMapFilter.js\n//##############################################################################\n\n(function () {\n\t\"use strict\";\n\t\n\t\n// constructor:\n\t/**\n\t * Applies a greyscale alpha map image (or canvas) to the target, such that the alpha channel of the result will\n\t * be copied from the red channel of the map, and the RGB channels will be copied from the target.\n\t *\n\t * Generally, it is recommended that you use {{#crossLink \"AlphaMaskFilter\"}}{{/crossLink}}, because it has much\n\t * better performance.\n\t *\n\t * <h4>Example</h4>\n\t * This example draws a red->blue box, caches it, and then uses the cache canvas as an alpha map on a 100x100 image.\n\t *\n\t *       var box = new createjs.Shape();\n\t *       box.graphics.beginLinearGradientFill([\"#ff0000\", \"#0000ff\"], [0, 1], 0, 0, 0, 100)\n\t *       box.graphics.drawRect(0, 0, 100, 100);\n\t *       box.cache(0, 0, 100, 100);\n\t *\n\t *       var bmp = new createjs.Bitmap(\"path/to/image.jpg\");\n\t *       bmp.filters = [\n\t *           new createjs.AlphaMapFilter(box.cacheCanvas)\n\t *       ];\n\t *       bmp.cache(0, 0, 100, 100);\n\t *       stage.addChild(bmp);\n\t *\n\t * See {{#crossLink \"Filter\"}}{{/crossLink}} for more information on applying filters.\n\t * @class AlphaMapFilter\n\t * @extends Filter\n\t * @constructor\n\t * @param {HTMLImageElement|HTMLCanvasElement} alphaMap The greyscale image (or canvas) to use as the alpha value for the\n\t * result. This should be exactly the same dimensions as the target.\n\t **/\n\tfunction AlphaMapFilter(alphaMap) {\n\t\n\t\n\t// public properties:\n\t\t/**\n\t\t * The greyscale image (or canvas) to use as the alpha value for the result. This should be exactly the same\n\t\t * dimensions as the target.\n\t\t * @property alphaMap\n\t\t * @type HTMLImageElement|HTMLCanvasElement\n\t\t **/\n\t\tthis.alphaMap = alphaMap;\n\t\t\n\t\t\n\t// private properties:\n\t\t/**\n\t\t * @property _alphaMap\n\t\t * @protected\n\t\t * @type HTMLImageElement|HTMLCanvasElement\n\t\t **/\n\t\tthis._alphaMap = null;\n\t\t\n\t\t/**\n\t\t * @property _mapData\n\t\t * @protected\n\t\t * @type Uint8ClampedArray\n\t\t **/\n\t\tthis._mapData = null;\n\t}\n\tvar p = createjs.extend(AlphaMapFilter, createjs.Filter);\n\n\t// TODO: deprecated\n\t// p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\n\n\n// public methods:\n\t/** docced in super class **/\n\tp.clone = function () {\n\t\tvar o = new AlphaMapFilter(this.alphaMap);\n\t\to._alphaMap = this._alphaMap;\n\t\to._mapData = this._mapData;\n\t\treturn o;\n\t};\n\n\t/** docced in super class **/\n\tp.toString = function () {\n\t\treturn \"[AlphaMapFilter]\";\n\t};\n\n\n// private methods:\n\t/** docced in super class **/\n\tp._applyFilter = function (imageData) {\n\t\tif (!this.alphaMap) { return true; }\n\t\tif (!this._prepAlphaMap()) { return false; }\n\t\t\n\t\t// TODO: update to support scenarios where the target has different dimensions.\n\t\tvar data = imageData.data;\n\t\tvar map = this._mapData;\n\t\tfor(var i=0, l=data.length; i<l; i += 4) { data[i + 3] = map[i] || 0; }\n\t\t\n\t\treturn true;\n\t};\n\n\t/**\n\t * @method _prepAlphaMap\n\t * @protected\n\t **/\n\tp._prepAlphaMap = function () {\n\t\tif (!this.alphaMap) { return false; }\n\t\tif (this.alphaMap == this._alphaMap && this._mapData) { return true; }\n\n\t\tthis._mapData = null;\n\t\tvar map = this._alphaMap = this.alphaMap;\n\t\tvar canvas = map;\n\t\tvar ctx;\n\t\tif (map instanceof HTMLCanvasElement) {\n\t\t\tctx = canvas.getContext(\"2d\");\n\t\t} else {\n\t\t\tcanvas = createjs.createCanvas ? createjs.createCanvas() : document.createElement(\"canvas\");\n\t\t\tcanvas.width = map.width;\n\t\t\tcanvas.height = map.height;\n\t\t\tctx = canvas.getContext(\"2d\");\n\t\t\tctx.drawImage(map, 0, 0);\n\t\t}\n\n\t\ttry {\n\t\t\tvar imgData = ctx.getImageData(0, 0, map.width, map.height);\n\t\t} catch (e) {\n\t\t\t//if (!this.suppressCrossDomainErrors) throw new Error(\"unable to access local image data: \" + e);\n\t\t\treturn false;\n\t\t}\n\t\t\n\t\tthis._mapData = imgData.data;\n\t\treturn true;\n\t};\n\n\n\tcreatejs.AlphaMapFilter = createjs.promote(AlphaMapFilter, \"Filter\");\n}());\n\n//##############################################################################\n// AlphaMaskFilter.js\n//##############################################################################\n\n(function () {\n\t\"use strict\";\n\n\n// constructor:\n\t/**\n\t * Applies the alpha from the mask image (or canvas) to the target, such that the alpha channel of the result will\n\t * be derived from the mask, and the RGB channels will be copied from the target. This can be used, for example, to\n\t * apply an alpha mask to a display object. This can also be used to combine a JPG compressed RGB image with a PNG32\n\t * alpha mask, which can result in a much smaller file size than a single PNG32 containing ARGB.\n\t *\n\t * <b>IMPORTANT NOTE: This filter currently does not support the targetCtx, or targetX/Y parameters correctly.</b>\n\t *\n\t * <h4>Example</h4>\n\t * This example draws a gradient box, then caches it and uses the \"cacheCanvas\" as the alpha mask on a 100x100 image.\n\t *\n\t *      var box = new createjs.Shape();\n\t *      box.graphics.beginLinearGradientFill([\"#000000\", \"rgba(0, 0, 0, 0)\"], [0, 1], 0, 0, 100, 100)\n\t *      box.graphics.drawRect(0, 0, 100, 100);\n\t *      box.cache(0, 0, 100, 100);\n\t *\n\t *      var bmp = new createjs.Bitmap(\"path/to/image.jpg\");\n\t *      bmp.filters = [\n\t *          new createjs.AlphaMaskFilter(box.cacheCanvas)\n\t *      ];\n\t *      bmp.cache(0, 0, 100, 100);\n\t *\n\t * See {{#crossLink \"Filter\"}}{{/crossLink}} for more information on applying filters.\n\t * @class AlphaMaskFilter\n\t * @extends Filter\n\t * @constructor\n\t * @param {HTMLImageElement|HTMLCanvasElement} mask\n\t **/\n\tfunction AlphaMaskFilter(mask) {\n\t\n\t\n\t// public properties:\n\t\t/**\n\t\t * The image (or canvas) to use as the mask.\n\t\t * @property mask\n\t\t * @type HTMLImageElement|HTMLCanvasElement\n\t\t **/\n\t\tthis.mask = mask;\n\t}\n\tvar p = createjs.extend(AlphaMaskFilter, createjs.Filter);\n\n\t// TODO: deprecated\n\t// p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\n\t\n\n// public methods:\n\t/**\n\t * Applies the filter to the specified context.\n\t *\n\t * <strong>IMPORTANT NOTE: This filter currently does not support the targetCtx, or targetX/Y parameters\n\t * correctly.</strong>\n\t * @method applyFilter\n\t * @param {CanvasRenderingContext2D} ctx The 2D context to use as the source.\n\t * @param {Number} x The x position to use for the source rect.\n\t * @param {Number} y The y position to use for the source rect.\n\t * @param {Number} width The width to use for the source rect.\n\t * @param {Number} height The height to use for the source rect.\n\t * @param {CanvasRenderingContext2D} [targetCtx] NOT SUPPORTED IN THIS FILTER. The 2D context to draw the result to. Defaults to the context passed to ctx.\n\t * @param {Number} [targetX] NOT SUPPORTED IN THIS FILTER. The x position to draw the result to. Defaults to the value passed to x.\n\t * @param {Number} [targetY] NOT SUPPORTED IN THIS FILTER. The y position to draw the result to. Defaults to the value passed to y.\n\t * @return {Boolean} If the filter was applied successfully.\n\t **/\n\tp.applyFilter = function (ctx, x, y, width, height, targetCtx, targetX, targetY) {\n\t\tif (!this.mask) { return true; }\n\t\ttargetCtx = targetCtx || ctx;\n\t\tif (targetX == null) { targetX = x; }\n\t\tif (targetY == null) { targetY = y; }\n\n\t\ttargetCtx.save();\n\t\tif (ctx != targetCtx) {\n\t\t\t// TODO: support targetCtx and targetX/Y\n\t\t\t// clearRect, then draw the ctx in?\n\t\t\treturn false;\n\t\t}\n\n\t\ttargetCtx.globalCompositeOperation = \"destination-in\";\n\t\ttargetCtx.drawImage(this.mask, targetX, targetY);\n\t\ttargetCtx.restore();\n\t\treturn true;\n\t};\n\n\t/** docced in super class **/\n\tp.clone = function () {\n\t\treturn new AlphaMaskFilter(this.mask);\n\t};\n\n\t/** docced in super class **/\n\tp.toString = function () {\n\t\treturn \"[AlphaMaskFilter]\";\n\t};\n\n\n\tcreatejs.AlphaMaskFilter = createjs.promote(AlphaMaskFilter, \"Filter\");\n}());\n\n//##############################################################################\n// ColorFilter.js\n//##############################################################################\n\n(function() {\n\t\"use strict\";\n\n\n// constructor:\n\t/**\n\t * Applies a color transform to DisplayObjects.\n\t *\n\t * <h4>Example</h4>\n\t * This example draws a red circle, and then transforms it to Blue. This is accomplished by multiplying all the channels\n\t * to 0 (except alpha, which is set to 1), and then adding 255 to the blue channel.\n\t *\n\t *      var shape = new createjs.Shape().set({x:100,y:100});\n\t *      shape.graphics.beginFill(\"#ff0000\").drawCircle(0,0,50);\n\t *\n\t *      shape.filters = [\n\t *          new createjs.ColorFilter(0,0,0,1, 0,0,255,0)\n\t *      ];\n\t *      shape.cache(-50, -50, 100, 100);\n\t *\n\t * See {{#crossLink \"Filter\"}}{{/crossLink}} for an more information on applying filters.\n\t * @class ColorFilter\n\t * @param {Number} [redMultiplier=1] The amount to multiply against the red channel. This is a range between 0 and 1.\n\t * @param {Number} [greenMultiplier=1] The amount to multiply against the green channel. This is a range between 0 and 1.\n\t * @param {Number} [blueMultiplier=1] The amount to multiply against the blue channel. This is a range between 0 and 1.\n\t * @param {Number} [alphaMultiplier=1] The amount to multiply against the alpha channel. This is a range between 0 and 1.\n\t * @param {Number} [redOffset=0] The amount to add to the red channel after it has been multiplied. This is a range\n\t * between -255 and 255.\n\t * @param {Number} [greenOffset=0] The amount to add to the green channel after it has been multiplied. This is a range\n\t  * between -255 and 255.\n\t * @param {Number} [blueOffset=0] The amount to add to the blue channel after it has been multiplied. This is a range\n\t  * between -255 and 255.\n\t * @param {Number} [alphaOffset=0] The amount to add to the alpha channel after it has been multiplied. This is a range\n\t  * between -255 and 255.\n\t * @constructor\n\t * @extends Filter\n\t **/\n\tfunction ColorFilter(redMultiplier, greenMultiplier, blueMultiplier, alphaMultiplier, redOffset, greenOffset, blueOffset, alphaOffset) {\n\t\t\n\t\n\t// public properties:\n\t\t/**\n\t\t * Red channel multiplier.\n\t\t * @property redMultiplier\n\t\t * @type Number\n\t\t **/\n\t\tthis.redMultiplier = redMultiplier != null ? redMultiplier : 1;\n\t\n\t\t/**\n\t\t * Green channel multiplier.\n\t\t * @property greenMultiplier\n\t\t * @type Number\n\t\t **/\n\t\tthis.greenMultiplier = greenMultiplier != null ? greenMultiplier : 1;\n\t\n\t\t/**\n\t\t * Blue channel multiplier.\n\t\t * @property blueMultiplier\n\t\t * @type Number\n\t\t **/\n\t\tthis.blueMultiplier = blueMultiplier != null ? blueMultiplier : 1;\n\t\n\t\t/**\n\t\t * Alpha channel multiplier.\n\t\t * @property alphaMultiplier\n\t\t * @type Number\n\t\t **/\n\t\tthis.alphaMultiplier = alphaMultiplier != null ? alphaMultiplier : 1;\n\t\n\t\t/**\n\t\t * Red channel offset (added to value).\n\t\t * @property redOffset\n\t\t * @type Number\n\t\t **/\n\t\tthis.redOffset = redOffset || 0;\n\t\n\t\t/**\n\t\t * Green channel offset (added to value).\n\t\t * @property greenOffset\n\t\t * @type Number\n\t\t **/\n\t\tthis.greenOffset = greenOffset || 0;\n\t\n\t\t/**\n\t\t * Blue channel offset (added to value).\n\t\t * @property blueOffset\n\t\t * @type Number\n\t\t **/\n\t\tthis.blueOffset = blueOffset || 0;\n\t\n\t\t/**\n\t\t * Alpha channel offset (added to value).\n\t\t * @property alphaOffset\n\t\t * @type Number\n\t\t **/\n\t\tthis.alphaOffset = alphaOffset || 0;\n\t}\n\tvar p = createjs.extend(ColorFilter, createjs.Filter);\n\n\t// TODO: deprecated\n\t// p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\n\n\n// public methods:\n\t/** docced in super class **/\n\tp.toString = function() {\n\t\treturn \"[ColorFilter]\";\n\t};\n\n\t/** docced in super class **/\n\tp.clone = function() {\n\t\treturn new ColorFilter(this.redMultiplier, this.greenMultiplier, this.blueMultiplier, this.alphaMultiplier, this.redOffset, this.greenOffset, this.blueOffset, this.alphaOffset);\n\t};\n\t\n\n// private methods:\n\t/** docced in super class **/\n\tp._applyFilter = function(imageData) {\n\t\tvar data = imageData.data;\n\t\tvar l = data.length;\n\t\tfor (var i=0; i<l; i+=4) {\n\t\t\tdata[i] = data[i]*this.redMultiplier+this.redOffset;\n\t\t\tdata[i+1] = data[i+1]*this.greenMultiplier+this.greenOffset;\n\t\t\tdata[i+2] = data[i+2]*this.blueMultiplier+this.blueOffset;\n\t\t\tdata[i+3] = data[i+3]*this.alphaMultiplier+this.alphaOffset;\n\t\t}\n\t\treturn true;\n\t};\n\n\n\tcreatejs.ColorFilter = createjs.promote(ColorFilter, \"Filter\");\n}());\n\n//##############################################################################\n// ColorMatrix.js\n//##############################################################################\n\n(function() {\n\t\"use strict\";\n\n\n// constructor:\n\t/**\n\t * Provides helper functions for assembling a matrix for use with the {{#crossLink \"ColorMatrixFilter\"}}{{/crossLink}}.\n\t * Most methods return the instance to facilitate chained calls.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      myColorMatrix.adjustHue(20).adjustBrightness(50);\n\t *\n\t * See {{#crossLink \"Filter\"}}{{/crossLink}} for an example of how to apply filters, or {{#crossLink \"ColorMatrixFilter\"}}{{/crossLink}}\n\t * for an example of how to use ColorMatrix to change a DisplayObject's color.\n\t * @class ColorMatrix\n\t * @param {Number} brightness\n\t * @param {Number} contrast\n\t * @param {Number} saturation\n\t * @param {Number} hue\n\t * @constructor\n\t **/\n\tfunction ColorMatrix(brightness, contrast, saturation, hue) {\n\t\tthis.setColor(brightness, contrast, saturation, hue);\n\t}\n\tvar p = ColorMatrix.prototype;\n\n\t/**\n\t * <strong>REMOVED</strong>. Removed in favor of using `MySuperClass_constructor`.\n\t * See {{#crossLink \"Utility Methods/extend\"}}{{/crossLink}} and {{#crossLink \"Utility Methods/promote\"}}{{/crossLink}}\n\t * for details.\n\t *\n\t * There is an inheritance tutorial distributed with EaselJS in /tutorials/Inheritance.\n\t *\n\t * @method initialize\n\t * @protected\n\t * @deprecated\n\t */\n\t// p.initialize = function() {}; // searchable for devs wondering where it is.\n\n\n// constants:\n\t/**\n\t * Array of delta values for contrast calculations.\n\t * @property DELTA_INDEX\n\t * @type Array\n\t * @protected\n\t * @static\n\t **/\n\tColorMatrix.DELTA_INDEX = [\n\t\t0,    0.01, 0.02, 0.04, 0.05, 0.06, 0.07, 0.08, 0.1,  0.11,\n\t\t0.12, 0.14, 0.15, 0.16, 0.17, 0.18, 0.20, 0.21, 0.22, 0.24,\n\t\t0.25, 0.27, 0.28, 0.30, 0.32, 0.34, 0.36, 0.38, 0.40, 0.42,\n\t\t0.44, 0.46, 0.48, 0.5,  0.53, 0.56, 0.59, 0.62, 0.65, 0.68,\n\t\t0.71, 0.74, 0.77, 0.80, 0.83, 0.86, 0.89, 0.92, 0.95, 0.98,\n\t\t1.0,  1.06, 1.12, 1.18, 1.24, 1.30, 1.36, 1.42, 1.48, 1.54,\n\t\t1.60, 1.66, 1.72, 1.78, 1.84, 1.90, 1.96, 2.0,  2.12, 2.25,\n\t\t2.37, 2.50, 2.62, 2.75, 2.87, 3.0,  3.2,  3.4,  3.6,  3.8,\n\t\t4.0,  4.3,  4.7,  4.9,  5.0,  5.5,  6.0,  6.5,  6.8,  7.0,\n\t\t7.3,  7.5,  7.8,  8.0,  8.4,  8.7,  9.0,  9.4,  9.6,  9.8,\n\t\t10.0\n\t];\n\n\t/**\n\t * Identity matrix values.\n\t * @property IDENTITY_MATRIX\n\t * @type Array\n\t * @protected\n\t * @static\n\t **/\n\tColorMatrix.IDENTITY_MATRIX = [\n\t\t1,0,0,0,0,\n\t\t0,1,0,0,0,\n\t\t0,0,1,0,0,\n\t\t0,0,0,1,0,\n\t\t0,0,0,0,1\n\t];\n\n\t/**\n\t * The constant length of a color matrix.\n\t * @property LENGTH\n\t * @type Number\n\t * @protected\n\t * @static\n\t **/\n\tColorMatrix.LENGTH = ColorMatrix.IDENTITY_MATRIX.length;\n\n\n// public methods:\n\t/**\n\t * Resets the instance with the specified values.\n\t * @method setColor\n\t * @param {Number} brightness\n\t * @param {Number} contrast\n\t * @param {Number} saturation\n\t * @param {Number} hue\n\t * @return {ColorMatrix} The ColorMatrix instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t */\n\tp.setColor = function(brightness,contrast,saturation,hue) {\n\t\treturn this.reset().adjustColor(brightness,contrast,saturation,hue);\n\t};\n\n\t/**\n\t * Resets the matrix to identity values.\n\t * @method reset\n\t * @return {ColorMatrix} The ColorMatrix instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t */\n\tp.reset = function() {\n\t\treturn this.copy(ColorMatrix.IDENTITY_MATRIX);\n\t};\n\n\t/**\n\t * Shortcut method to adjust brightness, contrast, saturation and hue.\n\t * Equivalent to calling adjustHue(hue), adjustContrast(contrast),\n\t * adjustBrightness(brightness), adjustSaturation(saturation), in that order.\n\t * @method adjustColor\n\t * @param {Number} brightness\n\t * @param {Number} contrast\n\t * @param {Number} saturation\n\t * @param {Number} hue\n\t * @return {ColorMatrix} The ColorMatrix instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.adjustColor = function(brightness,contrast,saturation,hue) {\n\t\tthis.adjustHue(hue);\n\t\tthis.adjustContrast(contrast);\n\t\tthis.adjustBrightness(brightness);\n\t\treturn this.adjustSaturation(saturation);\n\t};\n\n\t/**\n\t * Adjusts the brightness of pixel color by adding the specified value to the red, green and blue channels.\n\t * Positive values will make the image brighter, negative values will make it darker.\n\t * @method adjustBrightness\n\t * @param {Number} value A value between -255 & 255 that will be added to the RGB channels.\n\t * @return {ColorMatrix} The ColorMatrix instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.adjustBrightness = function(value) {\n\t\tif (value == 0 || isNaN(value)) { return this; }\n\t\tvalue = this._cleanValue(value,255);\n\t\tthis._multiplyMatrix([\n\t\t\t1,0,0,0,value,\n\t\t\t0,1,0,0,value,\n\t\t\t0,0,1,0,value,\n\t\t\t0,0,0,1,0,\n\t\t\t0,0,0,0,1\n\t\t]);\n\t\treturn this;\n\t};\n\n\t/**\n\t * Adjusts the contrast of pixel color.\n\t * Positive values will increase contrast, negative values will decrease contrast.\n\t * @method adjustContrast\n\t * @param {Number} value A value between -100 & 100.\n\t * @return {ColorMatrix} The ColorMatrix instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.adjustContrast = function(value) {\n\t\tif (value == 0 || isNaN(value)) { return this; }\n\t\tvalue = this._cleanValue(value,100);\n\t\tvar x;\n\t\tif (value<0) {\n\t\t\tx = 127+value/100*127;\n\t\t} else {\n\t\t\tx = value%1;\n\t\t\tif (x == 0) {\n\t\t\t\tx = ColorMatrix.DELTA_INDEX[value];\n\t\t\t} else {\n\t\t\t\tx = ColorMatrix.DELTA_INDEX[(value<<0)]*(1-x)+ColorMatrix.DELTA_INDEX[(value<<0)+1]*x; // use linear interpolation for more granularity.\n\t\t\t}\n\t\t\tx = x*127+127;\n\t\t}\n\t\tthis._multiplyMatrix([\n\t\t\tx/127,0,0,0,0.5*(127-x),\n\t\t\t0,x/127,0,0,0.5*(127-x),\n\t\t\t0,0,x/127,0,0.5*(127-x),\n\t\t\t0,0,0,1,0,\n\t\t\t0,0,0,0,1\n\t\t]);\n\t\treturn this;\n\t};\n\n\t/**\n\t * Adjusts the color saturation of the pixel.\n\t * Positive values will increase saturation, negative values will decrease saturation (trend towards greyscale).\n\t * @method adjustSaturation\n\t * @param {Number} value A value between -100 & 100.\n\t * @return {ColorMatrix} The ColorMatrix instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.adjustSaturation = function(value) {\n\t\tif (value == 0 || isNaN(value)) { return this; }\n\t\tvalue = this._cleanValue(value,100);\n\t\tvar x = 1+((value > 0) ? 3*value/100 : value/100);\n\t\tvar lumR = 0.3086;\n\t\tvar lumG = 0.6094;\n\t\tvar lumB = 0.0820;\n\t\tthis._multiplyMatrix([\n\t\t\tlumR*(1-x)+x,lumG*(1-x),lumB*(1-x),0,0,\n\t\t\tlumR*(1-x),lumG*(1-x)+x,lumB*(1-x),0,0,\n\t\t\tlumR*(1-x),lumG*(1-x),lumB*(1-x)+x,0,0,\n\t\t\t0,0,0,1,0,\n\t\t\t0,0,0,0,1\n\t\t]);\n\t\treturn this;\n\t};\n\n\n\t/**\n\t * Adjusts the hue of the pixel color.\n\t * @method adjustHue\n\t * @param {Number} value A value between -180 & 180.\n\t * @return {ColorMatrix} The ColorMatrix instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.adjustHue = function(value) {\n\t\tif (value == 0 || isNaN(value)) { return this; }\n\t\tvalue = this._cleanValue(value,180)/180*Math.PI;\n\t\tvar cosVal = Math.cos(value);\n\t\tvar sinVal = Math.sin(value);\n\t\tvar lumR = 0.213;\n\t\tvar lumG = 0.715;\n\t\tvar lumB = 0.072;\n\t\tthis._multiplyMatrix([\n\t\t\tlumR+cosVal*(1-lumR)+sinVal*(-lumR),lumG+cosVal*(-lumG)+sinVal*(-lumG),lumB+cosVal*(-lumB)+sinVal*(1-lumB),0,0,\n\t\t\tlumR+cosVal*(-lumR)+sinVal*(0.143),lumG+cosVal*(1-lumG)+sinVal*(0.140),lumB+cosVal*(-lumB)+sinVal*(-0.283),0,0,\n\t\t\tlumR+cosVal*(-lumR)+sinVal*(-(1-lumR)),lumG+cosVal*(-lumG)+sinVal*(lumG),lumB+cosVal*(1-lumB)+sinVal*(lumB),0,0,\n\t\t\t0,0,0,1,0,\n\t\t\t0,0,0,0,1\n\t\t]);\n\t\treturn this;\n\t};\n\n\t/**\n\t * Concatenates (multiplies) the specified matrix with this one.\n\t * @method concat\n\t * @param {Array} matrix An array or ColorMatrix instance.\n\t * @return {ColorMatrix} The ColorMatrix instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.concat = function(matrix) {\n\t\tmatrix = this._fixMatrix(matrix);\n\t\tif (matrix.length != ColorMatrix.LENGTH) { return this; }\n\t\tthis._multiplyMatrix(matrix);\n\t\treturn this;\n\t};\n\n\t/**\n\t * Returns a clone of this ColorMatrix.\n\t * @method clone\n\t * @return {ColorMatrix} A clone of this ColorMatrix.\n\t **/\n\tp.clone = function() {\n\t\treturn (new ColorMatrix()).copy(this);\n\t};\n\n\t/**\n\t * Return a length 25 (5x5) array instance containing this matrix's values.\n\t * @method toArray\n\t * @return {Array} An array holding this matrix's values.\n\t **/\n\tp.toArray = function() {\n\t\tvar arr = [];\n\t\tfor (var i= 0, l=ColorMatrix.LENGTH; i<l; i++) {\n\t\t\tarr[i] = this[i];\n\t\t}\n\t\treturn arr;\n\t};\n\n\t/**\n\t * Copy the specified matrix's values to this matrix.\n\t * @method copy\n\t * @param {Array} matrix An array or ColorMatrix instance.\n\t * @return {ColorMatrix} The ColorMatrix instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.copy = function(matrix) {\n\t\tvar l = ColorMatrix.LENGTH;\n\t\tfor (var i=0;i<l;i++) {\n\t\t\tthis[i] = matrix[i];\n\t\t}\n\t\treturn this;\n\t};\n\t\n\t/**\n\t * Returns a string representation of this object.\n\t * @method toString\n\t * @return {String} a string representation of the instance.\n\t **/\n\tp.toString = function() {\n\t\treturn \"[ColorMatrix]\";\n\t};\n\n\n// private methods:\n\t/**\n\t * @method _multiplyMatrix\n\t * @param {Array} matrix\n\t * @protected\n\t **/\n\tp._multiplyMatrix = function(matrix) {\n\t\tvar i, j, k, col = [];\n\n\t\tfor (i=0;i<5;i++) {\n\t\t\tfor (j=0;j<5;j++) {\n\t\t\t\tcol[j] = this[j+i*5];\n\t\t\t}\n\t\t\tfor (j=0;j<5;j++) {\n\t\t\t\tvar val=0;\n\t\t\t\tfor (k=0;k<5;k++) {\n\t\t\t\t\tval += matrix[j+k*5]*col[k];\n\t\t\t\t}\n\t\t\t\tthis[j+i*5] = val;\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t * Make sure values are within the specified range, hue has a limit of 180, brightness is 255, others are 100.\n\t * @method _cleanValue\n\t * @param {Number} value The raw number\n\t * @param {Number} limit The maximum that the number can be. The minimum is the limit * -1.\n\t * @protected\n\t **/\n\tp._cleanValue = function(value, limit) {\n\t\treturn Math.min(limit,Math.max(-limit,value));\n\t};\n\n\t/**\n\t * Makes sure matrixes are 5x5 (25 long).\n\t * @method _fixMatrix\n\t * @param {Array} matrix\n\t * @protected\n\t **/\n\tp._fixMatrix = function(matrix) {\n\t\tif (matrix instanceof ColorMatrix) { matrix = matrix.toArray(); }\n\t\tif (matrix.length < ColorMatrix.LENGTH) {\n\t\t\tmatrix = matrix.slice(0,matrix.length).concat(ColorMatrix.IDENTITY_MATRIX.slice(matrix.length,ColorMatrix.LENGTH));\n\t\t} else if (matrix.length > ColorMatrix.LENGTH) {\n\t\t\tmatrix = matrix.slice(0,ColorMatrix.LENGTH);\n\t\t}\n\t\treturn matrix;\n\t};\n\n\n\tcreatejs.ColorMatrix = ColorMatrix;\n}());\n\n//##############################################################################\n// ColorMatrixFilter.js\n//##############################################################################\n\n(function() {\n\t\"use strict\";\n\n\n// constructor:\n\t/**\n\t * Allows you to carry out complex color operations such as modifying saturation, brightness, or inverting. See the\n\t * {{#crossLink \"ColorMatrix\"}}{{/crossLink}} for more information on changing colors. For an easier color transform,\n\t * consider the {{#crossLink \"ColorFilter\"}}{{/crossLink}}.\n\t *\n\t * <h4>Example</h4>\n\t * This example creates a red circle, inverts its hue, and then saturates it to brighten it up.\n\t *\n\t *      var shape = new createjs.Shape().set({x:100,y:100});\n\t *      shape.graphics.beginFill(\"#ff0000\").drawCircle(0,0,50);\n\t *\n\t *      var matrix = new createjs.ColorMatrix().adjustHue(180).adjustSaturation(100);\n\t *      shape.filters = [\n\t *          new createjs.ColorMatrixFilter(matrix)\n\t *      ];\n\t *\n\t *      shape.cache(-50, -50, 100, 100);\n\t *\n\t * See {{#crossLink \"Filter\"}}{{/crossLink}} for an more information on applying filters.\n\t * @class ColorMatrixFilter\n\t * @constructor\n\t * @extends Filter\n\t * @param {Array | ColorMatrix} matrix A 4x5 matrix describing the color operation to perform. See also the {{#crossLink \"ColorMatrix\"}}{{/crossLink}}\n\t * class.\n\t **/\n\tfunction ColorMatrixFilter(matrix) {\n\t\n\t\t\n\t// public properties:\n\t\t/**\n\t\t * A 4x5 matrix describing the color operation to perform. See also the {{#crossLink \"ColorMatrix\"}}{{/crossLink}}\n\t\t * @property matrix\n\t\t * @type Array | ColorMatrix\n\t\t **/\n\t\tthis.matrix = matrix;\n\t}\n\tvar p = createjs.extend(ColorMatrixFilter, createjs.Filter);\n\n\t// TODO: deprecated\n\t// p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\n\t\n\n// public methods:\n\t/** docced in super class **/\n\tp.toString = function() {\n\t\treturn \"[ColorMatrixFilter]\";\n\t};\n\n\t/** docced in super class **/\n\tp.clone = function() {\n\t\treturn new ColorMatrixFilter(this.matrix);\n\t};\n\n// private methods:\n\t/** docced in super class **/\n\tp._applyFilter = function(imageData) { \n\t\tvar data = imageData.data;\n\t\tvar l = data.length;\n\t\tvar r,g,b,a;\n\t\tvar mtx = this.matrix;\n\t\tvar m0 =  mtx[0],  m1 =  mtx[1],  m2 =  mtx[2],  m3 =  mtx[3],  m4 =  mtx[4];\n\t\tvar m5 =  mtx[5],  m6 =  mtx[6],  m7 =  mtx[7],  m8 =  mtx[8],  m9 =  mtx[9];\n\t\tvar m10 = mtx[10], m11 = mtx[11], m12 = mtx[12], m13 = mtx[13], m14 = mtx[14];\n\t\tvar m15 = mtx[15], m16 = mtx[16], m17 = mtx[17], m18 = mtx[18], m19 = mtx[19];\n\n\t\tfor (var i=0; i<l; i+=4) {\n\t\t\tr = data[i];\n\t\t\tg = data[i+1];\n\t\t\tb = data[i+2];\n\t\t\ta = data[i+3];\n\t\t\tdata[i] = r*m0+g*m1+b*m2+a*m3+m4; // red\n\t\t\tdata[i+1] = r*m5+g*m6+b*m7+a*m8+m9; // green\n\t\t\tdata[i+2] = r*m10+g*m11+b*m12+a*m13+m14; // blue\n\t\t\tdata[i+3] = r*m15+g*m16+b*m17+a*m18+m19; // alpha\n\t\t}\n\t\treturn true;\n\t};\n\n\n\tcreatejs.ColorMatrixFilter = createjs.promote(ColorMatrixFilter, \"Filter\");\n}());\n\n//##############################################################################\n// Touch.js\n//##############################################################################\n\n(function() {\n\t\"use strict\";\n\n\n// constructor:\n\t/**\n * Global utility for working with multi-touch enabled devices in EaselJS. Currently supports W3C Touch API (iOS and\n * modern Android browser) and the Pointer API (IE), including ms-prefixed events in IE10, and unprefixed in IE11.\n *\n * Ensure that you {{#crossLink \"Touch/disable\"}}{{/crossLink}} touch when cleaning up your application. You do not have\n * to check if touch is supported to enable it, as it will fail gracefully if it is not supported.\n *\n * <h4>Example</h4>\n *\n *      var stage = new createjs.Stage(\"canvasId\");\n *      createjs.Touch.enable(stage);\n *\n * <strong>Note:</strong> It is important to disable Touch on a stage that you are no longer using:\n *\n *      createjs.Touch.disable(stage);\n *\n * @class Touch\n * @static\n **/\n\tfunction Touch() {\n\t\tthrow \"Touch cannot be instantiated\";\n\t}\n\n\n// public static methods:\n\t/**\n\t * Returns `true` if touch is supported in the current browser.\n\t * @method isSupported\n\t * @return {Boolean} Indicates whether touch is supported in the current browser.\n\t * @static\n\t **/\n\tTouch.isSupported = function() {\n\t\treturn\t!!(('ontouchstart' in window) // iOS & Android\n\t\t\t|| (window.navigator['msPointerEnabled'] && window.navigator['msMaxTouchPoints'] > 0) // IE10\n\t\t\t|| (window.navigator['pointerEnabled'] && window.navigator['maxTouchPoints'] > 0)); // IE11+\n\t};\n\n\t/**\n\t * Enables touch interaction for the specified EaselJS {{#crossLink \"Stage\"}}{{/crossLink}}. Currently supports iOS\n\t * (and compatible browsers, such as modern Android browsers), and IE10/11. Supports both single touch and\n\t * multi-touch modes. Extends the EaselJS {{#crossLink \"MouseEvent\"}}{{/crossLink}} model, but without support for\n\t * double click or over/out events. See the MouseEvent {{#crossLink \"MouseEvent/pointerId:property\"}}{{/crossLink}}\n\t * for more information.\n\t * @method enable\n\t * @param {Stage} stage The {{#crossLink \"Stage\"}}{{/crossLink}} to enable touch on.\n\t * @param {Boolean} [singleTouch=false] If `true`, only a single touch will be active at a time.\n\t * @param {Boolean} [allowDefault=false] If `true`, then default gesture actions (ex. scrolling, zooming) will be\n\t * allowed when the user is interacting with the target canvas.\n\t * @return {Boolean} Returns `true` if touch was successfully enabled on the target stage.\n\t * @static\n\t **/\n\tTouch.enable = function(stage, singleTouch, allowDefault) {\n\t\tif (!stage || !stage.canvas || !Touch.isSupported()) { return false; }\n\t\tif (stage.__touch) { return true; }\n\n\t\t// inject required properties on stage:\n\t\tstage.__touch = {pointers:{}, multitouch:!singleTouch, preventDefault:!allowDefault, count:0};\n\n\t\t// note that in the future we may need to disable the standard mouse event model before adding\n\t\t// these to prevent duplicate calls. It doesn't seem to be an issue with iOS devices though.\n\t\tif ('ontouchstart' in window) { Touch._IOS_enable(stage); }\n\t\telse if (window.navigator['msPointerEnabled'] || window.navigator[\"pointerEnabled\"]) { Touch._IE_enable(stage); }\n\t\treturn true;\n\t};\n\n\t/**\n\t * Removes all listeners that were set up when calling `Touch.enable()` on a stage.\n\t * @method disable\n\t * @param {Stage} stage The {{#crossLink \"Stage\"}}{{/crossLink}} to disable touch on.\n\t * @static\n\t **/\n\tTouch.disable = function(stage) {\n\t\tif (!stage) { return; }\n\t\tif ('ontouchstart' in window) { Touch._IOS_disable(stage); }\n\t\telse if (window.navigator['msPointerEnabled'] || window.navigator[\"pointerEnabled\"]) { Touch._IE_disable(stage); }\n\t\t\n\t\tdelete stage.__touch;\n\t};\n\n\n// Private static methods:\n\t/**\n\t * @method _IOS_enable\n\t * @protected\n\t * @param {Stage} stage\n\t * @static\n\t **/\n\tTouch._IOS_enable = function(stage) {\n\t\tvar canvas = stage.canvas;\n\t\tvar f = stage.__touch.f = function(e) { Touch._IOS_handleEvent(stage,e); };\n\t\tcanvas.addEventListener(\"touchstart\", f, false);\n\t\tcanvas.addEventListener(\"touchmove\", f, false);\n\t\tcanvas.addEventListener(\"touchend\", f, false);\n\t\tcanvas.addEventListener(\"touchcancel\", f, false);\n\t};\n\n\t/**\n\t * @method _IOS_disable\n\t * @protected\n\t * @param {Stage} stage\n\t * @static\n\t **/\n\tTouch._IOS_disable = function(stage) {\n\t\tvar canvas = stage.canvas;\n\t\tif (!canvas) { return; }\n\t\tvar f = stage.__touch.f;\n\t\tcanvas.removeEventListener(\"touchstart\", f, false);\n\t\tcanvas.removeEventListener(\"touchmove\", f, false);\n\t\tcanvas.removeEventListener(\"touchend\", f, false);\n\t\tcanvas.removeEventListener(\"touchcancel\", f, false);\n\t};\n\n\t/**\n\t * @method _IOS_handleEvent\n\t * @param {Stage} stage\n\t * @param {Object} e The event to handle\n\t * @protected\n\t * @static\n\t **/\n\tTouch._IOS_handleEvent = function(stage, e) {\n\t\tif (!stage) { return; }\n\t\tif (stage.__touch.preventDefault) { e.preventDefault&&e.preventDefault(); }\n\t\tvar touches = e.changedTouches;\n\t\tvar type = e.type;\n\t\tfor (var i= 0,l=touches.length; i<l; i++) {\n\t\t\tvar touch = touches[i];\n\t\t\tvar id = touch.identifier;\n\t\t\tif (touch.target != stage.canvas) { continue; }\n\n\t\t\tif (type == \"touchstart\") {\n\t\t\t\tthis._handleStart(stage, id, e, touch.pageX, touch.pageY);\n\t\t\t} else if (type == \"touchmove\") {\n\t\t\t\tthis._handleMove(stage, id, e, touch.pageX, touch.pageY);\n\t\t\t} else if (type == \"touchend\" || type == \"touchcancel\") {\n\t\t\t\tthis._handleEnd(stage, id, e);\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t * @method _IE_enable\n\t * @protected\n\t * @param {Stage} stage\n\t * @static\n\t **/\n\tTouch._IE_enable = function(stage) {\n\t\tvar canvas = stage.canvas;\n\t\tvar f = stage.__touch.f = function(e) { Touch._IE_handleEvent(stage,e); };\n\n\t\tif (window.navigator[\"pointerEnabled\"] === undefined) {\n\t\t\tcanvas.addEventListener(\"MSPointerDown\", f, false);\n\t\t\twindow.addEventListener(\"MSPointerMove\", f, false);\n\t\t\twindow.addEventListener(\"MSPointerUp\", f, false);\n\t\t\twindow.addEventListener(\"MSPointerCancel\", f, false);\n\t\t\tif (stage.__touch.preventDefault) { canvas.style.msTouchAction = \"none\"; }\n\t\t} else {\n\t\t\tcanvas.addEventListener(\"pointerdown\", f, false);\n\t\t\twindow.addEventListener(\"pointermove\", f, false);\n\t\t\twindow.addEventListener(\"pointerup\", f, false);\n\t\t\twindow.addEventListener(\"pointercancel\", f, false);\n\t\t\tif (stage.__touch.preventDefault) { canvas.style.touchAction = \"none\"; }\n\n\t\t}\n\t\tstage.__touch.activeIDs = {};\n\t};\n\n\t/**\n\t * @method _IE_disable\n\t * @protected\n\t * @param {Stage} stage\n\t * @static\n\t **/\n\tTouch._IE_disable = function(stage) {\n\t\tvar f = stage.__touch.f;\n\n\t\tif (window.navigator[\"pointerEnabled\"] === undefined) {\n\t\t\twindow.removeEventListener(\"MSPointerMove\", f, false);\n\t\t\twindow.removeEventListener(\"MSPointerUp\", f, false);\n\t\t\twindow.removeEventListener(\"MSPointerCancel\", f, false);\n\t\t\tif (stage.canvas) {\n\t\t\t\tstage.canvas.removeEventListener(\"MSPointerDown\", f, false);\n\t\t\t}\n\t\t} else {\n\t\t\twindow.removeEventListener(\"pointermove\", f, false);\n\t\t\twindow.removeEventListener(\"pointerup\", f, false);\n\t\t\twindow.removeEventListener(\"pointercancel\", f, false);\n\t\t\tif (stage.canvas) {\n\t\t\t\tstage.canvas.removeEventListener(\"pointerdown\", f, false);\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t * @method _IE_handleEvent\n\t * @param {Stage} stage\n\t * @param {Object} e The event to handle.\n\t * @protected\n\t * @static\n\t **/\n\tTouch._IE_handleEvent = function(stage, e) {\n\t\tif (!stage) { return; }\n\t\tif (stage.__touch.preventDefault) { e.preventDefault && e.preventDefault(); }\n\t\tvar type = e.type;\n\t\tvar id = e.pointerId;\n\t\tvar ids = stage.__touch.activeIDs;\n\n\t\tif (type == \"MSPointerDown\" || type == \"pointerdown\") {\n\t\t\tif (e.srcElement != stage.canvas) { return; }\n\t\t\tids[id] = true;\n\t\t\tthis._handleStart(stage, id, e, e.pageX, e.pageY);\n\t\t} else if (ids[id]) { // it's an id we're watching\n\t\t\tif (type == \"MSPointerMove\" || type == \"pointermove\") {\n\t\t\t\tthis._handleMove(stage, id, e, e.pageX, e.pageY);\n\t\t\t} else if (type == \"MSPointerUp\" || type == \"MSPointerCancel\"\n\t\t\t\t\t|| type == \"pointerup\" || type == \"pointercancel\") {\n\t\t\t\tdelete(ids[id]);\n\t\t\t\tthis._handleEnd(stage, id, e);\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t * @method _handleStart\n\t * @param {Stage} stage\n\t * @param {String|Number} id\n\t * @param {Object} e\n\t * @param {Number} x\n\t * @param {Number} y\n\t * @protected\n\t **/\n\tTouch._handleStart = function(stage, id, e, x, y) {\n\t\tvar props = stage.__touch;\n\t\tif (!props.multitouch && props.count) { return; }\n\t\tvar ids = props.pointers;\n\t\tif (ids[id]) { return; }\n\t\tids[id] = true;\n\t\tprops.count++;\n\t\tstage._handlePointerDown(id, e, x, y);\n\t};\n\n\t/**\n\t * @method _handleMove\n\t * @param {Stage} stage\n\t * @param {String|Number} id\n\t * @param {Object} e\n\t * @param {Number} x\n\t * @param {Number} y\n\t * @protected\n\t **/\n\tTouch._handleMove = function(stage, id, e, x, y) {\n\t\tif (!stage.__touch.pointers[id]) { return; }\n\t\tstage._handlePointerMove(id, e, x, y);\n\t};\n\n\t/**\n\t * @method _handleEnd\n\t * @param {Stage} stage\n\t * @param {String|Number} id\n\t * @param {Object} e\n\t * @protected\n\t **/\n\tTouch._handleEnd = function(stage, id, e) {\n\t\t// TODO: cancel should be handled differently for proper UI (ex. an up would trigger a click, a cancel would more closely resemble an out).\n\t\tvar props = stage.__touch;\n\t\tvar ids = props.pointers;\n\t\tif (!ids[id]) { return; }\n\t\tprops.count--;\n\t\tstage._handlePointerUp(id, e, true);\n\t\tdelete(ids[id]);\n\t};\n\n\n\tcreatejs.Touch = Touch;\n}());\n\n//##############################################################################\n// version.js\n//##############################################################################\n\n(function() {\n\t\"use strict\";\n\n\t/**\n\t * Static class holding library specific information such as the version and buildDate of\n\t * the library.\n\t * @class EaselJS\n\t **/\n\tvar s = createjs.EaselJS = createjs.EaselJS || {};\n\n\t/**\n\t * The version string for this release.\n\t * @property version\n\t * @type String\n\t * @static\n\t **/\n\ts.version = /*=version*/\"0.8.2\"; // injected by build process\n\n\t/**\n\t * The build date for this release in UTC format.\n\t * @property buildDate\n\t * @type String\n\t * @static\n\t **/\n\ts.buildDate = /*=date*/\"Thu, 26 Nov 2015 20:44:34 GMT\"; // injected by build process\n\n})();\n\n//##############################################################################\n// version.js\n//##############################################################################\n\n(function () {\n\t\"use strict\";\n\n\t/**\n\t * Static class holding library specific information such as the version and buildDate of the library.\n\t * @class PreloadJS\n\t **/\n\tvar s = createjs.PreloadJS = createjs.PreloadJS || {};\n\n\t/**\n\t * The version string for this release.\n\t * @property version\n\t * @type {String}\n\t * @static\n\t **/\n\ts.version = /*=version*/\"0.6.2\"; // injected by build process\n\n\t/**\n\t * The build date for this release in UTC format.\n\t * @property buildDate\n\t * @type {String}\n\t * @static\n\t **/\n\ts.buildDate = /*=date*/\"Thu, 26 Nov 2015 20:44:31 GMT\"; // injected by build process\n\n})();\n\n//##############################################################################\n// proxy.js\n//##############################################################################\n\n/**\n * Various utilities that the CreateJS Suite uses. Utilities are created as separate files, and will be available on the\n * createjs namespace directly.\n *\n * <h4>Example</h4>\n *\n *      myObject.addEventListener(\"change\", createjs.proxy(myMethod, scope));\n *\n * @class Utility Methods\n * @main Utility Methods\n */\n\n(function() {\n\t\"use strict\";\n\n\t/**\n\t * A function proxy for methods. By default, JavaScript methods do not maintain scope, so passing a method as a\n\t * callback will result in the method getting called in the scope of the caller. Using a proxy ensures that the\n\t * method gets called in the correct scope.\n\t *\n\t * Additional arguments can be passed that will be applied to the function when it is called.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      myObject.addEventListener(\"event\", createjs.proxy(myHandler, this, arg1, arg2));\n\t *\n\t *      function myHandler(arg1, arg2) {\n\t *           // This gets called when myObject.myCallback is executed.\n\t *      }\n\t *\n\t * @method proxy\n\t * @param {Function} method The function to call\n\t * @param {Object} scope The scope to call the method name on\n\t * @param {mixed} [arg] * Arguments that are appended to the callback for additional params.\n\t * @public\n\t * @static\n\t */\n\tcreatejs.proxy = function (method, scope) {\n\t\tvar aArgs = Array.prototype.slice.call(arguments, 2);\n\t\treturn function () {\n\t\t\treturn method.apply(scope, Array.prototype.slice.call(arguments, 0).concat(aArgs));\n\t\t};\n\t}\n\n}());\n\n//##############################################################################\n// ErrorEvent.js\n//##############################################################################\n\n(function() {\n\t\"use strict\";\n\n\t/**\n\t * A general error {{#crossLink \"Event\"}}{{/crossLink}}, that describes an error that occurred, as well as any details.\n\t * @class ErrorEvent\n\t * @param {String} [title] The error title\n\t * @param {String} [message] The error description\n\t * @param {Object} [data] Additional error data\n\t * @constructor\n\t */\n\tfunction ErrorEvent(title, message, data) {\n\t\tthis.Event_constructor(\"error\");\n\n\t\t/**\n\t\t * The short error title, which indicates the type of error that occurred.\n\t\t * @property title\n\t\t * @type String\n\t\t */\n\t\tthis.title = title;\n\n\t\t/**\n\t\t * The verbose error message, containing details about the error.\n\t\t * @property message\n\t\t * @type String\n\t\t */\n\t\tthis.message = message;\n\n\t\t/**\n\t\t * Additional data attached to an error.\n\t\t * @property data\n\t\t * @type {Object}\n\t\t */\n\t\tthis.data = data;\n\t}\n\n\tvar p = createjs.extend(ErrorEvent, createjs.Event);\n\n\tp.clone = function() {\n\t\treturn new createjs.ErrorEvent(this.title, this.message, this.data);\n\t};\n\n\tcreatejs.ErrorEvent = createjs.promote(ErrorEvent, \"Event\");\n\n}());\n\n//##############################################################################\n// ProgressEvent.js\n//##############################################################################\n\n(function (scope) {\n\t\"use strict\";\n\n\t// constructor\n\t/**\n\t * A CreateJS {{#crossLink \"Event\"}}{{/crossLink}} that is dispatched when progress changes.\n\t * @class ProgressEvent\n\t * @param {Number} loaded The amount that has been loaded. This can be any number relative to the total.\n\t * @param {Number} [total=1] The total amount that will load. This will default to 1, so if the `loaded` value is\n\t * a percentage (between 0 and 1), it can be omitted.\n\t * @todo Consider having this event be a \"fileprogress\" event as well\n\t * @constructor\n\t */\n\tfunction ProgressEvent(loaded, total) {\n\t\tthis.Event_constructor(\"progress\");\n\n\t\t/**\n\t\t * The amount that has been loaded (out of a total amount)\n\t\t * @property loaded\n\t\t * @type {Number}\n\t\t */\n\t\tthis.loaded = loaded;\n\n\t\t/**\n\t\t * The total \"size\" of the load.\n\t\t * @property total\n\t\t * @type {Number}\n\t\t * @default 1\n\t\t */\n\t\tthis.total = (total == null) ? 1 : total;\n\n\t\t/**\n\t\t * The percentage (out of 1) that the load has been completed. This is calculated using `loaded/total`.\n\t\t * @property progress\n\t\t * @type {Number}\n\t\t * @default 0\n\t\t */\n\t\tthis.progress = (total == 0) ? 0 : this.loaded / this.total;\n\t};\n\n\tvar p = createjs.extend(ProgressEvent, createjs.Event);\n\n\t/**\n\t * Returns a clone of the ProgressEvent instance.\n\t * @method clone\n\t * @return {ProgressEvent} a clone of the Event instance.\n\t **/\n\tp.clone = function() {\n\t\treturn new createjs.ProgressEvent(this.loaded, this.total);\n\t};\n\n\tcreatejs.ProgressEvent = createjs.promote(ProgressEvent, \"Event\");\n\n}(window));\n\n//##############################################################################\n// json3.js\n//##############################################################################\n\n/*! JSON v3.3.2 | http://bestiejs.github.io/json3 | Copyright 2012-2014, Kit Cambridge | http://kit.mit-license.org */\n;(function () {\n  // Detect the `define` function exposed by asynchronous module loaders. The\n  // strict `define` check is necessary for compatibility with `r.js`.\n  var isLoader = typeof define === \"function\" && define.amd;\n\n  // A set of types used to distinguish objects from primitives.\n  var objectTypes = {\n    \"function\": true,\n    \"object\": true\n  };\n\n  // Detect the `exports` object exposed by CommonJS implementations.\n  var freeExports = objectTypes[typeof exports] && exports && !exports.nodeType && exports;\n\n  // Use the `global` object exposed by Node (including Browserify via\n  // `insert-module-globals`), Narwhal, and Ringo as the default context,\n  // and the `window` object in browsers. Rhino exports a `global` function\n  // instead.\n  var root = objectTypes[typeof window] && window || this,\n      freeGlobal = freeExports && objectTypes[typeof module] && module && !module.nodeType && typeof global == \"object\" && global;\n\n  if (freeGlobal && (freeGlobal[\"global\"] === freeGlobal || freeGlobal[\"window\"] === freeGlobal || freeGlobal[\"self\"] === freeGlobal)) {\n    root = freeGlobal;\n  }\n\n  // Public: Initializes JSON 3 using the given `context` object, attaching the\n  // `stringify` and `parse` functions to the specified `exports` object.\n  function runInContext(context, exports) {\n    context || (context = root[\"Object\"]());\n    exports || (exports = root[\"Object\"]());\n\n    // Native constructor aliases.\n    var Number = context[\"Number\"] || root[\"Number\"],\n        String = context[\"String\"] || root[\"String\"],\n        Object = context[\"Object\"] || root[\"Object\"],\n        Date = context[\"Date\"] || root[\"Date\"],\n        SyntaxError = context[\"SyntaxError\"] || root[\"SyntaxError\"],\n        TypeError = context[\"TypeError\"] || root[\"TypeError\"],\n        Math = context[\"Math\"] || root[\"Math\"],\n        nativeJSON = context[\"JSON\"] || root[\"JSON\"];\n\n    // Delegate to the native `stringify` and `parse` implementations.\n    if (typeof nativeJSON == \"object\" && nativeJSON) {\n      exports.stringify = nativeJSON.stringify;\n      exports.parse = nativeJSON.parse;\n    }\n\n    // Convenience aliases.\n    var objectProto = Object.prototype,\n        getClass = objectProto.toString,\n        isProperty, forEach, undef;\n\n    // Test the `Date#getUTC*` methods. Based on work by @Yaffle.\n    var isExtended = new Date(-3509827334573292);\n    try {\n      // The `getUTCFullYear`, `Month`, and `Date` methods return nonsensical\n      // results for certain dates in Opera >= 10.53.\n      isExtended = isExtended.getUTCFullYear() == -109252 && isExtended.getUTCMonth() === 0 && isExtended.getUTCDate() === 1 &&\n        // Safari < 2.0.2 stores the internal millisecond time value correctly,\n        // but clips the values returned by the date methods to the range of\n        // signed 32-bit integers ([-2 ** 31, 2 ** 31 - 1]).\n        isExtended.getUTCHours() == 10 && isExtended.getUTCMinutes() == 37 && isExtended.getUTCSeconds() == 6 && isExtended.getUTCMilliseconds() == 708;\n    } catch (exception) {}\n\n    // Internal: Determines whether the native `JSON.stringify` and `parse`\n    // implementations are spec-compliant. Based on work by Ken Snyder.\n    function has(name) {\n      if (has[name] !== undef) {\n        // Return cached feature test result.\n        return has[name];\n      }\n      var isSupported;\n      if (name == \"bug-string-char-index\") {\n        // IE <= 7 doesn't support accessing string characters using square\n        // bracket notation. IE 8 only supports this for primitives.\n        isSupported = \"a\"[0] != \"a\";\n      } else if (name == \"json\") {\n        // Indicates whether both `JSON.stringify` and `JSON.parse` are\n        // supported.\n        isSupported = has(\"json-stringify\") && has(\"json-parse\");\n      } else {\n        var value, serialized = '{\"a\":[1,true,false,null,\"\\\\u0000\\\\b\\\\n\\\\f\\\\r\\\\t\"]}';\n        // Test `JSON.stringify`.\n        if (name == \"json-stringify\") {\n          var stringify = exports.stringify, stringifySupported = typeof stringify == \"function\" && isExtended;\n          if (stringifySupported) {\n            // A test function object with a custom `toJSON` method.\n            (value = function () {\n              return 1;\n            }).toJSON = value;\n            try {\n              stringifySupported =\n                // Firefox 3.1b1 and b2 serialize string, number, and boolean\n                // primitives as object literals.\n                stringify(0) === \"0\" &&\n                // FF 3.1b1, b2, and JSON 2 serialize wrapped primitives as object\n                // literals.\n                stringify(new Number()) === \"0\" &&\n                stringify(new String()) == '\"\"' &&\n                // FF 3.1b1, 2 throw an error if the value is `null`, `undefined`, or\n                // does not define a canonical JSON representation (this applies to\n                // objects with `toJSON` properties as well, *unless* they are nested\n                // within an object or array).\n                stringify(getClass) === undef &&\n                // IE 8 serializes `undefined` as `\"undefined\"`. Safari <= 5.1.7 and\n                // FF 3.1b3 pass this test.\n                stringify(undef) === undef &&\n                // Safari <= 5.1.7 and FF 3.1b3 throw `Error`s and `TypeError`s,\n                // respectively, if the value is omitted entirely.\n                stringify() === undef &&\n                // FF 3.1b1, 2 throw an error if the given value is not a number,\n                // string, array, object, Boolean, or `null` literal. This applies to\n                // objects with custom `toJSON` methods as well, unless they are nested\n                // inside object or array literals. YUI 3.0.0b1 ignores custom `toJSON`\n                // methods entirely.\n                stringify(value) === \"1\" &&\n                stringify([value]) == \"[1]\" &&\n                // Prototype <= 1.6.1 serializes `[undefined]` as `\"[]\"` instead of\n                // `\"[null]\"`.\n                stringify([undef]) == \"[null]\" &&\n                // YUI 3.0.0b1 fails to serialize `null` literals.\n                stringify(null) == \"null\" &&\n                // FF 3.1b1, 2 halts serialization if an array contains a function:\n                // `[1, true, getClass, 1]` serializes as \"[1,true,],\". FF 3.1b3\n                // elides non-JSON values from objects and arrays, unless they\n                // define custom `toJSON` methods.\n                stringify([undef, getClass, null]) == \"[null,null,null]\" &&\n                // Simple serialization test. FF 3.1b1 uses Unicode escape sequences\n                // where character escape codes are expected (e.g., `\\b` => `\\u0008`).\n                stringify({ \"a\": [value, true, false, null, \"\\x00\\b\\n\\f\\r\\t\"] }) == serialized &&\n                // FF 3.1b1 and b2 ignore the `filter` and `width` arguments.\n                stringify(null, value) === \"1\" &&\n                stringify([1, 2], null, 1) == \"[\\n 1,\\n 2\\n]\" &&\n                // JSON 2, Prototype <= 1.7, and older WebKit builds incorrectly\n                // serialize extended years.\n                stringify(new Date(-8.64e15)) == '\"-271821-04-20T00:00:00.000Z\"' &&\n                // The milliseconds are optional in ES 5, but required in 5.1.\n                stringify(new Date(8.64e15)) == '\"+275760-09-13T00:00:00.000Z\"' &&\n                // Firefox <= 11.0 incorrectly serializes years prior to 0 as negative\n                // four-digit years instead of six-digit years. Credits: @Yaffle.\n                stringify(new Date(-621987552e5)) == '\"-000001-01-01T00:00:00.000Z\"' &&\n                // Safari <= 5.1.5 and Opera >= 10.53 incorrectly serialize millisecond\n                // values less than 1000. Credits: @Yaffle.\n                stringify(new Date(-1)) == '\"1969-12-31T23:59:59.999Z\"';\n            } catch (exception) {\n              stringifySupported = false;\n            }\n          }\n          isSupported = stringifySupported;\n        }\n        // Test `JSON.parse`.\n        if (name == \"json-parse\") {\n          var parse = exports.parse;\n          if (typeof parse == \"function\") {\n            try {\n              // FF 3.1b1, b2 will throw an exception if a bare literal is provided.\n              // Conforming implementations should also coerce the initial argument to\n              // a string prior to parsing.\n              if (parse(\"0\") === 0 && !parse(false)) {\n                // Simple parsing test.\n                value = parse(serialized);\n                var parseSupported = value[\"a\"].length == 5 && value[\"a\"][0] === 1;\n                if (parseSupported) {\n                  try {\n                    // Safari <= 5.1.2 and FF 3.1b1 allow unescaped tabs in strings.\n                    parseSupported = !parse('\"\\t\"');\n                  } catch (exception) {}\n                  if (parseSupported) {\n                    try {\n                      // FF 4.0 and 4.0.1 allow leading `+` signs and leading\n                      // decimal points. FF 4.0, 4.0.1, and IE 9-10 also allow\n                      // certain octal literals.\n                      parseSupported = parse(\"01\") !== 1;\n                    } catch (exception) {}\n                  }\n                  if (parseSupported) {\n                    try {\n                      // FF 4.0, 4.0.1, and Rhino 1.7R3-R4 allow trailing decimal\n                      // points. These environments, along with FF 3.1b1 and 2,\n                      // also allow trailing commas in JSON objects and arrays.\n                      parseSupported = parse(\"1.\") !== 1;\n                    } catch (exception) {}\n                  }\n                }\n              }\n            } catch (exception) {\n              parseSupported = false;\n            }\n          }\n          isSupported = parseSupported;\n        }\n      }\n      return has[name] = !!isSupported;\n    }\n\n    if (!has(\"json\")) {\n      // Common `[[Class]]` name aliases.\n      var functionClass = \"[object Function]\",\n          dateClass = \"[object Date]\",\n          numberClass = \"[object Number]\",\n          stringClass = \"[object String]\",\n          arrayClass = \"[object Array]\",\n          booleanClass = \"[object Boolean]\";\n\n      // Detect incomplete support for accessing string characters by index.\n      var charIndexBuggy = has(\"bug-string-char-index\");\n\n      // Define additional utility methods if the `Date` methods are buggy.\n      if (!isExtended) {\n        var floor = Math.floor;\n        // A mapping between the months of the year and the number of days between\n        // January 1st and the first of the respective month.\n        var Months = [0, 31, 59, 90, 120, 151, 181, 212, 243, 273, 304, 334];\n        // Internal: Calculates the number of days between the Unix epoch and the\n        // first day of the given month.\n        var getDay = function (year, month) {\n          return Months[month] + 365 * (year - 1970) + floor((year - 1969 + (month = +(month > 1))) / 4) - floor((year - 1901 + month) / 100) + floor((year - 1601 + month) / 400);\n        };\n      }\n\n      // Internal: Determines if a property is a direct property of the given\n      // object. Delegates to the native `Object#hasOwnProperty` method.\n      if (!(isProperty = objectProto.hasOwnProperty)) {\n        isProperty = function (property) {\n          var members = {}, constructor;\n          if ((members.__proto__ = null, members.__proto__ = {\n            // The *proto* property cannot be set multiple times in recent\n            // versions of Firefox and SeaMonkey.\n            \"toString\": 1\n          }, members).toString != getClass) {\n            // Safari <= 2.0.3 doesn't implement `Object#hasOwnProperty`, but\n            // supports the mutable *proto* property.\n            isProperty = function (property) {\n              // Capture and break the object's prototype chain (see section 8.6.2\n              // of the ES 5.1 spec). The parenthesized expression prevents an\n              // unsafe transformation by the Closure Compiler.\n              var original = this.__proto__, result = property in (this.__proto__ = null, this);\n              // Restore the original prototype chain.\n              this.__proto__ = original;\n              return result;\n            };\n          } else {\n            // Capture a reference to the top-level `Object` constructor.\n            constructor = members.constructor;\n            // Use the `constructor` property to simulate `Object#hasOwnProperty` in\n            // other environments.\n            isProperty = function (property) {\n              var parent = (this.constructor || constructor).prototype;\n              return property in this && !(property in parent && this[property] === parent[property]);\n            };\n          }\n          members = null;\n          return isProperty.call(this, property);\n        };\n      }\n\n      // Internal: Normalizes the `for...in` iteration algorithm across\n      // environments. Each enumerated key is yielded to a `callback` function.\n      forEach = function (object, callback) {\n        var size = 0, Properties, members, property;\n\n        // Tests for bugs in the current environment's `for...in` algorithm. The\n        // `valueOf` property inherits the non-enumerable flag from\n        // `Object.prototype` in older versions of IE, Netscape, and Mozilla.\n        (Properties = function () {\n          this.valueOf = 0;\n        }).prototype.valueOf = 0;\n\n        // Iterate over a new instance of the `Properties` class.\n        members = new Properties();\n        for (property in members) {\n          // Ignore all properties inherited from `Object.prototype`.\n          if (isProperty.call(members, property)) {\n            size++;\n          }\n        }\n        Properties = members = null;\n\n        // Normalize the iteration algorithm.\n        if (!size) {\n          // A list of non-enumerable properties inherited from `Object.prototype`.\n          members = [\"valueOf\", \"toString\", \"toLocaleString\", \"propertyIsEnumerable\", \"isPrototypeOf\", \"hasOwnProperty\", \"constructor\"];\n          // IE <= 8, Mozilla 1.0, and Netscape 6.2 ignore shadowed non-enumerable\n          // properties.\n          forEach = function (object, callback) {\n            var isFunction = getClass.call(object) == functionClass, property, length;\n            var hasProperty = !isFunction && typeof object.constructor != \"function\" && objectTypes[typeof object.hasOwnProperty] && object.hasOwnProperty || isProperty;\n            for (property in object) {\n              // Gecko <= 1.0 enumerates the `prototype` property of functions under\n              // certain conditions; IE does not.\n              if (!(isFunction && property == \"prototype\") && hasProperty.call(object, property)) {\n                callback(property);\n              }\n            }\n            // Manually invoke the callback for each non-enumerable property.\n            for (length = members.length; property = members[--length]; hasProperty.call(object, property) && callback(property));\n          };\n        } else if (size == 2) {\n          // Safari <= 2.0.4 enumerates shadowed properties twice.\n          forEach = function (object, callback) {\n            // Create a set of iterated properties.\n            var members = {}, isFunction = getClass.call(object) == functionClass, property;\n            for (property in object) {\n              // Store each property name to prevent double enumeration. The\n              // `prototype` property of functions is not enumerated due to cross-\n              // environment inconsistencies.\n              if (!(isFunction && property == \"prototype\") && !isProperty.call(members, property) && (members[property] = 1) && isProperty.call(object, property)) {\n                callback(property);\n              }\n            }\n          };\n        } else {\n          // No bugs detected; use the standard `for...in` algorithm.\n          forEach = function (object, callback) {\n            var isFunction = getClass.call(object) == functionClass, property, isConstructor;\n            for (property in object) {\n              if (!(isFunction && property == \"prototype\") && isProperty.call(object, property) && !(isConstructor = property === \"constructor\")) {\n                callback(property);\n              }\n            }\n            // Manually invoke the callback for the `constructor` property due to\n            // cross-environment inconsistencies.\n            if (isConstructor || isProperty.call(object, (property = \"constructor\"))) {\n              callback(property);\n            }\n          };\n        }\n        return forEach(object, callback);\n      };\n\n      // Public: Serializes a JavaScript `value` as a JSON string. The optional\n      // `filter` argument may specify either a function that alters how object and\n      // array members are serialized, or an array of strings and numbers that\n      // indicates which properties should be serialized. The optional `width`\n      // argument may be either a string or number that specifies the indentation\n      // level of the output.\n      if (!has(\"json-stringify\")) {\n        // Internal: A map of control characters and their escaped equivalents.\n        var Escapes = {\n          92: \"\\\\\\\\\",\n          34: '\\\\\"',\n          8: \"\\\\b\",\n          12: \"\\\\f\",\n          10: \"\\\\n\",\n          13: \"\\\\r\",\n          9: \"\\\\t\"\n        };\n\n        // Internal: Converts `value` into a zero-padded string such that its\n        // length is at least equal to `width`. The `width` must be <= 6.\n        var leadingZeroes = \"000000\";\n        var toPaddedString = function (width, value) {\n          // The `|| 0` expression is necessary to work around a bug in\n          // Opera <= 7.54u2 where `0 == -0`, but `String(-0) !== \"0\"`.\n          return (leadingZeroes + (value || 0)).slice(-width);\n        };\n\n        // Internal: Double-quotes a string `value`, replacing all ASCII control\n        // characters (characters with code unit values between 0 and 31) with\n        // their escaped equivalents. This is an implementation of the\n        // `Quote(value)` operation defined in ES 5.1 section 15.12.3.\n        var unicodePrefix = \"\\\\u00\";\n        var quote = function (value) {\n          var result = '\"', index = 0, length = value.length, useCharIndex = !charIndexBuggy || length > 10;\n          var symbols = useCharIndex && (charIndexBuggy ? value.split(\"\") : value);\n          for (; index < length; index++) {\n            var charCode = value.charCodeAt(index);\n            // If the character is a control character, append its Unicode or\n            // shorthand escape sequence; otherwise, append the character as-is.\n            switch (charCode) {\n              case 8: case 9: case 10: case 12: case 13: case 34: case 92:\n                result += Escapes[charCode];\n                break;\n              default:\n                if (charCode < 32) {\n                  result += unicodePrefix + toPaddedString(2, charCode.toString(16));\n                  break;\n                }\n                result += useCharIndex ? symbols[index] : value.charAt(index);\n            }\n          }\n          return result + '\"';\n        };\n\n        // Internal: Recursively serializes an object. Implements the\n        // `Str(key, holder)`, `JO(value)`, and `JA(value)` operations.\n        var serialize = function (property, object, callback, properties, whitespace, indentation, stack) {\n          var value, className, year, month, date, time, hours, minutes, seconds, milliseconds, results, element, index, length, prefix, result;\n          try {\n            // Necessary for host object support.\n            value = object[property];\n          } catch (exception) {}\n          if (typeof value == \"object\" && value) {\n            className = getClass.call(value);\n            if (className == dateClass && !isProperty.call(value, \"toJSON\")) {\n              if (value > -1 / 0 && value < 1 / 0) {\n                // Dates are serialized according to the `Date#toJSON` method\n                // specified in ES 5.1 section 15.9.5.44. See section 15.9.1.15\n                // for the ISO 8601 date time string format.\n                if (getDay) {\n                  // Manually compute the year, month, date, hours, minutes,\n                  // seconds, and milliseconds if the `getUTC*` methods are\n                  // buggy. Adapted from @Yaffle's `date-shim` project.\n                  date = floor(value / 864e5);\n                  for (year = floor(date / 365.2425) + 1970 - 1; getDay(year + 1, 0) <= date; year++);\n                  for (month = floor((date - getDay(year, 0)) / 30.42); getDay(year, month + 1) <= date; month++);\n                  date = 1 + date - getDay(year, month);\n                  // The `time` value specifies the time within the day (see ES\n                  // 5.1 section 15.9.1.2). The formula `(A % B + B) % B` is used\n                  // to compute `A modulo B`, as the `%` operator does not\n                  // correspond to the `modulo` operation for negative numbers.\n                  time = (value % 864e5 + 864e5) % 864e5;\n                  // The hours, minutes, seconds, and milliseconds are obtained by\n                  // decomposing the time within the day. See section 15.9.1.10.\n                  hours = floor(time / 36e5) % 24;\n                  minutes = floor(time / 6e4) % 60;\n                  seconds = floor(time / 1e3) % 60;\n                  milliseconds = time % 1e3;\n                } else {\n                  year = value.getUTCFullYear();\n                  month = value.getUTCMonth();\n                  date = value.getUTCDate();\n                  hours = value.getUTCHours();\n                  minutes = value.getUTCMinutes();\n                  seconds = value.getUTCSeconds();\n                  milliseconds = value.getUTCMilliseconds();\n                }\n                // Serialize extended years correctly.\n                value = (year <= 0 || year >= 1e4 ? (year < 0 ? \"-\" : \"+\") + toPaddedString(6, year < 0 ? -year : year) : toPaddedString(4, year)) +\n                  \"-\" + toPaddedString(2, month + 1) + \"-\" + toPaddedString(2, date) +\n                  // Months, dates, hours, minutes, and seconds should have two\n                  // digits; milliseconds should have three.\n                  \"T\" + toPaddedString(2, hours) + \":\" + toPaddedString(2, minutes) + \":\" + toPaddedString(2, seconds) +\n                  // Milliseconds are optional in ES 5.0, but required in 5.1.\n                  \".\" + toPaddedString(3, milliseconds) + \"Z\";\n              } else {\n                value = null;\n              }\n            } else if (typeof value.toJSON == \"function\" && ((className != numberClass && className != stringClass && className != arrayClass) || isProperty.call(value, \"toJSON\"))) {\n              // Prototype <= 1.6.1 adds non-standard `toJSON` methods to the\n              // `Number`, `String`, `Date`, and `Array` prototypes. JSON 3\n              // ignores all `toJSON` methods on these objects unless they are\n              // defined directly on an instance.\n              value = value.toJSON(property);\n            }\n          }\n          if (callback) {\n            // If a replacement function was provided, call it to obtain the value\n            // for serialization.\n            value = callback.call(object, property, value);\n          }\n          if (value === null) {\n            return \"null\";\n          }\n          className = getClass.call(value);\n          if (className == booleanClass) {\n            // Booleans are represented literally.\n            return \"\" + value;\n          } else if (className == numberClass) {\n            // JSON numbers must be finite. `Infinity` and `NaN` are serialized as\n            // `\"null\"`.\n            return value > -1 / 0 && value < 1 / 0 ? \"\" + value : \"null\";\n          } else if (className == stringClass) {\n            // Strings are double-quoted and escaped.\n            return quote(\"\" + value);\n          }\n          // Recursively serialize objects and arrays.\n          if (typeof value == \"object\") {\n            // Check for cyclic structures. This is a linear search; performance\n            // is inversely proportional to the number of unique nested objects.\n            for (length = stack.length; length--;) {\n              if (stack[length] === value) {\n                // Cyclic structures cannot be serialized by `JSON.stringify`.\n                throw TypeError();\n              }\n            }\n            // Add the object to the stack of traversed objects.\n            stack.push(value);\n            results = [];\n            // Save the current indentation level and indent one additional level.\n            prefix = indentation;\n            indentation += whitespace;\n            if (className == arrayClass) {\n              // Recursively serialize array elements.\n              for (index = 0, length = value.length; index < length; index++) {\n                element = serialize(index, value, callback, properties, whitespace, indentation, stack);\n                results.push(element === undef ? \"null\" : element);\n              }\n              result = results.length ? (whitespace ? \"[\\n\" + indentation + results.join(\",\\n\" + indentation) + \"\\n\" + prefix + \"]\" : (\"[\" + results.join(\",\") + \"]\")) : \"[]\";\n            } else {\n              // Recursively serialize object members. Members are selected from\n              // either a user-specified list of property names, or the object\n              // itself.\n              forEach(properties || value, function (property) {\n                var element = serialize(property, value, callback, properties, whitespace, indentation, stack);\n                if (element !== undef) {\n                  // According to ES 5.1 section 15.12.3: \"If `gap` {whitespace}\n                  // is not the empty string, let `member` {quote(property) + \":\"}\n                  // be the concatenation of `member` and the `space` character.\"\n                  // The \"`space` character\" refers to the literal space\n                  // character, not the `space` {width} argument provided to\n                  // `JSON.stringify`.\n                  results.push(quote(property) + \":\" + (whitespace ? \" \" : \"\") + element);\n                }\n              });\n              result = results.length ? (whitespace ? \"{\\n\" + indentation + results.join(\",\\n\" + indentation) + \"\\n\" + prefix + \"}\" : (\"{\" + results.join(\",\") + \"}\")) : \"{}\";\n            }\n            // Remove the object from the traversed object stack.\n            stack.pop();\n            return result;\n          }\n        };\n\n        // Public: `JSON.stringify`. See ES 5.1 section 15.12.3.\n        exports.stringify = function (source, filter, width) {\n          var whitespace, callback, properties, className;\n          if (objectTypes[typeof filter] && filter) {\n            if ((className = getClass.call(filter)) == functionClass) {\n              callback = filter;\n            } else if (className == arrayClass) {\n              // Convert the property names array into a makeshift set.\n              properties = {};\n              for (var index = 0, length = filter.length, value; index < length; value = filter[index++], ((className = getClass.call(value)), className == stringClass || className == numberClass) && (properties[value] = 1));\n            }\n          }\n          if (width) {\n            if ((className = getClass.call(width)) == numberClass) {\n              // Convert the `width` to an integer and create a string containing\n              // `width` number of space characters.\n              if ((width -= width % 1) > 0) {\n                for (whitespace = \"\", width > 10 && (width = 10); whitespace.length < width; whitespace += \" \");\n              }\n            } else if (className == stringClass) {\n              whitespace = width.length <= 10 ? width : width.slice(0, 10);\n            }\n          }\n          // Opera <= 7.54u2 discards the values associated with empty string keys\n          // (`\"\"`) only if they are used directly within an object member list\n          // (e.g., `!(\"\" in { \"\": 1})`).\n          return serialize(\"\", (value = {}, value[\"\"] = source, value), callback, properties, whitespace, \"\", []);\n        };\n      }\n\n      // Public: Parses a JSON source string.\n      if (!has(\"json-parse\")) {\n        var fromCharCode = String.fromCharCode;\n\n        // Internal: A map of escaped control characters and their unescaped\n        // equivalents.\n        var Unescapes = {\n          92: \"\\\\\",\n          34: '\"',\n          47: \"/\",\n          98: \"\\b\",\n          116: \"\\t\",\n          110: \"\\n\",\n          102: \"\\f\",\n          114: \"\\r\"\n        };\n\n        // Internal: Stores the parser state.\n        var Index, Source;\n\n        // Internal: Resets the parser state and throws a `SyntaxError`.\n        var abort = function () {\n          Index = Source = null;\n          throw SyntaxError();\n        };\n\n        // Internal: Returns the next token, or `\"$\"` if the parser has reached\n        // the end of the source string. A token may be a string, number, `null`\n        // literal, or Boolean literal.\n        var lex = function () {\n          var source = Source, length = source.length, value, begin, position, isSigned, charCode;\n          while (Index < length) {\n            charCode = source.charCodeAt(Index);\n            switch (charCode) {\n              case 9: case 10: case 13: case 32:\n                // Skip whitespace tokens, including tabs, carriage returns, line\n                // feeds, and space characters.\n                Index++;\n                break;\n              case 123: case 125: case 91: case 93: case 58: case 44:\n                // Parse a punctuator token (`{`, `}`, `[`, `]`, `:`, or `,`) at\n                // the current position.\n                value = charIndexBuggy ? source.charAt(Index) : source[Index];\n                Index++;\n                return value;\n              case 34:\n                // `\"` delimits a JSON string; advance to the next character and\n                // begin parsing the string. String tokens are prefixed with the\n                // sentinel `@` character to distinguish them from punctuators and\n                // end-of-string tokens.\n                for (value = \"@\", Index++; Index < length;) {\n                  charCode = source.charCodeAt(Index);\n                  if (charCode < 32) {\n                    // Unescaped ASCII control characters (those with a code unit\n                    // less than the space character) are not permitted.\n                    abort();\n                  } else if (charCode == 92) {\n                    // A reverse solidus (`\\`) marks the beginning of an escaped\n                    // control character (including `\"`, `\\`, and `/`) or Unicode\n                    // escape sequence.\n                    charCode = source.charCodeAt(++Index);\n                    switch (charCode) {\n                      case 92: case 34: case 47: case 98: case 116: case 110: case 102: case 114:\n                        // Revive escaped control characters.\n                        value += Unescapes[charCode];\n                        Index++;\n                        break;\n                      case 117:\n                        // `\\u` marks the beginning of a Unicode escape sequence.\n                        // Advance to the first character and validate the\n                        // four-digit code point.\n                        begin = ++Index;\n                        for (position = Index + 4; Index < position; Index++) {\n                          charCode = source.charCodeAt(Index);\n                          // A valid sequence comprises four hexdigits (case-\n                          // insensitive) that form a single hexadecimal value.\n                          if (!(charCode >= 48 && charCode <= 57 || charCode >= 97 && charCode <= 102 || charCode >= 65 && charCode <= 70)) {\n                            // Invalid Unicode escape sequence.\n                            abort();\n                          }\n                        }\n                        // Revive the escaped character.\n                        value += fromCharCode(\"0x\" + source.slice(begin, Index));\n                        break;\n                      default:\n                        // Invalid escape sequence.\n                        abort();\n                    }\n                  } else {\n                    if (charCode == 34) {\n                      // An unescaped double-quote character marks the end of the\n                      // string.\n                      break;\n                    }\n                    charCode = source.charCodeAt(Index);\n                    begin = Index;\n                    // Optimize for the common case where a string is valid.\n                    while (charCode >= 32 && charCode != 92 && charCode != 34) {\n                      charCode = source.charCodeAt(++Index);\n                    }\n                    // Append the string as-is.\n                    value += source.slice(begin, Index);\n                  }\n                }\n                if (source.charCodeAt(Index) == 34) {\n                  // Advance to the next character and return the revived string.\n                  Index++;\n                  return value;\n                }\n                // Unterminated string.\n                abort();\n              default:\n                // Parse numbers and literals.\n                begin = Index;\n                // Advance past the negative sign, if one is specified.\n                if (charCode == 45) {\n                  isSigned = true;\n                  charCode = source.charCodeAt(++Index);\n                }\n                // Parse an integer or floating-point value.\n                if (charCode >= 48 && charCode <= 57) {\n                  // Leading zeroes are interpreted as octal literals.\n                  if (charCode == 48 && ((charCode = source.charCodeAt(Index + 1)), charCode >= 48 && charCode <= 57)) {\n                    // Illegal octal literal.\n                    abort();\n                  }\n                  isSigned = false;\n                  // Parse the integer component.\n                  for (; Index < length && ((charCode = source.charCodeAt(Index)), charCode >= 48 && charCode <= 57); Index++);\n                  // Floats cannot contain a leading decimal point; however, this\n                  // case is already accounted for by the parser.\n                  if (source.charCodeAt(Index) == 46) {\n                    position = ++Index;\n                    // Parse the decimal component.\n                    for (; position < length && ((charCode = source.charCodeAt(position)), charCode >= 48 && charCode <= 57); position++);\n                    if (position == Index) {\n                      // Illegal trailing decimal.\n                      abort();\n                    }\n                    Index = position;\n                  }\n                  // Parse exponents. The `e` denoting the exponent is\n                  // case-insensitive.\n                  charCode = source.charCodeAt(Index);\n                  if (charCode == 101 || charCode == 69) {\n                    charCode = source.charCodeAt(++Index);\n                    // Skip past the sign following the exponent, if one is\n                    // specified.\n                    if (charCode == 43 || charCode == 45) {\n                      Index++;\n                    }\n                    // Parse the exponential component.\n                    for (position = Index; position < length && ((charCode = source.charCodeAt(position)), charCode >= 48 && charCode <= 57); position++);\n                    if (position == Index) {\n                      // Illegal empty exponent.\n                      abort();\n                    }\n                    Index = position;\n                  }\n                  // Coerce the parsed value to a JavaScript number.\n                  return +source.slice(begin, Index);\n                }\n                // A negative sign may only precede numbers.\n                if (isSigned) {\n                  abort();\n                }\n                // `true`, `false`, and `null` literals.\n                if (source.slice(Index, Index + 4) == \"true\") {\n                  Index += 4;\n                  return true;\n                } else if (source.slice(Index, Index + 5) == \"false\") {\n                  Index += 5;\n                  return false;\n                } else if (source.slice(Index, Index + 4) == \"null\") {\n                  Index += 4;\n                  return null;\n                }\n                // Unrecognized token.\n                abort();\n            }\n          }\n          // Return the sentinel `$` character if the parser has reached the end\n          // of the source string.\n          return \"$\";\n        };\n\n        // Internal: Parses a JSON `value` token.\n        var get = function (value) {\n          var results, hasMembers;\n          if (value == \"$\") {\n            // Unexpected end of input.\n            abort();\n          }\n          if (typeof value == \"string\") {\n            if ((charIndexBuggy ? value.charAt(0) : value[0]) == \"@\") {\n              // Remove the sentinel `@` character.\n              return value.slice(1);\n            }\n            // Parse object and array literals.\n            if (value == \"[\") {\n              // Parses a JSON array, returning a new JavaScript array.\n              results = [];\n              for (;; hasMembers || (hasMembers = true)) {\n                value = lex();\n                // A closing square bracket marks the end of the array literal.\n                if (value == \"]\") {\n                  break;\n                }\n                // If the array literal contains elements, the current token\n                // should be a comma separating the previous element from the\n                // next.\n                if (hasMembers) {\n                  if (value == \",\") {\n                    value = lex();\n                    if (value == \"]\") {\n                      // Unexpected trailing `,` in array literal.\n                      abort();\n                    }\n                  } else {\n                    // A `,` must separate each array element.\n                    abort();\n                  }\n                }\n                // Elisions and leading commas are not permitted.\n                if (value == \",\") {\n                  abort();\n                }\n                results.push(get(value));\n              }\n              return results;\n            } else if (value == \"{\") {\n              // Parses a JSON object, returning a new JavaScript object.\n              results = {};\n              for (;; hasMembers || (hasMembers = true)) {\n                value = lex();\n                // A closing curly brace marks the end of the object literal.\n                if (value == \"}\") {\n                  break;\n                }\n                // If the object literal contains members, the current token\n                // should be a comma separator.\n                if (hasMembers) {\n                  if (value == \",\") {\n                    value = lex();\n                    if (value == \"}\") {\n                      // Unexpected trailing `,` in object literal.\n                      abort();\n                    }\n                  } else {\n                    // A `,` must separate each object member.\n                    abort();\n                  }\n                }\n                // Leading commas are not permitted, object property names must be\n                // double-quoted strings, and a `:` must separate each property\n                // name and value.\n                if (value == \",\" || typeof value != \"string\" || (charIndexBuggy ? value.charAt(0) : value[0]) != \"@\" || lex() != \":\") {\n                  abort();\n                }\n                results[value.slice(1)] = get(lex());\n              }\n              return results;\n            }\n            // Unexpected token encountered.\n            abort();\n          }\n          return value;\n        };\n\n        // Internal: Updates a traversed object member.\n        var update = function (source, property, callback) {\n          var element = walk(source, property, callback);\n          if (element === undef) {\n            delete source[property];\n          } else {\n            source[property] = element;\n          }\n        };\n\n        // Internal: Recursively traverses a parsed JSON object, invoking the\n        // `callback` function for each value. This is an implementation of the\n        // `Walk(holder, name)` operation defined in ES 5.1 section 15.12.2.\n        var walk = function (source, property, callback) {\n          var value = source[property], length;\n          if (typeof value == \"object\" && value) {\n            // `forEach` can't be used to traverse an array in Opera <= 8.54\n            // because its `Object#hasOwnProperty` implementation returns `false`\n            // for array indices (e.g., `![1, 2, 3].hasOwnProperty(\"0\")`).\n            if (getClass.call(value) == arrayClass) {\n              for (length = value.length; length--;) {\n                update(value, length, callback);\n              }\n            } else {\n              forEach(value, function (property) {\n                update(value, property, callback);\n              });\n            }\n          }\n          return callback.call(source, property, value);\n        };\n\n        // Public: `JSON.parse`. See ES 5.1 section 15.12.2.\n        exports.parse = function (source, callback) {\n          var result, value;\n          Index = 0;\n          Source = \"\" + source;\n          result = get(lex());\n          // If a JSON string contains multiple tokens, it is invalid.\n          if (lex() != \"$\") {\n            abort();\n          }\n          // Reset the parser state.\n          Index = Source = null;\n          return callback && getClass.call(callback) == functionClass ? walk((value = {}, value[\"\"] = result, value), \"\", callback) : result;\n        };\n      }\n    }\n\n    exports[\"runInContext\"] = runInContext;\n    return exports;\n  }\n\n  if (freeExports && !isLoader) {\n    // Export for CommonJS environments.\n    runInContext(root, freeExports);\n  } else {\n    // Export for web browsers and JavaScript engines.\n    var nativeJSON = root.JSON,\n        previousJSON = root[\"JSON3\"],\n        isRestored = false;\n\n    var JSON3 = runInContext(root, (root[\"JSON3\"] = {\n      // Public: Restores the original value of the global `JSON` object and\n      // returns a reference to the `JSON3` object.\n      \"noConflict\": function () {\n        if (!isRestored) {\n          isRestored = true;\n          root.JSON = nativeJSON;\n          root[\"JSON3\"] = previousJSON;\n          nativeJSON = previousJSON = null;\n        }\n        return JSON3;\n      }\n    }));\n\n    root.JSON = {\n      \"parse\": JSON3.parse,\n      \"stringify\": JSON3.stringify\n    };\n  }\n\n  // Export for asynchronous module loaders.\n  if (isLoader) {\n    define(function () {\n      return JSON3;\n    });\n  }\n}).call(this);\n\n//##############################################################################\n// DomUtils.js\n//##############################################################################\n\n(function () {\n\n\t/**\n\t * A few utilities for interacting with the dom.\n\t * @class DomUtils\n\t */\n\tvar s = {};\n\n\ts.appendToHead = function (el) {\n\t\ts.getHead().appendChild(el)\n\t}\n\n\ts.getHead = function () {\n\t\treturn document.head || document.getElementsByTagName(\"head\")[0];\n\t}\n\n\ts.getBody = function () {\n\t\treturn document.body || document.getElementsByTagName(\"body\")[0];\n\t}\n\n\tcreatejs.DomUtils = s;\n\n}());\n\n//##############################################################################\n// DataUtils.js\n//##############################################################################\n\n(function () {\n\n\t/**\n\t * A few data utilities for formatting different data types.\n\t * @class DataUtils\n\t */\n\tvar s = {};\n\n\t// static methods\n\t/**\n\t * Parse XML using the DOM. This is required when preloading XML or SVG.\n\t * @method parseXML\n\t * @param {String} text The raw text or XML that is loaded by XHR.\n\t * @param {String} type The mime type of the XML. Use \"text/xml\" for XML, and  \"image/svg+xml\" for SVG parsing.\n\t * @return {XML} An XML document\n\t * @static\n\t */\n\ts.parseXML = function (text, type) {\n\t\tvar xml = null;\n\t\t// CocoonJS does not support XML parsing with either method.\n\n\t\t// Most browsers will use DOMParser\n\t\t// IE fails on certain SVG files, so we have a fallback below.\n\t\ttry {\n\t\t\tif (window.DOMParser) {\n\t\t\t\tvar parser = new DOMParser();\n\t\t\t\txml = parser.parseFromString(text, type);\n\t\t\t}\n\t\t} catch (e) {\n\t\t}\n\n\t\t// Fallback for IE support.\n\t\tif (!xml) {\n\t\t\ttry {\n\t\t\t\txml = new ActiveXObject(\"Microsoft.XMLDOM\");\n\t\t\t\txml.async = false;\n\t\t\t\txml.loadXML(text);\n\t\t\t} catch (e) {\n\t\t\t\txml = null;\n\t\t\t}\n\t\t}\n\n\t\treturn xml;\n\t};\n\n\t/**\n\t * Parse a string into an Object.\n\t * @method parseJSON\n\t * @param {String} value The loaded JSON string\n\t * @returns {Object} A JavaScript object.\n\t */\n\ts.parseJSON = function (value) {\n\t\tif (value == null) {\n\t\t\treturn null;\n\t\t}\n\n\t\ttry {\n\t\t\treturn JSON.parse(value);\n\t\t} catch (e) {\n\t\t\t// TODO; Handle this with a custom error?\n\t\t\tthrow e;\n\t\t}\n\t};\n\n\tcreatejs.DataUtils = s;\n\n}());\n\n//##############################################################################\n// LoadItem.js\n//##############################################################################\n\n(function () {\n\t\"use strict\";\n\n\t/**\n\t * All loaders accept an item containing the properties defined in this class. If a raw object is passed instead,\n\t * it will not be affected, but it must contain at least a {{#crossLink \"src:property\"}}{{/crossLink}} property. A\n\t * string path or HTML tag is also acceptable, but it will be automatically converted to a LoadItem using the\n\t * {{#crossLink \"create\"}}{{/crossLink}} method by {{#crossLink \"AbstractLoader\"}}{{/crossLink}}\n\t * @class LoadItem\n\t * @constructor\n\t * @since 0.6.0\n\t */\n\tfunction LoadItem() {\n\t\t/**\n\t\t * The source of the file that is being loaded. This property is <b>required</b>. The source can either be a\n\t\t * string (recommended), or an HTML tag.\n\t\t * This can also be an object, but in that case it has to include a type and be handled by a plugin.\n\t\t * @property src\n\t\t * @type {String}\n\t\t * @default null\n\t\t */\n\t\tthis.src = null;\n\n\t\t/**\n\t\t * The type file that is being loaded. The type of the file is usually inferred by the extension, but can also\n\t\t * be set manually. This is helpful in cases where a file does not have an extension.\n\t\t * @property type\n\t\t * @type {String}\n\t\t * @default null\n\t\t */\n\t\tthis.type = null;\n\n\t\t/**\n\t\t * A string identifier which can be used to reference the loaded object. If none is provided, this will be\n\t\t * automatically set to the {{#crossLink \"src:property\"}}{{/crossLink}}.\n\t\t * @property id\n\t\t * @type {String}\n\t\t * @default null\n\t\t */\n\t\tthis.id = null;\n\n\t\t/**\n\t\t * Determines if a manifest will maintain the order of this item, in relation to other items in the manifest\n\t\t * that have also set the `maintainOrder` property to `true`. This only applies when the max connections has\n\t\t * been set above 1 (using {{#crossLink \"LoadQueue/setMaxConnections\"}}{{/crossLink}}). Everything with this\n\t\t * property set to `false` will finish as it is loaded. Ordered items are combined with script tags loading in\n\t\t * order when {{#crossLink \"LoadQueue/maintainScriptOrder:property\"}}{{/crossLink}} is set to `true`.\n\t\t * @property maintainOrder\n\t\t * @type {Boolean}\n\t\t * @default false\n\t\t */\n\t\tthis.maintainOrder = false;\n\n\t\t/**\n\t\t * A callback used by JSONP requests that defines what global method to call when the JSONP content is loaded.\n\t\t * @property callback\n\t\t * @type {String}\n\t\t * @default null\n\t\t */\n\t\tthis.callback = null;\n\n\t\t/**\n\t\t * An arbitrary data object, which is included with the loaded object.\n\t\t * @property data\n\t\t * @type {Object}\n\t\t * @default null\n\t\t */\n\t\tthis.data = null;\n\n\t\t/**\n\t\t * The request method used for HTTP calls. Both {{#crossLink \"AbstractLoader/GET:property\"}}{{/crossLink}} or\n\t\t * {{#crossLink \"AbstractLoader/POST:property\"}}{{/crossLink}} request types are supported, and are defined as\n\t\t * constants on {{#crossLink \"AbstractLoader\"}}{{/crossLink}}.\n\t\t * @property method\n\t\t * @type {String}\n\t\t * @default get\n\t\t */\n\t\tthis.method = createjs.LoadItem.GET;\n\n\t\t/**\n\t\t * An object hash of name/value pairs to send to the server.\n\t\t * @property values\n\t\t * @type {Object}\n\t\t * @default null\n\t\t */\n\t\tthis.values = null;\n\n\t\t/**\n\t\t * An object hash of headers to attach to an XHR request. PreloadJS will automatically attach some default\n\t\t * headers when required, including \"Origin\", \"Content-Type\", and \"X-Requested-With\". You may override the\n\t\t * default headers by including them in your headers object.\n\t\t * @property headers\n\t\t * @type {Object}\n\t\t * @default null\n\t\t */\n\t\tthis.headers = null;\n\n\t\t/**\n\t\t * Enable credentials for XHR requests.\n\t\t * @property withCredentials\n\t\t * @type {Boolean}\n\t\t * @default false\n\t\t */\n\t\tthis.withCredentials = false;\n\n\t\t/**\n\t\t * Set the mime type of XHR-based requests. This is automatically set to \"text/plain; charset=utf-8\" for text\n\t\t * based files (json, xml, text, css, js).\n\t\t * @property mimeType\n\t\t * @type {String}\n\t\t * @default null\n\t\t */\n\t\tthis.mimeType = null;\n\n\t\t/**\n\t\t * Sets the crossOrigin attribute for CORS-enabled images loading cross-domain.\n\t\t * @property crossOrigin\n\t\t * @type {boolean}\n\t\t * @default Anonymous\n\t\t */\n\t\tthis.crossOrigin = null;\n\n\t\t/**\n\t\t * The duration in milliseconds to wait before a request times out. This only applies to tag-based and and XHR\n\t\t * (level one) loading, as XHR (level 2) provides its own timeout event.\n\t\t * @property loadTimeout\n\t\t * @type {Number}\n\t\t * @default 8000 (8 seconds)\n\t\t */\n\t\tthis.loadTimeout = s.LOAD_TIMEOUT_DEFAULT;\n\t};\n\n\tvar p = LoadItem.prototype = {};\n\tvar s = LoadItem;\n\n\t/**\n\t * Default duration in milliseconds to wait before a request times out. This only applies to tag-based and and XHR\n\t * (level one) loading, as XHR (level 2) provides its own timeout event.\n\t * @property LOAD_TIMEOUT_DEFAULT\n\t * @type {number}\n\t * @static\n\t */\n\ts.LOAD_TIMEOUT_DEFAULT = 8000;\n\n\t/**\n\t * Create a LoadItem.\n\t * <ul>\n\t *     <li>String-based items are converted to a LoadItem with a populated {{#crossLink \"src:property\"}}{{/crossLink}}.</li>\n\t *     <li>LoadItem instances are returned as-is</li>\n\t *     <li>Objects are returned with any needed properties added</li>\n\t * </ul>\n\t * @method create\n\t * @param {LoadItem|String|Object} value The load item value\n\t * @returns {LoadItem|Object}\n\t * @static\n\t */\n\ts.create = function (value) {\n\t\tif (typeof value == \"string\") {\n\t\t\tvar item = new LoadItem();\n\t\t\titem.src = value;\n\t\t\treturn item;\n\t\t} else if (value instanceof s) {\n\t\t\treturn value;\n\t\t} else if (value instanceof Object && value.src) {\n\t\t\tif (value.loadTimeout == null) {\n\t\t\t\tvalue.loadTimeout = s.LOAD_TIMEOUT_DEFAULT;\n\t\t\t}\n\t\t\treturn value;\n\t\t} else {\n\t\t\tthrow new Error(\"Type not recognized.\");\n\t\t}\n\t};\n\n\t/**\n\t * Provides a chainable shortcut method for setting a number of properties on the instance.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      var loadItem = new createjs.LoadItem().set({src:\"image.png\", maintainOrder:true});\n\t *\n\t * @method set\n\t * @param {Object} props A generic object containing properties to copy to the LoadItem instance.\n\t * @return {LoadItem} Returns the instance the method is called on (useful for chaining calls.)\n\t*/\n\tp.set = function(props) {\n\t\tfor (var n in props) { this[n] = props[n]; }\n\t\treturn this;\n\t};\n\n\tcreatejs.LoadItem = s;\n\n}());\n\n//##############################################################################\n// RequestUtils.js\n//##############################################################################\n\n(function () {\n\n\t/**\n\t * Utilities that assist with parsing load items, and determining file types, etc.\n\t * @class RequestUtils\n\t */\n\tvar s = {};\n\n\t/**\n\t * The Regular Expression used to test file URLS for an absolute path.\n\t * @property ABSOLUTE_PATH\n\t * @type {RegExp}\n\t * @static\n\t */\n\ts.ABSOLUTE_PATT = /^(?:\\w+:)?\\/{2}/i;\n\n\t/**\n\t * The Regular Expression used to test file URLS for a relative path.\n\t * @property RELATIVE_PATH\n\t * @type {RegExp}\n\t * @static\n\t */\n\ts.RELATIVE_PATT = (/^[./]*?\\//i);\n\n\t/**\n\t * The Regular Expression used to test file URLS for an extension. Note that URIs must already have the query string\n\t * removed.\n\t * @property EXTENSION_PATT\n\t * @type {RegExp}\n\t * @static\n\t */\n\ts.EXTENSION_PATT = /\\/?[^/]+\\.(\\w{1,5})$/i;\n\n\t/**\n\t * Parse a file path to determine the information we need to work with it. Currently, PreloadJS needs to know:\n\t * <ul>\n\t *     <li>If the path is absolute. Absolute paths start with a protocol (such as `http://`, `file://`, or\n\t *     `//networkPath`)</li>\n\t *     <li>If the path is relative. Relative paths start with `../` or `/path` (or similar)</li>\n\t *     <li>The file extension. This is determined by the filename with an extension. Query strings are dropped, and\n\t *     the file path is expected to follow the format `name.ext`.</li>\n\t * </ul>\n\t * @method parseURI\n\t * @param {String} path\n\t * @returns {Object} An Object with an `absolute` and `relative` Boolean values, as well as an optional 'extension`\n\t * property, which is the lowercase extension.\n\t * @static\n\t */\n\ts.parseURI = function (path) {\n\t\tvar info = {absolute: false, relative: false};\n\t\tif (path == null) { return info; }\n\n\t\t// Drop the query string\n\t\tvar queryIndex = path.indexOf(\"?\");\n\t\tif (queryIndex > -1) {\n\t\t\tpath = path.substr(0, queryIndex);\n\t\t}\n\n\t\t// Absolute\n\t\tvar match;\n\t\tif (s.ABSOLUTE_PATT.test(path)) {\n\t\t\tinfo.absolute = true;\n\n\t\t\t// Relative\n\t\t} else if (s.RELATIVE_PATT.test(path)) {\n\t\t\tinfo.relative = true;\n\t\t}\n\n\t\t// Extension\n\t\tif (match = path.match(s.EXTENSION_PATT)) {\n\t\t\tinfo.extension = match[1].toLowerCase();\n\t\t}\n\t\treturn info;\n\t};\n\n\t/**\n\t * Formats an object into a query string for either a POST or GET request.\n\t * @method formatQueryString\n\t * @param {Object} data The data to convert to a query string.\n\t * @param {Array} [query] Existing name/value pairs to append on to this query.\n\t * @static\n\t */\n\ts.formatQueryString = function (data, query) {\n\t\tif (data == null) {\n\t\t\tthrow new Error('You must specify data.');\n\t\t}\n\t\tvar params = [];\n\t\tfor (var n in data) {\n\t\t\tparams.push(n + '=' + escape(data[n]));\n\t\t}\n\t\tif (query) {\n\t\t\tparams = params.concat(query);\n\t\t}\n\t\treturn params.join('&');\n\t};\n\n\t/**\n\t * A utility method that builds a file path using a source and a data object, and formats it into a new path.\n\t * @method buildPath\n\t * @param {String} src The source path to add values to.\n\t * @param {Object} [data] Object used to append values to this request as a query string. Existing parameters on the\n\t * path will be preserved.\n\t * @returns {string} A formatted string that contains the path and the supplied parameters.\n\t * @static\n\t */\n\ts.buildPath = function (src, data) {\n\t\tif (data == null) {\n\t\t\treturn src;\n\t\t}\n\n\t\tvar query = [];\n\t\tvar idx = src.indexOf('?');\n\n\t\tif (idx != -1) {\n\t\t\tvar q = src.slice(idx + 1);\n\t\t\tquery = query.concat(q.split('&'));\n\t\t}\n\n\t\tif (idx != -1) {\n\t\t\treturn src.slice(0, idx) + '?' + this.formatQueryString(data, query);\n\t\t} else {\n\t\t\treturn src + '?' + this.formatQueryString(data, query);\n\t\t}\n\t};\n\n\t/**\n\t * @method isCrossDomain\n\t * @param {LoadItem|Object} item A load item with a `src` property.\n\t * @return {Boolean} If the load item is loading from a different domain than the current location.\n\t * @static\n\t */\n\ts.isCrossDomain = function (item) {\n\t\tvar target = document.createElement(\"a\");\n\t\ttarget.href = item.src;\n\n\t\tvar host = document.createElement(\"a\");\n\t\thost.href = location.href;\n\n\t\tvar crossdomain = (target.hostname != \"\") &&\n\t\t\t\t\t\t  (target.port != host.port ||\n\t\t\t\t\t\t   target.protocol != host.protocol ||\n\t\t\t\t\t\t   target.hostname != host.hostname);\n\t\treturn crossdomain;\n\t};\n\n\t/**\n\t * @method isLocal\n\t * @param {LoadItem|Object} item A load item with a `src` property\n\t * @return {Boolean} If the load item is loading from the \"file:\" protocol. Assume that the host must be local as\n\t * well.\n\t * @static\n\t */\n\ts.isLocal = function (item) {\n\t\tvar target = document.createElement(\"a\");\n\t\ttarget.href = item.src;\n\t\treturn target.hostname == \"\" && target.protocol == \"file:\";\n\t};\n\n\t/**\n\t * Determine if a specific type should be loaded as a binary file. Currently, only images and items marked\n\t * specifically as \"binary\" are loaded as binary. Note that audio is <b>not</b> a binary type, as we can not play\n\t * back using an audio tag if it is loaded as binary. Plugins can change the item type to binary to ensure they get\n\t * a binary result to work with. Binary files are loaded using XHR2. Types are defined as static constants on\n\t * {{#crossLink \"AbstractLoader\"}}{{/crossLink}}.\n\t * @method isBinary\n\t * @param {String} type The item type.\n\t * @return {Boolean} If the specified type is binary.\n\t * @static\n\t */\n\ts.isBinary = function (type) {\n\t\tswitch (type) {\n\t\t\tcase createjs.AbstractLoader.IMAGE:\n\t\t\tcase createjs.AbstractLoader.BINARY:\n\t\t\t\treturn true;\n\t\t\tdefault:\n\t\t\t\treturn false;\n\t\t}\n\t};\n\n\t/**\n\t * Check if item is a valid HTMLImageElement\n\t * @method isImageTag\n\t * @param {Object} item\n\t * @returns {Boolean}\n\t * @static\n\t */\n\ts.isImageTag = function(item) {\n\t\treturn item instanceof HTMLImageElement;\n\t};\n\n\t/**\n\t * Check if item is a valid HTMLAudioElement\n\t * @method isAudioTag\n\t * @param {Object} item\n\t * @returns {Boolean}\n\t * @static\n\t */\n\ts.isAudioTag = function(item) {\n\t\tif (window.HTMLAudioElement) {\n\t\t\treturn item instanceof HTMLAudioElement;\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t};\n\n\t/**\n\t * Check if item is a valid HTMLVideoElement\n\t * @method isVideoTag\n\t * @param {Object} item\n\t * @returns {Boolean}\n\t * @static\n\t */\n\ts.isVideoTag = function(item) {\n\t\tif (window.HTMLVideoElement) {\n\t\t\treturn item instanceof HTMLVideoElement;\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t};\n\n\t/**\n\t * Determine if a specific type is a text-based asset, and should be loaded as UTF-8.\n\t * @method isText\n\t * @param {String} type The item type.\n\t * @return {Boolean} If the specified type is text.\n\t * @static\n\t */\n\ts.isText = function (type) {\n\t\tswitch (type) {\n\t\t\tcase createjs.AbstractLoader.TEXT:\n\t\t\tcase createjs.AbstractLoader.JSON:\n\t\t\tcase createjs.AbstractLoader.MANIFEST:\n\t\t\tcase createjs.AbstractLoader.XML:\n\t\t\tcase createjs.AbstractLoader.CSS:\n\t\t\tcase createjs.AbstractLoader.SVG:\n\t\t\tcase createjs.AbstractLoader.JAVASCRIPT:\n\t\t\tcase createjs.AbstractLoader.SPRITESHEET:\n\t\t\t\treturn true;\n\t\t\tdefault:\n\t\t\t\treturn false;\n\t\t}\n\t};\n\n\t/**\n\t * Determine the type of the object using common extensions. Note that the type can be passed in with the load item\n\t * if it is an unusual extension.\n\t * @method getTypeByExtension\n\t * @param {String} extension The file extension to use to determine the load type.\n\t * @return {String} The determined load type (for example, <code>AbstractLoader.IMAGE</code>). Will return `null` if\n\t * the type can not be determined by the extension.\n\t * @static\n\t */\n\ts.getTypeByExtension = function (extension) {\n\t\tif (extension == null) {\n\t\t\treturn createjs.AbstractLoader.TEXT;\n\t\t}\n\n\t\tswitch (extension.toLowerCase()) {\n\t\t\tcase \"jpeg\":\n\t\t\tcase \"jpg\":\n\t\t\tcase \"gif\":\n\t\t\tcase \"png\":\n\t\t\tcase \"webp\":\n\t\t\tcase \"bmp\":\n\t\t\t\treturn createjs.AbstractLoader.IMAGE;\n\t\t\tcase \"ogg\":\n\t\t\tcase \"mp3\":\n\t\t\tcase \"webm\":\n\t\t\t\treturn createjs.AbstractLoader.SOUND;\n\t\t\tcase \"mp4\":\n\t\t\tcase \"webm\":\n\t\t\tcase \"ts\":\n\t\t\t\treturn createjs.AbstractLoader.VIDEO;\n\t\t\tcase \"json\":\n\t\t\t\treturn createjs.AbstractLoader.JSON;\n\t\t\tcase \"xml\":\n\t\t\t\treturn createjs.AbstractLoader.XML;\n\t\t\tcase \"css\":\n\t\t\t\treturn createjs.AbstractLoader.CSS;\n\t\t\tcase \"js\":\n\t\t\t\treturn createjs.AbstractLoader.JAVASCRIPT;\n\t\t\tcase 'svg':\n\t\t\t\treturn createjs.AbstractLoader.SVG;\n\t\t\tdefault:\n\t\t\t\treturn createjs.AbstractLoader.TEXT;\n\t\t}\n\t};\n\n\tcreatejs.RequestUtils = s;\n\n}());\n\n//##############################################################################\n// AbstractLoader.js\n//##############################################################################\n\n(function () {\n\t\"use strict\";\n\n// constructor\n\t/**\n\t * The base loader, which defines all the generic methods, properties, and events. All loaders extend this class,\n\t * including the {{#crossLink \"LoadQueue\"}}{{/crossLink}}.\n\t * @class AbstractLoader\n\t * @param {LoadItem|object|string} loadItem The item to be loaded.\n\t * @param {Boolean} [preferXHR] Determines if the LoadItem should <em>try</em> and load using XHR, or take a\n\t * tag-based approach, which can be better in cross-domain situations. Not all loaders can load using one or the\n\t * other, so this is a suggested directive.\n\t * @param {String} [type] The type of loader. Loader types are defined as constants on the AbstractLoader class,\n\t * such as {{#crossLink \"IMAGE:property\"}}{{/crossLink}}, {{#crossLink \"CSS:property\"}}{{/crossLink}}, etc.\n\t * @extends EventDispatcher\n\t */\n\tfunction AbstractLoader(loadItem, preferXHR, type) {\n\t\tthis.EventDispatcher_constructor();\n\n\t\t// public properties\n\t\t/**\n\t\t * If the loader has completed loading. This provides a quick check, but also ensures that the different approaches\n\t\t * used for loading do not pile up resulting in more than one `complete` {{#crossLink \"Event\"}}{{/crossLink}}.\n\t\t * @property loaded\n\t\t * @type {Boolean}\n\t\t * @default false\n\t\t */\n\t\tthis.loaded = false;\n\n\t\t/**\n\t\t * Determine if the loader was canceled. Canceled loads will not fire complete events. Note that this property\n\t\t * is readonly, so {{#crossLink \"LoadQueue\"}}{{/crossLink}} queues should be closed using {{#crossLink \"LoadQueue/close\"}}{{/crossLink}}\n\t\t * instead.\n\t\t * @property canceled\n\t\t * @type {Boolean}\n\t\t * @default false\n\t\t * @readonly\n\t\t */\n\t\tthis.canceled = false;\n\n\t\t/**\n\t\t * The current load progress (percentage) for this item. This will be a number between 0 and 1.\n\t\t *\n\t\t * <h4>Example</h4>\n\t\t *\n\t\t *     var queue = new createjs.LoadQueue();\n\t\t *     queue.loadFile(\"largeImage.png\");\n\t\t *     queue.on(\"progress\", function() {\n\t\t *         console.log(\"Progress:\", queue.progress, event.progress);\n\t\t *     });\n\t\t *\n\t\t * @property progress\n\t\t * @type {Number}\n\t\t * @default 0\n\t\t */\n\t\tthis.progress = 0;\n\n\t\t/**\n\t\t * The type of item this loader will load. See {{#crossLink \"AbstractLoader\"}}{{/crossLink}} for a full list of\n\t\t * supported types.\n\t\t * @property type\n\t\t * @type {String}\n\t\t */\n\t\tthis.type = type;\n\n\t\t/**\n\t\t * A formatter function that converts the loaded raw result into the final result. For example, the JSONLoader\n\t\t * converts a string of text into a JavaScript object. Not all loaders have a resultFormatter, and this property\n\t\t * can be overridden to provide custom formatting.\n\t\t *\n\t\t * Optionally, a resultFormatter can return a callback function in cases where the formatting needs to be\n\t\t * asynchronous, such as creating a new image. The callback function is passed 2 parameters, which are callbacks\n\t\t * to handle success and error conditions in the resultFormatter. Note that the resultFormatter method is\n\t\t * called in the current scope, as well as the success and error callbacks.\n\t\t *\n\t\t * <h4>Example asynchronous resultFormatter</h4>\n\t\t *\n\t\t * \tfunction _formatResult(loader) {\n\t\t * \t\treturn function(success, error) {\n\t\t * \t\t\tif (errorCondition) { error(errorDetailEvent); }\n\t\t * \t\t\tsuccess(result);\n\t\t * \t\t}\n\t\t * \t}\n\t\t * @property resultFormatter\n\t\t * @type {Function}\n\t\t * @default null\n\t\t */\n\t\tthis.resultFormatter = null;\n\n\t\t// protected properties\n\t\t/**\n\t\t * The {{#crossLink \"LoadItem\"}}{{/crossLink}} this loader represents. Note that this is null in a {{#crossLink \"LoadQueue\"}}{{/crossLink}},\n\t\t * but will be available on loaders such as {{#crossLink \"XMLLoader\"}}{{/crossLink}} and {{#crossLink \"ImageLoader\"}}{{/crossLink}}.\n\t\t * @property _item\n\t\t * @type {LoadItem|Object}\n\t\t * @private\n\t\t */\n\t\tif (loadItem) {\n\t\t\tthis._item = createjs.LoadItem.create(loadItem);\n\t\t} else {\n\t\t\tthis._item = null;\n\t\t}\n\n\t\t/**\n\t\t * Whether the loader will try and load content using XHR (true) or HTML tags (false).\n\t\t * @property _preferXHR\n\t\t * @type {Boolean}\n\t\t * @private\n\t\t */\n\t\tthis._preferXHR = preferXHR;\n\n\t\t/**\n\t\t * The loaded result after it is formatted by an optional {{#crossLink \"resultFormatter\"}}{{/crossLink}}. For\n\t\t * items that are not formatted, this will be the same as the {{#crossLink \"_rawResult:property\"}}{{/crossLink}}.\n\t\t * The result is accessed using the {{#crossLink \"getResult\"}}{{/crossLink}} method.\n\t\t * @property _result\n\t\t * @type {Object|String}\n\t\t * @private\n\t\t */\n\t\tthis._result = null;\n\n\t\t/**\n\t\t * The loaded result before it is formatted. The rawResult is accessed using the {{#crossLink \"getResult\"}}{{/crossLink}}\n\t\t * method, and passing `true`.\n\t\t * @property _rawResult\n\t\t * @type {Object|String}\n\t\t * @private\n\t\t */\n\t\tthis._rawResult = null;\n\n\t\t/**\n\t\t * A list of items that loaders load behind the scenes. This does not include the main item the loader is\n\t\t * responsible for loading. Examples of loaders that have sub-items include the {{#crossLink \"SpriteSheetLoader\"}}{{/crossLink}} and\n\t\t * {{#crossLink \"ManifestLoader\"}}{{/crossLink}}.\n\t\t * @property _loadItems\n\t\t * @type {null}\n\t\t * @protected\n\t\t */\n\t\tthis._loadedItems = null;\n\n\t\t/**\n\t\t * The attribute the items loaded using tags use for the source.\n\t\t * @type {string}\n\t\t * @default null\n\t\t * @private\n\t\t */\n\t\tthis._tagSrcAttribute = null;\n\n\t\t/**\n\t\t * An HTML tag (or similar) that a loader may use to load HTML content, such as images, scripts, etc.\n\t\t * @property _tag\n\t\t * @type {Object}\n\t\t * @private\n\t\t */\n\t\tthis._tag = null;\n\t};\n\n\tvar p = createjs.extend(AbstractLoader, createjs.EventDispatcher);\n\tvar s = AbstractLoader;\n\n\t// TODO: deprecated\n\t// p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\n\n\n\t/**\n\t * Defines a POST request, use for a method value when loading data.\n\t * @property POST\n\t * @type {string}\n\t * @default post\n\t * @static\n\t */\n\ts.POST = \"POST\";\n\n\t/**\n\t * Defines a GET request, use for a method value when loading data.\n\t * @property GET\n\t * @type {string}\n\t * @default get\n\t * @static\n\t */\n\ts.GET = \"GET\";\n\n\t/**\n\t * The preload type for generic binary types. Note that images are loaded as binary files when using XHR.\n\t * @property BINARY\n\t * @type {String}\n\t * @default binary\n\t * @static\n\t * @since 0.6.0\n\t */\n\ts.BINARY = \"binary\";\n\n\t/**\n\t * The preload type for css files. CSS files are loaded using a &lt;link&gt; when loaded with XHR, or a\n\t * &lt;style&gt; tag when loaded with tags.\n\t * @property CSS\n\t * @type {String}\n\t * @default css\n\t * @static\n\t * @since 0.6.0\n\t */\n\ts.CSS = \"css\";\n\n\t/**\n\t * The preload type for image files, usually png, gif, or jpg/jpeg. Images are loaded into an &lt;image&gt; tag.\n\t * @property IMAGE\n\t * @type {String}\n\t * @default image\n\t * @static\n\t * @since 0.6.0\n\t */\n\ts.IMAGE = \"image\";\n\n\t/**\n\t * The preload type for javascript files, usually with the \"js\" file extension. JavaScript files are loaded into a\n\t * &lt;script&gt; tag.\n\t *\n\t * Since version 0.4.1+, due to how tag-loaded scripts work, all JavaScript files are automatically injected into\n\t * the body of the document to maintain parity between XHR and tag-loaded scripts. In version 0.4.0 and earlier,\n\t * only tag-loaded scripts are injected.\n\t * @property JAVASCRIPT\n\t * @type {String}\n\t * @default javascript\n\t * @static\n\t * @since 0.6.0\n\t */\n\ts.JAVASCRIPT = \"javascript\";\n\n\t/**\n\t * The preload type for json files, usually with the \"json\" file extension. JSON data is loaded and parsed into a\n\t * JavaScript object. Note that if a `callback` is present on the load item, the file will be loaded with JSONP,\n\t * no matter what the {{#crossLink \"LoadQueue/preferXHR:property\"}}{{/crossLink}} property is set to, and the JSON\n\t * must contain a matching wrapper function.\n\t * @property JSON\n\t * @type {String}\n\t * @default json\n\t * @static\n\t * @since 0.6.0\n\t */\n\ts.JSON = \"json\";\n\n\t/**\n\t * The preload type for jsonp files, usually with the \"json\" file extension. JSON data is loaded and parsed into a\n\t * JavaScript object. You are required to pass a callback parameter that matches the function wrapper in the JSON.\n\t * Note that JSONP will always be used if there is a callback present, no matter what the {{#crossLink \"LoadQueue/preferXHR:property\"}}{{/crossLink}}\n\t * property is set to.\n\t * @property JSONP\n\t * @type {String}\n\t * @default jsonp\n\t * @static\n\t * @since 0.6.0\n\t */\n\ts.JSONP = \"jsonp\";\n\n\t/**\n\t * The preload type for json-based manifest files, usually with the \"json\" file extension. The JSON data is loaded\n\t * and parsed into a JavaScript object. PreloadJS will then look for a \"manifest\" property in the JSON, which is an\n\t * Array of files to load, following the same format as the {{#crossLink \"LoadQueue/loadManifest\"}}{{/crossLink}}\n\t * method. If a \"callback\" is specified on the manifest object, then it will be loaded using JSONP instead,\n\t * regardless of what the {{#crossLink \"LoadQueue/preferXHR:property\"}}{{/crossLink}} property is set to.\n\t * @property MANIFEST\n\t * @type {String}\n\t * @default manifest\n\t * @static\n\t * @since 0.6.0\n\t */\n\ts.MANIFEST = \"manifest\";\n\n\t/**\n\t * The preload type for sound files, usually mp3, ogg, or wav. When loading via tags, audio is loaded into an\n\t * &lt;audio&gt; tag.\n\t * @property SOUND\n\t * @type {String}\n\t * @default sound\n\t * @static\n\t * @since 0.6.0\n\t */\n\ts.SOUND = \"sound\";\n\n\t/**\n\t * The preload type for video files, usually mp4, ts, or ogg. When loading via tags, video is loaded into an\n\t * &lt;video&gt; tag.\n\t * @property VIDEO\n\t * @type {String}\n\t * @default video\n\t * @static\n\t * @since 0.6.0\n\t */\n\ts.VIDEO = \"video\";\n\n\t/**\n\t * The preload type for SpriteSheet files. SpriteSheet files are JSON files that contain string image paths.\n\t * @property SPRITESHEET\n\t * @type {String}\n\t * @default spritesheet\n\t * @static\n\t * @since 0.6.0\n\t */\n\ts.SPRITESHEET = \"spritesheet\";\n\n\t/**\n\t * The preload type for SVG files.\n\t * @property SVG\n\t * @type {String}\n\t * @default svg\n\t * @static\n\t * @since 0.6.0\n\t */\n\ts.SVG = \"svg\";\n\n\t/**\n\t * The preload type for text files, which is also the default file type if the type can not be determined. Text is\n\t * loaded as raw text.\n\t * @property TEXT\n\t * @type {String}\n\t * @default text\n\t * @static\n\t * @since 0.6.0\n\t */\n\ts.TEXT = \"text\";\n\n\t/**\n\t * The preload type for xml files. XML is loaded into an XML document.\n\t * @property XML\n\t * @type {String}\n\t * @default xml\n\t * @static\n\t * @since 0.6.0\n\t */\n\ts.XML = \"xml\";\n\n// Events\n\t/**\n\t * The {{#crossLink \"ProgressEvent\"}}{{/crossLink}} that is fired when the overall progress changes. Prior to\n\t * version 0.6.0, this was just a regular {{#crossLink \"Event\"}}{{/crossLink}}.\n\t * @event progress\n\t * @since 0.3.0\n\t */\n\n\t/**\n\t * The {{#crossLink \"Event\"}}{{/crossLink}} that is fired when a load starts.\n\t * @event loadstart\n\t * @param {Object} target The object that dispatched the event.\n\t * @param {String} type The event type.\n\t * @since 0.3.1\n\t */\n\n\t/**\n\t * The {{#crossLink \"Event\"}}{{/crossLink}} that is fired when the entire queue has been loaded.\n\t * @event complete\n\t * @param {Object} target The object that dispatched the event.\n\t * @param {String} type The event type.\n\t * @since 0.3.0\n\t */\n\n\t/**\n\t * The {{#crossLink \"ErrorEvent\"}}{{/crossLink}} that is fired when the loader encounters an error. If the error was\n\t * encountered by a file, the event will contain the item that caused the error. Prior to version 0.6.0, this was\n\t * just a regular {{#crossLink \"Event\"}}{{/crossLink}}.\n\t * @event error\n\t * @since 0.3.0\n\t */\n\n\t/**\n\t * The {{#crossLink \"Event\"}}{{/crossLink}} that is fired when the loader encounters an internal file load error.\n\t * This enables loaders to maintain internal queues, and surface file load errors.\n\t * @event fileerror\n\t * @param {Object} target The object that dispatched the event.\n\t * @param {String} type The even type (\"fileerror\")\n\t * @param {LoadItem|object} The item that encountered the error\n\t * @since 0.6.0\n\t */\n\n\t/**\n\t * The {{#crossLink \"Event\"}}{{/crossLink}} that is fired when a loader internally loads a file. This enables\n\t * loaders such as {{#crossLink \"ManifestLoader\"}}{{/crossLink}} to maintain internal {{#crossLink \"LoadQueue\"}}{{/crossLink}}s\n\t * and notify when they have loaded a file. The {{#crossLink \"LoadQueue\"}}{{/crossLink}} class dispatches a\n\t * slightly different {{#crossLink \"LoadQueue/fileload:event\"}}{{/crossLink}} event.\n\t * @event fileload\n\t * @param {Object} target The object that dispatched the event.\n\t * @param {String} type The event type (\"fileload\")\n\t * @param {Object} item The file item which was specified in the {{#crossLink \"LoadQueue/loadFile\"}}{{/crossLink}}\n\t * or {{#crossLink \"LoadQueue/loadManifest\"}}{{/crossLink}} call. If only a string path or tag was specified, the\n\t * object will contain that value as a `src` property.\n\t * @param {Object} result The HTML tag or parsed result of the loaded item.\n\t * @param {Object} rawResult The unprocessed result, usually the raw text or binary data before it is converted\n\t * to a usable object.\n\t * @since 0.6.0\n\t */\n\n\t/**\n\t * The {{#crossLink \"Event\"}}{{/crossLink}} that is fired after the internal request is created, but before a load.\n\t * This allows updates to the loader for specific loading needs, such as binary or XHR image loading.\n\t * @event initialize\n\t * @param {Object} target The object that dispatched the event.\n\t * @param {String} type The event type (\"initialize\")\n\t * @param {AbstractLoader} loader The loader that has been initialized.\n\t */\n\n\n\t/**\n\t * Get a reference to the manifest item that is loaded by this loader. In some cases this will be the value that was\n\t * passed into {{#crossLink \"LoadQueue\"}}{{/crossLink}} using {{#crossLink \"LoadQueue/loadFile\"}}{{/crossLink}} or\n\t * {{#crossLink \"LoadQueue/loadManifest\"}}{{/crossLink}}. However if only a String path was passed in, then it will\n\t * be a {{#crossLink \"LoadItem\"}}{{/crossLink}}.\n\t * @method getItem\n\t * @return {Object} The manifest item that this loader is responsible for loading.\n\t * @since 0.6.0\n\t */\n\tp.getItem = function () {\n\t\treturn this._item;\n\t};\n\n\t/**\n\t * Get a reference to the content that was loaded by the loader (only available after the {{#crossLink \"complete:event\"}}{{/crossLink}}\n\t * event is dispatched.\n\t * @method getResult\n\t * @param {Boolean} [raw=false] Determines if the returned result will be the formatted content, or the raw loaded\n\t * data (if it exists).\n\t * @return {Object}\n\t * @since 0.6.0\n\t */\n\tp.getResult = function (raw) {\n\t\treturn raw ? this._rawResult : this._result;\n\t};\n\n\t/**\n\t * Return the `tag` this object creates or uses for loading.\n\t * @method getTag\n\t * @return {Object} The tag instance\n\t * @since 0.6.0\n\t */\n\tp.getTag = function () {\n\t\treturn this._tag;\n\t};\n\n\t/**\n\t * Set the `tag` this item uses for loading.\n\t * @method setTag\n\t * @param {Object} tag The tag instance\n\t * @since 0.6.0\n\t */\n\tp.setTag = function(tag) {\n\t  this._tag = tag;\n\t};\n\n\t/**\n\t * Begin loading the item. This method is required when using a loader by itself.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      var queue = new createjs.LoadQueue();\n\t *      queue.on(\"complete\", handleComplete);\n\t *      queue.loadManifest(fileArray, false); // Note the 2nd argument that tells the queue not to start loading yet\n\t *      queue.load();\n\t *\n\t * @method load\n\t */\n\tp.load = function () {\n\t\tthis._createRequest();\n\n\t\tthis._request.on(\"complete\", this, this);\n\t\tthis._request.on(\"progress\", this, this);\n\t\tthis._request.on(\"loadStart\", this, this);\n\t\tthis._request.on(\"abort\", this, this);\n\t\tthis._request.on(\"timeout\", this, this);\n\t\tthis._request.on(\"error\", this, this);\n\n\t\tvar evt = new createjs.Event(\"initialize\");\n\t\tevt.loader = this._request;\n\t\tthis.dispatchEvent(evt);\n\n\t\tthis._request.load();\n\t};\n\n\t/**\n\t * Close the the item. This will stop any open requests (although downloads using HTML tags may still continue in\n\t * the background), but events will not longer be dispatched.\n\t * @method cancel\n\t */\n\tp.cancel = function () {\n\t\tthis.canceled = true;\n\t\tthis.destroy();\n\t};\n\n\t/**\n\t * Clean up the loader.\n\t * @method destroy\n\t */\n\tp.destroy = function() {\n\t\tif (this._request) {\n\t\t\tthis._request.removeAllEventListeners();\n\t\t\tthis._request.destroy();\n\t\t}\n\n\t\tthis._request = null;\n\n\t\tthis._item = null;\n\t\tthis._rawResult = null;\n\t\tthis._result = null;\n\n\t\tthis._loadItems = null;\n\n\t\tthis.removeAllEventListeners();\n\t};\n\n\t/**\n\t * Get any items loaded internally by the loader. The enables loaders such as {{#crossLink \"ManifestLoader\"}}{{/crossLink}}\n\t * to expose items it loads internally.\n\t * @method getLoadedItems\n\t * @return {Array} A list of the items loaded by the loader.\n\t * @since 0.6.0\n\t */\n\tp.getLoadedItems = function () {\n\t\treturn this._loadedItems;\n\t};\n\n\n\t// Private methods\n\t/**\n\t * Create an internal request used for loading. By default, an {{#crossLink \"XHRRequest\"}}{{/crossLink}} or\n\t * {{#crossLink \"TagRequest\"}}{{/crossLink}} is created, depending on the value of {{#crossLink \"preferXHR:property\"}}{{/crossLink}}.\n\t * Other loaders may override this to use different request types, such as {{#crossLink \"ManifestLoader\"}}{{/crossLink}},\n\t * which uses {{#crossLink \"JSONLoader\"}}{{/crossLink}} or {{#crossLink \"JSONPLoader\"}}{{/crossLink}} under the hood.\n\t * @method _createRequest\n\t * @protected\n\t */\n\tp._createRequest = function() {\n\t\tif (!this._preferXHR) {\n\t\t\tthis._request = new createjs.TagRequest(this._item, this._tag || this._createTag(), this._tagSrcAttribute);\n\t\t} else {\n\t\t\tthis._request = new createjs.XHRRequest(this._item);\n\t\t}\n\t};\n\n\t/**\n\t * Create the HTML tag used for loading. This method does nothing by default, and needs to be implemented\n\t * by loaders that require tag loading.\n\t * @method _createTag\n\t * @param {String} src The tag source\n\t * @return {HTMLElement} The tag that was created\n\t * @protected\n\t */\n\tp._createTag = function(src) { return null; };\n\n\t/**\n\t * Dispatch a loadstart {{#crossLink \"Event\"}}{{/crossLink}}. Please see the {{#crossLink \"AbstractLoader/loadstart:event\"}}{{/crossLink}}\n\t * event for details on the event payload.\n\t * @method _sendLoadStart\n\t * @protected\n\t */\n\tp._sendLoadStart = function () {\n\t\tif (this._isCanceled()) { return; }\n\t\tthis.dispatchEvent(\"loadstart\");\n\t};\n\n\t/**\n\t * Dispatch a {{#crossLink \"ProgressEvent\"}}{{/crossLink}}.\n\t * @method _sendProgress\n\t * @param {Number | Object} value The progress of the loaded item, or an object containing <code>loaded</code>\n\t * and <code>total</code> properties.\n\t * @protected\n\t */\n\tp._sendProgress = function (value) {\n\t\tif (this._isCanceled()) { return; }\n\t\tvar event = null;\n\t\tif (typeof(value) == \"number\") {\n\t\t\tthis.progress = value;\n\t\t\tevent = new createjs.ProgressEvent(this.progress);\n\t\t} else {\n\t\t\tevent = value;\n\t\t\tthis.progress = value.loaded / value.total;\n\t\t\tevent.progress = this.progress;\n\t\t\tif (isNaN(this.progress) || this.progress == Infinity) { this.progress = 0; }\n\t\t}\n\t\tthis.hasEventListener(\"progress\") && this.dispatchEvent(event);\n\t};\n\n\t/**\n\t * Dispatch a complete {{#crossLink \"Event\"}}{{/crossLink}}. Please see the {{#crossLink \"AbstractLoader/complete:event\"}}{{/crossLink}} event\n\t * @method _sendComplete\n\t * @protected\n\t */\n\tp._sendComplete = function () {\n\t\tif (this._isCanceled()) { return; }\n\n\t\tthis.loaded = true;\n\n\t\tvar event = new createjs.Event(\"complete\");\n\t\tevent.rawResult = this._rawResult;\n\n\t\tif (this._result != null) {\n\t\t\tevent.result = this._result;\n\t\t}\n\n\t\tthis.dispatchEvent(event);\n\t};\n\n\t/**\n\t * Dispatch an error {{#crossLink \"Event\"}}{{/crossLink}}. Please see the {{#crossLink \"AbstractLoader/error:event\"}}{{/crossLink}}\n\t * event for details on the event payload.\n\t * @method _sendError\n\t * @param {ErrorEvent} event The event object containing specific error properties.\n\t * @protected\n\t */\n\tp._sendError = function (event) {\n\t\tif (this._isCanceled() || !this.hasEventListener(\"error\")) { return; }\n\t\tif (event == null) {\n\t\t\tevent = new createjs.ErrorEvent(\"PRELOAD_ERROR_EMPTY\"); // TODO: Populate error\n\t\t}\n\t\tthis.dispatchEvent(event);\n\t};\n\n\t/**\n\t * Determine if the load has been canceled. This is important to ensure that method calls or asynchronous events\n\t * do not cause issues after the queue has been cleaned up.\n\t * @method _isCanceled\n\t * @return {Boolean} If the loader has been canceled.\n\t * @protected\n\t */\n\tp._isCanceled = function () {\n\t\tif (window.createjs == null || this.canceled) {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t};\n\n\t/**\n\t * A custom result formatter function, which is called just before a request dispatches its complete event. Most\n\t * loader types already have an internal formatter, but this can be user-overridden for custom formatting. The\n\t * formatted result will be available on Loaders using {{#crossLink \"getResult\"}}{{/crossLink}}, and passing `true`.\n\t * @property resultFormatter\n\t * @type Function\n\t * @return {Object} The formatted result\n\t * @since 0.6.0\n\t */\n\tp.resultFormatter = null;\n\n\t/**\n\t * Handle events from internal requests. By default, loaders will handle, and redispatch the necessary events, but\n\t * this method can be overridden for custom behaviours.\n\t * @method handleEvent\n\t * @param {Event} event The event that the internal request dispatches.\n\t * @protected\n\t * @since 0.6.0\n\t */\n\tp.handleEvent = function (event) {\n\t\tswitch (event.type) {\n\t\t\tcase \"complete\":\n\t\t\t\tthis._rawResult = event.target._response;\n\t\t\t\tvar result = this.resultFormatter && this.resultFormatter(this);\n\t\t\t\tif (result instanceof Function) {\n\t\t\t\t\tresult.call(this,\n\t\t\t\t\t\t\tcreatejs.proxy(this._resultFormatSuccess, this),\n\t\t\t\t\t\t\tcreatejs.proxy(this._resultFormatFailed, this)\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\tthis._result =  result || this._rawResult;\n\t\t\t\t\tthis._sendComplete();\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase \"progress\":\n\t\t\t\tthis._sendProgress(event);\n\t\t\t\tbreak;\n\t\t\tcase \"error\":\n\t\t\t\tthis._sendError(event);\n\t\t\t\tbreak;\n\t\t\tcase \"loadstart\":\n\t\t\t\tthis._sendLoadStart();\n\t\t\t\tbreak;\n\t\t\tcase \"abort\":\n\t\t\tcase \"timeout\":\n\t\t\t\tif (!this._isCanceled()) {\n\t\t\t\t\tthis.dispatchEvent(new createjs.ErrorEvent(\"PRELOAD_\" + event.type.toUpperCase() + \"_ERROR\"));\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t};\n\n\t/**\n\t * The \"success\" callback passed to {{#crossLink \"AbstractLoader/resultFormatter\"}}{{/crossLink}} asynchronous\n\t * functions.\n\t * @method _resultFormatSuccess\n\t * @param {Object} result The formatted result\n\t * @private\n\t */\n\tp._resultFormatSuccess = function (result) {\n\t\tthis._result = result;\n\t\tthis._sendComplete();\n\t};\n\n\t/**\n\t * The \"error\" callback passed to {{#crossLink \"AbstractLoader/resultFormatter\"}}{{/crossLink}} asynchronous\n\t * functions.\n\t * @method _resultFormatSuccess\n\t * @param {Object} error The error event\n\t * @private\n\t */\n\tp._resultFormatFailed = function (event) {\n\t\tthis._sendError(event);\n\t};\n\n\t/**\n\t * @method buildPath\n\t * @protected\n\t * @deprecated Use the {{#crossLink \"RequestUtils\"}}{{/crossLink}} method {{#crossLink \"RequestUtils/buildPath\"}}{{/crossLink}}\n\t * instead.\n\t */\n\tp.buildPath = function (src, data) {\n\t\treturn createjs.RequestUtils.buildPath(src, data);\n\t};\n\n\t/**\n\t * @method toString\n\t * @return {String} a string representation of the instance.\n\t */\n\tp.toString = function () {\n\t\treturn \"[PreloadJS AbstractLoader]\";\n\t};\n\n\tcreatejs.AbstractLoader = createjs.promote(AbstractLoader, \"EventDispatcher\");\n\n}());\n\n//##############################################################################\n// AbstractMediaLoader.js\n//##############################################################################\n\n(function () {\n\t\"use strict\";\n\n\t// constructor\n\t/**\n\t * The AbstractMediaLoader is a base class that handles some of the shared methods and properties of loaders that\n\t * handle HTML media elements, such as Video and Audio.\n\t * @class AbstractMediaLoader\n\t * @param {LoadItem|Object} loadItem\n\t * @param {Boolean} preferXHR\n\t * @param {String} type The type of media to load. Usually \"video\" or \"audio\".\n\t * @extends AbstractLoader\n\t * @constructor\n\t */\n\tfunction AbstractMediaLoader(loadItem, preferXHR, type) {\n\t\tthis.AbstractLoader_constructor(loadItem, preferXHR, type);\n\n\t\t// public properties\n\t\tthis.resultFormatter = this._formatResult;\n\n\t\t// protected properties\n\t\tthis._tagSrcAttribute = \"src\";\n\n        this.on(\"initialize\", this._updateXHR, this);\n\t};\n\n\tvar p = createjs.extend(AbstractMediaLoader, createjs.AbstractLoader);\n\n\t// static properties\n\t// public methods\n\tp.load = function () {\n\t\t// TagRequest will handle most of this, but Sound / Video need a few custom properties, so just handle them here.\n\t\tif (!this._tag) {\n\t\t\tthis._tag = this._createTag(this._item.src);\n\t\t}\n\n\t\tthis._tag.preload = \"auto\";\n\t\tthis._tag.load();\n\n\t\tthis.AbstractLoader_load();\n\t};\n\n\t// protected methods\n\t/**\n\t * Creates a new tag for loading if it doesn't exist yet.\n\t * @method _createTag\n\t * @private\n\t */\n\tp._createTag = function () {};\n\n\n\tp._createRequest = function() {\n\t\tif (!this._preferXHR) {\n\t\t\tthis._request = new createjs.MediaTagRequest(this._item, this._tag || this._createTag(), this._tagSrcAttribute);\n\t\t} else {\n\t\t\tthis._request = new createjs.XHRRequest(this._item);\n\t\t}\n\t};\n\n    // protected methods\n    /**\n     * Before the item loads, set its mimeType and responseType.\n     * @property _updateXHR\n     * @param {Event} event\n     * @private\n     */\n    p._updateXHR = function (event) {\n        // Only exists for XHR\n        if (event.loader.setResponseType) {\n            event.loader.setResponseType(\"blob\");\n        }\n    };\n\n\t/**\n\t * The result formatter for media files.\n\t * @method _formatResult\n\t * @param {AbstractLoader} loader\n\t * @returns {HTMLVideoElement|HTMLAudioElement}\n\t * @private\n\t */\n\tp._formatResult = function (loader) {\n\t\tthis._tag.removeEventListener && this._tag.removeEventListener(\"canplaythrough\", this._loadedHandler);\n\t\tthis._tag.onstalled = null;\n\t\tif (this._preferXHR) {\n            var URL = window.URL || window.webkitURL;\n            var result = loader.getResult(true);\n\n\t\t\tloader.getTag().src = URL.createObjectURL(result);\n\t\t}\n\t\treturn loader.getTag();\n\t};\n\n\tcreatejs.AbstractMediaLoader = createjs.promote(AbstractMediaLoader, \"AbstractLoader\");\n\n}());\n\n//##############################################################################\n// AbstractRequest.js\n//##############################################################################\n\n(function () {\n\t\"use strict\";\n\n\t/**\n\t * A base class for actual data requests, such as {{#crossLink \"XHRRequest\"}}{{/crossLink}}, {{#crossLink \"TagRequest\"}}{{/crossLink}},\n\t * and {{#crossLink \"MediaRequest\"}}{{/crossLink}}. PreloadJS loaders will typically use a data loader under the\n\t * hood to get data.\n\t * @class AbstractRequest\n\t * @param {LoadItem} item\n\t * @constructor\n\t */\n\tvar AbstractRequest = function (item) {\n\t\tthis._item = item;\n\t};\n\n\tvar p = createjs.extend(AbstractRequest, createjs.EventDispatcher);\n\n\t// public methods\n\t/**\n\t * Begin a load.\n\t * @method load\n\t */\n\tp.load =  function() {};\n\n\t/**\n\t * Clean up a request.\n\t * @method destroy\n\t */\n\tp.destroy = function() {};\n\n\t/**\n\t * Cancel an in-progress request.\n\t * @method cancel\n\t */\n\tp.cancel = function() {};\n\n\tcreatejs.AbstractRequest = createjs.promote(AbstractRequest, \"EventDispatcher\");\n\n}());\n\n//##############################################################################\n// TagRequest.js\n//##############################################################################\n\n(function () {\n\t\"use strict\";\n\n\t// constructor\n\t/**\n\t * An {{#crossLink \"AbstractRequest\"}}{{/crossLink}} that loads HTML tags, such as images and scripts.\n\t * @class TagRequest\n\t * @param {LoadItem} loadItem\n\t * @param {HTMLElement} tag\n\t * @param {String} srcAttribute The tag attribute that specifies the source, such as \"src\", \"href\", etc.\n\t */\n\tfunction TagRequest(loadItem, tag, srcAttribute) {\n\t\tthis.AbstractRequest_constructor(loadItem);\n\n\t\t// protected properties\n\t\t/**\n\t\t * The HTML tag instance that is used to load.\n\t\t * @property _tag\n\t\t * @type {HTMLElement}\n\t\t * @protected\n\t\t */\n\t\tthis._tag = tag;\n\n\t\t/**\n\t\t * The tag attribute that specifies the source, such as \"src\", \"href\", etc.\n\t\t * @property _tagSrcAttribute\n\t\t * @type {String}\n\t\t * @protected\n\t\t */\n\t\tthis._tagSrcAttribute = srcAttribute;\n\n\t\t/**\n\t\t * A method closure used for handling the tag load event.\n\t\t * @property _loadedHandler\n\t\t * @type {Function}\n\t\t * @private\n\t\t */\n\t\tthis._loadedHandler = createjs.proxy(this._handleTagComplete, this);\n\n\t\t/**\n\t\t * Determines if the element was added to the DOM automatically by PreloadJS, so it can be cleaned up after.\n\t\t * @property _addedToDOM\n\t\t * @type {Boolean}\n\t\t * @private\n\t\t */\n\t\tthis._addedToDOM = false;\n\n\t\t/**\n\t\t * Determines what the tags initial style.visibility was, so we can set it correctly after a load.\n\t\t *\n\t\t * @type {null}\n\t\t * @private\n\t\t */\n\t\tthis._startTagVisibility = null;\n\t};\n\n\tvar p = createjs.extend(TagRequest, createjs.AbstractRequest);\n\n\t// public methods\n\tp.load = function () {\n\t\tthis._tag.onload = createjs.proxy(this._handleTagComplete, this);\n\t\tthis._tag.onreadystatechange = createjs.proxy(this._handleReadyStateChange, this);\n\t\tthis._tag.onerror = createjs.proxy(this._handleError, this);\n\n\t\tvar evt = new createjs.Event(\"initialize\");\n\t\tevt.loader = this._tag;\n\n\t\tthis.dispatchEvent(evt);\n\n\t\tthis._hideTag();\n\n\t\tthis._loadTimeout = setTimeout(createjs.proxy(this._handleTimeout, this), this._item.loadTimeout);\n\n\t\tthis._tag[this._tagSrcAttribute] = this._item.src;\n\n\t\t// wdg:: Append the tag AFTER setting the src, or SVG loading on iOS will fail.\n\t\tif (this._tag.parentNode == null) {\n\t\t\twindow.document.body.appendChild(this._tag);\n\t\t\tthis._addedToDOM = true;\n\t\t}\n\t};\n\n\tp.destroy = function() {\n\t\tthis._clean();\n\t\tthis._tag = null;\n\n\t\tthis.AbstractRequest_destroy();\n\t};\n\n\t// private methods\n\t/**\n\t * Handle the readyStateChange event from a tag. We need this in place of the `onload` callback (mainly SCRIPT\n\t * and LINK tags), but other cases may exist.\n\t * @method _handleReadyStateChange\n\t * @private\n\t */\n\tp._handleReadyStateChange = function () {\n\t\tclearTimeout(this._loadTimeout);\n\t\t// This is strictly for tags in browsers that do not support onload.\n\t\tvar tag = this._tag;\n\n\t\t// Complete is for old IE support.\n\t\tif (tag.readyState == \"loaded\" || tag.readyState == \"complete\") {\n\t\t\tthis._handleTagComplete();\n\t\t}\n\t};\n\n\t/**\n\t * Handle any error events from the tag.\n\t * @method _handleError\n\t * @protected\n\t */\n\tp._handleError = function() {\n\t\tthis._clean();\n\t\tthis.dispatchEvent(\"error\");\n\t};\n\n\t/**\n\t * Handle the tag's onload callback.\n\t * @method _handleTagComplete\n\t * @private\n\t */\n\tp._handleTagComplete = function () {\n\t\tthis._rawResult = this._tag;\n\t\tthis._result = this.resultFormatter && this.resultFormatter(this) || this._rawResult;\n\n\t\tthis._clean();\n\t\tthis._showTag();\n\n\t\tthis.dispatchEvent(\"complete\");\n\t};\n\n\t/**\n\t * The tag request has not loaded within the time specified in loadTimeout.\n\t * @method _handleError\n\t * @param {Object} event The XHR error event.\n\t * @private\n\t */\n\tp._handleTimeout = function () {\n\t\tthis._clean();\n\t\tthis.dispatchEvent(new createjs.Event(\"timeout\"));\n\t};\n\n\t/**\n\t * Remove event listeners, but don't destroy the request object\n\t * @method _clean\n\t * @private\n\t */\n\tp._clean = function() {\n\t\tthis._tag.onload = null;\n\t\tthis._tag.onreadystatechange = null;\n\t\tthis._tag.onerror = null;\n\t\tif (this._addedToDOM && this._tag.parentNode != null) {\n\t\t\tthis._tag.parentNode.removeChild(this._tag);\n\t\t}\n\t\tclearTimeout(this._loadTimeout);\n\t};\n\n\tp._hideTag = function() {\n\t\tthis._startTagVisibility = this._tag.style.visibility;\n\t\tthis._tag.style.visibility = \"hidden\";\n\t};\n\n\tp._showTag = function() {\n\t\tthis._tag.style.visibility = this._startTagVisibility;\n\t};\n\n\t/**\n\t * Handle a stalled audio event. The main place this happens is with HTMLAudio in Chrome when playing back audio\n\t * that is already in a load, but not complete.\n\t * @method _handleStalled\n\t * @private\n\t */\n\tp._handleStalled = function () {\n\t\t//Ignore, let the timeout take care of it. Sometimes its not really stopped.\n\t};\n\n\tcreatejs.TagRequest = createjs.promote(TagRequest, \"AbstractRequest\");\n\n}());\n\n//##############################################################################\n// MediaTagRequest.js\n//##############################################################################\n\n(function () {\n\t\"use strict\";\n\n\t// constructor\n\t/**\n\t * An {{#crossLink \"TagRequest\"}}{{/crossLink}} that loads HTML tags for video and audio.\n\t * @class MediaTagRequest\n\t * @param {LoadItem} loadItem\n\t * @param {HTMLAudioElement|HTMLVideoElement} tag\n\t * @param {String} srcAttribute The tag attribute that specifies the source, such as \"src\", \"href\", etc.\n\t * @constructor\n\t */\n\tfunction MediaTagRequest(loadItem, tag, srcAttribute) {\n\t\tthis.AbstractRequest_constructor(loadItem);\n\n\t\t// protected properties\n\t\tthis._tag = tag;\n\t\tthis._tagSrcAttribute = srcAttribute;\n\t\tthis._loadedHandler = createjs.proxy(this._handleTagComplete, this);\n\t};\n\n\tvar p = createjs.extend(MediaTagRequest, createjs.TagRequest);\n\tvar s = MediaTagRequest;\n\n\t// public methods\n\tp.load = function () {\n\t\tvar sc = createjs.proxy(this._handleStalled, this);\n\t\tthis._stalledCallback = sc;\n\n\t\tvar pc = createjs.proxy(this._handleProgress, this);\n\t\tthis._handleProgress = pc;\n\n\t\tthis._tag.addEventListener(\"stalled\", sc);\n\t\tthis._tag.addEventListener(\"progress\", pc);\n\n\t\t// This will tell us when audio is buffered enough to play through, but not when its loaded.\n\t\t// The tag doesn't keep loading in Chrome once enough has buffered, and we have decided that behaviour is sufficient.\n\t\tthis._tag.addEventListener && this._tag.addEventListener(\"canplaythrough\", this._loadedHandler, false); // canplaythrough callback doesn't work in Chrome, so we use an event.\n\n\t\tthis.TagRequest_load();\n\t};\n\n\t// private methods\n\tp._handleReadyStateChange = function () {\n\t\tclearTimeout(this._loadTimeout);\n\t\t// This is strictly for tags in browsers that do not support onload.\n\t\tvar tag = this._tag;\n\n\t\t// Complete is for old IE support.\n\t\tif (tag.readyState == \"loaded\" || tag.readyState == \"complete\") {\n\t\t\tthis._handleTagComplete();\n\t\t}\n\t};\n\n\tp._handleStalled = function () {\n\t\t//Ignore, let the timeout take care of it. Sometimes its not really stopped.\n\t};\n\n\t/**\n\t * An XHR request has reported progress.\n\t * @method _handleProgress\n\t * @param {Object} event The XHR progress event.\n\t * @private\n\t */\n\tp._handleProgress = function (event) {\n\t\tif (!event || event.loaded > 0 && event.total == 0) {\n\t\t\treturn; // Sometimes we get no \"total\", so just ignore the progress event.\n\t\t}\n\n\t\tvar newEvent = new createjs.ProgressEvent(event.loaded, event.total);\n\t\tthis.dispatchEvent(newEvent);\n\t};\n\n\t// protected methods\n\tp._clean = function () {\n\t\tthis._tag.removeEventListener && this._tag.removeEventListener(\"canplaythrough\", this._loadedHandler);\n\t\tthis._tag.removeEventListener(\"stalled\", this._stalledCallback);\n\t\tthis._tag.removeEventListener(\"progress\", this._progressCallback);\n\n\t\tthis.TagRequest__clean();\n\t};\n\n\tcreatejs.MediaTagRequest = createjs.promote(MediaTagRequest, \"TagRequest\");\n\n}());\n\n//##############################################################################\n// XHRRequest.js\n//##############################################################################\n\n(function () {\n\t\"use strict\";\n\n// constructor\n\t/**\n\t * A preloader that loads items using XHR requests, usually XMLHttpRequest. However XDomainRequests will be used\n\t * for cross-domain requests if possible, and older versions of IE fall back on to ActiveX objects when necessary.\n\t * XHR requests load the content as text or binary data, provide progress and consistent completion events, and\n\t * can be canceled during load. Note that XHR is not supported in IE 6 or earlier, and is not recommended for\n\t * cross-domain loading.\n\t * @class XHRRequest\n\t * @constructor\n\t * @param {Object} item The object that defines the file to load. Please see the {{#crossLink \"LoadQueue/loadFile\"}}{{/crossLink}}\n\t * for an overview of supported file properties.\n\t * @extends AbstractLoader\n\t */\n\tfunction XHRRequest (item) {\n\t\tthis.AbstractRequest_constructor(item);\n\n\t\t// protected properties\n\t\t/**\n\t\t * A reference to the XHR request used to load the content.\n\t\t * @property _request\n\t\t * @type {XMLHttpRequest | XDomainRequest | ActiveX.XMLHTTP}\n\t\t * @private\n\t\t */\n\t\tthis._request = null;\n\n\t\t/**\n\t\t * A manual load timeout that is used for browsers that do not support the onTimeout event on XHR (XHR level 1,\n\t\t * typically IE9).\n\t\t * @property _loadTimeout\n\t\t * @type {Number}\n\t\t * @private\n\t\t */\n\t\tthis._loadTimeout = null;\n\n\t\t/**\n\t\t * The browser's XHR (XMLHTTPRequest) version. Supported versions are 1 and 2. There is no official way to detect\n\t\t * the version, so we use capabilities to make a best guess.\n\t\t * @property _xhrLevel\n\t\t * @type {Number}\n\t\t * @default 1\n\t\t * @private\n\t\t */\n\t\tthis._xhrLevel = 1;\n\n\t\t/**\n\t\t * The response of a loaded file. This is set because it is expensive to look up constantly. This property will be\n\t\t * null until the file is loaded.\n\t\t * @property _response\n\t\t * @type {mixed}\n\t\t * @private\n\t\t */\n\t\tthis._response = null;\n\n\t\t/**\n\t\t * The response of the loaded file before it is modified. In most cases, content is converted from raw text to\n\t\t * an HTML tag or a formatted object which is set to the <code>result</code> property, but the developer may still\n\t\t * want to access the raw content as it was loaded.\n\t\t * @property _rawResponse\n\t\t * @type {String|Object}\n\t\t * @private\n\t\t */\n\t\tthis._rawResponse = null;\n\n\t\tthis._canceled = false;\n\n\t\t// Setup our event handlers now.\n\t\tthis._handleLoadStartProxy = createjs.proxy(this._handleLoadStart, this);\n\t\tthis._handleProgressProxy = createjs.proxy(this._handleProgress, this);\n\t\tthis._handleAbortProxy = createjs.proxy(this._handleAbort, this);\n\t\tthis._handleErrorProxy = createjs.proxy(this._handleError, this);\n\t\tthis._handleTimeoutProxy = createjs.proxy(this._handleTimeout, this);\n\t\tthis._handleLoadProxy = createjs.proxy(this._handleLoad, this);\n\t\tthis._handleReadyStateChangeProxy = createjs.proxy(this._handleReadyStateChange, this);\n\n\t\tif (!this._createXHR(item)) {\n\t\t\t//TODO: Throw error?\n\t\t}\n\t};\n\n\tvar p = createjs.extend(XHRRequest, createjs.AbstractRequest);\n\n// static properties\n\t/**\n\t * A list of XMLHTTP object IDs to try when building an ActiveX object for XHR requests in earlier versions of IE.\n\t * @property ACTIVEX_VERSIONS\n\t * @type {Array}\n\t * @since 0.4.2\n\t * @private\n\t */\n\tXHRRequest.ACTIVEX_VERSIONS = [\n\t\t\"Msxml2.XMLHTTP.6.0\",\n\t\t\"Msxml2.XMLHTTP.5.0\",\n\t\t\"Msxml2.XMLHTTP.4.0\",\n\t\t\"MSXML2.XMLHTTP.3.0\",\n\t\t\"MSXML2.XMLHTTP\",\n\t\t\"Microsoft.XMLHTTP\"\n\t];\n\n// Public methods\n\t/**\n\t * Look up the loaded result.\n\t * @method getResult\n\t * @param {Boolean} [raw=false] Return a raw result instead of a formatted result. This applies to content\n\t * loaded via XHR such as scripts, XML, CSS, and Images. If there is no raw result, the formatted result will be\n\t * returned instead.\n\t * @return {Object} A result object containing the content that was loaded, such as:\n\t * <ul>\n\t *      <li>An image tag (&lt;image /&gt;) for images</li>\n\t *      <li>A script tag for JavaScript (&lt;script /&gt;). Note that scripts loaded with tags may be added to the\n\t *      HTML head.</li>\n\t *      <li>A style tag for CSS (&lt;style /&gt;)</li>\n\t *      <li>Raw text for TEXT</li>\n\t *      <li>A formatted JavaScript object defined by JSON</li>\n\t *      <li>An XML document</li>\n\t *      <li>An binary arraybuffer loaded by XHR</li>\n\t * </ul>\n\t * Note that if a raw result is requested, but not found, the result will be returned instead.\n\t */\n\tp.getResult = function (raw) {\n\t\tif (raw && this._rawResponse) {\n\t\t\treturn this._rawResponse;\n\t\t}\n\t\treturn this._response;\n\t};\n\n\t// Overrides abstract method in AbstractRequest\n\tp.cancel = function () {\n\t\tthis.canceled = true;\n\t\tthis._clean();\n\t\tthis._request.abort();\n\t};\n\n\t// Overrides abstract method in AbstractLoader\n\tp.load = function () {\n\t\tif (this._request == null) {\n\t\t\tthis._handleError();\n\t\t\treturn;\n\t\t}\n\n\t\t//Events\n\t\tif (this._request.addEventListener != null) {\n\t\t\tthis._request.addEventListener(\"loadstart\", this._handleLoadStartProxy, false);\n\t\t\tthis._request.addEventListener(\"progress\", this._handleProgressProxy, false);\n\t\t\tthis._request.addEventListener(\"abort\", this._handleAbortProxy, false);\n\t\t\tthis._request.addEventListener(\"error\", this._handleErrorProxy, false);\n\t\t\tthis._request.addEventListener(\"timeout\", this._handleTimeoutProxy, false);\n\n\t\t\t// Note: We don't get onload in all browsers (earlier FF and IE). onReadyStateChange handles these.\n\t\t\tthis._request.addEventListener(\"load\", this._handleLoadProxy, false);\n\t\t\tthis._request.addEventListener(\"readystatechange\", this._handleReadyStateChangeProxy, false);\n\t\t} else {\n\t\t\t// IE9 support\n\t\t\tthis._request.onloadstart = this._handleLoadStartProxy;\n\t\t\tthis._request.onprogress = this._handleProgressProxy;\n\t\t\tthis._request.onabort = this._handleAbortProxy;\n\t\t\tthis._request.onerror = this._handleErrorProxy;\n\t\t\tthis._request.ontimeout = this._handleTimeoutProxy;\n\n\t\t\t// Note: We don't get onload in all browsers (earlier FF and IE). onReadyStateChange handles these.\n\t\t\tthis._request.onload = this._handleLoadProxy;\n\t\t\tthis._request.onreadystatechange = this._handleReadyStateChangeProxy;\n\t\t}\n\n\t\t// Set up a timeout if we don't have XHR2\n\t\tif (this._xhrLevel == 1) {\n\t\t\tthis._loadTimeout = setTimeout(createjs.proxy(this._handleTimeout, this), this._item.loadTimeout);\n\t\t}\n\n\t\t// Sometimes we get back 404s immediately, particularly when there is a cross origin request.  // note this does not catch in Chrome\n\t\ttry {\n\t\t\tif (!this._item.values || this._item.method == createjs.AbstractLoader.GET) {\n\t\t\t\tthis._request.send();\n\t\t\t} else if (this._item.method == createjs.AbstractLoader.POST) {\n\t\t\t\tthis._request.send(createjs.RequestUtils.formatQueryString(this._item.values));\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tthis.dispatchEvent(new createjs.ErrorEvent(\"XHR_SEND\", null, error));\n\t\t}\n\t};\n\n\tp.setResponseType = function (type) {\n\t\t// Some old browsers doesn't support blob, so we convert arraybuffer to blob after response is downloaded\n\t\tif (type === 'blob') {\n\t\t\ttype = window.URL ? 'blob' : 'arraybuffer';\n\t\t\tthis._responseType = type;\n\t\t}\n\t\tthis._request.responseType = type;\n\t};\n\n\t/**\n\t * Get all the response headers from the XmlHttpRequest.\n\t *\n\t * <strong>From the docs:</strong> Return all the HTTP headers, excluding headers that are a case-insensitive match\n\t * for Set-Cookie or Set-Cookie2, as a single string, with each header line separated by a U+000D CR U+000A LF pair,\n\t * excluding the status line, and with each header name and header value separated by a U+003A COLON U+0020 SPACE\n\t * pair.\n\t * @method getAllResponseHeaders\n\t * @return {String}\n\t * @since 0.4.1\n\t */\n\tp.getAllResponseHeaders = function () {\n\t\tif (this._request.getAllResponseHeaders instanceof Function) {\n\t\t\treturn this._request.getAllResponseHeaders();\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t};\n\n\t/**\n\t * Get a specific response header from the XmlHttpRequest.\n\t *\n\t * <strong>From the docs:</strong> Returns the header field value from the response of which the field name matches\n\t * header, unless the field name is Set-Cookie or Set-Cookie2.\n\t * @method getResponseHeader\n\t * @param {String} header The header name to retrieve.\n\t * @return {String}\n\t * @since 0.4.1\n\t */\n\tp.getResponseHeader = function (header) {\n\t\tif (this._request.getResponseHeader instanceof Function) {\n\t\t\treturn this._request.getResponseHeader(header);\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t};\n\n// protected methods\n\t/**\n\t * The XHR request has reported progress.\n\t * @method _handleProgress\n\t * @param {Object} event The XHR progress event.\n\t * @private\n\t */\n\tp._handleProgress = function (event) {\n\t\tif (!event || event.loaded > 0 && event.total == 0) {\n\t\t\treturn; // Sometimes we get no \"total\", so just ignore the progress event.\n\t\t}\n\n\t\tvar newEvent = new createjs.ProgressEvent(event.loaded, event.total);\n\t\tthis.dispatchEvent(newEvent);\n\t};\n\n\t/**\n\t * The XHR request has reported a load start.\n\t * @method _handleLoadStart\n\t * @param {Object} event The XHR loadStart event.\n\t * @private\n\t */\n\tp._handleLoadStart = function (event) {\n\t\tclearTimeout(this._loadTimeout);\n\t\tthis.dispatchEvent(\"loadstart\");\n\t};\n\n\t/**\n\t * The XHR request has reported an abort event.\n\t * @method handleAbort\n\t * @param {Object} event The XHR abort event.\n\t * @private\n\t */\n\tp._handleAbort = function (event) {\n\t\tthis._clean();\n\t\tthis.dispatchEvent(new createjs.ErrorEvent(\"XHR_ABORTED\", null, event));\n\t};\n\n\t/**\n\t * The XHR request has reported an error event.\n\t * @method _handleError\n\t * @param {Object} event The XHR error event.\n\t * @private\n\t */\n\tp._handleError = function (event) {\n\t\tthis._clean();\n\t\tthis.dispatchEvent(new createjs.ErrorEvent(event.message));\n\t};\n\n\t/**\n\t * The XHR request has reported a readyState change. Note that older browsers (IE 7 & 8) do not provide an onload\n\t * event, so we must monitor the readyStateChange to determine if the file is loaded.\n\t * @method _handleReadyStateChange\n\t * @param {Object} event The XHR readyStateChange event.\n\t * @private\n\t */\n\tp._handleReadyStateChange = function (event) {\n\t\tif (this._request.readyState == 4) {\n\t\t\tthis._handleLoad();\n\t\t}\n\t};\n\n\t/**\n\t * The XHR request has completed. This is called by the XHR request directly, or by a readyStateChange that has\n\t * <code>request.readyState == 4</code>. Only the first call to this method will be processed.\n\t * @method _handleLoad\n\t * @param {Object} event The XHR load event.\n\t * @private\n\t */\n\tp._handleLoad = function (event) {\n\t\tif (this.loaded) {\n\t\t\treturn;\n\t\t}\n\t\tthis.loaded = true;\n\n\t\tvar error = this._checkError();\n\t\tif (error) {\n\t\t\tthis._handleError(error);\n\t\t\treturn;\n\t\t}\n\n\t\tthis._response = this._getResponse();\n\t\t// Convert arraybuffer back to blob\n\t\tif (this._responseType === 'arraybuffer') {\n\t\t\ttry {\n\t\t\t\tthis._response = new Blob([this._response]);\n\t\t\t} catch (e) {\n\t\t\t\t// Fallback to use BlobBuilder if Blob constructor is not supported\n\t\t\t\t// Tested on Android 2.3 ~ 4.2 and iOS5 safari\n\t\t\t\twindow.BlobBuilder = window.BlobBuilder || window.WebKitBlobBuilder || window.MozBlobBuilder || window.MSBlobBuilder;\n\t\t\t\tif (e.name === 'TypeError' && window.BlobBuilder) {\n\t\t\t\t\tvar builder = new BlobBuilder();\n\t\t\t\t\tbuilder.append(this._response);\n\t\t\t\t\tthis._response = builder.getBlob();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tthis._clean();\n\n\t\tthis.dispatchEvent(new createjs.Event(\"complete\"));\n\t};\n\n\t/**\n\t * The XHR request has timed out. This is called by the XHR request directly, or via a <code>setTimeout</code>\n\t * callback.\n\t * @method _handleTimeout\n\t * @param {Object} [event] The XHR timeout event. This is occasionally null when called by the backup setTimeout.\n\t * @private\n\t */\n\tp._handleTimeout = function (event) {\n\t\tthis._clean();\n\n\t\tthis.dispatchEvent(new createjs.ErrorEvent(\"PRELOAD_TIMEOUT\", null, event));\n\t};\n\n// Protected\n\t/**\n\t * Determine if there is an error in the current load. This checks the status of the request for problem codes. Note\n\t * that this does not check for an actual response. Currently, it only checks for 404 or 0 error code.\n\t * @method _checkError\n\t * @return {int} If the request status returns an error code.\n\t * @private\n\t */\n\tp._checkError = function () {\n\t\t//LM: Probably need additional handlers here, maybe 501\n\t\tvar status = parseInt(this._request.status);\n\n\t\tswitch (status) {\n\t\t\tcase 404:   // Not Found\n\t\t\tcase 0:     // Not Loaded\n\t\t\t\treturn new Error(status);\n\t\t}\n\t\treturn null;\n\t};\n\n\t/**\n\t * Validate the response. Different browsers have different approaches, some of which throw errors when accessed\n\t * in other browsers. If there is no response, the <code>_response</code> property will remain null.\n\t * @method _getResponse\n\t * @private\n\t */\n\tp._getResponse = function () {\n\t\tif (this._response != null) {\n\t\t\treturn this._response;\n\t\t}\n\n\t\tif (this._request.response != null) {\n\t\t\treturn this._request.response;\n\t\t}\n\n\t\t// Android 2.2 uses .responseText\n\t\ttry {\n\t\t\tif (this._request.responseText != null) {\n\t\t\t\treturn this._request.responseText;\n\t\t\t}\n\t\t} catch (e) {\n\t\t}\n\n\t\t// When loading XML, IE9 does not return .response, instead it returns responseXML.xml\n\t\ttry {\n\t\t\tif (this._request.responseXML != null) {\n\t\t\t\treturn this._request.responseXML;\n\t\t\t}\n\t\t} catch (e) {\n\t\t}\n\n\t\treturn null;\n\t};\n\n\t/**\n\t * Create an XHR request. Depending on a number of factors, we get totally different results.\n\t * <ol><li>Some browsers get an <code>XDomainRequest</code> when loading cross-domain.</li>\n\t *      <li>XMLHttpRequest are created when available.</li>\n\t *      <li>ActiveX.XMLHTTP objects are used in older IE browsers.</li>\n\t *      <li>Text requests override the mime type if possible</li>\n\t *      <li>Origin headers are sent for crossdomain requests in some browsers.</li>\n\t *      <li>Binary loads set the response type to \"arraybuffer\"</li></ol>\n\t * @method _createXHR\n\t * @param {Object} item The requested item that is being loaded.\n\t * @return {Boolean} If an XHR request or equivalent was successfully created.\n\t * @private\n\t */\n\tp._createXHR = function (item) {\n\t\t// Check for cross-domain loads. We can't fully support them, but we can try.\n\t\tvar crossdomain = createjs.RequestUtils.isCrossDomain(item);\n\t\tvar headers = {};\n\n\t\t// Create the request. Fallback to whatever support we have.\n\t\tvar req = null;\n\t\tif (window.XMLHttpRequest) {\n\t\t\treq = new XMLHttpRequest();\n\t\t\t// This is 8 or 9, so use XDomainRequest instead.\n\t\t\tif (crossdomain && req.withCredentials === undefined && window.XDomainRequest) {\n\t\t\t\treq = new XDomainRequest();\n\t\t\t}\n\t\t} else { // Old IE versions use a different approach\n\t\t\tfor (var i = 0, l = s.ACTIVEX_VERSIONS.length; i < l; i++) {\n\t\t\t\tvar axVersion = s.ACTIVEX_VERSIONS[i];\n\t\t\t\ttry {\n\t\t\t\t\treq = new ActiveXObject(axVersion);\n\t\t\t\t\tbreak;\n\t\t\t\t} catch (e) {\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (req == null) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\t// Default to utf-8 for Text requests.\n\t\tif (item.mimeType == null && createjs.RequestUtils.isText(item.type)) {\n\t\t\titem.mimeType = \"text/plain; charset=utf-8\";\n\t\t}\n\n\t\t// IE9 doesn't support overrideMimeType(), so we need to check for it.\n\t\tif (item.mimeType && req.overrideMimeType) {\n\t\t\treq.overrideMimeType(item.mimeType);\n\t\t}\n\n\t\t// Determine the XHR level\n\t\tthis._xhrLevel = (typeof req.responseType === \"string\") ? 2 : 1;\n\n\t\tvar src = null;\n\t\tif (item.method == createjs.AbstractLoader.GET) {\n\t\t\tsrc = createjs.RequestUtils.buildPath(item.src, item.values);\n\t\t} else {\n\t\t\tsrc = item.src;\n\t\t}\n\n\t\t// Open the request.  Set cross-domain flags if it is supported (XHR level 1 only)\n\t\treq.open(item.method || createjs.AbstractLoader.GET, src, true);\n\n\t\tif (crossdomain && req instanceof XMLHttpRequest && this._xhrLevel == 1) {\n\t\t\theaders[\"Origin\"] = location.origin;\n\t\t}\n\n\t\t// To send data we need to set the Content-type header)\n\t\tif (item.values && item.method == createjs.AbstractLoader.POST) {\n\t\t\theaders[\"Content-Type\"] = \"application/x-www-form-urlencoded\";\n\t\t}\n\n\t\tif (!crossdomain && !headers[\"X-Requested-With\"]) {\n\t\t\theaders[\"X-Requested-With\"] = \"XMLHttpRequest\";\n\t\t}\n\n\t\tif (item.headers) {\n\t\t\tfor (var n in item.headers) {\n\t\t\t\theaders[n] = item.headers[n];\n\t\t\t}\n\t\t}\n\n\t\tfor (n in headers) {\n\t\t\treq.setRequestHeader(n, headers[n])\n\t\t}\n\n\t\tif (req instanceof XMLHttpRequest && item.withCredentials !== undefined) {\n\t\t\treq.withCredentials = item.withCredentials;\n\t\t}\n\n\t\tthis._request = req;\n\n\t\treturn true;\n\t};\n\n\t/**\n\t * A request has completed (or failed or canceled), and needs to be disposed.\n\t * @method _clean\n\t * @private\n\t */\n\tp._clean = function () {\n\t\tclearTimeout(this._loadTimeout);\n\n\t\tif (this._request.removeEventListener != null) {\n\t\t\tthis._request.removeEventListener(\"loadstart\", this._handleLoadStartProxy);\n\t\t\tthis._request.removeEventListener(\"progress\", this._handleProgressProxy);\n\t\t\tthis._request.removeEventListener(\"abort\", this._handleAbortProxy);\n\t\t\tthis._request.removeEventListener(\"error\", this._handleErrorProxy);\n\t\t\tthis._request.removeEventListener(\"timeout\", this._handleTimeoutProxy);\n\t\t\tthis._request.removeEventListener(\"load\", this._handleLoadProxy);\n\t\t\tthis._request.removeEventListener(\"readystatechange\", this._handleReadyStateChangeProxy);\n\t\t} else {\n\t\t\tthis._request.onloadstart = null;\n\t\t\tthis._request.onprogress = null;\n\t\t\tthis._request.onabort = null;\n\t\t\tthis._request.onerror = null;\n\t\t\tthis._request.ontimeout = null;\n\t\t\tthis._request.onload = null;\n\t\t\tthis._request.onreadystatechange = null;\n\t\t}\n\t};\n\n\tp.toString = function () {\n\t\treturn \"[PreloadJS XHRRequest]\";\n\t};\n\n\tcreatejs.XHRRequest = createjs.promote(XHRRequest, \"AbstractRequest\");\n\n}());\n\n//##############################################################################\n// LoadQueue.js\n//##############################################################################\n\n/*\n TODO: WINDOWS ISSUES\n * No error for HTML audio in IE 678\n * SVG no failure error in IE 67 (maybe 8) TAGS AND XHR\n * No script complete handler in IE 67 TAGS (XHR is fine)\n * No XML/JSON in IE6 TAGS\n * Need to hide loading SVG in Opera TAGS\n * No CSS onload/readystatechange in Safari or Android TAGS (requires rule checking)\n * SVG no load or failure in Opera XHR\n * Reported issues with IE7/8\n */\n\n(function () {\n\t\"use strict\";\n\n// constructor\n\t/**\n\t * The LoadQueue class is the main API for preloading content. LoadQueue is a load manager, which can preload either\n\t * a single file, or queue of files.\n\t *\n\t * <b>Creating a Queue</b><br />\n\t * To use LoadQueue, create a LoadQueue instance. If you want to force tag loading where possible, set the preferXHR\n\t * argument to false.\n\t *\n\t *      var queue = new createjs.LoadQueue(true);\n\t *\n\t * <b>Listening for Events</b><br />\n\t * Add any listeners you want to the queue. Since PreloadJS 0.3.0, the {{#crossLink \"EventDispatcher\"}}{{/crossLink}}\n\t * lets you add as many listeners as you want for events. You can subscribe to the following events:<ul>\n\t *     <li>{{#crossLink \"AbstractLoader/complete:event\"}}{{/crossLink}}: fired when a queue completes loading all\n\t *     files</li>\n\t *     <li>{{#crossLink \"AbstractLoader/error:event\"}}{{/crossLink}}: fired when the queue encounters an error with\n\t *     any file.</li>\n\t *     <li>{{#crossLink \"AbstractLoader/progress:event\"}}{{/crossLink}}: Progress for the entire queue has\n\t *     changed.</li>\n\t *     <li>{{#crossLink \"LoadQueue/fileload:event\"}}{{/crossLink}}: A single file has completed loading.</li>\n\t *     <li>{{#crossLink \"LoadQueue/fileprogress:event\"}}{{/crossLink}}: Progress for a single file has changes. Note\n\t *     that only files loaded with XHR (or possibly by plugins) will fire progress events other than 0 or 100%.</li>\n\t * </ul>\n\t *\n\t *      queue.on(\"fileload\", handleFileLoad, this);\n\t *      queue.on(\"complete\", handleComplete, this);\n\t *\n\t * <b>Adding files and manifests</b><br />\n\t * Add files you want to load using {{#crossLink \"LoadQueue/loadFile\"}}{{/crossLink}} or add multiple files at a\n\t * time using a list or a manifest definition using {{#crossLink \"LoadQueue/loadManifest\"}}{{/crossLink}}. Files are\n\t * appended to the end of the active queue, so you can use these methods as many times as you like, whenever you\n\t * like.\n\t *\n\t *      queue.loadFile(\"filePath/file.jpg\");\n\t *      queue.loadFile({id:\"image\", src:\"filePath/file.jpg\"});\n\t *      queue.loadManifest([\"filePath/file.jpg\", {id:\"image\", src:\"filePath/file.jpg\"}]);\n\t *\n\t *      // Use an external manifest\n\t *      queue.loadManifest(\"path/to/manifest.json\");\n\t *      queue.loadManifest({src:\"manifest.json\", type:\"manifest\"});\n\t *\n\t * If you pass `false` as the `loadNow` parameter, the queue will not kick of the load of the files, but it will not\n\t * stop if it has already been started. Call the {{#crossLink \"AbstractLoader/load\"}}{{/crossLink}} method to begin\n\t * a paused queue. Note that a paused queue will automatically resume when new files are added to it with a\n\t * `loadNow` argument of `true`.\n\t *\n\t *      queue.load();\n\t *\n\t * <b>File Types</b><br />\n\t * The file type of a manifest item is auto-determined by the file extension. The pattern matching in PreloadJS\n\t * should handle the majority of standard file and url formats, and works with common file extensions. If you have\n\t * either a non-standard file extension, or are serving the file using a proxy script, then you can pass in a\n\t * <code>type</code> property with any manifest item.\n\t *\n\t *      queue.loadFile({src:\"path/to/myFile.mp3x\", type:createjs.AbstractLoader.SOUND});\n\t *\n\t *      // Note that PreloadJS will not read a file extension from the query string\n\t *      queue.loadFile({src:\"http://server.com/proxy?file=image.jpg\", type:createjs.AbstractLoader.IMAGE});\n\t *\n\t * Supported types are defined on the {{#crossLink \"AbstractLoader\"}}{{/crossLink}} class, and include:\n\t * <ul>\n\t *     <li>{{#crossLink \"AbstractLoader/BINARY:property\"}}{{/crossLink}}: Raw binary data via XHR</li>\n\t *     <li>{{#crossLink \"AbstractLoader/CSS:property\"}}{{/crossLink}}: CSS files</li>\n\t *     <li>{{#crossLink \"AbstractLoader/IMAGE:property\"}}{{/crossLink}}: Common image formats</li>\n\t *     <li>{{#crossLink \"AbstractLoader/JAVASCRIPT:property\"}}{{/crossLink}}: JavaScript files</li>\n\t *     <li>{{#crossLink \"AbstractLoader/JSON:property\"}}{{/crossLink}}: JSON data</li>\n\t *     <li>{{#crossLink \"AbstractLoader/JSONP:property\"}}{{/crossLink}}: JSON files cross-domain</li>\n\t *     <li>{{#crossLink \"AbstractLoader/MANIFEST:property\"}}{{/crossLink}}: A list of files to load in JSON format, see\n\t *     {{#crossLink \"AbstractLoader/loadManifest\"}}{{/crossLink}}</li>\n\t *     <li>{{#crossLink \"AbstractLoader/SOUND:property\"}}{{/crossLink}}: Audio file formats</li>\n\t *     <li>{{#crossLink \"AbstractLoader/SPRITESHEET:property\"}}{{/crossLink}}: JSON SpriteSheet definitions. This\n\t *     will also load sub-images, and provide a {{#crossLink \"SpriteSheet\"}}{{/crossLink}} instance.</li>\n\t *     <li>{{#crossLink \"AbstractLoader/SVG:property\"}}{{/crossLink}}: SVG files</li>\n\t *     <li>{{#crossLink \"AbstractLoader/TEXT:property\"}}{{/crossLink}}: Text files - XHR only</li>\n     *     <li>{{#crossLink \"AbstractLoader/VIDEO:property\"}}{{/crossLink}}: Video objects</li>\n\t *     <li>{{#crossLink \"AbstractLoader/XML:property\"}}{{/crossLink}}: XML data</li>\n\t * </ul>\n\t *\n\t * <em>Note: Loader types used to be defined on LoadQueue, but have been moved to AbstractLoader for better\n\t * portability of loader classes, which can be used individually now. The properties on LoadQueue still exist, but\n\t * are deprecated.</em>\n\t *\n\t * <b>Handling Results</b><br />\n\t * When a file is finished downloading, a {{#crossLink \"LoadQueue/fileload:event\"}}{{/crossLink}} event is\n\t * dispatched. In an example above, there is an event listener snippet for fileload. Loaded files are usually a\n\t * formatted object that can be used immediately, including:\n\t * <ul>\n\t *     <li>Binary: The binary loaded result</li>\n\t *     <li>CSS: A &lt;link /&gt; tag</li>\n\t *     <li>Image: An &lt;img /&gt; tag</li>\n\t *     <li>JavaScript: A &lt;script /&gt; tag</li>\n\t *     <li>JSON/JSONP: A formatted JavaScript Object</li>\n\t *     <li>Manifest: A JavaScript object.\n\t *     <li>Sound: An &lt;audio /&gt; tag</a>\n\t *     <li>SpriteSheet: A {{#crossLink \"SpriteSheet\"}}{{/crossLink}} instance, containing loaded images.\n\t *     <li>SVG: An &lt;object /&gt; tag</li>\n\t *     <li>Text: Raw text</li>\n     *     <li>Video: A Video DOM node</li>\n\t *     <li>XML: An XML DOM node</li>\n\t * </ul>\n\t *\n\t *      function handleFileLoad(event) {\n\t *          var item = event.item; // A reference to the item that was passed in to the LoadQueue\n\t *          var type = item.type;\n\t *\n\t *          // Add any images to the page body.\n\t *          if (type == createjs.LoadQueue.IMAGE) {\n\t *              document.body.appendChild(event.result);\n\t *          }\n\t *      }\n\t *\n\t * At any time after the file has been loaded (usually after the queue has completed), any result can be looked up\n\t * via its \"id\" using {{#crossLink \"LoadQueue/getResult\"}}{{/crossLink}}. If no id was provided, then the\n\t * \"src\" or file path can be used instead, including the `path` defined by a manifest, but <strong>not including</strong>\n\t * a base path defined on the LoadQueue. It is recommended to always pass an id if you want to look up content.\n\t *\n\t *      var image = queue.getResult(\"image\");\n\t *      document.body.appendChild(image);\n\t *\n\t * Raw loaded content can be accessed using the <code>rawResult</code> property of the {{#crossLink \"LoadQueue/fileload:event\"}}{{/crossLink}}\n\t * event, or can be looked up using {{#crossLink \"LoadQueue/getResult\"}}{{/crossLink}}, passing `true` as the 2nd\n\t * argument. This is only applicable for content that has been parsed for the browser, specifically: JavaScript,\n\t * CSS, XML, SVG, and JSON objects, or anything loaded with XHR.\n\t *\n\t *      var image = queue.getResult(\"image\", true); // load the binary image data loaded with XHR.\n\t *\n\t * <b>Plugins</b><br />\n\t * LoadQueue has a simple plugin architecture to help process and preload content. For example, to preload audio,\n\t * make sure to install the <a href=\"http://soundjs.com\">SoundJS</a> Sound class, which will help load HTML audio,\n\t * Flash audio, and WebAudio files. This should be installed <strong>before</strong> loading any audio files.\n\t *\n\t *      queue.installPlugin(createjs.Sound);\n\t *\n\t * <h4>Known Browser Issues</h4>\n\t * <ul>\n\t *     <li>Browsers without audio support can not load audio files.</li>\n\t *     <li>Safari on Mac OS X can only play HTML audio if QuickTime is installed</li>\n\t *     <li>HTML Audio tags will only download until their <code>canPlayThrough</code> event is fired. Browsers other\n\t *     than Chrome will continue to download in the background.</li>\n\t *     <li>When loading scripts using tags, they are automatically added to the document.</li>\n\t *     <li>Scripts loaded via XHR may not be properly inspectable with browser tools.</li>\n\t *     <li>IE6 and IE7 (and some other browsers) may not be able to load XML, Text, or JSON, since they require\n\t *     XHR to work.</li>\n\t *     <li>Content loaded via tags will not show progress, and will continue to download in the background when\n\t *     canceled, although no events will be dispatched.</li>\n\t * </ul>\n\t *\n\t * @class LoadQueue\n\t * @param {Boolean} [preferXHR=true] Determines whether the preload instance will favor loading with XHR (XML HTTP\n\t * Requests), or HTML tags. When this is `false`, the queue will use tag loading when possible, and fall back on XHR\n\t * when necessary.\n\t * @param {String} [basePath=\"\"] A path that will be prepended on to the source parameter of all items in the queue\n\t * before they are loaded.  Sources beginning with a protocol such as `http://` or a relative path such as `../`\n\t * will not receive a base path.\n\t * @param {String|Boolean} [crossOrigin=\"\"] An optional flag to support images loaded from a CORS-enabled server. To\n\t * use it, set this value to `true`, which will default the crossOrigin property on images to \"Anonymous\". Any\n\t * string value will be passed through, but only \"\" and \"Anonymous\" are recommended. <strong>Note: The crossOrigin\n\t * parameter is deprecated. Use LoadItem.crossOrigin instead</strong>\n\t *\n\t * @constructor\n\t * @extends AbstractLoader\n\t */\n\tfunction LoadQueue (preferXHR, basePath, crossOrigin) {\n\t\tthis.AbstractLoader_constructor();\n\n\t\t/**\n\t\t * An array of the plugins registered using {{#crossLink \"LoadQueue/installPlugin\"}}{{/crossLink}}.\n\t\t * @property _plugins\n\t\t * @type {Array}\n\t\t * @private\n\t\t * @since 0.6.1\n\t\t */\n\t\tthis._plugins = [];\n\n\t\t/**\n\t\t * An object hash of callbacks that are fired for each file type before the file is loaded, giving plugins the\n\t\t * ability to override properties of the load. Please see the {{#crossLink \"LoadQueue/installPlugin\"}}{{/crossLink}}\n\t\t * method for more information.\n\t\t * @property _typeCallbacks\n\t\t * @type {Object}\n\t\t * @private\n\t\t */\n\t\tthis._typeCallbacks = {};\n\n\t\t/**\n\t\t * An object hash of callbacks that are fired for each file extension before the file is loaded, giving plugins the\n\t\t * ability to override properties of the load. Please see the {{#crossLink \"LoadQueue/installPlugin\"}}{{/crossLink}}\n\t\t * method for more information.\n\t\t * @property _extensionCallbacks\n\t\t * @type {null}\n\t\t * @private\n\t\t */\n\t\tthis._extensionCallbacks = {};\n\n\t\t/**\n\t\t * The next preload queue to process when this one is complete. If an error is thrown in the current queue, and\n\t\t * {{#crossLink \"LoadQueue/stopOnError:property\"}}{{/crossLink}} is `true`, the next queue will not be processed.\n\t\t * @property next\n\t\t * @type {LoadQueue}\n\t\t * @default null\n\t\t */\n\t\tthis.next = null;\n\n\t\t/**\n\t\t * Ensure loaded scripts \"complete\" in the order they are specified. Loaded scripts are added to the document head\n\t\t * once they are loaded. Scripts loaded via tags will load one-at-a-time when this property is `true`, whereas\n\t\t * scripts loaded using XHR can load in any order, but will \"finish\" and be added to the document in the order\n\t\t * specified.\n\t\t *\n\t\t * Any items can be set to load in order by setting the {{#crossLink \"maintainOrder:property\"}}{{/crossLink}}\n\t\t * property on the load item, or by ensuring that only one connection can be open at a time using\n\t\t * {{#crossLink \"LoadQueue/setMaxConnections\"}}{{/crossLink}}. Note that when the `maintainScriptOrder` property\n\t\t * is set to `true`, scripts items are automatically set to `maintainOrder=true`, and changing the\n\t\t * `maintainScriptOrder` to `false` during a load will not change items already in a queue.\n\t\t *\n\t\t * <h4>Example</h4>\n\t\t *\n\t\t *      var queue = new createjs.LoadQueue();\n\t\t *      queue.setMaxConnections(3); // Set a higher number to load multiple items at once\n\t\t *      queue.maintainScriptOrder = true; // Ensure scripts are loaded in order\n\t\t *      queue.loadManifest([\n\t\t *          \"script1.js\",\n\t\t *          \"script2.js\",\n\t\t *          \"image.png\", // Load any time\n\t\t *          {src: \"image2.png\", maintainOrder: true} // Will wait for script2.js\n\t\t *          \"image3.png\",\n\t\t *          \"script3.js\" // Will wait for image2.png before loading (or completing when loading with XHR)\n\t\t *      ]);\n\t\t *\n\t\t * @property maintainScriptOrder\n\t\t * @type {Boolean}\n\t\t * @default true\n\t\t */\n\t\tthis.maintainScriptOrder = true;\n\n\t\t/**\n\t\t * Determines if the LoadQueue will stop processing the current queue when an error is encountered.\n\t\t * @property stopOnError\n\t\t * @type {Boolean}\n\t\t * @default false\n\t\t */\n\t\tthis.stopOnError = false;\n\n\t\t/**\n\t\t * The number of maximum open connections that a loadQueue tries to maintain. Please see\n\t\t * {{#crossLink \"LoadQueue/setMaxConnections\"}}{{/crossLink}} for more information.\n\t\t * @property _maxConnections\n\t\t * @type {Number}\n\t\t * @default 1\n\t\t * @private\n\t\t */\n\t\tthis._maxConnections = 1;\n\n\t\t/**\n\t\t * An internal list of all the default Loaders that are included with PreloadJS. Before an item is loaded, the\n\t\t * available loader list is iterated, in the order they are included, and as soon as a loader indicates it can\n\t\t * handle the content, it will be selected. The default loader, ({{#crossLink \"TextLoader\"}}{{/crossLink}} is\n\t\t * last in the list, so it will be used if no other match is found. Typically, loaders will match based on the\n\t\t * {{#crossLink \"LoadItem/type\"}}{{/crossLink}}, which is automatically determined using the file extension of\n\t\t * the {{#crossLink \"LoadItem/src:property\"}}{{/crossLink}}.\n\t\t *\n\t\t * Loaders can be removed from PreloadJS by simply not including them.\n\t\t *\n\t\t * Custom loaders installed using {{#crossLink \"registerLoader\"}}{{/crossLink}} will be prepended to this list\n\t\t * so that they are checked first.\n\t\t * @property _availableLoaders\n\t\t * @type {Array}\n\t\t * @private\n\t\t * @since 0.6.0\n\t\t */\n\t\tthis._availableLoaders = [\n\t\t\tcreatejs.ImageLoader,\n\t\t\tcreatejs.JavaScriptLoader,\n\t\t\tcreatejs.CSSLoader,\n\t\t\tcreatejs.JSONLoader,\n\t\t\tcreatejs.JSONPLoader,\n\t\t\tcreatejs.SoundLoader,\n\t\t\tcreatejs.ManifestLoader,\n\t\t\tcreatejs.SpriteSheetLoader,\n\t\t\tcreatejs.XMLLoader,\n\t\t\tcreatejs.SVGLoader,\n\t\t\tcreatejs.BinaryLoader,\n\t\t\tcreatejs.VideoLoader,\n\t\t\tcreatejs.TextLoader\n\t\t];\n\n\t\t/**\n\t\t * The number of built in loaders, so they can't be removed by {{#crossLink \"unregisterLoader\"}}{{/crossLink}.\n\t\t\t\t * @property _defaultLoaderLength\n\t\t * @type {Number}\n\t\t * @private\n\t\t * @since 0.6.0\n\t\t */\n\t\tthis._defaultLoaderLength = this._availableLoaders.length;\n\n\t\tthis.init(preferXHR, basePath, crossOrigin);\n\t}\n\n\tvar p = createjs.extend(LoadQueue, createjs.AbstractLoader);\n\tvar s = LoadQueue;\n\n\t/**\n\t * <strong>REMOVED</strong>. Removed in favor of using `MySuperClass_constructor`.\n\t * See {{#crossLink \"Utility Methods/extend\"}}{{/crossLink}} and {{#crossLink \"Utility Methods/promote\"}}{{/crossLink}}\n\t * for details.\n\t *\n\t * There is an inheritance tutorial distributed with EaselJS in /tutorials/Inheritance.\n\t *\n\t * @method initialize\n\t * @protected\n\t * @deprecated\n\t */\n\t// p.initialize = function() {}; // searchable for devs wondering where it is.\n\n\t/**\n\t * An internal initialization method, which is used for initial set up, but also to reset the LoadQueue.\n\t * @method init\n\t * @param preferXHR\n\t * @param basePath\n\t * @param crossOrigin\n\t * @private\n\t */\n\tp.init = function (preferXHR, basePath, crossOrigin) {\n\n\t\t// public properties\n\t\t/**\n\t\t * @property useXHR\n\t\t * @type {Boolean}\n\t\t * @readonly\n\t\t * @default true\n\t\t * @deprecated Use preferXHR instead.\n\t\t */\n\t\tthis.useXHR = true;\n\n\t\t/**\n\t\t * Try and use XMLHttpRequest (XHR) when possible. Note that LoadQueue will default to tag loading or XHR\n\t\t * loading depending on the requirements for a media type. For example, HTML audio can not be loaded with XHR,\n\t\t * and plain text can not be loaded with tags, so it will default the the correct type instead of using the\n\t\t * user-defined type.\n\t\t * @type {Boolean}\n\t\t * @default true\n\t\t * @since 0.6.0\n\t\t */\n\t\tthis.preferXHR = true; //TODO: Get/Set\n\t\tthis._preferXHR = true;\n\t\tthis.setPreferXHR(preferXHR);\n\n\t\t// protected properties\n\t\t/**\n\t\t * Whether the queue is currently paused or not.\n\t\t * @property _paused\n\t\t * @type {boolean}\n\t\t * @private\n\t\t */\n\t\tthis._paused = false;\n\n\t\t/**\n\t\t * A path that will be prepended on to the item's {{#crossLink \"LoadItem/src:property\"}}{{/crossLink}}. The\n\t\t * `_basePath` property will only be used if an item's source is relative, and does not include a protocol such\n\t\t * as `http://`, or a relative path such as `../`.\n\t\t * @property _basePath\n\t\t * @type {String}\n\t\t * @private\n\t\t * @since 0.3.1\n\t\t */\n\t\tthis._basePath = basePath;\n\n\t\t/**\n\t\t * An optional flag to set on images that are loaded using PreloadJS, which enables CORS support. Images loaded\n\t\t * cross-domain by servers that support CORS require the crossOrigin flag to be loaded and interacted with by\n\t\t * a canvas. When loading locally, or with a server with no CORS support, this flag can cause other security issues,\n\t\t * so it is recommended to only set it if you are sure the server supports it. Currently, supported values are \"\"\n\t\t * and \"Anonymous\".\n\t\t * @property _crossOrigin\n\t\t * @type {String}\n\t\t * @default \"\"\n\t\t * @private\n\t\t * @since 0.4.1\n\t\t */\n\t\tthis._crossOrigin = crossOrigin;\n\n\t\t/**\n\t\t * Determines if the loadStart event was dispatched already. This event is only fired one time, when the first\n\t\t * file is requested.\n\t\t * @property _loadStartWasDispatched\n\t\t * @type {Boolean}\n\t\t * @default false\n\t\t * @private\n\t\t */\n\t\tthis._loadStartWasDispatched = false;\n\n\t\t/**\n\t\t * Determines if there is currently a script loading. This helps ensure that only a single script loads at once when\n\t\t * using a script tag to do preloading.\n\t\t * @property _currentlyLoadingScript\n\t\t * @type {Boolean}\n\t\t * @private\n\t\t */\n\t\tthis._currentlyLoadingScript = null;\n\n\t\t/**\n\t\t * An array containing the currently downloading files.\n\t\t * @property _currentLoads\n\t\t * @type {Array}\n\t\t * @private\n\t\t */\n\t\tthis._currentLoads = [];\n\n\t\t/**\n\t\t * An array containing the queued items that have not yet started downloading.\n\t\t * @property _loadQueue\n\t\t * @type {Array}\n\t\t * @private\n\t\t */\n\t\tthis._loadQueue = [];\n\n\t\t/**\n\t\t * An array containing downloads that have not completed, so that the LoadQueue can be properly reset.\n\t\t * @property _loadQueueBackup\n\t\t * @type {Array}\n\t\t * @private\n\t\t */\n\t\tthis._loadQueueBackup = [];\n\n\t\t/**\n\t\t * An object hash of items that have finished downloading, indexed by the {{#crossLink \"LoadItem\"}}{{/crossLink}}\n\t\t * id.\n\t\t * @property _loadItemsById\n\t\t * @type {Object}\n\t\t * @private\n\t\t */\n\t\tthis._loadItemsById = {};\n\n\t\t/**\n\t\t * An object hash of items that have finished downloading, indexed by {{#crossLink \"LoadItem\"}}{{/crossLink}}\n\t\t * source.\n\t\t * @property _loadItemsBySrc\n\t\t * @type {Object}\n\t\t * @private\n\t\t */\n\t\tthis._loadItemsBySrc = {};\n\n\t\t/**\n\t\t * An object hash of loaded items, indexed by the ID of the {{#crossLink \"LoadItem\"}}{{/crossLink}}.\n\t\t * @property _loadedResults\n\t\t * @type {Object}\n\t\t * @private\n\t\t */\n\t\tthis._loadedResults = {};\n\n\t\t/**\n\t\t * An object hash of un-parsed loaded items, indexed by the ID of the {{#crossLink \"LoadItem\"}}{{/crossLink}}.\n\t\t * @property _loadedRawResults\n\t\t * @type {Object}\n\t\t * @private\n\t\t */\n\t\tthis._loadedRawResults = {};\n\n\t\t/**\n\t\t * The number of items that have been requested. This helps manage an overall progress without knowing how large\n\t\t * the files are before they are downloaded. This does not include items inside of loaders such as the\n\t\t * {{#crossLink \"ManifestLoader\"}}{{/crossLink}}.\n\t\t * @property _numItems\n\t\t * @type {Number}\n\t\t * @default 0\n\t\t * @private\n\t\t */\n\t\tthis._numItems = 0;\n\n\t\t/**\n\t\t * The number of items that have completed loaded. This helps manage an overall progress without knowing how large\n\t\t * the files are before they are downloaded.\n\t\t * @property _numItemsLoaded\n\t\t * @type {Number}\n\t\t * @default 0\n\t\t * @private\n\t\t */\n\t\tthis._numItemsLoaded = 0;\n\n\t\t/**\n\t\t * A list of scripts in the order they were requested. This helps ensure that scripts are \"completed\" in the right\n\t\t * order.\n\t\t * @property _scriptOrder\n\t\t * @type {Array}\n\t\t * @private\n\t\t */\n\t\tthis._scriptOrder = [];\n\n\t\t/**\n\t\t * A list of scripts that have been loaded. Items are added to this list as <code>null</code> when they are\n\t\t * requested, contain the loaded item if it has completed, but not been dispatched to the user, and <code>true</true>\n\t\t * once they are complete and have been dispatched.\n\t\t * @property _loadedScripts\n\t\t * @type {Array}\n\t\t * @private\n\t\t */\n\t\tthis._loadedScripts = [];\n\n\t\t/**\n\t\t * The last progress amount. This is used to suppress duplicate progress events.\n\t\t * @property _lastProgress\n\t\t * @type {Number}\n\t\t * @private\n\t\t * @since 0.6.0\n\t\t */\n\t\tthis._lastProgress = NaN;\n\n\t};\n\n// static properties\n\t/**\n\t * The time in milliseconds to assume a load has failed. An {{#crossLink \"AbstractLoader/error:event\"}}{{/crossLink}}\n\t * event is dispatched if the timeout is reached before any data is received.\n\t * @property loadTimeout\n\t * @type {Number}\n\t * @default 8000\n\t * @static\n\t * @since 0.4.1\n\t * @deprecated In favour of {{#crossLink \"LoadItem/LOAD_TIMEOUT_DEFAULT:property}}{{/crossLink}} property.\n\t */\n\ts.loadTimeout = 8000;\n\n\t/**\n\t * The time in milliseconds to assume a load has failed.\n\t * @property LOAD_TIMEOUT\n\t * @type {Number}\n\t * @default 0\n\t * @deprecated in favor of the {{#crossLink \"LoadQueue/loadTimeout:property\"}}{{/crossLink}} property.\n\t */\n\ts.LOAD_TIMEOUT = 0;\n\n// Preload Types\n\t/**\n\t * @property BINARY\n\t * @type {String}\n\t * @default binary\n\t * @static\n\t * @deprecated Use the AbstractLoader {{#crossLink \"AbstractLoader/BINARY:property\"}}{{/crossLink}} instead.\n\t */\n\ts.BINARY = createjs.AbstractLoader.BINARY;\n\n\t/**\n\t * @property CSS\n\t * @type {String}\n\t * @default css\n\t * @static\n\t * @deprecated Use the AbstractLoader {{#crossLink \"AbstractLoader/CSS:property\"}}{{/crossLink}} instead.\n\t */\n\ts.CSS = createjs.AbstractLoader.CSS;\n\n\t/**\n\t * @property IMAGE\n\t * @type {String}\n\t * @default image\n\t * @static\n\t * @deprecated Use the AbstractLoader {{#crossLink \"AbstractLoader/CSS:property\"}}{{/crossLink}} instead.\n\t */\n\ts.IMAGE = createjs.AbstractLoader.IMAGE;\n\n\t/**\n\t * @property JAVASCRIPT\n\t * @type {String}\n\t * @default javascript\n\t * @static\n\t * @deprecated Use the AbstractLoader {{#crossLink \"AbstractLoader/JAVASCRIPT:property\"}}{{/crossLink}} instead.\n\t */\n\ts.JAVASCRIPT = createjs.AbstractLoader.JAVASCRIPT;\n\n\t/**\n\t * @property JSON\n\t * @type {String}\n\t * @default json\n\t * @static\n\t * @deprecated Use the AbstractLoader {{#crossLink \"AbstractLoader/JSON:property\"}}{{/crossLink}} instead.\n\t */\n\ts.JSON = createjs.AbstractLoader.JSON;\n\n\t/**\n\t * @property JSONP\n\t * @type {String}\n\t * @default jsonp\n\t * @static\n\t * @deprecated Use the AbstractLoader {{#crossLink \"AbstractLoader/JSONP:property\"}}{{/crossLink}} instead.\n\t */\n\ts.JSONP = createjs.AbstractLoader.JSONP;\n\n\t/**\n\t * @property MANIFEST\n\t * @type {String}\n\t * @default manifest\n\t * @static\n\t * @since 0.4.1\n\t * @deprecated Use the AbstractLoader {{#crossLink \"AbstractLoader/MANIFEST:property\"}}{{/crossLink}} instead.\n\t */\n\ts.MANIFEST = createjs.AbstractLoader.MANIFEST;\n\n\t/**\n\t * @property SOUND\n\t * @type {String}\n\t * @default sound\n\t * @static\n\t * @deprecated Use the AbstractLoader {{#crossLink \"AbstractLoader/JAVASCRIPT:property\"}}{{/crossLink}} instead.\n\t */\n\ts.SOUND = createjs.AbstractLoader.SOUND;\n\n\t/**\n\t * @property VIDEO\n\t * @type {String}\n\t * @default video\n\t * @static\n\t * @deprecated Use the AbstractLoader {{#crossLink \"AbstractLoader/JAVASCRIPT:property\"}}{{/crossLink}} instead.\n\t */\n\ts.VIDEO = createjs.AbstractLoader.VIDEO;\n\n\t/**\n\t * @property SVG\n\t * @type {String}\n\t * @default svg\n\t * @static\n\t * @deprecated Use the AbstractLoader {{#crossLink \"AbstractLoader/SVG:property\"}}{{/crossLink}} instead.\n\t */\n\ts.SVG = createjs.AbstractLoader.SVG;\n\n\t/**\n\t * @property TEXT\n\t * @type {String}\n\t * @default text\n\t * @static\n\t * @deprecated Use the AbstractLoader {{#crossLink \"AbstractLoader/TEXT:property\"}}{{/crossLink}} instead.\n\t */\n\ts.TEXT = createjs.AbstractLoader.TEXT;\n\n\t/**\n\t * @property XML\n\t * @type {String}\n\t * @default xml\n\t * @static\n\t * @deprecated Use the AbstractLoader {{#crossLink \"AbstractLoader/XML:property\"}}{{/crossLink}} instead.\n\t */\n\ts.XML = createjs.AbstractLoader.XML;\n\n\t/**\n\t * @property POST\n\t * @type {string}\n\t * @deprecated Use the AbstractLoader {{#crossLink \"AbstractLoader/POST:property\"}}{{/crossLink}} instead.\n\t */\n\ts.POST = createjs.AbstractLoader.POST;\n\n\t/**\n\t * @property GET\n\t * @type {string}\n\t * @deprecated Use the AbstractLoader {{#crossLink \"AbstractLoader/GET:property\"}}{{/crossLink}} instead.\n\t */\n\ts.GET = createjs.AbstractLoader.GET;\n\n// events\n\t/**\n\t * This event is fired when an individual file has loaded, and been processed.\n\t * @event fileload\n\t * @param {Object} target The object that dispatched the event.\n\t * @param {String} type The event type.\n\t * @param {Object} item The file item which was specified in the {{#crossLink \"LoadQueue/loadFile\"}}{{/crossLink}}\n\t * or {{#crossLink \"LoadQueue/loadManifest\"}}{{/crossLink}} call. If only a string path or tag was specified, the\n\t * object will contain that value as a `src` property.\n\t * @param {Object} result The HTML tag or parsed result of the loaded item.\n\t * @param {Object} rawResult The unprocessed result, usually the raw text or binary data before it is converted\n\t * to a usable object.\n\t * @since 0.3.0\n\t */\n\n\t/**\n\t * This {{#crossLink \"ProgressEvent\"}}{{/crossLink}} that is fired when an an individual file's progress changes.\n\t * @event fileprogress\n\t * @since 0.3.0\n\t */\n\n\t/**\n\t * This event is fired when an individual file starts to load.\n\t * @event filestart\n\t * @param {Object} The object that dispatched the event.\n\t * @param {String} type The event type.\n\t * @param {Object} item The file item which was specified in the {{#crossLink \"LoadQueue/loadFile\"}}{{/crossLink}}\n\t * or {{#crossLink \"LoadQueue/loadManifest\"}}{{/crossLink}} call. If only a string path or tag was specified, the\n\t * object will contain that value as a property.\n\t */\n\n\t/**\n\t * Although it extends {{#crossLink \"AbstractLoader\"}}{{/crossLink}}, the `initialize` event is never fired from\n\t * a LoadQueue instance.\n\t * @event initialize\n\t * @private\n\t */\n\n// public methods\n\t/**\n\t * Register a custom loaders class. New loaders are given precedence over loaders added earlier and default loaders.\n\t * It is recommended that loaders extend {{#crossLink \"AbstractLoader\"}}{{/crossLink}}. Loaders can only be added\n\t * once, and will be prepended to the list of available loaders.\n\t * @method registerLoader\n\t * @param {Function|AbstractLoader} loader The AbstractLoader class to add.\n\t * @since 0.6.0\n\t */\n\tp.registerLoader = function (loader) {\n\t\tif (!loader || !loader.canLoadItem) {\n\t\t\tthrow new Error(\"loader is of an incorrect type.\");\n\t\t} else if (this._availableLoaders.indexOf(loader) != -1) {\n\t\t\tthrow new Error(\"loader already exists.\"); //LM: Maybe just silently fail here\n\t\t}\n\n\t\tthis._availableLoaders.unshift(loader);\n\t};\n\n\t/**\n\t * Remove a custom loader added using {{#crossLink \"registerLoader\"}}{{/crossLink}}. Only custom loaders can be\n\t * unregistered, the default loaders will always be available.\n\t * @method unregisterLoader\n\t * @param {Function|AbstractLoader} loader The AbstractLoader class to remove\n\t */\n\tp.unregisterLoader = function (loader) {\n\t\tvar idx = this._availableLoaders.indexOf(loader);\n\t\tif (idx != -1 && idx < this._defaultLoaderLength - 1) {\n\t\t\tthis._availableLoaders.splice(idx, 1);\n\t\t}\n\t};\n\n\t/**\n\t * @method setUseXHR\n\t * @param {Boolean} value The new useXHR value to set.\n\t * @return {Boolean} The new useXHR value. If XHR is not supported by the browser, this will return false, even if\n\t * the provided value argument was true.\n\t * @since 0.3.0\n\t * @deprecated use the {{#crossLink \"LoadQueue/preferXHR:property\"}}{{/crossLink}} property, or the\n\t * {{#crossLink \"LoadQueue/setUseXHR\"}}{{/crossLink}} method instead.\n\t */\n\tp.setUseXHR = function (value) {\n\t\treturn this.setPreferXHR(value);\n\t};\n\n\t/**\n\t * Change the {{#crossLink \"preferXHR:property\"}}{{/crossLink}} value. Note that if this is set to `true`, it may\n\t * fail, or be ignored depending on the browser's capabilities and the load type.\n\t * @method setPreferXHR\n\t * @param {Boolean} value\n\t * @returns {Boolean} The value of {{#crossLink \"preferXHR\"}}{{/crossLink}} that was successfully set.\n\t * @since 0.6.0\n\t */\n\tp.setPreferXHR = function (value) {\n\t\t// Determine if we can use XHR. XHR defaults to TRUE, but the browser may not support it.\n\t\t//TODO: Should we be checking for the other XHR types? Might have to do a try/catch on the different types similar to createXHR.\n\t\tthis.preferXHR = (value != false && window.XMLHttpRequest != null);\n\t\treturn this.preferXHR;\n\t};\n\n\t/**\n\t * Stops all queued and loading items, and clears the queue. This also removes all internal references to loaded\n\t * content, and allows the queue to be used again.\n\t * @method removeAll\n\t * @since 0.3.0\n\t */\n\tp.removeAll = function () {\n\t\tthis.remove();\n\t};\n\n\t/**\n\t * Stops an item from being loaded, and removes it from the queue. If nothing is passed, all items are removed.\n\t * This also removes internal references to loaded item(s).\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      queue.loadManifest([\n\t *          {src:\"test.png\", id:\"png\"},\n\t *          {src:\"test.jpg\", id:\"jpg\"},\n\t *          {src:\"test.mp3\", id:\"mp3\"}\n\t *      ]);\n\t *      queue.remove(\"png\"); // Single item by ID\n\t *      queue.remove(\"png\", \"test.jpg\"); // Items as arguments. Mixed id and src.\n\t *      queue.remove([\"test.png\", \"jpg\"]); // Items in an Array. Mixed id and src.\n\t *\n\t * @method remove\n\t * @param {String | Array} idsOrUrls* The id or ids to remove from this queue. You can pass an item, an array of\n\t * items, or multiple items as arguments.\n\t * @since 0.3.0\n\t */\n\tp.remove = function (idsOrUrls) {\n\t\tvar args = null;\n\n\t\tif (idsOrUrls && !Array.isArray(idsOrUrls)) {\n\t\t\targs = [idsOrUrls];\n\t\t} else if (idsOrUrls) {\n\t\t\targs = idsOrUrls;\n\t\t} else if (arguments.length > 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar itemsWereRemoved = false;\n\n\t\t// Destroy everything\n\t\tif (!args) {\n\t\t\tthis.close();\n\t\t\tfor (var n in this._loadItemsById) {\n\t\t\t\tthis._disposeItem(this._loadItemsById[n]);\n\t\t\t}\n\t\t\tthis.init(this.preferXHR, this._basePath);\n\n\t\t\t// Remove specific items\n\t\t} else {\n\t\t\twhile (args.length) {\n\t\t\t\tvar item = args.pop();\n\t\t\t\tvar r = this.getResult(item);\n\n\t\t\t\t//Remove from the main load Queue\n\t\t\t\tfor (i = this._loadQueue.length - 1; i >= 0; i--) {\n\t\t\t\t\tloadItem = this._loadQueue[i].getItem();\n\t\t\t\t\tif (loadItem.id == item || loadItem.src == item) {\n\t\t\t\t\t\tthis._loadQueue.splice(i, 1)[0].cancel();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t//Remove from the backup queue\n\t\t\t\tfor (i = this._loadQueueBackup.length - 1; i >= 0; i--) {\n\t\t\t\t\tloadItem = this._loadQueueBackup[i].getItem();\n\t\t\t\t\tif (loadItem.id == item || loadItem.src == item) {\n\t\t\t\t\t\tthis._loadQueueBackup.splice(i, 1)[0].cancel();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (r) {\n\t\t\t\t\tthis._disposeItem(this.getItem(item));\n\t\t\t\t} else {\n\t\t\t\t\tfor (var i = this._currentLoads.length - 1; i >= 0; i--) {\n\t\t\t\t\t\tvar loadItem = this._currentLoads[i].getItem();\n\t\t\t\t\t\tif (loadItem.id == item || loadItem.src == item) {\n\t\t\t\t\t\t\tthis._currentLoads.splice(i, 1)[0].cancel();\n\t\t\t\t\t\t\titemsWereRemoved = true;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// If this was called during a load, try to load the next item.\n\t\t\tif (itemsWereRemoved) {\n\t\t\t\tthis._loadNext();\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t * Stops all open loads, destroys any loaded items, and resets the queue, so all items can\n\t * be reloaded again by calling {{#crossLink \"AbstractLoader/load\"}}{{/crossLink}}. Items are not removed from the\n\t * queue. To remove items use the {{#crossLink \"LoadQueue/remove\"}}{{/crossLink}} or\n\t * {{#crossLink \"LoadQueue/removeAll\"}}{{/crossLink}} method.\n\t * @method reset\n\t * @since 0.3.0\n\t */\n\tp.reset = function () {\n\t\tthis.close();\n\t\tfor (var n in this._loadItemsById) {\n\t\t\tthis._disposeItem(this._loadItemsById[n]);\n\t\t}\n\n\t\t//Reset the queue to its start state\n\t\tvar a = [];\n\t\tfor (var i = 0, l = this._loadQueueBackup.length; i < l; i++) {\n\t\t\ta.push(this._loadQueueBackup[i].getItem());\n\t\t}\n\n\t\tthis.loadManifest(a, false);\n\t};\n\n\t/**\n\t * Register a plugin. Plugins can map to load types (sound, image, etc), or specific extensions (png, mp3, etc).\n\t * Currently, only one plugin can exist per type/extension.\n\t *\n\t * When a plugin is installed, a <code>getPreloadHandlers()</code> method will be called on it. For more information\n\t * on this method, check out the {{#crossLink \"SamplePlugin/getPreloadHandlers\"}}{{/crossLink}} method in the\n\t * {{#crossLink \"SamplePlugin\"}}{{/crossLink}} class.\n\t *\n\t * Before a file is loaded, a matching plugin has an opportunity to modify the load. If a `callback` is returned\n\t * from the {{#crossLink \"SamplePlugin/getPreloadHandlers\"}}{{/crossLink}} method, it will be invoked first, and its\n\t * result may cancel or modify the item. The callback method can also return a `completeHandler` to be fired when\n\t * the file is loaded, or a `tag` object, which will manage the actual download. For more information on these\n\t * methods, check out the {{#crossLink \"SamplePlugin/preloadHandler\"}}{{/crossLink}} and {{#crossLink \"SamplePlugin/fileLoadHandler\"}}{{/crossLink}}\n\t * methods on the {{#crossLink \"SamplePlugin\"}}{{/crossLink}}.\n\t *\n\t * @method installPlugin\n\t * @param {Function} plugin The plugin class to install.\n\t */\n\tp.installPlugin = function (plugin) {\n\t\tif (plugin == null) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (plugin.getPreloadHandlers != null) {\n\t\t\tthis._plugins.push(plugin);\n\t\t\tvar map = plugin.getPreloadHandlers();\n\t\t\tmap.scope = plugin;\n\n\t\t\tif (map.types != null) {\n\t\t\t\tfor (var i = 0, l = map.types.length; i < l; i++) {\n\t\t\t\t\tthis._typeCallbacks[map.types[i]] = map;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (map.extensions != null) {\n\t\t\t\tfor (i = 0, l = map.extensions.length; i < l; i++) {\n\t\t\t\t\tthis._extensionCallbacks[map.extensions[i]] = map;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t * Set the maximum number of concurrent connections. Note that browsers and servers may have a built-in maximum\n\t * number of open connections, so any additional connections may remain in a pending state until the browser\n\t * opens the connection. When loading scripts using tags, and when {{#crossLink \"LoadQueue/maintainScriptOrder:property\"}}{{/crossLink}}\n\t * is `true`, only one script is loaded at a time due to browser limitations.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      var queue = new createjs.LoadQueue();\n\t *      queue.setMaxConnections(10); // Allow 10 concurrent loads\n\t *\n\t * @method setMaxConnections\n\t * @param {Number} value The number of concurrent loads to allow. By default, only a single connection per LoadQueue\n\t * is open at any time.\n\t */\n\tp.setMaxConnections = function (value) {\n\t\tthis._maxConnections = value;\n\t\tif (!this._paused && this._loadQueue.length > 0) {\n\t\t\tthis._loadNext();\n\t\t}\n\t};\n\n\t/**\n\t * Load a single file. To add multiple files at once, use the {{#crossLink \"LoadQueue/loadManifest\"}}{{/crossLink}}\n\t * method.\n\t *\n\t * Files are always appended to the current queue, so this method can be used multiple times to add files.\n\t * To clear the queue first, use the {{#crossLink \"AbstractLoader/close\"}}{{/crossLink}} method.\n\t * @method loadFile\n\t * @param {LoadItem|Object|String} file The file object or path to load. A file can be either\n\t * <ul>\n\t *     <li>A {{#crossLink \"LoadItem\"}}{{/crossLink}} instance</li>\n\t *     <li>An object containing properties defined by {{#crossLink \"LoadItem\"}}{{/crossLink}}</li>\n\t *     <li>OR A string path to a resource. Note that this kind of load item will be converted to a {{#crossLink \"LoadItem\"}}{{/crossLink}}\n\t *     in the background.</li>\n\t * </ul>\n\t * @param {Boolean} [loadNow=true] Kick off an immediate load (true) or wait for a load call (false). The default\n\t * value is true. If the queue is paused using {{#crossLink \"LoadQueue/setPaused\"}}{{/crossLink}}, and the value is\n\t * `true`, the queue will resume automatically.\n\t * @param {String} [basePath] A base path that will be prepended to each file. The basePath argument overrides the\n\t * path specified in the constructor. Note that if you load a manifest using a file of type {{#crossLink \"AbstractLoader/MANIFEST:property\"}}{{/crossLink}},\n\t * its files will <strong>NOT</strong> use the basePath parameter. <strong>The basePath parameter is deprecated.</strong>\n\t * This parameter will be removed in a future version. Please either use the `basePath` parameter in the LoadQueue\n\t * constructor, or a `path` property in a manifest definition.\n\t */\n\tp.loadFile = function (file, loadNow, basePath) {\n\t\tif (file == null) {\n\t\t\tvar event = new createjs.ErrorEvent(\"PRELOAD_NO_FILE\");\n\t\t\tthis._sendError(event);\n\t\t\treturn;\n\t\t}\n\t\tthis._addItem(file, null, basePath);\n\n\t\tif (loadNow !== false) {\n\t\t\tthis.setPaused(false);\n\t\t} else {\n\t\t\tthis.setPaused(true);\n\t\t}\n\t};\n\n\t/**\n\t * Load an array of files. To load a single file, use the {{#crossLink \"LoadQueue/loadFile\"}}{{/crossLink}} method.\n\t * The files in the manifest are requested in the same order, but may complete in a different order if the max\n\t * connections are set above 1 using {{#crossLink \"LoadQueue/setMaxConnections\"}}{{/crossLink}}. Scripts will load\n\t * in the right order as long as {{#crossLink \"LoadQueue/maintainScriptOrder\"}}{{/crossLink}} is true (which is\n\t * default).\n\t *\n\t * Files are always appended to the current queue, so this method can be used multiple times to add files.\n\t * To clear the queue first, use the {{#crossLink \"AbstractLoader/close\"}}{{/crossLink}} method.\n\t * @method loadManifest\n\t * @param {Array|String|Object} manifest An list of files to load. The loadManifest call supports four types of\n\t * manifests:\n\t * <ol>\n\t *     <li>A string path, which points to a manifest file, which is a JSON file that contains a \"manifest\" property,\n\t *     which defines the list of files to load, and can optionally contain a \"path\" property, which will be\n\t *     prepended to each file in the list.</li>\n\t *     <li>An object which defines a \"src\", which is a JSON or JSONP file. A \"callback\" can be defined for JSONP\n\t *     file. The JSON/JSONP file should contain a \"manifest\" property, which defines the list of files to load,\n\t *     and can optionally contain a \"path\" property, which will be prepended to each file in the list.</li>\n\t *     <li>An object which contains a \"manifest\" property, which defines the list of files to load, and can\n\t *     optionally contain a \"path\" property, which will be prepended to each file in the list.</li>\n\t *     <li>An Array of files to load.</li>\n\t * </ol>\n\t *\n\t * Each \"file\" in a manifest can be either:\n\t * <ul>\n\t *     <li>A {{#crossLink \"LoadItem\"}}{{/crossLink}} instance</li>\n\t *     <li>An object containing properties defined by {{#crossLink \"LoadItem\"}}{{/crossLink}}</li>\n\t *     <li>OR A string path to a resource. Note that this kind of load item will be converted to a {{#crossLink \"LoadItem\"}}{{/crossLink}}\n\t *     in the background.</li>\n\t * </ul>\n\t *\n\t * @param {Boolean} [loadNow=true] Kick off an immediate load (true) or wait for a load call (false). The default\n\t * value is true. If the queue is paused using {{#crossLink \"LoadQueue/setPaused\"}}{{/crossLink}} and this value is\n\t * `true`, the queue will resume automatically.\n\t * @param {String} [basePath] A base path that will be prepended to each file. The basePath argument overrides the\n\t * path specified in the constructor. Note that if you load a manifest using a file of type {{#crossLink \"LoadQueue/MANIFEST:property\"}}{{/crossLink}},\n\t * its files will <strong>NOT</strong> use the basePath parameter. <strong>The basePath parameter is deprecated.</strong>\n\t * This parameter will be removed in a future version. Please either use the `basePath` parameter in the LoadQueue\n\t * constructor, or a `path` property in a manifest definition.\n\t */\n\tp.loadManifest = function (manifest, loadNow, basePath) {\n\t\tvar fileList = null;\n\t\tvar path = null;\n\n\t\t// Array-based list of items\n\t\tif (Array.isArray(manifest)) {\n\t\t\tif (manifest.length == 0) {\n\t\t\t\tvar event = new createjs.ErrorEvent(\"PRELOAD_MANIFEST_EMPTY\");\n\t\t\t\tthis._sendError(event);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tfileList = manifest;\n\n\t\t\t// String-based. Only file manifests can be specified this way. Any other types will cause an error when loaded.\n\t\t} else if (typeof(manifest) === \"string\") {\n\t\t\tfileList = [\n\t\t\t\t{\n\t\t\t\t\tsrc: manifest,\n\t\t\t\t\ttype: s.MANIFEST\n\t\t\t\t}\n\t\t\t];\n\n\t\t} else if (typeof(manifest) == \"object\") {\n\n\t\t\t// An object that defines a manifest path\n\t\t\tif (manifest.src !== undefined) {\n\t\t\t\tif (manifest.type == null) {\n\t\t\t\t\tmanifest.type = s.MANIFEST;\n\t\t\t\t} else if (manifest.type != s.MANIFEST) {\n\t\t\t\t\tvar event = new createjs.ErrorEvent(\"PRELOAD_MANIFEST_TYPE\");\n\t\t\t\t\tthis._sendError(event);\n\t\t\t\t}\n\t\t\t\tfileList = [manifest];\n\n\t\t\t\t// An object that defines a manifest\n\t\t\t} else if (manifest.manifest !== undefined) {\n\t\t\t\tfileList = manifest.manifest;\n\t\t\t\tpath = manifest.path;\n\t\t\t}\n\n\t\t\t// Unsupported. This will throw an error.\n\t\t} else {\n\t\t\tvar event = new createjs.ErrorEvent(\"PRELOAD_MANIFEST_NULL\");\n\t\t\tthis._sendError(event);\n\t\t\treturn;\n\t\t}\n\n\t\tfor (var i = 0, l = fileList.length; i < l; i++) {\n\t\t\tthis._addItem(fileList[i], path, basePath);\n\t\t}\n\n\t\tif (loadNow !== false) {\n\t\t\tthis.setPaused(false);\n\t\t} else {\n\t\t\tthis.setPaused(true);\n\t\t}\n\n\t};\n\n\t/**\n\t * Start a LoadQueue that was created, but not automatically started.\n\t * @method load\n\t */\n\tp.load = function () {\n\t\tthis.setPaused(false);\n\t};\n\n\t/**\n\t * Look up a {{#crossLink \"LoadItem\"}}{{/crossLink}} using either the \"id\" or \"src\" that was specified when loading it. Note that if no \"id\" was\n\t * supplied with the load item, the ID will be the \"src\", including a `path` property defined by a manifest. The\n\t * `basePath` will not be part of the ID.\n\t * @method getItem\n\t * @param {String} value The <code>id</code> or <code>src</code> of the load item.\n\t * @return {Object} The load item that was initially requested using {{#crossLink \"LoadQueue/loadFile\"}}{{/crossLink}}\n\t * or {{#crossLink \"LoadQueue/loadManifest\"}}{{/crossLink}}. This object is also returned via the {{#crossLink \"LoadQueue/fileload:event\"}}{{/crossLink}}\n\t * event as the `item` parameter.\n\t */\n\tp.getItem = function (value) {\n\t\treturn this._loadItemsById[value] || this._loadItemsBySrc[value];\n\t};\n\n\t/**\n\t * Look up a loaded result using either the \"id\" or \"src\" that was specified when loading it. Note that if no \"id\"\n\t * was supplied with the load item, the ID will be the \"src\", including a `path` property defined by a manifest. The\n\t * `basePath` will not be part of the ID.\n\t * @method getResult\n\t * @param {String} value The <code>id</code> or <code>src</code> of the load item.\n\t * @param {Boolean} [rawResult=false] Return a raw result instead of a formatted result. This applies to content\n\t * loaded via XHR such as scripts, XML, CSS, and Images. If there is no raw result, the formatted result will be\n\t * returned instead.\n\t * @return {Object} A result object containing the content that was loaded, such as:\n\t * <ul>\n\t *      <li>An image tag (&lt;image /&gt;) for images</li>\n\t *      <li>A script tag for JavaScript (&lt;script /&gt;). Note that scripts are automatically added to the HTML\n\t *      DOM.</li>\n\t *      <li>A style tag for CSS (&lt;style /&gt; or &lt;link &gt;)</li>\n\t *      <li>Raw text for TEXT</li>\n\t *      <li>A formatted JavaScript object defined by JSON</li>\n\t *      <li>An XML document</li>\n\t *      <li>A binary arraybuffer loaded by XHR</li>\n\t *      <li>An audio tag (&lt;audio &gt;) for HTML audio. Note that it is recommended to use SoundJS APIs to play\n\t *      loaded audio. Specifically, audio loaded by Flash and WebAudio will return a loader object using this method\n\t *      which can not be used to play audio back.</li>\n\t * </ul>\n\t * This object is also returned via the {{#crossLink \"LoadQueue/fileload:event\"}}{{/crossLink}} event as the 'item`\n\t * parameter. Note that if a raw result is requested, but not found, the result will be returned instead.\n\t */\n\tp.getResult = function (value, rawResult) {\n\t\tvar item = this._loadItemsById[value] || this._loadItemsBySrc[value];\n\t\tif (item == null) {\n\t\t\treturn null;\n\t\t}\n\t\tvar id = item.id;\n\t\tif (rawResult && this._loadedRawResults[id]) {\n\t\t\treturn this._loadedRawResults[id];\n\t\t}\n\t\treturn this._loadedResults[id];\n\t};\n\n\t/**\n\t * Generate an list of items loaded by this queue.\n\t * @method getItems\n\t * @param {Boolean} loaded Determines if only items that have been loaded should be returned. If false, in-progress\n\t * and failed load items will also be included.\n\t * @returns {Array} A list of objects that have been loaded. Each item includes the {{#crossLink \"LoadItem\"}}{{/crossLink}},\n\t * result, and rawResult.\n\t * @since 0.6.0\n\t */\n\tp.getItems = function (loaded) {\n\t\tvar arr = [];\n\t\tfor (var n in this._loadItemsById) {\n\t\t\tvar item = this._loadItemsById[n];\n\t\t\tvar result = this.getResult(n);\n\t\t\tif (loaded === true && result == null) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tarr.push({\n\t\t\t\titem: item,\n\t\t\t\tresult: result,\n\t\t\t\trawResult: this.getResult(n, true)\n\t\t\t});\n\t\t}\n\t\treturn arr;\n\t};\n\n\t/**\n\t * Pause or resume the current load. Active loads will not be cancelled, but the next items in the queue will not\n\t * be processed when active loads complete. LoadQueues are not paused by default.\n\t *\n\t * Note that if new items are added to the queue using {{#crossLink \"LoadQueue/loadFile\"}}{{/crossLink}} or\n\t * {{#crossLink \"LoadQueue/loadManifest\"}}{{/crossLink}}, a paused queue will be resumed, unless the `loadNow`\n\t * argument is `false`.\n\t * @method setPaused\n\t * @param {Boolean} value Whether the queue should be paused or not.\n\t */\n\tp.setPaused = function (value) {\n\t\tthis._paused = value;\n\t\tif (!this._paused) {\n\t\t\tthis._loadNext();\n\t\t}\n\t};\n\n\t/**\n\t * Close the active queue. Closing a queue completely empties the queue, and prevents any remaining items from\n\t * starting to download. Note that currently any active loads will remain open, and events may be processed.\n\t *\n\t * To stop and restart a queue, use the {{#crossLink \"LoadQueue/setPaused\"}}{{/crossLink}} method instead.\n\t * @method close\n\t */\n\tp.close = function () {\n\t\twhile (this._currentLoads.length) {\n\t\t\tthis._currentLoads.pop().cancel();\n\t\t}\n\t\tthis._scriptOrder.length = 0;\n\t\tthis._loadedScripts.length = 0;\n\t\tthis.loadStartWasDispatched = false;\n\t\tthis._itemCount = 0;\n\t\tthis._lastProgress = NaN;\n\t};\n\n// protected methods\n\t/**\n\t * Add an item to the queue. Items are formatted into a usable object containing all the properties necessary to\n\t * load the content. The load queue is populated with the loader instance that handles preloading, and not the load\n\t * item that was passed in by the user. To look up the load item by id or src, use the {{#crossLink \"LoadQueue.getItem\"}}{{/crossLink}}\n\t * method.\n\t * @method _addItem\n\t * @param {String|Object} value The item to add to the queue.\n\t * @param {String} [path] An optional path prepended to the `src`. The path will only be prepended if the src is\n\t * relative, and does not start with a protocol such as `http://`, or a path like `../`. If the LoadQueue was\n\t * provided a {{#crossLink \"_basePath\"}}{{/crossLink}}, then it will optionally be prepended after.\n\t * @param {String} [basePath] <strong>Deprecated</strong>An optional basePath passed into a {{#crossLink \"LoadQueue/loadManifest\"}}{{/crossLink}}\n\t * or {{#crossLink \"LoadQueue/loadFile\"}}{{/crossLink}} call. This parameter will be removed in a future tagged\n\t * version.\n\t * @private\n\t */\n\tp._addItem = function (value, path, basePath) {\n\t\tvar item = this._createLoadItem(value, path, basePath); // basePath and manifest path are added to the src.\n\t\tif (item == null) {\n\t\t\treturn;\n\t\t} // Sometimes plugins or types should be skipped.\n\t\tvar loader = this._createLoader(item);\n\t\tif (loader != null) {\n\t\t\tif (\"plugins\" in loader) {\n\t\t\t\tloader.plugins = this._plugins;\n\t\t\t}\n\t\t\titem._loader = loader;\n\t\t\tthis._loadQueue.push(loader);\n\t\t\tthis._loadQueueBackup.push(loader);\n\n\t\t\tthis._numItems++;\n\t\t\tthis._updateProgress();\n\n\t\t\t// Only worry about script order when using XHR to load scripts. Tags are only loading one at a time.\n\t\t\tif ((this.maintainScriptOrder\n\t\t\t\t\t&& item.type == createjs.LoadQueue.JAVASCRIPT\n\t\t\t\t\t\t//&& loader instanceof createjs.XHRLoader //NOTE: Have to track all JS files this way\n\t\t\t\t\t)\n\t\t\t\t\t|| item.maintainOrder === true) {\n\t\t\t\tthis._scriptOrder.push(item);\n\t\t\t\tthis._loadedScripts.push(null);\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t * Create a refined {{#crossLink \"LoadItem\"}}{{/crossLink}}, which contains all the required properties. The type of\n\t * item is determined by browser support, requirements based on the file type, and developer settings. For example,\n\t * XHR is only used for file types that support it in new browsers.\n\t *\n\t * Before the item is returned, any plugins registered to handle the type or extension will be fired, which may\n\t * alter the load item.\n\t * @method _createLoadItem\n\t * @param {String | Object | HTMLAudioElement | HTMLImageElement} value The item that needs to be preloaded.\n\t * @param {String} [path] A path to prepend to the item's source. Sources beginning with http:// or similar will\n\t * not receive a path. Since PreloadJS 0.4.1, the src will be modified to include the `path` and {{#crossLink \"LoadQueue/_basePath:property\"}}{{/crossLink}}\n\t * when it is added.\n\t * @param {String} [basePath] <strong>Deprectated</strong> A base path to prepend to the items source in addition to\n\t * the path argument.\n\t * @return {Object} The loader instance that will be used.\n\t * @private\n\t */\n\tp._createLoadItem = function (value, path, basePath) {\n\t\tvar item = createjs.LoadItem.create(value);\n\t\tif (item == null) {\n\t\t\treturn null;\n\t\t}\n\n\t\tvar bp = \"\"; // Store the generated basePath\n\t\tvar useBasePath = basePath || this._basePath;\n\n\t\tif (item.src instanceof Object) {\n\t\t\tif (!item.type) {\n\t\t\t\treturn null;\n\t\t\t} // the the src is an object, type is required to pass off to plugin\n\t\t\tif (path) {\n\t\t\t\tbp = path;\n\t\t\t\tvar pathMatch = createjs.RequestUtils.parseURI(path);\n\t\t\t\t// Also append basePath\n\t\t\t\tif (useBasePath != null && !pathMatch.absolute && !pathMatch.relative) {\n\t\t\t\t\tbp = useBasePath + bp;\n\t\t\t\t}\n\t\t\t} else if (useBasePath != null) {\n\t\t\t\tbp = useBasePath;\n\t\t\t}\n\t\t} else {\n\t\t\t// Determine Extension, etc.\n\t\t\tvar match = createjs.RequestUtils.parseURI(item.src);\n\t\t\tif (match.extension) {\n\t\t\t\titem.ext = match.extension;\n\t\t\t}\n\t\t\tif (item.type == null) {\n\t\t\t\titem.type = createjs.RequestUtils.getTypeByExtension(item.ext);\n\t\t\t}\n\n\t\t\t// Inject path & basePath\n\t\t\tvar autoId = item.src;\n\t\t\tif (!match.absolute && !match.relative) {\n\t\t\t\tif (path) {\n\t\t\t\t\tbp = path;\n\t\t\t\t\tvar pathMatch = createjs.RequestUtils.parseURI(path);\n\t\t\t\t\tautoId = path + autoId;\n\t\t\t\t\t// Also append basePath\n\t\t\t\t\tif (useBasePath != null && !pathMatch.absolute && !pathMatch.relative) {\n\t\t\t\t\t\tbp = useBasePath + bp;\n\t\t\t\t\t}\n\t\t\t\t} else if (useBasePath != null) {\n\t\t\t\t\tbp = useBasePath;\n\t\t\t\t}\n\t\t\t}\n\t\t\titem.src = bp + item.src;\n\t\t}\n\t\titem.path = bp;\n\n\t\t// If there's no id, set one now.\n\t\tif (item.id === undefined || item.id === null || item.id === \"\") {\n\t\t\titem.id = autoId;\n\t\t}\n\n\t\t// Give plugins a chance to modify the loadItem:\n\t\tvar customHandler = this._typeCallbacks[item.type] || this._extensionCallbacks[item.ext];\n\t\tif (customHandler) {\n\t\t\t// Plugins are now passed both the full source, as well as a combined path+basePath (appropriately)\n\t\t\tvar result = customHandler.callback.call(customHandler.scope, item, this);\n\n\t\t\t// The plugin will handle the load, or has canceled it. Ignore it.\n\t\t\tif (result === false) {\n\t\t\t\treturn null;\n\n\t\t\t\t// Load as normal:\n\t\t\t} else if (result === true) {\n\t\t\t\t// Do Nothing\n\n\t\t\t\t// Result is a loader class:\n\t\t\t} else if (result != null) {\n\t\t\t\titem._loader = result;\n\t\t\t}\n\n\t\t\t// Update the extension in case the type changed:\n\t\t\tmatch = createjs.RequestUtils.parseURI(item.src);\n\t\t\tif (match.extension != null) {\n\t\t\t\titem.ext = match.extension;\n\t\t\t}\n\t\t}\n\n\t\t// Store the item for lookup. This also helps clean-up later.\n\t\tthis._loadItemsById[item.id] = item;\n\t\tthis._loadItemsBySrc[item.src] = item;\n\n\t\tif (item.crossOrigin == null) {\n\t\t\titem.crossOrigin = this._crossOrigin;\n\t\t}\n\n\t\treturn item;\n\t};\n\n\t/**\n\t * Create a loader for a load item.\n\t * @method _createLoader\n\t * @param {Object} item A formatted load item that can be used to generate a loader.\n\t * @return {AbstractLoader} A loader that can be used to load content.\n\t * @private\n\t */\n\tp._createLoader = function (item) {\n\t\tif (item._loader != null) { // A plugin already specified a loader\n\t\t\treturn item._loader;\n\t\t}\n\n\t\t// Initially, try and use the provided/supported XHR mode:\n\t\tvar preferXHR = this.preferXHR;\n\n\t\tfor (var i = 0; i < this._availableLoaders.length; i++) {\n\t\t\tvar loader = this._availableLoaders[i];\n\t\t\tif (loader && loader.canLoadItem(item)) {\n\t\t\t\treturn new loader(item, preferXHR);\n\t\t\t}\n\t\t}\n\n\t\t// TODO: Log error (requires createjs.log)\n\t\treturn null;\n\t};\n\n\t/**\n\t * Load the next item in the queue. If the queue is empty (all items have been loaded), then the complete event\n\t * is processed. The queue will \"fill up\" any empty slots, up to the max connection specified using\n\t * {{#crossLink \"LoadQueue.setMaxConnections\"}}{{/crossLink}} method. The only exception is scripts that are loaded\n\t * using tags, which have to be loaded one at a time to maintain load order.\n\t * @method _loadNext\n\t * @private\n\t */\n\tp._loadNext = function () {\n\t\tif (this._paused) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Only dispatch loadstart event when the first file is loaded.\n\t\tif (!this._loadStartWasDispatched) {\n\t\t\tthis._sendLoadStart();\n\t\t\tthis._loadStartWasDispatched = true;\n\t\t}\n\n\t\t// The queue has completed.\n\t\tif (this._numItems == this._numItemsLoaded) {\n\t\t\tthis.loaded = true;\n\t\t\tthis._sendComplete();\n\n\t\t\t// Load the next queue, if it has been defined.\n\t\t\tif (this.next && this.next.load) {\n\t\t\t\tthis.next.load();\n\t\t\t}\n\t\t} else {\n\t\t\tthis.loaded = false;\n\t\t}\n\n\t\t// Must iterate forwards to load in the right order.\n\t\tfor (var i = 0; i < this._loadQueue.length; i++) {\n\t\t\tif (this._currentLoads.length >= this._maxConnections) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tvar loader = this._loadQueue[i];\n\n\t\t\t// Determine if we should be only loading one tag-script at a time:\n\t\t\t// Note: maintainOrder items don't do anything here because we can hold onto their loaded value\n\t\t\tif (!this._canStartLoad(loader)) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tthis._loadQueue.splice(i, 1);\n\t\t\ti--;\n\t\t\tthis._loadItem(loader);\n\t\t}\n\t};\n\n\t/**\n\t * Begin loading an item. Event listeners are not added to the loaders until the load starts.\n\t * @method _loadItem\n\t * @param {AbstractLoader} loader The loader instance to start. Currently, this will be an XHRLoader or TagLoader.\n\t * @private\n\t */\n\tp._loadItem = function (loader) {\n\t\tloader.on(\"fileload\", this._handleFileLoad, this);\n\t\tloader.on(\"progress\", this._handleProgress, this);\n\t\tloader.on(\"complete\", this._handleFileComplete, this);\n\t\tloader.on(\"error\", this._handleError, this);\n\t\tloader.on(\"fileerror\", this._handleFileError, this);\n\t\tthis._currentLoads.push(loader);\n\t\tthis._sendFileStart(loader.getItem());\n\t\tloader.load();\n\t};\n\n\t/**\n\t * The callback that is fired when a loader loads a file. This enables loaders like {{#crossLink \"ManifestLoader\"}}{{/crossLink}}\n\t * to maintain internal queues, but for this queue to dispatch the {{#crossLink \"fileload:event\"}}{{/crossLink}}\n\t * events.\n\t * @param {Event} event The {{#crossLink \"AbstractLoader/fileload:event\"}}{{/crossLink}} event from the loader.\n\t * @private\n\t * @since 0.6.0\n\t */\n\tp._handleFileLoad = function (event) {\n\t\tevent.target = null;\n\t\tthis.dispatchEvent(event);\n\t};\n\n\t/**\n\t * The callback that is fired when a loader encounters an error from an internal file load operation. This enables\n\t * loaders like M\n\t * @param event\n\t * @private\n\t */\n\tp._handleFileError = function (event) {\n\t\tvar newEvent = new createjs.ErrorEvent(\"FILE_LOAD_ERROR\", null, event.item);\n\t\tthis._sendError(newEvent);\n\t};\n\n\t/**\n\t * The callback that is fired when a loader encounters an error. The queue will continue loading unless {{#crossLink \"LoadQueue/stopOnError:property\"}}{{/crossLink}}\n\t * is set to `true`.\n\t * @method _handleError\n\t * @param {ErrorEvent} event The error event, containing relevant error information.\n\t * @private\n\t */\n\tp._handleError = function (event) {\n\t\tvar loader = event.target;\n\t\tthis._numItemsLoaded++;\n\n\t\tthis._finishOrderedItem(loader, true);\n\t\tthis._updateProgress();\n\n\t\tvar newEvent = new createjs.ErrorEvent(\"FILE_LOAD_ERROR\", null, loader.getItem());\n\t\t// TODO: Propagate actual error message.\n\n\t\tthis._sendError(newEvent);\n\n\t\tif (!this.stopOnError) {\n\t\t\tthis._removeLoadItem(loader);\n\t\t\tthis._cleanLoadItem(loader);\n\t\t\tthis._loadNext();\n\t\t} else {\n\t\t\tthis.setPaused(true);\n\t\t}\n\t};\n\n\t/**\n\t * An item has finished loading. We can assume that it is totally loaded, has been parsed for immediate use, and\n\t * is available as the \"result\" property on the load item. The raw text result for a parsed item (such as JSON, XML,\n\t * CSS, JavaScript, etc) is available as the \"rawResult\" property, and can also be looked up using {{#crossLink \"LoadQueue/getResult\"}}{{/crossLink}}.\n\t * @method _handleFileComplete\n\t * @param {Event} event The event object from the loader.\n\t * @private\n\t */\n\tp._handleFileComplete = function (event) {\n\t\tvar loader = event.target;\n\t\tvar item = loader.getItem();\n\n\t\tvar result = loader.getResult();\n\t\tthis._loadedResults[item.id] = result;\n\t\tvar rawResult = loader.getResult(true);\n\t\tif (rawResult != null && rawResult !== result) {\n\t\t\tthis._loadedRawResults[item.id] = rawResult;\n\t\t}\n\n\t\tthis._saveLoadedItems(loader);\n\n\t\t// Remove the load item\n\t\tthis._removeLoadItem(loader);\n\n\t\tif (!this._finishOrderedItem(loader)) {\n\t\t\t// The item was NOT managed, so process it now\n\t\t\tthis._processFinishedLoad(item, loader);\n\t\t}\n\n\t\t// Clean up the load item\n\t\tthis._cleanLoadItem(loader);\n\t};\n\n\t/**\n\t * Some loaders might load additional content, other than the item they were passed (such as {{#crossLink \"ManifestLoader\"}}{{/crossLink}}).\n\t * Any items exposed by the loader using {{#crossLink \"AbstractLoader/getLoadItems\"}}{{/crossLink}} are added to the\n\t * LoadQueue's look-ups, including {{#crossLink \"getItem\"}}{{/crossLink}} and {{#crossLink \"getResult\"}}{{/crossLink}}\n\t * methods.\n\t * @method _saveLoadedItems\n\t * @param {AbstractLoader} loader\n\t * @protected\n\t * @since 0.6.0\n\t */\n\tp._saveLoadedItems = function (loader) {\n\t\t// TODO: Not sure how to handle this. Would be nice to expose the items.\n\t\t// Loaders may load sub-items. This adds them to this queue\n\t\tvar list = loader.getLoadedItems();\n\t\tif (list === null) {\n\t\t\treturn;\n\t\t}\n\n\t\tfor (var i = 0; i < list.length; i++) {\n\t\t\tvar item = list[i].item;\n\n\t\t\t// Store item lookups\n\t\t\tthis._loadItemsBySrc[item.src] = item;\n\t\t\tthis._loadItemsById[item.id] = item;\n\n\t\t\t// Store loaded content\n\t\t\tthis._loadedResults[item.id] = list[i].result;\n\t\t\tthis._loadedRawResults[item.id] = list[i].rawResult;\n\t\t}\n\t};\n\n\t/**\n\t * Flag an item as finished. If the item's order is being managed, then ensure that it is allowed to finish, and if\n\t * so, trigger prior items to trigger as well.\n\t * @method _finishOrderedItem\n\t * @param {AbstractLoader} loader\n\t * @param {Boolean} loadFailed\n\t * @return {Boolean} If the item's order is being managed. This allows the caller to take an alternate\n\t * behaviour if it is.\n\t * @private\n\t */\n\tp._finishOrderedItem = function (loader, loadFailed) {\n\t\tvar item = loader.getItem();\n\n\t\tif ((this.maintainScriptOrder && item.type == createjs.LoadQueue.JAVASCRIPT)\n\t\t\t\t|| item.maintainOrder) {\n\n\t\t\t//TODO: Evaluate removal of the _currentlyLoadingScript\n\t\t\tif (loader instanceof createjs.JavaScriptLoader) {\n\t\t\t\tthis._currentlyLoadingScript = false;\n\t\t\t}\n\n\t\t\tvar index = createjs.indexOf(this._scriptOrder, item);\n\t\t\tif (index == -1) {\n\t\t\t\treturn false;\n\t\t\t} // This loader no longer exists\n\t\t\tthis._loadedScripts[index] = (loadFailed === true) ? true : item;\n\n\t\t\tthis._checkScriptLoadOrder();\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t};\n\n\t/**\n\t * Ensure the scripts load and dispatch in the correct order. When using XHR, scripts are stored in an array in the\n\t * order they were added, but with a \"null\" value. When they are completed, the value is set to the load item,\n\t * and then when they are processed and dispatched, the value is set to `true`. This method simply\n\t * iterates the array, and ensures that any loaded items that are not preceded by a `null` value are\n\t * dispatched.\n\t * @method _checkScriptLoadOrder\n\t * @private\n\t */\n\tp._checkScriptLoadOrder = function () {\n\t\tvar l = this._loadedScripts.length;\n\n\t\tfor (var i = 0; i < l; i++) {\n\t\t\tvar item = this._loadedScripts[i];\n\t\t\tif (item === null) {\n\t\t\t\tbreak;\n\t\t\t} // This is still loading. Do not process further.\n\t\t\tif (item === true) {\n\t\t\t\tcontinue;\n\t\t\t} // This has completed, and been processed. Move on.\n\n\t\t\tvar loadItem = this._loadedResults[item.id];\n\t\t\tif (item.type == createjs.LoadQueue.JAVASCRIPT) {\n\t\t\t\t// Append script tags to the head automatically.\n\t\t\t\tcreatejs.DomUtils.appendToHead(loadItem);\n\t\t\t}\n\n\t\t\tvar loader = item._loader;\n\t\t\tthis._processFinishedLoad(item, loader);\n\t\t\tthis._loadedScripts[i] = true;\n\t\t}\n\t};\n\n\t/**\n\t * A file has completed loading, and the LoadQueue can move on. This triggers the complete event, and kick-starts\n\t * the next item.\n\t * @method _processFinishedLoad\n\t * @param {LoadItem|Object} item\n\t * @param {AbstractLoader} loader\n\t * @protected\n\t */\n\tp._processFinishedLoad = function (item, loader) {\n\t\tthis._numItemsLoaded++;\n\n\t\t// Since LoadQueue needs maintain order, we can't append scripts in the loader.\n\t\t// So we do it here instead. Or in _checkScriptLoadOrder();\n\t\tif (!this.maintainScriptOrder && item.type == createjs.LoadQueue.JAVASCRIPT) {\n\t\t\tvar tag = loader.getTag();\n\t\t\tcreatejs.DomUtils.appendToHead(tag);\n\t\t}\n\n\t\tthis._updateProgress();\n\t\tthis._sendFileComplete(item, loader);\n\t\tthis._loadNext();\n\t};\n\n\t/**\n\t * Ensure items with `maintainOrder=true` that are before the specified item have loaded. This only applies to\n\t * JavaScript items that are being loaded with a TagLoader, since they have to be loaded and completed <strong>before</strong>\n\t * the script can even be started, since it exist in the DOM while loading.\n\t * @method _canStartLoad\n\t * @param {AbstractLoader} loader The loader for the item\n\t * @return {Boolean} Whether the item can start a load or not.\n\t * @private\n\t */\n\tp._canStartLoad = function (loader) {\n\t\tif (!this.maintainScriptOrder || loader.preferXHR) {\n\t\t\treturn true;\n\t\t}\n\t\tvar item = loader.getItem();\n\t\tif (item.type != createjs.LoadQueue.JAVASCRIPT) {\n\t\t\treturn true;\n\t\t}\n\t\tif (this._currentlyLoadingScript) {\n\t\t\treturn false;\n\t\t}\n\n\t\tvar index = this._scriptOrder.indexOf(item);\n\t\tvar i = 0;\n\t\twhile (i < index) {\n\t\t\tvar checkItem = this._loadedScripts[i];\n\t\t\tif (checkItem == null) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\ti++;\n\t\t}\n\t\tthis._currentlyLoadingScript = true;\n\t\treturn true;\n\t};\n\n\t/**\n\t * A load item is completed or was canceled, and needs to be removed from the LoadQueue.\n\t * @method _removeLoadItem\n\t * @param {AbstractLoader} loader A loader instance to remove.\n\t * @private\n\t */\n\tp._removeLoadItem = function (loader) {\n\t\tvar l = this._currentLoads.length;\n\t\tfor (var i = 0; i < l; i++) {\n\t\t\tif (this._currentLoads[i] == loader) {\n\t\t\t\tthis._currentLoads.splice(i, 1);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t * Remove unneeded references from a loader.\n\t *\n\t * @param loader\n\t * @private\n\t */\n\tp._cleanLoadItem = function(loader) {\n\t\tvar item = loader.getItem();\n\t\tif (item) {\n\t\t\tdelete item._loader;\n\t\t}\n\t}\n\n\t/**\n\t * An item has dispatched progress. Propagate that progress, and update the LoadQueue's overall progress.\n\t * @method _handleProgress\n\t * @param {ProgressEvent} event The progress event from the item.\n\t * @private\n\t */\n\tp._handleProgress = function (event) {\n\t\tvar loader = event.target;\n\t\tthis._sendFileProgress(loader.getItem(), loader.progress);\n\t\tthis._updateProgress();\n\t};\n\n\t/**\n\t * Overall progress has changed, so determine the new progress amount and dispatch it. This changes any time an\n\t * item dispatches progress or completes. Note that since we don't always know the actual filesize of items before\n\t * they are loaded. In this case, we define a \"slot\" for each item (1 item in 10 would get 10%), and then append\n\t * loaded progress on top of the already-loaded items.\n\t *\n\t * For example, if 5/10 items have loaded, and item 6 is 20% loaded, the total progress would be:\n\t * <ul>\n\t *      <li>5/10 of the items in the queue (50%)</li>\n\t *      <li>plus 20% of item 6's slot (2%)</li>\n\t *      <li>equals 52%</li>\n\t * </ul>\n\t * @method _updateProgress\n\t * @private\n\t */\n\tp._updateProgress = function () {\n\t\tvar loaded = this._numItemsLoaded / this._numItems; // Fully Loaded Progress\n\t\tvar remaining = this._numItems - this._numItemsLoaded;\n\t\tif (remaining > 0) {\n\t\t\tvar chunk = 0;\n\t\t\tfor (var i = 0, l = this._currentLoads.length; i < l; i++) {\n\t\t\t\tchunk += this._currentLoads[i].progress;\n\t\t\t}\n\t\t\tloaded += (chunk / remaining) * (remaining / this._numItems);\n\t\t}\n\n\t\tif (this._lastProgress != loaded) {\n\t\t\tthis._sendProgress(loaded);\n\t\t\tthis._lastProgress = loaded;\n\t\t}\n\t};\n\n\t/**\n\t * Clean out item results, to free them from memory. Mainly, the loaded item and results are cleared from internal\n\t * hashes.\n\t * @method _disposeItem\n\t * @param {LoadItem|Object} item The item that was passed in for preloading.\n\t * @private\n\t */\n\tp._disposeItem = function (item) {\n\t\tdelete this._loadedResults[item.id];\n\t\tdelete this._loadedRawResults[item.id];\n\t\tdelete this._loadItemsById[item.id];\n\t\tdelete this._loadItemsBySrc[item.src];\n\t};\n\n\t/**\n\t * Dispatch a \"fileprogress\" {{#crossLink \"Event\"}}{{/crossLink}}. Please see the LoadQueue {{#crossLink \"LoadQueue/fileprogress:event\"}}{{/crossLink}}\n\t * event for details on the event payload.\n\t * @method _sendFileProgress\n\t * @param {LoadItem|Object} item The item that is being loaded.\n\t * @param {Number} progress The amount the item has been loaded (between 0 and 1).\n\t * @protected\n\t */\n\tp._sendFileProgress = function (item, progress) {\n\t\tif (this._isCanceled() || this._paused) {\n\t\t\treturn;\n\t\t}\n\t\tif (!this.hasEventListener(\"fileprogress\")) {\n\t\t\treturn;\n\t\t}\n\n\t\t//LM: Rework ProgressEvent to support this?\n\t\tvar event = new createjs.Event(\"fileprogress\");\n\t\tevent.progress = progress;\n\t\tevent.loaded = progress;\n\t\tevent.total = 1;\n\t\tevent.item = item;\n\n\t\tthis.dispatchEvent(event);\n\t};\n\n\t/**\n\t * Dispatch a fileload {{#crossLink \"Event\"}}{{/crossLink}}. Please see the {{#crossLink \"LoadQueue/fileload:event\"}}{{/crossLink}} event for\n\t * details on the event payload.\n\t * @method _sendFileComplete\n\t * @param {LoadItemObject} item The item that is being loaded.\n\t * @param {AbstractLoader} loader\n\t * @protected\n\t */\n\tp._sendFileComplete = function (item, loader) {\n\t\tif (this._isCanceled() || this._paused) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar event = new createjs.Event(\"fileload\");\n\t\tevent.loader = loader;\n\t\tevent.item = item;\n\t\tevent.result = this._loadedResults[item.id];\n\t\tevent.rawResult = this._loadedRawResults[item.id];\n\n\t\t// This calls a handler specified on the actual load item. Currently, the SoundJS plugin uses this.\n\t\tif (item.completeHandler) {\n\t\t\titem.completeHandler(event);\n\t\t}\n\n\t\tthis.hasEventListener(\"fileload\") && this.dispatchEvent(event);\n\t};\n\n\t/**\n\t * Dispatch a filestart {{#crossLink \"Event\"}}{{/crossLink}} immediately before a file starts to load. Please see\n\t * the {{#crossLink \"LoadQueue/filestart:event\"}}{{/crossLink}} event for details on the event payload.\n\t * @method _sendFileStart\n\t * @param {LoadItem|Object} item The item that is being loaded.\n\t * @protected\n\t */\n\tp._sendFileStart = function (item) {\n\t\tvar event = new createjs.Event(\"filestart\");\n\t\tevent.item = item;\n\t\tthis.hasEventListener(\"filestart\") && this.dispatchEvent(event);\n\t};\n\n\tp.toString = function () {\n\t\treturn \"[PreloadJS LoadQueue]\";\n\t};\n\n\tcreatejs.LoadQueue = createjs.promote(LoadQueue, \"AbstractLoader\");\n}());\n\n//##############################################################################\n// TextLoader.js\n//##############################################################################\n\n(function () {\n\t\"use strict\";\n\n\t// constructor\n\t/**\n\t * A loader for Text files.\n\t * @class TextLoader\n\t * @param {LoadItem|Object} loadItem\n\t * @extends AbstractLoader\n\t * @constructor\n\t */\n\tfunction TextLoader(loadItem) {\n\t\tthis.AbstractLoader_constructor(loadItem, true, createjs.AbstractLoader.TEXT);\n\t};\n\n\tvar p = createjs.extend(TextLoader, createjs.AbstractLoader);\n\tvar s = TextLoader;\n\n\t// static methods\n\t/**\n\t * Determines if the loader can load a specific item. This loader loads items that are of type {{#crossLink \"AbstractLoader/TEXT:property\"}}{{/crossLink}},\n\t * but is also the default loader if a file type can not be determined.\n\t * @method canLoadItem\n\t * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\n\t * @returns {Boolean} Whether the loader can load the item.\n\t * @static\n\t */\n\ts.canLoadItem = function (item) {\n\t\treturn item.type == createjs.AbstractLoader.TEXT;\n\t};\n\n\tcreatejs.TextLoader = createjs.promote(TextLoader, \"AbstractLoader\");\n\n}());\n\n//##############################################################################\n// BinaryLoader.js\n//##############################################################################\n\n(function () {\n\t\"use strict\";\n\n\t// constructor\n\t/**\n\t * A loader for binary files. This is useful for loading web audio, or content that requires an ArrayBuffer.\n\t * @class BinaryLoader\n\t * @param {LoadItem|Object} loadItem\n\t * @extends AbstractLoader\n\t * @constructor\n\t */\n\tfunction BinaryLoader(loadItem) {\n\t\tthis.AbstractLoader_constructor(loadItem, true, createjs.AbstractLoader.BINARY);\n\t\tthis.on(\"initialize\", this._updateXHR, this);\n\t};\n\n\tvar p = createjs.extend(BinaryLoader, createjs.AbstractLoader);\n\tvar s = BinaryLoader;\n\n\t// static methods\n\t/**\n\t * Determines if the loader can load a specific item. This loader can only load items that are of type\n\t * {{#crossLink \"AbstractLoader/BINARY:property\"}}{{/crossLink}}\n\t * @method canLoadItem\n\t * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\n\t * @returns {Boolean} Whether the loader can load the item.\n\t * @static\n\t */\n\ts.canLoadItem = function (item) {\n\t\treturn item.type == createjs.AbstractLoader.BINARY;\n\t};\n\n\t// private methods\n\t/**\n\t * Before the item loads, set the response type to \"arraybuffer\"\n\t * @property _updateXHR\n\t * @param {Event} event\n\t * @private\n\t */\n\tp._updateXHR = function (event) {\n\t\tevent.loader.setResponseType(\"arraybuffer\");\n\t};\n\n\tcreatejs.BinaryLoader = createjs.promote(BinaryLoader, \"AbstractLoader\");\n\n}());\n\n//##############################################################################\n// CSSLoader.js\n//##############################################################################\n\n(function () {\n\t\"use strict\";\n\n\t// constructor\n\t/**\n\t * A loader for CSS files.\n\t * @class CSSLoader\n\t * @param {LoadItem|Object} loadItem\n\t * @param {Boolean} preferXHR\n\t * @extends AbstractLoader\n\t * @constructor\n\t */\n\tfunction CSSLoader(loadItem, preferXHR) {\n\t\tthis.AbstractLoader_constructor(loadItem, preferXHR, createjs.AbstractLoader.CSS);\n\n\t\t// public properties\n\t\tthis.resultFormatter = this._formatResult;\n\n\t\t// protected properties\n\t\tthis._tagSrcAttribute = \"href\";\n\n\t\tif (preferXHR) {\n\t\t\tthis._tag = document.createElement(\"style\");\n\t\t} else {\n\t\t\tthis._tag = document.createElement(\"link\");\n\t\t}\n\n\t\tthis._tag.rel = \"stylesheet\";\n\t\tthis._tag.type = \"text/css\";\n\t};\n\n\tvar p = createjs.extend(CSSLoader, createjs.AbstractLoader);\n\tvar s = CSSLoader;\n\n\t// static methods\n\t/**\n\t * Determines if the loader can load a specific item. This loader can only load items that are of type\n\t * {{#crossLink \"AbstractLoader/CSS:property\"}}{{/crossLink}}.\n\t * @method canLoadItem\n\t * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\n\t * @returns {Boolean} Whether the loader can load the item.\n\t * @static\n\t */\n\ts.canLoadItem = function (item) {\n\t\treturn item.type == createjs.AbstractLoader.CSS;\n\t};\n\n\t// protected methods\n\t/**\n\t * The result formatter for CSS files.\n\t * @method _formatResult\n\t * @param {AbstractLoader} loader\n\t * @returns {HTMLLinkElement|HTMLStyleElement}\n\t * @private\n\t */\n\tp._formatResult = function (loader) {\n\t\tif (this._preferXHR) {\n\t\t\tvar tag = loader.getTag();\n\n\t\t\tif (tag.styleSheet) { // IE\n\t\t\t\ttag.styleSheet.cssText = loader.getResult(true);\n\t\t\t} else {\n\t\t\t\tvar textNode = document.createTextNode(loader.getResult(true));\n\t\t\t\ttag.appendChild(textNode);\n\t\t\t}\n\t\t} else {\n\t\t\ttag = this._tag;\n\t\t}\n\n\t\tcreatejs.DomUtils.appendToHead(tag);\n\n\t\treturn tag;\n\t};\n\n\tcreatejs.CSSLoader = createjs.promote(CSSLoader, \"AbstractLoader\");\n\n}());\n\n//##############################################################################\n// ImageLoader.js\n//##############################################################################\n\n(function () {\n\t\"use strict\";\n\n\t// constructor\n\t/**\n\t * A loader for image files.\n\t * @class ImageLoader\n\t * @param {LoadItem|Object} loadItem\n\t * @param {Boolean} preferXHR\n\t * @extends AbstractLoader\n\t * @constructor\n\t */\n\tfunction ImageLoader (loadItem, preferXHR) {\n\t\tthis.AbstractLoader_constructor(loadItem, preferXHR, createjs.AbstractLoader.IMAGE);\n\n\t\t// public properties\n\t\tthis.resultFormatter = this._formatResult;\n\n\t\t// protected properties\n\t\tthis._tagSrcAttribute = \"src\";\n\n\t\t// Check if the preload item is already a tag.\n\t\tif (createjs.RequestUtils.isImageTag(loadItem)) {\n\t\t\tthis._tag = loadItem;\n\t\t} else if (createjs.RequestUtils.isImageTag(loadItem.src)) {\n\t\t\tthis._tag = loadItem.src;\n\t\t} else if (createjs.RequestUtils.isImageTag(loadItem.tag)) {\n\t\t\tthis._tag = loadItem.tag;\n\t\t}\n\n\t\tif (this._tag != null) {\n\t\t\tthis._preferXHR = false;\n\t\t} else {\n\t\t\tthis._tag = document.createElement(\"img\");\n\t\t}\n\n\t\tthis.on(\"initialize\", this._updateXHR, this);\n\t};\n\n\tvar p = createjs.extend(ImageLoader, createjs.AbstractLoader);\n\tvar s = ImageLoader;\n\n\t// static methods\n\t/**\n\t * Determines if the loader can load a specific item. This loader can only load items that are of type\n\t * {{#crossLink \"AbstractLoader/IMAGE:property\"}}{{/crossLink}}.\n\t * @method canLoadItem\n\t * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\n\t * @returns {Boolean} Whether the loader can load the item.\n\t * @static\n\t */\n\ts.canLoadItem = function (item) {\n\t\treturn item.type == createjs.AbstractLoader.IMAGE;\n\t};\n\n\t// public methods\n\tp.load = function () {\n\t\tif (this._tag.src != \"\" && this._tag.complete) {\n\t\t\tthis._sendComplete();\n\t\t\treturn;\n\t\t}\n\n\t\tvar crossOrigin = this._item.crossOrigin;\n\t\tif (crossOrigin == true) { crossOrigin = \"Anonymous\"; }\n\t\tif (crossOrigin != null && !createjs.RequestUtils.isLocal(this._item.src)) {\n\t\t\tthis._tag.crossOrigin = crossOrigin;\n\t\t}\n\n\t\tthis.AbstractLoader_load();\n\t};\n\n\t// protected methods\n\t/**\n\t * Before the item loads, set its mimeType and responseType.\n\t * @property _updateXHR\n\t * @param {Event} event\n\t * @private\n\t */\n\tp._updateXHR = function (event) {\n\t\tevent.loader.mimeType = 'text/plain; charset=x-user-defined-binary';\n\n\t\t// Only exists for XHR\n\t\tif (event.loader.setResponseType) {\n\t\t\tevent.loader.setResponseType(\"blob\");\n\t\t}\n\t};\n\n\t/**\n\t * The result formatter for Image files.\n\t * @method _formatResult\n\t * @param {AbstractLoader} loader\n\t * @returns {HTMLImageElement}\n\t * @private\n\t */\n\tp._formatResult = function (loader) {\n\t\treturn this._formatImage;\n\t};\n\n\t/**\n\t * The asynchronous image formatter function. This is required because images have\n\t * a short delay before they are ready.\n\t * @method _formatImage\n\t * @param {Function} successCallback The method to call when the result has finished formatting\n\t * @param {Function} errorCallback The method to call if an error occurs during formatting\n\t * @private\n\t */\n\tp._formatImage = function (successCallback, errorCallback) {\n\t\tvar tag = this._tag;\n\t\tvar URL = window.URL || window.webkitURL;\n\n\t\tif (!this._preferXHR) {\n\t\t\t//document.body.removeChild(tag);\n\t\t} else if (URL) {\n\t\t\tvar objURL = URL.createObjectURL(this.getResult(true));\n\t\t\ttag.src = objURL;\n\n\t\t\ttag.addEventListener(\"load\", this._cleanUpURL, false);\n\t\t\ttag.addEventListener(\"error\", this._cleanUpURL, false);\n\t\t} else {\n\t\t\ttag.src = this._item.src;\n\t\t}\n\n\t\tif (tag.complete) {\n\t\t\tsuccessCallback(tag);\n\t\t} else {\n            tag.onload = createjs.proxy(function() {\n                successCallback(this._tag);\n            }, this);\n\n            tag.onerror = createjs.proxy(function() {\n                errorCallback(_this._tag);\n            }, this);\n\t\t}\n\t};\n\n\t/**\n\t * Clean up the ObjectURL, the tag is done with it. Note that this function is run\n\t * as an event listener without a proxy/closure, as it doesn't require it - so do not\n\t * include any functionality that requires scope without changing it.\n\t * @method _cleanUpURL\n\t * @param event\n\t * @private\n\t */\n\tp._cleanUpURL = function (event) {\n\t\tvar URL = window.URL || window.webkitURL;\n\t\tURL.revokeObjectURL(event.target.src);\n\t};\n\n\tcreatejs.ImageLoader = createjs.promote(ImageLoader, \"AbstractLoader\");\n\n}());\n\n//##############################################################################\n// JavaScriptLoader.js\n//##############################################################################\n\n(function () {\n\t\"use strict\";\n\n\t// constructor\n\t/**\n\t * A loader for JavaScript files.\n\t * @class JavaScriptLoader\n\t * @param {LoadItem|Object} loadItem\n\t * @param {Boolean} preferXHR\n\t * @extends AbstractLoader\n\t * @constructor\n\t */\n\tfunction JavaScriptLoader(loadItem, preferXHR) {\n\t\tthis.AbstractLoader_constructor(loadItem, preferXHR, createjs.AbstractLoader.JAVASCRIPT);\n\n\t\t// public properties\n\t\tthis.resultFormatter = this._formatResult;\n\n\t\t// protected properties\n\t\tthis._tagSrcAttribute = \"src\";\n\t\tthis.setTag(document.createElement(\"script\"));\n\t};\n\n\tvar p = createjs.extend(JavaScriptLoader, createjs.AbstractLoader);\n\tvar s = JavaScriptLoader;\n\n\t// static methods\n\t/**\n\t * Determines if the loader can load a specific item. This loader can only load items that are of type\n\t * {{#crossLink \"AbstractLoader/JAVASCRIPT:property\"}}{{/crossLink}}\n\t * @method canLoadItem\n\t * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\n\t * @returns {Boolean} Whether the loader can load the item.\n\t * @static\n\t */\n\ts.canLoadItem = function (item) {\n\t\treturn item.type == createjs.AbstractLoader.JAVASCRIPT;\n\t};\n\n\t// protected methods\n\t/**\n\t * The result formatter for JavaScript files.\n\t * @method _formatResult\n\t * @param {AbstractLoader} loader\n\t * @returns {HTMLLinkElement|HTMLStyleElement}\n\t * @private\n\t */\n\tp._formatResult = function (loader) {\n\t\tvar tag = loader.getTag();\n\t\tif (this._preferXHR) {\n\t\t\ttag.text = loader.getResult(true);\n\t\t}\n\t\treturn tag;\n\t};\n\n\tcreatejs.JavaScriptLoader = createjs.promote(JavaScriptLoader, \"AbstractLoader\");\n\n}());\n\n//##############################################################################\n// JSONLoader.js\n//##############################################################################\n\n(function () {\n\t\"use strict\";\n\n\t// constructor\n\t/**\n\t * A loader for JSON files. To load JSON cross-domain, use JSONP and the {{#crossLink \"JSONPLoader\"}}{{/crossLink}}\n\t * instead. To load JSON-formatted manifests, use {{#crossLink \"ManifestLoader\"}}{{/crossLink}}, and to\n\t * load EaselJS SpriteSheets, use {{#crossLink \"SpriteSheetLoader\"}}{{/crossLink}}.\n\t * @class JSONLoader\n\t * @param {LoadItem|Object} loadItem\n\t * @extends AbstractLoader\n\t * @constructor\n\t */\n\tfunction JSONLoader(loadItem) {\n\t\tthis.AbstractLoader_constructor(loadItem, true, createjs.AbstractLoader.JSON);\n\n\t\t// public properties\n\t\tthis.resultFormatter = this._formatResult;\n\t};\n\n\tvar p = createjs.extend(JSONLoader, createjs.AbstractLoader);\n\tvar s = JSONLoader;\n\n\t// static methods\n\t/**\n\t * Determines if the loader can load a specific item. This loader can only load items that are of type\n\t * {{#crossLink \"AbstractLoader/JSON:property\"}}{{/crossLink}}.\n\t * @method canLoadItem\n\t * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\n\t * @returns {Boolean} Whether the loader can load the item.\n\t * @static\n\t */\n\ts.canLoadItem = function (item) {\n\t\treturn item.type == createjs.AbstractLoader.JSON;\n\t};\n\n\t// protected methods\n\t/**\n\t * The result formatter for JSON files.\n\t * @method _formatResult\n\t * @param {AbstractLoader} loader\n\t * @returns {HTMLLinkElement|HTMLStyleElement}\n\t * @private\n\t */\n\tp._formatResult = function (loader) {\n\t\tvar json = null;\n\t\ttry {\n\t\t\tjson = createjs.DataUtils.parseJSON(loader.getResult(true));\n\t\t} catch (e) {\n\t\t\tvar event = new createjs.ErrorEvent(\"JSON_FORMAT\", null, e);\n\t\t\tthis._sendError(event);\n\t\t\treturn e;\n\t\t}\n\n\t\treturn json;\n\t};\n\n\tcreatejs.JSONLoader = createjs.promote(JSONLoader, \"AbstractLoader\");\n\n}());\n\n//##############################################################################\n// JSONPLoader.js\n//##############################################################################\n\n(function () {\n\t\"use strict\";\n\n\t// constructor\n\t/**\n\t * A loader for JSONP files, which are JSON-formatted text files, wrapped in a callback. To load regular JSON\n\t * without a callback use the {{#crossLink \"JSONLoader\"}}{{/crossLink}} instead. To load JSON-formatted manifests,\n\t * use {{#crossLink \"ManifestLoader\"}}{{/crossLink}}, and to load EaselJS SpriteSheets, use\n\t * {{#crossLink \"SpriteSheetLoader\"}}{{/crossLink}}.\n\t *\n\t * JSONP is a format that provides a solution for loading JSON files cross-domain <em>without</em> requiring CORS.\n\t * JSONP files are loaded as JavaScript, and the \"callback\" is executed once they are loaded. The callback in the\n\t * JSONP must match the callback passed to the loadItem.\n\t *\n\t * <h4>Example JSONP</h4>\n\t *\n\t * \t\tcallbackName({\n\t * \t\t\t\"name\": \"value\",\n\t *\t \t\t\"num\": 3,\n\t *\t\t\t\"obj\": { \"bool\":true }\n\t * \t\t});\n\t *\n\t * <h4>Example</h4>\n\t *\n\t * \t\tvar loadItem = {id:\"json\", type:\"jsonp\", src:\"http://server.com/text.json\", callback:\"callbackName\"}\n\t * \t\tvar queue = new createjs.LoadQueue();\n\t * \t\tqueue.on(\"complete\", handleComplete);\n\t * \t\tqueue.loadItem(loadItem);\n\t *\n\t * \t\tfunction handleComplete(event) }\n\t * \t\t\tvar json = queue.getResult(\"json\");\n\t * \t\t\tconsole.log(json.obj.bool); // true\n\t * \t\t}\n\t *\n\t * Note that JSONP files loaded concurrently require a <em>unique</em> callback. To ensure JSONP files are loaded\n\t * in order, either use the {{#crossLink \"LoadQueue/setMaxConnections\"}}{{/crossLink}} method (set to 1),\n\t * or set {{#crossLink \"LoadItem/maintainOrder:property\"}}{{/crossLink}} on items with the same callback.\n\t *\n\t * @class JSONPLoader\n\t * @param {LoadItem|Object} loadItem\n\t * @extends AbstractLoader\n\t * @constructor\n\t */\n\tfunction JSONPLoader(loadItem) {\n\t\tthis.AbstractLoader_constructor(loadItem, false, createjs.AbstractLoader.JSONP);\n\t\tthis.setTag(document.createElement(\"script\"));\n\t\tthis.getTag().type = \"text/javascript\";\n\t};\n\n\tvar p = createjs.extend(JSONPLoader, createjs.AbstractLoader);\n\tvar s = JSONPLoader;\n\n\n\t// static methods\n\t/**\n\t * Determines if the loader can load a specific item. This loader can only load items that are of type\n\t * {{#crossLink \"AbstractLoader/JSONP:property\"}}{{/crossLink}}.\n\t * @method canLoadItem\n\t * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\n\t * @returns {Boolean} Whether the loader can load the item.\n\t * @static\n\t */\n\ts.canLoadItem = function (item) {\n\t\treturn item.type == createjs.AbstractLoader.JSONP;\n\t};\n\n\t// public methods\n\tp.cancel = function () {\n\t\tthis.AbstractLoader_cancel();\n\t\tthis._dispose();\n\t};\n\n\t/**\n\t * Loads the JSONp file.  Because of the unique loading needs of JSONp\n\t * we don't use the AbstractLoader.load() method.\n\t *\n\t * @method load\n\t *\n\t */\n\tp.load = function () {\n\t\tif (this._item.callback == null) {\n\t\t\tthrow new Error('callback is required for loading JSONP requests.');\n\t\t}\n\n\t\t// TODO: Look into creating our own iFrame to handle the load\n\t\t// In the first attempt, FF did not get the result\n\t\t//   result instanceof Object did not work either\n\t\t//   so we would need to clone the result.\n\t\tif (window[this._item.callback] != null) {\n\t\t\tthrow new Error(\n\t\t\t\t\"JSONP callback '\" +\n\t\t\t\tthis._item.callback +\n\t\t\t\t\"' already exists on window. You need to specify a different callback or re-name the current one.\");\n\t\t}\n\n\t\twindow[this._item.callback] = createjs.proxy(this._handleLoad, this);\n\t\twindow.document.body.appendChild(this._tag);\n\n\t\tthis._loadTimeout = setTimeout(createjs.proxy(this._handleTimeout, this), this._item.loadTimeout);\n\n\t\t// Load the tag\n\t\tthis._tag.src = this._item.src;\n\t};\n\n\t// private methods\n\t/**\n\t * Handle the JSONP callback, which is a public method defined on `window`.\n\t * @method _handleLoad\n\t * @param {Object} data The formatted JSON data.\n\t * @private\n\t */\n\tp._handleLoad = function (data) {\n\t\tthis._result = this._rawResult = data;\n\t\tthis._sendComplete();\n\n\t\tthis._dispose();\n\t};\n\n\t/**\n\t * The tag request has not loaded within the time specfied in loadTimeout.\n\t * @method _handleError\n\t * @param {Object} event The XHR error event.\n\t * @private\n\t */\n\tp._handleTimeout = function () {\n\t\tthis._dispose();\n\t\tthis.dispatchEvent(new createjs.ErrorEvent(\"timeout\"));\n\t};\n\n\t/**\n\t * Clean up the JSONP load. This clears out the callback and script tag that this loader creates.\n\t * @method _dispose\n\t * @private\n\t */\n\tp._dispose = function () {\n\t\twindow.document.body.removeChild(this._tag);\n\t\tdelete window[this._item.callback];\n\n\t\tclearTimeout(this._loadTimeout);\n\t};\n\n\tcreatejs.JSONPLoader = createjs.promote(JSONPLoader, \"AbstractLoader\");\n\n}());\n\n//##############################################################################\n// ManifestLoader.js\n//##############################################################################\n\n(function () {\n\t\"use strict\";\n\n\t// constructor\n\t/**\n\t * A loader for JSON manifests. Items inside the manifest are loaded before the loader completes. To load manifests\n\t * using JSONP, specify a {{#crossLink \"LoadItem/callback:property\"}}{{/crossLink}} as part of the\n\t * {{#crossLink \"LoadItem\"}}{{/crossLink}}.\n\t *\n\t * The list of files in the manifest must be defined on the top-level JSON object in a `manifest` property. This\n\t * example shows a sample manifest definition, as well as how to to include a sub-manifest.\n\t *\n\t * \t\t{\n\t * \t\t\t\"path\": \"assets/\",\n\t *\t \t    \"manifest\": [\n\t *\t\t\t\t\"image.png\",\n\t *\t\t\t\t{\"src\": \"image2.png\", \"id\":\"image2\"},\n\t *\t\t\t\t{\"src\": \"sub-manifest.json\", \"type\":\"manifest\", \"callback\":\"jsonCallback\"}\n\t *\t \t    ]\n\t *\t \t}\n\t *\n\t * When a ManifestLoader has completed loading, the parent loader (usually a {{#crossLink \"LoadQueue\"}}{{/crossLink}},\n\t * but could also be another ManifestLoader) will inherit all the loaded items, so you can access them directly.\n\t *\n\t * Note that the {{#crossLink \"JSONLoader\"}}{{/crossLink}} and {{#crossLink \"JSONPLoader\"}}{{/crossLink}} are\n\t * higher priority loaders, so manifests <strong>must</strong> set the {{#crossLink \"LoadItem\"}}{{/crossLink}}\n\t * {{#crossLink \"LoadItem/type:property\"}}{{/crossLink}} property to {{#crossLink \"AbstractLoader/MANIFEST:property\"}}{{/crossLink}}.\n\t * @class ManifestLoader\n\t * @param {LoadItem|Object} loadItem\n\t * @extends AbstractLoader\n\t * @constructor\n\t */\n\tfunction ManifestLoader(loadItem) {\n\t\tthis.AbstractLoader_constructor(loadItem, null, createjs.AbstractLoader.MANIFEST);\n\n\t// Public Properties\n\t\t/**\n\t\t * An array of the plugins registered using {{#crossLink \"LoadQueue/installPlugin\"}}{{/crossLink}},\n\t\t * used to pass plugins to new LoadQueues that may be created.\n\t\t * @property _plugins\n\t\t * @type {Array}\n\t\t * @private\n\t\t * @since 0.6.1\n\t\t */\n\t\tthis.plugins = null;\n\n\n\t// Protected Properties\n\t\t/**\n\t\t * An internal {{#crossLink \"LoadQueue\"}}{{/crossLink}} that loads the contents of the manifest.\n\t\t * @property _manifestQueue\n\t\t * @type {LoadQueue}\n\t\t * @private\n\t\t */\n\t\tthis._manifestQueue = null;\n\t};\n\n\tvar p = createjs.extend(ManifestLoader, createjs.AbstractLoader);\n\tvar s = ManifestLoader;\n\n\t// static properties\n\t/**\n\t * The amount of progress that the manifest itself takes up.\n\t * @property MANIFEST_PROGRESS\n\t * @type {number}\n\t * @default 0.25 (25%)\n\t * @private\n\t * @static\n\t */\n\ts.MANIFEST_PROGRESS = 0.25;\n\n\t// static methods\n\t/**\n\t * Determines if the loader can load a specific item. This loader can only load items that are of type\n\t * {{#crossLink \"AbstractLoader/MANIFEST:property\"}}{{/crossLink}}\n\t * @method canLoadItem\n\t * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\n\t * @returns {Boolean} Whether the loader can load the item.\n\t * @static\n\t */\n\ts.canLoadItem = function (item) {\n\t\treturn item.type == createjs.AbstractLoader.MANIFEST;\n\t};\n\n\t// public methods\n\tp.load = function () {\n\t\tthis.AbstractLoader_load();\n\t};\n\n\t// protected methods\n\tp._createRequest = function() {\n\t\tvar callback = this._item.callback;\n\t\tif (callback != null) {\n\t\t\tthis._request = new createjs.JSONPLoader(this._item);\n\t\t} else {\n\t\t\tthis._request = new createjs.JSONLoader(this._item);\n\t\t}\n\t};\n\n\tp.handleEvent = function (event) {\n\t\tswitch (event.type) {\n\t\t\tcase \"complete\":\n\t\t\t\tthis._rawResult = event.target.getResult(true);\n\t\t\t\tthis._result = event.target.getResult();\n\t\t\t\tthis._sendProgress(s.MANIFEST_PROGRESS);\n\t\t\t\tthis._loadManifest(this._result);\n\t\t\t\treturn;\n\t\t\tcase \"progress\":\n\t\t\t\tevent.loaded *= s.MANIFEST_PROGRESS;\n\t\t\t\tthis.progress = event.loaded / event.total;\n\t\t\t\tif (isNaN(this.progress) || this.progress == Infinity) { this.progress = 0; }\n\t\t\t\tthis._sendProgress(event);\n\t\t\t\treturn;\n\t\t}\n\t\tthis.AbstractLoader_handleEvent(event);\n\t};\n\n\tp.destroy = function() {\n\t\tthis.AbstractLoader_destroy();\n\t\tthis._manifestQueue.close();\n\t};\n\n\t/**\n\t * Create and load the manifest items once the actual manifest has been loaded.\n\t * @method _loadManifest\n\t * @param {Object} json\n\t * @private\n\t */\n\tp._loadManifest = function (json) {\n\t\tif (json && json.manifest) {\n\t\t\tvar queue = this._manifestQueue = new createjs.LoadQueue();\n\t\t\tqueue.on(\"fileload\", this._handleManifestFileLoad, this);\n\t\t\tqueue.on(\"progress\", this._handleManifestProgress, this);\n\t\t\tqueue.on(\"complete\", this._handleManifestComplete, this, true);\n\t\t\tqueue.on(\"error\", this._handleManifestError, this, true);\n\t\t\tfor(var i = 0, l = this.plugins.length; i < l; i++) {\t// conserve order of plugins\n\t\t\t\tqueue.installPlugin(this.plugins[i]);\n\t\t\t}\n\t\t\tqueue.loadManifest(json);\n\t\t} else {\n\t\t\tthis._sendComplete();\n\t\t}\n\t};\n\n\t/**\n\t * An item from the {{#crossLink \"_manifestQueue:property\"}}{{/crossLink}} has completed.\n\t * @method _handleManifestFileLoad\n\t * @param {Event} event\n\t * @private\n\t */\n\tp._handleManifestFileLoad = function (event) {\n\t\tevent.target = null;\n\t\tthis.dispatchEvent(event);\n\t};\n\n\t/**\n\t * The manifest has completed loading. This triggers the {{#crossLink \"AbstractLoader/complete:event\"}}{{/crossLink}}\n\t * {{#crossLink \"Event\"}}{{/crossLink}} from the ManifestLoader.\n\t * @method _handleManifestComplete\n\t * @param {Event} event\n\t * @private\n\t */\n\tp._handleManifestComplete = function (event) {\n\t\tthis._loadedItems = this._manifestQueue.getItems(true);\n\t\tthis._sendComplete();\n\t};\n\n\t/**\n\t * The manifest has reported progress.\n\t * @method _handleManifestProgress\n\t * @param {ProgressEvent} event\n\t * @private\n\t */\n\tp._handleManifestProgress = function (event) {\n\t\tthis.progress = event.progress * (1 - s.MANIFEST_PROGRESS) + s.MANIFEST_PROGRESS;\n\t\tthis._sendProgress(this.progress);\n\t};\n\n\t/**\n\t * The manifest has reported an error with one of the files.\n\t * @method _handleManifestError\n\t * @param {ErrorEvent} event\n\t * @private\n\t */\n\tp._handleManifestError = function (event) {\n\t\tvar newEvent = new createjs.Event(\"fileerror\");\n\t\tnewEvent.item = event.data;\n\t\tthis.dispatchEvent(newEvent);\n\t};\n\n\tcreatejs.ManifestLoader = createjs.promote(ManifestLoader, \"AbstractLoader\");\n\n}());\n\n//##############################################################################\n// SoundLoader.js\n//##############################################################################\n\n(function () {\n\t\"use strict\";\n\n\t// constructor\n\t/**\n\t * A loader for HTML audio files. PreloadJS can not load WebAudio files, as a WebAudio context is required, which\n\t * should be created by either a library playing the sound (such as <a href=\"http://soundjs.com\">SoundJS</a>, or an\n\t * external framework that handles audio playback. To load content that can be played by WebAudio, use the\n\t * {{#crossLink \"BinaryLoader\"}}{{/crossLink}}, and handle the audio context decoding manually.\n\t * @class SoundLoader\n\t * @param {LoadItem|Object} loadItem\n\t * @param {Boolean} preferXHR\n\t * @extends AbstractMediaLoader\n\t * @constructor\n\t */\n\tfunction SoundLoader(loadItem, preferXHR) {\n\t\tthis.AbstractMediaLoader_constructor(loadItem, preferXHR, createjs.AbstractLoader.SOUND);\n\n\t\t// protected properties\n\t\tif (createjs.RequestUtils.isAudioTag(loadItem)) {\n\t\t\tthis._tag = loadItem;\n\t\t} else if (createjs.RequestUtils.isAudioTag(loadItem.src)) {\n\t\t\tthis._tag = loadItem;\n\t\t} else if (createjs.RequestUtils.isAudioTag(loadItem.tag)) {\n\t\t\tthis._tag = createjs.RequestUtils.isAudioTag(loadItem) ? loadItem : loadItem.src;\n\t\t}\n\n\t\tif (this._tag != null) {\n\t\t\tthis._preferXHR = false;\n\t\t}\n\t};\n\n\tvar p = createjs.extend(SoundLoader, createjs.AbstractMediaLoader);\n\tvar s = SoundLoader;\n\n\t// static methods\n\t/**\n\t * Determines if the loader can load a specific item. This loader can only load items that are of type\n\t * {{#crossLink \"AbstractLoader/SOUND:property\"}}{{/crossLink}}.\n\t * @method canLoadItem\n\t * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\n\t * @returns {Boolean} Whether the loader can load the item.\n\t * @static\n\t */\n\ts.canLoadItem = function (item) {\n\t\treturn item.type == createjs.AbstractLoader.SOUND;\n\t};\n\n\t// protected methods\n\tp._createTag = function (src) {\n\t\tvar tag = document.createElement(\"audio\");\n\t\ttag.autoplay = false;\n\t\ttag.preload = \"none\";\n\n\t\t//LM: Firefox fails when this the preload=\"none\" for other tags, but it needs to be \"none\" to ensure PreloadJS works.\n\t\ttag.src = src;\n\t\treturn tag;\n\t};\n\n\tcreatejs.SoundLoader = createjs.promote(SoundLoader, \"AbstractMediaLoader\");\n\n}());\n\n//##############################################################################\n// VideoLoader.js\n//##############################################################################\n\n(function () {\n\t\"use strict\";\n\n\t// constructor\n\t/**\n\t * A loader for video files.\n\t * @class VideoLoader\n\t * @param {LoadItem|Object} loadItem\n\t * @param {Boolean} preferXHR\n\t * @extends AbstractMediaLoader\n\t * @constructor\n\t */\n\tfunction VideoLoader(loadItem, preferXHR) {\n\t\tthis.AbstractMediaLoader_constructor(loadItem, preferXHR, createjs.AbstractLoader.VIDEO);\n\n\t\tif (createjs.RequestUtils.isVideoTag(loadItem) || createjs.RequestUtils.isVideoTag(loadItem.src)) {\n\t\t\tthis.setTag(createjs.RequestUtils.isVideoTag(loadItem)?loadItem:loadItem.src);\n\n\t\t\t// We can't use XHR for a tag that's passed in.\n\t\t\tthis._preferXHR = false;\n\t\t} else {\n\t\t\tthis.setTag(this._createTag());\n\t\t}\n\t};\n\n\tvar p = createjs.extend(VideoLoader, createjs.AbstractMediaLoader);\n\tvar s = VideoLoader;\n\n\t/**\n\t * Create a new video tag\n\t *\n\t * @returns {HTMLElement}\n\t * @private\n\t */\n\tp._createTag = function () {\n\t\treturn document.createElement(\"video\");\n\t};\n\n\t// static methods\n\t/**\n\t * Determines if the loader can load a specific item. This loader can only load items that are of type\n\t * {{#crossLink \"AbstractLoader/VIDEO:property\"}}{{/crossLink}}.\n\t * @method canLoadItem\n\t * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\n\t * @returns {Boolean} Whether the loader can load the item.\n\t * @static\n\t */\n\ts.canLoadItem = function (item) {\n\t\treturn item.type == createjs.AbstractLoader.VIDEO;\n\t};\n\n\tcreatejs.VideoLoader = createjs.promote(VideoLoader, \"AbstractMediaLoader\");\n\n}());\n\n//##############################################################################\n// SpriteSheetLoader.js\n//##############################################################################\n\n(function () {\n\t\"use strict\";\n\n\t// constructor\n\t/**\n\t * A loader for EaselJS SpriteSheets. Images inside the spritesheet definition are loaded before the loader\n\t * completes. To load SpriteSheets using JSONP, specify a {{#crossLink \"LoadItem/callback:property\"}}{{/crossLink}}\n\t * as part of the {{#crossLink \"LoadItem\"}}{{/crossLink}}. Note that the {{#crossLink \"JSONLoader\"}}{{/crossLink}}\n\t * and {{#crossLink \"JSONPLoader\"}}{{/crossLink}} are higher priority loaders, so SpriteSheets <strong>must</strong>\n\t * set the {{#crossLink \"LoadItem\"}}{{/crossLink}} {{#crossLink \"LoadItem/type:property\"}}{{/crossLink}} property\n\t * to {{#crossLink \"AbstractLoader/SPRITESHEET:property\"}}{{/crossLink}}.\n\t *\n\t * The {{#crossLink \"LoadItem\"}}{{/crossLink}} {{#crossLink \"LoadItem/crossOrigin:property\"}}{{/crossLink}} as well\n\t * as the {{#crossLink \"LoadQueue's\"}}{{/crossLink}} `basePath` argument and {{#crossLink \"LoadQueue/_preferXHR\"}}{{/crossLink}}\n\t * property supplied to the {{#crossLink \"LoadQueue\"}}{{/crossLink}} are passed on to the sub-manifest that loads\n\t * the SpriteSheet images.\n\t *\n\t * Note that the SpriteSheet JSON does not respect the {{#crossLink \"LoadQueue/_preferXHR:property\"}}{{/crossLink}}\n\t * property, which should instead be determined by the presence of a {{#crossLink \"LoadItem/callback:property\"}}{{/crossLink}}\n\t * property on the SpriteSheet load item. This is because the JSON loaded will have a different format depending on\n\t * if it is loaded as JSON, so just changing `preferXHR` is not enough to change how it is loaded.\n\t * @class SpriteSheetLoader\n\t * @param {LoadItem|Object} loadItem\n\t * @extends AbstractLoader\n\t * @constructor\n\t */\n\tfunction SpriteSheetLoader(loadItem, preferXHR) {\n\t\tthis.AbstractLoader_constructor(loadItem, preferXHR, createjs.AbstractLoader.SPRITESHEET);\n\n\t\t// protected properties\n\t\t/**\n\t\t * An internal queue which loads the SpriteSheet's images.\n\t\t * @method _manifestQueue\n\t\t * @type {LoadQueue}\n\t\t * @private\n\t\t */\n\t\tthis._manifestQueue = null;\n\t}\n\n\tvar p = createjs.extend(SpriteSheetLoader, createjs.AbstractLoader);\n\tvar s = SpriteSheetLoader;\n\n\t// static properties\n\t/**\n\t * The amount of progress that the manifest itself takes up.\n\t * @property SPRITESHEET_PROGRESS\n\t * @type {number}\n\t * @default 0.25 (25%)\n\t * @private\n\t * @static\n\t */\n\ts.SPRITESHEET_PROGRESS = 0.25;\n\n\t// static methods\n\t/**\n\t * Determines if the loader can load a specific item. This loader can only load items that are of type\n\t * {{#crossLink \"AbstractLoader/SPRITESHEET:property\"}}{{/crossLink}}\n\t * @method canLoadItem\n\t * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\n\t * @returns {Boolean} Whether the loader can load the item.\n\t * @static\n\t */\n\ts.canLoadItem = function (item) {\n\t\treturn item.type == createjs.AbstractLoader.SPRITESHEET;\n\t};\n\n\t// public methods\n\tp.destroy = function() {\n\t\tthis.AbstractLoader_destroy;\n\t\tthis._manifestQueue.close();\n\t};\n\n\t// protected methods\n\tp._createRequest = function() {\n\t\tvar callback = this._item.callback;\n\t\tif (callback != null) {\n\t\t\tthis._request = new createjs.JSONPLoader(this._item);\n\t\t} else {\n\t\t\tthis._request = new createjs.JSONLoader(this._item);\n\t\t}\n\t};\n\n\tp.handleEvent = function (event) {\n\t\tswitch (event.type) {\n\t\t\tcase \"complete\":\n\t\t\t\tthis._rawResult = event.target.getResult(true);\n\t\t\t\tthis._result = event.target.getResult();\n\t\t\t\tthis._sendProgress(s.SPRITESHEET_PROGRESS);\n\t\t\t\tthis._loadManifest(this._result);\n\t\t\t\treturn;\n\t\t\tcase \"progress\":\n\t\t\t\tevent.loaded *= s.SPRITESHEET_PROGRESS;\n\t\t\t\tthis.progress = event.loaded / event.total;\n\t\t\t\tif (isNaN(this.progress) || this.progress == Infinity) { this.progress = 0; }\n\t\t\t\tthis._sendProgress(event);\n\t\t\t\treturn;\n\t\t}\n\t\tthis.AbstractLoader_handleEvent(event);\n\t};\n\n\t/**\n\t * Create and load the images once the SpriteSheet JSON has been loaded.\n\t * @method _loadManifest\n\t * @param {Object} json\n\t * @private\n\t */\n\tp._loadManifest = function (json) {\n\t\tif (json && json.images) {\n\t\t\tvar queue = this._manifestQueue = new createjs.LoadQueue(this._preferXHR, this._item.path, this._item.crossOrigin);\n\t\t\tqueue.on(\"complete\", this._handleManifestComplete, this, true);\n\t\t\tqueue.on(\"fileload\", this._handleManifestFileLoad, this);\n\t\t\tqueue.on(\"progress\", this._handleManifestProgress, this);\n\t\t\tqueue.on(\"error\", this._handleManifestError, this, true);\n\t\t\tqueue.loadManifest(json.images);\n\t\t}\n\t};\n\n\t/**\n\t * An item from the {{#crossLink \"_manifestQueue:property\"}}{{/crossLink}} has completed.\n\t * @method _handleManifestFileLoad\n\t * @param {Event} event\n\t * @private\n\t */\n\tp._handleManifestFileLoad = function (event) {\n\t\tvar image = event.result;\n\t\tif (image != null) {\n\t\t\tvar images = this.getResult().images;\n\t\t\tvar pos = images.indexOf(event.item.src);\n\t\t\timages[pos] = image;\n\t\t}\n\t};\n\n\t/**\n\t * The images have completed loading. This triggers the {{#crossLink \"AbstractLoader/complete:event\"}}{{/crossLink}}\n\t * {{#crossLink \"Event\"}}{{/crossLink}} from the SpriteSheetLoader.\n\t * @method _handleManifestComplete\n\t * @param {Event} event\n\t * @private\n\t */\n\tp._handleManifestComplete = function (event) {\n\t\tthis._result = new createjs.SpriteSheet(this._result);\n\t\tthis._loadedItems = this._manifestQueue.getItems(true);\n\t\tthis._sendComplete();\n\t};\n\n\t/**\n\t * The images {{#crossLink \"LoadQueue\"}}{{/crossLink}} has reported progress.\n\t * @method _handleManifestProgress\n\t * @param {ProgressEvent} event\n\t * @private\n\t */\n\tp._handleManifestProgress = function (event) {\n\t\tthis.progress = event.progress * (1 - s.SPRITESHEET_PROGRESS) + s.SPRITESHEET_PROGRESS;\n\t\tthis._sendProgress(this.progress);\n\t};\n\n\t/**\n\t * An image has reported an error.\n\t * @method _handleManifestError\n\t * @param {ErrorEvent} event\n\t * @private\n\t */\n\tp._handleManifestError = function (event) {\n\t\tvar newEvent = new createjs.Event(\"fileerror\");\n\t\tnewEvent.item = event.data;\n\t\tthis.dispatchEvent(newEvent);\n\t};\n\n\tcreatejs.SpriteSheetLoader = createjs.promote(SpriteSheetLoader, \"AbstractLoader\");\n\n}());\n\n//##############################################################################\n// SVGLoader.js\n//##############################################################################\n\n(function () {\n\t\"use strict\";\n\n\t// constructor\n\t/**\n\t * A loader for SVG files.\n\t * @class SVGLoader\n\t * @param {LoadItem|Object} loadItem\n\t * @param {Boolean} preferXHR\n\t * @extends AbstractLoader\n\t * @constructor\n\t */\n\tfunction SVGLoader(loadItem, preferXHR) {\n\t\tthis.AbstractLoader_constructor(loadItem, preferXHR, createjs.AbstractLoader.SVG);\n\n\t\t// public properties\n\t\tthis.resultFormatter = this._formatResult;\n\n\t\t// protected properties\n\t\tthis._tagSrcAttribute = \"data\";\n\n\t\tif (preferXHR) {\n\t\t\tthis.setTag(document.createElement(\"svg\"));\n\t\t} else {\n\t\t\tthis.setTag(document.createElement(\"object\"));\n\t\t\tthis.getTag().type = \"image/svg+xml\";\n\t\t}\n\t};\n\n\tvar p = createjs.extend(SVGLoader, createjs.AbstractLoader);\n\tvar s = SVGLoader;\n\n\t// static methods\n\t/**\n\t * Determines if the loader can load a specific item. This loader can only load items that are of type\n\t * {{#crossLink \"AbstractLoader/SVG:property\"}}{{/crossLink}}\n\t * @method canLoadItem\n\t * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\n\t * @returns {Boolean} Whether the loader can load the item.\n\t * @static\n\t */\n\ts.canLoadItem = function (item) {\n\t\treturn item.type == createjs.AbstractLoader.SVG;\n\t};\n\n\t// protected methods\n\t/**\n\t * The result formatter for SVG files.\n\t * @method _formatResult\n\t * @param {AbstractLoader} loader\n\t * @returns {Object}\n\t * @private\n\t */\n\tp._formatResult = function (loader) {\n\t\t// mime should be image/svg+xml, but Opera requires text/xml\n\t\tvar xml = createjs.DataUtils.parseXML(loader.getResult(true), \"text/xml\");\n\t\tvar tag = loader.getTag();\n\n\t\tif (!this._preferXHR && document.body.contains(tag)) {\n\t\t\tdocument.body.removeChild(tag);\n\t\t}\n\n\t\tif (xml.documentElement != null) {\n\t\t\ttag.appendChild(xml.documentElement);\n\t\t\ttag.style.visibility = \"visible\";\n\t\t\treturn tag;\n\t\t} else { // For browsers that don't support SVG, just give them the XML. (IE 9-8)\n\t\t\treturn xml;\n\t\t}\n\t};\n\n\tcreatejs.SVGLoader = createjs.promote(SVGLoader, \"AbstractLoader\");\n\n}());\n\n//##############################################################################\n// XMLLoader.js\n//##############################################################################\n\n(function () {\n\t\"use strict\";\n\n\t// constructor\n\t/**\n\t * A loader for CSS files.\n\t * @class XMLLoader\n\t * @param {LoadItem|Object} loadItem\n\t * @extends AbstractLoader\n\t * @constructor\n\t */\n\tfunction XMLLoader(loadItem) {\n\t\tthis.AbstractLoader_constructor(loadItem, true, createjs.AbstractLoader.XML);\n\n\t\t// public properties\n\t\tthis.resultFormatter = this._formatResult;\n\t};\n\n\tvar p = createjs.extend(XMLLoader, createjs.AbstractLoader);\n\tvar s = XMLLoader;\n\n\t// static methods\n\t/**\n\t * Determines if the loader can load a specific item. This loader can only load items that are of type\n\t * {{#crossLink \"AbstractLoader/XML:property\"}}{{/crossLink}}.\n\t * @method canLoadItem\n\t * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\n\t * @returns {Boolean} Whether the loader can load the item.\n\t * @static\n\t */\n\ts.canLoadItem = function (item) {\n\t\treturn item.type == createjs.AbstractLoader.XML;\n\t};\n\n\t// protected methods\n\t/**\n\t * The result formatter for XML files.\n\t * @method _formatResult\n\t * @param {AbstractLoader} loader\n\t * @returns {XMLDocument}\n\t * @private\n\t */\n\tp._formatResult = function (loader) {\n\t\treturn createjs.DataUtils.parseXML(loader.getResult(true), \"text/xml\");\n\t};\n\n\tcreatejs.XMLLoader = createjs.promote(XMLLoader, \"AbstractLoader\");\n\n}());\n\n//##############################################################################\n// version.js\n//##############################################################################\n\n(function () {\n\n\t/**\n\t * Static class holding library specific information such as the version and buildDate of the library.\n\t * The SoundJS class has been renamed {{#crossLink \"Sound\"}}{{/crossLink}}.  Please see {{#crossLink \"Sound\"}}{{/crossLink}}\n\t * for information on using sound.\n\t * @class SoundJS\n\t **/\n\tvar s = createjs.SoundJS = createjs.SoundJS || {};\n\n\t/**\n\t * The version string for this release.\n\t * @property version\n\t * @type String\n\t * @static\n\t **/\n\ts.version = /*=version*/\"0.6.2\"; // injected by build process\n\n\t/**\n\t * The build date for this release in UTC format.\n\t * @property buildDate\n\t * @type String\n\t * @static\n\t **/\n\ts.buildDate = /*=date*/\"Thu, 26 Nov 2015 20:44:31 GMT\"; // injected by build process\n\n})();\n\n//##############################################################################\n// IndexOf.js\n//##############################################################################\n\n/**\n * @class Utility Methods\n */\n\n/**\n * Finds the first occurrence of a specified value searchElement in the passed in array, and returns the index of\n * that value.  Returns -1 if value is not found.\n *\n *      var i = createjs.indexOf(myArray, myElementToFind);\n *\n * @method indexOf\n * @param {Array} array Array to search for searchElement\n * @param searchElement Element to find in array.\n * @return {Number} The first index of searchElement in array.\n */\ncreatejs.indexOf = function (array, searchElement){\n\t\"use strict\";\n\n\tfor (var i = 0,l=array.length; i < l; i++) {\n\t\tif (searchElement === array[i]) {\n\t\t\treturn i;\n\t\t}\n\t}\n\treturn -1;\n};\n\n//##############################################################################\n// Proxy.js\n//##############################################################################\n\n/**\n * Various utilities that the CreateJS Suite uses. Utilities are created as separate files, and will be available on the\n * createjs namespace directly.\n *\n * <h4>Example</h4>\n *\n *      myObject.addEventListener(\"change\", createjs.proxy(myMethod, scope));\n *\n * @class Utility Methods\n * @main Utility Methods\n */\n\n(function() {\n\t\"use strict\";\n\n\t/**\n\t * A function proxy for methods. By default, JavaScript methods do not maintain scope, so passing a method as a\n\t * callback will result in the method getting called in the scope of the caller. Using a proxy ensures that the\n\t * method gets called in the correct scope.\n\t *\n\t * Additional arguments can be passed that will be applied to the function when it is called.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      myObject.addEventListener(\"event\", createjs.proxy(myHandler, this, arg1, arg2));\n\t *\n\t *      function myHandler(arg1, arg2) {\n\t *           // This gets called when myObject.myCallback is executed.\n\t *      }\n\t *\n\t * @method proxy\n\t * @param {Function} method The function to call\n\t * @param {Object} scope The scope to call the method name on\n\t * @param {mixed} [arg] * Arguments that are appended to the callback for additional params.\n\t * @public\n\t * @static\n\t */\n\tcreatejs.proxy = function (method, scope) {\n\t\tvar aArgs = Array.prototype.slice.call(arguments, 2);\n\t\treturn function () {\n\t\t\treturn method.apply(scope, Array.prototype.slice.call(arguments, 0).concat(aArgs));\n\t\t};\n\t}\n\n}());\n\n//##############################################################################\n// BrowserDetect.js\n//##############################################################################\n\n/**\n * @class Utility Methods\n */\n(function() {\n\t\"use strict\";\n\n\t/**\n\t * An object that determines the current browser, version, operating system, and other environment\n\t * variables via user agent string.\n\t *\n\t * Used for audio because feature detection is unable to detect the many limitations of mobile devices.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      if (createjs.BrowserDetect.isIOS) { // do stuff }\n\t *\n\t * @property BrowserDetect\n\t * @type {Object}\n\t * @param {Boolean} isFirefox True if our browser is Firefox.\n\t * @param {Boolean} isOpera True if our browser is opera.\n\t * @param {Boolean} isChrome True if our browser is Chrome.  Note that Chrome for Android returns true, but is a\n\t * completely different browser with different abilities.\n\t * @param {Boolean} isIOS True if our browser is safari for iOS devices (iPad, iPhone, and iPod).\n\t * @param {Boolean} isAndroid True if our browser is Android.\n\t * @param {Boolean} isBlackberry True if our browser is Blackberry.\n\t * @constructor\n\t * @static\n\t */\n\tfunction BrowserDetect() {\n\t\tthrow \"BrowserDetect cannot be instantiated\";\n\t};\n\n\tvar agent = BrowserDetect.agent = window.navigator.userAgent;\n\tBrowserDetect.isWindowPhone = (agent.indexOf(\"IEMobile\") > -1) || (agent.indexOf(\"Windows Phone\") > -1);\n\tBrowserDetect.isFirefox = (agent.indexOf(\"Firefox\") > -1);\n\tBrowserDetect.isOpera = (window.opera != null);\n\tBrowserDetect.isChrome = (agent.indexOf(\"Chrome\") > -1);  // NOTE that Chrome on Android returns true but is a completely different browser with different abilities\n\tBrowserDetect.isIOS = (agent.indexOf(\"iPod\") > -1 || agent.indexOf(\"iPhone\") > -1 || agent.indexOf(\"iPad\") > -1) && !BrowserDetect.isWindowPhone;\n\tBrowserDetect.isAndroid = (agent.indexOf(\"Android\") > -1) && !BrowserDetect.isWindowPhone;\n\tBrowserDetect.isBlackberry = (agent.indexOf(\"Blackberry\") > -1);\n\n\tcreatejs.BrowserDetect = BrowserDetect;\n\n}());\n\n//##############################################################################\n// AudioSprite.js\n//##############################################################################\n\n//  NOTE this is \"Class\" is purely to document audioSprite Setup and usage.\n\n\n/**\n * <strong>Note: AudioSprite is not a class, but its usage is easily lost in the documentation, so it has been called\n * out here for quick reference.</strong>\n *\n * Audio sprites are much like CSS sprites or image sprite sheets: multiple audio assets grouped into a single file.\n * Audio sprites work around limitations in certain browsers, where only a single sound can be loaded and played at a\n * time. We recommend at least 300ms of silence between audio clips to deal with HTML audio tag inaccuracy, and to prevent\n * accidentally playing bits of the neighbouring clips.\n *\n * <strong>Benefits of Audio Sprites:</strong>\n * <ul>\n *     <li>More robust support for older browsers and devices that only allow a single audio instance, such as iOS 5.</li>\n *     <li>They provide a work around for the Internet Explorer 9 audio tag limit, which restricts how many different\n *     sounds that could be loaded at once.</li>\n *     <li>Faster loading by only requiring a single network request for several sounds, especially on mobile devices\n * where the network round trip for each file can add significant latency.</li>\n * </ul>\n *\n * <strong>Drawbacks of Audio Sprites</strong>\n * <ul>\n *     <li>No guarantee of smooth looping when using HTML or Flash audio. If you have a track that needs to loop\n * \t\tsmoothly and you are supporting non-web audio browsers, do not use audio sprites for that sound if you can avoid\n * \t\tit.</li>\n *     <li>No guarantee that HTML audio will play back immediately, especially the first time. In some browsers\n *     (Chrome!), HTML audio will only load enough to play through at the current download speed  so we rely on the\n *     `canplaythrough` event to determine if the audio is loaded. Since audio sprites must jump ahead to play specific\n *     sounds, the audio may not yet have downloaded fully.</li>\n *     <li>Audio sprites share the same core source, so if you have a sprite with 5 sounds and are limited to 2\n * \t\tconcurrently playing instances, you can only play 2 of the sounds at the same time.</li>\n * </ul>\n *\n * <h4>Example</h4>\n *\n *\t\tcreatejs.Sound.initializeDefaultPlugins();\n *\t\tvar assetsPath = \"./assets/\";\n *\t\tvar sounds = [{\n *\t\t\tsrc:\"MyAudioSprite.ogg\", data: {\n *\t\t\t\taudioSprite: [\n *\t\t\t\t\t{id:\"sound1\", startTime:0, duration:500},\n *\t\t\t\t\t{id:\"sound2\", startTime:1000, duration:400},\n *\t\t\t\t\t{id:\"sound3\", startTime:1700, duration: 1000}\n *\t\t\t\t]}\n *\t\t\t}\n *\t\t];\n *\t\tcreatejs.Sound.alternateExtensions = [\"mp3\"];\n *\t\tcreatejs.Sound.on(\"fileload\", loadSound);\n *\t\tcreatejs.Sound.registerSounds(sounds, assetsPath);\n *\t\t// after load is complete\n *\t\tcreatejs.Sound.play(\"sound2\");\n *\n * You can also create audio sprites on the fly by setting the startTime and duration when creating an new AbstractSoundInstance.\n *\n * \t\tcreatejs.Sound.play(\"MyAudioSprite\", {startTime: 1000, duration: 400});\n *\n * The excellent CreateJS community has created a tool to create audio sprites, available at\n * <a href=\"https://github.com/tonistiigi/audiosprite\" target=\"_blank\">https://github.com/tonistiigi/audiosprite</a>,\n * as well as a <a href=\"http://jsfiddle.net/bharat_battu/g8fFP/12/\" target=\"_blank\">jsfiddle</a> to convert the output\n * to SoundJS format.\n *\n * @class AudioSprite\n * @since 0.6.0\n */\n\n//##############################################################################\n// PlayPropsConfig.js\n//##############################################################################\n\n(function () {\n\t\"use strict\";\n\t/**\n\t * A class to store the optional play properties passed in {{#crossLink \"Sound/play\"}}{{/crossLink}} and\n\t * {{#crossLink \"AbstractSoundInstance/play\"}}{{/crossLink}} calls.\n\t *\n\t * Optional Play Properties Include:\n\t * <ul>\n\t * <li>interrupt - How to interrupt any currently playing instances of audio with the same source,\n\t * if the maximum number of instances of the sound are already playing. Values are defined as <code>INTERRUPT_TYPE</code>\n\t * constants on the Sound class, with the default defined by {{#crossLink \"Sound/defaultInterruptBehavior:property\"}}{{/crossLink}}.</li>\n\t * <li>delay - The amount of time to delay the start of audio playback, in milliseconds.</li>\n\t * <li>offset - The offset from the start of the audio to begin playback, in milliseconds.</li>\n\t * <li>loop - How many times the audio loops when it reaches the end of playback. The default is 0 (no\n\t * loops), and -1 can be used for infinite playback.</li>\n\t * <li>volume - The volume of the sound, between 0 and 1. Note that the master volume is applied\n\t * against the individual volume.</li>\n\t * <li>pan - The left-right pan of the sound (if supported), between -1 (left) and 1 (right).</li>\n\t * <li>startTime - To create an audio sprite (with duration), the initial offset to start playback and loop from, in milliseconds.</li>\n\t * <li>duration - To create an audio sprite (with startTime), the amount of time to play the clip for, in milliseconds.</li>\n\t * </ul>\n\t *\n\t * <h4>Example</h4>\n\t *\n\t * \tvar ppc = new createjs.PlayPropsConfig().set({interrupt: createjs.Sound.INTERRUPT_ANY, loop: -1, volume: 0.5})\n\t * \tcreatejs.Sound.play(\"mySound\", ppc);\n\t * \tmySoundInstance.play(ppc);\n\t *\n\t * @class PlayPropsConfig\n\t * @constructor\n\t * @since 0.6.1\n\t */\n\t// TODO think of a better name for this class\n\tvar PlayPropsConfig = function () {\n// Public Properties\n\t\t/**\n\t\t * How to interrupt any currently playing instances of audio with the same source,\n\t\t * if the maximum number of instances of the sound are already playing. Values are defined as\n\t\t * <code>INTERRUPT_TYPE</code> constants on the Sound class, with the default defined by\n\t\t * {{#crossLink \"Sound/defaultInterruptBehavior:property\"}}{{/crossLink}}.\n\t\t * @property interrupt\n\t\t * @type {string}\n\t\t * @default null\n\t\t */\n\t\tthis.interrupt = null;\n\n\t\t/**\n\t\t * The amount of time to delay the start of audio playback, in milliseconds.\n\t\t * @property delay\n\t\t * @type {Number}\n\t\t * @default null\n\t\t */\n\t\tthis.delay = null;\n\n\t\t/**\n\t\t * The offset from the start of the audio to begin playback, in milliseconds.\n\t\t * @property offset\n\t\t * @type {number}\n\t\t * @default null\n\t\t */\n\t\tthis.offset = null;\n\n\t\t/**\n\t\t * How many times the audio loops when it reaches the end of playback. The default is 0 (no\n\t\t * loops), and -1 can be used for infinite playback.\n\t\t * @property loop\n\t\t * @type {number}\n\t\t * @default null\n\t\t */\n\t\tthis.loop = null;\n\n\t\t/**\n\t\t * The volume of the sound, between 0 and 1. Note that the master volume is applied\n\t\t * against the individual volume.\n\t\t * @property volume\n\t\t * @type {number}\n\t\t * @default null\n\t\t */\n\t\tthis.volume = null;\n\n\t\t/**\n\t\t * The left-right pan of the sound (if supported), between -1 (left) and 1 (right).\n\t\t * @property pan\n\t\t * @type {number}\n\t\t * @default null\n\t\t */\n\t\tthis.pan = null;\n\n\t\t/**\n\t\t * Used to create an audio sprite (with duration), the initial offset to start playback and loop from, in milliseconds.\n\t\t * @property startTime\n\t\t * @type {number}\n\t\t * @default null\n\t\t */\n\t\tthis.startTime = null;\n\n\t\t/**\n\t\t * Used to create an audio sprite (with startTime), the amount of time to play the clip for, in milliseconds.\n\t\t * @property duration\n\t\t * @type {number}\n\t\t * @default null\n\t\t */\n\t\tthis.duration = null;\n\t};\n\tvar p = PlayPropsConfig.prototype = {};\n\tvar s = PlayPropsConfig;\n\n\n// Static Methods\n\t/**\n\t * Creates a PlayPropsConfig from another PlayPropsConfig or an Object.\n\t *\n\t * @method create\n\t * @param {PlayPropsConfig|Object} value The play properties\n\t * @returns {PlayPropsConfig}\n\t * @static\n\t */\n\ts.create = function (value) {\n\t\tif (value instanceof s || value instanceof Object) {\n\t\t\tvar ppc = new createjs.PlayPropsConfig();\n\t\t\tppc.set(value);\n\t\t\treturn ppc;\n\t\t} else {\n\t\t\tthrow new Error(\"Type not recognized.\");\n\t\t}\n\t};\n\n// Public Methods\n\t/**\n\t * Provides a chainable shortcut method for setting a number of properties on the instance.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      var PlayPropsConfig = new createjs.PlayPropsConfig().set({loop:-1, volume:0.7});\n\t *\n\t * @method set\n\t * @param {Object} props A generic object containing properties to copy to the PlayPropsConfig instance.\n\t * @return {PlayPropsConfig} Returns the instance the method is called on (useful for chaining calls.)\n\t*/\n\tp.set = function(props) {\n\t\tfor (var n in props) { this[n] = props[n]; }\n\t\treturn this;\n\t};\n\n\tp.toString = function() {\n\t\treturn \"[PlayPropsConfig]\";\n\t};\n\n\tcreatejs.PlayPropsConfig = s;\n\n}());\n\n//##############################################################################\n// Sound.js\n//##############################################################################\n\n(function () {\n\t\"use strict\";\n\n\t/**\n\t * The Sound class is the public API for creating sounds, controlling the overall sound levels, and managing plugins.\n\t * All Sound APIs on this class are static.\n\t *\n\t * <b>Registering and Preloading</b><br />\n\t * Before you can play a sound, it <b>must</b> be registered. You can do this with {{#crossLink \"Sound/registerSound\"}}{{/crossLink}},\n\t * or register multiple sounds using {{#crossLink \"Sound/registerSounds\"}}{{/crossLink}}. If you don't register a\n\t * sound prior to attempting to play it using {{#crossLink \"Sound/play\"}}{{/crossLink}} or create it using {{#crossLink \"Sound/createInstance\"}}{{/crossLink}},\n\t * the sound source will be automatically registered but playback will fail as the source will not be ready. If you use\n\t * <a href=\"http://preloadjs.com\" target=\"_blank\">PreloadJS</a>, registration is handled for you when the sound is\n\t * preloaded. It is recommended to preload sounds either internally using the register functions or externally using\n\t * PreloadJS so they are ready when you want to use them.\n\t *\n\t * <b>Playback</b><br />\n\t * To play a sound once it's been registered and preloaded, use the {{#crossLink \"Sound/play\"}}{{/crossLink}} method.\n\t * This method returns a {{#crossLink \"AbstractSoundInstance\"}}{{/crossLink}} which can be paused, resumed, muted, etc.\n\t * Please see the {{#crossLink \"AbstractSoundInstance\"}}{{/crossLink}} documentation for more on the instance control APIs.\n\t *\n\t * <b>Plugins</b><br />\n\t * By default, the {{#crossLink \"WebAudioPlugin\"}}{{/crossLink}} or the {{#crossLink \"HTMLAudioPlugin\"}}{{/crossLink}}\n\t * are used (when available), although developers can change plugin priority or add new plugins (such as the\n\t * provided {{#crossLink \"FlashAudioPlugin\"}}{{/crossLink}}). Please see the {{#crossLink \"Sound\"}}{{/crossLink}} API\n\t * methods for more on the playback and plugin APIs. To install plugins, or specify a different plugin order, see\n\t * {{#crossLink \"Sound/installPlugins\"}}{{/crossLink}}.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      createjs.FlashAudioPlugin.swfPath = \"../src/soundjs/flashaudio\";\n\t *      createjs.Sound.registerPlugins([createjs.WebAudioPlugin, createjs.FlashAudioPlugin]);\n\t *      createjs.Sound.alternateExtensions = [\"mp3\"];\n\t *      createjs.Sound.on(\"fileload\", this.loadHandler, this);\n\t *      createjs.Sound.registerSound(\"path/to/mySound.ogg\", \"sound\");\n\t *      function loadHandler(event) {\n     *          // This is fired for each sound that is registered.\n     *          var instance = createjs.Sound.play(\"sound\");  // play using id.  Could also use full source path or event.src.\n     *          instance.on(\"complete\", this.handleComplete, this);\n     *          instance.volume = 0.5;\n\t *      }\n\t *\n\t * The maximum number of concurrently playing instances of the same sound can be specified in the \"data\" argument\n\t * of {{#crossLink \"Sound/registerSound\"}}{{/crossLink}}.  Note that if not specified, the active plugin will apply\n\t * a default limit.  Currently HTMLAudioPlugin sets a default limit of 2, while WebAudioPlugin and FlashAudioPlugin set a\n\t * default limit of 100.\n\t *\n\t *      createjs.Sound.registerSound(\"sound.mp3\", \"soundId\", 4);\n\t *\n\t * Sound can be used as a plugin with PreloadJS to help preload audio properly. Audio preloaded with PreloadJS is\n\t * automatically registered with the Sound class. When audio is not preloaded, Sound will do an automatic internal\n\t * load. As a result, it may fail to play the first time play is called if the audio is not finished loading. Use\n\t * the {{#crossLink \"Sound/fileload:event\"}}{{/crossLink}} event to determine when a sound has finished internally\n\t * preloading. It is recommended that all audio is preloaded before it is played.\n\t *\n\t *      var queue = new createjs.LoadQueue();\n\t *\t\tqueue.installPlugin(createjs.Sound);\n\t *\n\t * <b>Audio Sprites</b><br />\n\t * SoundJS has added support for {{#crossLink \"AudioSprite\"}}{{/crossLink}}, available as of version 0.6.0.\n\t * For those unfamiliar with audio sprites, they are much like CSS sprites or sprite sheets: multiple audio assets\n\t * grouped into a single file.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *\t\tvar assetsPath = \"./assets/\";\n\t *\t\tvar sounds = [{\n\t *\t\t\tsrc:\"MyAudioSprite.ogg\", data: {\n\t *\t\t\t\taudioSprite: [\n\t *\t\t\t\t\t{id:\"sound1\", startTime:0, duration:500},\n\t *\t\t\t\t\t{id:\"sound2\", startTime:1000, duration:400},\n\t *\t\t\t\t\t{id:\"sound3\", startTime:1700, duration: 1000}\n\t *\t\t\t\t]}\n \t *\t\t\t}\n\t *\t\t];\n\t *\t\tcreatejs.Sound.alternateExtensions = [\"mp3\"];\n\t *\t\tcreatejs.Sound.on(\"fileload\", loadSound);\n\t *\t\tcreatejs.Sound.registerSounds(sounds, assetsPath);\n\t *\t\t// after load is complete\n\t *\t\tcreatejs.Sound.play(\"sound2\");\n\t *\n\t * <b>Mobile Playback</b><br />\n\t * Devices running iOS require the WebAudio context to be \"unlocked\" by playing at least one sound inside of a user-\n\t * initiated event (such as touch/click). Earlier versions of SoundJS included a \"MobileSafe\" sample, but this is no\n\t * longer necessary as of SoundJS 0.6.2.\n\t * <ul>\n\t *     <li>\n\t *         In SoundJS 0.4.1 and above, you can either initialize plugins or use the {{#crossLink \"WebAudioPlugin/playEmptySound\"}}{{/crossLink}}\n\t *         method in the call stack of a user input event to manually unlock the audio context.\n\t *     </li>\n\t *     <li>\n\t *         In SoundJS 0.6.2 and above, SoundJS will automatically listen for the first document-level \"mousedown\"\n\t *         and \"touchend\" event, and unlock WebAudio. This will continue to check these events until the WebAudio\n\t *         context becomes \"unlocked\" (changes from \"suspended\" to \"running\")\n\t *     </li>\n\t *     <li>\n\t *         Both the \"mousedown\" and \"touchend\" events can be used to unlock audio in iOS9+, the \"touchstart\" event\n\t *         will work in iOS8 and below. The \"touchend\" event will only work in iOS9 when the gesture is interpreted\n\t *         as a \"click\", so if the user long-presses the button, it will no longer work.\n\t *     </li>\n\t *     <li>\n\t *         When using the <a href=\"http://www.createjs.com/docs/easeljs/classes/Touch.html\">EaselJS Touch class</a>,\n\t *         the \"mousedown\" event will not fire when a canvas is clicked, since MouseEvents are prevented, to ensure\n\t *         only touch events fire. To get around this, you can either rely on \"touchend\", or:\n\t *         <ol>\n\t *             <li>Set the `allowDefault` property on the Touch class constructor to `true` (defaults to `false`).</li>\n\t *             <li>Set the `preventSelection` property on the EaselJS `Stage` to `false`.</li>\n\t *         </ol>\n\t *         These settings may change how your application behaves, and are not recommended.\n\t *     </li>\n\t * </ul>\n\t *\n\t * <b>Loading Alternate Paths and Extension-less Files</b><br />\n\t * SoundJS supports loading alternate paths and extension-less files by passing an object instead of a string for\n\t * the `src` property, which is a hash using the format `{extension:\"path\", extension2:\"path2\"}`. These labels are\n\t * how SoundJS determines if the browser will support the sound. This also enables multiple formats to live in\n\t * different folders, or on CDNs, which often has completely different filenames for each file.\n\t *\n\t * Priority is determined by the property order (first property is tried first).  This is supported by both internal loading\n\t * and loading with PreloadJS.\n\t *\n\t * <em>Note: an id is required for playback.</em>\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *\t\tvar sounds = {path:\"./audioPath/\",\n\t * \t\t\t\tmanifest: [\n\t *\t\t\t\t{id: \"cool\", src: {mp3:\"mp3/awesome.mp3\", ogg:\"noExtensionOggFile\"}}\n\t *\t\t]};\n\t *\n\t *\t\tcreatejs.Sound.alternateExtensions = [\"mp3\"];\n\t *\t\tcreatejs.Sound.addEventListener(\"fileload\", handleLoad);\n\t *\t\tcreatejs.Sound.registerSounds(sounds);\n\t *\n\t * <h3>Known Browser and OS issues</h3>\n\t * <b>IE 9 HTML Audio limitations</b><br />\n\t * <ul><li>There is a delay in applying volume changes to tags that occurs once playback is started. So if you have\n\t * muted all sounds, they will all play during this delay until the mute applies internally. This happens regardless of\n\t * when or how you apply the volume change, as the tag seems to need to play to apply it.</li>\n     * <li>MP3 encoding will not always work for audio tags, particularly in Internet Explorer. We've found default\n\t * encoding with 64kbps works.</li>\n\t * <li>Occasionally very short samples will get cut off.</li>\n\t * <li>There is a limit to how many audio tags you can load and play at once, which appears to be determined by\n\t * hardware and browser settings.  See {{#crossLink \"HTMLAudioPlugin.MAX_INSTANCES\"}}{{/crossLink}} for a safe\n\t * estimate.</li></ul>\n\t *\n\t * <b>Firefox 25 Web Audio limitations</b>\n\t * <ul><li>mp3 audio files do not load properly on all windows machines, reported\n\t * <a href=\"https://bugzilla.mozilla.org/show_bug.cgi?id=929969\" target=\"_blank\">here</a>. </br>\n\t * For this reason it is recommended to pass another FF supported type (ie ogg) first until this bug is resolved, if\n\t * possible.</li></ul>\n\n\t * <b>Safari limitations</b><br />\n\t * <ul><li>Safari requires Quicktime to be installed for audio playback.</li></ul>\n\t *\n\t * <b>iOS 6 Web Audio limitations</b><br />\n\t * <ul><li>Sound is initially locked, and must be unlocked via a user-initiated event. Please see the section on\n\t * Mobile Playback above.</li>\n\t * <li>A bug exists that will distort un-cached web audio when a video element is present in the DOM that has audio\n\t * at a different sampleRate.</li>\n\t * </ul>\n\t *\n\t * <b>Android HTML Audio limitations</b><br />\n\t * <ul><li>We have no control over audio volume. Only the user can set volume on their device.</li>\n\t * <li>We can only play audio inside a user event (touch/click).  This currently means you cannot loop sound or use\n\t * a delay.</li></ul>\n\t *\n\t * <b>Web Audio and PreloadJS</b><br />\n\t * <ul><li>Web Audio must be loaded through XHR, therefore when used with PreloadJS, tag loading is not possible.\n\t * This means that tag loading can not be used to avoid cross domain issues.</li><ul>\n\t *\n\t * @class Sound\n\t * @static\n\t * @uses EventDispatcher\n\t */\n\tfunction Sound() {\n\t\tthrow \"Sound cannot be instantiated\";\n\t}\n\n\tvar s = Sound;\n\n\n// Static Properties\n\t/**\n\t * The interrupt value to interrupt any currently playing instance with the same source, if the maximum number of\n\t * instances of the sound are already playing.\n\t * @property INTERRUPT_ANY\n\t * @type {String}\n\t * @default any\n\t * @static\n\t */\n\ts.INTERRUPT_ANY = \"any\";\n\n\t/**\n\t * The interrupt value to interrupt the earliest currently playing instance with the same source that progressed the\n\t * least distance in the audio track, if the maximum number of instances of the sound are already playing.\n\t * @property INTERRUPT_EARLY\n\t * @type {String}\n\t * @default early\n\t * @static\n\t */\n\ts.INTERRUPT_EARLY = \"early\";\n\n\t/**\n\t * The interrupt value to interrupt the currently playing instance with the same source that progressed the most\n\t * distance in the audio track, if the maximum number of instances of the sound are already playing.\n\t * @property INTERRUPT_LATE\n\t * @type {String}\n\t * @default late\n\t * @static\n\t */\n\ts.INTERRUPT_LATE = \"late\";\n\n\t/**\n\t * The interrupt value to not interrupt any currently playing instances with the same source, if the maximum number of\n\t * instances of the sound are already playing.\n\t * @property INTERRUPT_NONE\n\t * @type {String}\n\t * @default none\n\t * @static\n\t */\n\ts.INTERRUPT_NONE = \"none\";\n\n\t/**\n\t * Defines the playState of an instance that is still initializing.\n\t * @property PLAY_INITED\n\t * @type {String}\n\t * @default playInited\n\t * @static\n\t */\n\ts.PLAY_INITED = \"playInited\";\n\n\t/**\n\t * Defines the playState of an instance that is currently playing or paused.\n\t * @property PLAY_SUCCEEDED\n\t * @type {String}\n\t * @default playSucceeded\n\t * @static\n\t */\n\ts.PLAY_SUCCEEDED = \"playSucceeded\";\n\n\t/**\n\t * Defines the playState of an instance that was interrupted by another instance.\n\t * @property PLAY_INTERRUPTED\n\t * @type {String}\n\t * @default playInterrupted\n\t * @static\n\t */\n\ts.PLAY_INTERRUPTED = \"playInterrupted\";\n\n\t/**\n\t * Defines the playState of an instance that completed playback.\n\t * @property PLAY_FINISHED\n\t * @type {String}\n\t * @default playFinished\n\t * @static\n\t */\n\ts.PLAY_FINISHED = \"playFinished\";\n\n\t/**\n\t * Defines the playState of an instance that failed to play. This is usually caused by a lack of available channels\n\t * when the interrupt mode was \"INTERRUPT_NONE\", the playback stalled, or the sound could not be found.\n\t * @property PLAY_FAILED\n\t * @type {String}\n\t * @default playFailed\n\t * @static\n\t */\n\ts.PLAY_FAILED = \"playFailed\";\n\n\t/**\n\t * A list of the default supported extensions that Sound will <i>try</i> to play. Plugins will check if the browser\n\t * can play these types, so modifying this list before a plugin is initialized will allow the plugins to try to\n\t * support additional media types.\n\t *\n\t * NOTE this does not currently work for {{#crossLink \"FlashAudioPlugin\"}}{{/crossLink}}.\n\t *\n\t * More details on file formats can be found at <a href=\"http://en.wikipedia.org/wiki/Audio_file_format\" target=\"_blank\">http://en.wikipedia.org/wiki/Audio_file_format</a>.<br />\n\t * A very detailed list of file formats can be found at <a href=\"http://www.fileinfo.com/filetypes/audio\" target=\"_blank\">http://www.fileinfo.com/filetypes/audio</a>.\n\t * @property SUPPORTED_EXTENSIONS\n\t * @type {Array[String]}\n\t * @default [\"mp3\", \"ogg\", \"opus\", \"mpeg\", \"wav\", \"m4a\", \"mp4\", \"aiff\", \"wma\", \"mid\"]\n\t * @since 0.4.0\n\t * @static\n\t */\n\ts.SUPPORTED_EXTENSIONS = [\"mp3\", \"ogg\", \"opus\", \"mpeg\", \"wav\", \"m4a\", \"mp4\", \"aiff\", \"wma\", \"mid\"];\n\n\t/**\n\t * Some extensions use another type of extension support to play (one of them is a codex).  This allows you to map\n\t * that support so plugins can accurately determine if an extension is supported.  Adding to this list can help\n\t * plugins determine more accurately if an extension is supported.\n\t *\n \t * A useful list of extensions for each format can be found at <a href=\"http://html5doctor.com/html5-audio-the-state-of-play/\" target=\"_blank\">http://html5doctor.com/html5-audio-the-state-of-play/</a>.\n\t * @property EXTENSION_MAP\n\t * @type {Object}\n\t * @since 0.4.0\n\t * @default {m4a:\"mp4\"}\n\t * @static\n\t */\n\ts.EXTENSION_MAP = {\n\t\tm4a:\"mp4\"\n\t};\n\n\t/**\n\t * The RegExp pattern used to parse file URIs. This supports simple file names, as well as full domain URIs with\n\t * query strings. The resulting match is: protocol:$1 domain:$2 path:$3 file:$4 extension:$5 query:$6.\n\t * @property FILE_PATTERN\n\t * @type {RegExp}\n\t * @static\n\t * @protected\n\t */\n\ts.FILE_PATTERN = /^(?:(\\w+:)\\/{2}(\\w+(?:\\.\\w+)*\\/?))?([/.]*?(?:[^?]+)?\\/)?((?:[^/?]+)\\.(\\w+))(?:\\?(\\S+)?)?$/;\n\n\n// Class Public properties\n\t/**\n\t * Determines the default behavior for interrupting other currently playing instances with the same source, if the\n\t * maximum number of instances of the sound are already playing.  Currently the default is {{#crossLink \"Sound/INTERRUPT_NONE:property\"}}{{/crossLink}}\n\t * but this can be set and will change playback behavior accordingly.  This is only used when {{#crossLink \"Sound/play\"}}{{/crossLink}}\n\t * is called without passing a value for interrupt.\n\t * @property defaultInterruptBehavior\n\t * @type {String}\n\t * @default Sound.INTERRUPT_NONE, or \"none\"\n\t * @static\n\t * @since 0.4.0\n\t */\n\ts.defaultInterruptBehavior = s.INTERRUPT_NONE;  // OJR does s.INTERRUPT_ANY make more sense as default?  Needs game dev testing to see which case makes more sense.\n\n\t/**\n\t * An array of extensions to attempt to use when loading sound, if the default is unsupported by the active plugin.\n\t * These are applied in order, so if you try to Load Thunder.ogg in a browser that does not support ogg, and your\n\t * extensions array is [\"mp3\", \"m4a\", \"wav\"] it will check mp3 support, then m4a, then wav. The audio files need\n\t * to exist in the same location, as only the extension is altered.\n\t *\n\t * Note that regardless of which file is loaded, you can call {{#crossLink \"Sound/createInstance\"}}{{/crossLink}}\n\t * and {{#crossLink \"Sound/play\"}}{{/crossLink}} using the same id or full source path passed for loading.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *\tvar sounds = [\n\t *\t\t{src:\"myPath/mySound.ogg\", id:\"example\"},\n\t *\t];\n\t *\tcreatejs.Sound.alternateExtensions = [\"mp3\"]; // now if ogg is not supported, SoundJS will try asset0.mp3\n\t *\tcreatejs.Sound.on(\"fileload\", handleLoad); // call handleLoad when each sound loads\n\t *\tcreatejs.Sound.registerSounds(sounds, assetPath);\n\t *\t// ...\n\t *\tcreatejs.Sound.play(\"myPath/mySound.ogg\"); // works regardless of what extension is supported.  Note calling with ID is a better approach\n\t *\n\t * @property alternateExtensions\n\t * @type {Array}\n\t * @since 0.5.2\n\t * @static\n\t */\n\ts.alternateExtensions = [];\n\n\t/**\n\t * The currently active plugin. If this is null, then no plugin could be initialized. If no plugin was specified,\n\t * Sound attempts to apply the default plugins: {{#crossLink \"WebAudioPlugin\"}}{{/crossLink}}, followed by\n\t * {{#crossLink \"HTMLAudioPlugin\"}}{{/crossLink}}.\n\t * @property activePlugin\n\t * @type {Object}\n\t * @static\n\t */\n    s.activePlugin = null;\n\n\n// class getter / setter properties\n\t/**\n\t * Set the master volume of Sound. The master volume is multiplied against each sound's individual volume.  For\n\t * example, if master volume is 0.5 and a sound's volume is 0.5, the resulting volume is 0.25. To set individual\n\t * sound volume, use AbstractSoundInstance {{#crossLink \"AbstractSoundInstance/volume:property\"}}{{/crossLink}} instead.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *     createjs.Sound.volume = 0.5;\n\t *\n\t *\n\t * @property volume\n\t * @type {Number}\n\t * @default 1\n\t * @since 0.6.1\n\t */\n\ts._masterVolume = 1;\n\tObject.defineProperty(s, \"volume\", {\n\t\tget: function () {return this._masterVolume;},\n\t\tset: function (value) {\n\t\t\t\tif (Number(value) == null) {return false;}\n\t\t\t\tvalue = Math.max(0, Math.min(1, value));\n\t\t\t\ts._masterVolume = value;\n\t\t\t\tif (!this.activePlugin || !this.activePlugin.setVolume || !this.activePlugin.setVolume(value)) {\n\t\t\t\t\tvar instances = this._instances;\n\t\t\t\t\tfor (var i = 0, l = instances.length; i < l; i++) {\n\t\t\t\t\t\tinstances[i].setMasterVolume(value);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t});\n\n\t/**\n\t * Mute/Unmute all audio. Note that muted audio still plays at 0 volume. This global mute value is maintained\n\t * separately and when set will override, but not change the mute property of individual instances. To mute an individual\n\t * instance, use AbstractSoundInstance {{#crossLink \"AbstractSoundInstance/muted:property\"}}{{/crossLink}} instead.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *     createjs.Sound.muted = true;\n\t *\n\t *\n\t * @property muted\n\t * @type {Boolean}\n\t * @default false\n\t * @since 0.6.1\n\t */\n\ts._masterMute = false;\n\t// OJR references to the methods were not working, so the code had to be duplicated here\n\tObject.defineProperty(s, \"muted\", {\n\t\tget: function () {return this._masterMute;},\n\t\tset: function (value) {\n\t\t\t\tif (value == null) {return false;}\n\n\t\t\t\tthis._masterMute = value;\n\t\t\t\tif (!this.activePlugin || !this.activePlugin.setMute || !this.activePlugin.setMute(value)) {\n\t\t\t\t\tvar instances = this._instances;\n\t\t\t\t\tfor (var i = 0, l = instances.length; i < l; i++) {\n\t\t\t\t\t\tinstances[i].setMasterMute(value);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t}\n\t});\n\n\t/**\n\t * Get the active plugins capabilities, which help determine if a plugin can be used in the current environment,\n\t * or if the plugin supports a specific feature. Capabilities include:\n\t * <ul>\n\t *     <li><b>panning:</b> If the plugin can pan audio from left to right</li>\n\t *     <li><b>volume;</b> If the plugin can control audio volume.</li>\n\t *     <li><b>tracks:</b> The maximum number of audio tracks that can be played back at a time. This will be -1\n\t *     if there is no known limit.</li>\n\t * <br />An entry for each file type in {{#crossLink \"Sound/SUPPORTED_EXTENSIONS:property\"}}{{/crossLink}}:\n\t *     <li><b>mp3:</b> If MP3 audio is supported.</li>\n\t *     <li><b>ogg:</b> If OGG audio is supported.</li>\n\t *     <li><b>wav:</b> If WAV audio is supported.</li>\n\t *     <li><b>mpeg:</b> If MPEG audio is supported.</li>\n\t *     <li><b>m4a:</b> If M4A audio is supported.</li>\n\t *     <li><b>mp4:</b> If MP4 audio is supported.</li>\n\t *     <li><b>aiff:</b> If aiff audio is supported.</li>\n\t *     <li><b>wma:</b> If wma audio is supported.</li>\n\t *     <li><b>mid:</b> If mid audio is supported.</li>\n\t * </ul>\n\t *\n\t * You can get a specific capability of the active plugin using standard object notation\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      var mp3 = createjs.Sound.capabilities.mp3;\n\t *\n\t * Note this property is read only.\n\t *\n\t * @property capabilities\n\t * @type {Object}\n\t * @static\n\t * @readOnly\n\t * @since 0.6.1\n\t */\n\tObject.defineProperty(s, \"capabilities\", {\n\t\tget: function () {\n\t\t\t\t\tif (s.activePlugin == null) {return null;}\n\t\t\t\t\treturn s.activePlugin._capabilities;\n\t\t\t\t},\n\t\tset: function (value) { return false;}\n\t});\n\n\n// Class Private properties\n\t/**\n\t * Determines if the plugins have been registered. If false, the first call to play() will instantiate the default\n\t * plugins ({{#crossLink \"WebAudioPlugin\"}}{{/crossLink}}, followed by {{#crossLink \"HTMLAudioPlugin\"}}{{/crossLink}}).\n\t * If plugins have been registered, but none are applicable, then sound playback will fail.\n\t * @property _pluginsRegistered\n\t * @type {Boolean}\n\t * @default false\n\t * @static\n\t * @protected\n\t */\n\ts._pluginsRegistered = false;\n\n\t/**\n\t * Used internally to assign unique IDs to each AbstractSoundInstance.\n\t * @property _lastID\n\t * @type {Number}\n\t * @static\n\t * @protected\n\t */\n\ts._lastID = 0;\n\n\t/**\n\t * An array containing all currently playing instances. This allows Sound to control the volume, mute, and playback of\n\t * all instances when using static APIs like {{#crossLink \"Sound/stop\"}}{{/crossLink}} and {{#crossLink \"Sound/setVolume\"}}{{/crossLink}}.\n\t * When an instance has finished playback, it gets removed via the {{#crossLink \"Sound/finishedPlaying\"}}{{/crossLink}}\n\t * method. If the user replays an instance, it gets added back in via the {{#crossLink \"Sound/_beginPlaying\"}}{{/crossLink}}\n\t * method.\n\t * @property _instances\n\t * @type {Array}\n\t * @protected\n\t * @static\n\t */\n\ts._instances = [];\n\n\t/**\n\t * An object hash storing objects with sound sources, startTime, and duration via there corresponding ID.\n\t * @property _idHash\n\t * @type {Object}\n\t * @protected\n\t * @static\n\t */\n\ts._idHash = {};\n\n\t/**\n\t * An object hash that stores preloading sound sources via the parsed source that is passed to the plugin.  Contains the\n\t * source, id, and data that was passed in by the user.  Parsed sources can contain multiple instances of source, id,\n\t * and data.\n\t * @property _preloadHash\n\t * @type {Object}\n\t * @protected\n\t * @static\n\t */\n\ts._preloadHash = {};\n\n\t/**\n\t * An object hash storing {{#crossLink \"PlayPropsConfig\"}}{{/crossLink}} via the parsed source that is passed as defaultPlayProps in\n\t * {{#crossLink \"Sound/registerSound\"}}{{/crossLink}} and {{#crossLink \"Sound/registerSounds\"}}{{/crossLink}}.\n\t * @property _defaultPlayPropsHash\n\t * @type {Object}\n\t * @protected\n\t * @static\n\t * @since 0.6.1\n\t */\n\ts._defaultPlayPropsHash = {};\n\n\n// EventDispatcher methods:\n\ts.addEventListener = null;\n\ts.removeEventListener = null;\n\ts.removeAllEventListeners = null;\n\ts.dispatchEvent = null;\n\ts.hasEventListener = null;\n\ts._listeners = null;\n\n\tcreatejs.EventDispatcher.initialize(s); // inject EventDispatcher methods.\n\n\n// Events\n\t/**\n\t * This event is fired when a file finishes loading internally. This event is fired for each loaded sound,\n\t * so any handler methods should look up the <code>event.src</code> to handle a particular sound.\n\t * @event fileload\n\t * @param {Object} target The object that dispatched the event.\n\t * @param {String} type The event type.\n\t * @param {String} src The source of the sound that was loaded.\n\t * @param {String} [id] The id passed in when the sound was registered. If one was not provided, it will be null.\n\t * @param {Number|Object} [data] Any additional data associated with the item. If not provided, it will be undefined.\n\t * @since 0.4.1\n\t */\n\n\t/**\n\t * This event is fired when a file fails loading internally. This event is fired for each loaded sound,\n\t * so any handler methods should look up the <code>event.src</code> to handle a particular sound.\n\t * @event fileerror\n\t * @param {Object} target The object that dispatched the event.\n\t * @param {String} type The event type.\n\t * @param {String} src The source of the sound that was loaded.\n\t * @param {String} [id] The id passed in when the sound was registered. If one was not provided, it will be null.\n\t * @param {Number|Object} [data] Any additional data associated with the item. If not provided, it will be undefined.\n\t * @since 0.6.0\n\t */\n\n\n// Class Public Methods\n\t/**\n\t * Get the preload rules to allow Sound to be used as a plugin by <a href=\"http://preloadjs.com\" target=\"_blank\">PreloadJS</a>.\n\t * Any load calls that have the matching type or extension will fire the callback method, and use the resulting\n\t * object, which is potentially modified by Sound. This helps when determining the correct path, as well as\n\t * registering the audio instance(s) with Sound. This method should not be called, except by PreloadJS.\n\t * @method getPreloadHandlers\n\t * @return {Object} An object containing:\n\t * <ul><li>callback: A preload callback that is fired when a file is added to PreloadJS, which provides\n\t *      Sound a mechanism to modify the load parameters, select the correct file format, register the sound, etc.</li>\n\t *      <li>types: A list of file types that are supported by Sound (currently supports \"sound\").</li>\n\t *      <li>extensions: A list of file extensions that are supported by Sound (see {{#crossLink \"Sound/SUPPORTED_EXTENSIONS:property\"}}{{/crossLink}}).</li></ul>\n\t * @static\n\t * @protected\n\t */\n\ts.getPreloadHandlers = function () {\n\t\treturn {\n\t\t\tcallback:createjs.proxy(s.initLoad, s),\n\t\t\ttypes:[\"sound\"],\n\t\t\textensions:s.SUPPORTED_EXTENSIONS\n\t\t};\n\t};\n\n\t/**\n\t * Used to dispatch fileload events from internal loading.\n\t * @method _handleLoadComplete\n\t * @param event A loader event.\n\t * @protected\n\t * @static\n\t * @since 0.6.0\n\t */\n\ts._handleLoadComplete = function(event) {\n\t\tvar src = event.target.getItem().src;\n\t\tif (!s._preloadHash[src]) {return;}\n\n\t\tfor (var i = 0, l = s._preloadHash[src].length; i < l; i++) {\n\t\t\tvar item = s._preloadHash[src][i];\n\t\t\ts._preloadHash[src][i] = true;\n\n\t\t\tif (!s.hasEventListener(\"fileload\")) { continue; }\n\n\t\t\tvar event = new createjs.Event(\"fileload\");\n\t\t\tevent.src = item.src;\n\t\t\tevent.id = item.id;\n\t\t\tevent.data = item.data;\n\t\t\tevent.sprite = item.sprite;\n\n\t\t\ts.dispatchEvent(event);\n\t\t}\n\t};\n\n\t/**\n\t * Used to dispatch error events from internal preloading.\n\t * @param event\n\t * @protected\n\t * @since 0.6.0\n\t * @static\n\t */\n\ts._handleLoadError = function(event) {\n\t\tvar src = event.target.getItem().src;\n\t\tif (!s._preloadHash[src]) {return;}\n\n\t\tfor (var i = 0, l = s._preloadHash[src].length; i < l; i++) {\n\t\t\tvar item = s._preloadHash[src][i];\n\t\t\ts._preloadHash[src][i] = false;\n\n\t\t\tif (!s.hasEventListener(\"fileerror\")) { continue; }\n\n\t\t\tvar event = new createjs.Event(\"fileerror\");\n\t\t\tevent.src = item.src;\n\t\t\tevent.id = item.id;\n\t\t\tevent.data = item.data;\n\t\t\tevent.sprite = item.sprite;\n\n\t\t\ts.dispatchEvent(event);\n\t\t}\n\t};\n\n\t/**\n\t * Used by {{#crossLink \"Sound/registerPlugins\"}}{{/crossLink}} to register a Sound plugin.\n\t *\n\t * @method _registerPlugin\n\t * @param {Object} plugin The plugin class to install.\n\t * @return {Boolean} Whether the plugin was successfully initialized.\n\t * @static\n\t * @private\n\t */\n\ts._registerPlugin = function (plugin) {\n\t\t// Note: Each plugin is passed in as a class reference, but we store the activePlugin as an instance\n\t\tif (plugin.isSupported()) {\n\t\t\ts.activePlugin = new plugin();\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t};\n\n\t/**\n\t * Register a list of Sound plugins, in order of precedence. To register a single plugin, pass a single element in the array.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      createjs.FlashAudioPlugin.swfPath = \"../src/soundjs/flashaudio/\";\n\t *      createjs.Sound.registerPlugins([createjs.WebAudioPlugin, createjs.HTMLAudioPlugin, createjs.FlashAudioPlugin]);\n\t *\n\t * @method registerPlugins\n\t * @param {Array} plugins An array of plugins classes to install.\n\t * @return {Boolean} Whether a plugin was successfully initialized.\n\t * @static\n\t */\n\ts.registerPlugins = function (plugins) {\n\t\ts._pluginsRegistered = true;\n\t\tfor (var i = 0, l = plugins.length; i < l; i++) {\n\t\t\tif (s._registerPlugin(plugins[i])) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t};\n\n\t/**\n\t * Initialize the default plugins. This method is automatically called when any audio is played or registered before\n\t * the user has manually registered plugins, and enables Sound to work without manual plugin setup. Currently, the\n\t * default plugins are {{#crossLink \"WebAudioPlugin\"}}{{/crossLink}} followed by {{#crossLink \"HTMLAudioPlugin\"}}{{/crossLink}}.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t * \tif (!createjs.initializeDefaultPlugins()) { return; }\n\t *\n\t * @method initializeDefaultPlugins\n\t * @returns {Boolean} True if a plugin was initialized, false otherwise.\n\t * @since 0.4.0\n\t * @static\n\t */\n\ts.initializeDefaultPlugins = function () {\n\t\tif (s.activePlugin != null) {return true;}\n\t\tif (s._pluginsRegistered) {return false;}\n\t\tif (s.registerPlugins([createjs.WebAudioPlugin, createjs.HTMLAudioPlugin])) {return true;}\n\t\treturn false;\n\t};\n\n\t/**\n\t * Determines if Sound has been initialized, and a plugin has been activated.\n\t *\n\t * <h4>Example</h4>\n\t * This example sets up a Flash fallback, but only if there is no plugin specified yet.\n\t *\n\t * \tif (!createjs.Sound.isReady()) {\n\t *\t\tcreatejs.FlashAudioPlugin.swfPath = \"../src/soundjs/flashaudio/\";\n\t * \t\tcreatejs.Sound.registerPlugins([createjs.WebAudioPlugin, createjs.HTMLAudioPlugin, createjs.FlashAudioPlugin]);\n\t *\t}\n\t *\n\t * @method isReady\n\t * @return {Boolean} If Sound has initialized a plugin.\n\t * @static\n\t */\n\ts.isReady = function () {\n\t\treturn (s.activePlugin != null);\n\t};\n\n\t/**\n\t * Deprecated, please use {{#crossLink \"Sound/capabilities:property\"}}{{/crossLink}} instead.\n\t *\n\t * @method getCapabilities\n\t * @return {Object} An object containing the capabilities of the active plugin.\n\t * @static\n\t * @deprecated\n\t */\n\ts.getCapabilities = function () {\n\t\tif (s.activePlugin == null) {return null;}\n\t\treturn s.activePlugin._capabilities;\n\t};\n\n\t/**\n\t * Deprecated, please use {{#crossLink \"Sound/capabilities:property\"}}{{/crossLink}} instead.\n\t *\n\t * @method getCapability\n\t * @param {String} key The capability to retrieve\n\t * @return {Number|Boolean} The value of the capability.\n\t * @static\n\t * @see getCapabilities\n\t * @deprecated\n\t */\n\ts.getCapability = function (key) {\n\t\tif (s.activePlugin == null) {return null;}\n\t\treturn s.activePlugin._capabilities[key];\n\t};\n\n\t/**\n\t * Process manifest items from <a href=\"http://preloadjs.com\" target=\"_blank\">PreloadJS</a>. This method is intended\n\t * for usage by a plugin, and not for direct interaction.\n\t * @method initLoad\n\t * @param {Object} src The object to load.\n\t * @return {Object|AbstractLoader} An instance of AbstractLoader.\n\t * @protected\n\t * @static\n\t */\n\ts.initLoad = function (loadItem) {\n\t\treturn s._registerSound(loadItem);\n\t};\n\n\t/**\n\t * Internal method for loading sounds.  This should not be called directly.\n\t *\n\t * @method _registerSound\n\t * @param {Object} src The object to load, containing src property and optionally containing id and data.\n\t * @return {Object} An object with the modified values that were passed in, which defines the sound.\n\t * Returns false if the source cannot be parsed or no plugins can be initialized.\n\t * Returns true if the source is already loaded.\n\t * @static\n\t * @private\n\t * @since 0.6.0\n\t */\n\n\ts._registerSound = function (loadItem) {\n\t\tif (!s.initializeDefaultPlugins()) {return false;}\n\n\t\tvar details;\n\t\tif (loadItem.src instanceof Object) {\n\t\t\tdetails = s._parseSrc(loadItem.src);\n\t\t\tdetails.src = loadItem.path + details.src;\n\t\t} else {\n\t\t\tdetails = s._parsePath(loadItem.src);\n\t\t}\n\t\tif (details == null) {return false;}\n\t\tloadItem.src = details.src;\n\t\tloadItem.type = \"sound\";\n\n\t\tvar data = loadItem.data;\n\t\tvar numChannels = null;\n\t\tif (data != null) {\n\t\t\tif (!isNaN(data.channels)) {\n\t\t\t\tnumChannels = parseInt(data.channels);\n\t\t\t} else if (!isNaN(data)) {\n\t\t\t\tnumChannels = parseInt(data);\n\t\t\t}\n\n\t\t\tif(data.audioSprite) {\n\t\t\t\tvar sp;\n\t\t\t\tfor(var i = data.audioSprite.length; i--; ) {\n\t\t\t\t\tsp = data.audioSprite[i];\n\t\t\t\t\ts._idHash[sp.id] = {src: loadItem.src, startTime: parseInt(sp.startTime), duration: parseInt(sp.duration)};\n\n\t\t\t\t\tif (sp.defaultPlayProps) {\n\t\t\t\t\t\ts._defaultPlayPropsHash[sp.id] = createjs.PlayPropsConfig.create(sp.defaultPlayProps);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (loadItem.id != null) {s._idHash[loadItem.id] = {src: loadItem.src}};\n\t\tvar loader = s.activePlugin.register(loadItem);\n\n\t\tSoundChannel.create(loadItem.src, numChannels);\n\n\t\t// return the number of instances to the user.  This will also be returned in the load event.\n\t\tif (data == null || !isNaN(data)) {\n\t\t\tloadItem.data = numChannels || SoundChannel.maxPerChannel();\n\t\t} else {\n\t\t\tloadItem.data.channels = numChannels || SoundChannel.maxPerChannel();\n\t\t}\n\n\t\tif (loader.type) {loadItem.type = loader.type;}\n\n\t\tif (loadItem.defaultPlayProps) {\n\t\t\ts._defaultPlayPropsHash[loadItem.src] = createjs.PlayPropsConfig.create(loadItem.defaultPlayProps);\n\t\t}\n\t\treturn loader;\n\t};\n\n\t/**\n\t * Register an audio file for loading and future playback in Sound. This is automatically called when using\n\t * <a href=\"http://preloadjs.com\" target=\"_blank\">PreloadJS</a>.  It is recommended to register all sounds that\n\t * need to be played back in order to properly prepare and preload them. Sound does internal preloading when required.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      createjs.Sound.alternateExtensions = [\"mp3\"];\n\t *      createjs.Sound.on(\"fileload\", handleLoad); // add an event listener for when load is completed\n\t *      createjs.Sound.registerSound(\"myAudioPath/mySound.ogg\", \"myID\", 3);\n\t *      createjs.Sound.registerSound({ogg:\"path1/mySound.ogg\", mp3:\"path2/mySoundNoExtension\"}, \"myID\", 3);\n\t *\n\t *\n\t * @method registerSound\n\t * @param {String | Object} src The source or an Object with a \"src\" property or an Object with multiple extension labeled src properties.\n\t * @param {String} [id] An id specified by the user to play the sound later.  Note id is required for when src is multiple extension labeled src properties.\n\t * @param {Number | Object} [data] Data associated with the item. Sound uses the data parameter as the number of\n\t * channels for an audio instance, however a \"channels\" property can be appended to the data object if it is used\n\t * for other information. The audio channels will set a default based on plugin if no value is found.\n\t * Sound also uses the data property to hold an {{#crossLink \"AudioSprite\"}}{{/crossLink}} array of objects in the following format {id, startTime, duration}.<br/>\n\t *   id used to play the sound later, in the same manner as a sound src with an id.<br/>\n\t *   startTime is the initial offset to start playback and loop from, in milliseconds.<br/>\n\t *   duration is the amount of time to play the clip for, in milliseconds.<br/>\n\t * This allows Sound to support audio sprites that are played back by id.\n\t * @param {string} basePath Set a path that will be prepended to src for loading.\n\t * @param {Object | PlayPropsConfig} defaultPlayProps Optional Playback properties that will be set as the defaults on any new AbstractSoundInstance.\n\t * See {{#crossLink \"PlayPropsConfig\"}}{{/crossLink}} for options.\n\t * @return {Object} An object with the modified values that were passed in, which defines the sound.\n\t * Returns false if the source cannot be parsed or no plugins can be initialized.\n\t * Returns true if the source is already loaded.\n\t * @static\n\t * @since 0.4.0\n\t */\n\ts.registerSound = function (src, id, data, basePath, defaultPlayProps) {\n\t\tvar loadItem = {src: src, id: id, data:data, defaultPlayProps:defaultPlayProps};\n\t\tif (src instanceof Object && src.src) {\n\t\t\tbasePath = id;\n\t\t\tloadItem = src;\n\t\t}\n\t\tloadItem = createjs.LoadItem.create(loadItem);\n\t\tloadItem.path = basePath;\n\n\t\tif (basePath != null && !(loadItem.src instanceof Object)) {loadItem.src = basePath + src;}\n\n\t\tvar loader = s._registerSound(loadItem);\n\t\tif(!loader) {return false;}\n\n\t\tif (!s._preloadHash[loadItem.src]) { s._preloadHash[loadItem.src] = [];}\n\t\ts._preloadHash[loadItem.src].push(loadItem);\n\t\tif (s._preloadHash[loadItem.src].length == 1) {\n\t\t\t// OJR note this will disallow reloading a sound if loading fails or the source changes\n\t\t\tloader.on(\"complete\", createjs.proxy(this._handleLoadComplete, this));\n\t\t\tloader.on(\"error\", createjs.proxy(this._handleLoadError, this));\n\t\t\ts.activePlugin.preload(loader);\n\t\t} else {\n\t\t\tif (s._preloadHash[loadItem.src][0] == true) {return true;}\n\t\t}\n\n\t\treturn loadItem;\n\t};\n\n\t/**\n\t * Register an array of audio files for loading and future playback in Sound. It is recommended to register all\n\t * sounds that need to be played back in order to properly prepare and preload them. Sound does internal preloading\n\t * when required.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t * \t\tvar assetPath = \"./myAudioPath/\";\n\t *      var sounds = [\n\t *          {src:\"asset0.ogg\", id:\"example\"},\n\t *          {src:\"asset1.ogg\", id:\"1\", data:6},\n\t *          {src:\"asset2.mp3\", id:\"works\"}\n\t *          {src:{mp3:\"path1/asset3.mp3\", ogg:\"path2/asset3NoExtension}, id:\"better\"}\n\t *      ];\n\t *      createjs.Sound.alternateExtensions = [\"mp3\"];\t// if the passed extension is not supported, try this extension\n\t *      createjs.Sound.on(\"fileload\", handleLoad); // call handleLoad when each sound loads\n\t *      createjs.Sound.registerSounds(sounds, assetPath);\n\t *\n\t * @method registerSounds\n\t * @param {Array} sounds An array of objects to load. Objects are expected to be in the format needed for\n\t * {{#crossLink \"Sound/registerSound\"}}{{/crossLink}}: <code>{src:srcURI, id:ID, data:Data}</code>\n\t * with \"id\" and \"data\" being optional.\n\t * You can also pass an object with path and manifest properties, where path is a basePath and manifest is an array of objects to load.\n\t * Note id is required if src is an object with extension labeled src properties.\n\t * @param {string} basePath Set a path that will be prepended to each src when loading.  When creating, playing, or removing\n\t * audio that was loaded with a basePath by src, the basePath must be included.\n\t * @return {Object} An array of objects with the modified values that were passed in, which defines each sound.\n\t * Like registerSound, it will return false for any values when the source cannot be parsed or if no plugins can be initialized.\n\t * Also, it will return true for any values when the source is already loaded.\n\t * @static\n\t * @since 0.6.0\n\t */\n\ts.registerSounds = function (sounds, basePath) {\n\t\tvar returnValues = [];\n\t\tif (sounds.path) {\n\t\t\tif (!basePath) {\n\t\t\t\tbasePath = sounds.path;\n\t\t\t} else {\n\t\t\t\tbasePath = basePath + sounds.path;\n\t\t\t}\n\t\t\tsounds = sounds.manifest;\n\t\t\t// TODO document this feature\n\t\t}\n\t\tfor (var i = 0, l = sounds.length; i < l; i++) {\n\t\t\treturnValues[i] = createjs.Sound.registerSound(sounds[i].src, sounds[i].id, sounds[i].data, basePath, sounds[i].defaultPlayProps);\n\t\t}\n\t\treturn returnValues;\n\t};\n\n\t/**\n\t * Remove a sound that has been registered with {{#crossLink \"Sound/registerSound\"}}{{/crossLink}} or\n\t * {{#crossLink \"Sound/registerSounds\"}}{{/crossLink}}.\n\t * <br />Note this will stop playback on active instances playing this sound before deleting them.\n\t * <br />Note if you passed in a basePath, you need to pass it or prepend it to the src here.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      createjs.Sound.removeSound(\"myID\");\n\t *      createjs.Sound.removeSound(\"myAudioBasePath/mySound.ogg\");\n\t *      createjs.Sound.removeSound(\"myPath/myOtherSound.mp3\", \"myBasePath/\");\n\t *      createjs.Sound.removeSound({mp3:\"musicNoExtension\", ogg:\"music.ogg\"}, \"myBasePath/\");\n\t *\n\t * @method removeSound\n\t * @param {String | Object} src The src or ID of the audio, or an Object with a \"src\" property, or an Object with multiple extension labeled src properties.\n\t * @param {string} basePath Set a path that will be prepended to each src when removing.\n\t * @return {Boolean} True if sound is successfully removed.\n\t * @static\n\t * @since 0.4.1\n\t */\n\ts.removeSound = function(src, basePath) {\n\t\tif (s.activePlugin == null) {return false;}\n\n\t\tif (src instanceof Object && src.src) {src = src.src;}\n\n\t\tvar details;\n\t\tif (src instanceof Object) {\n\t\t\tdetails = s._parseSrc(src);\n\t\t} else {\n\t\t\tsrc = s._getSrcById(src).src;\n\t\t\tdetails = s._parsePath(src);\n\t\t}\n\t\tif (details == null) {return false;}\n\t\tsrc = details.src;\n\t\tif (basePath != null) {src = basePath + src;}\n\n\t\tfor(var prop in s._idHash){\n\t\t\tif(s._idHash[prop].src == src) {\n\t\t\t\tdelete(s._idHash[prop]);\n\t\t\t}\n\t\t}\n\n\t\t// clear from SoundChannel, which also stops and deletes all instances\n\t\tSoundChannel.removeSrc(src);\n\n\t\tdelete(s._preloadHash[src]);\n\n\t\ts.activePlugin.removeSound(src);\n\n\t\treturn true;\n\t};\n\n\t/**\n\t * Remove an array of audio files that have been registered with {{#crossLink \"Sound/registerSound\"}}{{/crossLink}} or\n\t * {{#crossLink \"Sound/registerSounds\"}}{{/crossLink}}.\n\t * <br />Note this will stop playback on active instances playing this audio before deleting them.\n\t * <br />Note if you passed in a basePath, you need to pass it or prepend it to the src here.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t * \t\tassetPath = \"./myPath/\";\n\t *      var sounds = [\n\t *          {src:\"asset0.ogg\", id:\"example\"},\n\t *          {src:\"asset1.ogg\", id:\"1\", data:6},\n\t *          {src:\"asset2.mp3\", id:\"works\"}\n\t *      ];\n\t *      createjs.Sound.removeSounds(sounds, assetPath);\n\t *\n\t * @method removeSounds\n\t * @param {Array} sounds An array of objects to remove. Objects are expected to be in the format needed for\n\t * {{#crossLink \"Sound/removeSound\"}}{{/crossLink}}: <code>{srcOrID:srcURIorID}</code>.\n\t * You can also pass an object with path and manifest properties, where path is a basePath and manifest is an array of objects to remove.\n\t * @param {string} basePath Set a path that will be prepended to each src when removing.\n\t * @return {Object} An array of Boolean values representing if the sounds with the same array index were\n\t * successfully removed.\n\t * @static\n\t * @since 0.4.1\n\t */\n\ts.removeSounds = function (sounds, basePath) {\n\t\tvar returnValues = [];\n\t\tif (sounds.path) {\n\t\t\tif (!basePath) {\n\t\t\t\tbasePath = sounds.path;\n\t\t\t} else {\n\t\t\t\tbasePath = basePath + sounds.path;\n\t\t\t}\n\t\t\tsounds = sounds.manifest;\n\t\t}\n\t\tfor (var i = 0, l = sounds.length; i < l; i++) {\n\t\t\treturnValues[i] = createjs.Sound.removeSound(sounds[i].src, basePath);\n\t\t}\n\t\treturn returnValues;\n\t};\n\n\t/**\n\t * Remove all sounds that have been registered with {{#crossLink \"Sound/registerSound\"}}{{/crossLink}} or\n\t * {{#crossLink \"Sound/registerSounds\"}}{{/crossLink}}.\n\t * <br />Note this will stop playback on all active sound instances before deleting them.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *     createjs.Sound.removeAllSounds();\n\t *\n\t * @method removeAllSounds\n\t * @static\n\t * @since 0.4.1\n\t */\n\ts.removeAllSounds = function() {\n\t\ts._idHash = {};\n\t\ts._preloadHash = {};\n\t\tSoundChannel.removeAll();\n\t\tif (s.activePlugin) {s.activePlugin.removeAllSounds();}\n\t};\n\n\t/**\n\t * Check if a source has been loaded by internal preloaders. This is necessary to ensure that sounds that are\n\t * not completed preloading will not kick off a new internal preload if they are played.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *     var mySound = \"assetPath/asset0.ogg\";\n\t *     if(createjs.Sound.loadComplete(mySound) {\n\t *         createjs.Sound.play(mySound);\n\t *     }\n\t *\n\t * @method loadComplete\n\t * @param {String} src The src or id that is being loaded.\n\t * @return {Boolean} If the src is already loaded.\n\t * @since 0.4.0\n\t * @static\n\t */\n\ts.loadComplete = function (src) {\n\t\tif (!s.isReady()) { return false; }\n\t\tvar details = s._parsePath(src);\n\t\tif (details) {\n\t\t\tsrc = s._getSrcById(details.src).src;\n\t\t} else {\n\t\t\tsrc = s._getSrcById(src).src;\n\t\t}\n\t\tif(s._preloadHash[src] == undefined) {return false;}\n\t\treturn (s._preloadHash[src][0] == true);  // src only loads once, so if it's true for the first it's true for all\n\t};\n\n\t/**\n\t * Parse the path of a sound. Alternate extensions will be attempted in order if the\n\t * current extension is not supported\n\t * @method _parsePath\n\t * @param {String} value The path to an audio source.\n\t * @return {Object} A formatted object that can be registered with the {{#crossLink \"Sound/activePlugin:property\"}}{{/crossLink}}\n\t * and returned to a preloader like <a href=\"http://preloadjs.com\" target=\"_blank\">PreloadJS</a>.\n\t * @protected\n\t * @static\n\t */\n\ts._parsePath = function (value) {\n\t\tif (typeof(value) != \"string\") {value = value.toString();}\n\n\t\tvar match = value.match(s.FILE_PATTERN);\n\t\tif (match == null) {return false;}\n\n\t\tvar name = match[4];\n\t\tvar ext = match[5];\n\t\tvar c = s.capabilities;\n\t\tvar i = 0;\n\t\twhile (!c[ext]) {\n\t\t\text = s.alternateExtensions[i++];\n\t\t\tif (i > s.alternateExtensions.length) { return null;}\t// no extensions are supported\n\t\t}\n\t\tvalue = value.replace(\".\"+match[5], \".\"+ext);\n\n\t\tvar ret = {name:name, src:value, extension:ext};\n\t\treturn ret;\n\t};\n\n\t/**\n\t * Parse the path of a sound based on properties of src matching with supported extensions.\n\t * Returns false if none of the properties are supported\n\t * @method _parseSrc\n\t * @param {Object} value The paths to an audio source, indexed by extension type.\n\t * @return {Object} A formatted object that can be registered with the {{#crossLink \"Sound/activePlugin:property\"}}{{/crossLink}}\n\t * and returned to a preloader like <a href=\"http://preloadjs.com\" target=\"_blank\">PreloadJS</a>.\n\t * @protected\n\t * @static\n\t */\n\ts._parseSrc = function (value) {\n\t\tvar ret = {name:undefined, src:undefined, extension:undefined};\n\t\tvar c = s.capabilities;\n\n\t\tfor (var prop in value) {\n\t\t  if(value.hasOwnProperty(prop) && c[prop]) {\n\t\t\t\tret.src = value[prop];\n\t\t\t\tret.extension = prop;\n\t\t\t\tbreak;\n\t\t  }\n\t\t}\n\t\tif (!ret.src) {return false;}\t// no matches\n\n\t\tvar i = ret.src.lastIndexOf(\"/\");\n\t\tif (i != -1) {\n\t\t\tret.name = ret.src.slice(i+1);\n\t\t} else {\n\t\t\tret.name = ret.src;\n\t\t}\n\n\t\treturn ret;\n\t};\n\n\t/* ---------------\n\t Static API.\n\t --------------- */\n\t/**\n\t * Play a sound and get a {{#crossLink \"AbstractSoundInstance\"}}{{/crossLink}} to control. If the sound fails to play, a\n\t * AbstractSoundInstance will still be returned, and have a playState of {{#crossLink \"Sound/PLAY_FAILED:property\"}}{{/crossLink}}.\n\t * Note that even on sounds with failed playback, you may still be able to call AbstractSoundInstance {{#crossLink \"AbstractSoundInstance/play\"}}{{/crossLink}},\n\t * since the failure could be due to lack of available channels. If the src does not have a supported extension or\n\t * if there is no available plugin, a default AbstractSoundInstance will be returned which will not play any audio, but will not generate errors.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      createjs.Sound.on(\"fileload\", handleLoad);\n\t *      createjs.Sound.registerSound(\"myAudioPath/mySound.mp3\", \"myID\", 3);\n\t *      function handleLoad(event) {\n\t *      \tcreatejs.Sound.play(\"myID\");\n\t *      \t// store off AbstractSoundInstance for controlling\n\t *      \tvar myInstance = createjs.Sound.play(\"myID\", {interrupt: createjs.Sound.INTERRUPT_ANY, loop:-1});\n\t *      }\n\t *\n\t * NOTE to create an audio sprite that has not already been registered, both startTime and duration need to be set.\n\t * This is only when creating a new audio sprite, not when playing using the id of an already registered audio sprite.\n\t *\n\t * <b>Parameters Deprecated</b><br />\n\t * The parameters for this method are deprecated in favor of a single parameter that is an Object or {{#crossLink \"PlayPropsConfig\"}}{{/crossLink}}.\n\t *\n\t * @method play\n\t * @param {String} src The src or ID of the audio.\n\t * @param {String | Object} [interrupt=\"none\"|options] <b>This parameter will be renamed playProps in the next release.</b><br />\n\t * This parameter can be an instance of {{#crossLink \"PlayPropsConfig\"}}{{/crossLink}} or an Object that contains any or all optional properties by name,\n\t * including: interrupt, delay, offset, loop, volume, pan, startTime, and duration (see the above code sample).\n\t * <br /><strong>OR</strong><br />\n\t * <b>Deprecated</b> How to interrupt any currently playing instances of audio with the same source,\n\t * if the maximum number of instances of the sound are already playing. Values are defined as <code>INTERRUPT_TYPE</code>\n\t * constants on the Sound class, with the default defined by {{#crossLink \"Sound/defaultInterruptBehavior:property\"}}{{/crossLink}}.\n\t * @param {Number} [delay=0] <b>Deprecated</b> The amount of time to delay the start of audio playback, in milliseconds.\n\t * @param {Number} [offset=0] <b>Deprecated</b> The offset from the start of the audio to begin playback, in milliseconds.\n\t * @param {Number} [loop=0] <b>Deprecated</b> How many times the audio loops when it reaches the end of playback. The default is 0 (no\n\t * loops), and -1 can be used for infinite playback.\n\t * @param {Number} [volume=1] <b>Deprecated</b> The volume of the sound, between 0 and 1. Note that the master volume is applied\n\t * against the individual volume.\n\t * @param {Number} [pan=0] <b>Deprecated</b> The left-right pan of the sound (if supported), between -1 (left) and 1 (right).\n\t * @param {Number} [startTime=null] <b>Deprecated</b> To create an audio sprite (with duration), the initial offset to start playback and loop from, in milliseconds.\n\t * @param {Number} [duration=null] <b>Deprecated</b> To create an audio sprite (with startTime), the amount of time to play the clip for, in milliseconds.\n\t * @return {AbstractSoundInstance} A {{#crossLink \"AbstractSoundInstance\"}}{{/crossLink}} that can be controlled after it is created.\n\t * @static\n\t */\n\ts.play = function (src, interrupt, delay, offset, loop, volume, pan, startTime, duration) {\n\t\tvar playProps;\n\t\tif (interrupt instanceof Object || interrupt instanceof createjs.PlayPropsConfig) {\n\t\t\tplayProps = createjs.PlayPropsConfig.create(interrupt);\n\t\t} else {\n\t\t\tplayProps = createjs.PlayPropsConfig.create({interrupt:interrupt, delay:delay, offset:offset, loop:loop, volume:volume, pan:pan, startTime:startTime, duration:duration});\n\t\t}\n\t\tvar instance = s.createInstance(src, playProps.startTime, playProps.duration);\n\t\tvar ok = s._playInstance(instance, playProps);\n\t\tif (!ok) {instance._playFailed();}\n\t\treturn instance;\n\t};\n\n\t/**\n\t * Creates a {{#crossLink \"AbstractSoundInstance\"}}{{/crossLink}} using the passed in src. If the src does not have a\n\t * supported extension or if there is no available plugin, a default AbstractSoundInstance will be returned that can be\n\t * called safely but does nothing.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      var myInstance = null;\n\t *      createjs.Sound.on(\"fileload\", handleLoad);\n\t *      createjs.Sound.registerSound(\"myAudioPath/mySound.mp3\", \"myID\", 3);\n\t *      function handleLoad(event) {\n\t *      \tmyInstance = createjs.Sound.createInstance(\"myID\");\n\t *      \t// alternately we could call the following\n\t *      \tmyInstance = createjs.Sound.createInstance(\"myAudioPath/mySound.mp3\");\n\t *      }\n\t *\n\t * NOTE to create an audio sprite that has not already been registered, both startTime and duration need to be set.\n\t * This is only when creating a new audio sprite, not when playing using the id of an already registered audio sprite.\n\t *\n\t * @method createInstance\n\t * @param {String} src The src or ID of the audio.\n\t * @param {Number} [startTime=null] To create an audio sprite (with duration), the initial offset to start playback and loop from, in milliseconds.\n\t * @param {Number} [duration=null] To create an audio sprite (with startTime), the amount of time to play the clip for, in milliseconds.\n\t * @return {AbstractSoundInstance} A {{#crossLink \"AbstractSoundInstance\"}}{{/crossLink}} that can be controlled after it is created.\n\t * Unsupported extensions will return the default AbstractSoundInstance.\n\t * @since 0.4.0\n\t * @static\n\t */\n\ts.createInstance = function (src, startTime, duration) {\n\t\tif (!s.initializeDefaultPlugins()) {return new createjs.DefaultSoundInstance(src, startTime, duration);}\n\n\t\tvar defaultPlayProps = s._defaultPlayPropsHash[src];\t// for audio sprites, which create and store defaults by id\n\t\tsrc = s._getSrcById(src);\n\n\t\tvar details = s._parsePath(src.src);\n\n\t\tvar instance = null;\n\t\tif (details != null && details.src != null) {\n\t\t\tSoundChannel.create(details.src);\n\t\t\tif (startTime == null) {startTime = src.startTime;}\n\t\t\tinstance = s.activePlugin.create(details.src, startTime, duration || src.duration);\n\n\t\t\tdefaultPlayProps = defaultPlayProps || s._defaultPlayPropsHash[details.src];\n\t\t\tif(defaultPlayProps) {\n\t\t\t\tinstance.applyPlayProps(defaultPlayProps);\n\t\t\t}\n\t\t} else {\n\t\t\tinstance = new createjs.DefaultSoundInstance(src, startTime, duration);\n\t\t}\n\n\t\tinstance.uniqueId = s._lastID++;\n\n\t\treturn instance;\n\t};\n\n\t/**\n\t * Stop all audio (global stop). Stopped audio is reset, and not paused. To play audio that has been stopped,\n\t * call AbstractSoundInstance {{#crossLink \"AbstractSoundInstance/play\"}}{{/crossLink}}.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *     createjs.Sound.stop();\n\t *\n\t * @method stop\n\t * @static\n\t */\n\ts.stop = function () {\n\t\tvar instances = this._instances;\n\t\tfor (var i = instances.length; i--; ) {\n\t\t\tinstances[i].stop();  // NOTE stop removes instance from this._instances\n\t\t}\n\t};\n\n\t/**\n\t * Deprecated, please use {{#crossLink \"Sound/volume:property\"}}{{/crossLink}} instead.\n\t *\n\t * @method setVolume\n\t * @param {Number} value The master volume value. The acceptable range is 0-1.\n\t * @static\n\t * @deprecated\n\t */\n\ts.setVolume = function (value) {\n\t\tif (Number(value) == null) {return false;}\n\t\tvalue = Math.max(0, Math.min(1, value));\n\t\ts._masterVolume = value;\n\t\tif (!this.activePlugin || !this.activePlugin.setVolume || !this.activePlugin.setVolume(value)) {\n\t\t\tvar instances = this._instances;\n\t\t\tfor (var i = 0, l = instances.length; i < l; i++) {\n\t\t\t\tinstances[i].setMasterVolume(value);\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t * Deprecated, please use {{#crossLink \"Sound/volume:property\"}}{{/crossLink}} instead.\n\t *\n\t * @method getVolume\n\t * @return {Number} The master volume, in a range of 0-1.\n\t * @static\n\t * @deprecated\n\t */\n\ts.getVolume = function () {\n\t\treturn this._masterVolume;\n\t};\n\n\t/**\n\t * Deprecated, please use {{#crossLink \"Sound/muted:property\"}}{{/crossLink}} instead.\n\t *\n\t * @method setMute\n\t * @param {Boolean} value Whether the audio should be muted or not.\n\t * @return {Boolean} If the mute was set.\n\t * @static\n\t * @since 0.4.0\n\t * @deprecated\n\t */\n\ts.setMute = function (value) {\n\t\tif (value == null) {return false;}\n\n\t\tthis._masterMute = value;\n\t\tif (!this.activePlugin || !this.activePlugin.setMute || !this.activePlugin.setMute(value)) {\n\t\t\tvar instances = this._instances;\n\t\t\tfor (var i = 0, l = instances.length; i < l; i++) {\n\t\t\t\tinstances[i].setMasterMute(value);\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t};\n\n\t/**\n\t * Deprecated, please use {{#crossLink \"Sound/muted:property\"}}{{/crossLink}} instead.\n\t *\n\t * @method getMute\n\t * @return {Boolean} The mute value of Sound.\n\t * @static\n\t * @since 0.4.0\n\t * @deprecated\n\t */\n\ts.getMute = function () {\n\t\treturn this._masterMute;\n\t};\n\n\t/**\n\t * Set the default playback properties for all new SoundInstances of the passed in src or ID.\n\t * See {{#crossLink \"PlayPropsConfig\"}}{{/crossLink}} for available properties.\n\t *\n\t * @method setDefaultPlayProps\n\t * @param {String} src The src or ID used to register the audio.\n\t * @param {Object | PlayPropsConfig} playProps The playback properties you would like to set.\n\t * @since 0.6.1\n\t */\n\ts.setDefaultPlayProps = function(src, playProps) {\n\t\tsrc = s._getSrcById(src);\n\t\ts._defaultPlayPropsHash[s._parsePath(src.src).src] = createjs.PlayPropsConfig.create(playProps);\n\t};\n\n\t/**\n\t * Get the default playback properties for the passed in src or ID.  These properties are applied to all\n\t * new SoundInstances.  Returns null if default does not exist.\n\t *\n\t * @method getDefaultPlayProps\n\t * @param {String} src The src or ID used to register the audio.\n\t * @returns {PlayPropsConfig} returns an existing PlayPropsConfig or null if one does not exist\n\t * @since 0.6.1\n\t */\n\ts.getDefaultPlayProps = function(src) {\n\t\tsrc = s._getSrcById(src);\n\t\treturn s._defaultPlayPropsHash[s._parsePath(src.src).src];\n\t};\n\n\n\t/* ---------------\n\t Internal methods\n\t --------------- */\n\t/**\n\t * Play an instance. This is called by the static API, as well as from plugins. This allows the core class to\n\t * control delays.\n\t * @method _playInstance\n\t * @param {AbstractSoundInstance} instance The {{#crossLink \"AbstractSoundInstance\"}}{{/crossLink}} to start playing.\n\t * @param {PlayPropsConfig} playProps A PlayPropsConfig object.\n\t * @return {Boolean} If the sound can start playing. Sounds that fail immediately will return false. Sounds that\n\t * have a delay will return true, but may still fail to play.\n\t * @protected\n\t * @static\n\t */\n\ts._playInstance = function (instance, playProps) {\n\t\tvar defaultPlayProps = s._defaultPlayPropsHash[instance.src] || {};\n\t\tif (playProps.interrupt == null) {playProps.interrupt = defaultPlayProps.interrupt || s.defaultInterruptBehavior};\n\t\tif (playProps.delay == null) {playProps.delay = defaultPlayProps.delay || 0;}\n\t\tif (playProps.offset == null) {playProps.offset = instance.getPosition();}\n\t\tif (playProps.loop == null) {playProps.loop = instance.loop;}\n\t\tif (playProps.volume == null) {playProps.volume = instance.volume;}\n\t\tif (playProps.pan == null) {playProps.pan = instance.pan;}\n\n\t\tif (playProps.delay == 0) {\n\t\t\tvar ok = s._beginPlaying(instance, playProps);\n\t\t\tif (!ok) {return false;}\n\t\t} else {\n\t\t\t//Note that we can't pass arguments to proxy OR setTimeout (IE only), so just wrap the function call.\n\t\t\t// OJR WebAudio may want to handle this differently, so it might make sense to move this functionality into the plugins in the future\n\t\t\tvar delayTimeoutId = setTimeout(function () {\n\t\t\t\ts._beginPlaying(instance, playProps);\n\t\t\t}, playProps.delay);\n\t\t\tinstance.delayTimeoutId = delayTimeoutId;\n\t\t}\n\n\t\tthis._instances.push(instance);\n\n\t\treturn true;\n\t};\n\n\t/**\n\t * Begin playback. This is called immediately or after delay by {{#crossLink \"Sound/playInstance\"}}{{/crossLink}}.\n\t * @method _beginPlaying\n\t * @param {AbstractSoundInstance} instance A {{#crossLink \"AbstractSoundInstance\"}}{{/crossLink}} to begin playback.\n\t * @param {PlayPropsConfig} playProps A PlayPropsConfig object.\n\t * @return {Boolean} If the sound can start playing. If there are no available channels, or the instance fails to\n\t * start, this will return false.\n\t * @protected\n\t * @static\n\t */\n\ts._beginPlaying = function (instance, playProps) {\n\t\tif (!SoundChannel.add(instance, playProps.interrupt)) {\n\t\t\treturn false;\n\t\t}\n\t\tvar result = instance._beginPlaying(playProps);\n\t\tif (!result) {\n\t\t\tvar index = createjs.indexOf(this._instances, instance);\n\t\t\tif (index > -1) {this._instances.splice(index, 1);}\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t};\n\n\t/**\n\t * Get the source of a sound via the ID passed in with a register call. If no ID is found the value is returned\n\t * instead.\n\t * @method _getSrcById\n\t * @param {String} value The ID the sound was registered with.\n\t * @return {String} The source of the sound if it has been registered with this ID or the value that was passed in.\n\t * @protected\n\t * @static\n\t */\n\ts._getSrcById = function (value) {\n\t\treturn s._idHash[value] || {src: value};\n\t};\n\n\t/**\n\t * A sound has completed playback, been interrupted, failed, or been stopped. This method removes the instance from\n\t * Sound management. It will be added again, if the sound re-plays. Note that this method is called from the\n\t * instances themselves.\n\t * @method _playFinished\n\t * @param {AbstractSoundInstance} instance The instance that finished playback.\n\t * @protected\n\t * @static\n\t */\n\ts._playFinished = function (instance) {\n\t\tSoundChannel.remove(instance);\n\t\tvar index = createjs.indexOf(this._instances, instance);\n\t\tif (index > -1) {this._instances.splice(index, 1);}\t// OJR this will always be > -1, there is no way for an instance to exist without being added to this._instances\n\t};\n\n\tcreatejs.Sound = Sound;\n\n\t/**\n\t * An internal class that manages the number of active {{#crossLink \"AbstractSoundInstance\"}}{{/crossLink}} instances for\n\t * each sound type. This method is only used internally by the {{#crossLink \"Sound\"}}{{/crossLink}} class.\n\t *\n\t * The number of sounds is artificially limited by Sound in order to prevent over-saturation of a\n\t * single sound, as well as to stay within hardware limitations, although the latter may disappear with better\n\t * browser support.\n\t *\n\t * When a sound is played, this class ensures that there is an available instance, or interrupts an appropriate\n\t * sound that is already playing.\n\t * #class SoundChannel\n\t * @param {String} src The source of the instances\n\t * @param {Number} [max=1] The number of instances allowed\n\t * @constructor\n\t * @protected\n\t */\n\tfunction SoundChannel(src, max) {\n\t\tthis.init(src, max);\n\t}\n\n\t/* ------------\n\t Static API\n\t ------------ */\n\t/**\n\t * A hash of channel instances indexed by source.\n\t * #property channels\n\t * @type {Object}\n\t * @static\n\t */\n\tSoundChannel.channels = {};\n\n\t/**\n\t * Create a sound channel. Note that if the sound channel already exists, this will fail.\n\t * #method create\n\t * @param {String} src The source for the channel\n\t * @param {Number} max The maximum amount this channel holds. The default is {{#crossLink \"SoundChannel.maxDefault\"}}{{/crossLink}}.\n\t * @return {Boolean} If the channels were created.\n\t * @static\n\t */\n\tSoundChannel.create = function (src, max) {\n\t\tvar channel = SoundChannel.get(src);\n\t\tif (channel == null) {\n\t\t\tSoundChannel.channels[src] = new SoundChannel(src, max);\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t};\n\t/**\n\t * Delete a sound channel, stop and delete all related instances. Note that if the sound channel does not exist, this will fail.\n\t * #method remove\n\t * @param {String} src The source for the channel\n\t * @return {Boolean} If the channels were deleted.\n\t * @static\n\t */\n\tSoundChannel.removeSrc = function (src) {\n\t\tvar channel = SoundChannel.get(src);\n\t\tif (channel == null) {return false;}\n\t\tchannel._removeAll();\t// this stops and removes all active instances\n\t\tdelete(SoundChannel.channels[src]);\n\t\treturn true;\n\t};\n\t/**\n\t * Delete all sound channels, stop and delete all related instances.\n\t * #method removeAll\n\t * @static\n\t */\n\tSoundChannel.removeAll = function () {\n\t\tfor(var channel in SoundChannel.channels) {\n\t\t\tSoundChannel.channels[channel]._removeAll();\t// this stops and removes all active instances\n\t\t}\n\t\tSoundChannel.channels = {};\n\t};\n\t/**\n\t * Add an instance to a sound channel.\n\t * #method add\n\t * @param {AbstractSoundInstance} instance The instance to add to the channel\n\t * @param {String} interrupt The interrupt value to use. Please see the {{#crossLink \"Sound/play\"}}{{/crossLink}}\n\t * for details on interrupt modes.\n\t * @return {Boolean} The success of the method call. If the channel is full, it will return false.\n\t * @static\n\t */\n\tSoundChannel.add = function (instance, interrupt) {\n\t\tvar channel = SoundChannel.get(instance.src);\n\t\tif (channel == null) {return false;}\n\t\treturn channel._add(instance, interrupt);\n\t};\n\t/**\n\t * Remove an instance from the channel.\n\t * #method remove\n\t * @param {AbstractSoundInstance} instance The instance to remove from the channel\n\t * @return The success of the method call. If there is no channel, it will return false.\n\t * @static\n\t */\n\tSoundChannel.remove = function (instance) {\n\t\tvar channel = SoundChannel.get(instance.src);\n\t\tif (channel == null) {return false;}\n\t\tchannel._remove(instance);\n\t\treturn true;\n\t};\n\t/**\n\t * Get the maximum number of sounds you can have in a channel.\n\t * #method maxPerChannel\n\t * @return {Number} The maximum number of sounds you can have in a channel.\n\t */\n\tSoundChannel.maxPerChannel = function () {\n\t\treturn p.maxDefault;\n\t};\n\t/**\n\t * Get a channel instance by its src.\n\t * #method get\n\t * @param {String} src The src to use to look up the channel\n\t * @static\n\t */\n\tSoundChannel.get = function (src) {\n\t\treturn SoundChannel.channels[src];\n\t};\n\n\tvar p = SoundChannel.prototype;\n\tp.constructor = SoundChannel;\n\n\t/**\n\t * <strong>REMOVED</strong>. Removed in favor of using `MySuperClass_constructor`.\n\t * See {{#crossLink \"Utility Methods/extend\"}}{{/crossLink}} and {{#crossLink \"Utility Methods/promote\"}}{{/crossLink}}\n\t * for details.\n\t *\n\t * There is an inheritance tutorial distributed with EaselJS in /tutorials/Inheritance.\n\t *\n\t * @method initialize\n\t * @protected\n\t * @deprecated\n\t */\n\t// p.initialize = function() {}; // searchable for devs wondering where it is.\n\n\n\t/**\n\t * The source of the channel.\n\t * #property src\n\t * @type {String}\n\t */\n\tp.src = null;\n\n\t/**\n\t * The maximum number of instances in this channel.  -1 indicates no limit\n\t * #property max\n\t * @type {Number}\n\t */\n\tp.max = null;\n\n\t/**\n\t * The default value to set for max, if it isn't passed in.  Also used if -1 is passed.\n\t * #property maxDefault\n\t * @type {Number}\n\t * @default 100\n\t * @since 0.4.0\n\t */\n\tp.maxDefault = 100;\n\n\t/**\n\t * The current number of active instances.\n\t * #property length\n\t * @type {Number}\n\t */\n\tp.length = 0;\n\n\t/**\n\t * Initialize the channel.\n\t * #method init\n\t * @param {String} src The source of the channel\n\t * @param {Number} max The maximum number of instances in the channel\n\t * @protected\n\t */\n\tp.init = function (src, max) {\n\t\tthis.src = src;\n\t\tthis.max = max || this.maxDefault;\n\t\tif (this.max == -1) {this.max = this.maxDefault;}\n\t\tthis._instances = [];\n\t};\n\n\t/**\n\t * Get an instance by index.\n\t * #method get\n\t * @param {Number} index The index to return.\n\t * @return {AbstractSoundInstance} The AbstractSoundInstance at a specific instance.\n\t */\n\tp._get = function (index) {\n\t\treturn this._instances[index];\n\t};\n\n\t/**\n\t * Add a new instance to the channel.\n\t * #method add\n\t * @param {AbstractSoundInstance} instance The instance to add.\n\t * @return {Boolean} The success of the method call. If the channel is full, it will return false.\n\t */\n\tp._add = function (instance, interrupt) {\n\t\tif (!this._getSlot(interrupt, instance)) {return false;}\n\t\tthis._instances.push(instance);\n\t\tthis.length++;\n\t\treturn true;\n\t};\n\n\t/**\n\t * Remove an instance from the channel, either when it has finished playing, or it has been interrupted.\n\t * #method remove\n\t * @param {AbstractSoundInstance} instance The instance to remove\n\t * @return {Boolean} The success of the remove call. If the instance is not found in this channel, it will\n\t * return false.\n\t */\n\tp._remove = function (instance) {\n\t\tvar index = createjs.indexOf(this._instances, instance);\n\t\tif (index == -1) {return false;}\n\t\tthis._instances.splice(index, 1);\n\t\tthis.length--;\n\t\treturn true;\n\t};\n\n\t/**\n\t * Stop playback and remove all instances from the channel.  Usually in response to a delete call.\n\t * #method removeAll\n\t */\n\tp._removeAll = function () {\n\t\t// Note that stop() removes the item from the list\n\t\tfor (var i=this.length-1; i>=0; i--) {\n\t\t\tthis._instances[i].stop();\n\t\t}\n\t};\n\n\t/**\n\t * Get an available slot depending on interrupt value and if slots are available.\n\t * #method getSlot\n\t * @param {String} interrupt The interrupt value to use.\n\t * @param {AbstractSoundInstance} instance The sound instance that will go in the channel if successful.\n\t * @return {Boolean} Determines if there is an available slot. Depending on the interrupt mode, if there are no slots,\n\t * an existing AbstractSoundInstance may be interrupted. If there are no slots, this method returns false.\n\t */\n\tp._getSlot = function (interrupt, instance) {\n\t\tvar target, replacement;\n\n\t\tif (interrupt != Sound.INTERRUPT_NONE) {\n\t\t\t// First replacement candidate\n\t\t\treplacement = this._get(0);\n\t\t\tif (replacement == null) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\tfor (var i = 0, l = this.max; i < l; i++) {\n\t\t\ttarget = this._get(i);\n\n\t\t\t// Available Space\n\t\t\tif (target == null) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\t// Audio is complete or not playing\n\t\t\tif (target.playState == Sound.PLAY_FINISHED ||\n\t\t\t\ttarget.playState == Sound.PLAY_INTERRUPTED ||\n\t\t\t\ttarget.playState == Sound.PLAY_FAILED) {\n\t\t\t\treplacement = target;\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tif (interrupt == Sound.INTERRUPT_NONE) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// Audio is a better candidate than the current target, according to playhead\n\t\t\tif ((interrupt == Sound.INTERRUPT_EARLY && target.getPosition() < replacement.getPosition()) ||\n\t\t\t\t(interrupt == Sound.INTERRUPT_LATE && target.getPosition() > replacement.getPosition())) {\n\t\t\t\t\treplacement = target;\n\t\t\t}\n\t\t}\n\n\t\tif (replacement != null) {\n\t\t\treplacement._interrupt();\n\t\t\tthis._remove(replacement);\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t};\n\n\tp.toString = function () {\n\t\treturn \"[Sound SoundChannel]\";\n\t};\n\t// do not add SoundChannel to namespace\n\n}());\n\n//##############################################################################\n// AbstractSoundInstance.js\n//##############################################################################\n\n/**\n * A AbstractSoundInstance is created when any calls to the Sound API method {{#crossLink \"Sound/play\"}}{{/crossLink}} or\n * {{#crossLink \"Sound/createInstance\"}}{{/crossLink}} are made. The AbstractSoundInstance is returned by the active plugin\n * for control by the user.\n *\n * <h4>Example</h4>\n *\n *      var myInstance = createjs.Sound.play(\"myAssetPath/mySrcFile.mp3\");\n *\n * A number of additional parameters provide a quick way to determine how a sound is played. Please see the Sound\n * API method {{#crossLink \"Sound/play\"}}{{/crossLink}} for a list of arguments.\n *\n * Once a AbstractSoundInstance is created, a reference can be stored that can be used to control the audio directly through\n * the AbstractSoundInstance. If the reference is not stored, the AbstractSoundInstance will play out its audio (and any loops), and\n * is then de-referenced from the {{#crossLink \"Sound\"}}{{/crossLink}} class so that it can be cleaned up. If audio\n * playback has completed, a simple call to the {{#crossLink \"AbstractSoundInstance/play\"}}{{/crossLink}} instance method\n * will rebuild the references the Sound class need to control it.\n *\n *      var myInstance = createjs.Sound.play(\"myAssetPath/mySrcFile.mp3\", {loop:2});\n *      myInstance.on(\"loop\", handleLoop);\n *      function handleLoop(event) {\n *          myInstance.volume = myInstance.volume * 0.5;\n *      }\n *\n * Events are dispatched from the instance to notify when the sound has completed, looped, or when playback fails\n *\n *      var myInstance = createjs.Sound.play(\"myAssetPath/mySrcFile.mp3\");\n *      myInstance.on(\"complete\", handleComplete);\n *      myInstance.on(\"loop\", handleLoop);\n *      myInstance.on(\"failed\", handleFailed);\n *\n *\n * @class AbstractSoundInstance\n * @param {String} src The path to and file name of the sound.\n * @param {Number} startTime Audio sprite property used to apply an offset, in milliseconds.\n * @param {Number} duration Audio sprite property used to set the time the clip plays for, in milliseconds.\n * @param {Object} playbackResource Any resource needed by plugin to support audio playback.\n * @extends EventDispatcher\n * @constructor\n */\n\n(function () {\n\t\"use strict\";\n\n\n// Constructor:\n\tvar AbstractSoundInstance = function (src, startTime, duration, playbackResource) {\n\t\tthis.EventDispatcher_constructor();\n\n\n\t// public properties:\n\t\t/**\n\t\t * The source of the sound.\n\t\t * @property src\n\t\t * @type {String}\n\t\t * @default null\n\t\t */\n\t\tthis.src = src;\n\n\t\t/**\n\t\t * The unique ID of the instance. This is set by {{#crossLink \"Sound\"}}{{/crossLink}}.\n\t\t * @property uniqueId\n\t\t * @type {String} | Number\n\t\t * @default -1\n\t\t */\n\t\tthis.uniqueId = -1;\n\n\t\t/**\n\t\t * The play state of the sound. Play states are defined as constants on {{#crossLink \"Sound\"}}{{/crossLink}}.\n\t\t * @property playState\n\t\t * @type {String}\n\t\t * @default null\n\t\t */\n\t\tthis.playState = null;\n\n\t\t/**\n\t\t * A Timeout created by {{#crossLink \"Sound\"}}{{/crossLink}} when this AbstractSoundInstance is played with a delay.\n\t\t * This allows AbstractSoundInstance to remove the delay if stop, pause, or cleanup are called before playback begins.\n\t\t * @property delayTimeoutId\n\t\t * @type {timeoutVariable}\n\t\t * @default null\n\t\t * @protected\n\t\t * @since 0.4.0\n\t\t */\n\t\tthis.delayTimeoutId = null;\n\t\t// TODO consider moving delay into AbstractSoundInstance so it can be handled by plugins\n\n\n\t// private properties\n\t// Getter / Setter Properties\n\t\t// OJR TODO find original reason that we didn't use defined functions.  I think it was performance related\n\t\t/**\n\t\t * The volume of the sound, between 0 and 1.\n\t\t *\n\t\t * The actual output volume of a sound can be calculated using:\n\t\t * <code>myInstance.volume * createjs.Sound.getVolume();</code>\n\t\t *\n\t\t * @property volume\n\t\t * @type {Number}\n\t\t * @default 1\n\t\t */\n\t\tthis._volume =  1;\n\t\tObject.defineProperty(this, \"volume\", {\n\t\t\tget: this.getVolume,\n\t\t\tset: this.setVolume\n\t\t});\n\n\t\t/**\n\t\t * The pan of the sound, between -1 (left) and 1 (right). Note that pan is not supported by HTML Audio.\n\t\t *\n\t\t * <br />Note in WebAudioPlugin this only gives us the \"x\" value of what is actually 3D audio.\n\t\t *\n\t\t * @property pan\n\t\t * @type {Number}\n\t\t * @default 0\n\t\t */\n\t\tthis._pan =  0;\n\t\tObject.defineProperty(this, \"pan\", {\n\t\t\tget: this.getPan,\n\t\t\tset: this.setPan\n\t\t});\n\n\t\t/**\n\t\t * Audio sprite property used to determine the starting offset.\n\t\t * @property startTime\n\t\t * @type {Number}\n\t\t * @default 0\n\t\t * @since 0.6.1\n\t\t */\n\t\tthis._startTime = Math.max(0, startTime || 0);\n\t\tObject.defineProperty(this, \"startTime\", {\n\t\t\tget: this.getStartTime,\n\t\t\tset: this.setStartTime\n\t\t});\n\n\t\t/**\n\t\t * Sets or gets the length of the audio clip, value is in milliseconds.\n\t\t *\n\t\t * @property duration\n\t\t * @type {Number}\n\t\t * @default 0\n\t\t * @since 0.6.0\n\t\t */\n\t\tthis._duration = Math.max(0, duration || 0);\n\t\tObject.defineProperty(this, \"duration\", {\n\t\t\tget: this.getDuration,\n\t\t\tset: this.setDuration\n\t\t});\n\n\t\t/**\n\t\t * Object that holds plugin specific resource need for audio playback.\n\t\t * This is set internally by the plugin.  For example, WebAudioPlugin will set an array buffer,\n\t\t * HTMLAudioPlugin will set a tag, FlashAudioPlugin will set a flash reference.\n\t\t *\n\t\t * @property playbackResource\n\t\t * @type {Object}\n\t\t * @default null\n\t\t */\n\t\tthis._playbackResource = null;\n\t\tObject.defineProperty(this, \"playbackResource\", {\n\t\t\tget: this.getPlaybackResource,\n\t\t\tset: this.setPlaybackResource\n\t\t});\n\t\tif(playbackResource !== false && playbackResource !== true) { this.setPlaybackResource(playbackResource); }\n\n\t\t/**\n\t\t * The position of the playhead in milliseconds. This can be set while a sound is playing, paused, or stopped.\n\t\t *\n\t\t * @property position\n\t\t * @type {Number}\n\t\t * @default 0\n\t\t * @since 0.6.0\n\t\t */\n\t\tthis._position = 0;\n\t\tObject.defineProperty(this, \"position\", {\n\t\t\tget: this.getPosition,\n\t\t\tset: this.setPosition\n\t\t});\n\n\t\t/**\n\t\t * The number of play loops remaining. Negative values will loop infinitely.\n\t\t *\n\t\t * @property loop\n\t\t * @type {Number}\n\t\t * @default 0\n\t\t * @public\n\t\t * @since 0.6.0\n\t\t */\n\t\tthis._loop = 0;\n\t\tObject.defineProperty(this, \"loop\", {\n\t\t\tget: this.getLoop,\n\t\t\tset: this.setLoop\n\t\t});\n\n\t\t/**\n\t\t * Mutes or unmutes the current audio instance.\n\t\t *\n\t\t * @property muted\n\t\t * @type {Boolean}\n\t\t * @default false\n\t\t * @since 0.6.0\n\t\t */\n\t\tthis._muted = false;\n\t\tObject.defineProperty(this, \"muted\", {\n\t\t\tget: this.getMuted,\n\t\t\tset: this.setMuted\n\t\t});\n\n\t\t/**\n\t\t * Pauses or resumes the current audio instance.\n\t\t *\n\t\t * @property paused\n\t\t * @type {Boolean}\n\t\t */\n\t\tthis._paused = false;\n\t\tObject.defineProperty(this, \"paused\", {\n\t\t\tget: this.getPaused,\n\t\t\tset: this.setPaused\n\t\t});\n\n\n\t// Events\n\t\t/**\n\t\t * The event that is fired when playback has started successfully.\n\t\t * @event succeeded\n\t\t * @param {Object} target The object that dispatched the event.\n\t\t * @param {String} type The event type.\n\t\t * @since 0.4.0\n\t\t */\n\n\t\t/**\n\t\t * The event that is fired when playback is interrupted. This happens when another sound with the same\n\t\t * src property is played using an interrupt value that causes this instance to stop playing.\n\t\t * @event interrupted\n\t\t * @param {Object} target The object that dispatched the event.\n\t\t * @param {String} type The event type.\n\t\t * @since 0.4.0\n\t\t */\n\n\t\t/**\n\t\t * The event that is fired when playback has failed. This happens when there are too many channels with the same\n\t\t * src property already playing (and the interrupt value doesn't cause an interrupt of another instance), or\n\t\t * the sound could not be played, perhaps due to a 404 error.\n\t\t * @event failed\n\t\t * @param {Object} target The object that dispatched the event.\n\t\t * @param {String} type The event type.\n\t\t * @since 0.4.0\n\t\t */\n\n\t\t/**\n\t\t * The event that is fired when a sound has completed playing but has loops remaining.\n\t\t * @event loop\n\t\t * @param {Object} target The object that dispatched the event.\n\t\t * @param {String} type The event type.\n\t\t * @since 0.4.0\n\t\t */\n\n\t\t/**\n\t\t * The event that is fired when playback completes. This means that the sound has finished playing in its\n\t\t * entirety, including its loop iterations.\n\t\t * @event complete\n\t\t * @param {Object} target The object that dispatched the event.\n\t\t * @param {String} type The event type.\n\t\t * @since 0.4.0\n\t\t */\n\t};\n\n\tvar p = createjs.extend(AbstractSoundInstance, createjs.EventDispatcher);\n\n\t// TODO: deprecated\n\t// p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\n\n\n// Public Methods:\n\t/**\n\t * Play an instance. This method is intended to be called on SoundInstances that already exist (created\n\t * with the Sound API {{#crossLink \"Sound/createInstance\"}}{{/crossLink}} or {{#crossLink \"Sound/play\"}}{{/crossLink}}).\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      var myInstance = createjs.Sound.createInstance(mySrc);\n\t *      myInstance.play({interrupt:createjs.Sound.INTERRUPT_ANY, loop:2, pan:0.5});\n\t *\n\t * Note that if this sound is already playing, this call will still set the passed in parameters.\n\n\t * <b>Parameters Deprecated</b><br />\n\t * The parameters for this method are deprecated in favor of a single parameter that is an Object or {{#crossLink \"PlayPropsConfig\"}}{{/crossLink}}.\n\t *\n\t * @method play\n\t * @param {String | Object} [interrupt=\"none\"|options] <b>This parameter will be renamed playProps in the next release.</b><br />\n\t * This parameter can be an instance of {{#crossLink \"PlayPropsConfig\"}}{{/crossLink}} or an Object that contains any or all optional properties by name,\n\t * including: interrupt, delay, offset, loop, volume, pan, startTime, and duration (see the above code sample).\n\t * <br /><strong>OR</strong><br />\n\t * <b>Deprecated</b> How to interrupt any currently playing instances of audio with the same source,\n\t * if the maximum number of instances of the sound are already playing. Values are defined as <code>INTERRUPT_TYPE</code>\n\t * constants on the Sound class, with the default defined by {{#crossLink \"Sound/defaultInterruptBehavior:property\"}}{{/crossLink}}.\n\t * @param {Number} [delay=0] <b>Deprecated</b> The amount of time to delay the start of audio playback, in milliseconds.\n\t * @param {Number} [offset=0] <b>Deprecated</b> The offset from the start of the audio to begin playback, in milliseconds.\n\t * @param {Number} [loop=0] <b>Deprecated</b> How many times the audio loops when it reaches the end of playback. The default is 0 (no\n\t * loops), and -1 can be used for infinite playback.\n\t * @param {Number} [volume=1] <b>Deprecated</b> The volume of the sound, between 0 and 1. Note that the master volume is applied\n\t * against the individual volume.\n\t * @param {Number} [pan=0] <b>Deprecated</b> The left-right pan of the sound (if supported), between -1 (left) and 1 (right).\n\t * Note that pan is not supported for HTML Audio.\n\t * @return {AbstractSoundInstance} A reference to itself, intended for chaining calls.\n\t */\n\tp.play = function (interrupt, delay, offset, loop, volume, pan) {\n\t\tvar playProps;\n\t\tif (interrupt instanceof Object || interrupt instanceof createjs.PlayPropsConfig) {\n\t\t\tplayProps = createjs.PlayPropsConfig.create(interrupt);\n\t\t} else {\n\t\t\tplayProps = createjs.PlayPropsConfig.create({interrupt:interrupt, delay:delay, offset:offset, loop:loop, volume:volume, pan:pan});\n\t\t}\n\n\t\tif (this.playState == createjs.Sound.PLAY_SUCCEEDED) {\n\t\t\tthis.applyPlayProps(playProps);\n\t\t\tif (this._paused) {\tthis.setPaused(false); }\n\t\t\treturn;\n\t\t}\n\t\tthis._cleanUp();\n\t\tcreatejs.Sound._playInstance(this, playProps);\t// make this an event dispatch??\n\t\treturn this;\n\t};\n\n\t/**\n\t * Stop playback of the instance. Stopped sounds will reset their position to 0, and calls to {{#crossLink \"AbstractSoundInstance/resume\"}}{{/crossLink}}\n\t * will fail. To start playback again, call {{#crossLink \"AbstractSoundInstance/play\"}}{{/crossLink}}.\n     *\n     * If you don't want to lose your position use yourSoundInstance.paused = true instead. {{#crossLink \"AbstractSoundInstance/paused\"}}{{/crossLink}}.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *     myInstance.stop();\n\t *\n\t * @method stop\n\t * @return {AbstractSoundInstance} A reference to itself, intended for chaining calls.\n\t */\n\tp.stop = function () {\n\t\tthis._position = 0;\n\t\tthis._paused = false;\n\t\tthis._handleStop();\n\t\tthis._cleanUp();\n\t\tthis.playState = createjs.Sound.PLAY_FINISHED;\n\t\treturn this;\n\t};\n\n\t/**\n\t * Remove all external references and resources from AbstractSoundInstance.  Note this is irreversible and AbstractSoundInstance will no longer work\n\t * @method destroy\n\t * @since 0.6.0\n\t */\n\tp.destroy = function() {\n\t\tthis._cleanUp();\n\t\tthis.src = null;\n\t\tthis.playbackResource = null;\n\n\t\tthis.removeAllEventListeners();\n\t};\n\n\t/**\n\t * Takes an PlayPropsConfig or Object with the same properties and sets them on this instance.\n\t * @method applyPlayProps\n\t * @param {PlayPropsConfig | Object} playProps A PlayPropsConfig or object containing the same properties.\n\t * @since 0.6.1\n\t * @return {AbstractSoundInstance} A reference to itself, intended for chaining calls.\n\t */\n\tp.applyPlayProps = function(playProps) {\n\t\tif (playProps.offset != null) { this.setPosition(playProps.offset) }\n\t\tif (playProps.loop != null) { this.setLoop(playProps.loop); }\n\t\tif (playProps.volume != null) { this.setVolume(playProps.volume); }\n\t\tif (playProps.pan != null) { this.setPan(playProps.pan); }\n\t\tif (playProps.startTime != null) {\n\t\t\tthis.setStartTime(playProps.startTime);\n\t\t\tthis.setDuration(playProps.duration);\n\t\t}\n\t\treturn this;\n\t};\n\n\tp.toString = function () {\n\t\treturn \"[AbstractSoundInstance]\";\n\t};\n\n// get/set methods that allow support for IE8\n\t/**\n\t * DEPRECATED, please use {{#crossLink \"AbstractSoundInstance/paused:property\"}}{{/crossLink}} directly as a property,\n\t *\n\t * @deprecated\n\t * @method getPaused\n\t * @returns {boolean} If the instance is currently paused\n\t * @since 0.6.0\n\t */\n\tp.getPaused = function() {\n\t\treturn this._paused;\n\t};\n\n\t/**\n\t * DEPRECATED, please use {{#crossLink \"AbstractSoundInstance/paused:property\"}}{{/crossLink}} directly as a property\n\t *\n\t * @deprecated\n\t * @method setPaused\n\t * @param {boolean} value\n\t * @since 0.6.0\n\t * @return {AbstractSoundInstance} A reference to itself, intended for chaining calls.\n\t */\n\tp.setPaused = function (value) {\n\t\tif ((value !== true && value !== false) || this._paused == value) {return;}\n\t\tif (value == true && this.playState != createjs.Sound.PLAY_SUCCEEDED) {return;}\n\t\tthis._paused = value;\n\t\tif(value) {\n\t\t\tthis._pause();\n\t\t} else {\n\t\t\tthis._resume();\n\t\t}\n\t\tclearTimeout(this.delayTimeoutId);\n\t\treturn this;\n\t};\n\n\t/**\n\t * DEPRECATED, please use {{#crossLink \"AbstractSoundInstance/volume:property\"}}{{/crossLink}} directly as a property\n\t *\n\t * @deprecated\n\t * @method setVolume\n\t * @param {Number} value The volume to set, between 0 and 1.\n\t * @return {AbstractSoundInstance} A reference to itself, intended for chaining calls.\n\t */\n\tp.setVolume = function (value) {\n\t\tif (value == this._volume) { return this; }\n\t\tthis._volume = Math.max(0, Math.min(1, value));\n\t\tif (!this._muted) {\n\t\t\tthis._updateVolume();\n\t\t}\n\t\treturn this;\n\t};\n\n\t/**\n\t * DEPRECATED, please use {{#crossLink \"AbstractSoundInstance/volume:property\"}}{{/crossLink}} directly as a property\n\t *\n\t * @deprecated\n\t * @method getVolume\n\t * @return {Number} The current volume of the sound instance.\n\t */\n\tp.getVolume = function () {\n\t\treturn this._volume;\n\t};\n\n\t/**\n\t * DEPRECATED, please use {{#crossLink \"AbstractSoundInstance/muted:property\"}}{{/crossLink}} directly as a property\n\t *\n\t * @deprecated\n\t * @method setMuted\n\t * @param {Boolean} value If the sound should be muted.\n\t * @return {AbstractSoundInstance} A reference to itself, intended for chaining calls.\n\t * @since 0.6.0\n\t */\n\tp.setMuted = function (value) {\n\t\tif (value !== true && value !== false) {return;}\n\t\tthis._muted = value;\n\t\tthis._updateVolume();\n\t\treturn this;\n\t};\n\n\t/**\n\t * DEPRECATED, please use {{#crossLink \"AbstractSoundInstance/muted:property\"}}{{/crossLink}} directly as a property\n\t *\n\t * @deprecated\n\t * @method getMuted\n\t * @return {Boolean} If the sound is muted.\n\t * @since 0.6.0\n\t */\n\tp.getMuted = function () {\n\t\treturn this._muted;\n\t};\n\n\t/**\n\t * DEPRECATED, please use {{#crossLink \"AbstractSoundInstance/pan:property\"}}{{/crossLink}} directly as a property\n\t *\n\t * @deprecated\n\t * @method setPan\n\t * @param {Number} value The pan value, between -1 (left) and 1 (right).\n\t * @return {AbstractSoundInstance} Returns reference to itself for chaining calls\n\t */\n\tp.setPan = function (value) {\n\t\tif(value == this._pan) { return this; }\n\t\tthis._pan = Math.max(-1, Math.min(1, value));\n\t\tthis._updatePan();\n\t\treturn this;\n\t};\n\n\t/**\n\t * DEPRECATED, please use {{#crossLink \"AbstractSoundInstance/pan:property\"}}{{/crossLink}} directly as a property\n\t *\n\t * @deprecated\n\t * @method getPan\n\t * @return {Number} The value of the pan, between -1 (left) and 1 (right).\n\t */\n\tp.getPan = function () {\n\t\treturn this._pan;\n\t};\n\n\t/**\n\t * DEPRECATED, please use {{#crossLink \"AbstractSoundInstance/position:property\"}}{{/crossLink}} directly as a property\n\t *\n\t * @deprecated\n\t * @method getPosition\n\t * @return {Number} The position of the playhead in the sound, in milliseconds.\n\t */\n\tp.getPosition = function () {\n\t\tif (!this._paused && this.playState == createjs.Sound.PLAY_SUCCEEDED) {\n\t\t\tthis._position = this._calculateCurrentPosition();\n\t\t}\n\t\treturn this._position;\n\t};\n\n\t/**\n\t * DEPRECATED, please use {{#crossLink \"AbstractSoundInstance/position:property\"}}{{/crossLink}} directly as a property\n\t *\n\t * @deprecated\n\t * @method setPosition\n\t * @param {Number} value The position to place the playhead, in milliseconds.\n\t * @return {AbstractSoundInstance} Returns reference to itself for chaining calls\n\t */\n\tp.setPosition = function (value) {\n\t\tthis._position = Math.max(0, value);\n\t\tif (this.playState == createjs.Sound.PLAY_SUCCEEDED) {\n\t\t\tthis._updatePosition();\n\t\t}\n\t\treturn this;\n\t};\n\n\t/**\n\t * DEPRECATED, please use {{#crossLink \"AbstractSoundInstance/startTime:property\"}}{{/crossLink}} directly as a property\n\t *\n\t * @deprecated\n\t * @method getStartTime\n\t * @return {Number} The startTime of the sound instance in milliseconds.\n\t */\n\tp.getStartTime = function () {\n\t\treturn this._startTime;\n\t};\n\n\t/**\n\t * DEPRECATED, please use {{#crossLink \"AbstractSoundInstance/startTime:property\"}}{{/crossLink}} directly as a property\n\t *\n\t * @deprecated\n\t * @method setStartTime\n\t * @param {number} value The new startTime time in milli seconds.\n\t * @return {AbstractSoundInstance} Returns reference to itself for chaining calls\n\t */\n\tp.setStartTime = function (value) {\n\t\tif (value == this._startTime) { return this; }\n\t\tthis._startTime = Math.max(0, value || 0);\n\t\tthis._updateStartTime();\n\t\treturn this;\n\t};\n\n\t/**\n\t * DEPRECATED, please use {{#crossLink \"AbstractSoundInstance/duration:property\"}}{{/crossLink}} directly as a property\n\t *\n\t * @deprecated\n\t * @method getDuration\n\t * @return {Number} The duration of the sound instance in milliseconds.\n\t */\n\tp.getDuration = function () {\n\t\treturn this._duration;\n\t};\n\n\t/**\n\t * DEPRECATED, please use {{#crossLink \"AbstractSoundInstance/duration:property\"}}{{/crossLink}} directly as a property\n\t *\n\t * @deprecated\n\t * @method setDuration\n\t * @param {number} value The new duration time in milli seconds.\n\t * @return {AbstractSoundInstance} Returns reference to itself for chaining calls\n\t * @since 0.6.0\n\t */\n\tp.setDuration = function (value) {\n\t\tif (value == this._duration) { return this; }\n\t\tthis._duration = Math.max(0, value || 0);\n\t\tthis._updateDuration();\n\t\treturn this;\n\t};\n\n\t/**\n\t * DEPRECATED, please use {{#crossLink \"AbstractSoundInstance/playbackResource:property\"}}{{/crossLink}} directly as a property\n\t *\n\t * @deprecated\n\t * @method setPlayback\n\t * @param {Object} value The new playback resource.\n\t * @return {AbstractSoundInstance} Returns reference to itself for chaining calls\n\t * @since 0.6.0\n\t **/\n\tp.setPlaybackResource = function (value) {\n\t\tthis._playbackResource = value;\n\t\tif (this._duration == 0) { this._setDurationFromSource(); }\n\t\treturn this;\n\t};\n\n\t/**\n\t * DEPRECATED, please use {{#crossLink \"AbstractSoundInstance/playbackResource:property\"}}{{/crossLink}} directly as a property\n\t *\n\t * @deprecated\n\t * @method setPlayback\n\t * @param {Object} value The new playback resource.\n\t * @return {Object} playback resource used for playing audio\n\t * @since 0.6.0\n\t **/\n\tp.getPlaybackResource = function () {\n\t\treturn this._playbackResource;\n\t};\n\n\t/**\n\t * DEPRECATED, please use {{#crossLink \"AbstractSoundInstance/loop:property\"}}{{/crossLink}} directly as a property\n\t *\n\t * @deprecated\n\t * @method getLoop\n\t * @return {number}\n\t * @since 0.6.0\n\t **/\n\tp.getLoop = function () {\n\t\treturn this._loop;\n\t};\n\n\t/**\n\t * DEPRECATED, please use {{#crossLink \"AbstractSoundInstance/loop:property\"}}{{/crossLink}} directly as a property,\n\t *\n\t * @deprecated\n\t * @method setLoop\n\t * @param {number} value The number of times to loop after play.\n\t * @since 0.6.0\n\t */\n\tp.setLoop = function (value) {\n\t\tif(this._playbackResource != null) {\n\t\t\t// remove looping\n\t\t\tif (this._loop != 0 && value == 0) {\n\t\t\t\tthis._removeLooping(value);\n\t\t\t}\n\t\t\t// add looping\n\t\t\telse if (this._loop == 0 && value != 0) {\n\t\t\t\tthis._addLooping(value);\n\t\t\t}\n\t\t}\n\t\tthis._loop = value;\n\t};\n\n\n// Private Methods:\n\t/**\n\t * A helper method that dispatches all events for AbstractSoundInstance.\n\t * @method _sendEvent\n\t * @param {String} type The event type\n\t * @protected\n\t */\n\tp._sendEvent = function (type) {\n\t\tvar event = new createjs.Event(type);\n\t\tthis.dispatchEvent(event);\n\t};\n\n\t/**\n\t * Clean up the instance. Remove references and clean up any additional properties such as timers.\n\t * @method _cleanUp\n\t * @protected\n\t */\n\tp._cleanUp = function () {\n\t\tclearTimeout(this.delayTimeoutId); // clear timeout that plays delayed sound\n\t\tthis._handleCleanUp();\n\t\tthis._paused = false;\n\n\t\tcreatejs.Sound._playFinished(this);\t// TODO change to an event\n\t};\n\n\t/**\n\t * The sound has been interrupted.\n\t * @method _interrupt\n\t * @protected\n\t */\n\tp._interrupt = function () {\n\t\tthis._cleanUp();\n\t\tthis.playState = createjs.Sound.PLAY_INTERRUPTED;\n\t\tthis._sendEvent(\"interrupted\");\n\t};\n\n\t/**\n\t * Called by the Sound class when the audio is ready to play (delay has completed). Starts sound playing if the\n\t * src is loaded, otherwise playback will fail.\n\t * @method _beginPlaying\n\t * @param {PlayPropsConfig} playProps A PlayPropsConfig object.\n\t * @return {Boolean} If playback succeeded.\n\t * @protected\n\t */\n\t// OJR FlashAudioSoundInstance overwrites\n\tp._beginPlaying = function (playProps) {\n\t\tthis.setPosition(playProps.offset);\n\t\tthis.setLoop(playProps.loop);\n\t\tthis.setVolume(playProps.volume);\n\t\tthis.setPan(playProps.pan);\n\t\tif (playProps.startTime != null) {\n\t\t\tthis.setStartTime(playProps.startTime);\n\t\t\tthis.setDuration(playProps.duration);\n\t\t}\n\n\t\tif (this._playbackResource != null && this._position < this._duration) {\n\t\t\tthis._paused = false;\n\t\t\tthis._handleSoundReady();\n\t\t\tthis.playState = createjs.Sound.PLAY_SUCCEEDED;\n\t\t\tthis._sendEvent(\"succeeded\");\n\t\t\treturn true;\n\t\t} else {\n\t\t\tthis._playFailed();\n\t\t\treturn false;\n\t\t}\n\t};\n\n\t/**\n\t * Play has failed, which can happen for a variety of reasons.\n\t * Cleans up instance and dispatches failed event\n\t * @method _playFailed\n\t * @private\n\t */\n\tp._playFailed = function () {\n\t\tthis._cleanUp();\n\t\tthis.playState = createjs.Sound.PLAY_FAILED;\n\t\tthis._sendEvent(\"failed\");\n\t};\n\n\t/**\n\t * Audio has finished playing. Manually loop it if required.\n\t * @method _handleSoundComplete\n\t * @param event\n\t * @protected\n\t */\n\tp._handleSoundComplete = function (event) {\n\t\tthis._position = 0;  // have to set this as it can be set by pause during playback\n\n\t\tif (this._loop != 0) {\n\t\t\tthis._loop--;  // NOTE this introduces a theoretical limit on loops = float max size x 2 - 1\n\t\t\tthis._handleLoop();\n\t\t\tthis._sendEvent(\"loop\");\n\t\t\treturn;\n\t\t}\n\n\t\tthis._cleanUp();\n\t\tthis.playState = createjs.Sound.PLAY_FINISHED;\n\t\tthis._sendEvent(\"complete\");\n\t};\n\n// Plugin specific code\n\t/**\n\t * Handles starting playback when the sound is ready for playing.\n\t * @method _handleSoundReady\n\t * @protected\n \t */\n\tp._handleSoundReady = function () {\n\t\t// plugin specific code\n\t};\n\n\t/**\n\t * Internal function used to update the volume based on the instance volume, master volume, instance mute value,\n\t * and master mute value.\n\t * @method _updateVolume\n\t * @protected\n\t */\n\tp._updateVolume = function () {\n\t\t// plugin specific code\n\t};\n\n\t/**\n\t * Internal function used to update the pan\n\t * @method _updatePan\n\t * @protected\n\t * @since 0.6.0\n\t */\n\tp._updatePan = function () {\n\t\t// plugin specific code\n\t};\n\n\t/**\n\t * Internal function used to update the startTime of the audio.\n\t * @method _updateStartTime\n\t * @protected\n\t * @since 0.6.1\n\t */\n\tp._updateStartTime = function () {\n\t\t// plugin specific code\n\t};\n\n\t/**\n\t * Internal function used to update the duration of the audio.\n\t * @method _updateDuration\n\t * @protected\n\t * @since 0.6.0\n\t */\n\tp._updateDuration = function () {\n\t\t// plugin specific code\n\t};\n\n\t/**\n\t * Internal function used to get the duration of the audio from the source we'll be playing.\n\t * @method _updateDuration\n\t * @protected\n\t * @since 0.6.0\n\t */\n\tp._setDurationFromSource = function () {\n\t\t// plugin specific code\n\t};\n\n\t/**\n\t * Internal function that calculates the current position of the playhead and sets this._position to that value\n\t * @method _calculateCurrentPosition\n\t * @protected\n\t * @since 0.6.0\n\t */\n\tp._calculateCurrentPosition = function () {\n\t\t// plugin specific code that sets this.position\n\t};\n\n\t/**\n\t * Internal function used to update the position of the playhead.\n\t * @method _updatePosition\n\t * @protected\n\t * @since 0.6.0\n\t */\n\tp._updatePosition = function () {\n\t\t// plugin specific code\n\t};\n\n\t/**\n\t * Internal function called when looping is removed during playback.\n\t * @method _removeLooping\n\t * @param {number} value The number of times to loop after play.\n\t * @protected\n\t * @since 0.6.0\n\t */\n\tp._removeLooping = function (value) {\n\t\t// plugin specific code\n\t};\n\n\t/**\n\t * Internal function called when looping is added during playback.\n\t * @method _addLooping\n\t * @param {number} value The number of times to loop after play.\n\t * @protected\n\t * @since 0.6.0\n\t */\n\tp._addLooping = function (value) {\n\t\t// plugin specific code\n\t};\n\n\t/**\n\t * Internal function called when pausing playback\n\t * @method _pause\n\t * @protected\n\t * @since 0.6.0\n\t */\n\tp._pause = function () {\n\t\t// plugin specific code\n\t};\n\n\t/**\n\t * Internal function called when resuming playback\n\t * @method _resume\n\t * @protected\n\t * @since 0.6.0\n\t */\n\tp._resume = function () {\n\t\t// plugin specific code\n\t};\n\n\t/**\n\t * Internal function called when stopping playback\n\t * @method _handleStop\n\t * @protected\n\t * @since 0.6.0\n\t */\n\tp._handleStop = function() {\n\t\t// plugin specific code\n\t};\n\n\t/**\n\t * Internal function called when AbstractSoundInstance is being cleaned up\n\t * @method _handleCleanUp\n\t * @protected\n\t * @since 0.6.0\n\t */\n\tp._handleCleanUp = function() {\n\t\t// plugin specific code\n\t};\n\n\t/**\n\t * Internal function called when AbstractSoundInstance has played to end and is looping\n\t * @method _handleLoop\n\t * @protected\n\t * @since 0.6.0\n\t */\n\tp._handleLoop = function () {\n\t\t// plugin specific code\n\t};\n\n\tcreatejs.AbstractSoundInstance = createjs.promote(AbstractSoundInstance, \"EventDispatcher\");\n\tcreatejs.DefaultSoundInstance = createjs.AbstractSoundInstance;\t// used when no plugin is supported\n}());\n\n//##############################################################################\n// AbstractPlugin.js\n//##############################################################################\n\n(function () {\n\t\"use strict\";\n\n\n// constructor:\n \t/**\n\t * A default plugin class used as a base for all other plugins.\n\t * @class AbstractPlugin\n\t * @constructor\n\t * @since 0.6.0\n\t */\n\n\tvar AbstractPlugin = function () {\n\t// private properties:\n\t\t/**\n\t\t * The capabilities of the plugin.\n\t\t * method and is used internally.\n\t\t * @property _capabilities\n\t\t * @type {Object}\n\t\t * @default null\n\t\t * @protected\n\t\t * @static\n\t\t */\n\t\tthis._capabilities = null;\n\n\t\t/**\n\t\t * Object hash indexed by the source URI of all created loaders, used to properly destroy them if sources are removed.\n\t\t * @type {Object}\n\t\t * @protected\n\t\t */\n\t\tthis._loaders = {};\n\n\t\t/**\n\t\t * Object hash indexed by the source URI of each file to indicate if an audio source has begun loading,\n\t\t * is currently loading, or has completed loading.  Can be used to store non boolean data after loading\n\t\t * is complete (for example arrayBuffers for web audio).\n\t\t * @property _audioSources\n\t\t * @type {Object}\n\t\t * @protected\n\t\t */\n\t\tthis._audioSources = {};\n\n\t\t/**\n\t\t * Object hash indexed by the source URI of all created SoundInstances, updates the playbackResource if it loads after they are created,\n\t\t * and properly destroy them if sources are removed\n\t\t * @type {Object}\n\t\t * @protected\n\t\t */\n\t\tthis._soundInstances = {};\n\n\t\t/**\n\t\t * The internal master volume value of the plugin.\n\t\t * @property _volume\n\t\t * @type {Number}\n\t\t * @default 1\n\t\t * @protected\n\t\t */\n\t\tthis._volume = 1;\n\n\t\t/**\n\t\t * A reference to a loader class used by a plugin that must be set.\n\t\t * @type {Object}\n\t\t * @protected\n\t\t */\n\t\tthis._loaderClass;\n\n\t\t/**\n\t\t * A reference to an AbstractSoundInstance class used by a plugin that must be set.\n\t\t * @type {Object}\n\t\t * @protected;\n\t\t */\n\t\tthis._soundInstanceClass;\n\t};\n\tvar p = AbstractPlugin.prototype;\n\n\t/**\n\t * <strong>REMOVED</strong>. Removed in favor of using `MySuperClass_constructor`.\n\t * See {{#crossLink \"Utility Methods/extend\"}}{{/crossLink}} and {{#crossLink \"Utility Methods/promote\"}}{{/crossLink}}\n\t * for details.\n\t *\n\t * There is an inheritance tutorial distributed with EaselJS in /tutorials/Inheritance.\n\t *\n\t * @method initialize\n\t * @protected\n\t * @deprecated\n\t */\n\t// p.initialize = function() {}; // searchable for devs wondering where it is.\n\n\n// Static Properties:\n// NOTE THESE PROPERTIES NEED TO BE ADDED TO EACH PLUGIN\n\t/**\n\t * The capabilities of the plugin. This is generated via the _generateCapabilities method and is used internally.\n\t * @property _capabilities\n\t * @type {Object}\n\t * @default null\n\t * @protected\n\t * @static\n\t */\n\tAbstractPlugin._capabilities = null;\n\n\t/**\n\t * Determine if the plugin can be used in the current browser/OS.\n\t * @method isSupported\n\t * @return {Boolean} If the plugin can be initialized.\n\t * @static\n\t */\n\tAbstractPlugin.isSupported = function () {\n\t\treturn true;\n\t};\n\n\n// public methods:\n\t/**\n\t * Pre-register a sound for preloading and setup. This is called by {{#crossLink \"Sound\"}}{{/crossLink}}.\n\t * Note all plugins provide a <code>Loader</code> instance, which <a href=\"http://preloadjs.com\" target=\"_blank\">PreloadJS</a>\n\t * can use to assist with preloading.\n\t * @method register\n\t * @param {String} loadItem An Object containing the source of the audio\n\t * Note that not every plugin will manage this value.\n\t * @return {Object} A result object, containing a \"tag\" for preloading purposes.\n\t */\n\tp.register = function (loadItem) {\n\t\tvar loader = this._loaders[loadItem.src];\n\t\tif(loader && !loader.canceled) {return this._loaders[loadItem.src];}\t// already loading/loaded this, so don't load twice\n\t\t// OJR potential issue that we won't be firing loaded event, might need to trigger if this is already loaded?\n\t\tthis._audioSources[loadItem.src] = true;\n\t\tthis._soundInstances[loadItem.src] = [];\n\t\tloader = new this._loaderClass(loadItem);\n\t\tloader.on(\"complete\", this._handlePreloadComplete, this);\n\t\tthis._loaders[loadItem.src] = loader;\n\t\treturn loader;\n\t};\n\n\t// note sound calls register before calling preload\n\t/**\n\t * Internally preload a sound.\n\t * @method preload\n\t * @param {Loader} loader The sound URI to load.\n\t */\n\tp.preload = function (loader) {\n\t\tloader.on(\"error\", this._handlePreloadError, this);\n\t\tloader.load();\n\t};\n\n\t/**\n\t * Checks if preloading has started for a specific source. If the source is found, we can assume it is loading,\n\t * or has already finished loading.\n\t * @method isPreloadStarted\n\t * @param {String} src The sound URI to check.\n\t * @return {Boolean}\n\t */\n\tp.isPreloadStarted = function (src) {\n\t\treturn (this._audioSources[src] != null);\n\t};\n\n\t/**\n\t * Checks if preloading has finished for a specific source.\n\t * @method isPreloadComplete\n\t * @param {String} src The sound URI to load.\n\t * @return {Boolean}\n\t */\n\tp.isPreloadComplete = function (src) {\n\t\treturn (!(this._audioSources[src] == null || this._audioSources[src] == true));\n\t};\n\n\t/**\n\t * Remove a sound added using {{#crossLink \"WebAudioPlugin/register\"}}{{/crossLink}}. Note this does not cancel a preload.\n\t * @method removeSound\n\t * @param {String} src The sound URI to unload.\n\t */\n\tp.removeSound = function (src) {\n\t\tif (!this._soundInstances[src]) { return; }\n\t\tfor (var i = this._soundInstances[src].length; i--; ) {\n\t\t\tvar item = this._soundInstances[src][i];\n\t\t\titem.destroy();\n\t\t}\n\t\tdelete(this._soundInstances[src]);\n\t\tdelete(this._audioSources[src]);\n\t\tif(this._loaders[src]) { this._loaders[src].destroy(); }\n\t\tdelete(this._loaders[src]);\n\t};\n\n\t/**\n\t * Remove all sounds added using {{#crossLink \"WebAudioPlugin/register\"}}{{/crossLink}}. Note this does not cancel a preload.\n\t * @method removeAllSounds\n\t * @param {String} src The sound URI to unload.\n\t */\n\tp.removeAllSounds = function () {\n\t\tfor(var key in this._audioSources) {\n\t\t\tthis.removeSound(key);\n\t\t}\n\t};\n\n\t/**\n\t * Create a sound instance. If the sound has not been preloaded, it is internally preloaded here.\n\t * @method create\n\t * @param {String} src The sound source to use.\n\t * @param {Number} startTime Audio sprite property used to apply an offset, in milliseconds.\n\t * @param {Number} duration Audio sprite property used to set the time the clip plays for, in milliseconds.\n\t * @return {AbstractSoundInstance} A sound instance for playback and control.\n\t */\n\tp.create = function (src, startTime, duration) {\n\t\tif (!this.isPreloadStarted(src)) {\n\t\t\tthis.preload(this.register(src));\n\t\t}\n\t\tvar si = new this._soundInstanceClass(src, startTime, duration, this._audioSources[src]);\n\t\tthis._soundInstances[src].push(si);\n\t\treturn si;\n\t};\n\n\t// if a plugin does not support volume and mute, it should set these to null\n\t/**\n\t * Set the master volume of the plugin, which affects all SoundInstances.\n\t * @method setVolume\n\t * @param {Number} value The volume to set, between 0 and 1.\n\t * @return {Boolean} If the plugin processes the setVolume call (true). The Sound class will affect all the\n\t * instances manually otherwise.\n\t */\n\tp.setVolume = function (value) {\n\t\tthis._volume = value;\n\t\tthis._updateVolume();\n\t\treturn true;\n\t};\n\n\t/**\n\t * Get the master volume of the plugin, which affects all SoundInstances.\n\t * @method getVolume\n\t * @return {Number} The volume level, between 0 and 1.\n\t */\n\tp.getVolume = function () {\n\t\treturn this._volume;\n\t};\n\n\t/**\n\t * Mute all sounds via the plugin.\n\t * @method setMute\n\t * @param {Boolean} value If all sound should be muted or not. Note that plugin-level muting just looks up\n\t * the mute value of Sound {{#crossLink \"Sound/getMute\"}}{{/crossLink}}, so this property is not used here.\n\t * @return {Boolean} If the mute call succeeds.\n\t */\n\tp.setMute = function (value) {\n\t\tthis._updateVolume();\n\t\treturn true;\n\t};\n\n\t// plugins should overwrite this method\n\tp.toString = function () {\n\t\treturn \"[AbstractPlugin]\";\n\t};\n\n\n// private methods:\n\t/**\n\t * Handles internal preload completion.\n\t * @method _handlePreloadComplete\n\t * @protected\n\t */\n\tp._handlePreloadComplete = function (event) {\n\t\tvar src = event.target.getItem().src;\n\t\tthis._audioSources[src] = event.result;\n\t\tfor (var i = 0, l = this._soundInstances[src].length; i < l; i++) {\n\t\t\tvar item = this._soundInstances[src][i];\n\t\t\titem.setPlaybackResource(this._audioSources[src]);\n\t\t\t// ToDo consider adding play call here if playstate == playfailed\n\t\t}\n\t};\n\n\t/**\n\t * Handles internal preload erros\n\t * @method _handlePreloadError\n\t * @param event\n\t * @protected\n\t */\n\tp._handlePreloadError = function(event) {\n\t\t//delete(this._audioSources[src]);\n\t};\n\n\t/**\n\t * Set the gain value for master audio. Should not be called externally.\n\t * @method _updateVolume\n\t * @protected\n\t */\n\tp._updateVolume = function () {\n\t\t// Plugin Specific code\n\t};\n\n\tcreatejs.AbstractPlugin = AbstractPlugin;\n}());\n\n//##############################################################################\n// WebAudioLoader.js\n//##############################################################################\n\n(function () {\n\t\"use strict\";\n\n\t/**\n\t * Loader provides a mechanism to preload Web Audio content via PreloadJS or internally. Instances are returned to\n\t * the preloader, and the load method is called when the asset needs to be requested.\n\t *\n\t * @class WebAudioLoader\n\t * @param {String} loadItem The item to be loaded\n\t * @extends XHRRequest\n\t * @protected\n\t */\n\tfunction Loader(loadItem) {\n\t\tthis.AbstractLoader_constructor(loadItem, true, createjs.AbstractLoader.SOUND);\n\n\t};\n\tvar p = createjs.extend(Loader, createjs.AbstractLoader);\n\n\t// TODO: deprecated\n\t// p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\n\n\n\t/**\n\t * web audio context required for decoding audio\n\t * @property context\n\t * @type {AudioContext}\n\t * @static\n\t */\n\tLoader.context = null;\n\n\n// public methods\n\tp.toString = function () {\n\t\treturn \"[WebAudioLoader]\";\n\t};\n\n\n// private methods\n\tp._createRequest = function() {\n\t\tthis._request = new createjs.XHRRequest(this._item, false);\n\t\tthis._request.setResponseType(\"arraybuffer\");\n\t};\n\n\tp._sendComplete = function (event) {\n\t\t// OJR we leave this wrapped in Loader because we need to reference src and the handler only receives a single argument, the decodedAudio\n\t\tLoader.context.decodeAudioData(this._rawResult,\n\t         createjs.proxy(this._handleAudioDecoded, this),\n\t         createjs.proxy(this._sendError, this));\n\t};\n\n\n\t/**\n\t* The audio has been decoded.\n\t* @method handleAudioDecoded\n\t* @param decoded\n\t* @protected\n\t*/\n\tp._handleAudioDecoded = function (decodedAudio) {\n\t\tthis._result = decodedAudio;\n\t\tthis.AbstractLoader__sendComplete();\n\t};\n\n\tcreatejs.WebAudioLoader = createjs.promote(Loader, \"AbstractLoader\");\n}());\n\n//##############################################################################\n// WebAudioSoundInstance.js\n//##############################################################################\n\n/**\n * WebAudioSoundInstance extends the base api of {{#crossLink \"AbstractSoundInstance\"}}{{/crossLink}} and is used by\n * {{#crossLink \"WebAudioPlugin\"}}{{/crossLink}}.\n *\n * WebAudioSoundInstance exposes audioNodes for advanced users.\n *\n * @param {String} src The path to and file name of the sound.\n * @param {Number} startTime Audio sprite property used to apply an offset, in milliseconds.\n * @param {Number} duration Audio sprite property used to set the time the clip plays for, in milliseconds.\n * @param {Object} playbackResource Any resource needed by plugin to support audio playback.\n * @class WebAudioSoundInstance\n * @extends AbstractSoundInstance\n * @constructor\n */\n(function () {\n\t\"use strict\";\n\n\tfunction WebAudioSoundInstance(src, startTime, duration, playbackResource) {\n\t\tthis.AbstractSoundInstance_constructor(src, startTime, duration, playbackResource);\n\n\n// public properties\n\t\t/**\n\t\t * NOTE this is only intended for use by advanced users.\n\t\t * <br />GainNode for controlling <code>WebAudioSoundInstance</code> volume. Connected to the {{#crossLink \"WebAudioSoundInstance/destinationNode:property\"}}{{/crossLink}}.\n\t\t * @property gainNode\n\t\t * @type {AudioGainNode}\n\t\t * @since 0.4.0\n\t\t *\n\t\t */\n\t\tthis.gainNode = s.context.createGain();\n\n\t\t/**\n\t\t * NOTE this is only intended for use by advanced users.\n\t\t * <br />A panNode allowing left and right audio channel panning only. Connected to WebAudioSoundInstance {{#crossLink \"WebAudioSoundInstance/gainNode:property\"}}{{/crossLink}}.\n\t\t * @property panNode\n\t\t * @type {AudioPannerNode}\n\t\t * @since 0.4.0\n\t\t */\n\t\tthis.panNode = s.context.createPanner();\n\t\tthis.panNode.panningModel = s._panningModel;\n\t\tthis.panNode.connect(this.gainNode);\n\t\tthis._updatePan();\n\n\t\t/**\n\t\t * NOTE this is only intended for use by advanced users.\n\t\t * <br />sourceNode is the audio source. Connected to WebAudioSoundInstance {{#crossLink \"WebAudioSoundInstance/panNode:property\"}}{{/crossLink}}.\n\t\t * @property sourceNode\n\t\t * @type {AudioNode}\n\t\t * @since 0.4.0\n\t\t *\n\t\t */\n\t\tthis.sourceNode = null;\n\n\n// private properties\n\t\t/**\n\t\t * Timeout that is created internally to handle sound playing to completion.\n\t\t * Stored so we can remove it when stop, pause, or cleanup are called\n\t\t * @property _soundCompleteTimeout\n\t\t * @type {timeoutVariable}\n\t\t * @default null\n\t\t * @protected\n\t\t * @since 0.4.0\n\t\t */\n\t\tthis._soundCompleteTimeout = null;\n\n\t\t/**\n\t\t * NOTE this is only intended for use by very advanced users.\n\t\t * _sourceNodeNext is the audio source for the next loop, inserted in a look ahead approach to allow for smooth\n\t\t * looping. Connected to {{#crossLink \"WebAudioSoundInstance/gainNode:property\"}}{{/crossLink}}.\n\t\t * @property _sourceNodeNext\n\t\t * @type {AudioNode}\n\t\t * @default null\n\t\t * @protected\n\t\t * @since 0.4.1\n\t\t *\n\t\t */\n\t\tthis._sourceNodeNext = null;\n\n\t\t/**\n\t\t * Time audio started playback, in seconds. Used to handle set position, get position, and resuming from paused.\n\t\t * @property _playbackStartTime\n\t\t * @type {Number}\n\t\t * @default 0\n\t\t * @protected\n\t\t * @since 0.4.0\n\t\t */\n\t\tthis._playbackStartTime = 0;\n\n\t\t// Proxies, make removing listeners easier.\n\t\tthis._endedHandler = createjs.proxy(this._handleSoundComplete, this);\n\t};\n\tvar p = createjs.extend(WebAudioSoundInstance, createjs.AbstractSoundInstance);\n\tvar s = WebAudioSoundInstance;\n\n\t// TODO: deprecated\n\t// p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\n\n\n\t/**\n\t * Note this is only intended for use by advanced users.\n\t * <br />Audio context used to create nodes.  This is and needs to be the same context used by {{#crossLink \"WebAudioPlugin\"}}{{/crossLink}}.\n  \t * @property context\n\t * @type {AudioContext}\n\t * @static\n\t * @since 0.6.0\n\t */\n\ts.context = null;\n\n\t/**\n\t * Note this is only intended for use by advanced users.\n\t * <br />The scratch buffer that will be assigned to the buffer property of a source node on close.  \n\t * This is and should be the same scratch buffer referenced by {{#crossLink \"WebAudioPlugin\"}}{{/crossLink}}.\n  \t * @property _scratchBuffer\n\t * @type {AudioBufferSourceNode}\n\t * @static\n\t */\n\ts._scratchBuffer = null;\n\n\t/**\n\t * Note this is only intended for use by advanced users.\n\t * <br /> Audio node from WebAudioPlugin that sequences to <code>context.destination</code>\n\t * @property destinationNode\n\t * @type {AudioNode}\n\t * @static\n\t * @since 0.6.0\n\t */\n\ts.destinationNode = null;\n\n\t/**\n\t * Value to set panning model to equal power for WebAudioSoundInstance.  Can be \"equalpower\" or 0 depending on browser implementation.\n\t * @property _panningModel\n\t * @type {Number / String}\n\t * @protected\n\t * @static\n\t * @since 0.6.0\n\t */\n\ts._panningModel = \"equalpower\";\n\n\n// Public methods\n\tp.destroy = function() {\n\t\tthis.AbstractSoundInstance_destroy();\n\n\t\tthis.panNode.disconnect(0);\n\t\tthis.panNode = null;\n\t\tthis.gainNode.disconnect(0);\n\t\tthis.gainNode = null;\n\t};\n\n\tp.toString = function () {\n\t\treturn \"[WebAudioSoundInstance]\";\n\t};\n\n\n// Private Methods\n\tp._updatePan = function() {\n\t\tthis.panNode.setPosition(this._pan, 0, -0.5);\n\t\t// z need to be -0.5 otherwise the sound only plays in left, right, or center\n\t};\n\n\tp._removeLooping = function(value) {\n\t\tthis._sourceNodeNext = this._cleanUpAudioNode(this._sourceNodeNext);\n\t};\n\n\tp._addLooping = function(value) {\n\t\tif (this.playState != createjs.Sound.PLAY_SUCCEEDED) { return; }\n\t\tthis._sourceNodeNext = this._createAndPlayAudioNode(this._playbackStartTime, 0);\n\t};\n\n\tp._setDurationFromSource = function () {\n\t\tthis._duration = this.playbackResource.duration * 1000;\n\t};\n\n\tp._handleCleanUp = function () {\n\t\tif (this.sourceNode && this.playState == createjs.Sound.PLAY_SUCCEEDED) {\n\t\t\tthis.sourceNode = this._cleanUpAudioNode(this.sourceNode);\n\t\t\tthis._sourceNodeNext = this._cleanUpAudioNode(this._sourceNodeNext);\n\t\t}\n\n\t\tif (this.gainNode.numberOfOutputs != 0) {this.gainNode.disconnect(0);}\n\t\t// OJR there appears to be a bug that this doesn't always work in webkit (Chrome and Safari). According to the documentation, this should work.\n\n\t\tclearTimeout(this._soundCompleteTimeout);\n\n\t\tthis._playbackStartTime = 0;\t// This is used by getPosition\n\t};\n\n\t/**\n\t * Turn off and disconnect an audioNode, then set reference to null to release it for garbage collection\n\t * @method _cleanUpAudioNode\n\t * @param audioNode\n\t * @return {audioNode}\n\t * @protected\n\t * @since 0.4.1\n\t */\n\tp._cleanUpAudioNode = function(audioNode) {\n\t\tif(audioNode) {\n\t\t\taudioNode.stop(0);\n\t\t\taudioNode.disconnect(0);\n\t\t\t// necessary to prevent leak on iOS Safari 7-9. will throw in almost all other\n\t\t\t// browser implementations.\n\t\t\ttry { audioNode.buffer = s._scratchBuffer; } catch(e) {}\n\t\t\taudioNode = null;\n\t\t}\n\t\treturn audioNode;\n\t};\n\n\tp._handleSoundReady = function (event) {\n\t\tthis.gainNode.connect(s.destinationNode);  // this line can cause a memory leak.  Nodes need to be disconnected from the audioDestination or any sequence that leads to it.\n\n\t\tvar dur = this._duration * 0.001;\n\t\tvar pos = this._position * 0.001;\n\t\tif (pos > dur) {pos = dur;}\n\t\tthis.sourceNode = this._createAndPlayAudioNode((s.context.currentTime - dur), pos);\n\t\tthis._playbackStartTime = this.sourceNode.startTime - pos;\n\n\t\tthis._soundCompleteTimeout = setTimeout(this._endedHandler, (dur - pos) * 1000);\n\n\t\tif(this._loop != 0) {\n\t\t\tthis._sourceNodeNext = this._createAndPlayAudioNode(this._playbackStartTime, 0);\n\t\t}\n\t};\n\n\t/**\n\t * Creates an audio node using the current src and context, connects it to the gain node, and starts playback.\n\t * @method _createAndPlayAudioNode\n\t * @param {Number} startTime The time to add this to the web audio context, in seconds.\n\t * @param {Number} offset The amount of time into the src audio to start playback, in seconds.\n\t * @return {audioNode}\n\t * @protected\n\t * @since 0.4.1\n\t */\n\tp._createAndPlayAudioNode = function(startTime, offset) {\n\t\tvar audioNode = s.context.createBufferSource();\n\t\taudioNode.buffer = this.playbackResource;\n\t\taudioNode.connect(this.panNode);\n\t\tvar dur = this._duration * 0.001;\n\t\taudioNode.startTime = startTime + dur;\n\t\taudioNode.start(audioNode.startTime, offset+(this._startTime*0.001), dur - offset);\n\t\treturn audioNode;\n\t};\n\n\tp._pause = function () {\n\t\tthis._position = (s.context.currentTime - this._playbackStartTime) * 1000;  // * 1000 to give milliseconds, lets us restart at same point\n\t\tthis.sourceNode = this._cleanUpAudioNode(this.sourceNode);\n\t\tthis._sourceNodeNext = this._cleanUpAudioNode(this._sourceNodeNext);\n\n\t\tif (this.gainNode.numberOfOutputs != 0) {this.gainNode.disconnect(0);}\n\n\t\tclearTimeout(this._soundCompleteTimeout);\n\t};\n\n\tp._resume = function () {\n\t\tthis._handleSoundReady();\n\t};\n\n\t/*\n\tp._handleStop = function () {\n\t\t// web audio does not need to do anything extra\n\t};\n\t*/\n\n\tp._updateVolume = function () {\n\t\tvar newVolume = this._muted ? 0 : this._volume;\n\t  \tif (newVolume != this.gainNode.gain.value) {\n\t\t  this.gainNode.gain.value = newVolume;\n  \t\t}\n\t};\n\n\tp._calculateCurrentPosition = function () {\n\t\treturn ((s.context.currentTime - this._playbackStartTime) * 1000); // pos in seconds * 1000 to give milliseconds\n\t};\n\n\tp._updatePosition = function () {\n\t\tthis.sourceNode = this._cleanUpAudioNode(this.sourceNode);\n\t\tthis._sourceNodeNext = this._cleanUpAudioNode(this._sourceNodeNext);\n\t\tclearTimeout(this._soundCompleteTimeout);\n\n\t\tif (!this._paused) {this._handleSoundReady();}\n\t};\n\n\t// OJR we are using a look ahead approach to ensure smooth looping.\n\t// We add _sourceNodeNext to the audio context so that it starts playing even if this callback is delayed.\n\t// This technique is described here:  http://www.html5rocks.com/en/tutorials/audio/scheduling/\n\t// NOTE the cost of this is that our audio loop may not always match the loop event timing precisely.\n\tp._handleLoop = function () {\n\t\tthis._cleanUpAudioNode(this.sourceNode);\n\t\tthis.sourceNode = this._sourceNodeNext;\n\t\tthis._playbackStartTime = this.sourceNode.startTime;\n\t\tthis._sourceNodeNext = this._createAndPlayAudioNode(this._playbackStartTime, 0);\n\t\tthis._soundCompleteTimeout = setTimeout(this._endedHandler, this._duration);\n\t};\n\n\tp._updateDuration = function () {\n\t\tif(this.playState == createjs.Sound.PLAY_SUCCEEDED) {\n\t\t\tthis._pause();\n\t\t\tthis._resume();\n\t\t}\n\t};\n\n\tcreatejs.WebAudioSoundInstance = createjs.promote(WebAudioSoundInstance, \"AbstractSoundInstance\");\n}());\n\n//##############################################################################\n// WebAudioPlugin.js\n//##############################################################################\n\n(function () {\n\n\t\"use strict\";\n\n\t/**\n\t * Play sounds using Web Audio in the browser. The WebAudioPlugin is currently the default plugin, and will be used\n\t * anywhere that it is supported. To change plugin priority, check out the Sound API\n\t * {{#crossLink \"Sound/registerPlugins\"}}{{/crossLink}} method.\n\n\t * <h4>Known Browser and OS issues for Web Audio</h4>\n\t * <b>Firefox 25</b>\n\t * <li>\n\t *     mp3 audio files do not load properly on all windows machines, reported <a href=\"https://bugzilla.mozilla.org/show_bug.cgi?id=929969\" target=\"_blank\">here</a>.\n\t *     <br />For this reason it is recommended to pass another FireFox-supported type (i.e. ogg) as the default\n\t *     extension, until this bug is resolved\n\t * </li>\n\t *\n\t * <b>Webkit (Chrome and Safari)</b>\n\t * <li>\n\t *     AudioNode.disconnect does not always seem to work.  This can cause the file size to grow over time if you\n\t * \t   are playing a lot of audio files.\n\t * </li>\n\t *\n\t * <b>iOS 6 limitations</b>\n\t * <ul>\n\t *     <li>\n\t *         Sound is initially muted and will only unmute through play being called inside a user initiated event\n\t *         (touch/click). Please read the mobile playback notes in the the {{#crossLink \"Sound\"}}{{/crossLink}}\n\t *         class for a full overview of the limitations, and how to get around them.\n\t *     </li>\n\t *\t   <li>\n\t *\t       A bug exists that will distort un-cached audio when a video element is present in the DOM. You can avoid\n\t *\t       this bug by ensuring the audio and video audio share the same sample rate.\n\t *\t   </li>\n\t * </ul>\n\t * @class WebAudioPlugin\n\t * @extends AbstractPlugin\n\t * @constructor\n\t * @since 0.4.0\n\t */\n\tfunction WebAudioPlugin() {\n\t\tthis.AbstractPlugin_constructor();\n\n\n// Private Properties\n\t\t/**\n\t\t * Value to set panning model to equal power for WebAudioSoundInstance.  Can be \"equalpower\" or 0 depending on browser implementation.\n\t\t * @property _panningModel\n\t\t * @type {Number / String}\n\t\t * @protected\n\t\t */\n\t\tthis._panningModel = s._panningModel;;\n\n\t\t/**\n\t\t * The web audio context, which WebAudio uses to play audio. All nodes that interact with the WebAudioPlugin\n\t\t * need to be created within this context.\n\t\t * @property context\n\t\t * @type {AudioContext}\n\t\t */\n\t\tthis.context = s.context;\n\n\t\t/**\n\t\t * A DynamicsCompressorNode, which is used to improve sound quality and prevent audio distortion.\n\t\t * It is connected to <code>context.destination</code>.\n\t\t *\n\t\t * Can be accessed by advanced users through createjs.Sound.activePlugin.dynamicsCompressorNode.\n\t\t * @property dynamicsCompressorNode\n\t\t * @type {AudioNode}\n\t\t */\n\t\tthis.dynamicsCompressorNode = this.context.createDynamicsCompressor();\n\t\tthis.dynamicsCompressorNode.connect(this.context.destination);\n\n\t\t/**\n\t\t * A GainNode for controlling master volume. It is connected to {{#crossLink \"WebAudioPlugin/dynamicsCompressorNode:property\"}}{{/crossLink}}.\n\t\t *\n\t\t * Can be accessed by advanced users through createjs.Sound.activePlugin.gainNode.\n\t\t * @property gainNode\n\t\t * @type {AudioGainNode}\n\t\t */\n\t\tthis.gainNode = this.context.createGain();\n\t\tthis.gainNode.connect(this.dynamicsCompressorNode);\n\t\tcreatejs.WebAudioSoundInstance.destinationNode = this.gainNode;\n\n\t\tthis._capabilities = s._capabilities;\n\n\t\tthis._loaderClass = createjs.WebAudioLoader;\n\t\tthis._soundInstanceClass = createjs.WebAudioSoundInstance;\n\n\t\tthis._addPropsToClasses();\n\t}\n\tvar p = createjs.extend(WebAudioPlugin, createjs.AbstractPlugin);\n\n\t// TODO: deprecated\n\t// p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\n\n\n// Static Properties\n\tvar s = WebAudioPlugin;\n\t/**\n\t * The capabilities of the plugin. This is generated via the {{#crossLink \"WebAudioPlugin/_generateCapabilities:method\"}}{{/crossLink}}\n\t * method and is used internally.\n\t * @property _capabilities\n\t * @type {Object}\n\t * @default null\n\t * @protected\n\t * @static\n\t */\n\ts._capabilities = null;\n\n\t/**\n\t * Value to set panning model to equal power for WebAudioSoundInstance.  Can be \"equalpower\" or 0 depending on browser implementation.\n\t * @property _panningModel\n\t * @type {Number / String}\n\t * @protected\n\t * @static\n\t */\n\ts._panningModel = \"equalpower\";\n\n\t/**\n\t * The web audio context, which WebAudio uses to play audio. All nodes that interact with the WebAudioPlugin\n\t * need to be created within this context.\n\t *\n\t * Advanced users can set this to an existing context, but <b>must</b> do so before they call\n\t * {{#crossLink \"Sound/registerPlugins\"}}{{/crossLink}} or {{#crossLink \"Sound/initializeDefaultPlugins\"}}{{/crossLink}}.\n\t *\n\t * @property context\n\t * @type {AudioContext}\n\t * @static\n\t */\n\ts.context = null;\n\n\t/**\n\t * The scratch buffer that will be assigned to the buffer property of a source node on close.\n\t * Works around an iOS Safari bug: https://github.com/CreateJS/SoundJS/issues/102\n\t *\n\t * Advanced users can set this to an existing source node, but <b>must</b> do so before they call\n\t * {{#crossLink \"Sound/registerPlugins\"}}{{/crossLink}} or {{#crossLink \"Sound/initializeDefaultPlugins\"}}{{/crossLink}}.\n\t *\n\t * @property _scratchBuffer\n\t * @type {AudioBuffer}\n\t * @protected\n\t * @static\n\t */\n\t s._scratchBuffer = null;\n\n\t/**\n\t * Indicated whether audio on iOS has been unlocked, which requires a touchend/mousedown event that plays an\n\t * empty sound.\n\t * @property _unlocked\n\t * @type {boolean}\n\t * @since 0.6.2\n\t * @private\n\t */\n\ts._unlocked = false;\n\n\n// Static Public Methods\n\t/**\n\t * Determine if the plugin can be used in the current browser/OS.\n\t * @method isSupported\n\t * @return {Boolean} If the plugin can be initialized.\n\t * @static\n\t */\n\ts.isSupported = function () {\n\t\t// check if this is some kind of mobile device, Web Audio works with local protocol under PhoneGap and it is unlikely someone is trying to run a local file\n\t\tvar isMobilePhoneGap = createjs.BrowserDetect.isIOS || createjs.BrowserDetect.isAndroid || createjs.BrowserDetect.isBlackberry;\n\t\t// OJR isMobile may be redundant with _isFileXHRSupported available.  Consider removing.\n\t\tif (location.protocol == \"file:\" && !isMobilePhoneGap && !this._isFileXHRSupported()) { return false; }  // Web Audio requires XHR, which is not usually available locally\n\t\ts._generateCapabilities();\n\t\tif (s.context == null) {return false;}\n\t\treturn true;\n\t};\n\n\t/**\n\t * Plays an empty sound in the web audio context.  This is used to enable web audio on iOS devices, as they\n\t * require the first sound to be played inside of a user initiated event (touch/click).  This is called when\n\t * {{#crossLink \"WebAudioPlugin\"}}{{/crossLink}} is initialized (by Sound {{#crossLink \"Sound/initializeDefaultPlugins\"}}{{/crossLink}}\n\t * for example).\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *     function handleTouch(event) {\n\t *         createjs.WebAudioPlugin.playEmptySound();\n\t *     }\n\t *\n\t * @method playEmptySound\n\t * @static\n\t * @since 0.4.1\n\t */\n\ts.playEmptySound = function() {\n\t\tif (s.context == null) {return;}\n\t\tvar source = s.context.createBufferSource();\n\t\tsource.buffer = s._scratchBuffer;\n\t\tsource.connect(s.context.destination);\n\t\tsource.start(0, 0, 0);\n\t};\n\n\n// Static Private Methods\n\t/**\n\t * Determine if XHR is supported, which is necessary for web audio.\n\t * @method _isFileXHRSupported\n\t * @return {Boolean} If XHR is supported.\n\t * @since 0.4.2\n\t * @protected\n\t * @static\n\t */\n\ts._isFileXHRSupported = function() {\n\t\t// it's much easier to detect when something goes wrong, so let's start optimistically\n\t\tvar supported = true;\n\n\t\tvar xhr = new XMLHttpRequest();\n\t\ttry {\n\t\t\txhr.open(\"GET\", \"WebAudioPluginTest.fail\", false); // loading non-existant file triggers 404 only if it could load (synchronous call)\n\t\t} catch (error) {\n\t\t\t// catch errors in cases where the onerror is passed by\n\t\t\tsupported = false;\n\t\t\treturn supported;\n\t\t}\n\t\txhr.onerror = function() { supported = false; }; // cause irrelevant\n\t\t// with security turned off, we can get empty success results, which is actually a failed read (status code 0?)\n\t\txhr.onload = function() { supported = this.status == 404 || (this.status == 200 || (this.status == 0 && this.response != \"\")); };\n\t\ttry {\n\t\t\txhr.send();\n\t\t} catch (error) {\n\t\t\t// catch errors in cases where the onerror is passed by\n\t\t\tsupported = false;\n\t\t}\n\n\t\treturn supported;\n\t};\n\n\t/**\n\t * Determine the capabilities of the plugin. Used internally. Please see the Sound API {{#crossLink \"Sound/getCapabilities\"}}{{/crossLink}}\n\t * method for an overview of plugin capabilities.\n\t * @method _generateCapabilities\n\t * @static\n\t * @protected\n\t */\n\ts._generateCapabilities = function () {\n\t\tif (s._capabilities != null) {return;}\n\t\t// Web Audio can be in any formats supported by the audio element, from http://www.w3.org/TR/webaudio/#AudioContext-section\n\t\tvar t = document.createElement(\"audio\");\n\t\tif (t.canPlayType == null) {return null;}\n\n\t\tif (s.context == null) {\n\t\t\tif (window.AudioContext) {\n\t\t\t\ts.context = new AudioContext();\n\t\t\t} else if (window.webkitAudioContext) {\n\t\t\t\ts.context = new webkitAudioContext();\n\t\t\t} else {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t}\n\t\tif (s._scratchBuffer == null) {\n\t\t\ts._scratchBuffer = s.context.createBuffer(1, 1, 22050);\n\t\t}\n\n\t\ts._compatibilitySetUp();\n\n\t\t// Listen for document level clicks to unlock WebAudio on iOS. See the _unlock method.\n\t\tif (\"ontouchstart\" in window && s.context.state != \"running\") {\n\t\t\ts._unlock(); // When played inside of a touch event, this will enable audio on iOS immediately.\n\t\t\tdocument.addEventListener(\"mousedown\", s._unlock, true);\n\t\t\tdocument.addEventListener(\"touchend\", s._unlock, true);\n\t\t}\n\n\n\t\ts._capabilities = {\n\t\t\tpanning:true,\n\t\t\tvolume:true,\n\t\t\ttracks:-1\n\t\t};\n\n\t\t// determine which extensions our browser supports for this plugin by iterating through Sound.SUPPORTED_EXTENSIONS\n\t\tvar supportedExtensions = createjs.Sound.SUPPORTED_EXTENSIONS;\n\t\tvar extensionMap = createjs.Sound.EXTENSION_MAP;\n\t\tfor (var i = 0, l = supportedExtensions.length; i < l; i++) {\n\t\t\tvar ext = supportedExtensions[i];\n\t\t\tvar playType = extensionMap[ext] || ext;\n\t\t\ts._capabilities[ext] = (t.canPlayType(\"audio/\" + ext) != \"no\" && t.canPlayType(\"audio/\" + ext) != \"\") || (t.canPlayType(\"audio/\" + playType) != \"no\" && t.canPlayType(\"audio/\" + playType) != \"\");\n\t\t}  // OJR another way to do this might be canPlayType:\"m4a\", codex: mp4\n\n\t\t// 0=no output, 1=mono, 2=stereo, 4=surround, 6=5.1 surround.\n\t\t// See http://www.w3.org/TR/webaudio/#AudioChannelSplitter for more details on channels.\n\t\tif (s.context.destination.numberOfChannels < 2) {\n\t\t\ts._capabilities.panning = false;\n\t\t}\n\t};\n\n\t/**\n\t * Set up compatibility if only deprecated web audio calls are supported.\n\t * See http://www.w3.org/TR/webaudio/#DeprecationNotes\n\t * Needed so we can support new browsers that don't support deprecated calls (Firefox) as well as old browsers that\n\t * don't support new calls.\n\t *\n\t * @method _compatibilitySetUp\n\t * @static\n\t * @protected\n\t * @since 0.4.2\n\t */\n\ts._compatibilitySetUp = function() {\n\t\ts._panningModel = \"equalpower\";\n\t\t//assume that if one new call is supported, they all are\n\t\tif (s.context.createGain) { return; }\n\n\t\t// simple name change, functionality the same\n\t\ts.context.createGain = s.context.createGainNode;\n\n\t\t// source node, add to prototype\n\t\tvar audioNode = s.context.createBufferSource();\n\t\taudioNode.__proto__.start = audioNode.__proto__.noteGrainOn;\t// note that noteGrainOn requires all 3 parameters\n\t\taudioNode.__proto__.stop = audioNode.__proto__.noteOff;\n\n\t\t// panningModel\n\t\ts._panningModel = 0;\n\t};\n\n\t/**\n\t * Try to unlock audio on iOS. This is triggered from either WebAudio plugin setup (which will work if inside of\n\t * a `mousedown` or `touchend` event stack), or the first document touchend/mousedown event. If it fails (touchend\n\t * will fail if the user presses for too long, indicating a scroll event instead of a click event.\n\t *\n\t * Note that earlier versions of iOS supported `touchstart` for this, but iOS9 removed this functionality. Adding\n\t * a `touchstart` event to support older platforms may preclude a `mousedown` even from getting fired on iOS9, so we\n\t * stick with `mousedown` and `touchend`.\n\t * @method _unlock\n\t * @since 0.6.2\n\t * @private\n\t */\n\ts._unlock = function() {\n\t\tif (s._unlocked) { return; }\n\t\ts.playEmptySound();\n\t\tif (s.context.state == \"running\") {\n\t\t\tdocument.removeEventListener(\"mousedown\", s._unlock, true);\n\t\t\tdocument.removeEventListener(\"touchend\", s._unlock, true);\n\t\t\ts._unlocked = true;\n\t\t}\n\t};\n\n\n// Public Methods\n\tp.toString = function () {\n\t\treturn \"[WebAudioPlugin]\";\n\t};\n\n\n// Private Methods\n\t/**\n\t * Set up needed properties on supported classes WebAudioSoundInstance and WebAudioLoader.\n\t * @method _addPropsToClasses\n\t * @static\n\t * @protected\n\t * @since 0.6.0\n\t */\n\tp._addPropsToClasses = function() {\n\t\tvar c = this._soundInstanceClass;\n\t\tc.context = this.context;\n\t\tc._scratchBuffer = s._scratchBuffer;\n\t\tc.destinationNode = this.gainNode;\n\t\tc._panningModel = this._panningModel;\n\n\t\tthis._loaderClass.context = this.context;\n\t};\n\n\n\t/**\n\t * Set the gain value for master audio. Should not be called externally.\n\t * @method _updateVolume\n\t * @protected\n\t */\n\tp._updateVolume = function () {\n\t\tvar newVolume = createjs.Sound._masterMute ? 0 : this._volume;\n\t\tif (newVolume != this.gainNode.gain.value) {\n\t\t\tthis.gainNode.gain.value = newVolume;\n\t\t}\n\t};\n\n\tcreatejs.WebAudioPlugin = createjs.promote(WebAudioPlugin, \"AbstractPlugin\");\n}());\n\n//##############################################################################\n// HTMLAudioTagPool.js\n//##############################################################################\n\n(function () {\n\t\"use strict\";\n\n\t/**\n\t * HTMLAudioTagPool is an object pool for HTMLAudio tag instances.\n\t * @class HTMLAudioTagPool\n\t * @param {String} src The source of the channel.\n\t * @protected\n\t */\n\tfunction HTMLAudioTagPool() {\n\t\t\tthrow \"HTMLAudioTagPool cannot be instantiated\";\n\t}\n\n\tvar s = HTMLAudioTagPool;\n\n// Static Properties\n\t/**\n\t * A hash lookup of each base audio tag, indexed by the audio source.\n\t * @property _tags\n\t * @type {{}}\n\t * @static\n\t * @protected\n\t */\n\ts._tags = {};\n\n\t/**\n\t * An object pool for html audio tags\n\t * @property _tagPool\n\t * @type {TagPool}\n\t * @static\n\t * @protected\n\t */\n\ts._tagPool = new TagPool();\n\n\t/**\n\t * A hash lookup of if a base audio tag is available, indexed by the audio source\n\t * @property _tagsUsed\n\t * @type {{}}\n\t * @protected\n\t * @static\n\t */\n\ts._tagUsed = {};\n\n// Static Methods\n\t/**\n\t  * Get an audio tag with the given source.\n\t  * @method get\n\t  * @param {String} src The source file used by the audio tag.\n\t  * @static\n\t  */\n\t s.get = function (src) {\n\t\tvar t = s._tags[src];\n\t\tif (t == null) {\n\t\t\t// create new base tag\n\t\t\tt = s._tags[src] = s._tagPool.get();\n\t\t\tt.src = src;\n\t\t} else {\n\t\t\t// get base or pool\n\t\t\tif (s._tagUsed[src]) {\n\t\t\t\tt = s._tagPool.get();\n\t\t\t\tt.src = src;\n\t\t\t} else {\n\t\t\t\ts._tagUsed[src] = true;\n\t\t\t}\n\t\t}\n\t\treturn t;\n\t };\n\n\t /**\n\t  * Return an audio tag to the pool.\n\t  * @method set\n\t  * @param {String} src The source file used by the audio tag.\n\t  * @param {HTMLElement} tag Audio tag to set.\n\t  * @static\n\t  */\n\t s.set = function (src, tag) {\n\t\t // check if this is base, if yes set boolean if not return to pool\n\t\t if(tag == s._tags[src]) {\n\t\t\t s._tagUsed[src] = false;\n\t\t } else {\n\t\t\t s._tagPool.set(tag);\n\t\t }\n\t };\n\n\t/**\n\t * Delete stored tag reference and return them to pool. Note that if the tag reference does not exist, this will fail.\n\t * @method remove\n\t * @param {String} src The source for the tag\n\t * @return {Boolean} If the TagPool was deleted.\n\t * @static\n\t */\n\ts.remove = function (src) {\n\t\tvar tag = s._tags[src];\n\t\tif (tag == null) {return false;}\n\t\ts._tagPool.set(tag);\n\t\tdelete(s._tags[src]);\n\t\tdelete(s._tagUsed[src]);\n\t\treturn true;\n\t};\n\n\t/**\n\t * Gets the duration of the src audio in milliseconds\n\t * @method getDuration\n\t * @param {String} src The source file used by the audio tag.\n\t * @return {Number} Duration of src in milliseconds\n\t * @static\n\t */\n\ts.getDuration= function (src) {\n\t\tvar t = s._tags[src];\n\t\tif (t == null || !t.duration) {return 0;}\t// OJR duration is NaN if loading has not completed\n\t\treturn t.duration * 1000;\n\t};\n\n\tcreatejs.HTMLAudioTagPool = HTMLAudioTagPool;\n\n\n// ************************************************************************************************************\n\t/**\n\t * The TagPool is an object pool for HTMLAudio tag instances.\n\t * #class TagPool\n\t * @param {String} src The source of the channel.\n\t * @protected\n\t */\n\tfunction TagPool(src) {\n\n// Public Properties\n\t\t/**\n\t\t * A list of all available tags in the pool.\n\t\t * #property tags\n\t\t * @type {Array}\n\t\t * @protected\n\t\t */\n\t\tthis._tags = [];\n\t};\n\n\tvar p = TagPool.prototype;\n\tp.constructor = TagPool;\n\n\n// Public Methods\n\t/**\n\t * Get an HTMLAudioElement for immediate playback. This takes it out of the pool.\n\t * #method get\n\t * @return {HTMLAudioElement} An HTML audio tag.\n\t */\n\tp.get = function () {\n\t\tvar tag;\n\t\tif (this._tags.length == 0) {\n\t\t\ttag = this._createTag();\n\t\t} else {\n\t\t\ttag = this._tags.pop();\n\t\t}\n\t\tif (tag.parentNode == null) {document.body.appendChild(tag);}\n\t\treturn tag;\n\t};\n\n\t/**\n\t * Put an HTMLAudioElement back in the pool for use.\n\t * #method set\n\t * @param {HTMLAudioElement} tag HTML audio tag\n\t */\n\tp.set = function (tag) {\n\t\t// OJR this first step seems unnecessary\n\t\tvar index = createjs.indexOf(this._tags, tag);\n\t\tif (index == -1) {\n\t\t\tthis._tags.src = null;\n\t\t\tthis._tags.push(tag);\n\t\t}\n\t};\n\n\tp.toString = function () {\n\t\treturn \"[TagPool]\";\n\t};\n\n\n// Private Methods\n\t/**\n\t * Create an HTML audio tag.\n\t * #method _createTag\n\t * @param {String} src The source file to set for the audio tag.\n\t * @return {HTMLElement} Returns an HTML audio tag.\n\t * @protected\n\t */\n\tp._createTag = function () {\n\t\tvar tag = document.createElement(\"audio\");\n\t\ttag.autoplay = false;\n\t\ttag.preload = \"none\";\n\t\t//LM: Firefox fails when this the preload=\"none\" for other tags, but it needs to be \"none\" to ensure PreloadJS works.\n\t\treturn tag;\n\t};\n\n}());\n\n//##############################################################################\n// HTMLAudioSoundInstance.js\n//##############################################################################\n\n(function () {\n\t\"use strict\";\n\n\t/**\n\t * HTMLAudioSoundInstance extends the base api of {{#crossLink \"AbstractSoundInstance\"}}{{/crossLink}} and is used by\n\t * {{#crossLink \"HTMLAudioPlugin\"}}{{/crossLink}}.\n\t *\n\t * @param {String} src The path to and file name of the sound.\n\t * @param {Number} startTime Audio sprite property used to apply an offset, in milliseconds.\n\t * @param {Number} duration Audio sprite property used to set the time the clip plays for, in milliseconds.\n\t * @param {Object} playbackResource Any resource needed by plugin to support audio playback.\n\t * @class HTMLAudioSoundInstance\n\t * @extends AbstractSoundInstance\n\t * @constructor\n\t */\n\tfunction HTMLAudioSoundInstance(src, startTime, duration, playbackResource) {\n\t\tthis.AbstractSoundInstance_constructor(src, startTime, duration, playbackResource);\n\n\n// Private Properties\n\t\tthis._audioSpriteStopTime = null;\n\t\tthis._delayTimeoutId = null;\n\n\t\t// Proxies, make removing listeners easier.\n\t\tthis._endedHandler = createjs.proxy(this._handleSoundComplete, this);\n\t\tthis._readyHandler = createjs.proxy(this._handleTagReady, this);\n\t\tthis._stalledHandler = createjs.proxy(this._playFailed, this);\n\t\tthis._audioSpriteEndHandler = createjs.proxy(this._handleAudioSpriteLoop, this);\n\t\tthis._loopHandler = createjs.proxy(this._handleSoundComplete, this);\n\n\t\tif (duration) {\n\t\t\tthis._audioSpriteStopTime = (startTime + duration) * 0.001;\n\t\t} else {\n\t\t\tthis._duration = createjs.HTMLAudioTagPool.getDuration(this.src);\n\t\t}\n\t}\n\tvar p = createjs.extend(HTMLAudioSoundInstance, createjs.AbstractSoundInstance);\n\n\t// TODO: deprecated\n\t// p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\n\n\n// Public Methods\n\t/**\n\t * Called by {{#crossLink \"Sound\"}}{{/crossLink}} when plugin does not handle master volume.\n\t * undoc'd because it is not meant to be used outside of Sound\n\t * #method setMasterVolume\n\t * @param value\n\t */\n\tp.setMasterVolume = function (value) {\n\t\tthis._updateVolume();\n\t};\n\n\t/**\n\t * Called by {{#crossLink \"Sound\"}}{{/crossLink}} when plugin does not handle master mute.\n\t * undoc'd because it is not meant to be used outside of Sound\n\t * #method setMasterMute\n\t * @param value\n\t */\n\tp.setMasterMute = function (isMuted) {\n\t\tthis._updateVolume();\n\t};\n\n\tp.toString = function () {\n\t\treturn \"[HTMLAudioSoundInstance]\";\n\t};\n\n//Private Methods\n\tp._removeLooping = function() {\n\t\tif(this._playbackResource == null) {return;}\n\t\tthis._playbackResource.loop = false;\n\t\tthis._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED, this._loopHandler, false);\n\t};\n\n\tp._addLooping = function() {\n\t\tif(this._playbackResource == null  || this._audioSpriteStopTime) {return;}\n\t\tthis._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED, this._loopHandler, false);\n\t\tthis._playbackResource.loop = true;\n\t};\n\n\tp._handleCleanUp = function () {\n\t\tvar tag = this._playbackResource;\n\t\tif (tag != null) {\n\t\t\ttag.pause();\n\t\t\ttag.loop = false;\n\t\t\ttag.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED, this._endedHandler, false);\n\t\t\ttag.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_READY, this._readyHandler, false);\n\t\t\ttag.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_STALLED, this._stalledHandler, false);\n\t\t\ttag.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED, this._loopHandler, false);\n\t\t\ttag.removeEventListener(createjs.HTMLAudioPlugin._TIME_UPDATE, this._audioSpriteEndHandler, false);\n\n\t\t\ttry {\n\t\t\t\ttag.currentTime = this._startTime;\n\t\t\t} catch (e) {\n\t\t\t} // Reset Position\n\t\t\tcreatejs.HTMLAudioTagPool.set(this.src, tag);\n\t\t\tthis._playbackResource = null;\n\t\t}\n\t};\n\n\tp._beginPlaying = function (playProps) {\n\t\tthis._playbackResource = createjs.HTMLAudioTagPool.get(this.src);\n\t\treturn this.AbstractSoundInstance__beginPlaying(playProps);\n\t};\n\n\tp._handleSoundReady = function (event) {\n\t\tif (this._playbackResource.readyState !== 4) {\n\t\t\tvar tag = this._playbackResource;\n\t\t\ttag.addEventListener(createjs.HTMLAudioPlugin._AUDIO_READY, this._readyHandler, false);\n\t\t\ttag.addEventListener(createjs.HTMLAudioPlugin._AUDIO_STALLED, this._stalledHandler, false);\n\t\t\ttag.preload = \"auto\"; // This is necessary for Firefox, as it won't ever \"load\" until this is set.\n\t\t\ttag.load();\n\t\t\treturn;\n\t\t}\n\n\t\tthis._updateVolume();\n\t\tthis._playbackResource.currentTime = (this._startTime + this._position) * 0.001;\n\t\tif (this._audioSpriteStopTime) {\n\t\t\tthis._playbackResource.addEventListener(createjs.HTMLAudioPlugin._TIME_UPDATE, this._audioSpriteEndHandler, false);\n\t\t} else {\n\t\t\tthis._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED, this._endedHandler, false);\n\t\t\tif(this._loop != 0) {\n\t\t\t\tthis._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED, this._loopHandler, false);\n\t\t\t\tthis._playbackResource.loop = true;\n\t\t\t}\n\t\t}\n\n\t\tthis._playbackResource.play();\n\t};\n\n\t/**\n\t * Used to handle when a tag is not ready for immediate playback when it is returned from the HTMLAudioTagPool.\n\t * @method _handleTagReady\n\t * @param event\n\t * @protected\n\t */\n\tp._handleTagReady = function (event) {\n\t\tthis._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_READY, this._readyHandler, false);\n\t\tthis._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_STALLED, this._stalledHandler, false);\n\n\t\tthis._handleSoundReady();\n\t};\n\n\tp._pause = function () {\n\t\tthis._playbackResource.pause();\n\t};\n\n\tp._resume = function () {\n\t\tthis._playbackResource.play();\n\t};\n\n\tp._updateVolume = function () {\n\t\tif (this._playbackResource != null) {\n\t\t\tvar newVolume = (this._muted || createjs.Sound._masterMute) ? 0 : this._volume * createjs.Sound._masterVolume;\n\t\t\tif (newVolume != this._playbackResource.volume) {this._playbackResource.volume = newVolume;}\n\t\t}\n\t};\n\n\tp._calculateCurrentPosition = function() {\n\t\treturn (this._playbackResource.currentTime * 1000) - this._startTime;\n\t};\n\n\tp._updatePosition = function() {\n\t\tthis._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED, this._loopHandler, false);\n\t\tthis._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED, this._handleSetPositionSeek, false);\n\t\ttry {\n\t\t\tthis._playbackResource.currentTime = (this._position + this._startTime) * 0.001;\n\t\t} catch (error) { // Out of range\n\t\t\tthis._handleSetPositionSeek(null);\n\t\t}\n\t};\n\n\t/**\n\t * Used to enable setting position, as we need to wait for that seek to be done before we add back our loop handling seek listener\n\t * @method _handleSetPositionSeek\n\t * @param event\n\t * @protected\n\t */\n\tp._handleSetPositionSeek = function(event) {\n\t\tif (this._playbackResource == null) { return; }\n\t\tthis._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED, this._handleSetPositionSeek, false);\n\t\tthis._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED, this._loopHandler, false);\n\t};\n\n\t/**\n\t * Timer used to loop audio sprites.\n\t * NOTE because of the inaccuracies in the timeupdate event (15 - 250ms) and in setting the tag to the desired timed\n\t * (up to 300ms), it is strongly recommended not to loop audio sprites with HTML Audio if smooth looping is desired\n\t *\n\t * @method _handleAudioSpriteLoop\n\t * @param event\n\t * @private\n\t */\n\tp._handleAudioSpriteLoop = function (event) {\n\t\tif(this._playbackResource.currentTime <= this._audioSpriteStopTime) {return;}\n\t\tthis._playbackResource.pause();\n\t\tif(this._loop == 0) {\n\t\t\tthis._handleSoundComplete(null);\n\t\t} else {\n\t\t\tthis._position = 0;\n\t\t\tthis._loop--;\n\t\t\tthis._playbackResource.currentTime = this._startTime * 0.001;\n\t\t\tif(!this._paused) {this._playbackResource.play();}\n\t\t\tthis._sendEvent(\"loop\");\n\t\t}\n\t};\n\n\t// NOTE with this approach audio will loop as reliably as the browser allows\n\t// but we could end up sending the loop event after next loop playback begins\n\tp._handleLoop = function (event) {\n\t\tif(this._loop == 0) {\n\t\t\tthis._playbackResource.loop = false;\n\t\t\tthis._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED, this._loopHandler, false);\n\t\t}\n\t};\n\n\tp._updateStartTime = function () {\n\t\tthis._audioSpriteStopTime = (this._startTime + this._duration) * 0.001;\n\n\t\tif(this.playState == createjs.Sound.PLAY_SUCCEEDED) {\n\t\t\tthis._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED, this._endedHandler, false);\n\t\t\tthis._playbackResource.addEventListener(createjs.HTMLAudioPlugin._TIME_UPDATE, this._audioSpriteEndHandler, false);\n\t\t}\n\t};\n\n\tp._updateDuration = function () {\n\t\tthis._audioSpriteStopTime = (this._startTime + this._duration) * 0.001;\n\n\t\tif(this.playState == createjs.Sound.PLAY_SUCCEEDED) {\n\t\t\tthis._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED, this._endedHandler, false);\n\t\t\tthis._playbackResource.addEventListener(createjs.HTMLAudioPlugin._TIME_UPDATE, this._audioSpriteEndHandler, false);\n\t\t}\n\t};\n\n\tp._setDurationFromSource = function () {\n\t\tthis._duration = createjs.HTMLAudioTagPool.getDuration(this.src);\n\t\tthis._playbackResource = null;\n\t};\n\n\tcreatejs.HTMLAudioSoundInstance = createjs.promote(HTMLAudioSoundInstance, \"AbstractSoundInstance\");\n}());\n\n//##############################################################################\n// HTMLAudioPlugin.js\n//##############################################################################\n\n(function () {\n\n\t\"use strict\";\n\n\t/**\n\t * Play sounds using HTML &lt;audio&gt; tags in the browser. This plugin is the second priority plugin installed\n\t * by default, after the {{#crossLink \"WebAudioPlugin\"}}{{/crossLink}}.  For older browsers that do not support html\n\t * audio, include and install the {{#crossLink \"FlashAudioPlugin\"}}{{/crossLink}}.\n\t *\n\t * <h4>Known Browser and OS issues for HTML Audio</h4>\n\t * <b>All browsers</b><br />\n\t * Testing has shown in all browsers there is a limit to how many audio tag instances you are allowed.  If you exceed\n\t * this limit, you can expect to see unpredictable results. Please use {{#crossLink \"Sound.MAX_INSTANCES\"}}{{/crossLink}} as\n\t * a guide to how many total audio tags you can safely use in all browsers.  This issue is primarily limited to IE9.\n\t *\n     * <b>IE html limitations</b><br />\n     * <ul><li>There is a delay in applying volume changes to tags that occurs once playback is started. So if you have\n     * muted all sounds, they will all play during this delay until the mute applies internally. This happens regardless of\n     * when or how you apply the volume change, as the tag seems to need to play to apply it.</li>\n     * <li>MP3 encoding will not always work for audio tags if it's not default.  We've found default encoding with\n     * 64kbps works.</li>\n\t * <li>Occasionally very short samples will get cut off.</li>\n\t * <li>There is a limit to how many audio tags you can load or play at once, which appears to be determined by\n\t * hardware and browser settings.  See {{#crossLink \"HTMLAudioPlugin.MAX_INSTANCES\"}}{{/crossLink}} for a safe estimate.\n\t * Note that audio sprites can be used as a solution to this issue.</li></ul>\n\t *\n\t * <b>Safari limitations</b><br />\n\t * <ul><li>Safari requires Quicktime to be installed for audio playback.</li></ul>\n\t *\n\t * <b>iOS 6 limitations</b><br />\n\t * <ul><li>can only have one &lt;audio&gt; tag</li>\n\t * \t\t<li>can not preload or autoplay the audio</li>\n\t * \t\t<li>can not cache the audio</li>\n\t * \t\t<li>can not play the audio except inside a user initiated event.</li>\n\t *\t\t<li>Note it is recommended to use {{#crossLink \"WebAudioPlugin\"}}{{/crossLink}} for iOS (6+)</li>\n\t * \t\t<li>audio sprites can be used to mitigate some of these issues and are strongly recommended on iOS</li>\n\t * </ul>\n\t *\n\t * <b>Android Native Browser limitations</b><br />\n\t * <ul><li>We have no control over audio volume. Only the user can set volume on their device.</li>\n\t *      <li>We can only play audio inside a user event (touch/click).  This currently means you cannot loop sound or use a delay.</li></ul>\n\t * <b> Android Chrome 26.0.1410.58 specific limitations</b><br />\n\t * <ul> <li>Can only play 1 sound at a time.</li>\n\t *      <li>Sound is not cached.</li>\n\t *      <li>Sound can only be loaded in a user initiated touch/click event.</li>\n\t *      <li>There is a delay before a sound is played, presumably while the src is loaded.</li>\n\t * </ul>\n\t *\n\t * See {{#crossLink \"Sound\"}}{{/crossLink}} for general notes on known issues.\n\t *\n\t * @class HTMLAudioPlugin\n\t * @extends AbstractPlugin\n\t * @constructor\n\t */\n\tfunction HTMLAudioPlugin() {\n\t\tthis.AbstractPlugin_constructor();\n\n\n\t// Public Properties\n\t\t/**\n\t\t * This is no longer needed as we are now using object pooling for tags.\n\t\t *\n\t\t * <b>NOTE this property only exists as a limitation of HTML audio.</b>\n\t\t * @property defaultNumChannels\n\t\t * @type {Number}\n\t\t * @default 2\n\t\t * @since 0.4.0\n\t\t * @deprecated\n\t\t */\n\t\tthis.defaultNumChannels = 2;\n\n\t\tthis._capabilities = s._capabilities;\n\n\t\tthis._loaderClass = createjs.SoundLoader;\n\t\tthis._soundInstanceClass = createjs.HTMLAudioSoundInstance;\n\t}\n\n\tvar p = createjs.extend(HTMLAudioPlugin, createjs.AbstractPlugin);\n\tvar s = HTMLAudioPlugin;\n\n\t// TODO: deprecated\n\t// p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\n\n\n// Static Properties\n\t/**\n\t * The maximum number of instances that can be loaded or played. This is a browser limitation, primarily limited to IE9.\n\t * The actual number varies from browser to browser (and is largely hardware dependant), but this is a safe estimate.\n\t * Audio sprites work around this limitation.\n\t * @property MAX_INSTANCES\n\t * @type {Number}\n\t * @default 30\n\t * @static\n\t */\n\ts.MAX_INSTANCES = 30;\n\n\t/**\n\t * Event constant for the \"canPlayThrough\" event for cleaner code.\n\t * @property _AUDIO_READY\n\t * @type {String}\n\t * @default canplaythrough\n\t * @static\n\t * @protected\n\t */\n\ts._AUDIO_READY = \"canplaythrough\";\n\n\t/**\n\t * Event constant for the \"ended\" event for cleaner code.\n\t * @property _AUDIO_ENDED\n\t * @type {String}\n\t * @default ended\n\t * @static\n\t * @protected\n\t */\n\ts._AUDIO_ENDED = \"ended\";\n\n\t/**\n\t * Event constant for the \"seeked\" event for cleaner code.  We utilize this event for maintaining loop events.\n\t * @property _AUDIO_SEEKED\n\t * @type {String}\n\t * @default seeked\n\t * @static\n\t * @protected\n\t */\n\ts._AUDIO_SEEKED = \"seeked\";\n\n\t/**\n\t * Event constant for the \"stalled\" event for cleaner code.\n\t * @property _AUDIO_STALLED\n\t * @type {String}\n\t * @default stalled\n\t * @static\n\t * @protected\n\t */\n\ts._AUDIO_STALLED = \"stalled\";\n\n\t/**\n\t * Event constant for the \"timeupdate\" event for cleaner code.  Utilized for looping audio sprites.\n\t * This event callsback ever 15 to 250ms and can be dropped by the browser for performance.\n\t * @property _TIME_UPDATE\n\t * @type {String}\n\t * @default timeupdate\n\t * @static\n\t * @protected\n\t */\n\ts._TIME_UPDATE = \"timeupdate\";\n\n\t/**\n\t * The capabilities of the plugin. This is generated via the {{#crossLink \"HTMLAudioPlugin/_generateCapabilities\"}}{{/crossLink}}\n\t * method. Please see the Sound {{#crossLink \"Sound/getCapabilities\"}}{{/crossLink}} method for an overview of all\n\t * of the available properties.\n\t * @property _capabilities\n\t * @type {Object}\n\t * @protected\n\t * @static\n\t */\n\ts._capabilities = null;\n\n\n// Static Methods\n\t/**\n\t * Determine if the plugin can be used in the current browser/OS. Note that HTML audio is available in most modern\n\t * browsers, but is disabled in iOS because of its limitations.\n\t * @method isSupported\n\t * @return {Boolean} If the plugin can be initialized.\n\t * @static\n\t */\n\ts.isSupported = function () {\n\t\ts._generateCapabilities();\n\t\treturn (s._capabilities != null);\n\t};\n\n\t/**\n\t * Determine the capabilities of the plugin. Used internally. Please see the Sound API {{#crossLink \"Sound/getCapabilities\"}}{{/crossLink}}\n\t * method for an overview of plugin capabilities.\n\t * @method _generateCapabilities\n\t * @static\n\t * @protected\n\t */\n\ts._generateCapabilities = function () {\n\t\tif (s._capabilities != null) {return;}\n\t\tvar t = document.createElement(\"audio\");\n\t\tif (t.canPlayType == null) {return null;}\n\n\t\ts._capabilities = {\n\t\t\tpanning:false,\n\t\t\tvolume:true,\n\t\t\ttracks:-1\n\t\t};\n\n\t\t// determine which extensions our browser supports for this plugin by iterating through Sound.SUPPORTED_EXTENSIONS\n\t\tvar supportedExtensions = createjs.Sound.SUPPORTED_EXTENSIONS;\n\t\tvar extensionMap = createjs.Sound.EXTENSION_MAP;\n\t\tfor (var i = 0, l = supportedExtensions.length; i < l; i++) {\n\t\t\tvar ext = supportedExtensions[i];\n\t\t\tvar playType = extensionMap[ext] || ext;\n\t\t\ts._capabilities[ext] = (t.canPlayType(\"audio/\" + ext) != \"no\" && t.canPlayType(\"audio/\" + ext) != \"\") || (t.canPlayType(\"audio/\" + playType) != \"no\" && t.canPlayType(\"audio/\" + playType) != \"\");\n\t\t}  // OJR another way to do this might be canPlayType:\"m4a\", codex: mp4\n\t};\n\n\n// public methods\n\tp.register = function (loadItem) {\n\t\tvar tag = createjs.HTMLAudioTagPool.get(loadItem.src);\n\t\tvar loader = this.AbstractPlugin_register(loadItem);\n\t\tloader.setTag(tag);\n\n\t\treturn loader;\n\t};\n\n\tp.removeSound = function (src) {\n\t\tthis.AbstractPlugin_removeSound(src);\n\t\tcreatejs.HTMLAudioTagPool.remove(src);\n\t};\n\n\tp.create = function (src, startTime, duration) {\n\t\tvar si = this.AbstractPlugin_create(src, startTime, duration);\n\t\tsi.setPlaybackResource(null);\n\t\treturn si;\n\t};\n\n\tp.toString = function () {\n\t\treturn \"[HTMLAudioPlugin]\";\n\t};\n\n\t// plugin does not support these\n\tp.setVolume = p.getVolume = p.setMute = null;\n\n\n\tcreatejs.HTMLAudioPlugin = createjs.promote(HTMLAudioPlugin, \"AbstractPlugin\");\n}());\n\n//##############################################################################\n// Tween.js\n//##############################################################################\n\n// TODO: possibly add a END actionsMode (only runs actions that == position)?\n// TODO: evaluate a way to decouple paused from tick registration.\n\n\n\n\n(function() {\n\t\"use strict\";\n\n\n// constructor\n\t/**\n\t * A Tween instance tweens properties for a single target. Instance methods can be chained for easy construction and sequencing:\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      target.alpha = 1;\n\t *\t    createjs.Tween.get(target)\n\t *\t         .wait(500)\n\t *\t         .to({alpha:0, visible:false}, 1000)\n\t *\t         .call(handleComplete);\n\t *\t    function handleComplete() {\n\t *\t    \t//Tween complete\n\t *\t    }\n\t *\n\t * Multiple tweens can point to the same instance, however if they affect the same properties there could be unexpected\n\t * behaviour. To stop all tweens on an object, use {{#crossLink \"Tween/removeTweens\"}}{{/crossLink}} or pass `override:true`\n\t * in the props argument.\n\t *\n\t *      createjs.Tween.get(target, {override:true}).to({x:100});\n\t *\n\t * Subscribe to the {{#crossLink \"Tween/change:event\"}}{{/crossLink}} event to get notified when a property of the\n\t * target is changed.\n\t *\n\t *      createjs.Tween.get(target, {override:true}).to({x:100}).addEventListener(\"change\", handleChange);\n\t *      function handleChange(event) {\n\t *          // The tween changed.\n\t *      }\n\t *\n\t * See the Tween {{#crossLink \"Tween/get\"}}{{/crossLink}} method for additional param documentation.\n\t * @class Tween\n\t * @param {Object} target The target object that will have its properties tweened.\n\t * @param {Object} [props] The configuration properties to apply to this tween instance (ex. `{loop:true, paused:true}`.\n\t * All properties default to false. Supported props are:<UL>\n\t *    <LI> loop: sets the loop property on this tween.</LI>\n\t *    <LI> useTicks: uses ticks for all durations instead of milliseconds.</LI>\n\t *    <LI> ignoreGlobalPause: sets the {{#crossLink \"Tween/ignoreGlobalPause:property\"}}{{/crossLink}} property on this tween.</LI>\n\t *    <LI> override: if true, `Tween.removeTweens(target)` will be called to remove any other tweens with the same target.\n\t *    <LI> paused: indicates whether to start the tween paused.</LI>\n\t *    <LI> position: indicates the initial position for this tween.</LI>\n\t *    <LI> onChange: specifies a listener for the \"change\" event.</LI>\n\t * </UL>\n\t * @param {Object} [pluginData] An object containing data for use by installed plugins. See individual\n\t * plugins' documentation for details.\n\t * @extends EventDispatcher\n\t * @constructor\n\t */\n\tfunction Tween(target, props, pluginData) {\n\n\t// public properties:\n\t\t/**\n\t\t * Causes this tween to continue playing when a global pause is active. For example, if TweenJS is using {{#crossLink \"Ticker\"}}{{/crossLink}},\n\t\t * then setting this to true (the default) will cause this tween to be paused when <code>Ticker.setPaused(true)</code>\n\t\t * is called. See the Tween {{#crossLink \"Tween/tick\"}}{{/crossLink}} method for more info. Can be set via the props\n\t\t * parameter.\n\t\t * @property ignoreGlobalPause\n\t\t * @type Boolean\n\t\t * @default false\n\t\t */\n\t\tthis.ignoreGlobalPause = false;\n\t\n\t\t/**\n\t\t * If true, the tween will loop when it reaches the end. Can be set via the props param.\n\t\t * @property loop\n\t\t * @type {Boolean}\n\t\t * @default false\n\t\t */\n\t\tthis.loop = false;\n\t\n\t\t/**\n\t\t * Specifies the total duration of this tween in milliseconds (or ticks if useTicks is true).\n\t\t * This value is automatically updated as you modify the tween. Changing it directly could result in unexpected\n\t\t * behaviour.\n\t\t * @property duration\n\t\t * @type {Number}\n\t\t * @default 0\n\t\t * @readonly\n\t\t */\n\t\tthis.duration = 0;\n\t\n\t\t/**\n\t\t * Allows you to specify data that will be used by installed plugins. Each plugin uses this differently, but in general\n\t\t * you specify data by setting it to a property of pluginData with the same name as the plugin class.\n\t\t * @example\n\t\t *\tmyTween.pluginData.PluginClassName = data;\n\t\t * <br/>\n\t\t * Also, most plugins support a property to enable or disable them. This is typically the plugin class name followed by \"_enabled\".<br/>\n\t\t * @example\n\t\t *\tmyTween.pluginData.PluginClassName_enabled = false;<br/>\n\t\t * <br/>\n\t\t * Some plugins also store instance data in this object, usually in a property named _PluginClassName.\n\t\t * See the documentation for individual plugins for more details.\n\t\t * @property pluginData\n\t\t * @type {Object}\n\t\t */\n\t\tthis.pluginData = pluginData || {};\n\t\n\t\t/**\n\t\t * The target of this tween. This is the object on which the tweened properties will be changed. Changing\n\t\t * this property after the tween is created will not have any effect.\n\t\t * @property target\n\t\t * @type {Object}\n\t\t * @readonly\n\t\t */\n\t\tthis.target = target;\n\t\n\t\t/**\n\t\t * The current normalized position of the tween. This will always be a value between 0 and duration.\n\t\t * Changing this property directly will have no effect.\n\t\t * @property position\n\t\t * @type {Object}\n\t\t * @readonly\n\t\t */\n\t\tthis.position = null;\n\t\n\t\t/**\n\t\t * Indicates the tween's current position is within a passive wait.\n\t\t * @property passive\n\t\t * @type {Boolean}\n\t\t * @default false\n\t\t * @readonly\n\t\t **/\n\t\tthis.passive = false;\n\t\n\t// private properties:\t\n\t\t/**\n\t\t * @property _paused\n\t\t * @type {Boolean}\n\t\t * @default false\n\t\t * @protected\n\t\t */\n\t\tthis._paused = false;\n\t\n\t\t/**\n\t\t * @property _curQueueProps\n\t\t * @type {Object}\n\t\t * @protected\n\t\t */\n\t\tthis._curQueueProps = {};\n\t\n\t\t/**\n\t\t * @property _initQueueProps\n\t\t * @type {Object}\n\t\t * @protected\n\t\t */\n\t\tthis._initQueueProps = {};\n\t\n\t\t/**\n\t\t * @property _steps\n\t\t * @type {Array}\n\t\t * @protected\n\t\t */\n\t\tthis._steps = [];\n\t\n\t\t/**\n\t\t * @property _actions\n\t\t * @type {Array}\n\t\t * @protected\n\t\t */\n\t\tthis._actions = [];\n\t\n\t\t/**\n\t\t * Raw position.\n\t\t * @property _prevPosition\n\t\t * @type {Number}\n\t\t * @default 0\n\t\t * @protected\n\t\t */\n\t\tthis._prevPosition = 0;\n\t\n\t\t/**\n\t\t * The position within the current step.\n\t\t * @property _stepPosition\n\t\t * @type {Number}\n\t\t * @default 0\n\t\t * @protected\n\t\t */\n\t\tthis._stepPosition = 0; // this is needed by MovieClip.\n\t\n\t\t/**\n\t\t * Normalized position.\n\t\t * @property _prevPos\n\t\t * @type {Number}\n\t\t * @default -1\n\t\t * @protected\n\t\t */\n\t\tthis._prevPos = -1;\n\t\n\t\t/**\n\t\t * @property _target\n\t\t * @type {Object}\n\t\t * @protected\n\t\t */\n\t\tthis._target = target;\n\t\n\t\t/**\n\t\t * @property _useTicks\n\t\t * @type {Boolean}\n\t\t * @default false\n\t\t * @protected\n\t\t */\n\t\tthis._useTicks = false;\n\t\n\t\t/**\n\t\t * @property _inited\n\t\t * @type {boolean}\n\t\t * @default false\n\t\t * @protected\n\t\t */\n\t\tthis._inited = false;\n\t\t\n\t\t/**\n\t\t * Indicates whether the tween is currently registered with Tween.\n\t\t * @property _registered\n\t\t * @type {boolean}\n\t\t * @default false\n\t\t * @protected\n\t\t */\n\t\tthis._registered = false;\n\n\n\t\tif (props) {\n\t\t\tthis._useTicks = props.useTicks;\n\t\t\tthis.ignoreGlobalPause = props.ignoreGlobalPause;\n\t\t\tthis.loop = props.loop;\n\t\t\tprops.onChange && this.addEventListener(\"change\", props.onChange);\n\t\t\tif (props.override) { Tween.removeTweens(target); }\n\t\t}\n\t\tif (props&&props.paused) { this._paused=true; }\n\t\telse { createjs.Tween._register(this,true); }\n\t\tif (props&&props.position!=null) { this.setPosition(props.position, Tween.NONE); }\n\n\t};\n\n\tvar p = createjs.extend(Tween, createjs.EventDispatcher);\n\n\t// TODO: deprecated\n\t// p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\n\t\n\n// static properties\n\t/**\n\t * Constant defining the none actionsMode for use with setPosition.\n\t * @property NONE\n\t * @type Number\n\t * @default 0\n\t * @static\n\t */\n\tTween.NONE = 0;\n\n\t/**\n\t * Constant defining the loop actionsMode for use with setPosition.\n\t * @property LOOP\n\t * @type Number\n\t * @default 1\n\t * @static\n\t */\n\tTween.LOOP = 1;\n\n\t/**\n\t * Constant defining the reverse actionsMode for use with setPosition.\n\t * @property REVERSE\n\t * @type Number\n\t * @default 2\n\t * @static\n\t */\n\tTween.REVERSE = 2;\n\n\t/**\n\t * Constant returned by plugins to tell the tween not to use default assignment.\n\t * @property IGNORE\n\t * @type Object\n\t * @static\n\t */\n\tTween.IGNORE = {};\n\n\t/**\n\t * @property _listeners\n\t * @type Array[Tween]\n\t * @static\n\t * @protected\n\t */\n\tTween._tweens = [];\n\n\t/**\n\t * @property _plugins\n\t * @type Object\n\t * @static\n\t * @protected\n\t */\n\tTween._plugins = {};\n\n\n// static methods\t\n\t/**\n\t * Returns a new tween instance. This is functionally identical to using \"new Tween(...)\", but looks cleaner\n\t * with the chained syntax of TweenJS.\n\t * <h4>Example</h4>\n\t *\n\t *\t\tvar tween = createjs.Tween.get(target);\n\t *\n\t * @method get\n\t * @param {Object} target The target object that will have its properties tweened.\n\t * @param {Object} [props] The configuration properties to apply to this tween instance (ex. `{loop:true, paused:true}`).\n\t * All properties default to `false`. Supported props are:\n\t * <UL>\n\t *    <LI> loop: sets the loop property on this tween.</LI>\n\t *    <LI> useTicks: uses ticks for all durations instead of milliseconds.</LI>\n\t *    <LI> ignoreGlobalPause: sets the {{#crossLink \"Tween/ignoreGlobalPause:property\"}}{{/crossLink}} property on\n\t *    this tween.</LI>\n\t *    <LI> override: if true, `createjs.Tween.removeTweens(target)` will be called to remove any other tweens with\n\t *    the same target.\n\t *    <LI> paused: indicates whether to start the tween paused.</LI>\n\t *    <LI> position: indicates the initial position for this tween.</LI>\n\t *    <LI> onChange: specifies a listener for the {{#crossLink \"Tween/change:event\"}}{{/crossLink}} event.</LI>\n\t * </UL>\n\t * @param {Object} [pluginData] An object containing data for use by installed plugins. See individual plugins'\n\t * documentation for details.\n\t * @param {Boolean} [override=false] If true, any previous tweens on the same target will be removed. This is the\n\t * same as calling `Tween.removeTweens(target)`.\n\t * @return {Tween} A reference to the created tween. Additional chained tweens, method calls, or callbacks can be\n\t * applied to the returned tween instance.\n\t * @static\n\t */\n\tTween.get = function(target, props, pluginData, override) {\n\t\tif (override) { Tween.removeTweens(target); }\n\t\treturn new Tween(target, props, pluginData);\n\t};\n\n\t/**\n\t * Advances all tweens. This typically uses the {{#crossLink \"Ticker\"}}{{/crossLink}} class, but you can call it\n\t * manually if you prefer to use your own \"heartbeat\" implementation.\n\t * @method tick\n\t * @param {Number} delta The change in time in milliseconds since the last tick. Required unless all tweens have\n\t * `useTicks` set to true.\n\t * @param {Boolean} paused Indicates whether a global pause is in effect. Tweens with {{#crossLink \"Tween/ignoreGlobalPause:property\"}}{{/crossLink}}\n\t * will ignore this, but all others will pause if this is `true`.\n\t * @static\n\t */\n\tTween.tick = function(delta, paused) {\n\t\tvar tweens = Tween._tweens.slice(); // to avoid race conditions.\n\t\tfor (var i=tweens.length-1; i>=0; i--) {\n\t\t\tvar tween = tweens[i];\n\t\t\tif ((paused && !tween.ignoreGlobalPause) || tween._paused) { continue; }\n\t\t\ttween.tick(tween._useTicks?1:delta);\n\t\t}\n\t};\n\n\t/**\n\t * Handle events that result from Tween being used as an event handler. This is included to allow Tween to handle\n\t * {{#crossLink \"Ticker/tick:event\"}}{{/crossLink}} events from the createjs {{#crossLink \"Ticker\"}}{{/crossLink}}.\n\t * No other events are handled in Tween.\n\t * @method handleEvent\n\t * @param {Object} event An event object passed in by the {{#crossLink \"EventDispatcher\"}}{{/crossLink}}. Will\n\t * usually be of type \"tick\".\n\t * @private\n\t * @static\n\t * @since 0.4.2\n\t */\n\tTween.handleEvent = function(event) {\n\t\tif (event.type == \"tick\") {\n\t\t\tthis.tick(event.delta, event.paused);\n\t\t}\n\t};\n\n\t/**\n\t * Removes all existing tweens for a target. This is called automatically by new tweens if the `override`\n\t * property is `true`.\n\t * @method removeTweens\n\t * @param {Object} target The target object to remove existing tweens from.\n\t * @static\n\t */\n\tTween.removeTweens = function(target) {\n\t\tif (!target.tweenjs_count) { return; }\n\t\tvar tweens = Tween._tweens;\n\t\tfor (var i=tweens.length-1; i>=0; i--) {\n\t\t\tvar tween = tweens[i];\n\t\t\tif (tween._target == target) {\n\t\t\t\ttween._paused = true;\n\t\t\t\ttweens.splice(i, 1);\n\t\t\t}\n\t\t}\n\t\ttarget.tweenjs_count = 0;\n\t};\n\n\t/**\n\t * Stop and remove all existing tweens.\n\t * @method removeAllTweens\n\t * @static\n\t * @since 0.4.1\n\t */\n\tTween.removeAllTweens = function() {\n\t\tvar tweens = Tween._tweens;\n\t\tfor (var i= 0, l=tweens.length; i<l; i++) {\n\t\t\tvar tween = tweens[i];\n\t\t\ttween._paused = true;\n\t\t\ttween.target&&(tween.target.tweenjs_count = 0);\n\t\t}\n\t\ttweens.length = 0;\n\t};\n\n\t/**\n\t * Indicates whether there are any active tweens (and how many) on the target object (if specified) or in general.\n\t * @method hasActiveTweens\n\t * @param {Object} [target] The target to check for active tweens. If not specified, the return value will indicate\n\t * if there are any active tweens on any target.\n\t * @return {Boolean} If there are active tweens.\n\t * @static\n\t */\n\tTween.hasActiveTweens = function(target) {\n\t\tif (target) { return target.tweenjs_count != null && !!target.tweenjs_count; }\n\t\treturn Tween._tweens && !!Tween._tweens.length;\n\t};\n\n\t/**\n\t * Installs a plugin, which can modify how certain properties are handled when tweened. See the {{#crossLink \"CSSPlugin\"}}{{/crossLink}}\n\t * for an example of how to write TweenJS plugins.\n\t * @method installPlugin\n\t * @static\n\t * @param {Object} plugin The plugin class to install\n\t * @param {Array} properties An array of properties that the plugin will handle.\n\t */\n\tTween.installPlugin = function(plugin, properties) {\n\t\tvar priority = plugin.priority;\n\t\tif (priority == null) { plugin.priority = priority = 0; }\n\t\tfor (var i=0,l=properties.length,p=Tween._plugins;i<l;i++) {\n\t\t\tvar n = properties[i];\n\t\t\tif (!p[n]) { p[n] = [plugin]; }\n\t\t\telse {\n\t\t\t\tvar arr = p[n];\n\t\t\t\tfor (var j=0,jl=arr.length;j<jl;j++) {\n\t\t\t\t\tif (priority < arr[j].priority) { break; }\n\t\t\t\t}\n\t\t\t\tp[n].splice(j,0,plugin);\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t * Registers or unregisters a tween with the ticking system.\n\t * @method _register\n\t * @param {Tween} tween The tween instance to register or unregister.\n\t * @param {Boolean} value If `true`, the tween is registered. If `false` the tween is unregistered.\n\t * @static\n\t * @protected\n\t */\n\tTween._register = function(tween, value) {\n\t\tvar target = tween._target;\n\t\tvar tweens = Tween._tweens;\n\t\tif (value && !tween._registered) {\n\t\t\t// TODO: this approach might fail if a dev is using sealed objects in ES5\n\t\t\tif (target) { target.tweenjs_count = target.tweenjs_count ? target.tweenjs_count+1 : 1; }\n\t\t\ttweens.push(tween);\n\t\t\tif (!Tween._inited && createjs.Ticker) { createjs.Ticker.addEventListener(\"tick\", Tween); Tween._inited = true; }\n\t\t} else if (!value && tween._registered) {\n\t\t\tif (target) { target.tweenjs_count--; }\n\t\t\tvar i = tweens.length;\n\t\t\twhile (i--) {\n\t\t\t\tif (tweens[i] == tween) {\n\t\t\t\t\ttweens.splice(i, 1);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\ttween._registered = value;\n\t};\n\n\n// events:\n\t/**\n\t * Called whenever the tween's position changes.\n\t * @event change\n\t * @since 0.4.0\n\t **/\n\t\n\n// public methods:\n\t/**\n\t * Queues a wait (essentially an empty tween).\n\t * <h4>Example</h4>\n\t *\n\t *\t\t//This tween will wait 1s before alpha is faded to 0.\n\t *\t\tcreatejs.Tween.get(target).wait(1000).to({alpha:0}, 1000);\n\t *\n\t * @method wait\n\t * @param {Number} duration The duration of the wait in milliseconds (or in ticks if `useTicks` is true).\n\t * @param {Boolean} [passive] Tween properties will not be updated during a passive wait. This\n\t * is mostly useful for use with {{#crossLink \"Timeline\"}}{{/crossLink}} instances that contain multiple tweens\n\t * affecting the same target at different times.\n\t * @return {Tween} This tween instance (for chaining calls).\n\t **/\n\tp.wait = function(duration, passive) {\n\t\tif (duration == null || duration <= 0) { return this; }\n\t\tvar o = this._cloneProps(this._curQueueProps);\n\t\treturn this._addStep({d:duration, p0:o, e:this._linearEase, p1:o, v:passive});\n\t};\n\n\t/**\n\t * Queues a tween from the current values to the target properties. Set duration to 0 to jump to these value.\n\t * Numeric properties will be tweened from their current value in the tween to the target value. Non-numeric\n\t * properties will be set at the end of the specified duration.\n\t * <h4>Example</h4>\n\t *\n\t *\t\tcreatejs.Tween.get(target).to({alpha:0}, 1000);\n\t *\n\t * @method to\n\t * @param {Object} props An object specifying property target values for this tween (Ex. `{x:300}` would tween the x\n\t * property of the target to 300).\n\t * @param {Number} [duration=0] The duration of the wait in milliseconds (or in ticks if `useTicks` is true).\n\t * @param {Function} [ease=\"linear\"] The easing function to use for this tween. See the {{#crossLink \"Ease\"}}{{/crossLink}}\n\t * class for a list of built-in ease functions.\n\t * @return {Tween} This tween instance (for chaining calls).\n\t */\n\tp.to = function(props, duration, ease) {\n\t\tif (isNaN(duration) || duration < 0) { duration = 0; }\n\t\treturn this._addStep({d:duration||0, p0:this._cloneProps(this._curQueueProps), e:ease, p1:this._cloneProps(this._appendQueueProps(props))});\n\t};\n\n\t/**\n\t * Queues an action to call the specified function.\n\t * <h4>Example</h4>\n\t *\n\t *   \t//would call myFunction() after 1 second.\n\t *   \tmyTween.wait(1000).call(myFunction);\n\t *\n\t * @method call\n\t * @param {Function} callback The function to call.\n\t * @param {Array} [params]. The parameters to call the function with. If this is omitted, then the function\n\t *      will be called with a single param pointing to this tween.\n\t * @param {Object} [scope]. The scope to call the function in. If omitted, it will be called in the target's\n\t *      scope.\n\t * @return {Tween} This tween instance (for chaining calls).\n\t */\n\tp.call = function(callback, params, scope) {\n\t\treturn this._addAction({f:callback, p:params ? params : [this], o:scope ? scope : this._target});\n\t};\n\n\t// TODO: add clarification between this and a 0 duration .to:\n\t/**\n\t * Queues an action to set the specified props on the specified target. If target is null, it will use this tween's\n\t * target.\n\t * <h4>Example</h4>\n\t *\n\t *\t\tmyTween.wait(1000).set({visible:false},foo);\n\t *\n\t * @method set\n\t * @param {Object} props The properties to set (ex. `{visible:false}`).\n\t * @param {Object} [target] The target to set the properties on. If omitted, they will be set on the tween's target.\n\t * @return {Tween} This tween instance (for chaining calls).\n\t */\n\tp.set = function(props, target) {\n\t\treturn this._addAction({f:this._set, o:this, p:[props, target ? target : this._target]});\n\t};\n\n\t/**\n\t * Queues an action to play (unpause) the specified tween. This enables you to sequence multiple tweens.\n\t * <h4>Example</h4>\n\t *\n\t *\t\tmyTween.to({x:100},500).play(otherTween);\n\t *\n\t * @method play\n\t * @param {Tween} tween The tween to play.\n\t * @return {Tween} This tween instance (for chaining calls).\n\t */\n\tp.play = function(tween) {\n\t\tif (!tween) { tween = this; }\n\t\treturn this.call(tween.setPaused, [false], tween);\n\t};\n\n\t/**\n\t * Queues an action to pause the specified tween.\n\t * @method pause\n\t * @param {Tween} tween The tween to pause. If null, it pauses this tween.\n\t * @return {Tween} This tween instance (for chaining calls)\n\t */\n\tp.pause = function(tween) {\n\t\tif (!tween) { tween = this; }\n\t\treturn this.call(tween.setPaused, [true], tween);\n\t};\n\n\t/**\n\t * Advances the tween to a specified position.\n\t * @method setPosition\n\t * @param {Number} value The position to seek to in milliseconds (or ticks if useTicks is true).\n\t * @param {Number} [actionsMode=1] Specifies how actions are handled (ie. call, set, play, pause):\n\t * <ul>\n\t *      <li>{{#crossLink \"Tween/NONE:property\"}}{{/crossLink}} (0) - run no actions.</li>\n\t *      <li>{{#crossLink \"Tween/LOOP:property\"}}{{/crossLink}} (1) - if new position is less than old, then run all\n\t *      actions between old and duration, then all actions between 0 and new.</li>\n\t *      <li>{{#crossLink \"Tween/REVERSE:property\"}}{{/crossLink}} (2) - if new position is less than old, run all\n\t *      actions between them in reverse.</li>\n\t * </ul>\n\t * @return {Boolean} Returns `true` if the tween is complete (ie. the full tween has run & {{#crossLink \"Tween/loop:property\"}}{{/crossLink}}\n\t * is `false`).\n\t */\n\tp.setPosition = function(value, actionsMode) {\n\t\tif (value < 0) { value = 0; }\n\t\tif (actionsMode == null) { actionsMode = 1; }\n\n\t\t// normalize position:\n\t\tvar t = value;\n\t\tvar end = false;\n\t\tif (t >= this.duration) {\n\t\t\tif (this.loop) { t = t%this.duration; }\n\t\t\telse {\n\t\t\t\tt = this.duration;\n\t\t\t\tend = true;\n\t\t\t}\n\t\t}\n\t\tif (t == this._prevPos) { return end; }\n\n\n\t\tvar prevPos = this._prevPos;\n\t\tthis.position = this._prevPos = t; // set this in advance in case an action modifies position.\n\t\tthis._prevPosition = value;\n\n\t\t// handle tweens:\n\t\tif (this._target) {\n\t\t\tif (end) {\n\t\t\t\t// addresses problems with an ending zero length step.\n\t\t\t\tthis._updateTargetProps(null,1);\n\t\t\t} else if (this._steps.length > 0) {\n\t\t\t\t// find our new tween index:\n\t\t\t\tfor (var i=0, l=this._steps.length; i<l; i++) {\n\t\t\t\t\tif (this._steps[i].t > t) { break; }\n\t\t\t\t}\n\t\t\t\tvar step = this._steps[i-1];\n\t\t\t\tthis._updateTargetProps(step,(this._stepPosition = t-step.t)/step.d);\n\t\t\t}\n\t\t}\n\n\t\t// run actions:\n\t\tif (actionsMode != 0 && this._actions.length > 0) {\n\t\t\tif (this._useTicks) {\n\t\t\t\t// only run the actions we landed on.\n\t\t\t\tthis._runActions(t,t);\n\t\t\t} else if (actionsMode == 1 && t<prevPos) {\n\t\t\t\tif (prevPos != this.duration) { this._runActions(prevPos, this.duration); }\n\t\t\t\tthis._runActions(0, t, true);\n\t\t\t} else {\n\t\t\t\tthis._runActions(prevPos, t);\n\t\t\t}\n\t\t}\n\n\t\tif (end) { this.setPaused(true); }\n\n        this.dispatchEvent(\"change\");\n\t\treturn end;\n\t};\n\n\t/**\n\t * Advances this tween by the specified amount of time in milliseconds (or ticks if`useTicks` is `true`).\n\t * This is normally called automatically by the Tween engine (via {{#crossLink \"Tween/tick\"}}{{/crossLink}}), but is\n\t * exposed for advanced uses.\n\t * @method tick\n\t * @param {Number} delta The time to advance in milliseconds (or ticks if `useTicks` is `true`).\n\t */\n\tp.tick = function(delta) {\n\t\tif (this._paused) { return; }\n\t\tthis.setPosition(this._prevPosition+delta);\n\t};\n\n\t/**\n\t * Pauses or plays this tween.\n\t * @method setPaused\n\t * @param {Boolean} [value=true] Indicates whether the tween should be paused (`true`) or played (`false`).\n\t * @return {Tween} This tween instance (for chaining calls)\n\t */\n\tp.setPaused = function(value) {\n\t\tif (this._paused === !!value) { return this; }\n\t\tthis._paused = !!value;\n\t\tTween._register(this, !value);\n\t\treturn this;\n\t};\n\n\t// tiny api (primarily for tool output):\n\tp.w = p.wait;\n\tp.t = p.to;\n\tp.c = p.call;\n\tp.s = p.set;\n\n\t/**\n\t * Returns a string representation of this object.\n\t * @method toString\n\t * @return {String} a string representation of the instance.\n\t */\n\tp.toString = function() {\n\t\treturn \"[Tween]\";\n\t};\n\n\t/**\n\t * @method clone\n\t * @protected\n\t */\n\tp.clone = function() {\n\t\tthrow(\"Tween can not be cloned.\")\n\t};\n\n// private methods:\n\t/**\n\t * @method _updateTargetProps\n\t * @param {Object} step\n\t * @param {Number} ratio\n\t * @protected\n\t */\n\tp._updateTargetProps = function(step, ratio) {\n\t\tvar p0,p1,v,v0,v1,arr;\n\t\tif (!step && ratio == 1) {\n\t\t\t// GDS: when does this run? Just at the very end? Shouldn't.\n\t\t\tthis.passive = false;\n\t\t\tp0 = p1 = this._curQueueProps;\n\t\t} else {\n\t\t\tthis.passive = !!step.v;\n\t\t\tif (this.passive) { return; } // don't update props.\n\t\t\t// apply ease to ratio.\n\t\t\tif (step.e) { ratio = step.e(ratio,0,1,1); }\n\t\t\tp0 = step.p0;\n\t\t\tp1 = step.p1;\n\t\t}\n\n\t\tfor (var n in this._initQueueProps) {\n\t\t\tif ((v0 = p0[n]) == null) { p0[n] = v0 = this._initQueueProps[n]; }\n\t\t\tif ((v1 = p1[n]) == null) { p1[n] = v1 = v0; }\n\t\t\tif (v0 == v1 || ratio == 0 || ratio == 1 || (typeof(v0) != \"number\")) {\n\t\t\t\t// no interpolation - either at start, end, values don't change, or the value is non-numeric.\n\t\t\t\tv = ratio == 1 ? v1 : v0;\n\t\t\t} else {\n\t\t\t\tv = v0+(v1-v0)*ratio;\n\t\t\t}\n\n\t\t\tvar ignore = false;\n\t\t\tif (arr = Tween._plugins[n]) {\n\t\t\t\tfor (var i=0,l=arr.length;i<l;i++) {\n\t\t\t\t\tvar v2 = arr[i].tween(this, n, v, p0, p1, ratio, !!step&&p0==p1, !step);\n\t\t\t\t\tif (v2 == Tween.IGNORE) { ignore = true; }\n\t\t\t\t\telse { v = v2; }\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!ignore) { this._target[n] = v; }\n\t\t}\n\n\t};\n\n\t/**\n\t * @method _runActions\n\t * @param {Number} startPos\n\t * @param {Number} endPos\n\t * @param {Boolean} includeStart\n\t * @protected\n\t */\n\tp._runActions = function(startPos, endPos, includeStart) {\n\t\tvar sPos = startPos;\n\t\tvar ePos = endPos;\n\t\tvar i = -1;\n\t\tvar j = this._actions.length;\n\t\tvar k = 1;\n\t\tif (startPos > endPos) {\n\t\t\t// running backwards, flip everything:\n\t\t\tsPos = endPos;\n\t\t\tePos = startPos;\n\t\t\ti = j;\n\t\t\tj = k = -1;\n\t\t}\n\t\twhile ((i+=k) != j) {\n\t\t\tvar action = this._actions[i];\n\t\t\tvar pos = action.t;\n\t\t\tif (pos == ePos || (pos > sPos && pos < ePos) || (includeStart && pos == startPos) ) {\n\t\t\t\taction.f.apply(action.o, action.p);\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t * @method _appendQueueProps\n\t * @param {Object} o\n\t * @protected\n\t */\n\tp._appendQueueProps = function(o) {\n\t\tvar arr,oldValue,i, l, injectProps;\n\t\tfor (var n in o) {\n\t\t\tif (this._initQueueProps[n] === undefined) {\n\t\t\t\toldValue = this._target[n];\n\n\t\t\t\t// init plugins:\n\t\t\t\tif (arr = Tween._plugins[n]) {\n\t\t\t\t\tfor (i=0,l=arr.length;i<l;i++) {\n\t\t\t\t\t\toldValue = arr[i].init(this, n, oldValue);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis._initQueueProps[n] = this._curQueueProps[n] = (oldValue===undefined) ? null : oldValue;\n\t\t\t} else {\n\t\t\t\toldValue = this._curQueueProps[n];\n\t\t\t}\n\t\t}\n\n\t\tfor (var n in o) {\n\t\t\toldValue = this._curQueueProps[n];\n\t\t\tif (arr = Tween._plugins[n]) {\n\t\t\t\tinjectProps = injectProps||{};\n\t\t\t\tfor (i=0, l=arr.length;i<l;i++) {\n\t\t\t\t\t// TODO: remove the check for .step in the next version. It's here for backwards compatibility.\n\t\t\t\t\tif (arr[i].step) { arr[i].step(this, n, oldValue, o[n], injectProps); }\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._curQueueProps[n] = o[n];\n\t\t}\n\t\tif (injectProps) { this._appendQueueProps(injectProps); }\n\t\treturn this._curQueueProps;\n\t};\n\n\t/**\n\t * @method _cloneProps\n\t * @param {Object} props\n\t * @protected\n\t */\n\tp._cloneProps = function(props) {\n\t\tvar o = {};\n\t\tfor (var n in props) {\n\t\t\to[n] = props[n];\n\t\t}\n\t\treturn o;\n\t};\n\n\t/**\n\t * @method _addStep\n\t * @param {Object} o\n\t * @protected\n\t */\n\tp._addStep = function(o) {\n\t\tif (o.d > 0) {\n\t\t\tthis._steps.push(o);\n\t\t\to.t = this.duration;\n\t\t\tthis.duration += o.d;\n\t\t}\n\t\treturn this;\n\t};\n\n\t/**\n\t * @method _addAction\n\t * @param {Object} o\n\t * @protected\n\t */\n\tp._addAction = function(o) {\n\t\to.t = this.duration;\n\t\tthis._actions.push(o);\n\t\treturn this;\n\t};\n\n\t/**\n\t * @method _set\n\t * @param {Object} props\n\t * @param {Object} o\n\t * @protected\n\t */\n\tp._set = function(props, o) {\n\t\tfor (var n in props) {\n\t\t\to[n] = props[n];\n\t\t}\n\t};\n\n\tcreatejs.Tween = createjs.promote(Tween, \"EventDispatcher\");\n\n}());\n\n//##############################################################################\n// Timeline.js\n//##############################################################################\n\n(function() {\n\t\"use strict\";\n\t\n\n// constructor\t\n\t/**\n\t * The Timeline class synchronizes multiple tweens and allows them to be controlled as a group. Please note that if a\n\t * timeline is looping, the tweens on it may appear to loop even if the \"loop\" property of the tween is false.\n\t * @class Timeline\n\t * @param {Array} tweens An array of Tweens to add to this timeline. See {{#crossLink \"Timeline/addTween\"}}{{/crossLink}}\n\t * for more info.\n\t * @param {Object} labels An object defining labels for using {{#crossLink \"Timeline/gotoAndPlay\"}}{{/crossLink}}/{{#crossLink \"Timeline/gotoAndStop\"}}{{/crossLink}}.\n\t * See {{#crossLink \"Timeline/setLabels\"}}{{/crossLink}}\n\t * for details.\n\t * @param {Object} props The configuration properties to apply to this tween instance (ex. `{loop:true}`). All properties\n\t * default to false. Supported props are:<UL>\n\t *    <LI> loop: sets the loop property on this tween.</LI>\n\t *    <LI> useTicks: uses ticks for all durations instead of milliseconds.</LI>\n\t *    <LI> ignoreGlobalPause: sets the ignoreGlobalPause property on this tween.</LI>\n\t *    <LI> paused: indicates whether to start the tween paused.</LI>\n\t *    <LI> position: indicates the initial position for this timeline.</LI>\n\t *    <LI> onChange: specifies a listener to add for the {{#crossLink \"Timeline/change:event\"}}{{/crossLink}} event.</LI>\n\t * </UL>\n\t * @extends EventDispatcher\n\t * @constructor\n\t **/\n\tfunction Timeline(tweens, labels, props) {\n\t\tthis.EventDispatcher_constructor();\n\n\t// public properties:\n\t\t/**\n\t\t * Causes this timeline to continue playing when a global pause is active.\n\t\t * @property ignoreGlobalPause\n\t\t * @type Boolean\n\t\t **/\n\t\tthis.ignoreGlobalPause = false;\n\n\t\t/**\n\t\t * The total duration of this timeline in milliseconds (or ticks if `useTicks `is `true`). This value is usually\n\t\t * automatically updated as you modify the timeline. See {{#crossLink \"Timeline/updateDuration\"}}{{/crossLink}}\n\t\t * for more information.\n\t\t * @property duration\n\t\t * @type Number\n\t\t * @default 0\n\t\t * @readonly\n\t\t **/\n\t\tthis.duration = 0;\n\n\t\t/**\n\t\t * If true, the timeline will loop when it reaches the end. Can be set via the props param.\n\t\t * @property loop\n\t\t * @type Boolean\n\t\t **/\n\t\tthis.loop = false;\n\n\t\t/**\n\t\t * The current normalized position of the timeline. This will always be a value between 0 and\n\t\t * {{#crossLink \"Timeline/duration:property\"}}{{/crossLink}}.\n\t\t * Changing this property directly will have no effect.\n\t\t * @property position\n\t\t * @type Object\n\t\t * @readonly\n\t\t **/\n\t\tthis.position = null;\n\n\t\t// private properties:\n\t\t/**\n\t\t * @property _paused\n\t\t * @type Boolean\n\t\t * @protected\n\t\t **/\n\t\tthis._paused = false;\n\n\t\t/**\n\t\t * @property _tweens\n\t\t * @type Array[Tween]\n\t\t * @protected\n\t\t **/\n\t\tthis._tweens = [];\n\n\t\t/**\n\t\t * @property _labels\n\t\t * @type Object\n\t\t * @protected\n\t\t **/\n\t\tthis._labels = null;\n\n\t\t/**\n\t\t * @property _labelList\n\t\t * @type Array[Object]\n\t\t * @protected\n\t\t **/\n\t\tthis._labelList = null;\n\n\t\t/**\n\t\t * @property _prevPosition\n\t\t * @type Number\n\t\t * @default 0\n\t\t * @protected\n\t\t **/\n\t\tthis._prevPosition = 0;\n\n\t\t/**\n\t\t * @property _prevPos\n\t\t * @type Number\n\t\t * @default -1\n\t\t * @protected\n\t\t **/\n\t\tthis._prevPos = -1;\n\n\t\t/**\n\t\t * @property _useTicks\n\t\t * @type Boolean\n\t\t * @default false\n\t\t * @protected\n\t\t **/\n\t\tthis._useTicks = false;\n\t\t\n\t\t/**\n\t\t * Indicates whether the timeline is currently registered with Tween.\n\t\t * @property _registered\n\t\t * @type {boolean}\n\t\t * @default false\n\t\t * @protected\n\t\t */\n\t\tthis._registered = false;\n\n\n\t\tif (props) {\n\t\t\tthis._useTicks = props.useTicks;\n\t\t\tthis.loop = props.loop;\n\t\t\tthis.ignoreGlobalPause = props.ignoreGlobalPause;\n\t\t\tprops.onChange&&this.addEventListener(\"change\", props.onChange);\n\t\t}\n\t\tif (tweens) { this.addTween.apply(this, tweens); }\n\t\tthis.setLabels(labels);\n\t\tif (props&&props.paused) { this._paused=true; }\n\t\telse { createjs.Tween._register(this,true); }\n\t\tif (props&&props.position!=null) { this.setPosition(props.position, createjs.Tween.NONE); }\n\t\t\n\t};\n\t\n\tvar p = createjs.extend(Timeline, createjs.EventDispatcher);\n\n\t// TODO: deprecated\n\t// p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\n\n\t\n// events:\n\t/**\n\t * Called whenever the timeline's position changes.\n\t * @event change\n\t * @since 0.5.0\n\t **/\n\n\n// public methods:\n\t/**\n\t * Adds one or more tweens (or timelines) to this timeline. The tweens will be paused (to remove them from the\n\t * normal ticking system) and managed by this timeline. Adding a tween to multiple timelines will result in\n\t * unexpected behaviour.\n\t * @method addTween\n\t * @param {Tween} ...tween The tween(s) to add. Accepts multiple arguments.\n\t * @return {Tween} The first tween that was passed in.\n\t **/\n\tp.addTween = function(tween) {\n\t\tvar l = arguments.length;\n\t\tif (l > 1) {\n\t\t\tfor (var i=0; i<l; i++) { this.addTween(arguments[i]); }\n\t\t\treturn arguments[0];\n\t\t} else if (l == 0) { return null; }\n\t\tthis.removeTween(tween);\n\t\tthis._tweens.push(tween);\n\t\ttween.setPaused(true);\n\t\ttween._paused = false;\n\t\ttween._useTicks = this._useTicks;\n\t\tif (tween.duration > this.duration) { this.duration = tween.duration; }\n\t\tif (this._prevPos >= 0) { tween.setPosition(this._prevPos, createjs.Tween.NONE); }\n\t\treturn tween;\n\t};\n\n\t/**\n\t * Removes one or more tweens from this timeline.\n\t * @method removeTween\n\t * @param {Tween} ...tween The tween(s) to remove. Accepts multiple arguments.\n\t * @return Boolean Returns `true` if all of the tweens were successfully removed.\n\t **/\n\tp.removeTween = function(tween) {\n\t\tvar l = arguments.length;\n\t\tif (l > 1) {\n\t\t\tvar good = true;\n\t\t\tfor (var i=0; i<l; i++) { good = good && this.removeTween(arguments[i]); }\n\t\t\treturn good;\n\t\t} else if (l == 0) { return false; }\n\n\t\tvar tweens = this._tweens;\n\t\tvar i = tweens.length;\n\t\twhile (i--) {\n\t\t\tif (tweens[i] == tween) {\n\t\t\t\ttweens.splice(i, 1);\n\t\t\t\tif (tween.duration >= this.duration) { this.updateDuration(); }\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t};\n\n\t/**\n\t * Adds a label that can be used with {{#crossLink \"Timeline/gotoAndPlay\"}}{{/crossLink}}/{{#crossLink \"Timeline/gotoAndStop\"}}{{/crossLink}}.\n\t * @method addLabel\n\t * @param {String} label The label name.\n\t * @param {Number} position The position this label represents.\n\t **/\n\tp.addLabel = function(label, position) {\n\t\tthis._labels[label] = position;\n\t\tvar list = this._labelList;\n\t\tif (list) {\n\t\t\tfor (var i= 0,l=list.length; i<l; i++) { if (position < list[i].position) { break; } }\n\t\t\tlist.splice(i, 0, {label:label, position:position});\n\t\t}\n\t};\n\n\t/**\n\t * Defines labels for use with gotoAndPlay/Stop. Overwrites any previously set labels.\n\t * @method setLabels\n\t * @param {Object} o An object defining labels for using {{#crossLink \"Timeline/gotoAndPlay\"}}{{/crossLink}}/{{#crossLink \"Timeline/gotoAndStop\"}}{{/crossLink}}\n\t * in the form `{labelName:time}` where time is in milliseconds (or ticks if `useTicks` is `true`).\n\t **/\n\tp.setLabels = function(o) {\n\t\tthis._labels = o ?  o : {};\n\t};\n\n\t/**\n\t * Returns a sorted list of the labels defined on this timeline.\n\t * @method getLabels\n\t * @return {Array[Object]} A sorted array of objects with label and position properties.\n\t **/\n\tp.getLabels = function() {\n\t\tvar list = this._labelList;\n\t\tif (!list) {\n\t\t\tlist = this._labelList = [];\n\t\t\tvar labels = this._labels;\n\t\t\tfor (var n in labels) {\n\t\t\t\tlist.push({label:n, position:labels[n]});\n\t\t\t}\n\t\t\tlist.sort(function (a,b) { return a.position- b.position; });\n\t\t}\n\t\treturn list;\n\t};\n\n\t/**\n\t * Returns the name of the label on or immediately before the current position. For example, given a timeline with\n\t * two labels, \"first\" on frame index 4, and \"second\" on frame 8, getCurrentLabel would return:\n\t * <UL>\n\t * \t\t<LI>null if the current position is 2.</LI>\n\t * \t\t<LI>\"first\" if the current position is 4.</LI>\n\t * \t\t<LI>\"first\" if the current position is 7.</LI>\n\t * \t\t<LI>\"second\" if the current position is 15.</LI>\n\t * </UL>\n\t * @method getCurrentLabel\n\t * @return {String} The name of the current label or null if there is no label\n\t **/\n\tp.getCurrentLabel = function() {\n\t\tvar labels = this.getLabels();\n\t\tvar pos = this.position;\n\t\tvar l = labels.length;\n\t\tif (l) {\n\t\t\tfor (var i = 0; i<l; i++) { if (pos < labels[i].position) { break; } }\n\t\t\treturn (i==0) ? null : labels[i-1].label;\n\t\t}\n\t\treturn null;\n\t};\n\n\t/**\n\t * Unpauses this timeline and jumps to the specified position or label.\n\t * @method gotoAndPlay\n\t * @param {String|Number} positionOrLabel The position in milliseconds (or ticks if `useTicks` is `true`)\n\t * or label to jump to.\n\t **/\n\tp.gotoAndPlay = function(positionOrLabel) {\n\t\tthis.setPaused(false);\n\t\tthis._goto(positionOrLabel);\n\t};\n\n\t/**\n\t * Pauses this timeline and jumps to the specified position or label.\n\t * @method gotoAndStop\n\t * @param {String|Number} positionOrLabel The position in milliseconds (or ticks if `useTicks` is `true`) or label\n\t * to jump to.\n\t **/\n\tp.gotoAndStop = function(positionOrLabel) {\n\t\tthis.setPaused(true);\n\t\tthis._goto(positionOrLabel);\n\t};\n\n\t/**\n\t * Advances the timeline to the specified position.\n\t * @method setPosition\n\t * @param {Number} value The position to seek to in milliseconds (or ticks if `useTicks` is `true`).\n\t * @param {Number} [actionsMode] parameter specifying how actions are handled. See the Tween {{#crossLink \"Tween/setPosition\"}}{{/crossLink}}\n\t * method for more details.\n\t * @return {Boolean} Returns `true` if the timeline is complete (ie. the full timeline has run & {{#crossLink \"Timeline/loop:property\"}}{{/crossLink}}\n\t * is `false`).\n\t **/\n\tp.setPosition = function(value, actionsMode) {\n\t\tvar t = this._calcPosition(value);\n\t\tvar end = !this.loop && value >= this.duration;\n\t\tif (t == this._prevPos) { return end; }\n\t\tthis._prevPosition = value;\n\t\tthis.position = this._prevPos = t; // in case an action changes the current frame.\n\t\tfor (var i=0, l=this._tweens.length; i<l; i++) {\n\t\t\tthis._tweens[i].setPosition(t, actionsMode);\n\t\t\tif (t != this._prevPos) { return false; } // an action changed this timeline's position.\n\t\t}\n\t\tif (end) { this.setPaused(true); }\n\t\tthis.dispatchEvent(\"change\");\n\t\treturn end;\n\t};\n\n\t/**\n\t * Pauses or plays this timeline.\n\t * @method setPaused\n\t * @param {Boolean} value Indicates whether the tween should be paused (`true`) or played (`false`).\n\t **/\n\tp.setPaused = function(value) {\n\t\tthis._paused = !!value; \n\t\tcreatejs.Tween._register(this, !value);\n\t};\n\n\t/**\n\t * Recalculates the duration of the timeline. The duration is automatically updated when tweens are added or removed,\n\t * but this method is useful if you modify a tween after it was added to the timeline.\n\t * @method updateDuration\n\t **/\n\tp.updateDuration = function() {\n\t\tthis.duration = 0;\n\t\tfor (var i=0,l=this._tweens.length; i<l; i++) {\n\t\t\tvar tween = this._tweens[i];\n\t\t\tif (tween.duration > this.duration) { this.duration = tween.duration; }\n\t\t}\n\t};\n\n\t/**\n\t * Advances this timeline by the specified amount of time in milliseconds (or ticks if `useTicks` is `true`).\n\t * This is normally called automatically by the Tween engine (via the {{#crossLink \"Tween/tick:event\"}}{{/crossLink}}\n\t * event), but is exposed for advanced uses.\n\t * @method tick\n\t * @param {Number} delta The time to advance in milliseconds (or ticks if useTicks is true).\n\t **/\n\tp.tick = function(delta) {\n\t\tthis.setPosition(this._prevPosition+delta);\n\t};\n\n\t/**\n\t * If a numeric position is passed, it is returned unchanged. If a string is passed, the position of the\n\t * corresponding frame label will be returned, or `null` if a matching label is not defined.\n\t * @method resolve\n\t * @param {String|Number} positionOrLabel A numeric position value or label string.\n\t **/\n\tp.resolve = function(positionOrLabel) {\n\t\tvar pos = Number(positionOrLabel);\n\t\tif (isNaN(pos)) { pos = this._labels[positionOrLabel]; }\n\t\treturn pos;\n\t};\n\n\t/**\n\t* Returns a string representation of this object.\n\t* @method toString\n\t* @return {String} a string representation of the instance.\n\t**/\n\tp.toString = function() {\n\t\treturn \"[Timeline]\";\n\t};\n\n\t/**\n\t * @method clone\n\t * @protected\n\t **/\n\tp.clone = function() {\n\t\tthrow(\"Timeline can not be cloned.\")\n\t};\n\n// private methods:\n\t/**\n\t * @method _goto\n\t * @param {String | Number} positionOrLabel\n\t * @protected\n\t **/\n\tp._goto = function(positionOrLabel) {\n\t\tvar pos = this.resolve(positionOrLabel);\n\t\tif (pos != null) { this.setPosition(pos); }\n\t};\n\t\n\t/**\n\t * @method _calcPosition\n\t * @param {Number} value\n\t * @return {Number}\n\t * @protected\n\t **/\n\tp._calcPosition = function(value) {\n\t\tif (value < 0) { return 0; }\n\t\tif (value < this.duration) { return value; }\n\t\treturn this.loop ? value%this.duration : this.duration;\n\t};\n\n\tcreatejs.Timeline = createjs.promote(Timeline, \"EventDispatcher\");\n\n}());\n\n//##############################################################################\n// Ease.js\n//##############################################################################\n\n(function() {\n\t\"use strict\";\n\n\t/**\n\t * The Ease class provides a collection of easing functions for use with TweenJS. It does not use the standard 4 param\n\t * easing signature. Instead it uses a single param which indicates the current linear ratio (0 to 1) of the tween.\n\t *\n\t * Most methods on Ease can be passed directly as easing functions:\n\t *\n\t *      Tween.get(target).to({x:100}, 500, Ease.linear);\n\t *\n\t * However, methods beginning with \"get\" will return an easing function based on parameter values:\n\t *\n\t *      Tween.get(target).to({y:200}, 500, Ease.getPowIn(2.2));\n\t *\n\t * Please see the <a href=\"http://www.createjs.com/Demos/TweenJS/Tween_SparkTable\">spark table demo</a> for an\n\t * overview of the different ease types on <a href=\"http://tweenjs.com\">TweenJS.com</a>.\n\t *\n\t * <em>Equations derived from work by Robert Penner.</em>\n\t * @class Ease\n\t * @static\n\t **/\n\tfunction Ease() {\n\t\tthrow \"Ease cannot be instantiated.\";\n\t}\n\n\n// static methods and properties\n\t/**\n\t * @method linear\n\t * @param {Number} t\n\t * @static\n\t * @return {Number}\n\t **/\n\tEase.linear = function(t) { return t; };\n\n\t/**\n\t * Identical to linear.\n\t * @method none\n\t * @param {Number} t\n\t * @static\n\t * @return {Number}\n\t **/\n\tEase.none = Ease.linear;\n\n\t/**\n\t * Mimics the simple -100 to 100 easing in Flash Pro.\n\t * @method get\n\t * @param {Number} amount A value from -1 (ease in) to 1 (ease out) indicating the strength and direction of the ease.\n\t * @static\n\t * @return {Function}\n\t **/\n\tEase.get = function(amount) {\n\t\tif (amount < -1) { amount = -1; }\n\t\tif (amount > 1) { amount = 1; }\n\t\treturn function(t) {\n\t\t\tif (amount==0) { return t; }\n\t\t\tif (amount<0) { return t*(t*-amount+1+amount); }\n\t\t\treturn t*((2-t)*amount+(1-amount));\n\t\t};\n\t};\n\n\t/**\n\t * Configurable exponential ease.\n\t * @method getPowIn\n\t * @param {Number} pow The exponent to use (ex. 3 would return a cubic ease).\n\t * @static\n\t * @return {Function}\n\t **/\n\tEase.getPowIn = function(pow) {\n\t\treturn function(t) {\n\t\t\treturn Math.pow(t,pow);\n\t\t};\n\t};\n\n\t/**\n\t * Configurable exponential ease.\n\t * @method getPowOut\n\t * @param {Number} pow The exponent to use (ex. 3 would return a cubic ease).\n\t * @static\n\t * @return {Function}\n\t **/\n\tEase.getPowOut = function(pow) {\n\t\treturn function(t) {\n\t\t\treturn 1-Math.pow(1-t,pow);\n\t\t};\n\t};\n\n\t/**\n\t * Configurable exponential ease.\n\t * @method getPowInOut\n\t * @param {Number} pow The exponent to use (ex. 3 would return a cubic ease).\n\t * @static\n\t * @return {Function}\n\t **/\n\tEase.getPowInOut = function(pow) {\n\t\treturn function(t) {\n\t\t\tif ((t*=2)<1) return 0.5*Math.pow(t,pow);\n\t\t\treturn 1-0.5*Math.abs(Math.pow(2-t,pow));\n\t\t};\n\t};\n\n\t/**\n\t * @method quadIn\n\t * @param {Number} t\n\t * @static\n\t * @return {Number}\n\t **/\n\tEase.quadIn = Ease.getPowIn(2);\n\t/**\n\t * @method quadOut\n\t * @param {Number} t\n\t * @static\n\t * @return {Number}\n\t **/\n\tEase.quadOut = Ease.getPowOut(2);\n\t/**\n\t * @method quadInOut\n\t * @param {Number} t\n\t * @static\n\t * @return {Number}\n\t **/\n\tEase.quadInOut = Ease.getPowInOut(2);\n\n\t/**\n\t * @method cubicIn\n\t * @param {Number} t\n\t * @static\n\t * @return {Number}\n\t **/\n\tEase.cubicIn = Ease.getPowIn(3);\n\t/**\n\t * @method cubicOut\n\t * @param {Number} t\n\t * @static\n\t * @return {Number}\n\t **/\n\tEase.cubicOut = Ease.getPowOut(3);\n\t/**\n\t * @method cubicInOut\n\t * @param {Number} t\n\t * @static\n\t * @return {Number}\n\t **/\n\tEase.cubicInOut = Ease.getPowInOut(3);\n\n\t/**\n\t * @method quartIn\n\t * @param {Number} t\n\t * @static\n\t * @return {Number}\n\t **/\n\tEase.quartIn = Ease.getPowIn(4);\n\t/**\n\t * @method quartOut\n\t * @param {Number} t\n\t * @static\n\t * @return {Number}\n\t **/\n\tEase.quartOut = Ease.getPowOut(4);\n\t/**\n\t * @method quartInOut\n\t * @param {Number} t\n\t * @static\n\t * @return {Number}\n\t **/\n\tEase.quartInOut = Ease.getPowInOut(4);\n\n\t/**\n\t * @method quintIn\n\t * @param {Number} t\n\t * @static\n\t * @return {Number}\n\t **/\n\tEase.quintIn = Ease.getPowIn(5);\n\t/**\n\t * @method quintOut\n\t * @param {Number} t\n\t * @static\n\t * @return {Number}\n\t **/\n\tEase.quintOut = Ease.getPowOut(5);\n\t/**\n\t * @method quintInOut\n\t * @param {Number} t\n\t * @static\n\t * @return {Number}\n\t **/\n\tEase.quintInOut = Ease.getPowInOut(5);\n\n\t/**\n\t * @method sineIn\n\t * @param {Number} t\n\t * @static\n\t * @return {Number}\n\t **/\n\tEase.sineIn = function(t) {\n\t\treturn 1-Math.cos(t*Math.PI/2);\n\t};\n\n\t/**\n\t * @method sineOut\n\t * @param {Number} t\n\t * @static\n\t * @return {Number}\n\t **/\n\tEase.sineOut = function(t) {\n\t\treturn Math.sin(t*Math.PI/2);\n\t};\n\n\t/**\n\t * @method sineInOut\n\t * @param {Number} t\n\t * @static\n\t * @return {Number}\n\t **/\n\tEase.sineInOut = function(t) {\n\t\treturn -0.5*(Math.cos(Math.PI*t) - 1);\n\t};\n\n\t/**\n\t * Configurable \"back in\" ease.\n\t * @method getBackIn\n\t * @param {Number} amount The strength of the ease.\n\t * @static\n\t * @return {Function}\n\t **/\n\tEase.getBackIn = function(amount) {\n\t\treturn function(t) {\n\t\t\treturn t*t*((amount+1)*t-amount);\n\t\t};\n\t};\n\t/**\n\t * @method backIn\n\t * @param {Number} t\n\t * @static\n\t * @return {Number}\n\t **/\n\tEase.backIn = Ease.getBackIn(1.7);\n\n\t/**\n\t * Configurable \"back out\" ease.\n\t * @method getBackOut\n\t * @param {Number} amount The strength of the ease.\n\t * @static\n\t * @return {Function}\n\t **/\n\tEase.getBackOut = function(amount) {\n\t\treturn function(t) {\n\t\t\treturn (--t*t*((amount+1)*t + amount) + 1);\n\t\t};\n\t};\n\t/**\n\t * @method backOut\n\t * @param {Number} t\n\t * @static\n\t * @return {Number}\n\t **/\n\tEase.backOut = Ease.getBackOut(1.7);\n\n\t/**\n\t * Configurable \"back in out\" ease.\n\t * @method getBackInOut\n\t * @param {Number} amount The strength of the ease.\n\t * @static\n\t * @return {Function}\n\t **/\n\tEase.getBackInOut = function(amount) {\n\t\tamount*=1.525;\n\t\treturn function(t) {\n\t\t\tif ((t*=2)<1) return 0.5*(t*t*((amount+1)*t-amount));\n\t\t\treturn 0.5*((t-=2)*t*((amount+1)*t+amount)+2);\n\t\t};\n\t};\n\t/**\n\t * @method backInOut\n\t * @param {Number} t\n\t * @static\n\t * @return {Number}\n\t **/\n\tEase.backInOut = Ease.getBackInOut(1.7);\n\n\t/**\n\t * @method circIn\n\t * @param {Number} t\n\t * @static\n\t * @return {Number}\n\t **/\n\tEase.circIn = function(t) {\n\t\treturn -(Math.sqrt(1-t*t)- 1);\n\t};\n\n\t/**\n\t * @method circOut\n\t * @param {Number} t\n\t * @static\n\t * @return {Number}\n\t **/\n\tEase.circOut = function(t) {\n\t\treturn Math.sqrt(1-(--t)*t);\n\t};\n\n\t/**\n\t * @method circInOut\n\t * @param {Number} t\n\t * @static\n\t * @return {Number}\n\t **/\n\tEase.circInOut = function(t) {\n\t\tif ((t*=2) < 1) return -0.5*(Math.sqrt(1-t*t)-1);\n\t\treturn 0.5*(Math.sqrt(1-(t-=2)*t)+1);\n\t};\n\n\t/**\n\t * @method bounceIn\n\t * @param {Number} t\n\t * @static\n\t * @return {Number}\n\t **/\n\tEase.bounceIn = function(t) {\n\t\treturn 1-Ease.bounceOut(1-t);\n\t};\n\n\t/**\n\t * @method bounceOut\n\t * @param {Number} t\n\t * @static\n\t * @return {Number}\n\t **/\n\tEase.bounceOut = function(t) {\n\t\tif (t < 1/2.75) {\n\t\t\treturn (7.5625*t*t);\n\t\t} else if (t < 2/2.75) {\n\t\t\treturn (7.5625*(t-=1.5/2.75)*t+0.75);\n\t\t} else if (t < 2.5/2.75) {\n\t\t\treturn (7.5625*(t-=2.25/2.75)*t+0.9375);\n\t\t} else {\n\t\t\treturn (7.5625*(t-=2.625/2.75)*t +0.984375);\n\t\t}\n\t};\n\n\t/**\n\t * @method bounceInOut\n\t * @param {Number} t\n\t * @static\n\t * @return {Number}\n\t **/\n\tEase.bounceInOut = function(t) {\n\t\tif (t<0.5) return Ease.bounceIn (t*2) * .5;\n\t\treturn Ease.bounceOut(t*2-1)*0.5+0.5;\n\t};\n\n\t/**\n\t * Configurable elastic ease.\n\t * @method getElasticIn\n\t * @param {Number} amplitude\n\t * @param {Number} period\n\t * @static\n\t * @return {Function}\n\t **/\n\tEase.getElasticIn = function(amplitude,period) {\n\t\tvar pi2 = Math.PI*2;\n\t\treturn function(t) {\n\t\t\tif (t==0 || t==1) return t;\n\t\t\tvar s = period/pi2*Math.asin(1/amplitude);\n\t\t\treturn -(amplitude*Math.pow(2,10*(t-=1))*Math.sin((t-s)*pi2/period));\n\t\t};\n\t};\n\t/**\n\t * @method elasticIn\n\t * @param {Number} t\n\t * @static\n\t * @return {Number}\n\t **/\n\tEase.elasticIn = Ease.getElasticIn(1,0.3);\n\n\t/**\n\t * Configurable elastic ease.\n\t * @method getElasticOut\n\t * @param {Number} amplitude\n\t * @param {Number} period\n\t * @static\n\t * @return {Function}\n\t **/\n\tEase.getElasticOut = function(amplitude,period) {\n\t\tvar pi2 = Math.PI*2;\n\t\treturn function(t) {\n\t\t\tif (t==0 || t==1) return t;\n\t\t\tvar s = period/pi2 * Math.asin(1/amplitude);\n\t\t\treturn (amplitude*Math.pow(2,-10*t)*Math.sin((t-s)*pi2/period )+1);\n\t\t};\n\t};\n\t/**\n\t * @method elasticOut\n\t * @param {Number} t\n\t * @static\n\t * @return {Number}\n\t **/\n\tEase.elasticOut = Ease.getElasticOut(1,0.3);\n\n\t/**\n\t * Configurable elastic ease.\n\t * @method getElasticInOut\n\t * @param {Number} amplitude\n\t * @param {Number} period\n\t * @static\n\t * @return {Function}\n\t **/\n\tEase.getElasticInOut = function(amplitude,period) {\n\t\tvar pi2 = Math.PI*2;\n\t\treturn function(t) {\n\t\t\tvar s = period/pi2 * Math.asin(1/amplitude);\n\t\t\tif ((t*=2)<1) return -0.5*(amplitude*Math.pow(2,10*(t-=1))*Math.sin( (t-s)*pi2/period ));\n\t\t\treturn amplitude*Math.pow(2,-10*(t-=1))*Math.sin((t-s)*pi2/period)*0.5+1;\n\t\t};\n\t};\n\t/**\n\t * @method elasticInOut\n\t * @param {Number} t\n\t * @static\n\t * @return {Number}\n\t **/\n\tEase.elasticInOut = Ease.getElasticInOut(1,0.3*1.5);\n\n\tcreatejs.Ease = Ease;\n\n}());\n\n//##############################################################################\n// MotionGuidePlugin.js\n//##############################################################################\n\n(function() {\n\t\"use strict\";\n\n\t/**\n\t * A TweenJS plugin for working with motion guides.\n\t *\n\t * To use, install the plugin after TweenJS has loaded. Next tween the 'guide' property with an object as detailed below.\n\t *\n\t *       createjs.MotionGuidePlugin.install();\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      // Using a Motion Guide\n\t *\t    createjs.Tween.get(target).to({guide:{ path:[0,0, 0,200,200,200, 200,0,0,0] }},7000);\n\t *\t    // Visualizing the line\n\t *\t    graphics.moveTo(0,0).curveTo(0,200,200,200).curveTo(200,0,0,0);\n\t *\n\t * Each path needs pre-computation to ensure there's fast performance. Because of the pre-computation there's no\n\t * built in support for path changes mid tween. These are the Guide Object's properties:<UL>\n\t *      <LI> path: Required, Array : The x/y points used to draw the path with a moveTo and 1 to n curveTo calls.</LI>\n\t *      <LI> start: Optional, 0-1 : Initial position, default 0 except for when continuing along the same path.</LI>\n\t *      <LI> end: Optional, 0-1 : Final position, default 1 if not specified.</LI>\n\t *      <LI> orient: Optional, string : \"fixed\"/\"auto\"/\"cw\"/\"ccw\"<UL>\n\t *\t\t\t\t<LI>\"fixed\" forces the object to face down the path all movement (relative to start rotation),</LI>\n\t *      \t\t<LI>\"auto\" rotates the object along the path relative to the line.</LI>\n\t *      \t\t<LI>\"cw\"/\"ccw\" force clockwise or counter clockwise rotations including flash like behaviour</LI>\n\t * \t\t</UL></LI>\n\t * </UL>\n\t * Guide objects should not be shared between tweens even if all properties are identical, the library stores\n\t * information on these objects in the background and sharing them can cause unexpected behaviour. Values\n\t * outside 0-1 range of tweens will be a \"best guess\" from the appropriate part of the defined curve.\n\t *\n\t * @class MotionGuidePlugin\n\t * @constructor\n\t **/\n\tfunction MotionGuidePlugin() {\n\t\tthrow(\"MotionGuidePlugin cannot be instantiated.\")\n\t};\n\n\n// static properties:\n\t/**\n\t * @property priority\n\t * @protected\n\t * @static\n\t **/\n\tMotionGuidePlugin.priority = 0; // high priority, should run sooner\n\n\t/**\n\t * @property temporary variable storage\n\t * @private\n\t * @static\n\t */\n\tMotionGuidePlugin._rotOffS;\n\t/**\n\t * @property temporary variable storage\n\t * @private\n\t * @static\n\t */\n\tMotionGuidePlugin._rotOffE;\n\t/**\n\t * @property temporary variable storage\n\t * @private\n\t * @static\n\t */\n\tMotionGuidePlugin._rotNormS;\n\t/**\n\t * @property temporary variable storage\n\t * @private\n\t * @static\n\t */\n\tMotionGuidePlugin._rotNormE;\n\n\n// static methods\n\t/**\n\t * Installs this plugin for use with TweenJS. Call this once after TweenJS is loaded to enable this plugin.\n\t * @method install\n\t * @static\n\t **/\n\tMotionGuidePlugin.install = function() {\n\t\tcreatejs.Tween.installPlugin(MotionGuidePlugin, [\"guide\", \"x\", \"y\", \"rotation\"]);\n\t\treturn createjs.Tween.IGNORE;\n\t};\n\n\t/**\n\t * @method init\n\t * @protected\n\t * @static\n\t **/\n\tMotionGuidePlugin.init = function(tween, prop, value) {\n\t\tvar target = tween.target;\n\t\tif(!target.hasOwnProperty(\"x\")){ target.x = 0; }\n\t\tif(!target.hasOwnProperty(\"y\")){ target.y = 0; }\n\t\tif(!target.hasOwnProperty(\"rotation\")){ target.rotation = 0; }\n\n\t\tif(prop==\"rotation\"){ tween.__needsRot = true; }\n\t\treturn prop==\"guide\"?null:value;\n\t};\n\n\t/**\n\t * @method step\n\t * @protected\n\t * @static\n\t **/\n\tMotionGuidePlugin.step = function(tween, prop, startValue, endValue, injectProps) {\n\t\t// other props\n\t\tif(prop == \"rotation\"){\n\t\t\ttween.__rotGlobalS = startValue;\n\t\t\ttween.__rotGlobalE = endValue;\n\t\t\tMotionGuidePlugin.testRotData(tween, injectProps);\n\t\t}\n\t\tif(prop != \"guide\"){ return endValue; }\n\n\t\t// guide only information - Start -\n\t\tvar temp, data = endValue;\n\t\tif(!data.hasOwnProperty(\"path\")){ data.path = []; }\n\t\tvar path = data.path;\n\t\tif(!data.hasOwnProperty(\"end\")){ data.end = 1; }\n\t\tif(!data.hasOwnProperty(\"start\")){\n\t\t\tdata.start = (startValue&&startValue.hasOwnProperty(\"end\")&&startValue.path===path)?startValue.end:0;\n\t\t}\n\n\t\t// Figure out subline information\n\t\tif(data.hasOwnProperty(\"_segments\") && data._length){ return endValue; }\n\t\tvar l = path.length;\n\t\tvar accuracy = 10;\t\t// Adjust to improve line following precision but sacrifice performance (# of seg)\n\t\tif(l >= 6 && (l-2) % 4 == 0){\t// Enough points && contains correct number per entry ignoring start\n\t\t\tdata._segments = [];\n\t\t\tdata._length = 0;\n\t\t\tfor(var i=2; i<l; i+=4){\n\t\t\t\tvar sx = path[i-2], sy = path[i-1];\n\t\t\t\tvar cx = path[i+0], cy = path[i+1];\n\t\t\t\tvar ex = path[i+2], ey = path[i+3];\n\t\t\t\tvar oldX = sx, oldY = sy;\n\t\t\t\tvar tempX, tempY, total = 0;\n\t\t\t\tvar sublines = [];\n\t\t\t\tfor(var j=1; j<=accuracy; j++){\n\t\t\t\t\tvar t = j/accuracy;\n\t\t\t\t\tvar inv = 1 - t;\n\t\t\t\t\ttempX = inv*inv * sx + 2 * inv * t * cx + t*t * ex;\n\t\t\t\t\ttempY = inv*inv * sy + 2 * inv * t * cy + t*t * ey;\n\t\t\t\t\ttotal += sublines[sublines.push(Math.sqrt((temp=tempX-oldX)*temp + (temp=tempY-oldY)*temp))-1];\n\t\t\t\t\toldX = tempX;\n\t\t\t\t\toldY = tempY;\n\t\t\t\t}\n\t\t\t\tdata._segments.push(total);\n\t\t\t\tdata._segments.push(sublines);\n\t\t\t\tdata._length += total;\n\t\t\t}\n\t\t} else {\n\t\t\tthrow(\"invalid 'path' data, please see documentation for valid paths\");\n\t\t}\n\n\t\t// Setup x/y tweens\n\t\ttemp = data.orient;\n\t\tdata.orient = true;\n\t\tvar o = {};\n\t\tMotionGuidePlugin.calc(data, data.start, o);\n\t\ttween.__rotPathS = Number(o.rotation.toFixed(5));\n\t\tMotionGuidePlugin.calc(data, data.end, o);\n\t\ttween.__rotPathE = Number(o.rotation.toFixed(5));\n\t\tdata.orient = false;\t//here and now we don't know if we need to\n\t\tMotionGuidePlugin.calc(data, data.end, injectProps);\n\t\tdata.orient = temp;\n\n\t\t// Setup rotation properties\n\t\tif(!data.orient){ return endValue; }\n\t\ttween.__guideData = data;\n\t\tMotionGuidePlugin.testRotData(tween, injectProps);\n\t\treturn endValue;\n\t};\n\n\t/**\n\t * @method testRotData\n\t * @protected\n\t * @static\n\t **/\n\tMotionGuidePlugin.testRotData = function(tween, injectProps){\n\n\t\t// no rotation informat? if we need it come back, if we don't use 0 & ensure we have guide data\n\t\tif(tween.__rotGlobalS === undefined || tween.__rotGlobalE === undefined){\n\t\t\tif(tween.__needsRot){ return; }\n\t\t\tif(tween._curQueueProps.rotation !== undefined){\n\t\t\t\ttween.__rotGlobalS = tween.__rotGlobalE = tween._curQueueProps.rotation;\n\t\t\t} else {\n\t\t\t\ttween.__rotGlobalS = tween.__rotGlobalE = injectProps.rotation = tween.target.rotation || 0;\n\t\t\t}\n\t\t}\n\t\tif(tween.__guideData === undefined){ return; }\n\n\t\t// Process rotation properties\n\t\tvar data = tween.__guideData;\n\t\tvar rotGlobalD = tween.__rotGlobalE - tween.__rotGlobalS;\n\t\tvar rotPathD = tween.__rotPathE - tween.__rotPathS;\n\t\tvar rot = rotGlobalD - rotPathD;\n\n\t\tif(data.orient == \"auto\"){\n\t\t\tif(rot > 180){\t\t\trot -= 360; }\n\t\t\telse if(rot < -180){\trot += 360; }\n\n\t\t} else if(data.orient == \"cw\"){\n\t\t\twhile(rot < 0){ rot += 360; }\n\t\t\tif(rot == 0 && rotGlobalD > 0 && rotGlobalD != 180){ rot += 360; }\n\n\t\t} else if(data.orient == \"ccw\"){\n\t\t\trot = rotGlobalD - ((rotPathD > 180)?(360-rotPathD):(rotPathD));\t// sign flipping on path\n\t\t\twhile(rot > 0){ rot -= 360; }\n\t\t\tif(rot == 0 && rotGlobalD < 0 && rotGlobalD != -180){ rot -= 360; }\n\t\t}\n\n\t\tdata.rotDelta = rot;\n\t\tdata.rotOffS = tween.__rotGlobalS - tween.__rotPathS;\n\n\t\t// reset\n\t\ttween.__rotGlobalS = tween.__rotGlobalE = tween.__guideData = tween.__needsRot = undefined;\n\t};\n\n\t/**\n\t * @method tween\n\t * @protected\n\t * @static\n\t **/\n\tMotionGuidePlugin.tween = function(tween, prop, value, startValues, endValues, ratio, wait, end) {\n\t\tvar data = endValues.guide;\n\t\tif(data == undefined || data === startValues.guide){ return value; }\n\t\tif(data.lastRatio != ratio){\n\t\t\t// first time through so calculate what I need to\n\t\t\tvar t = ((data.end-data.start)*(wait?data.end:ratio)+data.start);\n\t\t\tMotionGuidePlugin.calc(data, t, tween.target);\n\t\t\tswitch(data.orient){\n\t\t\t\tcase \"cw\":\t\t// mix in the original rotation\n\t\t\t\tcase \"ccw\":\n\t\t\t\tcase \"auto\": tween.target.rotation += data.rotOffS + data.rotDelta*ratio; break;\n\t\t\t\tcase \"fixed\":\t// follow fixed behaviour to solve potential issues\n\t\t\t\tdefault: tween.target.rotation += data.rotOffS; break;\n\t\t\t}\n\t\t\tdata.lastRatio = ratio;\n\t\t}\n\t\tif(prop == \"rotation\" && ((!data.orient) || data.orient == \"false\")){ return value; }\n\t\treturn tween.target[prop];\n\t};\n\n\t/**\n\t * Determine the appropriate x/y/rotation information about a path for a given ratio along the path.\n\t * Assumes a path object with all optional parameters specified.\n\t * @param data Data object you would pass to the \"guide:\" property in a Tween\n\t * @param ratio 0-1 Distance along path, values outside 0-1 are \"best guess\"\n\t * @param target Object to copy the results onto, will use a new object if not supplied.\n\t * @return {Object} The target object or a new object w/ the tweened properties\n\t * @static\n\t */\n\tMotionGuidePlugin.calc = function(data, ratio, target) {\n\t\tif(data._segments == undefined){ throw(\"Missing critical pre-calculated information, please file a bug\"); }\n\t\tif(target == undefined){ target = {x:0, y:0, rotation:0}; }\n\t\tvar seg = data._segments;\n\t\tvar path = data.path;\n\n\t\t// find segment\n\t\tvar pos = data._length * ratio;\n\t\tvar cap = seg.length - 2;\n\t\tvar n = 0;\n\t\twhile(pos > seg[n] && n < cap){\n\t\t\tpos -= seg[n];\n\t\t\tn+=2;\n\t\t}\n\n\t\t// find subline\n\t\tvar sublines = seg[n+1];\n\t\tvar i = 0;\n\t\tcap = sublines.length-1;\n\t\twhile(pos > sublines[i] && i < cap){\n\t\t\tpos -= sublines[i];\n\t\t\ti++;\n\t\t}\n\t\tvar t = (i/++cap)+(pos/(cap*sublines[i]));\n\n\t\t// find x/y\n\t\tn = (n*2)+2;\n\t\tvar inv = 1 - t;\n\t\ttarget.x = inv*inv * path[n-2] + 2 * inv * t * path[n+0] + t*t * path[n+2];\n\t\ttarget.y = inv*inv * path[n-1] + 2 * inv * t * path[n+1] + t*t * path[n+3];\n\n\t\t// orientation\n\t\tif(data.orient){\n\t\t\ttarget.rotation = 57.2957795 * Math.atan2(\n\t\t\t\t(path[n+1]-path[n-1])*inv + (path[n+3]-path[n+1])*t,\n\t\t\t\t(path[n+0]-path[n-2])*inv + (path[n+2]-path[n+0])*t);\n\t\t}\n\n\t\treturn target;\n\t};\n\n\tcreatejs.MotionGuidePlugin = MotionGuidePlugin;\n\n}());\n\n//##############################################################################\n// version.js\n//##############################################################################\n\n(function() {\n\t\"use strict\";\n\n\t/**\n\t * Static class holding library specific information such as the version and buildDate of\n\t * the library.\n\t * @class TweenJS\n\t **/\n\tvar s = createjs.TweenJS = createjs.TweenJS || {};\n\n\t/**\n\t * The version string for this release.\n\t * @property version\n\t * @type String\n\t * @static\n\t **/\n\ts.version = /*=version*/\"0.6.2\"; // injected by build process\n\n\t/**\n\t * The build date for this release in UTC format.\n\t * @property buildDate\n\t * @type String\n\t * @static\n\t **/\n\ts.buildDate = /*=date*/\"Thu, 26 Nov 2015 20:44:31 GMT\"; // injected by build process\n\n})();\nif(typeof module !== \"undefined\" && typeof module.exports !== \"undefined\") module.exports = this.createjs;"],"mappings":"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A;AACA;AACA;AACA;IACE,IAAI,CAACI,SAAS,GAAI,IAAIC,IAAI,CAAC,CAAC,CAAEC,OAAO,CAAC,CAAC;;IAEvC;AACF;AACA;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,gBAAgB,GAAG,KAAK;;IAE7B;AACF;AACA;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,kBAAkB,GAAG,KAAK;;IAE/B;AACF;AACA;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,2BAA2B,GAAG,KAAK;;IAExC;AACF;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,OAAO,GAAG,KAAK;EACrB;EACA,IAAIC,CAAC,GAAGd,KAAK,CAAChB,SAAS;;EAEvB;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACC;;EAED;EACC;AACD;AACA;AACA;AACA;AACA;EACC8B,CAAC,CAACC,cAAc,GAAG,YAAW;IAC7B,IAAI,CAACL,gBAAgB,GAAG,IAAI,CAACP,UAAU,IAAE,IAAI;EAC9C,CAAC;;EAED;AACD;AACA;AACA;AACA;EACCW,CAAC,CAACE,eAAe,GAAG,YAAW;IAC9B,IAAI,CAACL,kBAAkB,GAAG,IAAI;EAC/B,CAAC;;EAED;AACD;AACA;AACA;AACA;AACA;EACCG,CAAC,CAACG,wBAAwB,GAAG,YAAW;IACvC,IAAI,CAACL,2BAA2B,GAAG,IAAI,CAACD,kBAAkB,GAAG,IAAI;EAClE,CAAC;;EAED;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACCG,CAAC,CAACI,MAAM,GAAG,YAAW;IACrB,IAAI,CAACL,OAAO,GAAG,IAAI;EACpB,CAAC;;EAED;AACD;AACA;AACA;AACA;EACCC,CAAC,CAACK,KAAK,GAAG,YAAW;IACpB,OAAO,IAAInB,KAAK,CAAC,IAAI,CAACC,IAAI,EAAE,IAAI,CAACC,OAAO,EAAE,IAAI,CAACC,UAAU,CAAC;EAC3D,CAAC;;EAED;AACD;AACA;AACA;AACA;AACA;AACA;AACA;EACCW,CAAC,CAACM,GAAG,GAAG,UAASC,KAAK,EAAE;IACvB,KAAK,IAAI7B,CAAC,IAAI6B,KAAK,EAAE;MAAE,IAAI,CAAC7B,CAAC,CAAC,GAAG6B,KAAK,CAAC7B,CAAC,CAAC;IAAE;IAC3C,OAAO,IAAI;EACZ,CAAC;;EAED;AACD;AACA;AACA;AACA;EACCsB,CAAC,CAACQ,QAAQ,GAAG,YAAW;IACvB,OAAO,eAAe,GAAC,IAAI,CAACrB,IAAI,GAAC,IAAI;EACtC,CAAC;EAEDvB,QAAQ,CAACsB,KAAK,GAAGA,KAAK;AACvB,CAAC,EAAC,CAAC;;AAEH;AACA;AACA;;AAEC,aAAW;EACX,YAAY;;EAGb;EACC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACC,SAASuB,eAAeA,CAAA,EAAG;IAG3B;IACC;AACF;AACA;AACA;AACA;IACE,IAAI,CAACC,UAAU,GAAG,IAAI;;IAEtB;AACF;AACA;AACA;AACA;IACE,IAAI,CAACC,iBAAiB,GAAG,IAAI;EAC9B;EACA,IAAIX,CAAC,GAAGS,eAAe,CAACvC,SAAS;;EAEjC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACC;;EAGD;EACC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACCuC,eAAe,CAACG,UAAU,GAAG,UAAStB,MAAM,EAAE;IAC7CA,MAAM,CAACuB,gBAAgB,GAAGb,CAAC,CAACa,gBAAgB;IAC5CvB,MAAM,CAACwB,EAAE,GAAGd,CAAC,CAACc,EAAE;IAChBxB,MAAM,CAACyB,mBAAmB,GAAGzB,MAAM,CAAC0B,GAAG,GAAIhB,CAAC,CAACe,mBAAmB;IAChEzB,MAAM,CAAC2B,uBAA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C,aAAW;EACX,YAAY;;EAGb;EACC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACC,SAASgC,MAAMA,CAAA,EAAG;IACjB,MAAM,gCAAgC;EACvC;;EAGD;EACC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACCA,MAAM,CAACC,WAAW,GAAG,SAAS;;EAE9B;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACCD,MAAM,CAACE,GAAG,GAAG,KAAK;;EAElB;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACCF,MAAM,CAACG,OAAO,GAAG,SAAS;;EAG3B;EACC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;EAGA;EACC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACCH,MAAM,CAACI,MAAM,GAAG,KAAK;;EAErB;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACCJ,MAAM,CAACK,UAAU,GAAG,IAAI;;EAExB;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACCL,MAAM,CAACM,QAAQ,GAAG,CAAC;;EAEnB;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACCN,MAAM,CAACO,MAAM,GAAG,KAAK;;EAGtB;EACC;EACAP,MAAM,CAAC1B,mBAAmB,GAAG,IAAI;EACjC0B,MAAM,CAACxB,uBAAuB,GAAG,IAAI;EACrCwB,MAAM,CAACtB,aAAa,GAAG,IAAI;EAC3BsB,MAAM,CAACvB,gBAAgB,GAAG,IAAI;EAC9BuB,MAAM,CAA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CC,SAASsB,MAAMA,CAACC,KAAK,EAAEC,OAAO,EAAEC,OAAO,EAAEC,IAAI,EAAE;IAG/C;IACC;AACF;AACA;AACA;AACA;AACA;IACE,IAAI,CAACH,KAAK,GAAGA,KAAK,IAAE,OAAO;;IAE3B;AACF;AACA;AACA;AACA;IACE,IAAI,CAACC,OAAO,GAAGA,OAAO,IAAE,CAAC;;IAEzB;AACF;AACA;AACA;AACA;IACE,IAAI,CAACC,OAAO,GAAGA,OAAO,IAAE,CAAC;;IAEzB;AACF;AACA;AACA;AACA;IACE,IAAI,CAACC,IAAI,GAAGA,IAAI,IAAE,CAAC;EACpB;EACA,IAAIlP,CAAC,GAAG8O,MAAM,CAAC5Q,SAAS;;EAExB;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACC;;EAGD;EACC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;EACC4Q,MAAM,CAACrF,QAAQ,GAAG,IAAIqF,MAAM,CAAC,aAAa,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;;EAGrD;EACC;AACD;AACA;AACA;AACA;EACC9O,CAAC,CAACQ,QAAQ,GAAG,YAAW;IACvB,OAAO,UAAU;EAClB,CAAC;;EAED;AACD;AACA;AACA;AACA;EACCR,CAAC,CAACK,KAAK,GAAG,YAAW;IACpB,OAAO,IAAIyO,MAAM,CAAC,IAAI,CAACC,KAAK,EAAE,IAAI,CAACC,OAAO,EAAE,IAAI,CAACC,OAAO,EAAE,IAAI,CAACC,IAAI,CAAC;EACrE,CAAC;EAGDtR,QAAQ,CAACkR,MAAM,GAAGA,MAAM;AACzB,CAAC,EAAC,CAAC;;AAEH;AACA;AACA;;AAEC,aAAW;EACX,YAAY;;EAGb;EACC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACC,SAASK,WAAWA,CAACtN,IAAI,EAAE;IAC1B,IAAI,CAACuN,2BAA2B,CAAC,CAAC;;IAGlC;IACA;AACF;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,QAAQ,GAAG,IAAI;;IAEpB;AACF;AACA;AACA;AACA;AACA;IACE,IAAI,CAAC5K,SAAS,GAAG,CAAC;;IAGlB;IACA;AACF;AACA;AACA;AACA;IACE,IAAI,CAAC6K,WAAW,GAAG,IAAI;;IAEvB;AACF;AACA;AACA;AACA;IACE,IAAI,CAACC,OAAO,GAAG,IAAI;;IAEnB;AACF;AACA;AACA;AACA;IACE,IAAI,CAACC,OAAO,GAAG,IAAI;;IAEnB;AACF;AACA;AACA;AACA;IACE,IAAI,CAACC,KAAK,GAAG,IAAI;;IAEjB;AACF;AACA;AACA;AACA;IACE,IAAI,CAACC,UAAU,GAAG,CAAC;;IAEnB;IACA;AACF;AACA;AACA;AACA;IACE,IAAI,CAACC,YAAY,GAAG,CAAC;;IAErB;AACF;AACA;AACA;AACA;IACE,IAAI,CAACC,WAAW,GAAG,CAAC;;IAEpB;AACF;AACA;AACA;AACA;IACE,IAAI,CAACC,UAAU,GAAG,CAAC;;IAEnB;AACF;AACA;AACA;AACA;IACE,IAAI,CAACC,KAAK,GAAG,CAAC;;IAEd;AACF;AACA;AACA;AACA;IACE,IAAI,CAACC,KAAK,GAAG,CAAC;;IAEd;AACF;AACA;AACA;AACA;IACE,IAAI,CAACC,QAAQ,GAAG,CAAC;;IAEjB;AACF;AACA;AACA;AACA;IACE,IAAI,CAACC,OAAO,GAAG,CAAC;;IAEhB;IACA,IAAI,CAACC,UAAU,CAACrO,IAAI,CAAC;EACtB;EACA,IAAI7B,CAAC,GAAGpC,QAAQ,CAACC,MAAM,CAACsR,WAAW,EAAEvR,QAAQ,CAAC6C,eAAe,CAAC;;EAE9D;EACA;;EAGD;EACC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;EAEC;AACD;AACA;AACA;AACA;AACA;AACA;;EAEC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;;EAGA;EACC;AACD;AACA;AACA;AACA;AACA;EACCT,CAAC,CAACmQ,aAAa,GAAG,YAAW;IAC5B,OAAO,IAAI,CAACb,WAAW,CAAC9M,KAAK,CAAC,CAAC;EAChC,CAAC;;EAED;AACD;AACA;AACA;AACA;AACA;EACC,IAAI;IACHjE,MAAM,CAACgG,gBAAgB,CAACvE,CAAC,EAAE;MAC1BoQ,UAAU,EAAE;QAAE5L,GAAG,EAAExE,CAAC,CAACmQ;MAAc;IACpC,CAAC,CAAC;EACH,CAAC,CAAC,OAAOhO,CAAC,EAAE,CAAC;;EAGd;EACC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;EACCnC,CAAC,CAACqQ,YAAY,GAAG,UAASC,SAAS,EAAE;IACpC,IAAIA,SAAS,IAAI,IAAI,EAAE;MACtB,OAAO,IAAI,CAACf,OAAO,GAAG,IAAI,CAACA,OAAO,CAACtQ,MAAM,GAAG,IAAI,CAAC4Q,UAAU,IAAI,CAAC;IACjE,CAAC,MAAM;MACN,IAAIhO,IAAI,GAAG,IAAI,CAAC4N,KAAK,CAACa,SAAS,CAAC;MAChC,IAAIzO,IAAI,IAAI,IAAI,EAAE;QAAE,OAAO,CAAC;MAAE,CAAC,MAC1B;QAAE,OAAOA,IAAI,CAAC0O,MAAM,CAACtR,MAAM;MAAE;IACnC;EACD,CAAC;;EAED;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACCe,CAAC,CAACwQ,YAAY,GAAG,UAASC,IAAI,EAAE;IAC/B,OAAO,IAAI,CAAChB,KAAK,CAACgB,IAAI,CAAC;EACxB,CAAC;;EAED;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACCzQ,CAAC,CAAC0Q,QAAQ,GAAG,UAASC,UAAU,EAAE;IACjC,IAAIC,KAAK;IACT,IAAI,IAAI,CAACrB,OAAO,KAAKqB,KAAK,GAAC,IAAI,CAACrB,OAAO,CAACoB,UAAU,CAAC,CAAC,EAAE;MAAE,OAAOC,KAAK;IAAE;IACtE,OAAO,IAAI;EACZ,CAAC;;EAED;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACC5Q,CAAC,CAAC6Q,cAAc,GAAG,UAASF,UAAU,EAAE9D,SAAS,EAAE;IAClD,IAAI+D,KAAK,GAAG,IAAI,CAACF,QAAQ,CAACC,UAAU,CAAC;IACrC,OAAOC,KAAK,GAAG,CAAC/D,SAAS,IAAE,IAAIjP,QAAQ,CAAC0O,SAAS,CAAC,CAAC,EAAEhD,SAAS,CAAC,CAACsH,KAAK,CAAClG,IAAI,EAAE,CAACkG,KAAK,CAACjG,IAAI,EAAEiG,KAAK,CAAC5D,IAAI,CAACT,KAAK,EAAEqE,KAAK,CAAC5D,IAAI,CAACR,MAAM,CAAC,GAAG,IAAI;EACrI,CAAC;;EAED;AACD;AACA;AACA;AACA;EACCxM,CAAC,CAACQ,QAAQ,GAAG,YAAW;IACvB,OAAO,eAAe;EACvB,CAAC;;EAED;AACD;AACA;AACA;EACCR,CAAC,CAACK,KAAK,GAAG,YAAW;IACpB,MAAM,+BAA+B;EACtC,CAAC;;EAEF;EACC;AACD;AACA;AACA;AACA;EACCL,CAAC,CAACkQ,UAAU,GAAG,UAASrO,IAAI,EAAE;IAC7B,IAAI9C,CAAC,EAACC,CAAC,EAAChB,CAAC,EAACgL,CAAC;IACX,IAAInH,IAAI,IAAI,IAAI,EAAE;MAAE;IAAQ;IAE5B,IAAI,CAAC4C,SAAS,GAAG5C,IAAI,CAAC4C,SAAS,IAAE,CAAC;;IAElC;IACA,IAAI5C,IAAI,CAACiP,MAAM,IAAI,CAAC9R,CAAC,GAAC6C,IAAI,CAACiP,MAAM,CAAC7R,MAAM,IAAI,CAAC,EAAE;MAC9C+J,CAAC,GAAG,IAAI,CAACwG,OAAO,GAAG,EAAE;MACrB,KAAKzQ,CAAC,GAAC,CAAC,EAAEA,CAAC,GAACC,CAAC,EAAED,CAAC,EAAE,EAAE;QACnB,IAAIgS,GAAG,GAAGlP,IAAI,CAACiP,MAAM,CAAC/R,CAAC,CAAC;QACxB,IAAI,OAAOgS,GAAG,IAAI,QAAQ,EAAE;UAC3B,IAAIC,GAAG,GAAGD,GAAG;UACbA,GAAG,GAAGE,QAAQ,CAACC,aAAa,CAAC,KAAK,CAAC;UACnCH,GAAG,CAACC,GAAG,GAAGA,GAAG;QACd;QACAhI,CAAC,CAACtH,IAAI,CAACqP,GAAG,CAAC;QACX,IAAI,CAACA,GAAG,CAACI,UAAU,IAAI,CAACJ,GAAG,CAACK,YAAY,EAAE;UACzC,IAAI,CAAC1B,UAAU,EAAE;UACjB,IAAI,CAACL,QAAQ,GAAG,KAAK;UACrB,CAAC,UAASrR,CAAC,EAAEgT,GAAG,EAAE;YAAED,GAAG,CAACM,MAAM,GAAG,YAAW;cAAErT,CAAC,CAACsT,gBAAgB,CAACN,GAAG,CAAC;YAAE,CAAC;UAAC,CAAC,EAAE,IAAI,EAAEA,GAAG,CAAC;UACtF,CAAC,UAAShT,CAAC,EAAEgT,GAAG,EAAE;YAAED,GAAG,CAACQ,OAAO,GAAG,YAAW;cAAEvT,CAAC,CAACwT,iBAAiB,CAACR,GAAG,CAAC;YAAE,CAAC;UAAC,CAAC,EAAE,IAAI,EAAEA,GAAG,CAAC;QACzF;MACD;IACD;;IAEA;IACA,IAAInP,IAAI,CAAC0O,MAAM,IAAI,IAAI,EAAE,CAAE;IAAA,CAC1B,MAAM,IAAIkB,KAAK,CAACC,OAAO,CAAC7P,IAAI,CAAC0O,MAAM,CAAC,EAAE;MACtC,IAAI,CAAChB,OAAO,GAAG,EAAE;MACjBvG,CAAC,GAAGnH,IAAI,CAAC0O,MAAM;MACf,KAAKxR,CAAC,GAAC,CAAC,EAACC,CAAC,GAACgK,CAAC,CAAC/J,MAAM,EAACF,CAAC,GAACC,CAAC,EAACD,CAAC,EAAE,EAAE;QAC5B,IAAI0C,GAAG,GAAGuH,CAAC,CAACjK,CAAC,CAAC;QACd,IAAI,CAACwQ,OAAO,CAAC7N,IAAI,CAAC;UAACiQ,KAAK,EAAC,IAAI,CAACnC,OAAO,CAAC/N,GAAG,CAAC,CAAC,CAAC,GAACA,GAAG,CAAC,CAAC,CAAC,GAAC,CAAC,CAAC;UAAEuL,IAAI,EAAC,IAAIpP,QAAQ,CAAC0O,SAAS,CAAC7K,GAAG,CAAC,CAAC,CAAC,EAACA,GAAG,CAAC,CAAC,CAAC,EAACA,GAAG,CAAC,CAAC,CAAC,EAACA,GAAG,CAAC,CAAC,CAAC,CAAC;UAAEiJ,IAAI,EAACjJ,GAAG,CAAC,CAAC,CAAC,IAAE,CAAC;UAAEkJ,IAAI,EAAClJ,GAAG,CAAC,CAAC,CAAC,IAAE;QAAE,CAAC,CAAC;MACpJ;IACD,CAAC,MAAM;MACNzD,CAAC,GAAG6D,IAAI,CAAC0O,MAAM;MACf,IAAI,CAACX,WAAW,GAAG5R,CAAC,CAACuO,KAAK;MAC1B,IAAI,CAACoD,YAAY,GAAG3R,CAAC,CAACwO,MAAM;MAC5B,IAAI,CAACsD,KAAK,GAAG9R,CAAC,CAAC0M,IAAI,IAAE,CAAC;MACtB,IAAI,CAACqF,KAAK,GAAG/R,CAAC,CAAC2M,IAAI,IAAE,CAAC;MACtB,IAAI,CAACqF,QAAQ,GAAGhS,CAAC,CAAC4T,OAAO,IAAE,CAAC;MAC5B,IAAI,CAAC3B,OAAO,GAAGjS,CAAC,CAAC6T,MAAM,IAAE,CAAC;MAC1B,IAAI,CAAChC,UAAU,GAAG7R,CAAC,CAAC8T,KAAK;MACzB,IAAI,IAAI,CAACpC,UAAU,IAAI,CAAC,EAAE;QAAE,IAAI,CAACqC,gBAAgB,CAAC,CAAC;MAAE;IACtD;;IAEA;IACA,IAAI,CAACzC,WAAW,GAAG,EAAE;IACrB,IAAI,CAACtR,CAAC,GAAC6D,IAAI,CAACuO,UAAU,KAAK,IAAI,EAAE;MAChC,IAAI,CAACX,KAAK,GAAG,CAAC,CAAC;MACf,IAAIgB,IAAI;MACR,KAAKA,IAAI,IAAIzS,CAAC,EAAE;QACf,IAAIgU,IAAI,GAAG;UAACvB,IAAI,EAACA;QAAI,CAAC;QACtB,IAAIwB,GAAG,GAAGjU,CAAC,CAACyS,IAAI,CAAC;QACjB,IAAI,OAAOwB,GAAG,IAAI,QAAQ,EAAE;UAAE;UAC7BjJ,CAAC,GAAGgJ,IAAI,CAACzB,MAAM,GAAG,CAAC0B,GAAG,CAAC;QACxB,CAAC,MAAM,IAAIR,KAAK,CAACC,OAAO,CAACO,GAAG,CAAC,EAAE;UAAE;UAChC,IAAIA,GAAG,CAAChT,MAAM,IAAI,CAAC,EAAE;YAAE+S,IAAI,CAACzB,MAAM,GAAG,CAAC0B,GAAG,CAAC,CAAC,CAAC,CAAC;UAAE,CAAC,MAC3C;YACJD,IAAI,CAACE,KAAK,GAAGD,GAAG,CAAC,CAAC,CAAC;YACnBD,IAAI,CAACG,IAAI,GAAGF,GAAG,CAAC,CAAC,CAAC;YAClBjJ,CAAC,GAAGgJ,IAAI,CAACzB,MAAM,GAAG,EAAE;YACpB,KAAKxR,CAAC,GAACkT,GAAG,CAAC,CAAC,CAAC,EAAClT,CAAC,IAAEkT,GAAG,CAAC,CAAC,CAAC,EAAClT,CAAC,EAAE,EAAE;cAC5BiK,CAAC,CAACtH,IAAI,CAAC3C,CAAC,CAAC;YACV;UACD;QACD,CAAC,MAAM;UAAE;UACRiT,IAAI,CAACE,KAAK,GAAGD,GAAG,CAACC,KAAK;UACtBF,IAAI,CAACG,IAAI,GAAGF,GAAG,CAACE,IAAI;UACpB,IAAI5B,MAAM,GAAG0B,GAAG,CAAC1B,MAAM;UACvBvH,CAAC,GAAGgJ,IAAI,CAACzB,MAAM,GAAI,OAAOA,MAAM,IAAI,QAAQ,GAAI,CAACA,MAAM,CAAC,GAAGA,MAAM,CAAC/N,KAAK,CAAC,CAAC,CAAC;QAC3E;QACA,IAAIwP,IAAI,CAACG,IAAI,KAAK,IAAI,IAAIH,IAAI,CAACG,IAAI,KAAKC,SAAS,EAAE;UAAEJ,IAAI,CAACG,IAAI,GAAG1B,IAAI;QAAE,CAAC,CAAC;QACzE,IAAIuB,IAAI,CAACG,IAAI,KAAK,KAAK,IAAKnJ,CAAC,CAAC/J,MAAM,GAAG,CAAC,IAAI+S,IAAI,CAACG,IAAI,IAAI1B,IAAK,EAAE;UAAEuB,IAAI,CAACG,IAAI,GAAG,IAAI;QAAE,CAAC,CAAC;QACtF,IAAI,CAACH,IAAI,CAACE,KAAK,EAAE;UAAEF,IAAI,CAACE,KAAK,GAAG,CAAC;QAAE;QACnC,IAAI,CAAC5C,WAAW,CAAC5N,IAAI,CAAC+O,IAAI,CAAC;QAC3B,IAAI,CAAChB,KAAK,CAACgB,IAAI,CAAC,GAAGuB,IAAI;MACxB;IACD;EACD,CAAC;;EAED;AACD;AACA;AACA;EACChS,CAAC,CAACsR,gBAAgB,GAAG,UAASN,GAAG,EAAE;IAClC,IAAI,EAAE,IAAI,CAACtB,UAAU,IAAI,CAAC,EAAE;MAC3B,IAAI,CAACqC,gBAAgB,CAAC,CAAC;MACvB,IAAI,CAAC1C,QAAQ,GAAG,IAAI;MACpB,IAAI,CAAClO,aAAa,CAAC,UAAU,CAAC;IAC/B;EACD,CAAC;;EAED;AACD;AACA;AACA;EACCnB,CAAC,CAACwR,iBAAiB,GAAG,UAAUR,GAAG,EAAE;IACpC,IAAIqB,UAAU,GAAG,IAAIzU,QAAQ,CAACsB,KAAK,CAAC,OAAO,CAAC;IAC5CmT,UAAU,CAACrB,GAAG,GAAGA,GAAG;IACpB,IAAI,CAAC7P,aAAa,CAACkR,UAAU,CAAC;;IAE9B;IACA,IAAI,EAAE,IAAI,CAAC3C,UAAU,IAAI,CAAC,EAAE;MAC3B,IAAI,CAACvO,aAAa,CAAC,UAAU,CAAC;IAC/B;EACD,CAAC;;EAED;AACD;AACA;AACA;EACCnB,CAAC,CAAC+R,gBAAgB,GAAG,YAAW;IAC/B,IAAI,IAAI,CAACxC,OAAO,IAAI,IAAI,CAACK,WAAW,IAAI,CAAC,EAAE;MAAE;IAAQ;IAErD,IAAI,CAACL,OAAO,GAAG,EAAE;IAEjB,IAAI+C,SAAS,GAAG,IAAI,CAACzC,UAAU,IAAI,MAAM,CAAC,CAAC;IAC3C,IAAI0C,UAAU,GAAG,CAAC;MAAEC,UAAU,GAAG,IAAI,CAAC5C,WAAW;MAAE6C,WAAW,GAAG,IAAI,CAAC9C,YAAY;IAClF,IAAIiC,OAAO,GAAG,IAAI,CAAC5B,QAAQ;MAAE6B,MAAM,GAAG,IAAI,CAAC5B,OAAO;IAElDyC,OAAO,EACP,KAAK,IAAI3T,CAAC,GAAC,CAAC,EAAE4T,IAAI,GAAC,IAAI,CAACnD,OAAO,EAAEzQ,CAAC,GAAC4T,IAAI,CAAC1T,MAAM,EAAEF,CAAC,EAAE,EAAE;MACpD,IAAIgS,GAAG,GAAG4B,IAAI,CAAC5T,CAAC,CAAC;QAAE6T,IAAI,GAAG7B,GAAG,CAACxE,KAAK;QAAEsG,IAAI,GAAG9B,GAAG,CAACvE,MAAM;MAEtD,IAAI9D,CAAC,GAAGmJ,MAAM;MACd,OAAOnJ,CAAC,IAAImK,IAAI,GAAChB,MAAM,GAACY,WAAW,EAAE;QACpC,IAAIjK,CAAC,GAAGqJ,MAAM;QACd,OAAOrJ,CAAC,IAAIoK,IAAI,GAACf,MAAM,GAACW,UAAU,EAAE;UACnC,IAAID,UAAU,IAAID,SAAS,EAAE;YAAE,MAAMI,OAAO;UAAE;UAC9CH,UAAU,EAAE;UACZ,IAAI,CAAChD,OAAO,CAAC7N,IAAI,CAAC;YAChBiQ,KAAK,EAAEZ,GAAG;YACV/D,IAAI,EAAE,IAAIpP,QAAQ,CAAC0O,SAAS,CAAC9D,CAAC,EAAEE,CAAC,EAAE8J,UAAU,EAAEC,WAAW,CAAC;YAC3D/H,IAAI,EAAE,IAAI,CAACoF,KAAK;YAChBnF,IAAI,EAAE,IAAI,CAACoF;UACZ,CAAC,CAAC;UACHvH,CAAC,IAAIgK,UAAU,GAACZ,OAAO;QACxB;QACAlJ,CAAC,IAAI+J,WAAW,GAACb,OAAO;MACzB;IACD;IACA,IAAI,CAAC/B,UAAU,GAAG0C,UAAU;EAC7B,CAAC;EAGD3U,QAAQ,CAACuR,WAAW,GAAGvR,QAAQ,CAACO,OAAO,CAACgR,WAAW,EAAE,iBAAiB,CAAC;AACxE,CAAC,EAAC,CAAC;;AAEH;AACA;AACA;;AAEC,aAAW;EACX,YAAY;;EAGb;EACC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACC,SAAS2D,QAAQA,CAAA,EAAG;IAGpB;IACC;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,OAAO,GAAG,IAAI;;IAGpB;IACC;AACF;AACA;AACA;AACA;IACE,IAAI,CAACC,OAAO,GAAG,IAAI;;IAEnB;AACF;AACA;AACA;AACA;IACE,IAAI,CAACC,YAAY,GAAG,IAAI;;IAExB;AACF;AACA;AACA;AACA;IACE,IAAI,CAACC,eAAe,GAAG,IAAI;;IAE3B;AACF;AACA;AACA;AACA;IACE,IAAI,CAACC,WAAW,GAAG,IAAI;;IAEvB;AACF;AACA;AACA;AACA;IACE,IAAI,CAACC,cAAc,GAAG,IAAI;;IAE1B;AACF;AACA;AACA;AACA;IACE,IAAI,CAACC,kBAAkB,GAAG,KAAK;;IAE/B;AACF;AACA;AACA;AACA;IACE,IAAI,CAACC,KAAK,GAAG,IAAI;;IAEjB;AACF;AACA;AACA;AACA;IACE,IAAI,CAACC,aAAa,GAAG,EAAE;;IAEvB;AACF;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,YAAY,GAAG,CAAC;;IAErB;AACF;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,mBAAmB,GAAG,EAAE;;IAE7B;AACF;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,MAAM,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ACA;AACA;AACA;AACA;EACCzV,CAAC,CAAC6Z,WAAW,GAAG,UAASrR,CAAC,EAAEE,CAAC,EAAEgO,CAAC,EAAEC,CAAC,EAAE;IACpC,OAAO,IAAI,CAACjN,MAAM,CAAC,IAAImK,CAAC,CAACiG,OAAO,CAACtR,CAAC,EAAEE,CAAC,EAAEgO,CAAC,EAAEC,CAAC,CAAC,CAAC;EAC9C,CAAC;;EAED;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACC3W,CAAC,CAAC+Z,YAAY,GAAG,UAASvR,CAAC,EAAEE,CAAC,EAAE+M,MAAM,EAAEuE,KAAK,EAAEC,SAAS,EAAEhP,KAAK,EAAE;IAChE,OAAO,IAAI,CAACvB,MAAM,CAAC,IAAImK,CAAC,CAACqG,QAAQ,CAAC1R,CAAC,EAAEE,CAAC,EAAE+M,MAAM,EAAEuE,KAAK,EAAEC,SAAS,EAAEhP,KAAK,CAAC,CAAC;EAC1E,CAAC;;EAED;EACA;AACD;AACA;AACA;AACA;;EAEC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACCjL,CAAC,CAAC0J,MAAM,GAAG,UAASqJ,OAAO,EAAEoH,KAAK,EAAE;IACnC,IAAI,CAAC1G,mBAAmB,CAAC/R,IAAI,CAACqR,OAAO,CAAC;IACtC,IAAI,CAACA,OAAO,GAAGA,OAAO;IACtB,IAAI,CAACoH,KAAK,EAAE;MAAE,IAAI,CAACzG,MAAM,GAAG,IAAI;IAAE;IAClC,OAAO,IAAI;EACZ,CAAC;;EAED;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACC1T,CAAC,CAACoa,UAAU,GAAG,U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CA;AACA;AACA;AACA;EACChW,CAAC,CAACgJ,CAAC,GAAGhJ,CAAC,CAAC2V,GAAG;;EAEX;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACC3V,CAAC,CAAC4K,CAAC,GAAG5K,CAAC,CAACgN,IAAI;;EAEZ;AACD;AACA;AACA;AACA;AACA;AACA;EACChN,CAAC,CAACsb,EAAE,GAAGtb,CAAC,CAAC6W,SAAS;;EAElB;AACD;AACA;AACA;AACA;AACA;AACA;EACC7W,CAAC,CAACkJ,CAAC,GAAGlJ,CAAC,CAAC4T,KAAK;;EAEb;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACC5T,CAAC,CAAC8E,CAAC,GAAG9E,CAAC,CAAC+W,SAAS;;EAEjB;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACC/W,CAAC,CAACub,EAAE,GAAGvb,CAAC,CAACkX,uBAAuB;;EAEhC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACClX,CAAC,CAACwb,EAAE,GAAGxb,CAAC,CAACwX,uBAAuB;;EAEhC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACCxX,CAAC,CAACyb,EAAE,GAAGzb,CAAC,CAAC4X,eAAe;;EAExB;AACD;AACA;AACA;AACA;AACA;AACA;EACC5X,CAAC,CAAC0b,EAAE,GAAG1b,CAAC,CAAC+X,OAAO;;EAEhB;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACC/X,CAAC,CAAC2b,EAAE,GAAG3b,CAAC,CAACgY,cAAc;;EAEvB;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACChY,CAAC,CAAC4b,EAAE,GAAG5b,CAAC,CAACuY,aAAa;;EAEtB;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACCvY,CAAC,CAAC6b,CAAC,GAAG7b,CAAC,CAAC2Y,WAAW;;EAEnB;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACC3Y,CAAC,CAAC8b,EAAE,GAAG9b,CAAC,CAAC8Y,yBAAyB;;EAElC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACC9Y,CAAC,CAAC+b,EAAE,GAAG/b,CAAC,CAAC+Y,yBAAyB;;EAElC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACC/Y,CAAC,CAACgc,EAAE,GAAGhc,CAAC,CAACgZ,iBAAiB;;EAE1B;AACD;AACA;AACA;AACA;AACA;AACA;EACChZ,CAAC,CAACic,EAAE,GAAGjc,CAAC,CAACiZ,SAAS;;EAElB;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACCjZ,CAAC,CAACkc,EAAE,GAAGlc,CAAC,CAACmZ,QAAQ;;EAEjB;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACCnZ,CAAC,CAACmc,EAAE,GAAGnc,CAAC,CAACoZ,aAAa;;EAEtB;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACCpZ,CAAC,CAACoc,EAAE,GAAGpc,CAAC,CAACqZ,oBAAoB;;EAE7B;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACCrZ,CAAC,CAACqc,EAAE,GAAGrc,CAAC,CAAC2Z,UAAU;;EAEnB;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACC3Z,CAAC,CAACsc,EAAE,GAAGtc,CAAC,CAAC6Z,WAAW;;EAEpB;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACC7Z,CAAC,CAACuc,EAAE,GAAGvc,CAAC,CAAC+Z,YAAY;;EAErB;AAC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ACwK,MAAM,CAAC;IAC/D;IACAX,GAAG,CAAC+B,SAAS,CAAC,CAAC;EAChB,CAAC;;EAED;EACA/D,QAAQ,CAAC6J,QAAQ,GAAG,IAAI9I,CAAC,CAACkJ,SAAS,CAAC,CAAC,CAAC,CAAC;;EAGvCnf,QAAQ,CAACkV,QAAQ,GAAGA,QAAQ;AAC7B,CAAC,EAAC,CAAC;;AAEH;AACA;AACA;;AAEC,aAAW;EACX,YAAY;;EAGb;EACC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACC,SAASwM,aAAaA,CAAA,EAAG;IACxB,IAAI,CAAClQ,2BAA2B,CAAC,CAAC;;IAGnC;IACC;AACF;AACA;AACA;AACA;AACA;IACE,IAAI,CAACnD,KAAK,GAAG,CAAC;;IAEd;AACF;AACA;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAACsT,WAAW,GAAG,IAAI;;IAEvB;AACF;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,OAAO,GAAG,CAAC;;IAEhB;AACF;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,EAAE,GAAG7hB,QAAQ,CAAC8J,GAAG,CAAClD,GAAG,CAAC,CAAC;;IAE5B;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAACkb,YAAY,GAAG,IAAI;;IAExB;AACF;AACA;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,WAAW,GAAG,IAAI;;IAEvB;AACF;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAAClP,IAAI,GAAG,IAAI;;IAEhB;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAACrO,MAAM,GAAG,IAAI;;IAElB;AACF;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAACsI,IAAI,GAAG,CAAC;;IAEb;AACF;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,IAAI,GAAG,CAAC;;IAEb;AACF;AACA;AACA;AACA;AACA;IACE,IAAI,CAACJ,QAAQ,GAAG,CAAC;;IAEjB;AACF;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAACF,MAAM,GAAG,CAAC;;IAEf;AACF;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,MAAM,GAAG,CAAC;;IAEf;AACF;AACA;AACA;AACA;AACA;IACE,IAAI,CAACE,KAAK,GAAG,CAAC;;IAEd;AACF;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,KAAK,GAAG,CAAC;;IAEd;AACF;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAACyB,MAAM,GAAG,IAAI;;IAElB;AACF;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAACF,OAAO,GAAG,IAAI;;IAEnB;AACF;AACA;AACA;AACA;AACA;IACE,IAAI,CAACxD,CAAC,GAAG,CAAC;;IAEV;AACF;AACA;AACA;AACA;IACE,IAAI,CAACE,CAAC,GAAG,CAAC;;IAEV;AACF;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAACkX,eAAe,GAAG,IAAI;;IAE3B;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAACzT,kBAAkB,GAAG,IAAI;;IAE9B;AACF;AACA;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAAC0T,WAAW,GAAG,IAAI;;IAEvB;AACF;AACA;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,OAAO,GAAG,IAAI;;IAEnB;AACF;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,IAAI,GAAG,IAAI;;IAEhB;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAAClS,OAAO,GAAG,IAAI;;IAEnB;AACF;AACA;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAACU,MAAM,GAAG,IAAI;;IAGnB;IACC;AACF;AACA;AACA;AACA;AACA;IACE,IAAI,CAACyR,aAAa,GAAG,CAAC;;IAEtB;AACF;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,aAAa,GAAG,CAAC;;IAEtB;AACF;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,cAAc,GAAG,CAAC;;IAEvB;AACF;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,cAAc,GAAG,CAAC;;IAEvB;AACF;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,WAAW,GAAG,CAAC;;IAEpB;AACF;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,eAAe,GAAG,CAAC;;IAExB;AACF;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,aAAa,GAAG,IAAI;;IAEzB;AACF;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,MAAM,GAAG,IAAI3iB,QAAQ,CAACmO,YAAY,CAAC,CAAC;;IAEzC;AACF;AACA;AACA;AACA;AACA;IACE,IAAI,CAACyU,UAAU,GAAG,IAAI5iB,QAAQ,CAAC0O,SAAS,CAAC,CAAC;;IAE1C;AACF;AACA;AACA;AACA;AACA;IACE,IAAI,CAACmU,OAAO,GAAG,IAAI;EACpB;EACA,IAAIzgB,CAAC,GAAGpC,QAAQ,CAACC,MAAM,CAACyhB,aAAa,EAAE1hB,QAAQ,CAAC6C,eAAe,CAAC;;EAEhE;EACA;;EAED;EACC;AACD;AACA;AACA;AACA;AACA;AACA;EACC6e,aAAa,CAACoB,aAAa,GAAG,CAAC,OAAO,EAAC,UAAU,EAAC,WAAW,EAAC,UAAU,EAAC,WAAW,EAAC,WAAW,EAAC,SAAS,EAAC,SAAS,EAAC,UAAU,CAAC;;EAEhI;AACD;AACA;AACA;AACA;AACA;AACA;AACA;EACCpB,aAAa,CAACqB,yBAAyB,GAAG,KAAK;;EAE/C;AACD;AACA;AACA;AACA;AACA;AACA;EACCrB,aAAa,CAACsB,mBAAmB,GAAG,KAAK,CAAC,CAAC;;EAE3C;AACD;AACA;AACA;AACA;AACA;EACC;AACD;AACA;AACA;AACA;AACA;EACC,IAAIrM,MAAM,GAAG3W,QAAQ,CAAC4W,YAAY,GAAC5W,QAAQ,CAAC4W,YAAY,CAAC,CAAC,GAACvD,QAAQ,CAACC,aAAa,CAAC,QAAQ,CAAC,CAAC,CAAC;EAC7F,IAAIqD,MAAM,CAACpD,UAAU,EAAE;IACtBmO,aAAa,CAACuB,cAAc,GAAGtM,MAAM;IACrC+K,aAAa,CAACwB,eAAe,GAAGvM,MAAM,CAACpD,UAAU,CAAC,IAAI,CAAC;IACvDoD,MAAM,CAAChI,KAAK,GAAGgI,MAAM,CAAC/H,MAAM,GAAG,CAAC;EACjC;;EAEA;AACD;AACA;AACA;AACA;AACA;EACC8S,aAAa,CAACyB,YAAY,GAAG,CAAC;;EAG/B;EACC;AACD;AACA;AACA;AACA;AACA;;EAEC;AACD;AACA;AACA;AACA;AACA;;EAEC;AACD;AACA;AACA;AACA;AACA;;EAEC;AACD;AACA;AACA;AACA;AACA;AACA;;EAEC;AACD;AACA;AACA;AACA;AACA;AACA;;EAEC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;EAEC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;EAEC;AACD;AACA;AACA;AACA;AACA;AACA;;EAEC;AACD;AACA;AACA;AACA;AACA;AACA;;EAEC;AACD;AACA;AACA;;EAEC;AACD;AACA;AACA;;EAEC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;EAGA;EACC;AACD;AACA;AACA;AACA;AACA;EACC/gB,CAAC,CAACghB,QAAQ,GAAG,YAAW;IACvB;IACA,IAAIhjB,CAAC,GAAG,IAAI;MAAEijB,MAAM,GAAGrjB,QAAQ,CAAC,OAAO,CAAC;IACxC,OAAOI,CAAC,CAACoE,MAAM,EAAE;MAAEpE,CAAC,GAAGA,CAAC,CAACoE,MAAM;IAAE;IACjC,IAAIpE,CAAC,YAAYijB,MAAM,EAAE;MAAE,OAAOjjB,CAAC;IAAE;IACrC,OAAO,IAAI;EACZ,CAAC;;EAED;AACD;AACA;AACA;AACA;AACA;EACC,IAAI;IACHO,MAAM,CAACgG,gBAAgB,CAACvE,CAAC,EAAE;MAC1BkhB,KAAK,EAAE;QAAE1c,GAAG,EAAExE,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;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACCP,CAAC,CAAC+iB,OAAO,GAAG,UAASva,CAAC,EAAEE,CAAC,EAAE;IAC1B,IAAIoM,GAAG,GAAGwK,aAAa,CAACwB,eAAe;IACvChM,GAAG,CAAC+I,YAAY,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAACrV,CAAC,EAAE,CAACE,CAAC,CAAC;IACpC,IAAI,CAACmM,IAAI,CAACC,GAAG,CAAC;IAEd,IAAIkO,GAAG,GAAG,IAAI,CAACC,QAAQ,CAACnO,GAAG,CAAC;IAC5BA,GAAG,CAAC+I,YAAY,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;IAClC/I,GAAG,CAACwN,SAAS,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;IACzB,OAAOU,GAAG;EACX,CAAC;;EAED;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACChjB,CAAC,CAACM,GAAG,GAAG,UAASC,KAAK,EAAE;IACvB,KAAK,IAAI7B,CAAC,IAAI6B,KAAK,EAAE;MAAE,IAAI,CAAC7B,CAAC,CAAC,GAAG6B,KAAK,CAAC7B,CAAC,CAAC;IAAE;IAC3C,OAAO,IAAI;EACZ,CAAC;;EAED;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACCsB,CAAC,CAACkjB,SAAS,GAAG,YAAW;IACxB,IAAI,IAAI,CAACzC,OAAO,EAAE;MAAE,OAAO,IAAI,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;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACC,SAAS6C,KAAKA,CAACjT,MAAM,EAAE;IACtB,IAAI,CAACkT,qBAAqB,CAAC,CAAC;;IAG7B;IACC;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,SAAS,GAAG,IAAI;;IAErB;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAACnT,MAAM,GAAI,OAAOA,MAAM,IAAI,QAAQ,GAAItD,QAAQ,CAAC0W,cAAc,CAACpT,MAAM,CAAC,GAAGA,MAAM;;IAEpF;AACF;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAACqT,MAAM,GAAG,CAAC;;IAEf;AACF;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,MAAM,GAAG,CAAC;;IAEf;AACF;AACA;AACA;AACA;AACA;IACE,IAAI,CAAC1O,QAAQ,GAAG,IAAI;;IAEpB;AACF;AACA;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAAC2O,kBAAkB,GAAG,KAAK;;IAE/B;AACF;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,aAAa,GAAG,KAAK;;IAE1B;AACF;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,YAAY,GAAG,IAAI;;IAExB;AACF;AACA;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,gBAAgB,GAAG,KAAK;;IAG7B;AACF;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,gBAAgB,GAAG,IAAI;;IAE5B;AACF;AACA;AACA;AACA;AACA;;IAGC;IACC;AACF;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,YAAY,GAAG,CAAC,CAAC;;IAEtB;AACF;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,aAAa,GAAG,CAAC;;IAEtB;AACF;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,iBAAiB,GAAG,IAAI;;IAE7B;AACF;AACA;AACA;AACA;IACE,IAAI,CAACC,oBAAoB,GAAG,IAAI;;IAEhC;AACF;AACA;AACA;AACA;IACE,IAAI,CAACC,UAAU,GAAG,IAAI;;IAEtB;AACF;AACA;AACA;AACA;IACE,IAAI,CAACC,UAAU,GAAG,IAAI;;IAGvB;IACC,IAAI,CAACC,eAAe,CAAC,IAAI,CAAC;EAC3B;EACA,IAAIzoB,CAAC,GAAGpC,QAAQ,CAACC,MAAM,CAAC2pB,KAAK,EAAE5pB,QAAQ,CAAC+mB,SAAS,CAAC;;EAElD;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACC;;EAGD;EACC;AACD;AACA;AACA;AACA;AACA;;EAEC;AACD;AACA;AACA;AACA;AACA;;EAEC;AACD;AACA;AACA;AACA;AACA;AACA;;EAEC;AACD;AACA;AACA;AACA;AACA;AACA;;EAEC;AACD;AACA;AACA;AACA;AACA;AACA;;EAEC;AACD;AACA;AACA;AACA;AACA;;EAEC;AACD;AACA;AACA;AACA;AACA;;EAEC;AACD;AACA;AACA;AACA;AACA;;EAEC;AACD;AACA;AACA;AACA;;EAGA;EACC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACC3kB,CAAC,CAAC0oB,cAAc,GAAG,YAAW;IAC7B,OAAO,IAAI,CAACH,UAAU;EACvB,CAAC;EACDvoB,CAAC,CAAC2oB,cAAc,GAAG,UAAStkB,KAAK,EAAE;IAClC,IAAI,IAAI,CAACkkB,UAAU,EAAE;MAAE,IAAI,CAACA,UAAU,CAACC,UAAU,GAAG,IAAI;IAAE;IAC1D,IAAInkB,KAAK,EAAE;MAAEA,KAAK,CAACmkB,UAAU,GAAG,IAAI;IAAE;IACtC,IAAI,CAACD,UAAU,GAAGlkB,KAAK;EACxB,CAAC;EAED,IAAI;IACH9F,MAAM,CAACgG,gBAAgB,CAACvE,CAAC,EAAE;MAC1B4oB,SAAS,EAAE;QAAE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M,CAAC,IAAI,CAACxb,KAAK,CAAC;IAC9B,IAAI,IAAI,CAAC0b,UAAU,EAAE;MAAErvB,CAAC,CAACqvB,UAAU,GAAG,IAAI,CAACA,UAAU,CAAChtB,KAAK,CAAC,CAAC;IAAE;IAC/D,IAAI,CAACijB,WAAW,CAACtlB,CAAC,CAAC;IACnB,OAAOA,CAAC;EACT,CAAC;;EAED;AACD;AACA;AACA;AACA;EACCgC,CAAC,CAACQ,QAAQ,GAAG,YAAW;IACvB,OAAO,gBAAgB,GAAG,IAAI,CAACiQ,IAAI,GAAE,IAAI;EAC1C,CAAC;EAGD7S,QAAQ,CAACuvB,MAAM,GAAGvvB,QAAQ,CAACO,OAAO,CAACgvB,MAAM,EAAE,eAAe,CAAC;AAC5D,CAAC,EAAC,CAAC;;AAEH;AACA;AACA;;AAEC,aAAW;EACX,YAAY;;EAGb;EACC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACC,SAASG,MAAMA,CAACC,WAAW,EAAEC,gBAAgB,EAAE;IAC9C,IAAI,CAAC5I,yBAAyB,CAAC,CAAC;;IAGjC;IACC;AACF;AACA;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAAC6I,YAAY,GAAG,CAAC;;IAErB;AACF;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,gBAAgB,GAAG,IAAI;;IAE5B;AACF;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAAC1qB,MAAM,GAAG,IAAI;;IAElB;AACF;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAACuqB,WAAW,GAAGA,WAAW;;IAE9B;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAACI,qBAAqB,GAAG,CAAC;;IAE9B;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAAClpB,SAAS,GAAG,CAAC;;IAGnB;IACC;AACF;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAACmpB,UAAU,GAAG,IAAI;;IAEtB;AACF;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,aAAa,GAAG,IAAI;;IAEzB;AACF;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,YAAY,GAAG,KAAK;IAGzB,IAAIN,gBAAgB,IAAI,IAAI,EAAE;MAAE,IAAI,CAAC3e,WAAW,CAAC2e,gBAAgB,CAAC;IAAE;EACrE;EACA,IAAIxtB,CAAC,GAAGpC,QAAQ,CAACC,MAAM,CAACyvB,MAAM,EAAE1vB,QAAQ,CAAC0hB,aAAa,CAAC;;EAEvD;AACD;AACA;AACA;AACA;AACA;EACCtf,CAAC,CAACY,UAAU,GAAG0sB,MAAM,CAAC,CAAC;;EAGxB;EACC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;EAEC;AACD;AACA;AACA;AACA;AACA;AACA;;EAGA;EACC;AACD;AACA;AACA;AACA;AACA;AACA;EACCttB,CAAC,CAACmhB,SAAS,GAAG,YAAW;IACxB,IAAI8D,UAAU,GAAG,IAAI,CAAC1F,WAAW,IAAI,IAAI,CAACgO,WAAW,CAACle,QAAQ;IAC9D,OAAO,CAAC,EAAE,IAAI,CAACrD,OAAO,IAAI,IAAI,CAACC,KAAK,GAAG,CAAC,IAAI,IAAI,CAAC5B,MAAM,IAAI,CAAC,IAAI,IAAI,CAACC,MAAM,IAAI,CAAC,IAAI2a,UAAU,CAAC;EAChG,CAAC;;EAED;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACCjlB,CAAC,CAAC6U,IAAI,GAAG,UAASC,GAAG,EAAEsM,WAAW,EAAE;IACnC,IAAI,IAAI,CAAC8D,kBAAkB,CAACpQ,GAAG,EAAEsM,WAAW,CAAC,EAAE;MAAE,OAAO,IAAI;IAAE;IAC9D,IAAI,CAAC2M,eAAe,CAAC,CAAC;IACtB,IAAI/vB,CAAC,GAAG,IAAI,CAACuvB,WAAW,CAAC7c,QAAQ,CAAC,IAAI,CAACmd,aAAa,GAAC,CAAC,CAAC;IACvD,IAAI,CAAC7vB,CAAC,EAAE;MAAE,OAAO,KAAK;IAAE;IACxB,IAAIgP,IAAI,GAAGhP,CAAC,CAACgP,IAAI;IACjB,IAAIA,IAAI,CAACT,KAAK,IAAIS,IAAI,CAACR,MAAM,EAAE;MAAEsI,GAAG,CAACuM,SAAS,CAACrjB,CAAC,CAAC2T,KAAK,EAAE3E,IAAI,CAACxE,CAAC,EAAEwE,IAAI,CAACtE,CAAC,EAAEsE,IAAI,CAACT,KAAK,EAAES,IAAI,CAACR,MAAM,EAAE,CAACxO,CAAC,CAAC0M,IAAI,EAAE,CAAC1M,CAAC,CAAC2M,IAAI,EAAEqC,IAAI,CAACT,KAAK,EAAES,IAAI,CAACR,MAAM,CAAC;IAAE;IAC7I,OAAO,IAAI;EACZ,CAAC;;EAED;EACA;;EAEA;AACD;AACA;AACA;AACA;;EAEC;AACD;AACA;AACA;AACA;;EAEC;AACD;AACA;AACA;AACA;;EAEC;AACD;AACA;AACA;AACA;AACA;EACCxM,CAAC,CAAC4N,IAAI,GAAG,YAAW;IACnB,IAAI,CAAC5K,MAAM,GAAG,KAAK;EACpB,CAAC;;EAED;AACD;AACA;AACA;AACA;AACA;EACChD,CAAC,CAACguB,IAAI,GAAG,YAAW;IACnB,IAAI,CAAChrB,MAAM,GAAG,IAAI;EACnB,CAAC;;EAED;AACD;AACA;AACA;AACA;AACA;EACChD,CAAC,CAAC6O,WAAW,GAAG,UAAS2e,gBAAgB,EAAE;IAC1C,IAAI,CAACxqB,MAAM,GAAG,KAAK;IACnB,IAAI,CAAC8qB,YAAY,GAAG,IAAI;IACxB,IAAI,CAACG,KAAK,CAACT,gBAAgB,CAAC;EAC7B,CAAC;;EAED;AACD;AACA;AACA;AACA;AACA;EACCxtB,CAAC,CAACqO,WAAW,GAAG,UAASmf,gBAAgB,EAAE;IAC1C,IAAI,CAACxqB,MAAM,GAAG,IAAI;IAClB,IAAI,CAACirB,KAAK,CAACT,gBAAgB,CAAC;EAC7B,CAAC;;EAED;AACD;AACA;AACA;AACA;AACA;EACCxtB,CAAC,CAACkuB,OAAO,GAAG,UAASpnB,IAAI,EAAE;IAC1B,IAAIqnB,GAAG,GAAG,IAAI,CAAC1pB,SAAS,IAAI,IAAI,CAAC8oB,WAAW,CAAC9oB,SAAS;IACtD,IAAImK,CAAC,GAAIuf,GAAG,IAAIrnB,IAAI,IAAI,IAAI,GAAIA,IAAI,IAAE,IAAI,GAACqnB,GAAG,CAAC,GAAG,CAAC;IACnD,IAAI,CAACJ,eAAe,CAACnf,CAAC,CAAC;EACxB,CAAC;;EAED;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACC5O,CAAC,CAACkjB,SAAS,GAAG,YAAW;IACxB;IACA,OAAO,IAAI,CAACqE,uBAAuB,CAAC,CAAC,IAAI,IAAI,CAACgG,WAAW,CAAC1c,cAAc,CAAC,IAAI,CAAC4c,YAAY,EAAE,IAAI,CAACjN,UAAU,CAAC;EAC7G,CAAC;;EAED;AACD;AACA;AACA;AACA;AACA;EACCxgB,CAAC,CAACK,KAAK,GAAG,YAAW;IACpB,OAAO,IAAI,CAACijB,WAAW,CAAC,IAAIgK,MAAM,CAAC,IAAI,CAACC,WAAW,CAAC,CAAC;EACtD,CAAC;;EAED;AACD;AACA;AACA;AACA;EACCvtB,CAAC,CAACQ,QAAQ,GAAG,YAAW;IACvB,OAAO,gBAAgB,GAAG,IAAI,CAACiQ,IAAI,GAAE,IAAI;EAC1C,CAAC;;EAEF;EACC;AACD;AACA;AACA;AACA;AACA;EACCzQ,CAAC,CAACsjB,WAAW,GAAG,UAAStlB,CAAC,EAAE;IAC3B,IAAI,CAACowB,yBAAyB,CAACpwB,CAAC,CAAC;IACjCA,CAAC,CAACyvB,YAAY,GAAG,IAAI,CAACA,YAAY;IAClCzvB,CAAC,CAAC0vB,gBAAgB,GAAG,IAAI,CAACA,gBAAgB;IAC1C1vB,CAAC,CAACgF,MAAM,GAAG,IAAI,CAACA,MAAM;IACtBhF,CAAC,CAAC2vB,qBAAqB,GAAG,IAAI,CAACA,qBAAqB;IACpD3vB,CAAC,CAACyG,SAAS,GAAG,IAAI,CAACA,SAAS;IAE5BzG,CAAC,CAAC4vB,UAAU,GAAG,IAAI,CAACA,UAAU;IAC9B5vB,CAAC,CAAC6vB,aAAa,GAAG,IAAI,CAACA,aAAa;IACpC7vB,CAAC,CAAC8vB,YAAY,GAAG,IAAI,CAACA,YAAY;IAClC,OAAO9vB,CAAC;EACT,CAAC;;EAED;AACD;AACA;AACA;AACA;AACA;AACA;EACCgC,CAAC,CAACoG,KAAK,GAAG,UAASud,MAAM,EAAE;IAC1B,IAAI,CAAC,IAAI,CAAC3gB,MAAM,EAAE;MACjB,IAAI,CAAC,IAAI,CAAC8qB,YAAY,EAAE;QAAE,IAAI,CAACI,OAAO,CAACvK,MAAM,IAAEA,MAAM,CAAC1c,KAAK,CAAC;MAAE;MAC9D,IAAI,CAAC6mB,YAAY,GAAG,KAAK;IAC1B;IACA,IAAI,CAAC7G,mBAAmB,CAACtD,MAAM,CAAC;EACjC,CAAC;;EAGD;AACD;AACA;AACA;AACA;EACC3jB,CAAC,CAAC+tB,eAAe,GAAG,UAASM,UAAU,EAAE;IACxCA,UAAU,GAAGA,UAAU,IAAI,CAAC;IAC5B,IAAI/d,SAAS,GAAG,IAAI,CAACsd,UAAU;IAC/B,IAAI5qB,MAAM,GAAG,IAAI,CAACA,MAAM;IACxB,IAAI4N,KAAK,GAAG,IAAI,CAACid,aAAa;IAC9B,IAAI7uB,CAAC;IAEL,IAAIsR,SAAS,EAAE;MACd,IAAI4B,KAAK,GAAG5B,SAAS,CAAC4B,KAAK,IAAI,CAAC;MAChC,IAAIoc,SAAS,GAAG,IAAI,CAACX,qBAAqB;MAC1C3uB,CAAC,GAAGsR,SAAS,CAACC,MAAM,CAACtR,MAAM;MAC3B,IAAIqvB,SAAS,GAAGD,UAAU,GAAGnc,KAAK,IAAIlT,CAAC,EAAE;QACxC,IAAImT,IAAI,GAAG7B,SAAS,CAAC6B,IAAI;QACzB,IAAI,IAAI,CAACoc,qBAAqB,CAACje,SAAS,EAAEM,KAAK,EAAE5N,MAAM,EAAEmP,IAAI,EAAEnT,CAAC,GAAG,CAAC,CAAC,EAAE;UACtE;UACA;QACD,CAAC,MAAM,IAAImT,IAAI,EAAE;UAChB;UACA,OAAO,IAAI,CAAC8b,KAAK,CAAC9b,IAAI,EAAEkc,UAAU,GAAG,CAACrvB,CAAC,GAAGsvB,SAAS,IAAIpc,KAAK,CAAC;QAC9D,CAAC,MAAM;UACN;UACA,IAAI,CAAClP,MAAM,GAAG,IAAI;UAClBsrB,SAAS,GAAGhe,SAAS,CAACC,MAAM,CAACtR,MAAM,GAAG,CAAC;QACxC;MACD,CAAC,MAAM;QACNqvB,SAAS,IAAID,UAAU,GAAGnc,KAAK;MAChC;MACA,IAAI,CAACyb,qBAAqB,GAAGW,SAAS;MACtC,IAAI,CAACT,aAAa,GAAGvd,SAAS,CAACC,MAAM,CAAC+d,SAAS,GAAG,CAAC,CAAC;IACrD,CAAC,MAAM;MACN1d,KAAK,GAAI,IAAI,CAACid,aAAa,IAAIQ,UAAW;MAC1CrvB,CAAC,GAAG,IAAI,CAACuuB,WAAW,CAACld,YAAY,CAAC,CAAC;MACnC,IAAIO,KAAK,IAAI5R,CAAC,IAAIA,CAAC,GAAG,CAAC,EAAE;QACxB,IAAI,CAAC,IAAI,CAACuvB,qBAAqB,CAACje,SAAS,EAAEM,KAAK,EAAE5N,MAAM,EAAEhE,CAAC,GAAG,CAAC,CAAC,EAAE;UACjE;UACA,IAAI,CAAC,IAAI,CAAC6uB,aAAa,IAAI7uB,CAAC,KAAKA,CAAC,EAAE;YAAE,OAAO,IAAI,CAAC+uB,eAAe,CAAC,CAAC;UAAE;QACtE;MACD;IACD;IACAnd,KAAK,GAAG,IAAI,CAACid,aAAa,GAAG,CAAC;IAC9B,IAAI,IAAI,CAACJ,YAAY,IAAI7c,KAAK,EAAE;MAC/B,IAAI,CAAC6c,YAAY,GAAG7c,KAAK;MACzB,IAAI,CAACzP,aAAa,CAAC,QAAQ,CAAC;IAC7B;EACD,CAAC;;EAED;AACD;AACA;AACA;AACA;AACA;AACA;EACCnB,CAAC,CAACuuB,qBAAqB,GAAG,UAASje,SAAS,EAAEM,KAAK,EAAE5N,MAAM,EAAEmP,IAAI,EAAEqc,GAAG,EAAE;IACvE,IAAI/d,IAAI,GAAGH,SAAS,GAAGA,SAAS,CAACG,IAAI,GAAG,IAAI;IAC5C,IAAI,IAAI,CAACvP,gBAAgB,CAAC,cAAc,CAAC,EAAE;MAC1C,IAAIa,GAAG,GAAG,IAAInE,QAAQ,CAACsB,KAAK,CAAC,cAAc,CAAC;MAC5C6C,GAAG,CAAC0O,IAAI,GAAGA,IAAI;MACf1O,GAAG,CAACoQ,IAAI,GAAGA,IAAI;MACf,IAAI,CAAChR,aAAa,CAACY,GAAG,CAAC;IACxB;IACA;IACA,IAAI0sB,OAAO,GAAI,IAAI,CAACb,UAAU,IAAItd,SAAS,IAAI,IAAI,CAACud,aAAa,IAAIjd,KAAM;IAC3E;IACA,IAAI,CAAC6d,OAAO,IAAI,CAACzrB,MAAM,IAAI,IAAI,CAACA,MAAM,EAAE;MAAE,IAAI,CAAC2qB,qBAAqB,GAAGa,GAAG;MAAEC,OAAO,GAAG,IAAI;IAAE;IAC5F,OAAOA,OAAO;EACf,CAAC;;EAED;AACD;AACA;AACA;AACA;AACA;AACA;EACCzuB,CAAC,CAACiuB,KAAK,GAAG,UAAST,gBAAgB,EAAE5c,KAAK,EAAE;IAC3C,IAAI,CAAC+c,qBAAqB,GAAG,CAAC;IAC9B,IAAI3P,KAAK,CAACwP,gBAAgB,CAAC,EAAE;MAC5B,IAAI3rB,IAAI,GAAG,IAAI,CAAC0rB,WAAW,CAAC/c,YAAY,CAACgd,gBAAgB,CAAC;MAC1D,IAAI3rB,IAAI,EAAE;QACT,IAAI,CAAC+rB,UAAU,GAAG/rB,IAAI;QACtB,IAAI,CAAC6rB,gBAAgB,GAAGF,gBAAgB;QACxC,IAAI,CAACO,eAAe,CAACnd,KAAK,CAAC;MAC5B;IACD,CAAC,MAAM;MACN,IAAI,CAAC8c,gBAAgB,GAAG,IAAI,CAACE,UAAU,GAAG,IAAI;MAC9C,IAAI,CAACC,aAAa,GAAGL,gBAAgB;MACrC,IAAI,CAACO,eAAe,CAAC,CAAC;IACvB;EACD,CAAC;EAGDnwB,QAAQ,CAAC0vB,MAAM,GAAG1vB,QAAQ,CAACO,OAAO,CAACmvB,MAAM,EAAE,eAAe,CAAC;AAC5D,CAAC,EAAC,CAAC;;AAEH;AACA;AACA;;AAEC,aAAW;EACX,YAAY;;EAGb;EACC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACC,SAASoB,KAAKA,CAACnN,QAAQ,EAAE;IACxB,IAAI,CAACqD,yBAAyB,CAAC,CAAC;;IAGjC;IACC;AACF;AACA;AACA;AACA;IACE,IAAI,CAACrD,QAAQ,GAAGA,QAAQ,GAAGA,QAAQ,GAAG,IAAI3jB,QAAQ,CAACkV,QAAQ,CAAC,CAAC;EAC9D;EACA,IAAI9S,CAAC,GAAGpC,QAAQ,CAACC,MAAM,CAAC6wB,KAAK,EAAE9wB,QAAQ,CAAC0hB,aAAa,CAAC;;EAEtD;EACA;;EAGD;EACC;AACD;AACA;AACA;AACA;AACA;AACA;EACCtf,CAAC,CAACmhB,SAAS,GAAG,YAAW;IACxB,IAAI8D,UAAU,GAAG,IAAI,CAAC1F,WAAW,IAAK,IAAI,CAACgC,QAAQ,IAAI,CAAC,IAAI,CAACA,QAAQ,CAAChU,OAAO,CAAC,CAAE;IAChF,OAAO,CAAC,EAAE,IAAI,CAACvB,OAAO,IAAI,IAAI,CAACC,KAAK,GAAG,CAAC,IAAI,IAAI,CAAC5B,MAAM,IAAI,CAAC,IAAI,IAAI,CAACC,MAAM,IAAI,CAAC,IAAI2a,UAAU,CAAC;EAChG,CAAC;;EAED;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACCjlB,CAAC,CAAC6U,IAAI,GAAG,UAASC,GAAG,EAAEsM,WAAW,EAAE;IACnC,IAAI,IAAI,CAAC8D,kBAAkB,CAACpQ,GAAG,EAAEsM,WAAW,CAAC,EAAE;MAAE,OAAO,IAAI;IAAE;IAC9D,IAAI,CAACG,QAAQ,CAAC1M,IAAI,CAACC,GAAG,EAAE,IAAI,CAAC;IAC7B,OAAO,IAAI;EACZ,CAAC;;EAED;AACD;AACA;AACA;AACA;AACA;AACA;EACC9U,CAAC,CAACK,KAAK,GAAG,UAAS0mB,SAAS,EAAE;IAC7B,IAAIhT,CAAC,GAAIgT,SAAS,IAAI,IAAI,CAACxF,QAAQ,GAAI,IAAI,CAACA,QAAQ,CAAClhB,KAAK,CAAC,CAAC,GAAG,IAAI,CAACkhB,QAAQ;IAC5E,OAAQ,IAAI,CAAC+B,WAAW,CAAC,IAAIoL,KAAK,CAAC3a,CAAC,CAAC,CAAC;EACvC,CAAC;;EAED;AACD;AACA;AACA;AACA;EACC/T,CAAC,CAACQ,QAAQ,GAAG,YAAW;IACvB,OAAO,eAAe,GAAG,IAAI,CAACiQ,IAAI,GAAE,IAAI;EACzC,CAAC;EAGD7S,QAAQ,CAAC8wB,KAAK,GAAG9wB,QAAQ,CAACO,OAAO,CAACuwB,KAAK,EAAE,eAAe,CAAC;AAC1D,CAAC,EAAC,CAAC;;AAEH;AACA;AACA;;AAEC,aAAW;EACX,YAAY;;EAGb;EACC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACC,SAASC,IAAIA,CAACC,IAAI,EAAEC,IAAI,EAAE9f,KAAK,EAAE;IAChC,IAAI,CAAC6V,yBAAyB,CAAC,CAAC;;IAGjC;IACC;AACF;AACA;AACA;AACA;IACE,IAAI,CAACgK,IAAI,GAAGA,IAAI;;IAEhB;AACF;AACA;AACA;AACA;IACE,IAAI,CAACC,IAAI,GAAGA,IAAI;;IAEhB;AACF;AACA;AACA;AACA;AACA;IACE,IAAI,CAAC9f,KAAK,GAAGA,KAAK;;IAElB;AACF;AACA;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAAC+f,SAAS,GAAG,MAAM;;IAEvB;AACF;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,YAAY,GAAG,KAAK;;IAEzB;AACF;AACA;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,QAAQ,GAAG,IAAI;;IAEpB;AACF;AACA;AACA;AACA;IACE,IAAI,CAACC,OAAO,GAAG,CAAC;;IAEhB;AACF;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,UAAU,GAAG,CAAC;;IAEnB;AACF;AACA;AACA;AACA;AACA;IACE,IAAI,CAACpR,SAAS,GAAG,IAAI;EACtB;EACA,IAAI9d,CAAC,GAAGpC,QAAQ,CAACC,MAAM,CAAC8wB,IAAI,EAAE/wB,QAAQ,CAAC0hB,aAAa,CAAC;;EAErD;EACA;;EAGD;EACC;AACD;AACA;AACA;AACA;EACC,IAAI/K,MAAM,GAAI3W,QAAQ,CAAC4W,YAAY,GAAC5W,QAAQ,CAAC4W,YAAY,CAAC,CAAC,GAACvD,QAAQ,CAACC,aAAa,CAAC,QAAQ,CAAE;EAC7F,IAAIqD,MAAM,CAACpD,UAAU,EAAE;IAAEwd,IAAI,CAACQ,eAAe,GAAG5a,MAAM,CAACpD,UAAU,CAAC,IAAI,CAAC;IAAEoD,MAAM,CAAChI,KAAK,GAAGgI,MAAM,CAAC/H,MAAM,GAAG,CAAC;EAAE;;EAG5G;EACC;AACD;AACA;AACA;AACA;AACA;AACA;EACCmiB,IAAI,CAACS,SAAS,GAAG;IAACC,KAAK,EAAE,CAAC;IAAE3iB,IAAI,EAAE,CAAC;IAAE4iB,MAAM,EAAE,CAAC,GAAG;IAAEd,GAAG,EAAE,CAAC,CAAC;IAAE5hB,KAAK,EAAE,CAAC;EAAC,CAAC;;EAEtE;AACD;AACA;AACA;AACA;AACA;AACA;EACC+hB,IAAI,CAACY,SAAS,GAAG;IAACltB,GAAG,EAAE,CAAC;IAAEmtB,OAAO,EAAE,CAAC,IAAI;IAAEC,MAAM,EAAE,CAAC,GAAG;IAAEC,UAAU,EAAE,CAAC,GAAG;IAAEC,WAAW,EAAE,CAAC,IAAI;IAAEhjB,MAAM,EAAE,CAAC;EAAC,CAAC;;EAG1G;EACC;AACD;AACA;AACA;AACA;AACA;AACA;EACC3M,CAAC,CAACmhB,SAAS,GAAG,YAAW;IACxB,IAAI8D,UAAU,GAAG,IAAI,CAAC1F,WAAW,IAAK,IAAI,CAACqP,IAAI,IAAI,IAAI,IAAI,IAAI,CAACA,IAAI,KAAK,EAAG;IAC5E,OAAO,CAAC,EAAE,IAAI,CAAC5iB,OAAO,IAAI,IAAI,CAACC,KAAK,GAAG,CAAC,IAAI,IAAI,CAAC5B,MAAM,IAAI,CAAC,IAAI,IAAI,CAACC,MAAM,IAAI,CAAC,IAAI2a,UAAU,CAAC;EAChG,CAAC;;EAED;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACCjlB,CAAC,CAAC6U,IAAI,GAAG,UAASC,GAAG,EAAEsM,WAAW,EAAE;IACnC,IAAI,IAAI,CAAC8D,kBAAkB,CAACpQ,GAAG,EAAEsM,WAAW,CAAC,EAAE;MAAE,OAAO,IAAI;IAAE;IAE9D,IAAIwO,GAAG,GAAG,IAAI,CAAC7gB,KAAK,IAAI,MAAM;IAC9B,IAAI,IAAI,CAACkgB,OAAO,EAAE;MAAEna,GAAG,CAAC8I,WAAW,GAAGgS,GAAG;MAAE9a,GAAG,CAACgJ,SAAS,GAAG,IAAI,CAACmR,OAAO,GAAC,CAAC;IAAE,CAAC,MACvE;MAAEna,GAAG,CAACoI,SAAS,GAAG0S,GAAG;IAAE;IAE5B,IAAI,CAACC,SAAS,CAAC,IAAI,CAACC,YAAY,CAAChb,GAAG,CAAC,CAAC;IACtC,OAAO,IAAI;EACZ,CAAC;;EAED;AACD;AACA;AACA;AACA;EACC9U,CAAC,CAAC+vB,gBAAgB,GAAG,YAAW;IAC/B,OAAO,IAAI,CAACC,iBAAiB,CAAC,IAAI,CAACpB,IAAI,CAAC;EACzC,CAAC;;EAED;AACD;AACA;AACA;AACA;AACA;AACA;EACC5uB,CAAC,CAACiwB,qBAAqB,GAAG,YAAW;IACpC,OAAO,IAAI,CAACD,iBAAiB,CAAC,GAAG,CAAC,GAAC,GAAG;EACvC,CAAC;;EAED;AACD;AACA;AACA;AACA;AACA;AACA;EACChwB,CAAC,CAACkwB,iBAAiB,GAAG,YAAW;IAChC,OAAO,IAAI,CAACL,SAAS,CAAC,IAAI,EAAC,CAAC,CAAC,CAAC,CAACrjB,MAAM;EACtC,CAAC;;EAED;AACD;AACA;EACCxM,CAAC,CAACkjB,SAAS,GAAG,YAAW;IACxB,IAAIlW,IAAI,GAAG,IAAI,CAACua,uBAAuB,CAAC,CAAC;IACzC,IAAIva,IAAI,EAAE;MAAE,OAAOA,IAAI;IAAE;IACzB,IAAI,IAAI,CAAC4hB,IAAI,IAAI,IAAI,IAAI,IAAI,CAACA,IAAI,KAAK,EAAE,EAAE;MAAE,OAAO,IAAI;IAAE;IAC1D,IAAI5wB,CAAC,GAAG,IAAI,CAAC6xB,SAAS,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC;IAChC,IAAInZ,CAAC,GAAI,IAAI,CAACsY,QAAQ,IAAI,IAAI,CAACA,QAAQ,GAAGhxB,CAAC,CAACuO,KAAK,GAAI,IAAI,CAACyiB,QAAQ,GAAGhxB,CAAC,CAACuO,KAAK;IAC5E,IAAI/D,CAAC,GAAGkO,CAAC,GAAGiY,IAAI,CAACS,SAAS,CAAC,IAAI,CAACN,SAAS,IAAE,MAAM,CAAC;IAClD,IAAII,UAAU,GAAG,IAAI,CAACA,UAAU,IAAE,IAAI,CAACe,qBAAqB,CAAC,CAAC;IAC9D,IAAIvnB,CAAC,GAAGwmB,UAAU,GAAGP,IAAI,CAACY,SAAS,CAAC,IAAI,CAACR,YAAY,IAAE,KAAK,CAAC;IAC7D,OAAO,IAAI,CAACvO,UAAU,CAAClX,SAAS,CAACd,CAAC,EAAEE,CAAC,EAAEgO,CAAC,EAAE1Y,CAAC,CAACwO,MAAM,CAAC;EACpD,CAAC;;EAED;AACD;AACA;AACA;AACA;AACA;AACA;AACA;EACCxM,CAAC,CAACmwB,UAAU,GAAG,YAAW;IACzB,IAAInyB,CAAC,GAAG;MAACoyB,KAAK,EAAC;IAAE,CAAC;IAClBpyB,CAAC,CAACkxB,UAAU,GAAG,IAAI,CAACA,UAAU,IAAI,IAAI,CAACe,qBAAqB,CAAC,CAAC;IAC9DjyB,CAAC,CAACqyB,OAAO,GAAGryB,CAAC,CAACkxB,UAAU,GAAGP,IAAI,CAACY,SAAS,CAAC,IAAI,CAACR,YAAY,IAAE,KAAK,CAAC;IACnE,OAAO,IAAI,CAACc,SAAS,CAAC,IAAI,EAAE7xB,CAAC,EAAEA,CAAC,CAACoyB,KAAK,CAAC;EACxC,CAAC;;EAED;AACD;AACA;AACA;AACA;EACCpwB,CAAC,CAACK,KAAK,GAAG,YAAW;IACpB,OAAO,IAAI,CAACijB,WAAW,CAAC,IAAIqL,IAAI,CAAC,IAAI,CAACC,IAAI,EAAE,IAAI,CAACC,IAAI,EAAE,IAAI,CAAC9f,KAAK,CAAC,CAAC;EACpE,CAAC;;EAED;AACD;AACA;AACA;AACA;EACC/O,CAAC,CAACQ,QAAQ,GAAG,YAAW;IACvB,OAAO,cAAc,IAAI,IAAI,CAACouB,IAAI,CAAC3vB,MAAM,GAAG,EAAE,GAAG,IAAI,CAAC2vB,IAAI,CAAC0B,MAAM,CAAC,CAAC,EAAE,EAAE,CAAC,GAAC,KAAK,GAAG,IAAI,CAAC1B,IAAI,CAAC,GAAE,IAAI;EAClG,CAAC;;EAGF;EACC;AACD;AACA;AACA;AACA;AACA;EACC5uB,CAAC,CAACsjB,WAAW,GAAG,UAAStlB,CAAC,EAAE;IAC3B,IAAI,CAACowB,yBAAyB,CAACpwB,CAAC,CAAC;IACjCA,CAAC,CAAC8wB,SAAS,GAAG,IAAI,CAACA,SAAS;IAC5B9wB,CAAC,CAAC+wB,YAAY,GAAG,IAAI,CAACA,YAAY;IAClC/wB,CAAC,CAACgxB,QAAQ,GAAG,IAAI,CAACA,QAAQ;IAC1BhxB,CAAC,CAACixB,OAAO,GAAG,IAAI,CAACA,OAAO;IACxBjxB,CAAC,CAACkxB,UAAU,GAAG,IAAI,CAACA,UAAU;IAC9BlxB,CAAC,CAAC8f,SAAS,GAAG,IAAI,CAACA,SAAS;IAC5B,OAAO9f,CAAC;EACT,CAAC;;EAED;AACD;AACA;AACA;AACA;AACA;EACCgC,CAAC,CAAC8vB,YAAY,GAAG,UAAShb,GAAG,EAAE;IAC9BA,GAAG,CAAC+Z,IAAI,GAAG,IAAI,CAACA,IAAI,IAAE,iBAAiB;IACvC/Z,GAAG,CAACga,SAAS,GAAG,IAAI,CAACA,SAAS,IAAE,MAAM;IACtCha,GAAG,CAACia,YAAY,GAAG,IAAI,CAACA,YAAY,IAAE,KAAK;IAC3C,OAAOja,GAAG;EACX,CAAC;;EAED;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACC9U,CAAC,CAAC6vB,SAAS,GAAG,UAAS/a,GAAG,EAAE9W,CAAC,EAAEoyB,KAAK,EAAE;IACrC,IAAIG,KAAK,GAAG,CAAC,CAACzb,GAAG;IACjB,IAAI,CAACyb,KAAK,EAAE;MACXzb,GAAG,GAAG6Z,IAAI,CAACQ,eAAe;MAC1Bra,GAAG,CAACsI,IAAI,CAAC,CAAC;MACV,IAAI,CAAC0S,YAAY,CAAChb,GAAG,CAAC;IACvB;IACA,IAAIoa,UAAU,GAAG,IAAI,CAACA,UAAU,IAAE,IAAI,CAACe,qBAAqB,CAAC,CAAC;IAE9D,IAAIO,IAAI,GAAG,CAAC;MAAE1e,KAAK,GAAG,CAAC;IACvB,IAAI2e,SAAS,GAAGC,MAAM,CAAC,IAAI,CAAC9B,IAAI,CAAC,CAAC+B,KAAK,CAAC,gBAAgB,CAAC;IACzD,KAAK,IAAI5xB,CAAC,GAAC,CAAC,EAAEC,CAAC,GAACyxB,SAAS,CAACxxB,MAAM,EAAEF,CAAC,GAACC,CAAC,EAAED,CAAC,EAAE,EAAE;MAC3C,IAAIsb,GAAG,GAAGoW,SAAS,CAAC1xB,CAAC,CAAC;MACtB,IAAI2X,CAAC,GAAG,IAAI;MAEZ,IAAI,IAAI,CAACoH,SAAS,IAAI,IAAI,IAAI,CAACpH,CAAC,GAAG5B,GAAG,CAAC8b,WAAW,CAACvW,GAAG,CAAC,CAAC9N,KAAK,IAAI,IAAI,CAACuR,SAAS,EAAE;QAChF;QACA,IAAI+S,KAAK,GAAGxW,GAAG,CAACsW,KAAK,CAAC,MAAM,CAAC;QAC7BtW,GAAG,GAAGwW,KAAK,CAAC,CAAC,CAAC;QACdna,CAAC,GAAG5B,GAAG,CAAC8b,WAAW,CAACvW,GAAG,CAAC,CAAC9N,KAAK;QAE9B,KAAK,IAAIukB,CAAC,GAAC,CAAC,EAAEC,EAAE,GAACF,KAAK,CAAC5xB,MAAM,EAAE6xB,CAAC,GAACC,EAAE,EAAED,CAAC,IAAE,CAAC,EAAE;UAC1C;UACA,IAAIE,KAAK,GAAGlc,GAAG,CAAC8b,WAAW,CAACC,KAAK,CAACC,CAAC,CAAC,GAAGD,KAAK,CAACC,CAAC,GAAC,CAAC,CAAC,CAAC,CAACvkB,KAAK;UACxD,IAAImK,CAAC,GAAGsa,KAAK,GAAG,IAAI,CAAClT,SAAS,EAAE;YAC/B,IAAIyS,KAAK,EAAE;cAAE,IAAI,CAACU,aAAa,CAACnc,GAAG,EAAEuF,GAAG,EAAEvI,KAAK,GAACod,UAAU,CAAC;YAAE;YAC7D,IAAIkB,KAAK,EAAE;cAAEA,KAAK,CAAC1uB,IAAI,CAAC2Y,GAAG,CAAC;YAAE;YAC9B,IAAI3D,CAAC,GAAG8Z,IAAI,EAAE;cAAEA,IAAI,GAAG9Z,CAAC;YAAE;YAC1B2D,GAAG,GAAGwW,KAAK,CAACC,CAAC,GAAC,CAAC,CAAC;YAChBpa,CAAC,GAAG5B,GAAG,CAAC8b,WAAW,CAACvW,GAAG,CAAC,CAAC9N,KAAK;YAC9BuF,KAAK,EAAE;UACR,CAAC,MAAM;YACNuI,GAAG,IAAIwW,KAAK,CAACC,CAAC,CAAC,GAAGD,KAAK,CAACC,CAAC,GAAC,CAAC,CAAC;YAC5Bpa,CAAC,IAAIsa,KAAK;UACX;QACD;MACD;MAEA,IAAIT,KAAK,EAAE;QAAE,IAAI,CAACU,aAAa,CAACnc,GAAG,EAAEuF,GAAG,EAAEvI,KAAK,GAACod,UAAU,CAAC;MAAE;MAC7D,IAAIkB,KAAK,EAAE;QAAEA,KAAK,CAAC1uB,IAAI,CAAC2Y,GAAG,CAAC;MAAE;MAC9B,IAAIrc,CAAC,IAAI0Y,CAAC,IAAI,IAAI,EAAE;QAAEA,CAAC,GAAG5B,GAAG,CAAC8b,WAAW,CAACvW,GAAG,CAAC,CAAC9N,KAAK;MAAE;MACtD,IAAImK,CAAC,GAAG8Z,IAAI,EAAE;QAAEA,IAAI,GAAG9Z,CAAC;MAAE;MAC1B5E,KAAK,EAAE;IACR;IAEA,IAAI9T,CAAC,EAAE;MACNA,CAAC,CAACuO,KAAK,GAAGikB,IAAI;MACdxyB,CAAC,CAACwO,MAAM,GAAGsF,KAAK,GAACod,UAAU;IAC5B;IACA,IAAI,CAACqB,KAAK,EAAE;MAAEzb,GAAG,CAACwI,OAAO,CAAC,CAAC;IAAE;IAC7B,OAAOtf,CAAC;EACT,CAAC;;EAED;AACD;AACA;AACA;AACA;AACA;AACA;EACCgC,CAAC,CAACixB,aAAa,GAAG,UAASnc,GAAG,EAAE8Z,IAAI,EAAElmB,CAAC,EAAE;IACxC;IACA,IAAI,IAAI,CAACumB,OAAO,EAAE;MAAEna,GAAG,CAACoc,UAAU,CAACtC,IAAI,EAAE,CAAC,EAAElmB,CAAC,EAAE,IAAI,CAACsmB,QAAQ,IAAE,MAAM,CAAC;IAAE,CAAC,MACnE;MAAEla,GAAG,CAACqc,QAAQ,CAACvC,IAAI,EAAE,CAAC,EAAElmB,CAAC,EAAE,IAAI,CAACsmB,QAAQ,IAAE,MAAM,CAAC;IAAE;EACzD,CAAC;;EAGD;AACD;AACA;AACA;AACA;EACChvB,CAAC,CAACgwB,iBAAiB,GAAG,UAASpB,IAAI,EAAE;IACpC,IAAI9Z,GAAG,GAAG6Z,IAAI,CAACQ,eAAe;IAC9Bra,GAAG,CAACsI,IAAI,CAAC,CAAC;IACV,IAAI1G,CAAC,GAAG,IAAI,CAACoZ,YAAY,CAAChb,GAAG,CAAC,CAAC8b,WAAW,CAAChC,IAAI,CAAC,CAACriB,KAAK;IACtDuI,GAAG,CAACwI,OAAO,CAAC,CAAC;IACb,OAAO5G,CAAC;EACT,CAAC;EAGD9Y,QAAQ,CAAC+wB,IAAI,GAAG/wB,QAAQ,CAACO,OAAO,CAACwwB,IAAI,EAAE,eAAe,CAAC;AACxD,CAAC,EAAC,CAAC;;AAEH;AACA;AACA;;AAEC,aAAY;EACZ,YAAY;;EAGb;EACC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACC,SAASyC,UAAUA,CAACxC,IAAI,EAAErB,WAAW,EAAE;IACtC,IAAI,CAAC9F,qBAAqB,CAAC,CAAC;;IAG7B;IACC;AACF;AACA;AACA;AACA;AACA;IACE,IAAI,CAACmH,IAAI,GAAGA,IAAI,IAAE,EAAE;;IAEpB;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAACrB,WAAW,GAAGA,WAAW;;IAE9B;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAAC2B,UAAU,GAAG,CAAC;;IAEnB;AACF;AACA;AACA;AACA;AACA;IACE,IAAI,CAACmC,aAAa,GAAG,CAAC;;IAEtB;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,UAAU,GAAG,CAAC;;IAGpB;IACE;AACH;AACA;AACA;AACA;IACE,IAAI,CAACC,SAAS,GAAG;MAAC3C,IAAI,EAAC,CAAC;MAACrB,WAAW,EAAC,CAAC;MAAC2B,UAAU,EAAC,CAAC;MAACmC,aAAa,EAAC,CAAC;MAACC,UAAU,EAAC;IAAC,CAAC;EAClF;EACA,IAAItxB,CAAC,GAAGpC,QAAQ,CAACC,MAAM,CAACuzB,UAAU,EAAExzB,QAAQ,CAAC+mB,SAAS,CAAC;;EAEvD;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACC;;EAED;EACC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACCyM,UAAU,CAACI,WAAW,GAAG,GAAG;;EAE5B;AACD;AACA;AACA;AAC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E,IAAI,CAACoD,IAAI,GAAGA,IAAI,IAAEssB,SAAS,CAACK,WAAW;;IAEvC;AACF;AACA;AACA;AACA;AACA;IACE,IAAI,CAACJ,aAAa,GAAGA,aAAa,IAAI,CAAC;;IAEvC;AACF;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,IAAI,GAAGA,IAAI;;IAEhB;AACF;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAACtF,YAAY,GAAG,CAAC;;IAErB;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAAC0F,QAAQ,GAAG,IAAIv1B,QAAQ,CAACw1B,QAAQ,CAAC,IAAI,EAAEJ,MAAM,EAAE;MAAChwB,MAAM,EAAC,IAAI;MAAEqwB,QAAQ,EAACP,aAAa;MAAEQ,QAAQ,EAAC;IAAI,CAAC,CAAC;;IAEzG;AACF;AACA;AACA;AACA;AACA;IACE,IAAI,CAACtwB,MAAM,GAAG,KAAK;;IAEnB;AACF;AACA;AACA;AACA;AACA;IACE,IAAI,CAACoL,cAAc,GAAG,IAAI;;IAE1B;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAACmlB,SAAS,GAAG,IAAI;;IAErB;AACF;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,WAAW,GAAG,IAAI,CAACA,WAAW,IAAE,IAAI,CAAC,CAAC;;IAE3C;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAAC/uB,SAAS,GAAG,IAAI;;IAGtB;IACC;AACF;AACA;AACA;AACA;AACA;IACE,IAAI,CAACgvB,YAAY,GAAG,CAAC;;IAErB;AACF;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,QAAQ,GAAG,CAAC,CAAC,CAAC,CAAC;;IAEpB;AACF;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,aAAa,GAAG,CAAC;;IAEtB;AACF;AACA;AACA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AACA;AACA;AACA;AACA;IACE,IAAI,CAAC4I,SAAS,GAAG,IAAI;;IAErB;AACF;AACA;AACA;AACA;IACE,IAAI,CAACrK,WAAW,GAAG,IAAI;;IAEvB;AACF;AACA;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAACpiB,KAAK,GAAG,CAAC;;IAEd;AACF;AACA;AACA;AACA;AACA;IACE,IAAI,CAAC0sB,OAAO,GAAG,CAAC;;IAEhB;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,SAAS,GAAG,GAAG;;IAEpB;AACF;AACA;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,QAAQ,GAAG,CAAC,CAAC;;IAElB;AACF;AACA;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAACtzB,SAAS,GAAGA,SAAS,IAAI,CAAC;;IAGhC;IACC;AACF;AACA;AACA;AACA;IACE,IAAI,CAAC8K,OAAO,GAAG,EAAE;;IAEjB;AACF;AACA;AACA;AACA;IACE,IAAI,CAACD,WAAW,GAAG,CAAC,CAAC;;IAErB;AACF;AACA;AACA;AACA;IACE,IAAI,CAACG,KAAK,GAAG,IAAI;;IAEjB;AACF;AACA;AACA;AACA;IACE,IAAI,CAACuoB,eAAe,GAAG,CAAC;;IAExB;AACF;AACA;AACA;AACA;IACE,IAAI,CAACC,MAAM,GAAG,CAAC;;IAEf;AACF;AACA;AACA;AACA;IACE,IAAI,CAACC,QAAQ,GAAG,IAAI;;IAEpB;AACF;AACA;AACA;AACA;IACE,IAAI,CAACC,MAAM,GAAG,CAAC;EAChB;EACA,IAAIn4B,CAAC,GAAGpC,QAAQ,CAACC,MAAM,CAAC85B,kBAAkB,EAAE/5B,QAAQ,CAAC6C,eAAe,CAAC;;EAErE;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACC;;EAGD;EACCk3B,kBAAkB,CAACS,cAAc,GAAG,oDAAoD;EACxFT,kBAAkB,CAACU,WAAW,GAAG,4BAA4B;;EAE9D;EACC;AACD;AACA;AACA;AACA;AACA;AACA;;EAEC;AACD;AA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EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,CAAC,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC,CAAC;;EAEpuC;AACD;AACA;AACA;AACA;AACA;AACA;EACCJ,UAAU,CAACK,SAAS,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,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A;AACA;AACA;AACA;IACE,IAAI,CAAC54B,IAAI,GAAGA,IAAI;;IAEhB;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAACuwC,eAAe,GAAG,IAAI;;IAE3B;IACA;AACF;AACA;AACA;AACA;AACA;AACA;IACE,IAAIH,QAAQ,EAAE;MACb,IAAI,CAACI,KAAK,GAAG/xC,QAAQ,CAACguC,QAAQ,CAACS,MAAM,CAACkD,QAAQ,CAAC;IAChD,CAAC,MAAM;MACN,IAAI,CAACI,KAAK,GAAG,IAAI;IAClB;;IAEA;AACF;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,UAAU,GAAGJ,SAAS;;IAE3B;AACF;AACA;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAACK,OAAO,GAAG,IAAI;;IAEnB;AACF;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,UAAU,GAAG,IAAI;;IAEtB;AACF;AACA;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,YAAY,GAAG,IAAI;;IAExB;AACF;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,gBAAgB,GAAG,IAAI;;IAE5B;AACF;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,IAAI,GAAG,IAAI;EACjB;EAAC;EAED,IAAIjwC,CAAC,GAAGpC,QAAQ,CAACC,MAAM,CAACqwC,cAAc,EAAEtwC,QAAQ,CAAC6C,eAAe,CAAC;EACjE,IAAIob,CAAC,GAAGqyB,cAAc;;EAEtB;EACA;;EAGA;AACD;AACA;AACA;AACA;AACA;AACA;EACCryB,CAAC,CAACq0B,IAAI,GAAG,MAAM;;EAEf;AACD;AACA;AACA;AACA;AACA;AACA;EACCr0B,CAAC,CAACiwB,GAAG,GAAG,KAAK;;EAEb;AACD;AACA;AACA;AACA;AACA;AACA;AACA;EACCjwB,CAAC,CAACuyB,MAAM,GAAG,QAAQ;;EAEnB;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACCvyB,CAAC,CAACkzB,GAAG,GAAG,KAAK;;EAEb;AACD;AACA;AACA;AACA;AACA;AACA;AACA;EACClzB,CAAC,CAACsyB,KAAK,GAAG,OAAO;;EAEjB;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACCtyB,CAAC,CAACozB,UAAU,GAAG,YAAY;;EAE3B;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACCpzB,CAAC,CAACwuB,IAAI,GAAG,MAAM;;EAEf;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACCxuB,CAAC,CAACs0B,KAAK,GAAG,OAAO;;EAEjB;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACCt0B,CAAC,CAACgzB,QAAQ,GAAG,UAAU;;EAEvB;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACChzB,CAAC,CAACuzB,KAAK,GAAG,OAAO;;EAEjB;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACCvzB,CAAC,CAACwzB,KAAK,GAAG,OAAO;;EAEjB;AACD;AACA;AACA;AACA;AACA;AACA;AACA;EACCxzB,CAAC,CAACqzB,WAAW,GAAG,aAAa;;EAE7B;AACD;AACA;AACA;AACA;AACA;AACA;AACA;EACCrzB,CAAC,CAACmzB,GAAG,GAAG,KAAK;;EAEb;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACCnzB,CAAC,CAAC+yB,IAAI,GAAG,MAAM;;EAEf;AACD;AACA;AACA;AACA;AACA;AACA;AACA;EACC/yB,CAAC,CAACizB,GAAG,GAAG,KAAK;;EAEd;EACC;AACD;AACA;AACA;AACA;AACA;;EAEC;AACD;AACA;AACA;AACA;AACA;AACA;;EAEC;AACD;AACA;AACA;AACA;AACA;AACA;;EAEC;AACD;AACA;AACA;AACA;AACA;AACA;;EAEC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;EAEC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;EAEC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;;EAGC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACC9uC,CAAC,CAACowC,OAAO,GAAG,YAAY;IACvB,OAAO,IAAI,CAACT,KAAK;EAClB,CAAC;;EAED;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACC3vC,CAAC,CAACqwC,SAAS,GAAG,UAAUC,GAAG,EAAE;IAC5B,OAAOA,GAAG,GAAG,IAAI,CAACR,UAAU,GAAG,IAAI,CAACD,OAAO;EAC5C,CAAC;;EAED;AACD;AACA;AACA;AACA;AACA;EACC7vC,CAAC,CAACuwC,MAAM,GAAG,YAAY;IACtB,OAAO,IAAI,CAACN,IAAI;EACjB,CAAC;;EAED;AACD;AACA;AACA;AACA;AACA;EACCjwC,CAAC,CAACwwC,MAAM,GAAG,UAASC,GAAG,EAAE;IACvB,IAAI,CAACR,IAAI,GAAGQ,GAAG;EACjB,CAAC;;EAED;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACCzwC,CAAC,CAAC0wC,IAAI,GAAG,YAAY;IACpB,IAAI,CAACC,cAAc,CAAC,CAAC;IAErB,IAAI,CAACC,QAAQ,CAAC9vC,EAAE,CAAC,UAAU,EAAE,IAAI,EAAE,IAAI,CAAC;IACxC,IAAI,CAAC8vC,QAAQ,CAAC9vC,EAAE,CAAC,UAAU,EAAE,IAAI,EAAE,IAAI,CAAC;IACxC,IAAI,CAAC8vC,QAAQ,CAAC9vC,EAAE,CAAC,WAAW,EAAE,IAAI,EAAE,IAAI,CAAC;IACzC,IAAI,CAAC8vC,QAAQ,CAAC9vC,EAAE,CAAC,OAAO,EAAE,IAAI,EAAE,IAAI,CAAC;IACrC,IAAI,CAAC8vC,QAAQ,CAAC9vC,EAAE,CAAC,SAAS,EAAE,IAAI,EAAE,IAAI,CAAC;IACvC,IAAI,CAAC8vC,QAAQ,CAAC9vC,EAAE,CAAC,OAAO,EAAE,IAAI,EAAE,IAAI,CAAC;IAErC,IAAIiB,GAAG,GAAG,IAAInE,QAAQ,CAACsB,KAAK,CAAC,YAAY,CAAC;IAC1C6C,GAAG,CAAC8uC,MAAM,GAAG,IAAI,CAACD,QAAQ;IAC1B,IAAI,CAACzvC,aAAa,CAACY,GAAG,CAAC;IAEvB,IAAI,CAAC6uC,QAAQ,CAACF,IAAI,CAAC,CAAC;EACrB,CAAC;;EAED;AACD;AACA;AACA;AACA;EACC1wC,CAAC,CAAC8wC,MAAM,GAAG,YAAY;IACtB,IAAI,CAACrB,QAAQ,GAAG,IAAI;IACpB,IAAI,CAACsB,OAAO,CAAC,CAAC;EACf,CAAC;;EAED;AACD;AACA;AACA;EACC/wC,CAAC,CAAC+wC,OAAO,GAAG,YAAW;IACtB,IAAI,IAAI,CAACH,QAAQ,EAAE;MAClB,IAAI,CAACA,QAAQ,CAAC3vC,uBAAuB,CAAC,CAAC;MACvC,IAAI,CAAC2vC,QAAQ,CAACG,OAAO,CAAC,CAAC;IACxB;IAEA,IAAI,CAACH,QAAQ,GAAG,IAAI;IAEpB,IAAI,CAACjB,KAAK,GAAG,IAAI;IACjB,IAAI,CAACG,UAAU,GAAG,IAAI;IACtB,IAAI,CAACD,OAAO,GAAG,IAAI;IAEnB,IAAI,CAACmB,UAAU,GAAG,IAAI;IAEtB,IAAI,CAAC/vC,uBAAuB,CAAC,CAAC;EAC/B,CAAC;;EAED;AACD;AACA;AACA;AACA;AACA;AACA;EACCjB,CAAC,CAACixC,cAAc,GAAG,YAAY;IAC9B,OAAO,IAAI,CAAClB,YAAY;EACzB,CAAC;;EAGD;EACA;AACD;AACA;AACA;AACA;AACA;AACA;AACA;EACC/vC,CAAC,CAAC2wC,cAAc,GAAG,YAAW;IAC7B,IAAI,CAAC,IAAI,CAACf,UAAU,EAAE;MACrB,IAAI,CAACgB,QAAQ,GAAG,IAAIhzC,QAAQ,CAACszC,UAAU,CAAC,IAAI,CAACvB,KAAK,EAAE,IAAI,CAACM,IAAI,IAAI,IAAI,CAACkB,UAAU,CAAC,CAAC,EAAE,IAAI,CAACnB,gBAAgB,CAAC;IAC3G,CAAC,MAAM;MACN,IAAI,CAACY,QAAQ,GAAG,IAAIhzC,QAAQ,CAACwzC,UAAU,CAAC,IAAI,CAACzB,KAAK,CAAC;IACpD;EACD,CAAC;;EAED;AACD;AACA;AACA;AACA;AACA;AACA;AACA;EACC3vC,CAAC,CAACmxC,UAAU,GAAG,UAASngC,GAAG,EAAE;IAAE,OAAO,IAAI;EAAE,CAAC;;EAE7C;AACD;AACA;AACA;AACA;AACA;EACChR,CAAC,CAACqxC,cAAc,GAAG,YAAY;IAC9B,IAAI,IAAI,CAACC,WAAW,CAAC,CAAC,EAAE;MAAE;IAAQ;IAClC,IAAI,CAACnwC,aAAa,CAAC,WAAW,CAAC;EAChC,CAAC;;EAED;AACD;AACA;AACA;AACA;AACA;AACA;EACCnB,CAAC,CAACuxC,aAAa,GAAG,UAAUltC,KAAK,EAAE;IAClC,IAAI,IAAI,CAACitC,WAAW,CAAC,CAAC,EAAE;MAAE;IAAQ;IAClC,IAAItqC,KAAK,GAAG,IAAI;IAChB,IAAI,OAAO3C,KAAM,IAAI,QAAQ,EAAE;MAC9B,IAAI,CAAC0zB,QAAQ,GAAG1zB,KAAK;MACrB2C,KAAK,GAAG,IAAIpJ,QAAQ,CAACymC,aAAa,CAAC,IAAI,CAACtM,QAAQ,CAAC;IAClD,CAAC,MAAM;MACN/wB,KAAK,GAAG3C,KAAK;MACb,IAAI,CAAC0zB,QAAQ,GAAG1zB,KAAK,CAACigC,MAAM,GAAGjgC,KAAK,CAACkgC,KAAK;MAC1Cv9B,KAAK,CAAC+wB,QAAQ,GAAG,IAAI,CAACA,QAAQ;MAC9B,IAAI/Z,KAAK,CAAC,IAAI,CAAC+Z,QAAQ,CAAC,IAAI,IAAI,CAACA,QAAQ,IAAIyZ,QAAQ,EAAE;QAAE,IAAI,CAACzZ,QAAQ,GAAG,CAAC;MAAE;IAC7E;IACA,IAAI,CAAC72B,gBAAgB,CAAC,UAAU,CAAC,IAAI,IAAI,CAACC,aAAa,CAAC6F,KAAK,CAAC;EAC/D,CAAC;;EAED;AACD;AACA;AACA;AACA;EACChH,CAAC,CAACyxC,aAAa,GAAG,YAAY;IAC7B,IAAI,IAAI,CAACH,WAAW,CAAC,CAAC,EAAE;MAAE;IAAQ;IAElC,IAAI,CAAChN,MAAM,GAAG,IAAI;IAElB,IAAIt9B,KAAK,GAAG,IAAIpJ,QAAQ,CAACsB,KAAK,CAAC,UAAU,CAAC;IAC1C8H,KAAK,CAAC0qC,SAAS,GAAG,IAAI,CAAC5B,UAAU;IAEjC,IAAI,IAAI,CAACD,OAAO,IAAI,IAAI,EAAE;MACzB7oC,KAAK,CAACsgB,MAAM,GAAG,IAAI,CAACuoB,OAAO;IAC5B;IAEA,IAAI,CAAC1uC,aAAa,CAAC6F,KAAK,CAAC;EAC1B,CAAC;;EAED;AACD;AACA;AACA;AACA;AACA;AACA;EACChH,CAAC,CAAC2xC,UAAU,GAAG,UAAU3qC,KAAK,EAAE;IAC/B,IAAI,IAAI,CAACsqC,WAAW,CAAC,CAAC,IAAI,CAAC,IAAI,CAACpwC,gBAAgB,CAAC,OAAO,CAAC,EAAE;MAAE;IAAQ;IACrE,IAAI8F,KAAK,IAAI,IAAI,EAAE;MAClBA,KAAK,GAAG,IAAIpJ,QAAQ,CAACsmC,UAAU,CAAC,qBAAqB,CAAC,CAAC,CAAC;IACzD;;IACA,IAAI,CAAC/iC,aAAa,CAAC6F,KAAK,CAAC;EAC1B,CAAC;;EAED;AACD;AACA;AACA;AACA;AACA;AACA;EACChH,CAAC,CAACsxC,WAAW,GAAG,YAAY;IAC3B,IAAIvsC,MAAM,CAACnH,QAAQ,IAAI,IAAI,IAAI,IAAI,CAAC6xC,QAAQ,EAAE;MAC7C,OAAO,IAAI;IACZ;IACA,OAAO,KAAK;EACb,CAAC;;EAED;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACCzvC,CAAC,CAAC0vC,eAAe,GAAG,IAAI;;EAExB;AACD;AACA;AACA;AACA;AACA;AACA;AACA;EACC1vC,CAAC,CAAC8B,WAAW,GAAG,UAAUkF,KAAK,EAAE;IAChC,QAAQA,KAAK,CAAC7H,IAAI;MACjB,KAAK,UAAU;QACd,IAAI,CAAC2wC,UAAU,GAAG9oC,KAAK,CAAC1H,MAAM,CAACsyC,SAAS;QACxC,IAAItqB,MAAM,GAAG,IAAI,CAACooB,eAAe,IAAI,IAAI,CAACA,eAAe,CAAC,IAAI,CAAC;QAC/D,IAAIpoB,MAAM,YAAYuqB,QAAQ,EAAE;UAC/BvqB,MAAM,CAACtlB,IAAI,CAAC,IAAI,EACdpE,QAAQ,CAACmmC,KAAK,CAAC,IAAI,CAAC+N,oBAAoB,EAAE,IAAI,CAAC,EAC/Cl0C,QAAQ,CAACmmC,KAAK,CAAC,IAAI,CAACgO,mBAAmB,EAAE,IAAI,CAC/C,CAAC;QACF,CAAC,MAAM;UACN,IAAI,CAAClC,OAAO,GAAIvoB,MAAM,IAAI,IAAI,CAACwoB,UAAU;UACzC,IAAI,CAAC2B,aAAa,CAAC,CAAC;QACrB;QACA;MACD,KAAK,UAAU;QACd,IAAI,CAACF,aAAa,CAACvqC,KAAK,CAAC;QACzB;MACD,KAAK,OAAO;QACX,IAAI,CAAC2qC,UAAU,CAAC3qC,KAAK,CAAC;QACtB;MACD,KAAK,WAAW;QACf,IAAI,CAACqqC,cAAc,CAAC,CAAC;QACrB;MACD,KAAK,OAAO;MACZ,KAAK,SAAS;QACb,IAAI,CAAC,IAAI,CAACC,WAAW,CAAC,CAAC,EAAE;UACxB,IAAI,CAACnwC,aAAa,CAAC,IAAIvD,QAAQ,CAACsmC,UAAU,CAAC,UAAU,GAAGl9B,KAAK,CAAC7H,IAAI,CAAC6yB,WAAW,CAAC,CAAC,GAAG,QAAQ,CAAC,CAAC;QAC9F;QACA;IACF;EACD,CAAC;;EAED;AACD;AACA;AACA;AACA;AACA;AACA;EACChyB,CAAC,CAAC8xC,oBAAoB,GAAG,UAAUxqB,MAAM,EAAE;IAC1C,IAAI,CAACuoB,OAAO,GAAGvoB,MAAM;IACrB,IAAI,CAACmqB,aAAa,CAAC,CAAC;EACrB,CAAC;;EAED;AACD;AACA;AACA;AACA;AACA;AACA;EACCzxC,CAAC,CAAC+xC,mBAAmB,GAAG,UAAU/qC,KAAK,EAAE;IACxC,IAAI,CAAC2qC,UAAU,CAAC3qC,KAAK,CAAC;EACvB,CAAC;;EAED;AACD;AACA;AACA;AACA;AACA;EACChH,CAAC,CAACstC,SAAS,GAAG,UAAUt8B,GAAG,EAAEnP,IAAI,EAAE;IAClC,OAAOjE,QAAQ,CAAC0xC,YAAY,CAAChC,SAAS,CAACt8B,GAAG,EAAEnP,IAAI,CAAC;EAClD,CAAC;;EAED;AACD;AACA;AACA;EACC7B,CAAC,CAACQ,QAAQ,GAAG,YAAY;IACxB,OAAO,4BAA4B;EACpC,CAAC;EAED5C,QAAQ,CAACswC,cAAc,GAAGtwC,QAAQ,CAACO,OAAO,CAAC+vC,cAAc,EAAE,iBAAiB,CAAC;AAE9E,CAAC,EAAC,CAAC;;AAEH;AACA;AACA;;AAEC,aAAY;EACZ,YAAY;;EAEZ;EACA;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACC,SAAS8D,mBAAmBA,CAACzC,QAAQ,EAAEC,SAAS,EAAErwC,IAAI,EAAE;IACvD,IAAI,CAAC8yC,0BAA0B,CAAC1C,QAAQ,EAAEC,SAAS,EAAErwC,IAAI,CAAC;;IAE1D;IACA,IAAI,CAACuwC,eAAe,GAAG,IAAI,CAACwC,aAAa;;IAEzC;IACA,IAAI,CAAClC,gBAAgB,GAAG,KAAK;IAEvB,IAAI,CAAClvC,EAAE,CAAC,YAAY,EAAE,IAAI,CAACqxC,UAAU,EAAE,IAAI,CAAC;EACnD;EAAC;EAED,IAAInyC,CAAC,GAAGpC,QAAQ,CAACC,MAAM,CAACm0C,mBAAmB,EAAEp0C,QAAQ,CAACswC,cAAc,CAAC;;EAErE;EACA;EACAluC,CAAC,CAAC0wC,IAAI,GAAG,YAAY;IACpB;IACA,IAAI,CAAC,IAAI,CAACT,IAAI,EAAE;MACf,IAAI,CAACA,IAAI,GAAG,IAAI,CAACkB,UAAU,CAAC,IAAI,CAACxB,KAAK,CAAC3+B,GAAG,CAAC;IAC5C;IAEA,IAAI,CAACi/B,IAAI,CAACmC,OAAO,GAAG,MAAM;IAC1B,IAAI,CAACnC,IAAI,CAACS,IAAI,CAAC,CAAC;IAEhB,IAAI,CAAC2B,mBAAmB,CAAC,CAAC;EAC3B,CAAC;;EAED;EACA;AACD;AACA;AACA;AACA;EACCryC,CAAC,CAACmxC,UAAU,GAAG,YAAY,CAAC,CAAC;EAG7BnxC,CAAC,CAAC2wC,cAAc,GAAG,YAAW;IAC7B,IAAI,CAAC,IAAI,CAACf,UAAU,EAAE;MACrB,IAAI,CAACgB,QAAQ,GAAG,IAAIhzC,QAAQ,CAAC00C,eAAe,CAAC,IAAI,CAAC3C,KAAK,EAAE,IAAI,CAACM,IAAI,IAAI,IAAI,CAACkB,UAAU,CAAC,CAAC,EAAE,IAAI,CAACnB,gBAAgB,CAAC;IAChH,CAAC,MAAM;MACN,IAAI,CAACY,QAAQ,GAAG,IAAIhzC,QAAQ,CAACwzC,UAAU,CAAC,IAAI,CAACzB,KAAK,CAAC;IACpD;EACD,CAAC;;EAEE;EACA;AACJ;AACA;AACA;AACA;AACA;EACI3vC,CAAC,CAACmyC,UAAU,GAAG,UAAUnrC,KAAK,EAAE;IAC5B;IACA,IAAIA,KAAK,CAAC6pC,MAAM,CAAC0B,eAAe,EAAE;MAC9BvrC,KAAK,CAAC6pC,MAAM,CAAC0B,eAAe,CAAC,MAAM,CAAC;IACxC;EACJ,CAAC;;EAEJ;AACD;AACA;AACA;AACA;AACA;AACA;EACCvyC,CAAC,CAACkyC,aAAa,GAAG,UAAUrB,MAAM,EAAE;IACnC,IAAI,CAACZ,IAAI,CAAClvC,mBAAmB,IAAI,IAAI,CAACkvC,IAAI,CAAClvC,mBAAmB,CAAC,gBAAgB,EAAE,IAAI,CAACyxC,cAAc,CAAC;IACrG,IAAI,CAACvC,IAAI,CAACwC,SAAS,GAAG,IAAI;IAC1B,IAAI,IAAI,CAAC7C,UAAU,EAAE;MACX,IAAI8C,GAAG,GAAG3tC,MAAM,CAAC2tC,GAAG,IAAI3tC,MAAM,CAAC4tC,SAAS;MACxC,IAAIrrB,MAAM,GAAGupB,MAAM,CAACR,SAAS,CAAC,IAAI,CAAC;MAE5CQ,MAAM,CAACN,MAAM,CAAC,CAAC,CAACv/B,GAAG,GAAG0hC,GAAG,CAACE,eAAe,CAACtrB,MAAM,CAAC;IAClD;IACA,OAAOupB,MAAM,CAACN,MAAM,CAAC,CAAC;EACvB,CAAC;EAED3yC,QAAQ,CAACo0C,mBAAmB,GAAGp0C,QAAQ,CAACO,OAAO,CAAC6zC,mBAAmB,EAAE,gBAAgB,CAAC;AAEvF,CAAC,EAAC,CAAC;;AAEH;AACA;AACA;;AAEC,aAAY;EACZ,YAAY;;EAEZ;AACD;AACA;AACA;AACA;AACA;AACA;AACA;EACC,IAAIa,eAAe,GAAG,SAAAA,CAAUvG,IAAI,EAAE;IACrC,IAAI,CAACqD,KAAK,GAAGrD,IAAI;EAClB,CAAC;EAED,IAAItsC,CAAC,GAAGpC,QAAQ,CAACC,MAAM,CAACg1C,eAAe,EAAEj1C,QAAQ,CAAC6C,eAAe,CAAC;;EAElE;EACA;AACD;AACA;AACA;EACCT,CAAC,CAAC0wC,IAAI,GAAI,YAAW,CAAC,CAAC;;EAEvB;AACD;AACA;AACA;EACC1wC,CAAC,CAAC+wC,OAAO,GAAG,YAAW,CAAC,CAAC;;EAEzB;AACD;AACA;AACA;EACC/wC,CAAC,CAAC8wC,MAAM,GAAG,YAAW,CAAC,CAAC;EAExBlzC,QAAQ,CAACi1C,eAAe,GAAGj1C,QAAQ,CAACO,OAAO,CAAC00C,eAAe,EAAE,iBAAiB,CAAC;AAEhF,CAAC,EAAC,CAAC;;AAEH;AACA;AACA;;AAEC,aAAY;EACZ,YAAY;;EAEZ;EACA;AACD;AACA;AACA;AACA;AACA;AACA;EACC,SAAS3B,UAAUA,CAAC3B,QAAQ,EAAEkB,GAAG,EAAEqC,YAAY,EAAE;IAChD,IAAI,CAACC,2BAA2B,CAACxD,QAAQ,CAAC;;IAE1C;IACA;AACF;AACA;AACA;AACA;AACA;IACE,IAAI,CAACU,IAAI,GAAGQ,GAAG;;IAEf;AACF;AACA;AACA;AACA;AACA;IACE,IAAI,CAACT,gBAAgB,GAAG8C,YAAY;;IAEpC;AACF;AACA;AACA;AACA;AACA;IACE,IAAI,CAACN,cAAc,GAAG50C,QAAQ,CAACmmC,KAAK,CAAC,IAAI,CAACiP,kBAAkB,EAAE,IAAI,CAAC;;IAEnE;AACF;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,WAAW,GAAG,KAAK;;IAExB;AACF;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,mBAAmB,GAAG,IAAI;EAChC;EAAC;EAED,IAAIlzC,CAAC,GAAGpC,QAAQ,CAACC,MAAM,CAACqzC,UAAU,EAAEtzC,QAAQ,CAACi1C,eAAe,CAAC;;EAE7D;EACA7yC,CAAC,CAAC0wC,IAAI,GAAG,YAAY;IACpB,IAAI,CAACT,IAAI,CAAC5+B,MAAM,GAAGzT,QAAQ,CAACmmC,KAAK,CAAC,IAAI,CAACiP,kBAAkB,EAAE,IAAI,CAAC;IAChE,IAAI,CAAC/C,IAAI,CAACkD,kBAAkB,GAAGv1C,QAAQ,CAACmmC,KAAK,CAAC,IAAI,CAACqP,uBAAuB,EAAE,IAAI,CAAC;IACjF,IAAI,CAACnD,IAAI,CAAC1+B,OAAO,GAAG3T,QAAQ,CAACmmC,KAAK,CAAC,IAAI,CAACsP,YAAY,EAAE,IAAI,CAAC;IAE3D,IAAItxC,GAAG,GAAG,IAAInE,QAAQ,CAACsB,KAAK,CAAC,YAAY,CAAC;IAC1C6C,GAAG,CAAC8uC,MAAM,GAAG,IAAI,CAACZ,IAAI;IAEtB,IAAI,CAAC9uC,aAAa,CAACY,GAAG,CAAC;IAEvB,IAAI,CAACuxC,QAAQ,CAAC,CAAC;IAEf,IAAI,CAACC,YAAY,GAAG1sC,UAAU,CAACjJ,QAAQ,CAACmmC,KAAK,CAAC,IAAI,CAACz9B,cAAc,EAAE,IAAI,CAAC,EAAE,IAAI,CAACqpC,KAAK,CAACxD,WAAW,CAAC;IAEjG,IAAI,CAAC8D,IAAI,CAAC,IAAI,CAACD,gBAAgB,CAAC,GAAG,IAAI,CAACL,KAAK,CAAC3+B,GAAG;;IAEjD;IACA,IAAI,IAAI,CAACi/B,IAAI,CAACuD,UAAU,IAAI,IAAI,EAAE;MACjCzuC,MAAM,CAACkM,QAAQ,CAACwZ,IAAI,CAACogB,WAAW,CAAC,IAAI,CAACoF,IAAI,CAAC;MAC3C,IAAI,CAACgD,WAAW,GAAG,IAAI;IACxB;EACD,CAAC;EAEDjzC,CAAC,CAAC+wC,OAAO,GAAG,YAAW;IACtB,IAAI,CAAC0C,MAAM,CAAC,CAAC;IACb,IAAI,CAACxD,IAAI,GAAG,IAAI;IAEhB,IAAI,CAACyD,uBAAuB,CAAC,CAAC;EAC/B,CAAC;;EAED;EACA;AACD;AACA;AACA;AACA;AACA;EACC1zC,CAAC,CAACozC,uBAAuB,GAAG,YAAY;IACvC/tC,YAAY,CAAC,IAAI,CAACkuC,YAAY,CAAC;IAC/B;IACA,IAAI9C,GAAG,GAAG,IAAI,CAACR,IAAI;;IAEnB;IACA,IAAIQ,GAAG,CAAC/yB,UAAU,IAAI,QAAQ,IAAI+yB,GAAG,CAAC/yB,UAAU,IAAI,UAAU,EAAE;MAC/D,IAAI,CAACs1B,kBAAkB,CAAC,CAAC;IAC1B;EACD,CAAC;;EAED;AACD;AACA;AACA;AACA;EACChzC,CAAC,CAACqzC,YAAY,GAAG,YAAW;IAC3B,IAAI,CAACI,MAAM,CAAC,CAAC;IACb,IAAI,CAACtyC,aAAa,CAAC,OAAO,CAAC;EAC5B,CAAC;;EAED;AACD;AACA;AACA;AACA;EACCnB,CAAC,CAACgzC,kBAAkB,GAAG,YAAY;IAClC,IAAI,CAAClD,UAAU,GAAG,IAAI,CAACG,IAAI;IAC3B,IAAI,CAACJ,OAAO,GAAG,IAAI,CAACH,eAAe,IAAI,IAAI,CAACA,eAAe,CAAC,IAAI,CAAC,IAAI,IAAI,CAACI,UAAU;IAEpF,IAAI,CAAC2D,MAAM,CAAC,CAAC;IACb,IAAI,CAACE,QAAQ,CAAC,CAAC;IAEf,IAAI,CAACxyC,aAAa,CAAC,UAAU,CAAC;EAC/B,CAAC;;EAED;AACD;AACA;AACA;AACA;AACA;EACCnB,CAAC,CAACsG,cAAc,GAAG,YAAY;IAC9B,IAAI,CAACmtC,MAAM,CAAC,CAAC;IACb,IAAI,CAACtyC,aAAa,CAAC,IAAIvD,QAAQ,CAACsB,KAAK,CAAC,SAAS,CAAC,CAAC;EAClD,CAAC;;EAED;AACD;AACA;AACA;AACA;EACCc,CAAC,CAACyzC,MAAM,GAAG,YAAW;IACrB,IAAI,CAACxD,IAAI,CAAC5+B,MAAM,GAAG,IAAI;IACvB,IAAI,CAAC4+B,IAAI,CAACkD,kBAAkB,GAAG,IAAI;IACnC,IAAI,CAAClD,IAAI,CAAC1+B,OAAO,GAAG,IAAI;IACxB,IAAI,IAAI,CAAC0hC,WAAW,IAAI,IAAI,CAAChD,IAAI,CAACuD,UAAU,IAAI,IAAI,EAAE;MACrD,IAAI,CAACvD,IAAI,CAACuD,UAAU,CAACnuB,WAAW,CAAC,IAAI,CAAC4qB,IAAI,CAAC;IAC5C;IACA5qC,YAAY,CAAC,IAAI,CAACkuC,YAAY,CAAC;EAChC,CAAC;EAEDvzC,CAAC,CAACszC,QAAQ,GAAG,YAAW;IACvB,IAAI,CAACJ,mBAAmB,GAAG,IAAI,CAACjD,IAAI,CAAChzB,KAAK,CAACie,UAAU;IACrD,IAAI,CAAC+U,IAAI,CAAChzB,KAAK,CAACie,UAAU,GAAG,QAAQ;EACtC,CAAC;EAEDl7B,CAAC,CAAC2zC,QAAQ,GAAG,YAAW;IACvB,IAAI,CAAC1D,IAAI,CAAChzB,KAAK,CAACie,UAAU,GAAG,IAAI,CAACgY,mBAAmB;EACtD,CAAC;;EAED;AACD;AACA;AACA;AACA;AACA;EACClzC,CAAC,CAAC4zC,cAAc,GAAG,YAAY;IAC9B;EAAA,CACA;EAEDh2C,QAAQ,CAACszC,UAAU,GAAGtzC,QAAQ,CAACO,OAAO,CAAC+yC,UAAU,EAAE,iBAAiB,CAAC;AAEtE,CAAC,EAAC,CAAC;;AAEH;AACA;AACA;;AAEC,aAAY;EACZ,YAAY;;EAEZ;EACA;AACD;AACA;AACA;AACA;AACA;AACA;AACA;EACC,SAASoB,eAAeA,CAAC/C,QAAQ,EAAEkB,GAAG,EAAEqC,YAAY,EAAE;IACrD,IAAI,CAACC,2BAA2B,CAACxD,QAAQ,CAAC;;IAE1C;IACA,IAAI,CAACU,IAAI,GAAGQ,GAAG;IACf,IAAI,CAACT,gBAAgB,GAAG8C,YAAY;IACpC,IAAI,CAACN,cAAc,GAAG50C,QAAQ,CAACmmC,KAAK,CAAC,IAAI,CAACiP,kBAAkB,EAAE,IAAI,CAAC;EACpE;EAAC;EAED,IAAIhzC,CAAC,GAAGpC,QAAQ,CAACC,MAAM,CAACy0C,eAAe,EAAE10C,QAAQ,CAACszC,UAAU,CAAC;EAC7D,IAAIr1B,CAAC,GAAGy2B,eAAe;;EAEvB;EACAtyC,CAAC,CAAC0wC,IAAI,GAAG,YAAY;IACpB,IAAIxW,EAAE,GAAGt8B,QAAQ,CAACmmC,KAAK,CAAC,IAAI,CAAC6P,cAAc,EAAE,IAAI,CAAC;IAClD,IAAI,CAACC,gBAAgB,GAAG3Z,EAAE;IAE1B,IAAI4Z,EAAE,GAAGl2C,QAAQ,CAACmmC,KAAK,CAAC,IAAI,CAACgQ,eAAe,EAAE,IAAI,CAAC;IACnD,IAAI,CAACA,eAAe,GAAGD,EAAE;IAEzB,IAAI,CAAC7D,IAAI,CAACpvC,gBAAgB,CAAC,SAAS,EAAEq5B,EAAE,CAAC;IACzC,IAAI,CAAC+V,IAAI,CAACpvC,gBAAgB,CAAC,UAAU,EAAEizC,EAAE,CAAC;;IAE1C;IACA;IACA,IAAI,CAAC7D,IAAI,CAACpvC,gBAAgB,IAAI,IAAI,CAACovC,IAAI,CAACpvC,gBAAgB,CAAC,gBAAgB,EAAE,IAAI,CAAC2xC,cAAc,EAAE,KAAK,CAAC,CAAC,CAAC;;IAExG,IAAI,CAACwB,eAAe,CAAC,CAAC;EACvB,CAAC;;EAED;EACAh0C,CAAC,CAACozC,uBAAuB,GAAG,YAAY;IACvC/tC,YAAY,CAAC,IAAI,CAACkuC,YAAY,CAAC;IAC/B;IACA,IAAI9C,GAAG,GAAG,IAAI,CAACR,IAAI;;IAEnB;IACA,IAAIQ,GAAG,CAAC/yB,UAAU,IAAI,QAAQ,IAAI+yB,GAAG,CAAC/yB,UAAU,IAAI,UAAU,EAAE;MAC/D,IAAI,CAACs1B,kBAAkB,CAAC,CAAC;IAC1B;EACD,CAAC;EAEDhzC,CAAC,CAAC4zC,cAAc,GAAG,YAAY;IAC9B;EAAA,CACA;;EAED;AACD;AACA;AACA;AACA;AACA;EACC5zC,CAAC,CAAC+zC,eAAe,GAAG,UAAU/sC,KAAK,EAAE;IACpC,IAAI,CAACA,KAAK,IAAIA,KAAK,CAACs9B,MAAM,GAAG,CAAC,IAAIt9B,KAAK,CAACu9B,KAAK,IAAI,CAAC,EAAE;MACnD,OAAO,CAAC;IACT;;IAEA,IAAI0P,QAAQ,GAAG,IAAIr2C,QAAQ,CAACymC,aAAa,CAACr9B,KAAK,CAACs9B,MAAM,EAAEt9B,KAAK,CAACu9B,KAAK,CAAC;IACpE,IAAI,CAACpjC,aAAa,CAAC8yC,QAAQ,CAAC;EAC7B,CAAC;;EAED;EACAj0C,CAAC,CAACyzC,MAAM,GAAG,YAAY;IACtB,IAAI,CAACxD,IAAI,CAAClvC,mBAAmB,IAAI,IAAI,CAACkvC,IAAI,CAAClvC,mBAAmB,CAAC,gBAAgB,EAAE,IAAI,CAACyxC,cAAc,CAAC;IACrG,IAAI,CAACvC,IAAI,CAAClvC,mBAAmB,CAAC,SAAS,EAAE,IAAI,CAAC8yC,gBAAgB,CAAC;IAC/D,IAAI,CAAC5D,IAAI,CAAClvC,mBAAmB,CAAC,UAAU,EAAE,IAAI,CAACmzC,iBAAiB,CAAC;IAEjE,IAAI,CAACC,iBAAiB,CAAC,CAAC;EACzB,CAAC;EAEDv2C,QAAQ,CAAC00C,eAAe,GAAG10C,QAAQ,CAACO,OAAO,CAACm0C,eAAe,EAAE,YAAY,CAAC;AAE3E,CAAC,EAAC,CAAC;;AAEH;AACA;AACA;;AAEC,aAAY;EACZ,YAAY;;EAEb;EACC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACC,SAASlB,UAAUA,CAAE9E,IAAI,EAAE;IAC1B,IAAI,CAACyG,2BAA2B,CAACzG,IAAI,CAAC;;IAEtC;IACA;AACF;AACA;AACA;AACA;AACA;IACE,IAAI,CAACsE,QAAQ,GAAG,IAAI;;IAEpB;AACF;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAAC2C,YAAY,GAAG,IAAI;;IAExB;AACF;AACA;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAACa,SAAS,GAAG,CAAC;;IAElB;AACF;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAACxC,SAAS,GAAG,IAAI;;IAErB;AACF;AACA;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAACyC,YAAY,GAAG,IAAI;IAExB,IAAI,CAACC,SAAS,GAAG,KAAK;;IAEtB;IACA,IAAI,CAACC,qBAAqB,GAAG32C,QAAQ,CAACmmC,KAAK,CAAC,IAAI,CAACyQ,gBAAgB,EAAE,IAAI,CAAC;IACxE,IAAI,CAACC,oBAAoB,GAAG72C,QAAQ,CAACmmC,KAAK,CAAC,IAAI,CAACgQ,eAAe,EAAE,IAAI,CAAC;IACtE,IAAI,CAACW,iBAAiB,GAAG92C,QAAQ,CAACmmC,KAAK,CAAC,IAAI,CAAC4Q,YAAY,EAAE,IAAI,CAAC;IAChE,IAAI,CAACC,iBAAiB,GAAGh3C,QAAQ,CAACmmC,KAAK,CAAC,IAAI,CAACsP,YAAY,EAAE,IAAI,CAAC;IAChE,IAAI,CAACwB,mBAAmB,GAAGj3C,QAAQ,CAACmmC,KAAK,CAAC,IAAI,CAACz9B,cAAc,EAAE,IAAI,CAAC;IACpE,IAAI,CAACwuC,gBAAgB,GAAGl3C,QAAQ,CAACmmC,KAAK,CAAC,IAAI,CAACgR,WAAW,EAAE,IAAI,CAAC;IAC9D,IAAI,CAACC,4BAA4B,GAAGp3C,QAAQ,CAACmmC,KAAK,CAAC,IAAI,CAACqP,uBAAuB,EAAE,IAAI,CAAC;IAEtF,IAAI,CAAC,IAAI,CAAC6B,UAAU,CAAC3I,IAAI,CAAC,EAAE;MAC3B;IAAA;EAEF;EAAC;EAED,IAAItsC,CAAC,GAAGpC,QAAQ,CAACC,MAAM,CAACuzC,UAAU,EAAExzC,QAAQ,CAACi1C,eAAe,CAAC;;EAE9D;EACC;AACD;AACA;AACA;AACA;AACA;AACA;EACCzB,UAAU,CAAC8D,gBAAgB,GAAG,CAC7B,oBAAoB,EACpB,oBAAoB,EACpB,oBAAoB,EACpB,oBAAoB,EACpB,gBAAgB,EAChB,mBAAmB,CACnB;;EAEF;EACC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACCl1C,CAAC,CAACqwC,SAAS,GAAG,UAAUC,GAAG,EAAE;IAC5B,IAAIA,GAAG,IAAI,IAAI,CAAC+D,YAAY,EAAE;MAC7B,OAAO,IAAI,CAACA,YAAY;IACzB;IACA,OAAO,IAAI,CAACzC,SAAS;EACtB,CAAC;;EAED;EACA5xC,CAAC,CAAC8wC,MAAM,GAAG,YAAY;IACtB,IAAI,CAACrB,QAAQ,GAAG,IAAI;IACpB,IAAI,CAACgE,MAAM,CAAC,CAAC;IACb,IAAI,CAAC7C,QAAQ,CAAC7G,KAAK,CAAC,CAAC;EACtB,CAAC;;EAED;EACA/pC,CAAC,CAAC0wC,IAAI,GAAG,YAAY;IACpB,IAAI,IAAI,CAACE,QAAQ,IAAI,IAAI,EAAE;MAC1B,IAAI,CAACyC,YAAY,CAAC,CAAC;MACnB;IACD;;IAEA;IACA,IAAI,IAAI,CAACzC,QAAQ,CAAC/vC,gBAAgB,IAAI,IAAI,EAAE;MAC3C,IAAI,CAAC+vC,QAAQ,CAAC/vC,gBAAgB,CAAC,WAAW,EAAE,IAAI,CAAC0zC,qBAAqB,EAAE,KAAK,CAAC;MAC9E,IAAI,CAAC3D,QAAQ,CAAC/vC,gBAAgB,CAAC,UAAU,EAAE,IAAI,CAAC4zC,oBAAoB,EAAE,KAAK,CAAC;MAC5E,IAAI,CAAC7D,QAAQ,CAAC/vC,gBAAgB,CAAC,OAAO,EAAE,IAAI,CAAC6zC,iBAAiB,EAAE,KAAK,CAAC;MACtE,IAAI,CAAC9D,QAAQ,CAAC/vC,gBAAgB,CAAC,OAAO,EAAE,IAAI,CAAC+zC,iBAAiB,EAAE,KAAK,CAAC;MACtE,IAAI,CAAChE,QAAQ,CAAC/vC,gBAAgB,CAAC,SAAS,EAAE,IAAI,CAACg0C,mBAAmB,EAAE,KAAK,CAAC;;MAE1E;MACA,IAAI,CAACjE,QAAQ,CAAC/vC,gBAAgB,CAAC,MAAM,EAAE,IAAI,CAACi0C,gBAAgB,EAAE,KAAK,CAAC;MACpE,IAAI,CAAClE,QAAQ,CAAC/vC,gBAAgB,CAAC,kBAAkB,EAAE,IAAI,CAACm0C,4BAA4B,EAAE,KAAK,CAAC;IAC7F,CAAC,MAAM;MACN;MACA,IAAI,CAACpE,QAAQ,CAACuE,WAAW,GAAG,IAAI,CAACZ,qBAAqB;MACtD,IAAI,CAAC3D,QAAQ,CAACwE,UAAU,GAAG,IAAI,CAACX,oBAAoB;MACpD,IAAI,CAAC7D,QAAQ,CAACyE,OAAO,GAAG,IAAI,CAACX,iBAAiB;MAC9C,IAAI,CAAC9D,QAAQ,CAACr/B,OAAO,GAAG,IAAI,CAACqjC,iBAAiB;MAC9C,IAAI,CAAChE,QAAQ,CAAC0E,SAAS,GAAG,IAAI,CAACT,mBAAmB;;MAElD;MACA,IAAI,CAACjE,QAAQ,CAACv/B,MAAM,GAAG,IAAI,CAACyjC,gBAAgB;MAC5C,IAAI,CAAClE,QAAQ,CAACuC,kBAAkB,GAAG,IAAI,CAAC6B,4BAA4B;IACrE;;IAEA;IACA,IAAI,IAAI,CAACZ,SAAS,IAAI,CAAC,EAAE;MACxB,IAAI,CAACb,YAAY,GAAG1sC,UAAU,CAACjJ,QAAQ,CAACmmC,KAAK,CAAC,IAAI,CAACz9B,cAAc,EAAE,IAAI,CAAC,EAAE,IAAI,CAACqpC,KAAK,CAACxD,WAAW,CAAC;IAClG;;IAEA;IACA,IAAI;MACH,IAAI,CAAC,IAAI,CAACwD,KAAK,CAAC5D,MAAM,IAAI,IAAI,CAAC4D,KAAK,CAAC3L,MAAM,IAAIpmC,QAAQ,CAACswC,cAAc,CAACpC,GAAG,EAAE;QAC3E,IAAI,CAAC8E,QAAQ,CAAC2E,IAAI,CAAC,CAAC;MACrB,CAAC,MAAM,IAAI,IAAI,CAAC5F,KAAK,CAAC3L,MAAM,IAAIpmC,QAAQ,CAACswC,cAAc,CAACgC,IAAI,EAAE;QAC7D,IAAI,CAACU,QAAQ,CAAC2E,IAAI,CAAC33C,QAAQ,CAAC0xC,YAAY,CAACnC,iBAAiB,CAAC,IAAI,CAACwC,KAAK,CAAC5D,MAAM,CAAC,CAAC;MAC/E;IACD,CAAC,CAAC,OAAOyJ,KAAK,EAAE;MACf,IAAI,CAACr0C,aAAa,CAAC,IAAIvD,QAAQ,CAACsmC,UAAU,CAAC,UAAU,EAAE,IAAI,EAAEsR,KAAK,CAAC,CAAC;IACrE;EACD,CAAC;EAEDx1C,CAAC,CAACuyC,eAAe,GAAG,UAAUpzC,IAAI,EAAE;IACnC;IACA,IAAIA,IAAI,KAAK,MAAM,EAAE;MACpBA,IAAI,GAAG4F,MAAM,CAAC2tC,GAAG,GAAG,MAAM,GAAG,aAAa;MAC1C,IAAI,CAAC+C,aAAa,GAAGt2C,IAAI;IAC1B;IACA,IAAI,CAACyxC,QAAQ,CAAC8E,YAAY,GAAGv2C,IAAI;EAClC,CAAC;;EAED;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACCa,CAAC,CAAC21C,qBAAqB,GAAG,YAAY;IACrC,IAAI,IAAI,CAAC/E,QAAQ,CAAC+E,qBAAqB,YAAY9D,QAAQ,EAAE;MAC5D,OAAO,IAAI,CAACjB,QAAQ,CAAC+E,qBAAqB,CAAC,CAAC;IAC7C,CAAC,MAAM;MACN,OAAO,IAAI;IACZ;EACD,CAAC;;EAED;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACC31C,CAAC,CAAC41C,iBAAiB,GAAG,UAAUC,MAAM,EAAE;IACvC,IAAI,IAAI,CAACjF,QAAQ,CAACgF,iBAAiB,YAAY/D,QAAQ,EAAE;MACxD,OAAO,IAAI,CAACjB,QAAQ,CAACgF,iBAAiB,CAACC,MAAM,CAAC;IAC/C,CAAC,MAAM;MACN,OAAO,IAAI;IACZ;EACD,CAAC;;EAEF;EACC;AACD;AACA;AACA;AACA;AACA;EACC71C,CAAC,CAAC+zC,eAAe,GAAG,UAAU/sC,KAAK,EAAE;IACpC,IAAI,CAACA,KAAK,IAAIA,KAAK,CAACs9B,MAAM,GAAG,CAAC,IAAIt9B,KAAK,CAACu9B,KAAK,IAAI,CAAC,EAAE;MACnD,OAAO,CAAC;IACT;;IAEA,IAAI0P,QAAQ,GAAG,IAAIr2C,QAAQ,CAACymC,aAAa,CAACr9B,KAAK,CAACs9B,MAAM,EAAEt9B,KAAK,CAACu9B,KAAK,CAAC;IACpE,IAAI,CAACpjC,aAAa,CAAC8yC,QAAQ,CAAC;EAC7B,CAAC;;EAED;AACD;AACA;AACA;AACA;AACA;EACCj0C,CAAC,CAACw0C,gBAAgB,GAAG,UAAUxtC,KAAK,EAAE;IACrC3B,YAAY,CAAC,IAAI,CAACkuC,YAAY,CAAC;IAC/B,IAAI,CAACpyC,aAAa,CAAC,WAAW,CAAC;EAChC,CAAC;;EAED;AACD;AACA;AACA;AACA;AACA;EACCnB,CAAC,CAAC20C,YAAY,GAAG,UAAU3tC,KAAK,EAAE;IACjC,IAAI,CAACysC,MAAM,CAAC,CAAC;IACb,IAAI,CAACtyC,aAAa,CAAC,IAAIvD,QAAQ,CAACsmC,UAAU,CAAC,aAAa,EAAE,IAAI,EAAEl9B,KAAK,CAAC,CAAC;EACxE,CAAC;;EAED;AACD;AACA;AACA;AACA;AACA;EACChH,CAAC,CAACqzC,YAAY,GAAG,UAAUrsC,KAAK,EAAE;IACjC,IAAI,CAACysC,MAAM,CAAC,CAAC;IACb,IAAI,CAACtyC,aAAa,CAAC,IAAIvD,QAAQ,CAACsmC,UAAU,CAACl9B,KAAK,CAACo9B,OAAO,CAAC,CAAC;EAC3D,CAAC;;EAED;AACD;AACA;AACA;AACA;AACA;AACA;EACCpkC,CAAC,CAACozC,uBAAuB,GAAG,UAAUpsC,KAAK,EAAE;IAC5C,IAAI,IAAI,CAAC4pC,QAAQ,CAAClzB,UAAU,IAAI,CAAC,EAAE;MAClC,IAAI,CAACq3B,WAAW,CAAC,CAAC;IACnB;EACD,CAAC;;EAED;AACD;AACA;AACA;AACA;AACA;AACA;EACC/0C,CAAC,CAAC+0C,WAAW,GAAG,UAAU/tC,KAAK,EAAE;IAChC,IAAI,IAAI,CAACs9B,MAAM,EAAE;MAChB;IACD;IACA,IAAI,CAACA,MAAM,GAAG,IAAI;IAElB,IAAIkR,KAAK,GAAG,IAAI,CAACM,WAAW,CAAC,CAAC;IAC9B,IAAIN,KAAK,EAAE;MACV,IAAI,CAACnC,YAAY,CAACmC,KAAK,CAAC;MACxB;IACD;IAEA,IAAI,CAAC5D,SAAS,GAAG,IAAI,CAACmE,YAAY,CAAC,CAAC;IACpC;IACA,IAAI,IAAI,CAACN,aAAa,KAAK,aAAa,EAAE;MACzC,IAAI;QACH,IAAI,CAAC7D,SAAS,GAAG,IAAIoE,IAAI,CAAC,CAAC,IAAI,CAACpE,SAAS,CAAC,CAAC;MAC5C,CAAC,CAAC,OAAOzvC,CAAC,EAAE;QACX;QACA;QACA4C,MAAM,CAACkxC,WAAW,GAAGlxC,MAAM,CAACkxC,WAAW,IAAIlxC,MAAM,CAACmxC,iBAAiB,IAAInxC,MAAM,CAACoxC,cAAc,IAAIpxC,MAAM,CAACqxC,aAAa;QACpH,IAAIj0C,CAAC,CAACsO,IAAI,KAAK,WAAW,IAAI1L,MAAM,CAACkxC,WAAW,EAAE;UACjD,IAAII,OAAO,GAAG,IAAIJ,WAAW,CAAC,CAAC;UAC/BI,OAAO,CAAC3sC,MAAM,CAAC,IAAI,CAACkoC,SAAS,CAAC;UAC9B,IAAI,CAACA,SAAS,GAAGyE,OAAO,CAACC,OAAO,CAAC,CAAC;QACnC;MACD;IACD;IACA,IAAI,CAAC7C,MAAM,CAAC,CAAC;IAEb,IAAI,CAACtyC,aAAa,CAAC,IAAIvD,QAAQ,CAACsB,KAAK,CAAC,UAAU,CAAC,CAAC;EACnD,CAAC;;EAED;AACD;AACA;AACA;AACA;AACA;AACA;EACCc,CAAC,CAACsG,cAAc,GAAG,UAAUU,KAAK,EAAE;IACnC,IAAI,CAACysC,MAAM,CAAC,CAAC;IAEb,IAAI,CAACtyC,aAAa,CAAC,IAAIvD,QAAQ,CAACsmC,UAAU,CAAC,iBAAiB,EAAE,IAAI,EAAEl9B,KAAK,CAAC,CAAC;EAC5E,CAAC;;EAEF;EACC;AACD;AACA;AACA;AACA;AACA;AACA;EACChH,CAAC,CAAC81C,WAAW,GAAG,YAAY;IAC3B;IACA,IAAIS,MAAM,GAAGtrB,QAAQ,CAAC,IAAI,CAAC2lB,QAAQ,CAAC2F,MAAM,CAAC;IAE3C,QAAQA,MAAM;MACb,KAAK,GAAG,CAAC,CAAG;MACZ,KAAK,CAAC;QAAM;QACX,OAAO,IAAIhK,KAAK,CAACgK,MAAM,CAAC;IAC1B;IACA,OAAO,IAAI;EACZ,CAAC;;EAED;AACD;AACA;AACA;AACA;AACA;EACCv2C,CAAC,CAAC+1C,YAAY,GAAG,YAAY;IAC5B,IAAI,IAAI,CAACnE,SAAS,IAAI,IAAI,EAAE;MAC3B,OAAO,IAAI,CAACA,SAAS;IACtB;IAEA,IAAI,IAAI,CAAChB,QAAQ,CAAC4F,QAAQ,IAAI,IAAI,EAAE;MACnC,OAAO,IAAI,CAAC5F,QAAQ,CAAC4F,QAAQ;IAC9B;;IAEA;IACA,IAAI;MACH,IAAI,IAAI,CAAC5F,QAAQ,CAAC6F,YAAY,IAAI,IAAI,EAAE;QACvC,OAAO,IAAI,CAAC7F,QAAQ,CAAC6F,YAAY;MAClC;IACD,CAAC,CAAC,OAAOt0C,CAAC,EAAE,CACZ;;IAEA;IACA,IAAI;MACH,IAAI,IAAI,CAACyuC,QAAQ,CAAC8F,WAAW,IAAI,IAAI,EAAE;QACtC,OAAO,IAAI,CAAC9F,QAAQ,CAAC8F,WAAW;MACjC;IACD,CAAC,CAAC,OAAOv0C,CAAC,EAAE,CACZ;IAEA,OAAO,IAAI;EACZ,CAAC;;EAED;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACCnC,CAAC,CAACi1C,UAAU,GAAG,UAAU3I,IAAI,EAAE;IAC9B;IACA,IAAIsB,WAAW,GAAGhwC,QAAQ,CAAC0xC,YAAY,CAAC9B,aAAa,CAAClB,IAAI,CAAC;IAC3D,IAAIN,OAAO,GAAG,CAAC,CAAC;;IAEhB;IACA,IAAI2K,GAAG,GAAG,IAAI;IACd,IAAI5xC,MAAM,CAAC6xC,cAAc,EAAE;MAC1BD,GAAG,GAAG,IAAIC,cAAc,CAAC,CAAC;MAC1B;MACA,IAAIhJ,WAAW,IAAI+I,GAAG,CAAC1K,eAAe,KAAK75B,SAAS,IAAIrN,MAAM,CAAC8xC,cAAc,EAAE;QAC9EF,GAAG,GAAG,IAAIE,cAAc,CAAC,CAAC;MAC3B;IACD,CAAC,MAAM;MAAE;MACR,KAAK,IAAI93C,CAAC,GAAG,CAAC,EAAEC,CAAC,GAAG6c,CAAC,CAACq5B,gBAAgB,CAACj2C,MAAM,EAAEF,CAAC,GAAGC,CAAC,EAAED,CAAC,EAAE,EAAE;QAC1D,IAAI+3C,SAAS,GAAGj7B,CAAC,CAACq5B,gBAAgB,CAACn2C,CAAC,CAAC;QACrC,IAAI;UACH43C,GAAG,GAAG,IAAIpL,aAAa,CAACuL,SAAS,CAAC;UAClC;QACD,CAAC,CAAC,OAAO30C,CAAC,EAAE,CACZ;MACD;MACA,IAAIw0C,GAAG,IAAI,IAAI,EAAE;QAChB,OAAO,KAAK;MACb;IACD;;IAEA;IACA,IAAIrK,IAAI,CAACtjB,QAAQ,IAAI,IAAI,IAAIprB,QAAQ,CAAC0xC,YAAY,CAACX,MAAM,CAACrC,IAAI,CAACntC,IAAI,CAAC,EAAE;MACrEmtC,IAAI,CAACtjB,QAAQ,GAAG,2BAA2B;IAC5C;;IAEA;IACA,IAAIsjB,IAAI,CAACtjB,QAAQ,IAAI2tB,GAAG,CAACI,gBAAgB,EAAE;MAC1CJ,GAAG,CAACI,gBAAgB,CAACzK,IAAI,CAACtjB,QAAQ,CAAC;IACpC;;IAEA;IACA,IAAI,CAACorB,SAAS,GAAI,OAAOuC,GAAG,CAACjB,YAAY,KAAK,QAAQ,GAAI,CAAC,GAAG,CAAC;IAE/D,IAAI1kC,GAAG,GAAG,IAAI;IACd,IAAIs7B,IAAI,CAACtI,MAAM,IAAIpmC,QAAQ,CAACswC,cAAc,CAACpC,GAAG,EAAE;MAC/C96B,GAAG,GAAGpT,QAAQ,CAAC0xC,YAAY,CAAChC,SAAS,CAAChB,IAAI,CAACt7B,GAAG,EAAEs7B,IAAI,CAACP,MAAM,CAAC;IAC7D,CAAC,MAAM;MACN/6B,GAAG,GAAGs7B,IAAI,CAACt7B,GAAG;IACf;;IAEA;IACA2lC,GAAG,CAACK,IAAI,CAAC1K,IAAI,CAACtI,MAAM,IAAIpmC,QAAQ,CAACswC,cAAc,CAACpC,GAAG,EAAE96B,GAAG,EAAE,IAAI,CAAC;IAE/D,IAAI48B,WAAW,IAAI+I,GAAG,YAAYC,cAAc,IAAI,IAAI,CAACxC,SAAS,IAAI,CAAC,EAAE;MACxEpI,OAAO,CAAC,QAAQ,CAAC,GAAG2B,QAAQ,CAACsJ,MAAM;IACpC;;IAEA;IACA,IAAI3K,IAAI,CAACP,MAAM,IAAIO,IAAI,CAACtI,MAAM,IAAIpmC,QAAQ,CAACswC,cAAc,CAACgC,IAAI,EAAE;MAC/DlE,OAAO,CAAC,cAAc,CAAC,GAAG,mCAAmC;IAC9D;IAEA,IAAI,CAAC4B,WAAW,IAAI,CAAC5B,OAAO,CAAC,kBAAkB,CAAC,EAAE;MACjDA,OAAO,CAAC,kBAAkB,CAAC,GAAG,gBAAgB;IAC/C;IAEA,IAAIM,IAAI,CAACN,OAAO,EAAE;MACjB,KAAK,IAAIttC,CAAC,IAAI4tC,IAAI,CAACN,OAAO,EAAE;QAC3BA,OAAO,CAACttC,CAAC,CAAC,GAAG4tC,IAAI,CAACN,OAAO,CAACttC,CAAC,CAAC;MAC7B;IACD;IAEA,KAAKA,CAAC,IAAIstC,OAAO,EAAE;MAClB2K,GAAG,CAACO,gBAAgB,CAACx4C,CAAC,EAAEstC,OAAO,CAACttC,CAAC,CAAC,CAAC;IACpC;IAEA,IAAIi4C,GAAG,YAAYC,cAAc,IAAItK,IAAI,CAACL,eAAe,KAAK75B,SAAS,EAAE;MACxEukC,GAAG,CAAC1K,eAAe,GAAGK,IAAI,CAACL,eAAe;IAC3C;IAEA,IAAI,CAAC2E,QAAQ,GAAG+F,GAAG;IAEnB,OAAO,IAAI;EACZ,CAAC;;EAED;AACD;AACA;AACA;AACA;EACC32C,CAAC,CAACyzC,MAAM,GAAG,YAAY;IACtBpuC,YAAY,CAAC,IAAI,CAACkuC,YAAY,CAAC;IAE/B,IAAI,IAAI,CAAC3C,QAAQ,CAAC7vC,mBAAmB,IAAI,IAAI,EAAE;MAC9C,IAAI,CAAC6vC,QAAQ,CAAC7vC,mBAAmB,CAAC,WAAW,EAAE,IAAI,CAACwzC,qBAAqB,CAAC;MAC1E,IAAI,CAAC3D,QAAQ,CAAC7vC,mBAAmB,CAAC,UAAU,EAAE,IAAI,CAAC0zC,oBAAoB,CAAC;MACxE,IAAI,CAAC7D,QAAQ,CAAC7vC,mBAAmB,CAAC,OAAO,EAAE,IAAI,CAAC2zC,iBAAiB,CAAC;MAClE,IAAI,CAAC9D,QAAQ,CAAC7vC,mBAAmB,CAAC,OAAO,EAAE,IAAI,CAAC6zC,iBAAiB,CAAC;MAClE,IAAI,CAAChE,QAAQ,CAAC7vC,mBAAmB,CAAC,SAAS,EAAE,IAAI,CAAC8zC,mBAAmB,CAAC;MACtE,IAAI,CAACjE,QAAQ,CAAC7vC,mBAAmB,CAAC,MAAM,EAAE,IAAI,CAAC+zC,gBAAgB,CAAC;MAChE,IAAI,CAAClE,QAAQ,CAAC7vC,mBAAmB,CAAC,kBAAkB,EAAE,IAAI,CAACi0C,4BAA4B,CAAC;IACzF,CAAC,MAAM;MACN,IAAI,CAACpE,QAAQ,CAACuE,WAAW,GAAG,IAAI;MAChC,IAAI,CAACvE,QAAQ,CAACwE,UAAU,GAAG,IAAI;MAC/B,IAAI,CAACxE,QAAQ,CAACyE,OAAO,GAAG,IAAI;MAC5B,IAAI,CAACzE,QAAQ,CAACr/B,OAAO,GAAG,IAAI;MAC5B,IAAI,CAACq/B,QAAQ,CAAC0E,SAAS,GAAG,IAAI;MAC9B,IAAI,CAAC1E,QAAQ,CAACv/B,MAAM,GAAG,IAAI;MAC3B,IAAI,CAACu/B,QAAQ,CAACuC,kBAAkB,GAAG,IAAI;IACxC;EACD,CAAC;EAEDnzC,CAAC,CAACQ,QAAQ,GAAG,YAAY;IACxB,OAAO,wBAAwB;EAChC,CAAC;EAED5C,QAAQ,CAACwzC,UAAU,GAAGxzC,QAAQ,CAACO,OAAO,CAACizC,UAAU,EAAE,iBAAiB,CAAC;AAEtE,CAAC,EAAC,CAAC;;AAEH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEC,aAAY;EACZ,YAAY;;EAEb;EACC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACC,SAAS+F,SAASA,CAAE3H,SAAS,EAAE4H,QAAQ,EAAElL,WAAW,EAAE;IACrD,IAAI,CAAC+F,0BAA0B,CAAC,CAAC;;IAEjC;AACF;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAACoF,QAAQ,GAAG,EAAE;;IAElB;AACF;AACA;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,cAAc,GAAG,CAAC,CAAC;;IAExB;AACF;AACA;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,mBAAmB,GAAG,CAAC,CAAC;;IAE7B;AACF;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAACplC,IAAI,GAAG,IAAI;;IAEhB;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAACqlC,mBAAmB,GAAG,IAAI;;IAE/B;AACF;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,WAAW,GAAG,KAAK;;IAExB;AACF;AACA;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,eAAe,GAAG,CAAC;;IAExB;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,iBAAiB,GAAG,CACxB/5C,QAAQ,CAACg6C,WAAW,EACpBh6C,QAAQ,CAACi6C,gBAAgB,EACzBj6C,QAAQ,CAACk6C,SAAS,EAClBl6C,QAAQ,CAACm6C,UAAU,EACnBn6C,QAAQ,CAACo6C,WAAW,EACpBp6C,QAAQ,CAACq6C,WAAW,EACpBr6C,QAAQ,CAACs6C,cAAc,EACvBt6C,QAAQ,CAACu6C,iBAAiB,EAC1Bv6C,QAAQ,CAACw6C,SAAS,EAClBx6C,QAAQ,CAACy6C,SAAS,EAClBz6C,QAAQ,CAAC06C,YAAY,EACrB16C,QAAQ,CAAC26C,WAAW,EACpB36C,QAAQ,CAAC46C,UAAU,CACnB;;IAED;AACF;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,oBAAoB,GAAG,IAAI,CAACd,iBAAiB,CAAC14C,MAAM;IAEzD,IAAI,CAACkE,IAAI,CAACqsC,SAAS,EAAE4H,QAAQ,EAAElL,WAAW,CAAC;EAC5C;EAEA,IAAIlsC,CAAC,GAAGpC,QAAQ,CAACC,MAAM,CAACs5C,SAAS,EAAEv5C,QAAQ,CAACswC,cAAc,CAAC;EAC3D,IAAIryB,CAAC,GAAGs7B,SAAS;;EAEjB;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACC;;EAEA;AACD;AACA;AACA;AACA;AACA;AACA;AACA;EACCn3C,CAAC,CAACmD,IAAI,GAAG,UAAUqsC,SAAS,EAAE4H,QAAQ,EAAElL,WAAW,EAAE;IAEpD;IACA;AACF;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAACwM,MAAM,GAAG,IAAI;;IAElB;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAAClJ,SAAS,GAAG,IAAI,CAAC,CAAC;IACvB,IAAI,CAACI,UAAU,GAAG,IAAI;IACtB,IAAI,CAAC+I,YAAY,CAACnJ,SAAS,CAAC;;IAE5B;IACA;AACF;AACA;AACA;AACA;AACA;IACE,IAAI,CAACoJ,OAAO,GAAG,KAAK;;IAEpB;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,SAAS,GAAGzB,QAAQ;;IAEzB;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAAC0B,YAAY,GAAG5M,WAAW;;IAE/B;AACF;AACA;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAAC6M,uBAAuB,GAAG,KAAK;;IAEpC;AACF;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,uBAAuB,GAAG,IAAI;;IAEnC;AACF;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,aAAa,GAAG,EAAE;;IAEvB;AACF;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,UAAU,GAAG,EAAE;;IAEpB;AACF;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,gBAAgB,GAAG,EAAE;;IAE1B;AACF;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,cAAc,GAAG,CAAC,CAAC;;IAExB;AACF;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,eAAe,GAAG,CAAC,CAAC;;IAEzB;AACF;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,cAAc,GAAG,CAAC,CAAC;;IAExB;AACF;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,iBAAiB,GAAG,CAAC,CAAC;;IAE3B;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,SAAS,GAAG,CAAC;;IAElB;AACF;AACA;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,eAAe,GAAG,CAAC;;IAExB;AACF;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,YAAY,GAAG,EAAE;;IAEtB;AACF;AACA;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,cAAc,GAAG,EAAE;;IAExB;AACF;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,aAAa,GAAG7kB,GAAG;EAEzB,CAAC;;EAEF;EACC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACClZ,CAAC,CAACswB,WAAW,GAAG,IAAI;;EAEpB;AACD;AACA;AACA;AACA;AACA;AACA;EACCtwB,CAAC,CAACg+B,YAAY,GAAG,CAAC;;EAEnB;EACC;AACD;AACA;AACA;AACA;AACA;AACA;EACCh+B,CAAC,CAACuyB,MAAM,GAAGxwC,QAAQ,CAACswC,cAAc,CAACE,MAAM;;EAEzC;AACD;AACA;AACA;AACA;AACA;AACA;EACCvyB,CAAC,CAACkzB,GAAG,GAAGnxC,QAAQ,CAACswC,cAAc,CAACa,GAAG;;EAEnC;AACD;AACA;AACA;AACA;AACA;AACA;EACClzB,CAAC,CAACsyB,KAAK,GAAGvwC,QAAQ,CAACswC,cAAc,CAACC,KAAK;;EAEvC;AACD;AACA;AACA;AACA;AACA;AACA;EACCtyB,CAAC,CAACozB,UAAU,GAAGrxC,QAAQ,CAACswC,cAAc,CAACe,UAAU;;EAEjD;AACD;AACA;AACA;AACA;AACA;AACA;EACCpzB,CAAC,CAACwuB,IAAI,GAAGzsC,QAAQ,CAACswC,cAAc,CAAC7D,IAAI;;EAErC;AACD;AACA;AACA;AACA;AACA;AACA;EACCxuB,CAAC,CAACs0B,KAAK,GAAGvyC,QAAQ,CAACswC,cAAc,CAACiC,KAAK;;EAEvC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;EACCt0B,CAAC,CAACgzB,QAAQ,GAAGjxC,QAAQ,CAACswC,cAAc,CAACW,QAAQ;;EAE7C;AACD;AACA;AACA;AACA;AACA;AACA;EACChzB,CAAC,CAACuzB,KAAK,GAAGxxC,QAAQ,CAACswC,cAAc,CAACkB,KAAK;;EAEvC;AACD;AACA;AACA;AACA;AACA;AACA;EACCvzB,CAAC,CAACwzB,KAAK,GAAGzxC,QAAQ,CAACswC,cAAc,CAACmB,KAAK;;EAEvC;AACD;AACA;AACA;AACA;AACA;AACA;EACCxzB,CAAC,CAACmzB,GAAG,GAAGpxC,QAAQ,CAACswC,cAAc,CAACc,GAAG;;EAEnC;AACD;AACA;AACA;AACA;AACA;AACA;EACCnzB,CAAC,CAAC+yB,IAAI,GAAGhxC,QAAQ,CAACswC,cAAc,CAACU,IAAI;;EAErC;AACD;AACA;AACA;AACA;AACA;AACA;EACC/yB,CAAC,CAACizB,GAAG,GAAGlxC,QAAQ,CAACswC,cAAc,CAACY,GAAG;;EAEnC;AACD;AACA;AACA;AACA;EACCjzB,CAAC,CAACq0B,IAAI,GAAGtyC,QAAQ,CAACswC,cAAc,CAACgC,IAAI;;EAErC;AACD;AACA;AACA;AACA;EACCr0B,CAAC,CAACiwB,GAAG,GAAGluC,QAAQ,CAACswC,cAAc,CAACpC,GAAG;;EAEpC;EACC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;EAEC;AACD;AACA;AACA;AACA;;EAEC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;EAEC;AACD;AACA;AACA;AACA;AACA;;EAEA;EACC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;EACC9rC,CAAC,CAAC85C,cAAc,GAAG,UAAUjJ,MAAM,EAAE;IACpC,IAAI,CAACA,MAAM,IAAI,CAACA,MAAM,CAACkJ,WAAW,EAAE;MACnC,MAAM,IAAIxN,KAAK,CAAC,iCAAiC,CAAC;IACnD,CAAC,MAAM,IAAI,IAAI,CAACoL,iBAAiB,CAAC/4C,OAAO,CAACiyC,MAAM,CAAC,IAAI,CAAC,CAAC,EAAE;MACxD,MAAM,IAAItE,KAAK,CAAC,wBAAwB,CAAC,CAAC,CAAC;IAC5C;;IAEA,IAAI,CAACoL,iBAAiB,CAACzwC,OAAO,CAAC2pC,MAAM,CAAC;EACvC,CAAC;;EAED;AACD;AACA;AACA;AACA;AACA;EACC7wC,CAAC,CAACg6C,gBAAgB,GAAG,UAAUnJ,MAAM,EAAE;IACtC,IAAItD,GAAG,GAAG,IAAI,CAACoK,iBAAiB,CAA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,KAAK,GAAG,CAACP,KAAK,CAACxgD,OAAO,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAIwgD,KAAK,CAACxgD,OAAO,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,IAAIwgD,KAAK,CAACxgD,OAAO,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,KAAK,CAACugD,aAAa,CAACG,aAAa;EAChJH,aAAa,CAACS,SAAS,GAAIR,KAAK,CAACxgD,OAAO,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,IAAK,CAACugD,aAAa,CAACG,aAAa;EACzFH,aAAa,CAACU,YAAY,GAAIT,KAAK,CAACxgD,OAAO,CAAC,YAAY,CAAC,GAAG,CAAC,CAAE;EAE/DhB,QAAQ,CAACuhD,aAAa,GAAGA,aAAa;AAEvC,CAAC,EAAC,CAAC;;AAEH;AACA;AACA;;AAEA;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEC,aAAY;EACZ,YAAY;;EACZ;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACC;EACA,IAAIW,eAAe,GAAG,SAAAA,CAAA,EAAY;IACnC;IACE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,SAAS,GAAG,IAAI;;IAErB;AACF;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,KAAK,GAAG,IAAI;;IAEjB;AACF;AACA;AACA;AACA;AACA;IACE,IAAI,CAACvnC,MAAM,GAAG,IAAI;;IAElB;AACF;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAACsa,IAAI,GAAG,IAAI;;IAEhB;AACF;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAACktB,MAAM,GAAG,IAAI;;IAElB;AACF;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,GAAG,GAAG,IAAI;;IAEf;AACF;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,SAAS,GAAG,IAAI;;IAErB;AACF;AACA;AACA;AACA;AACA;IACE,IAAI,CAAC7rB,QAAQ,GAAG,IAAI;EACrB,CAAC;EACD,IAAIt0B,CAAC,GAAG8/C,eAAe,CAAC5hD,SAAS,GAAG,CAAC,CAAC;EACtC,IAAI2d,CAAC,GAAGikC,eAAe;;EAGxB;EACC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;EACCjkC,CAAC,CAACwwB,MAAM,GAAG,UAAUhoC,KAAK,EAAE;IAC3B,IAAIA,KAAK,YAAYwX,CAAC,IAAIxX,KAAK,YAAY9F,MAAM,EAAE;MAClD,IAAI6hD,GAAG,GAAG,IAAIxiD,QAAQ,CAACkiD,eAAe,CAAC,CAAC;MACxCM,GAAG,CAAC9/C,GAAG,CAAC+D,KAAK,CAAC;MACd,OAAO+7C,GAAG;IACX,CAAC,MAAM;MACN,MAAM,IAAI7T,KAAK,CAAC,sBAAsB,CAAC;IACxC;EACD,CAAC;;EAEF;EACC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACCvsC,CAAC,CAACM,GAAG,GAAG,UAASC,KAAK,EAAE;IACvB,KAAK,IAAI7B,CAAC,IAAI6B,KAAK,EAAE;MAAE,IAAI,CAAC7B,CAAC,CAAC,GAAG6B,KAAK,CAAC7B,CAAC,CAAC;IAAE;IAC3C,OAAO,IAAI;EACZ,CAAC;EAEDsB,CAAC,CAACQ,QAAQ,GAAG,YAAW;IACvB,OAAO,mBAAmB;EAC3B,CAAC;EAED5C,QAAQ,CAACkiD,eAAe,GAAGjkC,CAAC;AAE7B,CAAC,EAAC,CAAC;;AAEH;AACA;AACA;;AAEC,aAAY;EACZ,YAAY;;EAEZ;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EAEC,SAASwkC,KAAKA,CAAA,EAAG;IAChB,MAAM,8BAA8B;EACrC;EAEA,IAAIxkC,CAAC,GAAGwkC,KAAK;;EAGd;EACC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;EACCxkC,CAAC,CAACykC,aAAa,GAAG,KAAK;;EAEvB;AACD;AACA;AACA;AACA;AACA;AACA;AACA;EACCzkC,CAAC,CAAC0kC,eAAe,GAAG,OAAO;;EAE3B;AACD;AACA;AACA;AACA;AACA;AACA;AACA;EACC1kC,CAAC,CAAC2kC,cAAc,GAAG,MAAM;;EAEzB;AACD;AACA;AACA;AACA;AACA;AACA;AACA;EACC3kC,CAAC,CAAC4kC,cAAc,GAAG,MAAM;;EAEzB;AACD;AACA;AACA;AACA;AACA;AACA;EACC5kC,CAAC,CAAC6kC,WAAW,GAAG,YAAY;;EAE5B;AACD;AACA;AACA;AACA;AACA;AACA;EACC7kC,CAAC,CAAC8kC,cAAc,GAAG,eAAe;;EAElC;AACD;AACA;AACA;AACA;AACA;AACA;EACC9kC,CAAC,CAAC+kC,gBAAgB,GAAG,iBAAiB;;EAEtC;AACD;AACA;AACA;AACA;AACA;AACA;EACC/kC,CAAC,CAACglC,aAAa,GAAG,cAAc;;EAEhC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;EACChlC,CAAC,CAACilC,WAAW,GAAG,YAAY;;EAE5B;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACCjlC,CAAC,CAACklC,oBAAoB,GAAG,CAAC,KAAK,EAAE,KAAK,EAAE,MAAM,EAAE,MAAM,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,MAAM,EAAE,KAAK,EAAE,KAAK,CAAC;;EAElG;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACCllC,CAAC,CAACmlC,aAAa,GAAG;IACjBC,GAAG,EAAC;EACL,CAAC;;EAED;AACD;AACA;AACA;AACA;AACA;AACA;AACA;EACCplC,CAAC,CAACqlC,YAAY,GAAG,2FAA2F;;EAG7G;EACC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACCrlC,CAAC,CAACslC,wBAAwB,GAAGtlC,CAAC,CAAC4kC,cAAc,CAAC,CAAE;;EAEhD;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACC5kC,CAAC,CAACulC,mBAAmB,GAAG,EAAE;;EAE1B;AACD;AACA;AACA;AACA;AACA;AACA;AACA;EACIvlC,CAAC,CAACwlC,YAAY,GAAG,IAAI;;E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GplD,CAAC,CAAC6hD,OAAO,GAAG,IAAI;EAG5CjkD,QAAQ,CAACglD,eAAe,GAAGhlD,QAAQ,CAACO,OAAO,CAACykD,eAAe,EAAE,gBAAgB,CAAC;AAC/E,CAAC,EAAC,CAAC;;AAEH;AACA;AACA;;AAEA;AACA;;AAKC,aAAW;EACX,YAAY;;EAGb;EACC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACC,SAAS1tB,KAAKA,CAAC51B,MAAM,EAAEiB,KAAK,EAAEyuD,UAAU,EAAE;IAE1C;IACC;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,iBAAiB,GAAG,KAAK;;IAE9B;AACF;AACA;AACA;AACA;AACA;IACE,IAAI,CAACl8B,IAAI,GAAG,KAAK;;IAEjB;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAACuB,QAAQ,GAAG,CAAC;;IAEjB;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAAC06B,UAAU,GAAGA,UAAU,IAAI,CAAC,CAAC;;IAElC;AACF;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAAC1vD,MAAM,GAAGA,MAAM;;IAEpB;AACF;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAAC+zB,QAAQ,GAAG,IAAI;;IAEpB;AACF;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAACqC,OAAO,GAAG,KAAK;;IAErB;IACC;AACF;AACA;AACA;AACA;AACA;IACE,IAAI,CAACkjB,OAAO,GAAG,KAAK;;IAEpB;AACF;AACA;AACA;AACA;IACE,IAAI,CAACsW,cAAc,GAAG,CAAC,CAAC;;IAExB;AACF;AACA;AACA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"},"metadata":{},"sourceType":"script"}