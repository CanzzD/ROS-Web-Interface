{"ast":null,"code":"/*!\n* PreloadJS\n* Visit http://createjs.com/ for documentation, updates and examples.\n*\n* Copyright (c) 2010 gskinner.com, inc.\n*\n* Permission is hereby granted, free of charge, to any person\n* obtaining a copy of this software and associated documentation\n* files (the \"Software\"), to deal in the Software without\n* restriction, including without limitation the rights to use,\n* copy, modify, merge, publish, distribute, sublicense, and/or sell\n* copies of the Software, and to permit persons to whom the\n* Software is furnished to do so, subject to the following\n* conditions:\n*\n* The above copyright notice and this permission notice shall be\n* included in all copies or substantial portions of the Software.\n*\n* THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n* EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\n* OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n* NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n* HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\n* WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n* FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\n* OTHER DEALINGS IN THE SOFTWARE.\n*/\n\n//##############################################################################\n// version.js\n//##############################################################################\n\nwindow.createjs = window.createjs || {};\n(function () {\n  \"use strict\";\n\n  /**\n   * Static class holding library specific information such as the version and buildDate of the library.\n   * @class PreloadJS\n   **/\n  var s = createjs.PreloadJS = createjs.PreloadJS || {};\n\n  /**\n   * The version string for this release.\n   * @property version\n   * @type {String}\n   * @static\n   **/\n  s.version = /*=version*/\"1.0.0\"; // injected by build process\n\n  /**\n   * The build date for this release in UTC format.\n   * @property buildDate\n   * @type {String}\n   * @static\n   **/\n  s.buildDate = /*=date*/\"Thu, 14 Sep 2017 19:47:47 GMT\"; // injected by build process\n})();\n\n//##############################################################################\n// extend.js\n//##############################################################################\n\nwindow.createjs = window.createjs || {};\n\n/**\n * @class Utility Methods\n */\n\n/**\n * Sets up the prototype chain and constructor property for a new class.\n *\n * This should be called right after creating the class constructor.\n *\n * \tfunction MySubClass() {}\n * \tcreatejs.extend(MySubClass, MySuperClass);\n * \tMySubClass.prototype.doSomething = function() { }\n *\n * \tvar foo = new MySubClass();\n * \tconsole.log(foo instanceof MySuperClass); // true\n * \tconsole.log(foo.prototype.constructor === MySubClass); // true\n *\n * @method extend\n * @param {Function} subclass The subclass.\n * @param {Function} superclass The superclass to extend.\n * @return {Function} Returns the subclass's new prototype.\n */\ncreatejs.extend = function (subclass, superclass) {\n  \"use strict\";\n\n  function o() {\n    this.constructor = subclass;\n  }\n  o.prototype = superclass.prototype;\n  return subclass.prototype = new o();\n};\n\n//##############################################################################\n// promote.js\n//##############################################################################\n\nwindow.createjs = window.createjs || {};\n\n/**\n * @class Utility Methods\n */\n\n/**\n * Promotes any methods on the super class that were overridden, by creating an alias in the format `prefix_methodName`.\n * It is recommended to use the super class's name as the prefix.\n * An alias to the super class's constructor is always added in the format `prefix_constructor`.\n * This allows the subclass to call super class methods without using `function.call`, providing better performance.\n *\n * For example, if `MySubClass` extends `MySuperClass`, and both define a `draw` method, then calling `promote(MySubClass, \"MySuperClass\")`\n * would add a `MySuperClass_constructor` method to MySubClass and promote the `draw` method on `MySuperClass` to the\n * prototype of `MySubClass` as `MySuperClass_draw`.\n *\n * This should be called after the class's prototype is fully defined.\n *\n * \tfunction ClassA(name) {\n * \t\tthis.name = name;\n * \t}\n * \tClassA.prototype.greet = function() {\n * \t\treturn \"Hello \"+this.name;\n * \t}\n *\n * \tfunction ClassB(name, punctuation) {\n * \t\tthis.ClassA_constructor(name);\n * \t\tthis.punctuation = punctuation;\n * \t}\n * \tcreatejs.extend(ClassB, ClassA);\n * \tClassB.prototype.greet = function() {\n * \t\treturn this.ClassA_greet()+this.punctuation;\n * \t}\n * \tcreatejs.promote(ClassB, \"ClassA\");\n *\n * \tvar foo = new ClassB(\"World\", \"!?!\");\n * \tconsole.log(foo.greet()); // Hello World!?!\n *\n * @method promote\n * @param {Function} subclass The class to promote super class methods on.\n * @param {String} prefix The prefix to add to the promoted method names. Usually the name of the superclass.\n * @return {Function} Returns the subclass.\n */\ncreatejs.promote = function (subclass, prefix) {\n  \"use strict\";\n\n  var subP = subclass.prototype,\n    supP = Object.getPrototypeOf && Object.getPrototypeOf(subP) || subP.__proto__;\n  if (supP) {\n    subP[(prefix += \"_\") + \"constructor\"] = supP.constructor; // constructor is not always innumerable\n    for (var n in supP) {\n      if (subP.hasOwnProperty(n) && typeof supP[n] == \"function\") {\n        subP[prefix + n] = supP[n];\n      }\n    }\n  }\n  return subclass;\n};\n\n//##############################################################################\n// deprecate.js\n//##############################################################################\n\nwindow.createjs = window.createjs || {};\n\n/**\n * @class Utility Methods\n */\n\n/**\n * Wraps deprecated methods so they still be used, but throw warnings to developers.\n *\n *\tobj.deprecatedMethod = createjs.deprecate(\"Old Method Name\", obj._fallbackMethod);\n *\n * The recommended approach for deprecated properties is:\n *\n *\ttry {\n *\t\tObj\tect.defineProperties(object, {\n *\t\t\treadyOnlyProp: { get: createjs.deprecate(\"readOnlyProp\", function() { return this.alternateProp; }) },\n *\t\t\treadWriteProp: {\n *\t\t\t\tget: createjs.deprecate(\"readOnlyProp\", function() { return this.alternateProp; }),\n *\t\t\t\tset: createjs.deprecate(\"readOnlyProp\", function(val) { this.alternateProp = val; })\n *\t\t});\n *\t} catch (e) {}\n *\n * @method deprecate\n * @param {Function} [fallbackMethod=null] A method to call when the deprecated method is used. See the example for how\n * @param {String} [name=null] The name of the method or property to display in the console warning.\n * to deprecate properties.\n * @return {Function} If a fallbackMethod is supplied, returns a closure that will call the fallback method after\n * logging the warning in the console.\n */\ncreatejs.deprecate = function (fallbackMethod, name) {\n  \"use strict\";\n\n  return function () {\n    var msg = \"Deprecated property or method '\" + name + \"'. See docs for info.\";\n    console && (console.warn ? console.warn(msg) : console.log(msg));\n    return fallbackMethod && fallbackMethod.apply(this, arguments);\n  };\n};\n\n//##############################################################################\n// proxy.js\n//##############################################################################\n\nwindow.createjs = window.createjs || {};\n\n/**\n * Various utilities that the CreateJS Suite uses. Utilities are created as separate files, and will be available on the\n * createjs namespace directly.\n *\n * <h4>Example</h4>\n *\n *      myObject.addEventListener(\"change\", createjs.proxy(myMethod, scope));\n *\n * @class Utility Methods\n * @main Utility Methods\n */\n\n(function () {\n  \"use strict\";\n\n  /**\n   * A function proxy for methods. By default, JavaScript methods do not maintain scope, so passing a method as a\n   * callback will result in the method getting called in the scope of the caller. Using a proxy ensures that the\n   * method gets called in the correct scope.\n   *\n   * Additional arguments can be passed that will be applied to the function when it is called.\n   *\n   * <h4>Example</h4>\n   *\n   *      myObject.addEventListener(\"event\", createjs.proxy(myHandler, this, arg1, arg2));\n   *\n   *      function myHandler(arg1, arg2) {\n   *           // This gets called when myObject.myCallback is executed.\n   *      }\n   *\n   * @method proxy\n   * @param {Function} method The function to call\n   * @param {Object} scope The scope to call the method name on\n   * @param {mixed} [arg] * Arguments that are appended to the callback for additional params.\n   * @public\n   * @static\n   */\n  createjs.proxy = function (method, scope) {\n    var aArgs = Array.prototype.slice.call(arguments, 2);\n    return function () {\n      return method.apply(scope, Array.prototype.slice.call(arguments, 0).concat(aArgs));\n    };\n  };\n})();\n\n//##############################################################################\n// indexOf.js\n//##############################################################################\n\nwindow.createjs = window.createjs || {};\n\n/**\n * @class Utility Methods\n */\n\n/**\n * Finds the first occurrence of a specified value searchElement in the passed in array, and returns the index of\n * that value.  Returns -1 if value is not found.\n *\n *      var i = createjs.indexOf(myArray, myElementToFind);\n *\n * @method indexOf\n * @param {Array} array Array to search for searchElement\n * @param searchElement Element to find in array.\n * @return {Number} The first index of searchElement in array.\n */\ncreatejs.indexOf = function (array, searchElement) {\n  \"use strict\";\n\n  for (var i = 0, l = array.length; i < l; i++) {\n    if (searchElement === array[i]) {\n      return i;\n    }\n  }\n  return -1;\n};\n\n//##############################################################################\n// Event.js\n//##############################################################################\n\nwindow.createjs = window.createjs || {};\n(function () {\n  \"use strict\";\n\n  // constructor:\n  /**\n   * Contains properties and methods shared by all events for use with\n   * {{#crossLink \"EventDispatcher\"}}{{/crossLink}}.\n   * \n   * Note that Event objects are often reused, so you should never\n   * rely on an event object's state outside of the call stack it was received in.\n   * @class Event\n   * @param {String} type The event type.\n   * @param {Boolean} bubbles Indicates whether the event will bubble through the display list.\n   * @param {Boolean} cancelable Indicates whether the default behaviour of this event can be cancelled.\n   * @constructor\n   **/\n  function Event(type, bubbles, cancelable) {\n    // public properties:\n    /**\n     * The type of event.\n     * @property type\n     * @type String\n     **/\n    this.type = type;\n\n    /**\n     * The object that generated an event.\n     * @property target\n     * @type Object\n     * @default null\n     * @readonly\n    */\n    this.target = null;\n\n    /**\n     * The current target that a bubbling event is being dispatched from. For non-bubbling events, this will\n     * always be the same as target. For example, if childObj.parent = parentObj, and a bubbling event\n     * is generated from childObj, then a listener on parentObj would receive the event with\n     * target=childObj (the original target) and currentTarget=parentObj (where the listener was added).\n     * @property currentTarget\n     * @type Object\n     * @default null\n     * @readonly\n    */\n    this.currentTarget = null;\n\n    /**\n     * For bubbling events, this indicates the current event phase:<OL>\n     * \t<LI> capture phase: starting from the top parent to the target</LI>\n     * \t<LI> at target phase: currently being dispatched from the target</LI>\n     * \t<LI> bubbling phase: from the target to the top parent</LI>\n     * </OL>\n     * @property eventPhase\n     * @type Number\n     * @default 0\n     * @readonly\n    */\n    this.eventPhase = 0;\n\n    /**\n     * Indicates whether the event will bubble through the display list.\n     * @property bubbles\n     * @type Boolean\n     * @default false\n     * @readonly\n    */\n    this.bubbles = !!bubbles;\n\n    /**\n     * Indicates whether the default behaviour of this event can be cancelled via\n     * {{#crossLink \"Event/preventDefault\"}}{{/crossLink}}. This is set via the Event constructor.\n     * @property cancelable\n     * @type Boolean\n     * @default false\n     * @readonly\n    */\n    this.cancelable = !!cancelable;\n\n    /**\n     * The epoch time at which this event was created.\n     * @property timeStamp\n     * @type Number\n     * @default 0\n     * @readonly\n    */\n    this.timeStamp = new Date().getTime();\n\n    /**\n     * Indicates if {{#crossLink \"Event/preventDefault\"}}{{/crossLink}} has been called\n     * on this event.\n     * @property defaultPrevented\n     * @type Boolean\n     * @default false\n     * @readonly\n    */\n    this.defaultPrevented = false;\n\n    /**\n     * Indicates if {{#crossLink \"Event/stopPropagation\"}}{{/crossLink}} or\n     * {{#crossLink \"Event/stopImmediatePropagation\"}}{{/crossLink}} has been called on this event.\n     * @property propagationStopped\n     * @type Boolean\n     * @default false\n     * @readonly\n    */\n    this.propagationStopped = false;\n\n    /**\n     * Indicates if {{#crossLink \"Event/stopImmediatePropagation\"}}{{/crossLink}} has been called\n     * on this event.\n     * @property immediatePropagationStopped\n     * @type Boolean\n     * @default false\n     * @readonly\n    */\n    this.immediatePropagationStopped = false;\n\n    /**\n     * Indicates if {{#crossLink \"Event/remove\"}}{{/crossLink}} has been called on this event.\n     * @property removed\n     * @type Boolean\n     * @default false\n     * @readonly\n    */\n    this.removed = false;\n  }\n  var p = Event.prototype;\n\n  // public methods:\n  /**\n   * Sets {{#crossLink \"Event/defaultPrevented\"}}{{/crossLink}} to true if the event is cancelable.\n   * Mirrors the DOM level 2 event standard. In general, cancelable events that have `preventDefault()` called will\n   * cancel the default behaviour associated with the event.\n   * @method preventDefault\n   **/\n  p.preventDefault = function () {\n    this.defaultPrevented = this.cancelable && true;\n  };\n\n  /**\n   * Sets {{#crossLink \"Event/propagationStopped\"}}{{/crossLink}} to true.\n   * Mirrors the DOM event standard.\n   * @method stopPropagation\n   **/\n  p.stopPropagation = function () {\n    this.propagationStopped = true;\n  };\n\n  /**\n   * Sets {{#crossLink \"Event/propagationStopped\"}}{{/crossLink}} and\n   * {{#crossLink \"Event/immediatePropagationStopped\"}}{{/crossLink}} to true.\n   * Mirrors the DOM event standard.\n   * @method stopImmediatePropagation\n   **/\n  p.stopImmediatePropagation = function () {\n    this.immediatePropagationStopped = this.propagationStopped = true;\n  };\n\n  /**\n   * Causes the active listener to be removed via removeEventListener();\n   * \n   * \t\tmyBtn.addEventListener(\"click\", function(evt) {\n   * \t\t\t// do stuff...\n   * \t\t\tevt.remove(); // removes this listener.\n   * \t\t});\n   * \n   * @method remove\n   **/\n  p.remove = function () {\n    this.removed = true;\n  };\n\n  /**\n   * Returns a clone of the Event instance.\n   * @method clone\n   * @return {Event} a clone of the Event instance.\n   **/\n  p.clone = function () {\n    return new Event(this.type, this.bubbles, this.cancelable);\n  };\n\n  /**\n   * Provides a chainable shortcut method for setting a number of properties on the instance.\n   *\n   * @method set\n   * @param {Object} props A generic object containing properties to copy to the instance.\n   * @return {Event} Returns the instance the method is called on (useful for chaining calls.)\n   * @chainable\n  */\n  p.set = function (props) {\n    for (var n in props) {\n      this[n] = props[n];\n    }\n    return this;\n  };\n\n  /**\n   * Returns a string representation of this object.\n   * @method toString\n   * @return {String} a string representation of the instance.\n   **/\n  p.toString = function () {\n    return \"[Event (type=\" + this.type + \")]\";\n  };\n  createjs.Event = Event;\n})();\n\n//##############################################################################\n// ErrorEvent.js\n//##############################################################################\n\nwindow.createjs = window.createjs || {};\n(function () {\n  \"use strict\";\n\n  /**\n   * A general error {{#crossLink \"Event\"}}{{/crossLink}}, that describes an error that occurred, as well as any details.\n   * @class ErrorEvent\n   * @param {String} [title] The error title\n   * @param {String} [message] The error description\n   * @param {Object} [data] Additional error data\n   * @constructor\n   */\n  function ErrorEvent(title, message, data) {\n    this.Event_constructor(\"error\");\n\n    /**\n     * The short error title, which indicates the type of error that occurred.\n     * @property title\n     * @type String\n     */\n    this.title = title;\n\n    /**\n     * The verbose error message, containing details about the error.\n     * @property message\n     * @type String\n     */\n    this.message = message;\n\n    /**\n     * Additional data attached to an error.\n     * @property data\n     * @type {Object}\n     */\n    this.data = data;\n  }\n  var p = createjs.extend(ErrorEvent, createjs.Event);\n  p.clone = function () {\n    return new createjs.ErrorEvent(this.title, this.message, this.data);\n  };\n  createjs.ErrorEvent = createjs.promote(ErrorEvent, \"Event\");\n})();\n\n//##############################################################################\n// EventDispatcher.js\n//##############################################################################\n\nwindow.createjs = window.createjs || {};\n(function () {\n  \"use strict\";\n\n  // constructor:\n  /**\r\n   * EventDispatcher provides methods for managing queues of event listeners and dispatching events.\r\n   *\r\n   * You can either extend EventDispatcher or mix its methods into an existing prototype or instance by using the\r\n   * EventDispatcher {{#crossLink \"EventDispatcher/initialize\"}}{{/crossLink}} method.\r\n   * \r\n   * Together with the CreateJS Event class, EventDispatcher provides an extended event model that is based on the\r\n   * DOM Level 2 event model, including addEventListener, removeEventListener, and dispatchEvent. It supports\r\n   * bubbling / capture, preventDefault, stopPropagation, stopImmediatePropagation, and handleEvent.\r\n   * \r\n   * EventDispatcher also exposes a {{#crossLink \"EventDispatcher/on\"}}{{/crossLink}} method, which makes it easier\r\n   * to create scoped listeners, listeners that only run once, and listeners with associated arbitrary data. The \r\n   * {{#crossLink \"EventDispatcher/off\"}}{{/crossLink}} method is merely an alias to\r\n   * {{#crossLink \"EventDispatcher/removeEventListener\"}}{{/crossLink}}.\r\n   * \r\n   * Another addition to the DOM Level 2 model is the {{#crossLink \"EventDispatcher/removeAllEventListeners\"}}{{/crossLink}}\r\n   * method, which can be used to listeners for all events, or listeners for a specific event. The Event object also \r\n   * includes a {{#crossLink \"Event/remove\"}}{{/crossLink}} method which removes the active listener.\r\n   *\r\n   * <h4>Example</h4>\r\n   * Add EventDispatcher capabilities to the \"MyClass\" class.\r\n   *\r\n   *      EventDispatcher.initialize(MyClass.prototype);\r\n   *\r\n   * Add an event (see {{#crossLink \"EventDispatcher/addEventListener\"}}{{/crossLink}}).\r\n   *\r\n   *      instance.addEventListener(\"eventName\", handlerMethod);\r\n   *      function handlerMethod(event) {\r\n   *          console.log(event.target + \" Was Clicked\");\r\n   *      }\r\n   *\r\n   * <b>Maintaining proper scope</b><br />\r\n   * Scope (ie. \"this\") can be be a challenge with events. Using the {{#crossLink \"EventDispatcher/on\"}}{{/crossLink}}\r\n   * method to subscribe to events simplifies this.\r\n   *\r\n   *      instance.addEventListener(\"click\", function(event) {\r\n   *          console.log(instance == this); // false, scope is ambiguous.\r\n   *      });\r\n   *      \r\n   *      instance.on(\"click\", function(event) {\r\n   *          console.log(instance == this); // true, \"on\" uses dispatcher scope by default.\r\n   *      });\r\n   * \r\n   * If you want to use addEventListener instead, you may want to use function.bind() or a similar proxy to manage\r\n   * scope.\r\n   *\r\n   * <b>Browser support</b>\r\n   * The event model in CreateJS can be used separately from the suite in any project, however the inheritance model\r\n   * requires modern browsers (IE9+).\r\n   *      \r\n   *\r\n   * @class EventDispatcher\r\n   * @constructor\r\n   **/\n  function EventDispatcher() {\n    // private properties:\n    /**\r\n     * @protected\r\n     * @property _listeners\r\n     * @type Object\r\n     **/\n    this._listeners = null;\n\n    /**\r\n     * @protected\r\n     * @property _captureListeners\r\n     * @type Object\r\n     **/\n    this._captureListeners = null;\n  }\n  var p = EventDispatcher.prototype;\n\n  // static public methods:\n  /**\r\n   * Static initializer to mix EventDispatcher methods into a target object or prototype.\r\n   * \r\n   * \t\tEventDispatcher.initialize(MyClass.prototype); // add to the prototype of the class\r\n   * \t\tEventDispatcher.initialize(myObject); // add to a specific instance\r\n   * \r\n   * @method initialize\r\n   * @static\r\n   * @param {Object} target The target object to inject EventDispatcher methods into. This can be an instance or a\r\n   * prototype.\r\n   **/\n  EventDispatcher.initialize = function (target) {\n    target.addEventListener = p.addEventListener;\n    target.on = p.on;\n    target.removeEventListener = target.off = p.removeEventListener;\n    target.removeAllEventListeners = p.removeAllEventListeners;\n    target.hasEventListener = p.hasEventListener;\n    target.dispatchEvent = p.dispatchEvent;\n    target._dispatchEvent = p._dispatchEvent;\n    target.willTrigger = p.willTrigger;\n  };\n\n  // public methods:\n  /**\r\n   * Adds the specified event listener. Note that adding multiple listeners to the same function will result in\r\n   * multiple callbacks getting fired.\r\n   *\r\n   * <h4>Example</h4>\r\n   *\r\n   *      displayObject.addEventListener(\"click\", handleClick);\r\n   *      function handleClick(event) {\r\n   *         // Click happened.\r\n   *      }\r\n   *\r\n   * @method addEventListener\r\n   * @param {String} type The string type of the event.\r\n   * @param {Function | Object} listener An object with a handleEvent method, or a function that will be called when\r\n   * the event is dispatched.\r\n   * @param {Boolean} [useCapture] For events that bubble, indicates whether to listen for the event in the capture or bubbling/target phase.\r\n   * @return {Function | Object} Returns the listener for chaining or assignment.\r\n   **/\n  p.addEventListener = function (type, listener, useCapture) {\n    var listeners;\n    if (useCapture) {\n      listeners = this._captureListeners = this._captureListeners || {};\n    } else {\n      listeners = this._listeners = this._listeners || {};\n    }\n    var arr = listeners[type];\n    if (arr) {\n      this.removeEventListener(type, listener, useCapture);\n    }\n    arr = listeners[type]; // remove may have deleted the array\n    if (!arr) {\n      listeners[type] = [listener];\n    } else {\n      arr.push(listener);\n    }\n    return listener;\n  };\n\n  /**\r\n   * A shortcut method for using addEventListener that makes it easier to specify an execution scope, have a listener\r\n   * only run once, associate arbitrary data with the listener, and remove the listener.\r\n   * \r\n   * This method works by creating an anonymous wrapper function and subscribing it with addEventListener.\r\n   * The wrapper function is returned for use with `removeEventListener` (or `off`).\r\n   * \r\n   * <b>IMPORTANT:</b> To remove a listener added with `on`, you must pass in the returned wrapper function as the listener, or use\r\n   * {{#crossLink \"Event/remove\"}}{{/crossLink}}. Likewise, each time you call `on` a NEW wrapper function is subscribed, so multiple calls\r\n   * to `on` with the same params will create multiple listeners.\r\n   * \r\n   * <h4>Example</h4>\r\n   * \r\n   * \t\tvar listener = myBtn.on(\"click\", handleClick, null, false, {count:3});\r\n   * \t\tfunction handleClick(evt, data) {\r\n   * \t\t\tdata.count -= 1;\r\n   * \t\t\tconsole.log(this == myBtn); // true - scope defaults to the dispatcher\r\n   * \t\t\tif (data.count == 0) {\r\n   * \t\t\t\talert(\"clicked 3 times!\");\r\n   * \t\t\t\tmyBtn.off(\"click\", listener);\r\n   * \t\t\t\t// alternately: evt.remove();\r\n   * \t\t\t}\r\n   * \t\t}\r\n   * \r\n   * @method on\r\n   * @param {String} type The string type of the event.\r\n   * @param {Function | Object} listener An object with a handleEvent method, or a function that will be called when\r\n   * the event is dispatched.\r\n   * @param {Object} [scope] The scope to execute the listener in. Defaults to the dispatcher/currentTarget for function listeners, and to the listener itself for object listeners (ie. using handleEvent).\r\n   * @param {Boolean} [once=false] If true, the listener will remove itself after the first time it is triggered.\r\n   * @param {*} [data] Arbitrary data that will be included as the second parameter when the listener is called.\r\n   * @param {Boolean} [useCapture=false] For events that bubble, indicates whether to listen for the event in the capture or bubbling/target phase.\r\n   * @return {Function} Returns the anonymous function that was created and assigned as the listener. This is needed to remove the listener later using .removeEventListener.\r\n   **/\n  p.on = function (type, listener, scope, once, data, useCapture) {\n    if (listener.handleEvent) {\n      scope = scope || listener;\n      listener = listener.handleEvent;\n    }\n    scope = scope || this;\n    return this.addEventListener(type, function (evt) {\n      listener.call(scope, evt, data);\n      once && evt.remove();\n    }, useCapture);\n  };\n\n  /**\r\n   * Removes the specified event listener.\r\n   *\r\n   * <b>Important Note:</b> that you must pass the exact function reference used when the event was added. If a proxy\r\n   * function, or function closure is used as the callback, the proxy/closure reference must be used - a new proxy or\r\n   * closure will not work.\r\n   *\r\n   * <h4>Example</h4>\r\n   *\r\n   *      displayObject.removeEventListener(\"click\", handleClick);\r\n   *\r\n   * @method removeEventListener\r\n   * @param {String} type The string type of the event.\r\n   * @param {Function | Object} listener The listener function or object.\r\n   * @param {Boolean} [useCapture] For events that bubble, indicates whether to listen for the event in the capture or bubbling/target phase.\r\n   **/\n  p.removeEventListener = function (type, listener, useCapture) {\n    var listeners = useCapture ? this._captureListeners : this._listeners;\n    if (!listeners) {\n      return;\n    }\n    var arr = listeners[type];\n    if (!arr) {\n      return;\n    }\n    for (var i = 0, l = arr.length; i < l; i++) {\n      if (arr[i] == listener) {\n        if (l == 1) {\n          delete listeners[type];\n        } // allows for faster checks.\n        else {\n          arr.splice(i, 1);\n        }\n        break;\n      }\n    }\n  };\n\n  /**\r\n   * A shortcut to the removeEventListener method, with the same parameters and return value. This is a companion to the\r\n   * .on method.\r\n   * \r\n   * <b>IMPORTANT:</b> To remove a listener added with `on`, you must pass in the returned wrapper function as the listener. See \r\n   * {{#crossLink \"EventDispatcher/on\"}}{{/crossLink}} for an example.\r\n   *\r\n   * @method off\r\n   * @param {String} type The string type of the event.\r\n   * @param {Function | Object} listener The listener function or object.\r\n   * @param {Boolean} [useCapture] For events that bubble, indicates whether to listen for the event in the capture or bubbling/target phase.\r\n   **/\n  p.off = p.removeEventListener;\n\n  /**\r\n   * Removes all listeners for the specified type, or all listeners of all types.\r\n   *\r\n   * <h4>Example</h4>\r\n   *\r\n   *      // Remove all listeners\r\n   *      displayObject.removeAllEventListeners();\r\n   *\r\n   *      // Remove all click listeners\r\n   *      displayObject.removeAllEventListeners(\"click\");\r\n   *\r\n   * @method removeAllEventListeners\r\n   * @param {String} [type] The string type of the event. If omitted, all listeners for all types will be removed.\r\n   **/\n  p.removeAllEventListeners = function (type) {\n    if (!type) {\n      this._listeners = this._captureListeners = null;\n    } else {\n      if (this._listeners) {\n        delete this._listeners[type];\n      }\n      if (this._captureListeners) {\n        delete this._captureListeners[type];\n      }\n    }\n  };\n\n  /**\r\n   * Dispatches the specified event to all listeners.\r\n   *\r\n   * <h4>Example</h4>\r\n   *\r\n   *      // Use a string event\r\n   *      this.dispatchEvent(\"complete\");\r\n   *\r\n   *      // Use an Event instance\r\n   *      var event = new createjs.Event(\"progress\");\r\n   *      this.dispatchEvent(event);\r\n   *\r\n   * @method dispatchEvent\r\n   * @param {Object | String | Event} eventObj An object with a \"type\" property, or a string type.\r\n   * While a generic object will work, it is recommended to use a CreateJS Event instance. If a string is used,\r\n   * dispatchEvent will construct an Event instance if necessary with the specified type. This latter approach can\r\n   * be used to avoid event object instantiation for non-bubbling events that may not have any listeners.\r\n   * @param {Boolean} [bubbles] Specifies the `bubbles` value when a string was passed to eventObj.\r\n   * @param {Boolean} [cancelable] Specifies the `cancelable` value when a string was passed to eventObj.\r\n   * @return {Boolean} Returns false if `preventDefault()` was called on a cancelable event, true otherwise.\r\n   **/\n  p.dispatchEvent = function (eventObj, bubbles, cancelable) {\n    if (typeof eventObj == \"string\") {\n      // skip everything if there's no listeners and it doesn't bubble:\n      var listeners = this._listeners;\n      if (!bubbles && (!listeners || !listeners[eventObj])) {\n        return true;\n      }\n      eventObj = new createjs.Event(eventObj, bubbles, cancelable);\n    } else if (eventObj.target && eventObj.clone) {\n      // redispatching an active event object, so clone it:\n      eventObj = eventObj.clone();\n    }\n\n    // TODO: it would be nice to eliminate this. Maybe in favour of evtObj instanceof Event? Or !!evtObj.createEvent\n    try {\n      eventObj.target = this;\n    } catch (e) {} // try/catch allows redispatching of native events\n\n    if (!eventObj.bubbles || !this.parent) {\n      this._dispatchEvent(eventObj, 2);\n    } else {\n      var top = this,\n        list = [top];\n      while (top.parent) {\n        list.push(top = top.parent);\n      }\n      var i,\n        l = list.length;\n\n      // capture & atTarget\n      for (i = l - 1; i >= 0 && !eventObj.propagationStopped; i--) {\n        list[i]._dispatchEvent(eventObj, 1 + (i == 0));\n      }\n      // bubbling\n      for (i = 1; i < l && !eventObj.propagationStopped; i++) {\n        list[i]._dispatchEvent(eventObj, 3);\n      }\n    }\n    return !eventObj.defaultPrevented;\n  };\n\n  /**\r\n   * Indicates whether there is at least one listener for the specified event type.\r\n   * @method hasEventListener\r\n   * @param {String} type The string type of the event.\r\n   * @return {Boolean} Returns true if there is at least one listener for the specified event.\r\n   **/\n  p.hasEventListener = function (type) {\n    var listeners = this._listeners,\n      captureListeners = this._captureListeners;\n    return !!(listeners && listeners[type] || captureListeners && captureListeners[type]);\n  };\n\n  /**\r\n   * Indicates whether there is at least one listener for the specified event type on this object or any of its\r\n   * ancestors (parent, parent's parent, etc). A return value of true indicates that if a bubbling event of the\r\n   * specified type is dispatched from this object, it will trigger at least one listener.\r\n   * \r\n   * This is similar to {{#crossLink \"EventDispatcher/hasEventListener\"}}{{/crossLink}}, but it searches the entire\r\n   * event flow for a listener, not just this object.\r\n   * @method willTrigger\r\n   * @param {String} type The string type of the event.\r\n   * @return {Boolean} Returns `true` if there is at least one listener for the specified event.\r\n   **/\n  p.willTrigger = function (type) {\n    var o = this;\n    while (o) {\n      if (o.hasEventListener(type)) {\n        return true;\n      }\n      o = o.parent;\n    }\n    return false;\n  };\n\n  /**\r\n   * @method toString\r\n   * @return {String} a string representation of the instance.\r\n   **/\n  p.toString = function () {\n    return \"[EventDispatcher]\";\n  };\n\n  // private methods:\n  /**\r\n   * @method _dispatchEvent\r\n   * @param {Object | Event} eventObj\r\n   * @param {Object} eventPhase\r\n   * @protected\r\n   **/\n  p._dispatchEvent = function (eventObj, eventPhase) {\n    var l,\n      arr,\n      listeners = eventPhase <= 2 ? this._captureListeners : this._listeners;\n    if (eventObj && listeners && (arr = listeners[eventObj.type]) && (l = arr.length)) {\n      try {\n        eventObj.currentTarget = this;\n      } catch (e) {}\n      try {\n        eventObj.eventPhase = eventPhase | 0;\n      } catch (e) {}\n      eventObj.removed = false;\n      arr = arr.slice(); // to avoid issues with items being removed or added during the dispatch\n      for (var i = 0; i < l && !eventObj.immediatePropagationStopped; i++) {\n        var o = arr[i];\n        if (o.handleEvent) {\n          o.handleEvent(eventObj);\n        } else {\n          o(eventObj);\n        }\n        if (eventObj.removed) {\n          this.off(eventObj.type, o, eventPhase == 1);\n          eventObj.removed = false;\n        }\n      }\n    }\n    if (eventPhase === 2) {\n      this._dispatchEvent(eventObj, 2.1);\n    }\n  };\n  createjs.EventDispatcher = EventDispatcher;\n})();\n\n//##############################################################################\n// ProgressEvent.js\n//##############################################################################\n\nwindow.createjs = window.createjs || {};\n(function (scope) {\n  \"use strict\";\n\n  // constructor\n  /**\n   * A CreateJS {{#crossLink \"Event\"}}{{/crossLink}} that is dispatched when progress changes.\n   * @class ProgressEvent\n   * @param {Number} loaded The amount that has been loaded. This can be any number relative to the total.\n   * @param {Number} [total=1] The total amount that will load. This will default to 1, so if the `loaded` value is\n   * a percentage (between 0 and 1), it can be omitted.\n   * @todo Consider having this event be a \"fileprogress\" event as well\n   * @constructor\n   */\n  function ProgressEvent(loaded, total) {\n    this.Event_constructor(\"progress\");\n\n    /**\n     * The amount that has been loaded (out of a total amount)\n     * @property loaded\n     * @type {Number}\n     */\n    this.loaded = loaded;\n\n    /**\n     * The total \"size\" of the load.\n     * @property total\n     * @type {Number}\n     * @default 1\n     */\n    this.total = total == null ? 1 : total;\n\n    /**\n     * The percentage (out of 1) that the load has been completed. This is calculated using `loaded/total`.\n     * @property progress\n     * @type {Number}\n     * @default 0\n     */\n    this.progress = total == 0 ? 0 : this.loaded / this.total;\n  }\n  ;\n  var p = createjs.extend(ProgressEvent, createjs.Event);\n\n  /**\n   * Returns a clone of the ProgressEvent instance.\n   * @method clone\n   * @return {ProgressEvent} a clone of the Event instance.\n   **/\n  p.clone = function () {\n    return new createjs.ProgressEvent(this.loaded, this.total);\n  };\n  createjs.ProgressEvent = createjs.promote(ProgressEvent, \"Event\");\n})(window);\n\n//##############################################################################\n// json3.js\n//##############################################################################\n\n/*! JSON v3.3.2 | http://bestiejs.github.io/json3 | Copyright 2012-2014, Kit Cambridge | http://kit.mit-license.org */\n;\n(function () {\n  // Detect the `define` function exposed by asynchronous module loaders. The\n  // strict `define` check is necessary for compatibility with `r.js`.\n  var isLoader = typeof define === \"function\" && define.amd;\n\n  // A set of types used to distinguish objects from primitives.\n  var objectTypes = {\n    \"function\": true,\n    \"object\": true\n  };\n\n  // Detect the `exports` object exposed by CommonJS implementations.\n  var freeExports = objectTypes[typeof exports] && exports && !exports.nodeType && exports;\n\n  // Use the `global` object exposed by Node (including Browserify via\n  // `insert-module-globals`), Narwhal, and Ringo as the default context,\n  // and the `window` object in browsers. Rhino exports a `global` function\n  // instead.\n  var root = objectTypes[typeof window] && window || this,\n    freeGlobal = freeExports && objectTypes[typeof module] && module && !module.nodeType && typeof global == \"object\" && global;\n  if (freeGlobal && (freeGlobal[\"global\"] === freeGlobal || freeGlobal[\"window\"] === freeGlobal || freeGlobal[\"self\"] === freeGlobal)) {\n    root = freeGlobal;\n  }\n\n  // Public: Initializes JSON 3 using the given `context` object, attaching the\n  // `stringify` and `parse` functions to the specified `exports` object.\n  function runInContext(context, exports) {\n    context || (context = root[\"Object\"]());\n    exports || (exports = root[\"Object\"]());\n\n    // Native constructor aliases.\n    var Number = context[\"Number\"] || root[\"Number\"],\n      String = context[\"String\"] || root[\"String\"],\n      Object = context[\"Object\"] || root[\"Object\"],\n      Date = context[\"Date\"] || root[\"Date\"],\n      SyntaxError = context[\"SyntaxError\"] || root[\"SyntaxError\"],\n      TypeError = context[\"TypeError\"] || root[\"TypeError\"],\n      Math = context[\"Math\"] || root[\"Math\"],\n      nativeJSON = context[\"JSON\"] || root[\"JSON\"];\n\n    // Delegate to the native `stringify` and `parse` implementations.\n    if (typeof nativeJSON == \"object\" && nativeJSON) {\n      exports.stringify = nativeJSON.stringify;\n      exports.parse = nativeJSON.parse;\n    }\n\n    // Convenience aliases.\n    var objectProto = Object.prototype,\n      getClass = objectProto.toString,\n      isProperty,\n      forEach,\n      undef;\n\n    // Test the `Date#getUTC*` methods. Based on work by @Yaffle.\n    var isExtended = new Date(-3509827334573292);\n    try {\n      // The `getUTCFullYear`, `Month`, and `Date` methods return nonsensical\n      // results for certain dates in Opera >= 10.53.\n      isExtended = isExtended.getUTCFullYear() == -109252 && isExtended.getUTCMonth() === 0 && isExtended.getUTCDate() === 1 &&\n      // Safari < 2.0.2 stores the internal millisecond time value correctly,\n      // but clips the values returned by the date methods to the range of\n      // signed 32-bit integers ([-2 ** 31, 2 ** 31 - 1]).\n      isExtended.getUTCHours() == 10 && isExtended.getUTCMinutes() == 37 && isExtended.getUTCSeconds() == 6 && isExtended.getUTCMilliseconds() == 708;\n    } catch (exception) {}\n\n    // Internal: Determines whether the native `JSON.stringify` and `parse`\n    // implementations are spec-compliant. Based on work by Ken Snyder.\n    function has(name) {\n      if (has[name] !== undef) {\n        // Return cached feature test result.\n        return has[name];\n      }\n      var isSupported;\n      if (name == \"bug-string-char-index\") {\n        // IE <= 7 doesn't support accessing string characters using square\n        // bracket notation. IE 8 only supports this for primitives.\n        isSupported = \"a\"[0] != \"a\";\n      } else if (name == \"json\") {\n        // Indicates whether both `JSON.stringify` and `JSON.parse` are\n        // supported.\n        isSupported = has(\"json-stringify\") && has(\"json-parse\");\n      } else {\n        var value,\n          serialized = '{\"a\":[1,true,false,null,\"\\\\u0000\\\\b\\\\n\\\\f\\\\r\\\\t\"]}';\n        // Test `JSON.stringify`.\n        if (name == \"json-stringify\") {\n          var stringify = exports.stringify,\n            stringifySupported = typeof stringify == \"function\" && isExtended;\n          if (stringifySupported) {\n            // A test function object with a custom `toJSON` method.\n            (value = function () {\n              return 1;\n            }).toJSON = value;\n            try {\n              stringifySupported =\n              // Firefox 3.1b1 and b2 serialize string, number, and boolean\n              // primitives as object literals.\n              stringify(0) === \"0\" &&\n              // FF 3.1b1, b2, and JSON 2 serialize wrapped primitives as object\n              // literals.\n              stringify(new Number()) === \"0\" && stringify(new String()) == '\"\"' &&\n              // FF 3.1b1, 2 throw an error if the value is `null`, `undefined`, or\n              // does not define a canonical JSON representation (this applies to\n              // objects with `toJSON` properties as well, *unless* they are nested\n              // within an object or array).\n              stringify(getClass) === undef &&\n              // IE 8 serializes `undefined` as `\"undefined\"`. Safari <= 5.1.7 and\n              // FF 3.1b3 pass this test.\n              stringify(undef) === undef &&\n              // Safari <= 5.1.7 and FF 3.1b3 throw `Error`s and `TypeError`s,\n              // respectively, if the value is omitted entirely.\n              stringify() === undef &&\n              // FF 3.1b1, 2 throw an error if the given value is not a number,\n              // string, array, object, Boolean, or `null` literal. This applies to\n              // objects with custom `toJSON` methods as well, unless they are nested\n              // inside object or array literals. YUI 3.0.0b1 ignores custom `toJSON`\n              // methods entirely.\n              stringify(value) === \"1\" && stringify([value]) == \"[1]\" &&\n              // Prototype <= 1.6.1 serializes `[undefined]` as `\"[]\"` instead of\n              // `\"[null]\"`.\n              stringify([undef]) == \"[null]\" &&\n              // YUI 3.0.0b1 fails to serialize `null` literals.\n              stringify(null) == \"null\" &&\n              // FF 3.1b1, 2 halts serialization if an array contains a function:\n              // `[1, true, getClass, 1]` serializes as \"[1,true,],\". FF 3.1b3\n              // elides non-JSON values from objects and arrays, unless they\n              // define custom `toJSON` methods.\n              stringify([undef, getClass, null]) == \"[null,null,null]\" &&\n              // Simple serialization test. FF 3.1b1 uses Unicode escape sequences\n              // where character escape codes are expected (e.g., `\\b` => `\\u0008`).\n              stringify({\n                \"a\": [value, true, false, null, \"\\x00\\b\\n\\f\\r\\t\"]\n              }) == serialized &&\n              // FF 3.1b1 and b2 ignore the `filter` and `width` arguments.\n              stringify(null, value) === \"1\" && stringify([1, 2], null, 1) == \"[\\n 1,\\n 2\\n]\" &&\n              // JSON 2, Prototype <= 1.7, and older WebKit builds incorrectly\n              // serialize extended years.\n              stringify(new Date(-8.64e15)) == '\"-271821-04-20T00:00:00.000Z\"' &&\n              // The milliseconds are optional in ES 5, but required in 5.1.\n              stringify(new Date(8.64e15)) == '\"+275760-09-13T00:00:00.000Z\"' &&\n              // Firefox <= 11.0 incorrectly serializes years prior to 0 as negative\n              // four-digit years instead of six-digit years. Credits: @Yaffle.\n              stringify(new Date(-621987552e5)) == '\"-000001-01-01T00:00:00.000Z\"' &&\n              // Safari <= 5.1.5 and Opera >= 10.53 incorrectly serialize millisecond\n              // values less than 1000. Credits: @Yaffle.\n              stringify(new Date(-1)) == '\"1969-12-31T23:59:59.999Z\"';\n            } catch (exception) {\n              stringifySupported = false;\n            }\n          }\n          isSupported = stringifySupported;\n        }\n        // Test `JSON.parse`.\n        if (name == \"json-parse\") {\n          var parse = exports.parse;\n          if (typeof parse == \"function\") {\n            try {\n              // FF 3.1b1, b2 will throw an exception if a bare literal is provided.\n              // Conforming implementations should also coerce the initial argument to\n              // a string prior to parsing.\n              if (parse(\"0\") === 0 && !parse(false)) {\n                // Simple parsing test.\n                value = parse(serialized);\n                var parseSupported = value[\"a\"].length == 5 && value[\"a\"][0] === 1;\n                if (parseSupported) {\n                  try {\n                    // Safari <= 5.1.2 and FF 3.1b1 allow unescaped tabs in strings.\n                    parseSupported = !parse('\"\\t\"');\n                  } catch (exception) {}\n                  if (parseSupported) {\n                    try {\n                      // FF 4.0 and 4.0.1 allow leading `+` signs and leading\n                      // decimal points. FF 4.0, 4.0.1, and IE 9-10 also allow\n                      // certain octal literals.\n                      parseSupported = parse(\"01\") !== 1;\n                    } catch (exception) {}\n                  }\n                  if (parseSupported) {\n                    try {\n                      // FF 4.0, 4.0.1, and Rhino 1.7R3-R4 allow trailing decimal\n                      // points. These environments, along with FF 3.1b1 and 2,\n                      // also allow trailing commas in JSON objects and arrays.\n                      parseSupported = parse(\"1.\") !== 1;\n                    } catch (exception) {}\n                  }\n                }\n              }\n            } catch (exception) {\n              parseSupported = false;\n            }\n          }\n          isSupported = parseSupported;\n        }\n      }\n      return has[name] = !!isSupported;\n    }\n    if (!has(\"json\")) {\n      // Common `[[Class]]` name aliases.\n      var functionClass = \"[object Function]\",\n        dateClass = \"[object Date]\",\n        numberClass = \"[object Number]\",\n        stringClass = \"[object String]\",\n        arrayClass = \"[object Array]\",\n        booleanClass = \"[object Boolean]\";\n\n      // Detect incomplete support for accessing string characters by index.\n      var charIndexBuggy = has(\"bug-string-char-index\");\n\n      // Define additional utility methods if the `Date` methods are buggy.\n      if (!isExtended) {\n        var floor = Math.floor;\n        // A mapping between the months of the year and the number of days between\n        // January 1st and the first of the respective month.\n        var Months = [0, 31, 59, 90, 120, 151, 181, 212, 243, 273, 304, 334];\n        // Internal: Calculates the number of days between the Unix epoch and the\n        // first day of the given month.\n        var getDay = function (year, month) {\n          return Months[month] + 365 * (year - 1970) + floor((year - 1969 + (month = +(month > 1))) / 4) - floor((year - 1901 + month) / 100) + floor((year - 1601 + month) / 400);\n        };\n      }\n\n      // Internal: Determines if a property is a direct property of the given\n      // object. Delegates to the native `Object#hasOwnProperty` method.\n      if (!(isProperty = objectProto.hasOwnProperty)) {\n        isProperty = function (property) {\n          var members = {},\n            constructor;\n          if ((members.__proto__ = null, members.__proto__ = {\n            // The *proto* property cannot be set multiple times in recent\n            // versions of Firefox and SeaMonkey.\n            \"toString\": 1\n          }, members).toString != getClass) {\n            // Safari <= 2.0.3 doesn't implement `Object#hasOwnProperty`, but\n            // supports the mutable *proto* property.\n            isProperty = function (property) {\n              // Capture and break the object's prototype chain (see section 8.6.2\n              // of the ES 5.1 spec). The parenthesized expression prevents an\n              // unsafe transformation by the Closure Compiler.\n              var original = this.__proto__,\n                result = (property in (this.__proto__ = null, this));\n              // Restore the original prototype chain.\n              this.__proto__ = original;\n              return result;\n            };\n          } else {\n            // Capture a reference to the top-level `Object` constructor.\n            constructor = members.constructor;\n            // Use the `constructor` property to simulate `Object#hasOwnProperty` in\n            // other environments.\n            isProperty = function (property) {\n              var parent = (this.constructor || constructor).prototype;\n              return property in this && !(property in parent && this[property] === parent[property]);\n            };\n          }\n          members = null;\n          return isProperty.call(this, property);\n        };\n      }\n\n      // Internal: Normalizes the `for...in` iteration algorithm across\n      // environments. Each enumerated key is yielded to a `callback` function.\n      forEach = function (object, callback) {\n        var size = 0,\n          Properties,\n          members,\n          property;\n\n        // Tests for bugs in the current environment's `for...in` algorithm. The\n        // `valueOf` property inherits the non-enumerable flag from\n        // `Object.prototype` in older versions of IE, Netscape, and Mozilla.\n        (Properties = function () {\n          this.valueOf = 0;\n        }).prototype.valueOf = 0;\n\n        // Iterate over a new instance of the `Properties` class.\n        members = new Properties();\n        for (property in members) {\n          // Ignore all properties inherited from `Object.prototype`.\n          if (isProperty.call(members, property)) {\n            size++;\n          }\n        }\n        Properties = members = null;\n\n        // Normalize the iteration algorithm.\n        if (!size) {\n          // A list of non-enumerable properties inherited from `Object.prototype`.\n          members = [\"valueOf\", \"toString\", \"toLocaleString\", \"propertyIsEnumerable\", \"isPrototypeOf\", \"hasOwnProperty\", \"constructor\"];\n          // IE <= 8, Mozilla 1.0, and Netscape 6.2 ignore shadowed non-enumerable\n          // properties.\n          forEach = function (object, callback) {\n            var isFunction = getClass.call(object) == functionClass,\n              property,\n              length;\n            var hasProperty = !isFunction && typeof object.constructor != \"function\" && objectTypes[typeof object.hasOwnProperty] && object.hasOwnProperty || isProperty;\n            for (property in object) {\n              // Gecko <= 1.0 enumerates the `prototype` property of functions under\n              // certain conditions; IE does not.\n              if (!(isFunction && property == \"prototype\") && hasProperty.call(object, property)) {\n                callback(property);\n              }\n            }\n            // Manually invoke the callback for each non-enumerable property.\n            for (length = members.length; property = members[--length]; hasProperty.call(object, property) && callback(property));\n          };\n        } else if (size == 2) {\n          // Safari <= 2.0.4 enumerates shadowed properties twice.\n          forEach = function (object, callback) {\n            // Create a set of iterated properties.\n            var members = {},\n              isFunction = getClass.call(object) == functionClass,\n              property;\n            for (property in object) {\n              // Store each property name to prevent double enumeration. The\n              // `prototype` property of functions is not enumerated due to cross-\n              // environment inconsistencies.\n              if (!(isFunction && property == \"prototype\") && !isProperty.call(members, property) && (members[property] = 1) && isProperty.call(object, property)) {\n                callback(property);\n              }\n            }\n          };\n        } else {\n          // No bugs detected; use the standard `for...in` algorithm.\n          forEach = function (object, callback) {\n            var isFunction = getClass.call(object) == functionClass,\n              property,\n              isConstructor;\n            for (property in object) {\n              if (!(isFunction && property == \"prototype\") && isProperty.call(object, property) && !(isConstructor = property === \"constructor\")) {\n                callback(property);\n              }\n            }\n            // Manually invoke the callback for the `constructor` property due to\n            // cross-environment inconsistencies.\n            if (isConstructor || isProperty.call(object, property = \"constructor\")) {\n              callback(property);\n            }\n          };\n        }\n        return forEach(object, callback);\n      };\n\n      // Public: Serializes a JavaScript `value` as a JSON string. The optional\n      // `filter` argument may specify either a function that alters how object and\n      // array members are serialized, or an array of strings and numbers that\n      // indicates which properties should be serialized. The optional `width`\n      // argument may be either a string or number that specifies the indentation\n      // level of the output.\n      if (!has(\"json-stringify\")) {\n        // Internal: A map of control characters and their escaped equivalents.\n        var Escapes = {\n          92: \"\\\\\\\\\",\n          34: '\\\\\"',\n          8: \"\\\\b\",\n          12: \"\\\\f\",\n          10: \"\\\\n\",\n          13: \"\\\\r\",\n          9: \"\\\\t\"\n        };\n\n        // Internal: Converts `value` into a zero-padded string such that its\n        // length is at least equal to `width`. The `width` must be <= 6.\n        var leadingZeroes = \"000000\";\n        var toPaddedString = function (width, value) {\n          // The `|| 0` expression is necessary to work around a bug in\n          // Opera <= 7.54u2 where `0 == -0`, but `String(-0) !== \"0\"`.\n          return (leadingZeroes + (value || 0)).slice(-width);\n        };\n\n        // Internal: Double-quotes a string `value`, replacing all ASCII control\n        // characters (characters with code unit values between 0 and 31) with\n        // their escaped equivalents. This is an implementation of the\n        // `Quote(value)` operation defined in ES 5.1 section 15.12.3.\n        var unicodePrefix = \"\\\\u00\";\n        var quote = function (value) {\n          var result = '\"',\n            index = 0,\n            length = value.length,\n            useCharIndex = !charIndexBuggy || length > 10;\n          var symbols = useCharIndex && (charIndexBuggy ? value.split(\"\") : value);\n          for (; index < length; index++) {\n            var charCode = value.charCodeAt(index);\n            // If the character is a control character, append its Unicode or\n            // shorthand escape sequence; otherwise, append the character as-is.\n            switch (charCode) {\n              case 8:\n              case 9:\n              case 10:\n              case 12:\n              case 13:\n              case 34:\n              case 92:\n                result += Escapes[charCode];\n                break;\n              default:\n                if (charCode < 32) {\n                  result += unicodePrefix + toPaddedString(2, charCode.toString(16));\n                  break;\n                }\n                result += useCharIndex ? symbols[index] : value.charAt(index);\n            }\n          }\n          return result + '\"';\n        };\n\n        // Internal: Recursively serializes an object. Implements the\n        // `Str(key, holder)`, `JO(value)`, and `JA(value)` operations.\n        var serialize = function (property, object, callback, properties, whitespace, indentation, stack) {\n          var value, className, year, month, date, time, hours, minutes, seconds, milliseconds, results, element, index, length, prefix, result;\n          try {\n            // Necessary for host object support.\n            value = object[property];\n          } catch (exception) {}\n          if (typeof value == \"object\" && value) {\n            className = getClass.call(value);\n            if (className == dateClass && !isProperty.call(value, \"toJSON\")) {\n              if (value > -1 / 0 && value < 1 / 0) {\n                // Dates are serialized according to the `Date#toJSON` method\n                // specified in ES 5.1 section 15.9.5.44. See section 15.9.1.15\n                // for the ISO 8601 date time string format.\n                if (getDay) {\n                  // Manually compute the year, month, date, hours, minutes,\n                  // seconds, and milliseconds if the `getUTC*` methods are\n                  // buggy. Adapted from @Yaffle's `date-shim` project.\n                  date = floor(value / 864e5);\n                  for (year = floor(date / 365.2425) + 1970 - 1; getDay(year + 1, 0) <= date; year++);\n                  for (month = floor((date - getDay(year, 0)) / 30.42); getDay(year, month + 1) <= date; month++);\n                  date = 1 + date - getDay(year, month);\n                  // The `time` value specifies the time within the day (see ES\n                  // 5.1 section 15.9.1.2). The formula `(A % B + B) % B` is used\n                  // to compute `A modulo B`, as the `%` operator does not\n                  // correspond to the `modulo` operation for negative numbers.\n                  time = (value % 864e5 + 864e5) % 864e5;\n                  // The hours, minutes, seconds, and milliseconds are obtained by\n                  // decomposing the time within the day. See section 15.9.1.10.\n                  hours = floor(time / 36e5) % 24;\n                  minutes = floor(time / 6e4) % 60;\n                  seconds = floor(time / 1e3) % 60;\n                  milliseconds = time % 1e3;\n                } else {\n                  year = value.getUTCFullYear();\n                  month = value.getUTCMonth();\n                  date = value.getUTCDate();\n                  hours = value.getUTCHours();\n                  minutes = value.getUTCMinutes();\n                  seconds = value.getUTCSeconds();\n                  milliseconds = value.getUTCMilliseconds();\n                }\n                // Serialize extended years correctly.\n                value = (year <= 0 || year >= 1e4 ? (year < 0 ? \"-\" : \"+\") + toPaddedString(6, year < 0 ? -year : year) : toPaddedString(4, year)) + \"-\" + toPaddedString(2, month + 1) + \"-\" + toPaddedString(2, date) +\n                // Months, dates, hours, minutes, and seconds should have two\n                // digits; milliseconds should have three.\n                \"T\" + toPaddedString(2, hours) + \":\" + toPaddedString(2, minutes) + \":\" + toPaddedString(2, seconds) +\n                // Milliseconds are optional in ES 5.0, but required in 5.1.\n                \".\" + toPaddedString(3, milliseconds) + \"Z\";\n              } else {\n                value = null;\n              }\n            } else if (typeof value.toJSON == \"function\" && (className != numberClass && className != stringClass && className != arrayClass || isProperty.call(value, \"toJSON\"))) {\n              // Prototype <= 1.6.1 adds non-standard `toJSON` methods to the\n              // `Number`, `String`, `Date`, and `Array` prototypes. JSON 3\n              // ignores all `toJSON` methods on these objects unless they are\n              // defined directly on an instance.\n              value = value.toJSON(property);\n            }\n          }\n          if (callback) {\n            // If a replacement function was provided, call it to obtain the value\n            // for serialization.\n            value = callback.call(object, property, value);\n          }\n          if (value === null) {\n            return \"null\";\n          }\n          className = getClass.call(value);\n          if (className == booleanClass) {\n            // Booleans are represented literally.\n            return \"\" + value;\n          } else if (className == numberClass) {\n            // JSON numbers must be finite. `Infinity` and `NaN` are serialized as\n            // `\"null\"`.\n            return value > -1 / 0 && value < 1 / 0 ? \"\" + value : \"null\";\n          } else if (className == stringClass) {\n            // Strings are double-quoted and escaped.\n            return quote(\"\" + value);\n          }\n          // Recursively serialize objects and arrays.\n          if (typeof value == \"object\") {\n            // Check for cyclic structures. This is a linear search; performance\n            // is inversely proportional to the number of unique nested objects.\n            for (length = stack.length; length--;) {\n              if (stack[length] === value) {\n                // Cyclic structures cannot be serialized by `JSON.stringify`.\n                throw TypeError();\n              }\n            }\n            // Add the object to the stack of traversed objects.\n            stack.push(value);\n            results = [];\n            // Save the current indentation level and indent one additional level.\n            prefix = indentation;\n            indentation += whitespace;\n            if (className == arrayClass) {\n              // Recursively serialize array elements.\n              for (index = 0, length = value.length; index < length; index++) {\n                element = serialize(index, value, callback, properties, whitespace, indentation, stack);\n                results.push(element === undef ? \"null\" : element);\n              }\n              result = results.length ? whitespace ? \"[\\n\" + indentation + results.join(\",\\n\" + indentation) + \"\\n\" + prefix + \"]\" : \"[\" + results.join(\",\") + \"]\" : \"[]\";\n            } else {\n              // Recursively serialize object members. Members are selected from\n              // either a user-specified list of property names, or the object\n              // itself.\n              forEach(properties || value, function (property) {\n                var element = serialize(property, value, callback, properties, whitespace, indentation, stack);\n                if (element !== undef) {\n                  // According to ES 5.1 section 15.12.3: \"If `gap` {whitespace}\n                  // is not the empty string, let `member` {quote(property) + \":\"}\n                  // be the concatenation of `member` and the `space` character.\"\n                  // The \"`space` character\" refers to the literal space\n                  // character, not the `space` {width} argument provided to\n                  // `JSON.stringify`.\n                  results.push(quote(property) + \":\" + (whitespace ? \" \" : \"\") + element);\n                }\n              });\n              result = results.length ? whitespace ? \"{\\n\" + indentation + results.join(\",\\n\" + indentation) + \"\\n\" + prefix + \"}\" : \"{\" + results.join(\",\") + \"}\" : \"{}\";\n            }\n            // Remove the object from the traversed object stack.\n            stack.pop();\n            return result;\n          }\n        };\n\n        // Public: `JSON.stringify`. See ES 5.1 section 15.12.3.\n        exports.stringify = function (source, filter, width) {\n          var whitespace, callback, properties, className;\n          if (objectTypes[typeof filter] && filter) {\n            if ((className = getClass.call(filter)) == functionClass) {\n              callback = filter;\n            } else if (className == arrayClass) {\n              // Convert the property names array into a makeshift set.\n              properties = {};\n              for (var index = 0, length = filter.length, value; index < length; value = filter[index++], (className = getClass.call(value), className == stringClass || className == numberClass) && (properties[value] = 1));\n            }\n          }\n          if (width) {\n            if ((className = getClass.call(width)) == numberClass) {\n              // Convert the `width` to an integer and create a string containing\n              // `width` number of space characters.\n              if ((width -= width % 1) > 0) {\n                for (whitespace = \"\", width > 10 && (width = 10); whitespace.length < width; whitespace += \" \");\n              }\n            } else if (className == stringClass) {\n              whitespace = width.length <= 10 ? width : width.slice(0, 10);\n            }\n          }\n          // Opera <= 7.54u2 discards the values associated with empty string keys\n          // (`\"\"`) only if they are used directly within an object member list\n          // (e.g., `!(\"\" in { \"\": 1})`).\n          return serialize(\"\", (value = {}, value[\"\"] = source, value), callback, properties, whitespace, \"\", []);\n        };\n      }\n\n      // Public: Parses a JSON source string.\n      if (!has(\"json-parse\")) {\n        var fromCharCode = String.fromCharCode;\n\n        // Internal: A map of escaped control characters and their unescaped\n        // equivalents.\n        var Unescapes = {\n          92: \"\\\\\",\n          34: '\"',\n          47: \"/\",\n          98: \"\\b\",\n          116: \"\\t\",\n          110: \"\\n\",\n          102: \"\\f\",\n          114: \"\\r\"\n        };\n\n        // Internal: Stores the parser state.\n        var Index, Source;\n\n        // Internal: Resets the parser state and throws a `SyntaxError`.\n        var abort = function () {\n          Index = Source = null;\n          throw SyntaxError();\n        };\n\n        // Internal: Returns the next token, or `\"$\"` if the parser has reached\n        // the end of the source string. A token may be a string, number, `null`\n        // literal, or Boolean literal.\n        var lex = function () {\n          var source = Source,\n            length = source.length,\n            value,\n            begin,\n            position,\n            isSigned,\n            charCode;\n          while (Index < length) {\n            charCode = source.charCodeAt(Index);\n            switch (charCode) {\n              case 9:\n              case 10:\n              case 13:\n              case 32:\n                // Skip whitespace tokens, including tabs, carriage returns, line\n                // feeds, and space characters.\n                Index++;\n                break;\n              case 123:\n              case 125:\n              case 91:\n              case 93:\n              case 58:\n              case 44:\n                // Parse a punctuator token (`{`, `}`, `[`, `]`, `:`, or `,`) at\n                // the current position.\n                value = charIndexBuggy ? source.charAt(Index) : source[Index];\n                Index++;\n                return value;\n              case 34:\n                // `\"` delimits a JSON string; advance to the next character and\n                // begin parsing the string. String tokens are prefixed with the\n                // sentinel `@` character to distinguish them from punctuators and\n                // end-of-string tokens.\n                for (value = \"@\", Index++; Index < length;) {\n                  charCode = source.charCodeAt(Index);\n                  if (charCode < 32) {\n                    // Unescaped ASCII control characters (those with a code unit\n                    // less than the space character) are not permitted.\n                    abort();\n                  } else if (charCode == 92) {\n                    // A reverse solidus (`\\`) marks the beginning of an escaped\n                    // control character (including `\"`, `\\`, and `/`) or Unicode\n                    // escape sequence.\n                    charCode = source.charCodeAt(++Index);\n                    switch (charCode) {\n                      case 92:\n                      case 34:\n                      case 47:\n                      case 98:\n                      case 116:\n                      case 110:\n                      case 102:\n                      case 114:\n                        // Revive escaped control characters.\n                        value += Unescapes[charCode];\n                        Index++;\n                        break;\n                      case 117:\n                        // `\\u` marks the beginning of a Unicode escape sequence.\n                        // Advance to the first character and validate the\n                        // four-digit code point.\n                        begin = ++Index;\n                        for (position = Index + 4; Index < position; Index++) {\n                          charCode = source.charCodeAt(Index);\n                          // A valid sequence comprises four hexdigits (case-\n                          // insensitive) that form a single hexadecimal value.\n                          if (!(charCode >= 48 && charCode <= 57 || charCode >= 97 && charCode <= 102 || charCode >= 65 && charCode <= 70)) {\n                            // Invalid Unicode escape sequence.\n                            abort();\n                          }\n                        }\n                        // Revive the escaped character.\n                        value += fromCharCode(\"0x\" + source.slice(begin, Index));\n                        break;\n                      default:\n                        // Invalid escape sequence.\n                        abort();\n                    }\n                  } else {\n                    if (charCode == 34) {\n                      // An unescaped double-quote character marks the end of the\n                      // string.\n                      break;\n                    }\n                    charCode = source.charCodeAt(Index);\n                    begin = Index;\n                    // Optimize for the common case where a string is valid.\n                    while (charCode >= 32 && charCode != 92 && charCode != 34) {\n                      charCode = source.charCodeAt(++Index);\n                    }\n                    // Append the string as-is.\n                    value += source.slice(begin, Index);\n                  }\n                }\n                if (source.charCodeAt(Index) == 34) {\n                  // Advance to the next character and return the revived string.\n                  Index++;\n                  return value;\n                }\n                // Unterminated string.\n                abort();\n              default:\n                // Parse numbers and literals.\n                begin = Index;\n                // Advance past the negative sign, if one is specified.\n                if (charCode == 45) {\n                  isSigned = true;\n                  charCode = source.charCodeAt(++Index);\n                }\n                // Parse an integer or floating-point value.\n                if (charCode >= 48 && charCode <= 57) {\n                  // Leading zeroes are interpreted as octal literals.\n                  if (charCode == 48 && (charCode = source.charCodeAt(Index + 1), charCode >= 48 && charCode <= 57)) {\n                    // Illegal octal literal.\n                    abort();\n                  }\n                  isSigned = false;\n                  // Parse the integer component.\n                  for (; Index < length && (charCode = source.charCodeAt(Index), charCode >= 48 && charCode <= 57); Index++);\n                  // Floats cannot contain a leading decimal point; however, this\n                  // case is already accounted for by the parser.\n                  if (source.charCodeAt(Index) == 46) {\n                    position = ++Index;\n                    // Parse the decimal component.\n                    for (; position < length && (charCode = source.charCodeAt(position), charCode >= 48 && charCode <= 57); position++);\n                    if (position == Index) {\n                      // Illegal trailing decimal.\n                      abort();\n                    }\n                    Index = position;\n                  }\n                  // Parse exponents. The `e` denoting the exponent is\n                  // case-insensitive.\n                  charCode = source.charCodeAt(Index);\n                  if (charCode == 101 || charCode == 69) {\n                    charCode = source.charCodeAt(++Index);\n                    // Skip past the sign following the exponent, if one is\n                    // specified.\n                    if (charCode == 43 || charCode == 45) {\n                      Index++;\n                    }\n                    // Parse the exponential component.\n                    for (position = Index; position < length && (charCode = source.charCodeAt(position), charCode >= 48 && charCode <= 57); position++);\n                    if (position == Index) {\n                      // Illegal empty exponent.\n                      abort();\n                    }\n                    Index = position;\n                  }\n                  // Coerce the parsed value to a JavaScript number.\n                  return +source.slice(begin, Index);\n                }\n                // A negative sign may only precede numbers.\n                if (isSigned) {\n                  abort();\n                }\n                // `true`, `false`, and `null` literals.\n                if (source.slice(Index, Index + 4) == \"true\") {\n                  Index += 4;\n                  return true;\n                } else if (source.slice(Index, Index + 5) == \"false\") {\n                  Index += 5;\n                  return false;\n                } else if (source.slice(Index, Index + 4) == \"null\") {\n                  Index += 4;\n                  return null;\n                }\n                // Unrecognized token.\n                abort();\n            }\n          }\n          // Return the sentinel `$` character if the parser has reached the end\n          // of the source string.\n          return \"$\";\n        };\n\n        // Internal: Parses a JSON `value` token.\n        var get = function (value) {\n          var results, hasMembers;\n          if (value == \"$\") {\n            // Unexpected end of input.\n            abort();\n          }\n          if (typeof value == \"string\") {\n            if ((charIndexBuggy ? value.charAt(0) : value[0]) == \"@\") {\n              // Remove the sentinel `@` character.\n              return value.slice(1);\n            }\n            // Parse object and array literals.\n            if (value == \"[\") {\n              // Parses a JSON array, returning a new JavaScript array.\n              results = [];\n              for (;; hasMembers || (hasMembers = true)) {\n                value = lex();\n                // A closing square bracket marks the end of the array literal.\n                if (value == \"]\") {\n                  break;\n                }\n                // If the array literal contains elements, the current token\n                // should be a comma separating the previous element from the\n                // next.\n                if (hasMembers) {\n                  if (value == \",\") {\n                    value = lex();\n                    if (value == \"]\") {\n                      // Unexpected trailing `,` in array literal.\n                      abort();\n                    }\n                  } else {\n                    // A `,` must separate each array element.\n                    abort();\n                  }\n                }\n                // Elisions and leading commas are not permitted.\n                if (value == \",\") {\n                  abort();\n                }\n                results.push(get(value));\n              }\n              return results;\n            } else if (value == \"{\") {\n              // Parses a JSON object, returning a new JavaScript object.\n              results = {};\n              for (;; hasMembers || (hasMembers = true)) {\n                value = lex();\n                // A closing curly brace marks the end of the object literal.\n                if (value == \"}\") {\n                  break;\n                }\n                // If the object literal contains members, the current token\n                // should be a comma separator.\n                if (hasMembers) {\n                  if (value == \",\") {\n                    value = lex();\n                    if (value == \"}\") {\n                      // Unexpected trailing `,` in object literal.\n                      abort();\n                    }\n                  } else {\n                    // A `,` must separate each object member.\n                    abort();\n                  }\n                }\n                // Leading commas are not permitted, object property names must be\n                // double-quoted strings, and a `:` must separate each property\n                // name and value.\n                if (value == \",\" || typeof value != \"string\" || (charIndexBuggy ? value.charAt(0) : value[0]) != \"@\" || lex() != \":\") {\n                  abort();\n                }\n                results[value.slice(1)] = get(lex());\n              }\n              return results;\n            }\n            // Unexpected token encountered.\n            abort();\n          }\n          return value;\n        };\n\n        // Internal: Updates a traversed object member.\n        var update = function (source, property, callback) {\n          var element = walk(source, property, callback);\n          if (element === undef) {\n            delete source[property];\n          } else {\n            source[property] = element;\n          }\n        };\n\n        // Internal: Recursively traverses a parsed JSON object, invoking the\n        // `callback` function for each value. This is an implementation of the\n        // `Walk(holder, name)` operation defined in ES 5.1 section 15.12.2.\n        var walk = function (source, property, callback) {\n          var value = source[property],\n            length;\n          if (typeof value == \"object\" && value) {\n            // `forEach` can't be used to traverse an array in Opera <= 8.54\n            // because its `Object#hasOwnProperty` implementation returns `false`\n            // for array indices (e.g., `![1, 2, 3].hasOwnProperty(\"0\")`).\n            if (getClass.call(value) == arrayClass) {\n              for (length = value.length; length--;) {\n                update(value, length, callback);\n              }\n            } else {\n              forEach(value, function (property) {\n                update(value, property, callback);\n              });\n            }\n          }\n          return callback.call(source, property, value);\n        };\n\n        // Public: `JSON.parse`. See ES 5.1 section 15.12.2.\n        exports.parse = function (source, callback) {\n          var result, value;\n          Index = 0;\n          Source = \"\" + source;\n          result = get(lex());\n          // If a JSON string contains multiple tokens, it is invalid.\n          if (lex() != \"$\") {\n            abort();\n          }\n          // Reset the parser state.\n          Index = Source = null;\n          return callback && getClass.call(callback) == functionClass ? walk((value = {}, value[\"\"] = result, value), \"\", callback) : result;\n        };\n      }\n    }\n    exports[\"runInContext\"] = runInContext;\n    return exports;\n  }\n  if (freeExports && !isLoader) {\n    // Export for CommonJS environments.\n    runInContext(root, freeExports);\n  } else {\n    // Export for web browsers and JavaScript engines.\n    var nativeJSON = root.JSON,\n      previousJSON = root[\"JSON3\"],\n      isRestored = false;\n    var JSON3 = runInContext(root, root[\"JSON3\"] = {\n      // Public: Restores the original value of the global `JSON` object and\n      // returns a reference to the `JSON3` object.\n      \"noConflict\": function () {\n        if (!isRestored) {\n          isRestored = true;\n          root.JSON = nativeJSON;\n          root[\"JSON3\"] = previousJSON;\n          nativeJSON = previousJSON = null;\n        }\n        return JSON3;\n      }\n    });\n    root.JSON = {\n      \"parse\": JSON3.parse,\n      \"stringify\": JSON3.stringify\n    };\n  }\n\n  // Export for asynchronous module loaders.\n  if (isLoader) {\n    define(function () {\n      return JSON3;\n    });\n  }\n}).call(this);\n\n//##############################################################################\n// Elements.js\n//##############################################################################\n\n(function () {\n  /**\n   * Convenience methods for creating various elements used by PrelaodJS.\n   *\n   * @class DomUtils\n   */\n  var s = {};\n  s.a = function () {\n    return s.el(\"a\");\n  };\n  s.svg = function () {\n    return s.el(\"svg\");\n  };\n  s.object = function () {\n    return s.el(\"object\");\n  };\n  s.image = function () {\n    return s.el(\"image\");\n  };\n  s.img = function () {\n    return s.el(\"img\");\n  };\n  s.style = function () {\n    return s.el(\"style\");\n  };\n  s.link = function () {\n    return s.el(\"link\");\n  };\n  s.script = function () {\n    return s.el(\"script\");\n  };\n  s.audio = function () {\n    return s.el(\"audio\");\n  };\n  s.video = function () {\n    return s.el(\"video\");\n  };\n  s.text = function (value) {\n    return document.createTextNode(value);\n  };\n  s.el = function (name) {\n    return document.createElement(name);\n  };\n  createjs.Elements = s;\n})();\n\n//##############################################################################\n// URLUtils.js\n//##############################################################################\n\n(function () {\n  /**\n   * Utilities that assist with parsing load items, and determining file types, etc.\n   * @class URLUtils\n   */\n  var s = {};\n\n  /**\n   * The Regular Expression used to test file URLS for an absolute path.\n   * @property ABSOLUTE_PATH\n   * @type {RegExp}\n   * @static\n   */\n  s.ABSOLUTE_PATT = /^(?:\\w+:)?\\/{2}/i;\n\n  /**\n   * The Regular Expression used to test file URLS for a relative path.\n   * @property RELATIVE_PATH\n   * @type {RegExp}\n   * @static\n   */\n  s.RELATIVE_PATT = /^[./]*?\\//i;\n\n  /**\n   * The Regular Expression used to test file URLS for an extension. Note that URIs must already have the query string\n   * removed.\n   * @property EXTENSION_PATT\n   * @type {RegExp}\n   * @static\n   */\n  s.EXTENSION_PATT = /\\/?[^/]+\\.(\\w{1,5})$/i;\n\n  /**\n   * Parse a file path to determine the information we need to work with it. Currently, PreloadJS needs to know:\n   * <ul>\n   *     <li>If the path is absolute. Absolute paths start with a protocol (such as `http://`, `file://`, or\n   *     `//networkPath`)</li>\n   *     <li>If the path is relative. Relative paths start with `../` or `/path` (or similar)</li>\n   *     <li>The file extension. This is determined by the filename with an extension. Query strings are dropped, and\n   *     the file path is expected to follow the format `name.ext`.</li>\n   * </ul>\n   *\n   * @method parseURI\n   * @param {String} path\n   * @returns {Object} An Object with an `absolute` and `relative` Boolean values,\n   * \tthe pieces of the path (protocol, hostname, port, pathname, search, hash, host)\n   * \tas well as an optional 'extension` property, which is the lowercase extension.\n   *\n   * @static\n   */\n  s.parseURI = function (path) {\n    var info = {\n      absolute: false,\n      relative: false,\n      protocol: null,\n      hostname: null,\n      port: null,\n      pathname: null,\n      search: null,\n      hash: null,\n      host: null\n    };\n    if (path == null) {\n      return info;\n    }\n\n    // Inject the path parts.\n    var parser = createjs.Elements.a();\n    parser.href = path;\n    for (var n in info) {\n      if (n in parser) {\n        info[n] = parser[n];\n      }\n    }\n\n    // Drop the query string\n    var queryIndex = path.indexOf(\"?\");\n    if (queryIndex > -1) {\n      path = path.substr(0, queryIndex);\n    }\n\n    // Absolute\n    var match;\n    if (s.ABSOLUTE_PATT.test(path)) {\n      info.absolute = true;\n\n      // Relative\n    } else if (s.RELATIVE_PATT.test(path)) {\n      info.relative = true;\n    }\n\n    // Extension\n    if (match = path.match(s.EXTENSION_PATT)) {\n      info.extension = match[1].toLowerCase();\n    }\n    return info;\n  };\n\n  /**\n   * Formats an object into a query string for either a POST or GET request.\n   * @method formatQueryString\n   * @param {Object} data The data to convert to a query string.\n   * @param {Array} [query] Existing name/value pairs to append on to this query.\n   * @static\n   */\n  s.formatQueryString = function (data, query) {\n    if (data == null) {\n      throw new Error(\"You must specify data.\");\n    }\n    var params = [];\n    for (var n in data) {\n      params.push(n + \"=\" + escape(data[n]));\n    }\n    if (query) {\n      params = params.concat(query);\n    }\n    return params.join(\"&\");\n  };\n\n  /**\n   * A utility method that builds a file path using a source and a data object, and formats it into a new path.\n   * @method buildURI\n   * @param {String} src The source path to add values to.\n   * @param {Object} [data] Object used to append values to this request as a query string. Existing parameters on the\n   * path will be preserved.\n   * @returns {string} A formatted string that contains the path and the supplied parameters.\n   * @static\n   */\n  s.buildURI = function (src, data) {\n    if (data == null) {\n      return src;\n    }\n    var query = [];\n    var idx = src.indexOf(\"?\");\n    if (idx != -1) {\n      var q = src.slice(idx + 1);\n      query = query.concat(q.split(\"&\"));\n    }\n    if (idx != -1) {\n      return src.slice(0, idx) + \"?\" + this.formatQueryString(data, query);\n    } else {\n      return src + \"?\" + this.formatQueryString(data, query);\n    }\n  };\n\n  /**\n   * @method isCrossDomain\n   * @param {LoadItem|Object} item A load item with a `src` property.\n   * @return {Boolean} If the load item is loading from a different domain than the current location.\n   * @static\n   */\n  s.isCrossDomain = function (item) {\n    var target = createjs.Elements.a();\n    target.href = item.src;\n    var host = createjs.Elements.a();\n    host.href = location.href;\n    var crossdomain = target.hostname != \"\" && (target.port != host.port || target.protocol != host.protocol || target.hostname != host.hostname);\n    return crossdomain;\n  };\n\n  /**\n   * @method isLocal\n   * @param {LoadItem|Object} item A load item with a `src` property\n   * @return {Boolean} If the load item is loading from the \"file:\" protocol. Assume that the host must be local as\n   * well.\n   * @static\n   */\n  s.isLocal = function (item) {\n    var target = createjs.Elements.a();\n    target.href = item.src;\n    return target.hostname == \"\" && target.protocol == \"file:\";\n  };\n  createjs.URLUtils = s;\n})();\n\n//##############################################################################\n// DomUtils.js\n//##############################################################################\n\n(function () {\n  /**\n   * A few utilities for interacting with the dom.\n   * @class DomUtils\n   */\n  var s = {\n    container: null\n  };\n  s.appendToHead = function (el) {\n    s.getHead().appendChild(el);\n  };\n  s.appendToBody = function (el) {\n    if (s.container == null) {\n      s.container = document.createElement(\"div\");\n      s.container.id = \"preloadjs-container\";\n      var style = s.container.style;\n      style.visibility = \"hidden\";\n      style.position = \"absolute\";\n      style.width = s.container.style.height = \"10px\";\n      style.overflow = \"hidden\";\n      style.transform = style.msTransform = style.webkitTransform = style.oTransform = \"translate(-10px, -10px)\"; //LM: Not working\n      s.getBody().appendChild(s.container);\n    }\n    s.container.appendChild(el);\n  };\n  s.getHead = function () {\n    return document.head || document.getElementsByTagName(\"head\")[0];\n  };\n  s.getBody = function () {\n    return document.body || document.getElementsByTagName(\"body\")[0];\n  };\n  s.removeChild = function (el) {\n    if (el.parent) {\n      el.parent.removeChild(el);\n    }\n  };\n\n  /**\n   * Check if item is a valid HTMLImageElement\n   * @method isImageTag\n   * @param {Object} item\n   * @returns {Boolean}\n   * @static\n   */\n  s.isImageTag = function (item) {\n    return item instanceof HTMLImageElement;\n  };\n\n  /**\n   * Check if item is a valid HTMLAudioElement\n   * @method isAudioTag\n   * @param {Object} item\n   * @returns {Boolean}\n   * @static\n   */\n  s.isAudioTag = function (item) {\n    if (window.HTMLAudioElement) {\n      return item instanceof HTMLAudioElement;\n    } else {\n      return false;\n    }\n  };\n\n  /**\n   * Check if item is a valid HTMLVideoElement\n   * @method isVideoTag\n   * @param {Object} item\n   * @returns {Boolean}\n   * @static\n   */\n  s.isVideoTag = function (item) {\n    if (window.HTMLVideoElement) {\n      return item instanceof HTMLVideoElement;\n    } else {\n      return false;\n    }\n  };\n  createjs.DomUtils = s;\n})();\n\n//##############################################################################\n// DataUtils.js\n//##############################################################################\n\n(function () {\n  /**\n   * A few data utilities for formatting different data types.\n   * @class DataUtils\n   */\n  var s = {};\n\n  // static methods\n  /**\n   * Parse XML using the DOM. This is required when preloading XML or SVG.\n   * @method parseXML\n   * @param {String} text The raw text or XML that is loaded by XHR.\n   * @return {XML} An XML document\n   * @static\n   */\n  s.parseXML = function (text) {\n    var xml = null;\n    // CocoonJS does not support XML parsing with either method.\n\n    // Most browsers will use DOMParser\n    // IE fails on certain SVG files, so we have a fallback below.\n    try {\n      if (window.DOMParser) {\n        var parser = new DOMParser();\n        xml = parser.parseFromString(text, \"text/xml\");\n      }\n    } catch (e) {}\n\n    // Fallback for IE support.\n    if (!xml) {\n      try {\n        xml = new ActiveXObject(\"Microsoft.XMLDOM\");\n        xml.async = false;\n        xml.loadXML(text);\n      } catch (e) {\n        xml = null;\n      }\n    }\n    return xml;\n  };\n\n  /**\n   * Parse a string into an Object.\n   * @method parseJSON\n   * @param {String} value The loaded JSON string\n   * @returns {Object} A JavaScript object.\n   */\n  s.parseJSON = function (value) {\n    if (value == null) {\n      return null;\n    }\n    try {\n      return JSON.parse(value);\n    } catch (e) {\n      // TODO; Handle this with a custom error?\n      throw e;\n    }\n  };\n  createjs.DataUtils = s;\n})();\n\n//##############################################################################\n// Types.js\n//##############################################################################\n\nwindow.createjs = window.createjs || {};\n(function () {\n  var s = {};\n\n  /**\n   * The preload type for generic binary types. Note that images are loaded as binary files when using XHR.\n   * @property BINARY\n   * @type {String}\n   * @default binary\n   * @static\n   * @since 0.6.0\n   */\n  s.BINARY = \"binary\";\n\n  /**\n   * The preload type for css files. CSS files are loaded using a &lt;link&gt; when loaded with XHR, or a\n   * &lt;style&gt; tag when loaded with tags.\n   * @property CSS\n   * @type {String}\n   * @default css\n   * @static\n   * @since 0.6.0\n   */\n  s.CSS = \"css\";\n\n  /**\n   * The preload type for font files.\n   * @property FONT\n   * @type {String}\n   * @default font\n   * @static\n   * @since 0.9.0\n   */\n  s.FONT = \"font\";\n\n  /**\n   * The preload type for fonts specified with CSS (such as Google fonts)\n   * @property FONTCSS\n   * @type {String}\n   * @default fontcss\n   * @static\n   * @since 0.9.0\n   */\n  s.FONTCSS = \"fontcss\";\n\n  /**\n   * The preload type for image files, usually png, gif, or jpg/jpeg. Images are loaded into an &lt;image&gt; tag.\n   * @property IMAGE\n   * @type {String}\n   * @default image\n   * @static\n   * @since 0.6.0\n   */\n  s.IMAGE = \"image\";\n\n  /**\n   * The preload type for javascript files, usually with the \"js\" file extension. JavaScript files are loaded into a\n   * &lt;script&gt; tag.\n   *\n   * Since version 0.4.1+, due to how tag-loaded scripts work, all JavaScript files are automatically injected into\n   * the body of the document to maintain parity between XHR and tag-loaded scripts. In version 0.4.0 and earlier,\n   * only tag-loaded scripts are injected.\n   * @property JAVASCRIPT\n   * @type {String}\n   * @default javascript\n   * @static\n   * @since 0.6.0\n   */\n  s.JAVASCRIPT = \"javascript\";\n\n  /**\n   * The preload type for json files, usually with the \"json\" file extension. JSON data is loaded and parsed into a\n   * JavaScript object. Note that if a `callback` is present on the load item, the file will be loaded with JSONP,\n   * no matter what the {{#crossLink \"LoadQueue/preferXHR:property\"}}{{/crossLink}} property is set to, and the JSON\n   * must contain a matching wrapper function.\n   * @property JSON\n   * @type {String}\n   * @default json\n   * @static\n   * @since 0.6.0\n   */\n  s.JSON = \"json\";\n\n  /**\n   * The preload type for jsonp files, usually with the \"json\" file extension. JSON data is loaded and parsed into a\n   * JavaScript object. You are required to pass a callback parameter that matches the function wrapper in the JSON.\n   * Note that JSONP will always be used if there is a callback present, no matter what the {{#crossLink \"LoadQueue/preferXHR:property\"}}{{/crossLink}}\n   * property is set to.\n   * @property JSONP\n   * @type {String}\n   * @default jsonp\n   * @static\n   * @since 0.6.0\n   */\n  s.JSONP = \"jsonp\";\n\n  /**\n   * The preload type for json-based manifest files, usually with the \"json\" file extension. The JSON data is loaded\n   * and parsed into a JavaScript object. PreloadJS will then look for a \"manifest\" property in the JSON, which is an\n   * Array of files to load, following the same format as the {{#crossLink \"LoadQueue/loadManifest\"}}{{/crossLink}}\n   * method. If a \"callback\" is specified on the manifest object, then it will be loaded using JSONP instead,\n   * regardless of what the {{#crossLink \"LoadQueue/preferXHR:property\"}}{{/crossLink}} property is set to.\n   * @property MANIFEST\n   * @type {String}\n   * @default manifest\n   * @static\n   * @since 0.6.0\n   */\n  s.MANIFEST = \"manifest\";\n\n  /**\n   * The preload type for sound files, usually mp3, ogg, or wav. When loading via tags, audio is loaded into an\n   * &lt;audio&gt; tag.\n   * @property SOUND\n   * @type {String}\n   * @default sound\n   * @static\n   * @since 0.6.0\n   */\n  s.SOUND = \"sound\";\n\n  /**\n   * The preload type for video files, usually mp4, ts, or ogg. When loading via tags, video is loaded into an\n   * &lt;video&gt; tag.\n   * @property VIDEO\n   * @type {String}\n   * @default video\n   * @static\n   * @since 0.6.0\n   */\n  s.VIDEO = \"video\";\n\n  /**\n   * The preload type for SpriteSheet files. SpriteSheet files are JSON files that contain string image paths.\n   * @property SPRITESHEET\n   * @type {String}\n   * @default spritesheet\n   * @static\n   * @since 0.6.0\n   */\n  s.SPRITESHEET = \"spritesheet\";\n\n  /**\n   * The preload type for SVG files.\n   * @property SVG\n   * @type {String}\n   * @default svg\n   * @static\n   * @since 0.6.0\n   */\n  s.SVG = \"svg\";\n\n  /**\n   * The preload type for text files, which is also the default file type if the type can not be determined. Text is\n   * loaded as raw text.\n   * @property TEXT\n   * @type {String}\n   * @default text\n   * @static\n   * @since 0.6.0\n   */\n  s.TEXT = \"text\";\n\n  /**\n   * The preload type for xml files. XML is loaded into an XML document.\n   * @property XML\n   * @type {String}\n   * @default xml\n   * @static\n   * @since 0.6.0\n   */\n  s.XML = \"xml\";\n  createjs.Types = s;\n})();\n\n//##############################################################################\n// Methods.js\n//##############################################################################\n\nwindow.createjs = window.createjs || {};\n(function () {\n  var s = {};\n\n  /**\n   * Defines a POST request, use for a method value when loading data.\n   * @property POST\n   * @type {string}\n   * @default post\n   * @static\n   */\n  s.POST = \"POST\";\n\n  /**\n   * Defines a GET request, use for a method value when loading data.\n   * @property GET\n   * @type {string}\n   * @default get\n   * @static\n   */\n  s.GET = \"GET\";\n  createjs.Methods = s;\n})();\n\n//##############################################################################\n// LoadItem.js\n//##############################################################################\n\nwindow.createjs = window.createjs || {};\n(function () {\n  \"use strict\";\n\n  /**\n   * All loaders accept an item containing the properties defined in this class. If a raw object is passed instead,\n   * it will not be affected, but it must contain at least a {{#crossLink \"src:property\"}}{{/crossLink}} property. A\n   * string path or HTML tag is also acceptable, but it will be automatically converted to a LoadItem using the\n   * {{#crossLink \"create\"}}{{/crossLink}} method by {{#crossLink \"AbstractLoader\"}}{{/crossLink}}\n   * @class LoadItem\n   * @constructor\n   * @since 0.6.0\n   */\n  function LoadItem() {\n    /**\n     * The source of the file that is being loaded. This property is <b>required</b>. The source can either be a\n     * string (recommended), or an HTML tag.\n     * This can also be an object, but in that case it has to include a type and be handled by a plugin.\n     * @property src\n     * @type {String}\n     * @default null\n     */\n    this.src = null;\n\n    /**\n     * The type file that is being loaded. The type of the file is usually inferred by the extension, but can also\n     * be set manually. This is helpful in cases where a file does not have an extension.\n     * @property type\n     * @type {String}\n     * @default null\n     */\n    this.type = null;\n\n    /**\n     * A string identifier which can be used to reference the loaded object. If none is provided, this will be\n     * automatically set to the {{#crossLink \"src:property\"}}{{/crossLink}}.\n     * @property id\n     * @type {String}\n     * @default null\n     */\n    this.id = null;\n\n    /**\n     * Determines if a manifest will maintain the order of this item, in relation to other items in the manifest\n     * that have also set the `maintainOrder` property to `true`. This only applies when the max connections has\n     * been set above 1 (using {{#crossLink \"LoadQueue/setMaxConnections\"}}{{/crossLink}}). Everything with this\n     * property set to `false` will finish as it is loaded. Ordered items are combined with script tags loading in\n     * order when {{#crossLink \"LoadQueue/maintainScriptOrder:property\"}}{{/crossLink}} is set to `true`.\n     * @property maintainOrder\n     * @type {Boolean}\n     * @default false\n     */\n    this.maintainOrder = false;\n\n    /**\n     * A callback used by JSONP requests that defines what global method to call when the JSONP content is loaded.\n     * @property callback\n     * @type {String}\n     * @default null\n     */\n    this.callback = null;\n\n    /**\n     * An arbitrary data object, which is included with the loaded object.\n     * @property data\n     * @type {Object}\n     * @default null\n     */\n    this.data = null;\n\n    /**\n     * The request method used for HTTP calls. Both {{#crossLink \"Methods/GET:property\"}}{{/crossLink}} or\n     * {{#crossLink \"Methods/POST:property\"}}{{/crossLink}} request types are supported, and are defined as\n     * constants on {{#crossLink \"AbstractLoader\"}}{{/crossLink}}.\n     * @property method\n     * @type {String}\n     * @default GET\n     */\n    this.method = createjs.Methods.GET;\n\n    /**\n     * An object hash of name/value pairs to send to the server.\n     * @property values\n     * @type {Object}\n     * @default null\n     */\n    this.values = null;\n\n    /**\n     * An object hash of headers to attach to an XHR request. PreloadJS will automatically attach some default\n     * headers when required, including \"Origin\", \"Content-Type\", and \"X-Requested-With\". You may override the\n     * default headers by including them in your headers object.\n     * @property headers\n     * @type {Object}\n     * @default null\n     */\n    this.headers = null;\n\n    /**\n     * Enable credentials for XHR requests.\n     * @property withCredentials\n     * @type {Boolean}\n     * @default false\n     */\n    this.withCredentials = false;\n\n    /**\n     * Set the mime type of XHR-based requests. This is automatically set to \"text/plain; charset=utf-8\" for text\n     * based files (json, xml, text, css, js).\n     * @property mimeType\n     * @type {String}\n     * @default null\n     */\n    this.mimeType = null;\n\n    /**\n     * Sets the crossOrigin attribute for CORS-enabled images loading cross-domain.\n     * @property crossOrigin\n     * @type {boolean}\n     * @default Anonymous\n     */\n    this.crossOrigin = null;\n\n    /**\n     * The duration in milliseconds to wait before a request times out. This only applies to tag-based and and XHR\n     * (level one) loading, as XHR (level 2) provides its own timeout event.\n     * @property loadTimeout\n     * @type {Number}\n     * @default 8000 (8 seconds)\n     */\n    this.loadTimeout = s.LOAD_TIMEOUT_DEFAULT;\n  }\n  ;\n  var p = LoadItem.prototype = {};\n  var s = LoadItem;\n\n  /**\n   * Default duration in milliseconds to wait before a request times out. This only applies to tag-based and and XHR\n   * (level one) loading, as XHR (level 2) provides its own timeout event.\n   * @property LOAD_TIMEOUT_DEFAULT\n   * @type {number}\n   * @static\n   */\n  s.LOAD_TIMEOUT_DEFAULT = 8000;\n\n  /**\n   * Create a LoadItem.\n   * <ul>\n   *     <li>String-based items are converted to a LoadItem with a populated {{#crossLink \"src:property\"}}{{/crossLink}}.</li>\n   *     <li>LoadItem instances are returned as-is</li>\n   *     <li>Objects are returned with any needed properties added</li>\n   * </ul>\n   * @method create\n   * @param {LoadItem|String|Object} value The load item value\n   * @returns {LoadItem|Object}\n   * @static\n   */\n  s.create = function (value) {\n    if (typeof value == \"string\") {\n      var item = new LoadItem();\n      item.src = value;\n      return item;\n    } else if (value instanceof s) {\n      return value;\n    } else if (value instanceof Object && value.src) {\n      if (value.loadTimeout == null) {\n        value.loadTimeout = s.LOAD_TIMEOUT_DEFAULT;\n      }\n      return value;\n    } else {\n      throw new Error(\"Type not recognized.\");\n    }\n  };\n\n  /**\n   * Provides a chainable shortcut method for setting a number of properties on the instance.\n   *\n   * <h4>Example</h4>\n   *\n   *      var loadItem = new createjs.LoadItem().set({src:\"image.png\", maintainOrder:true});\n   *\n   * @method set\n   * @param {Object} props A generic object containing properties to copy to the LoadItem instance.\n   * @return {LoadItem} Returns the instance the method is called on (useful for chaining calls.)\n  */\n  p.set = function (props) {\n    for (var n in props) {\n      this[n] = props[n];\n    }\n    return this;\n  };\n  createjs.LoadItem = s;\n})();\n\n//##############################################################################\n// RequestUtils.js\n//##############################################################################\n\n(function () {\n  /**\n   * Utilities that assist with parsing load items, and determining file types, etc.\n   * @class RequestUtils\n   */\n  var s = {};\n\n  /**\n   * Determine if a specific type should be loaded as a binary file. Currently, only images and items marked\n   * specifically as \"binary\" are loaded as binary. Note that audio is <b>not</b> a binary type, as we can not play\n   * back using an audio tag if it is loaded as binary. Plugins can change the item type to binary to ensure they get\n   * a binary result to work with. Binary files are loaded using XHR2. Types are defined as static constants on\n   * {{#crossLink \"AbstractLoader\"}}{{/crossLink}}.\n   * @method isBinary\n   * @param {String} type The item type.\n   * @return {Boolean} If the specified type is binary.\n   * @static\n   */\n  s.isBinary = function (type) {\n    switch (type) {\n      case createjs.Types.IMAGE:\n      case createjs.Types.BINARY:\n        return true;\n      default:\n        return false;\n    }\n  };\n\n  /**\n   * Determine if a specific type is a text-based asset, and should be loaded as UTF-8.\n   * @method isText\n   * @param {String} type The item type.\n   * @return {Boolean} If the specified type is text.\n   * @static\n   */\n  s.isText = function (type) {\n    switch (type) {\n      case createjs.Types.TEXT:\n      case createjs.Types.JSON:\n      case createjs.Types.MANIFEST:\n      case createjs.Types.XML:\n      case createjs.Types.CSS:\n      case createjs.Types.SVG:\n      case createjs.Types.JAVASCRIPT:\n      case createjs.Types.SPRITESHEET:\n        return true;\n      default:\n        return false;\n    }\n  };\n\n  /**\n   * Determine the type of the object using common extensions. Note that the type can be passed in with the load item\n   * if it is an unusual extension.\n   * @method getTypeByExtension\n   * @param {String} extension The file extension to use to determine the load type.\n   * @return {String} The determined load type (for example, `createjs.Types.IMAGE`). Will return `null` if\n   * the type can not be determined by the extension.\n   * @static\n   */\n  s.getTypeByExtension = function (extension) {\n    if (extension == null) {\n      return createjs.Types.TEXT;\n    }\n    switch (extension.toLowerCase()) {\n      case \"jpeg\":\n      case \"jpg\":\n      case \"gif\":\n      case \"png\":\n      case \"webp\":\n      case \"bmp\":\n        return createjs.Types.IMAGE;\n      case \"ogg\":\n      case \"mp3\":\n      case \"webm\":\n        return createjs.Types.SOUND;\n      case \"mp4\":\n      case \"webm\":\n      case \"ts\":\n        return createjs.Types.VIDEO;\n      case \"json\":\n        return createjs.Types.JSON;\n      case \"xml\":\n        return createjs.Types.XML;\n      case \"css\":\n        return createjs.Types.CSS;\n      case \"js\":\n        return createjs.Types.JAVASCRIPT;\n      case 'svg':\n        return createjs.Types.SVG;\n      default:\n        return createjs.Types.TEXT;\n    }\n  };\n  createjs.RequestUtils = s;\n})();\n\n//##############################################################################\n// AbstractLoader.js\n//##############################################################################\n\nwindow.createjs = window.createjs || {};\n(function () {\n  \"use strict\";\n\n  // constructor\n  /**\n   * The base loader, which defines all the generic methods, properties, and events. All loaders extend this class,\n   * including the {{#crossLink \"LoadQueue\"}}{{/crossLink}}.\n   * @class AbstractLoader\n   * @param {LoadItem|object|string} loadItem The item to be loaded.\n   * @param {Boolean} [preferXHR] Determines if the LoadItem should <em>try</em> and load using XHR, or take a\n   * tag-based approach, which can be better in cross-domain situations. Not all loaders can load using one or the\n   * other, so this is a suggested directive.\n   * @param {String} [type] The type of loader. Loader types are defined as constants on the AbstractLoader class,\n   * such as {{#crossLink \"IMAGE:property\"}}{{/crossLink}}, {{#crossLink \"CSS:property\"}}{{/crossLink}}, etc.\n   * @extends EventDispatcher\n   */\n  function AbstractLoader(loadItem, preferXHR, type) {\n    this.EventDispatcher_constructor();\n\n    // public properties\n    /**\n     * If the loader has completed loading. This provides a quick check, but also ensures that the different approaches\n     * used for loading do not pile up resulting in more than one `complete` {{#crossLink \"Event\"}}{{/crossLink}}.\n     * @property loaded\n     * @type {Boolean}\n     * @default false\n     */\n    this.loaded = false;\n\n    /**\n     * Determine if the loader was canceled. Canceled loads will not fire complete events. Note that this property\n     * is readonly, so {{#crossLink \"LoadQueue\"}}{{/crossLink}} queues should be closed using {{#crossLink \"LoadQueue/close\"}}{{/crossLink}}\n     * instead.\n     * @property canceled\n     * @type {Boolean}\n     * @default false\n     * @readonly\n     */\n    this.canceled = false;\n\n    /**\n     * The current load progress (percentage) for this item. This will be a number between 0 and 1.\n     *\n     * <h4>Example</h4>\n     *\n     *     var queue = new createjs.LoadQueue();\n     *     queue.loadFile(\"largeImage.png\");\n     *     queue.on(\"progress\", function() {\n     *         console.log(\"Progress:\", queue.progress, event.progress);\n     *     });\n     *\n     * @property progress\n     * @type {Number}\n     * @default 0\n     */\n    this.progress = 0;\n\n    /**\n     * The type of item this loader will load. See {{#crossLink \"AbstractLoader\"}}{{/crossLink}} for a full list of\n     * supported types.\n     * @property type\n     * @type {String}\n     */\n    this.type = type;\n\n    /**\n     * A formatter function that converts the loaded raw result into the final result. For example, the JSONLoader\n     * converts a string of text into a JavaScript object. Not all loaders have a resultFormatter, and this property\n     * can be overridden to provide custom formatting.\n     *\n     * Optionally, a resultFormatter can return a callback function in cases where the formatting needs to be\n     * asynchronous, such as creating a new image. The callback function is passed 2 parameters, which are callbacks\n     * to handle success and error conditions in the resultFormatter. Note that the resultFormatter method is\n     * called in the current scope, as well as the success and error callbacks.\n     *\n     * <h4>Example asynchronous resultFormatter</h4>\n     *\n     * \tfunction _formatResult(loader) {\n     * \t\treturn function(success, error) {\n     * \t\t\tif (errorCondition) { error(errorDetailEvent); }\n     * \t\t\tsuccess(result);\n     * \t\t}\n     * \t}\n     * @property resultFormatter\n     * @type {Function}\n     * @default null\n     */\n    this.resultFormatter = null;\n\n    // protected properties\n    /**\n     * The {{#crossLink \"LoadItem\"}}{{/crossLink}} this loader represents. Note that this is null in a {{#crossLink \"LoadQueue\"}}{{/crossLink}},\n     * but will be available on loaders such as {{#crossLink \"XMLLoader\"}}{{/crossLink}} and {{#crossLink \"ImageLoader\"}}{{/crossLink}}.\n     * @property _item\n     * @type {LoadItem|Object}\n     * @private\n     */\n    if (loadItem) {\n      this._item = createjs.LoadItem.create(loadItem);\n    } else {\n      this._item = null;\n    }\n\n    /**\n     * Whether the loader will try and load content using XHR (true) or HTML tags (false).\n     * @property _preferXHR\n     * @type {Boolean}\n     * @private\n     */\n    this._preferXHR = preferXHR;\n\n    /**\n     * The loaded result after it is formatted by an optional {{#crossLink \"resultFormatter\"}}{{/crossLink}}. For\n     * items that are not formatted, this will be the same as the {{#crossLink \"_rawResult:property\"}}{{/crossLink}}.\n     * The result is accessed using the {{#crossLink \"getResult\"}}{{/crossLink}} method.\n     * @property _result\n     * @type {Object|String}\n     * @private\n     */\n    this._result = null;\n\n    /**\n     * The loaded result before it is formatted. The rawResult is accessed using the {{#crossLink \"getResult\"}}{{/crossLink}}\n     * method, and passing `true`.\n     * @property _rawResult\n     * @type {Object|String}\n     * @private\n     */\n    this._rawResult = null;\n\n    /**\n     * A list of items that loaders load behind the scenes. This does not include the main item the loader is\n     * responsible for loading. Examples of loaders that have sub-items include the {{#crossLink \"SpriteSheetLoader\"}}{{/crossLink}} and\n     * {{#crossLink \"ManifestLoader\"}}{{/crossLink}}.\n     * @property _loadItems\n     * @type {null}\n     * @protected\n     */\n    this._loadedItems = null;\n\n    /**\n     * The attribute the items loaded using tags use for the source.\n     * @type {string}\n     * @default null\n     * @private\n     */\n    this._tagSrcAttribute = null;\n\n    /**\n     * An HTML tag (or similar) that a loader may use to load HTML content, such as images, scripts, etc.\n     * @property _tag\n     * @type {Object}\n     * @private\n     */\n    this._tag = null;\n  }\n  ;\n  var p = createjs.extend(AbstractLoader, createjs.EventDispatcher);\n  var s = AbstractLoader;\n\n  // Remove these @deprecated properties after 1.0\n  try {\n    Object.defineProperties(s, {\n      POST: {\n        get: createjs.deprecate(function () {\n          return createjs.Methods.POST;\n        }, \"AbstractLoader.POST\")\n      },\n      GET: {\n        get: createjs.deprecate(function () {\n          return createjs.Methods.GET;\n        }, \"AbstractLoader.GET\")\n      },\n      BINARY: {\n        get: createjs.deprecate(function () {\n          return createjs.Types.BINARY;\n        }, \"AbstractLoader.BINARY\")\n      },\n      CSS: {\n        get: createjs.deprecate(function () {\n          return createjs.Types.CSS;\n        }, \"AbstractLoader.CSS\")\n      },\n      FONT: {\n        get: createjs.deprecate(function () {\n          return createjs.Types.FONT;\n        }, \"AbstractLoader.FONT\")\n      },\n      FONTCSS: {\n        get: createjs.deprecate(function () {\n          return createjs.Types.FONTCSS;\n        }, \"AbstractLoader.FONTCSS\")\n      },\n      IMAGE: {\n        get: createjs.deprecate(function () {\n          return createjs.Types.IMAGE;\n        }, \"AbstractLoader.IMAGE\")\n      },\n      JAVASCRIPT: {\n        get: createjs.deprecate(function () {\n          return createjs.Types.JAVASCRIPT;\n        }, \"AbstractLoader.JAVASCRIPT\")\n      },\n      JSON: {\n        get: createjs.deprecate(function () {\n          return createjs.Types.JSON;\n        }, \"AbstractLoader.JSON\")\n      },\n      JSONP: {\n        get: createjs.deprecate(function () {\n          return createjs.Types.JSONP;\n        }, \"AbstractLoader.JSONP\")\n      },\n      MANIFEST: {\n        get: createjs.deprecate(function () {\n          return createjs.Types.MANIFEST;\n        }, \"AbstractLoader.MANIFEST\")\n      },\n      SOUND: {\n        get: createjs.deprecate(function () {\n          return createjs.Types.SOUND;\n        }, \"AbstractLoader.SOUND\")\n      },\n      VIDEO: {\n        get: createjs.deprecate(function () {\n          return createjs.Types.VIDEO;\n        }, \"AbstractLoader.VIDEO\")\n      },\n      SPRITESHEET: {\n        get: createjs.deprecate(function () {\n          return createjs.Types.SPRITESHEET;\n        }, \"AbstractLoader.SPRITESHEET\")\n      },\n      SVG: {\n        get: createjs.deprecate(function () {\n          return createjs.Types.SVG;\n        }, \"AbstractLoader.SVG\")\n      },\n      TEXT: {\n        get: createjs.deprecate(function () {\n          return createjs.Types.TEXT;\n        }, \"AbstractLoader.TEXT\")\n      },\n      XML: {\n        get: createjs.deprecate(function () {\n          return createjs.Types.XML;\n        }, \"AbstractLoader.XML\")\n      }\n    });\n  } catch (e) {}\n\n  // Events\n  /**\n   * The {{#crossLink \"ProgressEvent\"}}{{/crossLink}} that is fired when the overall progress changes. Prior to\n   * version 0.6.0, this was just a regular {{#crossLink \"Event\"}}{{/crossLink}}.\n   * @event progress\n   * @since 0.3.0\n   */\n\n  /**\n   * The {{#crossLink \"Event\"}}{{/crossLink}} that is fired when a load starts.\n   * @event loadstart\n   * @param {Object} target The object that dispatched the event.\n   * @param {String} type The event type.\n   * @since 0.3.1\n   */\n\n  /**\n   * The {{#crossLink \"Event\"}}{{/crossLink}} that is fired when the entire queue has been loaded.\n   * @event complete\n   * @param {Object} target The object that dispatched the event.\n   * @param {String} type The event type.\n   * @since 0.3.0\n   */\n\n  /**\n   * The {{#crossLink \"ErrorEvent\"}}{{/crossLink}} that is fired when the loader encounters an error. If the error was\n   * encountered by a file, the event will contain the item that caused the error. Prior to version 0.6.0, this was\n   * just a regular {{#crossLink \"Event\"}}{{/crossLink}}.\n   * @event error\n   * @since 0.3.0\n   */\n\n  /**\n   * The {{#crossLink \"Event\"}}{{/crossLink}} that is fired when the loader encounters an internal file load error.\n   * This enables loaders to maintain internal queues, and surface file load errors.\n   * @event fileerror\n   * @param {Object} target The object that dispatched the event.\n   * @param {String} type The event type (\"fileerror\")\n   * @param {LoadItem|object} The item that encountered the error\n   * @since 0.6.0\n   */\n\n  /**\n   * The {{#crossLink \"Event\"}}{{/crossLink}} that is fired when a loader internally loads a file. This enables\n   * loaders such as {{#crossLink \"ManifestLoader\"}}{{/crossLink}} to maintain internal {{#crossLink \"LoadQueue\"}}{{/crossLink}}s\n   * and notify when they have loaded a file. The {{#crossLink \"LoadQueue\"}}{{/crossLink}} class dispatches a\n   * slightly different {{#crossLink \"LoadQueue/fileload:event\"}}{{/crossLink}} event.\n   * @event fileload\n   * @param {Object} target The object that dispatched the event.\n   * @param {String} type The event type (\"fileload\")\n   * @param {Object} item The file item which was specified in the {{#crossLink \"LoadQueue/loadFile\"}}{{/crossLink}}\n   * or {{#crossLink \"LoadQueue/loadManifest\"}}{{/crossLink}} call. If only a string path or tag was specified, the\n   * object will contain that value as a `src` property.\n   * @param {Object} result The HTML tag or parsed result of the loaded item.\n   * @param {Object} rawResult The unprocessed result, usually the raw text or binary data before it is converted\n   * to a usable object.\n   * @since 0.6.0\n   */\n\n  /**\n   * The {{#crossLink \"Event\"}}{{/crossLink}} that is fired after the internal request is created, but before a load.\n   * This allows updates to the loader for specific loading needs, such as binary or XHR image loading.\n   * @event initialize\n   * @param {Object} target The object that dispatched the event.\n   * @param {String} type The event type (\"initialize\")\n   * @param {AbstractLoader} loader The loader that has been initialized.\n   */\n\n  /**\n   * Get a reference to the manifest item that is loaded by this loader. In some cases this will be the value that was\n   * passed into {{#crossLink \"LoadQueue\"}}{{/crossLink}} using {{#crossLink \"LoadQueue/loadFile\"}}{{/crossLink}} or\n   * {{#crossLink \"LoadQueue/loadManifest\"}}{{/crossLink}}. However if only a String path was passed in, then it will\n   * be a {{#crossLink \"LoadItem\"}}{{/crossLink}}.\n   * @method getItem\n   * @return {Object} The manifest item that this loader is responsible for loading.\n   * @since 0.6.0\n   */\n  p.getItem = function () {\n    return this._item;\n  };\n\n  /**\n   * Get a reference to the content that was loaded by the loader (only available after the {{#crossLink \"complete:event\"}}{{/crossLink}}\n   * event is dispatched.\n   * @method getResult\n   * @param {Boolean} [raw=false] Determines if the returned result will be the formatted content, or the raw loaded\n   * data (if it exists).\n   * @return {Object}\n   * @since 0.6.0\n   */\n  p.getResult = function (raw) {\n    return raw ? this._rawResult : this._result;\n  };\n\n  /**\n   * Return the `tag` this object creates or uses for loading.\n   * @method getTag\n   * @return {Object} The tag instance\n   * @since 0.6.0\n   */\n  p.getTag = function () {\n    return this._tag;\n  };\n\n  /**\n   * Set the `tag` this item uses for loading.\n   * @method setTag\n   * @param {Object} tag The tag instance\n   * @since 0.6.0\n   */\n  p.setTag = function (tag) {\n    this._tag = tag;\n  };\n\n  /**\n   * Begin loading the item. This method is required when using a loader by itself.\n   *\n   * <h4>Example</h4>\n   *\n   *      var queue = new createjs.LoadQueue();\n   *      queue.on(\"complete\", handleComplete);\n   *      queue.loadManifest(fileArray, false); // Note the 2nd argument that tells the queue not to start loading yet\n   *      queue.load();\n   *\n   * @method load\n   */\n  p.load = function () {\n    this._createRequest();\n    this._request.on(\"complete\", this, this);\n    this._request.on(\"progress\", this, this);\n    this._request.on(\"loadStart\", this, this);\n    this._request.on(\"abort\", this, this);\n    this._request.on(\"timeout\", this, this);\n    this._request.on(\"error\", this, this);\n    var evt = new createjs.Event(\"initialize\");\n    evt.loader = this._request;\n    this.dispatchEvent(evt);\n    this._request.load();\n  };\n\n  /**\n   * Close the the item. This will stop any open requests (although downloads using HTML tags may still continue in\n   * the background), but events will not longer be dispatched.\n   * @method cancel\n   */\n  p.cancel = function () {\n    this.canceled = true;\n    this.destroy();\n  };\n\n  /**\n   * Clean up the loader.\n   * @method destroy\n   */\n  p.destroy = function () {\n    if (this._request) {\n      this._request.removeAllEventListeners();\n      this._request.destroy();\n    }\n    this._request = null;\n    this._item = null;\n    this._rawResult = null;\n    this._result = null;\n    this._loadItems = null;\n    this.removeAllEventListeners();\n  };\n\n  /**\n   * Get any items loaded internally by the loader. The enables loaders such as {{#crossLink \"ManifestLoader\"}}{{/crossLink}}\n   * to expose items it loads internally.\n   * @method getLoadedItems\n   * @return {Array} A list of the items loaded by the loader.\n   * @since 0.6.0\n   */\n  p.getLoadedItems = function () {\n    return this._loadedItems;\n  };\n\n  // Private methods\n  /**\n   * Create an internal request used for loading. By default, an {{#crossLink \"XHRRequest\"}}{{/crossLink}} or\n   * {{#crossLink \"TagRequest\"}}{{/crossLink}} is created, depending on the value of {{#crossLink \"preferXHR:property\"}}{{/crossLink}}.\n   * Other loaders may override this to use different request types, such as {{#crossLink \"ManifestLoader\"}}{{/crossLink}},\n   * which uses {{#crossLink \"JSONLoader\"}}{{/crossLink}} or {{#crossLink \"JSONPLoader\"}}{{/crossLink}} under the hood.\n   * @method _createRequest\n   * @protected\n   */\n  p._createRequest = function () {\n    if (!this._preferXHR) {\n      this._request = new createjs.TagRequest(this._item, this._tag || this._createTag(), this._tagSrcAttribute);\n    } else {\n      this._request = new createjs.XHRRequest(this._item);\n    }\n  };\n\n  /**\n   * Create the HTML tag used for loading. This method does nothing by default, and needs to be implemented\n   * by loaders that require tag loading.\n   * @method _createTag\n   * @param {String} src The tag source\n   * @return {HTMLElement} The tag that was created\n   * @protected\n   */\n  p._createTag = function (src) {\n    return null;\n  };\n\n  /**\n   * Dispatch a loadstart {{#crossLink \"Event\"}}{{/crossLink}}. Please see the {{#crossLink \"AbstractLoader/loadstart:event\"}}{{/crossLink}}\n   * event for details on the event payload.\n   * @method _sendLoadStart\n   * @protected\n   */\n  p._sendLoadStart = function () {\n    if (this._isCanceled()) {\n      return;\n    }\n    this.dispatchEvent(\"loadstart\");\n  };\n\n  /**\n   * Dispatch a {{#crossLink \"ProgressEvent\"}}{{/crossLink}}.\n   * @method _sendProgress\n   * @param {Number | Object} value The progress of the loaded item, or an object containing <code>loaded</code>\n   * and <code>total</code> properties.\n   * @protected\n   */\n  p._sendProgress = function (value) {\n    if (this._isCanceled()) {\n      return;\n    }\n    var event = null;\n    if (typeof value == \"number\") {\n      this.progress = value;\n      event = new createjs.ProgressEvent(this.progress);\n    } else {\n      event = value;\n      this.progress = value.loaded / value.total;\n      event.progress = this.progress;\n      if (isNaN(this.progress) || this.progress == Infinity) {\n        this.progress = 0;\n      }\n    }\n    this.hasEventListener(\"progress\") && this.dispatchEvent(event);\n  };\n\n  /**\n   * Dispatch a complete {{#crossLink \"Event\"}}{{/crossLink}}. Please see the {{#crossLink \"AbstractLoader/complete:event\"}}{{/crossLink}} event\n   * @method _sendComplete\n   * @protected\n   */\n  p._sendComplete = function () {\n    if (this._isCanceled()) {\n      return;\n    }\n    this.loaded = true;\n    var event = new createjs.Event(\"complete\");\n    event.rawResult = this._rawResult;\n    if (this._result != null) {\n      event.result = this._result;\n    }\n    this.dispatchEvent(event);\n  };\n\n  /**\n   * Dispatch an error {{#crossLink \"Event\"}}{{/crossLink}}. Please see the {{#crossLink \"AbstractLoader/error:event\"}}{{/crossLink}}\n   * event for details on the event payload.\n   * @method _sendError\n   * @param {ErrorEvent} event The event object containing specific error properties.\n   * @protected\n   */\n  p._sendError = function (event) {\n    if (this._isCanceled() || !this.hasEventListener(\"error\")) {\n      return;\n    }\n    if (event == null) {\n      event = new createjs.ErrorEvent(\"PRELOAD_ERROR_EMPTY\"); // TODO: Populate error\n    }\n\n    this.dispatchEvent(event);\n  };\n\n  /**\n   * Determine if the load has been canceled. This is important to ensure that method calls or asynchronous events\n   * do not cause issues after the queue has been cleaned up.\n   * @method _isCanceled\n   * @return {Boolean} If the loader has been canceled.\n   * @protected\n   */\n  p._isCanceled = function () {\n    if (window.createjs == null || this.canceled) {\n      return true;\n    }\n    return false;\n  };\n\n  /**\n   * A custom result formatter function, which is called just before a request dispatches its complete event. Most\n   * loader types already have an internal formatter, but this can be user-overridden for custom formatting. The\n   * formatted result will be available on Loaders using {{#crossLink \"getResult\"}}{{/crossLink}}, and passing `true`.\n   * @property resultFormatter\n   * @type Function\n   * @return {Object} The formatted result\n   * @since 0.6.0\n   */\n  p.resultFormatter = null;\n\n  /**\n   * Handle events from internal requests. By default, loaders will handle, and redispatch the necessary events, but\n   * this method can be overridden for custom behaviours.\n   * @method handleEvent\n   * @param {Event} event The event that the internal request dispatches.\n   * @protected\n   * @since 0.6.0\n   */\n  p.handleEvent = function (event) {\n    switch (event.type) {\n      case \"complete\":\n        this._rawResult = event.target._response;\n        var result = this.resultFormatter && this.resultFormatter(this);\n        // The resultFormatter is asynchronous\n        if (result instanceof Function) {\n          result.call(this, createjs.proxy(this._resultFormatSuccess, this), createjs.proxy(this._resultFormatFailed, this));\n          // The result formatter is synchronous\n        } else {\n          this._result = result || this._rawResult;\n          this._sendComplete();\n        }\n        break;\n      case \"progress\":\n        this._sendProgress(event);\n        break;\n      case \"error\":\n        this._sendError(event);\n        break;\n      case \"loadstart\":\n        this._sendLoadStart();\n        break;\n      case \"abort\":\n      case \"timeout\":\n        if (!this._isCanceled()) {\n          this.dispatchEvent(new createjs.ErrorEvent(\"PRELOAD_\" + event.type.toUpperCase() + \"_ERROR\"));\n        }\n        break;\n    }\n  };\n\n  /**\n   * The \"success\" callback passed to {{#crossLink \"AbstractLoader/resultFormatter\"}}{{/crossLink}} asynchronous\n   * functions.\n   * @method _resultFormatSuccess\n   * @param {Object} result The formatted result\n   * @private\n   */\n  p._resultFormatSuccess = function (result) {\n    this._result = result;\n    this._sendComplete();\n  };\n\n  /**\n   * The \"error\" callback passed to {{#crossLink \"AbstractLoader/resultFormatter\"}}{{/crossLink}} asynchronous\n   * functions.\n   * @method _resultFormatSuccess\n   * @param {Object} error The error event\n   * @private\n   */\n  p._resultFormatFailed = function (event) {\n    this._sendError(event);\n  };\n\n  /**\n   * @method toString\n   * @return {String} a string representation of the instance.\n   */\n  p.toString = function () {\n    return \"[PreloadJS AbstractLoader]\";\n  };\n  createjs.AbstractLoader = createjs.promote(AbstractLoader, \"EventDispatcher\");\n})();\n\n//##############################################################################\n// AbstractMediaLoader.js\n//##############################################################################\n\nwindow.createjs = window.createjs || {};\n(function () {\n  \"use strict\";\n\n  // constructor\n  /**\n   * The AbstractMediaLoader is a base class that handles some of the shared methods and properties of loaders that\n   * handle HTML media elements, such as Video and Audio.\n   * @class AbstractMediaLoader\n   * @param {LoadItem|Object} loadItem\n   * @param {Boolean} preferXHR\n   * @param {String} type The type of media to load. Usually \"video\" or \"audio\".\n   * @extends AbstractLoader\n   * @constructor\n   */\n  function AbstractMediaLoader(loadItem, preferXHR, type) {\n    this.AbstractLoader_constructor(loadItem, preferXHR, type);\n\n    // public properties\n    this.resultFormatter = this._formatResult;\n\n    // protected properties\n    this._tagSrcAttribute = \"src\";\n    this.on(\"initialize\", this._updateXHR, this);\n  }\n  ;\n  var p = createjs.extend(AbstractMediaLoader, createjs.AbstractLoader);\n\n  // static properties\n  // public methods\n  p.load = function () {\n    // TagRequest will handle most of this, but Sound / Video need a few custom properties, so just handle them here.\n    if (!this._tag) {\n      this._tag = this._createTag(this._item.src);\n    }\n    this._tag.preload = \"auto\";\n    this._tag.load();\n    this.AbstractLoader_load();\n  };\n\n  // protected methods\n  /**\n   * Creates a new tag for loading if it doesn't exist yet.\n   * @method _createTag\n   * @private\n   */\n  p._createTag = function () {};\n  p._createRequest = function () {\n    if (!this._preferXHR) {\n      this._request = new createjs.MediaTagRequest(this._item, this._tag || this._createTag(), this._tagSrcAttribute);\n    } else {\n      this._request = new createjs.XHRRequest(this._item);\n    }\n  };\n\n  // protected methods\n  /**\n   * Before the item loads, set its mimeType and responseType.\n   * @property _updateXHR\n   * @param {Event} event\n   * @private\n   */\n  p._updateXHR = function (event) {\n    // Only exists for XHR\n    if (event.loader.setResponseType) {\n      event.loader.setResponseType(\"blob\");\n    }\n  };\n\n  /**\n   * The result formatter for media files.\n   * @method _formatResult\n   * @param {AbstractLoader} loader\n   * @returns {HTMLVideoElement|HTMLAudioElement}\n   * @private\n   */\n  p._formatResult = function (loader) {\n    this._tag.removeEventListener && this._tag.removeEventListener(\"canplaythrough\", this._loadedHandler);\n    this._tag.onstalled = null;\n    if (this._preferXHR) {\n      var URL = window.URL || window.webkitURL;\n      var result = loader.getResult(true);\n      loader.getTag().src = URL.createObjectURL(result);\n    }\n    return loader.getTag();\n  };\n  createjs.AbstractMediaLoader = createjs.promote(AbstractMediaLoader, \"AbstractLoader\");\n})();\n\n//##############################################################################\n// AbstractRequest.js\n//##############################################################################\n\nwindow.createjs = window.createjs || {};\n(function () {\n  \"use strict\";\n\n  /**\n   * A base class for actual data requests, such as {{#crossLink \"XHRRequest\"}}{{/crossLink}}, {{#crossLink \"TagRequest\"}}{{/crossLink}},\n   * and {{#crossLink \"MediaRequest\"}}{{/crossLink}}. PreloadJS loaders will typically use a data loader under the\n   * hood to get data.\n   * @class AbstractRequest\n   * @param {LoadItem} item\n   * @constructor\n   */\n  var AbstractRequest = function (item) {\n    this._item = item;\n  };\n  var p = createjs.extend(AbstractRequest, createjs.EventDispatcher);\n\n  // public methods\n  /**\n   * Begin a load.\n   * @method load\n   */\n  p.load = function () {};\n\n  /**\n   * Clean up a request.\n   * @method destroy\n   */\n  p.destroy = function () {};\n\n  /**\n   * Cancel an in-progress request.\n   * @method cancel\n   */\n  p.cancel = function () {};\n  createjs.AbstractRequest = createjs.promote(AbstractRequest, \"EventDispatcher\");\n})();\n\n//##############################################################################\n// TagRequest.js\n//##############################################################################\n\nwindow.createjs = window.createjs || {};\n(function () {\n  \"use strict\";\n\n  // constructor\n  /**\n   * An {{#crossLink \"AbstractRequest\"}}{{/crossLink}} that loads HTML tags, such as images and scripts.\n   * @class TagRequest\n   * @param {LoadItem} loadItem\n   * @param {HTMLElement} tag\n   * @param {String} srcAttribute The tag attribute that specifies the source, such as \"src\", \"href\", etc.\n   */\n  function TagRequest(loadItem, tag, srcAttribute) {\n    this.AbstractRequest_constructor(loadItem);\n\n    // protected properties\n    /**\n     * The HTML tag instance that is used to load.\n     * @property _tag\n     * @type {HTMLElement}\n     * @protected\n     */\n    this._tag = tag;\n\n    /**\n     * The tag attribute that specifies the source, such as \"src\", \"href\", etc.\n     * @property _tagSrcAttribute\n     * @type {String}\n     * @protected\n     */\n    this._tagSrcAttribute = srcAttribute;\n\n    /**\n     * A method closure used for handling the tag load event.\n     * @property _loadedHandler\n     * @type {Function}\n     * @private\n     */\n    this._loadedHandler = createjs.proxy(this._handleTagComplete, this);\n\n    /**\n     * Determines if the element was added to the DOM automatically by PreloadJS, so it can be cleaned up after.\n     * @property _addedToDOM\n     * @type {Boolean}\n     * @private\n     */\n    this._addedToDOM = false;\n  }\n  ;\n  var p = createjs.extend(TagRequest, createjs.AbstractRequest);\n\n  // public methods\n  p.load = function () {\n    this._tag.onload = createjs.proxy(this._handleTagComplete, this);\n    this._tag.onreadystatechange = createjs.proxy(this._handleReadyStateChange, this);\n    this._tag.onerror = createjs.proxy(this._handleError, this);\n    var evt = new createjs.Event(\"initialize\");\n    evt.loader = this._tag;\n    this.dispatchEvent(evt);\n    this._loadTimeout = setTimeout(createjs.proxy(this._handleTimeout, this), this._item.loadTimeout);\n    this._tag[this._tagSrcAttribute] = this._item.src;\n\n    // wdg:: Append the tag AFTER setting the src, or SVG loading on iOS will fail.\n    if (this._tag.parentNode == null) {\n      createjs.DomUtils.appendToBody(this._tag);\n      this._addedToDOM = true;\n    }\n  };\n  p.destroy = function () {\n    this._clean();\n    this._tag = null;\n    this.AbstractRequest_destroy();\n  };\n\n  // private methods\n  /**\n   * Handle the readyStateChange event from a tag. We need this in place of the `onload` callback (mainly SCRIPT\n   * and LINK tags), but other cases may exist.\n   * @method _handleReadyStateChange\n   * @private\n   */\n  p._handleReadyStateChange = function () {\n    clearTimeout(this._loadTimeout);\n    // This is strictly for tags in browsers that do not support onload.\n    var tag = this._tag;\n\n    // Complete is for old IE support.\n    if (tag.readyState == \"loaded\" || tag.readyState == \"complete\") {\n      this._handleTagComplete();\n    }\n  };\n\n  /**\n   * Handle any error events from the tag.\n   * @method _handleError\n   * @protected\n   */\n  p._handleError = function () {\n    this._clean();\n    this.dispatchEvent(\"error\");\n  };\n\n  /**\n   * Handle the tag's onload callback.\n   * @method _handleTagComplete\n   * @private\n   */\n  p._handleTagComplete = function () {\n    this._rawResult = this._tag;\n    this._result = this.resultFormatter && this.resultFormatter(this) || this._rawResult;\n    this._clean();\n    this.dispatchEvent(\"complete\");\n  };\n\n  /**\n   * The tag request has not loaded within the time specified in loadTimeout.\n   * @method _handleError\n   * @param {Object} event The XHR error event.\n   * @private\n   */\n  p._handleTimeout = function () {\n    this._clean();\n    this.dispatchEvent(new createjs.Event(\"timeout\"));\n  };\n\n  /**\n   * Remove event listeners, but don't destroy the request object\n   * @method _clean\n   * @private\n   */\n  p._clean = function () {\n    this._tag.onload = null;\n    this._tag.onreadystatechange = null;\n    this._tag.onerror = null;\n    if (this._addedToDOM && this._tag.parentNode != null) {\n      this._tag.parentNode.removeChild(this._tag);\n    }\n    clearTimeout(this._loadTimeout);\n  };\n\n  /**\n   * Handle a stalled audio event. The main place this happens is with HTMLAudio in Chrome when playing back audio\n   * that is already in a load, but not complete.\n   * @method _handleStalled\n   * @private\n   */\n  p._handleStalled = function () {\n    //Ignore, let the timeout take care of it. Sometimes its not really stopped.\n  };\n  createjs.TagRequest = createjs.promote(TagRequest, \"AbstractRequest\");\n})();\n\n//##############################################################################\n// MediaTagRequest.js\n//##############################################################################\n\nwindow.createjs = window.createjs || {};\n(function () {\n  \"use strict\";\n\n  // constructor\n  /**\n   * An {{#crossLink \"TagRequest\"}}{{/crossLink}} that loads HTML tags for video and audio.\n   * @class MediaTagRequest\n   * @param {LoadItem} loadItem\n   * @param {HTMLAudioElement|HTMLVideoElement} tag\n   * @param {String} srcAttribute The tag attribute that specifies the source, such as \"src\", \"href\", etc.\n   * @constructor\n   */\n  function MediaTagRequest(loadItem, tag, srcAttribute) {\n    this.AbstractRequest_constructor(loadItem);\n\n    // protected properties\n    this._tag = tag;\n    this._tagSrcAttribute = srcAttribute;\n    this._loadedHandler = createjs.proxy(this._handleTagComplete, this);\n  }\n  ;\n  var p = createjs.extend(MediaTagRequest, createjs.TagRequest);\n  var s = MediaTagRequest;\n\n  // public methods\n  p.load = function () {\n    var sc = createjs.proxy(this._handleStalled, this);\n    this._stalledCallback = sc;\n    var pc = createjs.proxy(this._handleProgress, this);\n    this._handleProgress = pc;\n    this._tag.addEventListener(\"stalled\", sc);\n    this._tag.addEventListener(\"progress\", pc);\n\n    // This will tell us when audio is buffered enough to play through, but not when its loaded.\n    // The tag doesn't keep loading in Chrome once enough has buffered, and we have decided that behaviour is sufficient.\n    this._tag.addEventListener && this._tag.addEventListener(\"canplaythrough\", this._loadedHandler, false); // canplaythrough callback doesn't work in Chrome, so we use an event.\n\n    this.TagRequest_load();\n  };\n\n  // private methods\n  p._handleReadyStateChange = function () {\n    clearTimeout(this._loadTimeout);\n    // This is strictly for tags in browsers that do not support onload.\n    var tag = this._tag;\n\n    // Complete is for old IE support.\n    if (tag.readyState == \"loaded\" || tag.readyState == \"complete\") {\n      this._handleTagComplete();\n    }\n  };\n  p._handleStalled = function () {\n    //Ignore, let the timeout take care of it. Sometimes its not really stopped.\n  };\n\n  /**\n   * An XHR request has reported progress.\n   * @method _handleProgress\n   * @param {Object} event The XHR progress event.\n   * @private\n   */\n  p._handleProgress = function (event) {\n    if (!event || event.loaded > 0 && event.total == 0) {\n      return; // Sometimes we get no \"total\", so just ignore the progress event.\n    }\n\n    var newEvent = new createjs.ProgressEvent(event.loaded, event.total);\n    this.dispatchEvent(newEvent);\n  };\n\n  // protected methods\n  p._clean = function () {\n    this._tag.removeEventListener && this._tag.removeEventListener(\"canplaythrough\", this._loadedHandler);\n    this._tag.removeEventListener(\"stalled\", this._stalledCallback);\n    this._tag.removeEventListener(\"progress\", this._progressCallback);\n    this.TagRequest__clean();\n  };\n  createjs.MediaTagRequest = createjs.promote(MediaTagRequest, \"TagRequest\");\n})();\n\n//##############################################################################\n// XHRRequest.js\n//##############################################################################\n\nwindow.createjs = window.createjs || {};\n(function () {\n  \"use strict\";\n\n  // constructor\n  /**\n   * A preloader that loads items using XHR requests, usually XMLHttpRequest. However XDomainRequests will be used\n   * for cross-domain requests if possible, and older versions of IE fall back on to ActiveX objects when necessary.\n   * XHR requests load the content as text or binary data, provide progress and consistent completion events, and\n   * can be canceled during load. Note that XHR is not supported in IE 6 or earlier, and is not recommended for\n   * cross-domain loading.\n   * @class XHRRequest\n   * @constructor\n   * @param {Object} item The object that defines the file to load. Please see the {{#crossLink \"LoadQueue/loadFile\"}}{{/crossLink}}\n   * for an overview of supported file properties.\n   * @extends AbstractLoader\n   */\n  function XHRRequest(item) {\n    this.AbstractRequest_constructor(item);\n\n    // protected properties\n    /**\n     * A reference to the XHR request used to load the content.\n     * @property _request\n     * @type {XMLHttpRequest | XDomainRequest | ActiveX.XMLHTTP}\n     * @private\n     */\n    this._request = null;\n\n    /**\n     * A manual load timeout that is used for browsers that do not support the onTimeout event on XHR (XHR level 1,\n     * typically IE9).\n     * @property _loadTimeout\n     * @type {Number}\n     * @private\n     */\n    this._loadTimeout = null;\n\n    /**\n     * The browser's XHR (XMLHTTPRequest) version. Supported versions are 1 and 2. There is no official way to detect\n     * the version, so we use capabilities to make a best guess.\n     * @property _xhrLevel\n     * @type {Number}\n     * @default 1\n     * @private\n     */\n    this._xhrLevel = 1;\n\n    /**\n     * The response of a loaded file. This is set because it is expensive to look up constantly. This property will be\n     * null until the file is loaded.\n     * @property _response\n     * @type {mixed}\n     * @private\n     */\n    this._response = null;\n\n    /**\n     * The response of the loaded file before it is modified. In most cases, content is converted from raw text to\n     * an HTML tag or a formatted object which is set to the <code>result</code> property, but the developer may still\n     * want to access the raw content as it was loaded.\n     * @property _rawResponse\n     * @type {String|Object}\n     * @private\n     */\n    this._rawResponse = null;\n    this._canceled = false;\n\n    // Setup our event handlers now.\n    this._handleLoadStartProxy = createjs.proxy(this._handleLoadStart, this);\n    this._handleProgressProxy = createjs.proxy(this._handleProgress, this);\n    this._handleAbortProxy = createjs.proxy(this._handleAbort, this);\n    this._handleErrorProxy = createjs.proxy(this._handleError, this);\n    this._handleTimeoutProxy = createjs.proxy(this._handleTimeout, this);\n    this._handleLoadProxy = createjs.proxy(this._handleLoad, this);\n    this._handleReadyStateChangeProxy = createjs.proxy(this._handleReadyStateChange, this);\n    if (!this._createXHR(item)) {\n      //TODO: Throw error?\n    }\n  }\n  ;\n  var p = createjs.extend(XHRRequest, createjs.AbstractRequest);\n\n  // static properties\n  /**\n   * A list of XMLHTTP object IDs to try when building an ActiveX object for XHR requests in earlier versions of IE.\n   * @property ACTIVEX_VERSIONS\n   * @type {Array}\n   * @since 0.4.2\n   * @private\n   */\n  XHRRequest.ACTIVEX_VERSIONS = [\"Msxml2.XMLHTTP.6.0\", \"Msxml2.XMLHTTP.5.0\", \"Msxml2.XMLHTTP.4.0\", \"MSXML2.XMLHTTP.3.0\", \"MSXML2.XMLHTTP\", \"Microsoft.XMLHTTP\"];\n\n  // Public methods\n  /**\n   * Look up the loaded result.\n   * @method getResult\n   * @param {Boolean} [raw=false] Return a raw result instead of a formatted result. This applies to content\n   * loaded via XHR such as scripts, XML, CSS, and Images. If there is no raw result, the formatted result will be\n   * returned instead.\n   * @return {Object} A result object containing the content that was loaded, such as:\n   * <ul>\n   *      <li>An image tag (&lt;image /&gt;) for images</li>\n   *      <li>A script tag for JavaScript (&lt;script /&gt;). Note that scripts loaded with tags may be added to the\n   *      HTML head.</li>\n   *      <li>A style tag for CSS (&lt;style /&gt;)</li>\n   *      <li>Raw text for TEXT</li>\n   *      <li>A formatted JavaScript object defined by JSON</li>\n   *      <li>An XML document</li>\n   *      <li>An binary arraybuffer loaded by XHR</li>\n   * </ul>\n   * Note that if a raw result is requested, but not found, the result will be returned instead.\n   */\n  p.getResult = function (raw) {\n    if (raw && this._rawResponse) {\n      return this._rawResponse;\n    }\n    return this._response;\n  };\n\n  // Overrides abstract method in AbstractRequest\n  p.cancel = function () {\n    this.canceled = true;\n    this._clean();\n    this._request.abort();\n  };\n\n  // Overrides abstract method in AbstractLoader\n  p.load = function () {\n    if (this._request == null) {\n      this._handleError();\n      return;\n    }\n\n    //Events\n    if (this._request.addEventListener != null) {\n      this._request.addEventListener(\"loadstart\", this._handleLoadStartProxy, false);\n      this._request.addEventListener(\"progress\", this._handleProgressProxy, false);\n      this._request.addEventListener(\"abort\", this._handleAbortProxy, false);\n      this._request.addEventListener(\"error\", this._handleErrorProxy, false);\n      this._request.addEventListener(\"timeout\", this._handleTimeoutProxy, false);\n\n      // Note: We don't get onload in all browsers (earlier FF and IE). onReadyStateChange handles these.\n      this._request.addEventListener(\"load\", this._handleLoadProxy, false);\n      this._request.addEventListener(\"readystatechange\", this._handleReadyStateChangeProxy, false);\n    } else {\n      // IE9 support\n      this._request.onloadstart = this._handleLoadStartProxy;\n      this._request.onprogress = this._handleProgressProxy;\n      this._request.onabort = this._handleAbortProxy;\n      this._request.onerror = this._handleErrorProxy;\n      this._request.ontimeout = this._handleTimeoutProxy;\n\n      // Note: We don't get onload in all browsers (earlier FF and IE). onReadyStateChange handles these.\n      this._request.onload = this._handleLoadProxy;\n      this._request.onreadystatechange = this._handleReadyStateChangeProxy;\n    }\n\n    // Set up a timeout if we don't have XHR2\n    if (this._xhrLevel == 1) {\n      this._loadTimeout = setTimeout(createjs.proxy(this._handleTimeout, this), this._item.loadTimeout);\n    }\n\n    // Sometimes we get back 404s immediately, particularly when there is a cross origin request.  // note this does not catch in Chrome\n    try {\n      if (!this._item.values) {\n        this._request.send();\n      } else {\n        this._request.send(createjs.URLUtils.formatQueryString(this._item.values));\n      }\n    } catch (error) {\n      this.dispatchEvent(new createjs.ErrorEvent(\"XHR_SEND\", null, error));\n    }\n  };\n  p.setResponseType = function (type) {\n    // Some old browsers doesn't support blob, so we convert arraybuffer to blob after response is downloaded\n    if (type === 'blob') {\n      type = window.URL ? 'blob' : 'arraybuffer';\n      this._responseType = type;\n    }\n    this._request.responseType = type;\n  };\n\n  /**\n   * Get all the response headers from the XmlHttpRequest.\n   *\n   * <strong>From the docs:</strong> Return all the HTTP headers, excluding headers that are a case-insensitive match\n   * for Set-Cookie or Set-Cookie2, as a single string, with each header line separated by a U+000D CR U+000A LF pair,\n   * excluding the status line, and with each header name and header value separated by a U+003A COLON U+0020 SPACE\n   * pair.\n   * @method getAllResponseHeaders\n   * @return {String}\n   * @since 0.4.1\n   */\n  p.getAllResponseHeaders = function () {\n    if (this._request.getAllResponseHeaders instanceof Function) {\n      return this._request.getAllResponseHeaders();\n    } else {\n      return null;\n    }\n  };\n\n  /**\n   * Get a specific response header from the XmlHttpRequest.\n   *\n   * <strong>From the docs:</strong> Returns the header field value from the response of which the field name matches\n   * header, unless the field name is Set-Cookie or Set-Cookie2.\n   * @method getResponseHeader\n   * @param {String} header The header name to retrieve.\n   * @return {String}\n   * @since 0.4.1\n   */\n  p.getResponseHeader = function (header) {\n    if (this._request.getResponseHeader instanceof Function) {\n      return this._request.getResponseHeader(header);\n    } else {\n      return null;\n    }\n  };\n\n  // protected methods\n  /**\n   * The XHR request has reported progress.\n   * @method _handleProgress\n   * @param {Object} event The XHR progress event.\n   * @private\n   */\n  p._handleProgress = function (event) {\n    if (!event || event.loaded > 0 && event.total == 0) {\n      return; // Sometimes we get no \"total\", so just ignore the progress event.\n    }\n\n    var newEvent = new createjs.ProgressEvent(event.loaded, event.total);\n    this.dispatchEvent(newEvent);\n  };\n\n  /**\n   * The XHR request has reported a load start.\n   * @method _handleLoadStart\n   * @param {Object} event The XHR loadStart event.\n   * @private\n   */\n  p._handleLoadStart = function (event) {\n    clearTimeout(this._loadTimeout);\n    this.dispatchEvent(\"loadstart\");\n  };\n\n  /**\n   * The XHR request has reported an abort event.\n   * @method handleAbort\n   * @param {Object} event The XHR abort event.\n   * @private\n   */\n  p._handleAbort = function (event) {\n    this._clean();\n    this.dispatchEvent(new createjs.ErrorEvent(\"XHR_ABORTED\", null, event));\n  };\n\n  /**\n   * The XHR request has reported an error event.\n   * @method _handleError\n   * @param {Object} event The XHR error event.\n   * @private\n   */\n  p._handleError = function (event) {\n    this._clean();\n    this.dispatchEvent(new createjs.ErrorEvent(event.message));\n  };\n\n  /**\n   * The XHR request has reported a readyState change. Note that older browsers (IE 7 & 8) do not provide an onload\n   * event, so we must monitor the readyStateChange to determine if the file is loaded.\n   * @method _handleReadyStateChange\n   * @param {Object} event The XHR readyStateChange event.\n   * @private\n   */\n  p._handleReadyStateChange = function (event) {\n    if (this._request.readyState == 4) {\n      this._handleLoad();\n    }\n  };\n\n  /**\n   * The XHR request has completed. This is called by the XHR request directly, or by a readyStateChange that has\n   * <code>request.readyState == 4</code>. Only the first call to this method will be processed.\n   *\n   * Note that This method uses {{#crossLink \"_checkError\"}}{{/crossLink}} to determine if the server has returned an\n   * error code.\n   * @method _handleLoad\n   * @param {Object} event The XHR load event.\n   * @private\n   */\n  p._handleLoad = function (event) {\n    if (this.loaded) {\n      return;\n    }\n    this.loaded = true;\n    var error = this._checkError();\n    if (error) {\n      this._handleError(error);\n      return;\n    }\n    this._response = this._getResponse();\n    // Convert arraybuffer back to blob\n    if (this._responseType === 'arraybuffer') {\n      try {\n        this._response = new Blob([this._response]);\n      } catch (e) {\n        // Fallback to use BlobBuilder if Blob constructor is not supported\n        // Tested on Android 2.3 ~ 4.2 and iOS5 safari\n        window.BlobBuilder = window.BlobBuilder || window.WebKitBlobBuilder || window.MozBlobBuilder || window.MSBlobBuilder;\n        if (e.name === 'TypeError' && window.BlobBuilder) {\n          var builder = new BlobBuilder();\n          builder.append(this._response);\n          this._response = builder.getBlob();\n        }\n      }\n    }\n    this._clean();\n    this.dispatchEvent(new createjs.Event(\"complete\"));\n  };\n\n  /**\n   * The XHR request has timed out. This is called by the XHR request directly, or via a <code>setTimeout</code>\n   * callback.\n   * @method _handleTimeout\n   * @param {Object} [event] The XHR timeout event. This is occasionally null when called by the backup setTimeout.\n   * @private\n   */\n  p._handleTimeout = function (event) {\n    this._clean();\n    this.dispatchEvent(new createjs.ErrorEvent(\"PRELOAD_TIMEOUT\", null, event));\n  };\n\n  // Protected\n  /**\n   * Determine if there is an error in the current load.\n   * Currently this checks the status of the request for problem codes, and not actual response content:\n   * <ul>\n   *     <li>Status codes between 400 and 599 (HTTP error range)</li>\n   *     <li>A status of 0, but *only when the application is running on a server*. If the application is running\n   *     on `file:`, then it may incorrectly treat an error on local (or embedded applications) as a successful\n   *     load.</li>\n   * </ul>\n   * @method _checkError\n   * @return {Error} An error with the status code in the `message` argument.\n   * @private\n   */\n  p._checkError = function () {\n    var status = parseInt(this._request.status);\n    if (status >= 400 && status <= 599) {\n      return new Error(status);\n    } else if (status == 0) {\n      if (/^https?:/.test(location.protocol)) {\n        return new Error(0);\n      }\n      return null; // Likely an embedded app.\n    } else {\n      return null;\n    }\n  };\n\n  /**\n   * Validate the response. Different browsers have different approaches, some of which throw errors when accessed\n   * in other browsers. If there is no response, the <code>_response</code> property will remain null.\n   * @method _getResponse\n   * @private\n   */\n  p._getResponse = function () {\n    if (this._response != null) {\n      return this._response;\n    }\n    if (this._request.response != null) {\n      return this._request.response;\n    }\n\n    // Android 2.2 uses .responseText\n    try {\n      if (this._request.responseText != null) {\n        return this._request.responseText;\n      }\n    } catch (e) {}\n\n    // When loading XML, IE9 does not return .response, instead it returns responseXML.xml\n    try {\n      if (this._request.responseXML != null) {\n        return this._request.responseXML;\n      }\n    } catch (e) {}\n    return null;\n  };\n\n  /**\n   * Create an XHR request. Depending on a number of factors, we get totally different results.\n   * <ol><li>Some browsers get an <code>XDomainRequest</code> when loading cross-domain.</li>\n   *      <li>XMLHttpRequest are created when available.</li>\n   *      <li>ActiveX.XMLHTTP objects are used in older IE browsers.</li>\n   *      <li>Text requests override the mime type if possible</li>\n   *      <li>Origin headers are sent for crossdomain requests in some browsers.</li>\n   *      <li>Binary loads set the response type to \"arraybuffer\"</li></ol>\n   * @method _createXHR\n   * @param {Object} item The requested item that is being loaded.\n   * @return {Boolean} If an XHR request or equivalent was successfully created.\n   * @private\n   */\n  p._createXHR = function (item) {\n    // Check for cross-domain loads. We can't fully support them, but we can try.\n    var crossdomain = createjs.URLUtils.isCrossDomain(item);\n    var headers = {};\n\n    // Create the request. Fallback to whatever support we have.\n    var req = null;\n    if (window.XMLHttpRequest) {\n      req = new XMLHttpRequest();\n      // This is 8 or 9, so use XDomainRequest instead.\n      if (crossdomain && req.withCredentials === undefined && window.XDomainRequest) {\n        req = new XDomainRequest();\n      }\n    } else {\n      // Old IE versions use a different approach\n      for (var i = 0, l = s.ACTIVEX_VERSIONS.length; i < l; i++) {\n        var axVersion = s.ACTIVEX_VERSIONS[i];\n        try {\n          req = new ActiveXObject(axVersion);\n          break;\n        } catch (e) {}\n      }\n      if (req == null) {\n        return false;\n      }\n    }\n\n    // Default to utf-8 for Text requests.\n    if (item.mimeType == null && createjs.RequestUtils.isText(item.type)) {\n      item.mimeType = \"text/plain; charset=utf-8\";\n    }\n\n    // IE9 doesn't support overrideMimeType(), so we need to check for it.\n    if (item.mimeType && req.overrideMimeType) {\n      req.overrideMimeType(item.mimeType);\n    }\n\n    // Determine the XHR level\n    this._xhrLevel = typeof req.responseType === \"string\" ? 2 : 1;\n    var src = null;\n    if (item.method == createjs.Methods.GET) {\n      src = createjs.URLUtils.buildURI(item.src, item.values);\n    } else {\n      src = item.src;\n    }\n\n    // Open the request.  Set cross-domain flags if it is supported (XHR level 1 only)\n    req.open(item.method || createjs.Methods.GET, src, true);\n    if (crossdomain && req instanceof XMLHttpRequest && this._xhrLevel == 1) {\n      headers[\"Origin\"] = location.origin;\n    }\n\n    // To send data we need to set the Content-type header)\n    if (item.values && item.method == createjs.Methods.POST) {\n      headers[\"Content-Type\"] = \"application/x-www-form-urlencoded\";\n    }\n    if (!crossdomain && !headers[\"X-Requested-With\"]) {\n      headers[\"X-Requested-With\"] = \"XMLHttpRequest\";\n    }\n    if (item.headers) {\n      for (var n in item.headers) {\n        headers[n] = item.headers[n];\n      }\n    }\n    for (n in headers) {\n      req.setRequestHeader(n, headers[n]);\n    }\n    if (req instanceof XMLHttpRequest && item.withCredentials !== undefined) {\n      req.withCredentials = item.withCredentials;\n    }\n    this._request = req;\n    return true;\n  };\n\n  /**\n   * A request has completed (or failed or canceled), and needs to be disposed.\n   * @method _clean\n   * @private\n   */\n  p._clean = function () {\n    clearTimeout(this._loadTimeout);\n    if (this._request.removeEventListener != null) {\n      this._request.removeEventListener(\"loadstart\", this._handleLoadStartProxy);\n      this._request.removeEventListener(\"progress\", this._handleProgressProxy);\n      this._request.removeEventListener(\"abort\", this._handleAbortProxy);\n      this._request.removeEventListener(\"error\", this._handleErrorProxy);\n      this._request.removeEventListener(\"timeout\", this._handleTimeoutProxy);\n      this._request.removeEventListener(\"load\", this._handleLoadProxy);\n      this._request.removeEventListener(\"readystatechange\", this._handleReadyStateChangeProxy);\n    } else {\n      this._request.onloadstart = null;\n      this._request.onprogress = null;\n      this._request.onabort = null;\n      this._request.onerror = null;\n      this._request.ontimeout = null;\n      this._request.onload = null;\n      this._request.onreadystatechange = null;\n    }\n  };\n  p.toString = function () {\n    return \"[PreloadJS XHRRequest]\";\n  };\n  createjs.XHRRequest = createjs.promote(XHRRequest, \"AbstractRequest\");\n})();\n\n//##############################################################################\n// LoadQueue.js\n//##############################################################################\n\nwindow.createjs = window.createjs || {};\n\n/*\n TODO: WINDOWS ISSUES\n * No error for HTML audio in IE 678\n * SVG no failure error in IE 67 (maybe 8) TAGS AND XHR\n * No script complete handler in IE 67 TAGS (XHR is fine)\n * No XML/JSON in IE6 TAGS\n * Need to hide loading SVG in Opera TAGS\n * No CSS onload/readystatechange in Safari or Android TAGS (requires rule checking)\n * SVG no load or failure in Opera XHR\n * Reported issues with IE7/8\n */\n\n(function () {\n  \"use strict\";\n\n  // constructor\n  /**\n   * The LoadQueue class is the main API for preloading content. LoadQueue is a load manager, which can preload either\n   * a single file, or queue of files.\n   *\n   * <b>Creating a Queue</b><br />\n   * To use LoadQueue, create a LoadQueue instance. If you want to force tag loading where possible, set the preferXHR\n   * argument to false.\n   *\n   *      var queue = new createjs.LoadQueue(true);\n   *\n   * <b>Listening for Events</b><br />\n   * Add any listeners you want to the queue. Since PreloadJS 0.3.0, the {{#crossLink \"EventDispatcher\"}}{{/crossLink}}\n   * lets you add as many listeners as you want for events. You can subscribe to the following events:<ul>\n   *     <li>{{#crossLink \"AbstractLoader/complete:event\"}}{{/crossLink}}: fired when a queue completes loading all\n   *     files</li>\n   *     <li>{{#crossLink \"AbstractLoader/error:event\"}}{{/crossLink}}: fired when the queue encounters an error with\n   *     any file.</li>\n   *     <li>{{#crossLink \"AbstractLoader/progress:event\"}}{{/crossLink}}: Progress for the entire queue has\n   *     changed.</li>\n   *     <li>{{#crossLink \"LoadQueue/fileload:event\"}}{{/crossLink}}: A single file has completed loading.</li>\n   *     <li>{{#crossLink \"LoadQueue/fileprogress:event\"}}{{/crossLink}}: Progress for a single file has changes. Note\n   *     that only files loaded with XHR (or possibly by plugins) will fire progress events other than 0 or 100%.</li>\n   * </ul>\n   *\n   *      queue.on(\"fileload\", handleFileLoad, this);\n   *      queue.on(\"complete\", handleComplete, this);\n   *\n   * <b>Adding files and manifests</b><br />\n   * Add files you want to load using {{#crossLink \"LoadQueue/loadFile\"}}{{/crossLink}} or add multiple files at a\n   * time using a list or a manifest definition using {{#crossLink \"LoadQueue/loadManifest\"}}{{/crossLink}}. Files are\n   * appended to the end of the active queue, so you can use these methods as many times as you like, whenever you\n   * like.\n   *\n   *      queue.loadFile(\"filePath/file.jpg\");\n   *      queue.loadFile({id:\"image\", src:\"filePath/file.jpg\"});\n   *      queue.loadManifest([\"filePath/file.jpg\", {id:\"image\", src:\"filePath/file.jpg\"}]);\n   *\n   *      // Use an external manifest\n   *      queue.loadManifest(\"path/to/manifest.json\");\n   *      queue.loadManifest({src:\"manifest.json\", type:\"manifest\"});\n   *\n   * If you pass `false` as the `loadNow` parameter, the queue will not kick of the load of the files, but it will not\n   * stop if it has already been started. Call the {{#crossLink \"AbstractLoader/load\"}}{{/crossLink}} method to begin\n   * a paused queue. Note that a paused queue will automatically resume when new files are added to it with a\n   * `loadNow` argument of `true`.\n   *\n   *      queue.load();\n   *\n   * <b>File Types</b><br />\n   * The file type of a manifest item is auto-determined by the file extension. The pattern matching in PreloadJS\n   * should handle the majority of standard file and url formats, and works with common file extensions. If you have\n   * either a non-standard file extension, or are serving the file using a proxy script, then you can pass in a\n   * <code>type</code> property with any manifest item.\n   *\n   *      queue.loadFile({src:\"path/to/myFile.mp3x\", type:createjs.Types.SOUND});\n   *\n   *      // Note that PreloadJS will not read a file extension from the query string\n   *      queue.loadFile({src:\"http://server.com/proxy?file=image.jpg\", type:createjs.Types.IMAGE});\n   *\n   * Supported types are defined on the {{#crossLink \"AbstractLoader\"}}{{/crossLink}} class, and include:\n   * <ul>\n   *     <li>{{#crossLink \"Types/BINARY:property\"}}{{/crossLink}}: Raw binary data via XHR</li>\n   *     <li>{{#crossLink \"Types/CSS:property\"}}{{/crossLink}}: CSS files</li>\n   *     <li>{{#crossLink \"Types/IMAGE:property\"}}{{/crossLink}}: Common image formats</li>\n   *     <li>{{#crossLink \"Types/JAVASCRIPT:property\"}}{{/crossLink}}: JavaScript files</li>\n   *     <li>{{#crossLink \"Types/JSON:property\"}}{{/crossLink}}: JSON data</li>\n   *     <li>{{#crossLink \"Types/JSONP:property\"}}{{/crossLink}}: JSON files cross-domain</li>\n   *     <li>{{#crossLink \"Types/MANIFEST:property\"}}{{/crossLink}}: A list of files to load in JSON format, see\n   *     {{#crossLink \"AbstractLoader/loadManifest\"}}{{/crossLink}}</li>\n   *     <li>{{#crossLink \"Types/SOUND:property\"}}{{/crossLink}}: Audio file formats</li>\n   *     <li>{{#crossLink \"Types/SPRITESHEET:property\"}}{{/crossLink}}: JSON SpriteSheet definitions. This\n   *     will also load sub-images, and provide a {{#crossLink \"SpriteSheet\"}}{{/crossLink}} instance.</li>\n   *     <li>{{#crossLink \"Types/SVG:property\"}}{{/crossLink}}: SVG files</li>\n   *     <li>{{#crossLink \"Types/TEXT:property\"}}{{/crossLink}}: Text files - XHR only</li>\n      *     <li>{{#crossLink \"Types/VIDEO:property\"}}{{/crossLink}}: Video objects</li>\n   *     <li>{{#crossLink \"Types/XML:property\"}}{{/crossLink}}: XML data</li>\n   * </ul>\n   *\n   * <em>Note: Loader types used to be defined on LoadQueue, but have been moved to the Types class</em>\n   *\n   * <b>Handling Results</b><br />\n   * When a file is finished downloading, a {{#crossLink \"LoadQueue/fileload:event\"}}{{/crossLink}} event is\n   * dispatched. In an example above, there is an event listener snippet for fileload. Loaded files are usually a\n   * formatted object that can be used immediately, including:\n   * <ul>\n   *     <li>Binary: The binary loaded result</li>\n   *     <li>CSS: A &lt;link /&gt; tag</li>\n   *     <li>Image: An &lt;img /&gt; tag</li>\n   *     <li>JavaScript: A &lt;script /&gt; tag</li>\n   *     <li>JSON/JSONP: A formatted JavaScript Object</li>\n   *     <li>Manifest: A JavaScript object.\n   *     <li>Sound: An &lt;audio /&gt; tag</a>\n   *     <li>SpriteSheet: A {{#crossLink \"SpriteSheet\"}}{{/crossLink}} instance, containing loaded images.\n   *     <li>SVG: An &lt;object /&gt; tag</li>\n   *     <li>Text: Raw text</li>\n      *     <li>Video: A Video DOM node</li>\n   *     <li>XML: An XML DOM node</li>\n   * </ul>\n   *\n   *      function handleFileLoad(event) {\n   *          var item = event.item; // A reference to the item that was passed in to the LoadQueue\n   *          var type = item.type;\n   *\n   *          // Add any images to the page body.\n   *          if (type == createjs.Types.IMAGE) {\n   *              document.body.appendChild(event.result);\n   *          }\n   *      }\n   *\n   * At any time after the file has been loaded (usually after the queue has completed), any result can be looked up\n   * via its \"id\" using {{#crossLink \"LoadQueue/getResult\"}}{{/crossLink}}. If no id was provided, then the\n   * \"src\" or file path can be used instead, including the `path` defined by a manifest, but <strong>not including</strong>\n   * a base path defined on the LoadQueue. It is recommended to always pass an id if you want to look up content.\n   *\n   *      var image = queue.getResult(\"image\");\n   *      document.body.appendChild(image);\n   *\n   * Raw loaded content can be accessed using the <code>rawResult</code> property of the {{#crossLink \"LoadQueue/fileload:event\"}}{{/crossLink}}\n   * event, or can be looked up using {{#crossLink \"LoadQueue/getResult\"}}{{/crossLink}}, passing `true` as the 2nd\n   * argument. This is only applicable for content that has been parsed for the browser, specifically: JavaScript,\n   * CSS, XML, SVG, and JSON objects, or anything loaded with XHR.\n   *\n   *      var image = queue.getResult(\"image\", true); // load the binary image data loaded with XHR.\n   *\n   * <b>Plugins</b><br />\n   * LoadQueue has a simple plugin architecture to help process and preload content. For example, to preload audio,\n   * make sure to install the <a href=\"http://soundjs.com\">SoundJS</a> Sound class, which will help load HTML audio,\n   * Flash audio, and WebAudio files. This should be installed <strong>before</strong> loading any audio files.\n   *\n   *      queue.installPlugin(createjs.Sound);\n   *\n   * <h4>Known Browser Issues</h4>\n   * <ul>\n   *     <li>Browsers without audio support can not load audio files.</li>\n   *     <li>Safari on Mac OS X can only play HTML audio if QuickTime is installed</li>\n   *     <li>HTML Audio tags will only download until their <code>canPlayThrough</code> event is fired. Browsers other\n   *     than Chrome will continue to download in the background.</li>\n   *     <li>When loading scripts using tags, they are automatically added to the document.</li>\n   *     <li>Scripts loaded via XHR may not be properly inspectable with browser tools.</li>\n   *     <li>IE6 and IE7 (and some other browsers) may not be able to load XML, Text, or JSON, since they require\n   *     XHR to work.</li>\n   *     <li>Content loaded via tags will not show progress, and will continue to download in the background when\n   *     canceled, although no events will be dispatched.</li>\n   * </ul>\n   *\n   * @class LoadQueue\n   * @param {Boolean} [preferXHR=true] Determines whether the preload instance will favor loading with XHR (XML HTTP\n   * Requests), or HTML tags. When this is `false`, the queue will use tag loading when possible, and fall back on XHR\n   * when necessary.\n   * @param {String} [basePath=\"\"] A path that will be prepended on to the source parameter of all items in the queue\n   * before they are loaded.  Sources beginning with a protocol such as `http://` or a relative path such as `../`\n   * will not receive a base path.\n   * @param {String|Boolean} [crossOrigin=\"\"] An optional flag to support images loaded from a CORS-enabled server. To\n   * use it, set this value to `true`, which will default the crossOrigin property on images to \"Anonymous\". Any\n   * string value will be passed through, but only \"\" and \"Anonymous\" are recommended. <strong>Note: The crossOrigin\n   * parameter is deprecated. Use LoadItem.crossOrigin instead</strong>\n   *\n   * @constructor\n   * @extends AbstractLoader\n   */\n  function LoadQueue(preferXHR, basePath, crossOrigin) {\n    this.AbstractLoader_constructor();\n\n    /**\n     * An array of the plugins registered using {{#crossLink \"LoadQueue/installPlugin\"}}{{/crossLink}}.\n     * @property _plugins\n     * @type {Array}\n     * @private\n     * @since 0.6.1\n     */\n    this._plugins = [];\n\n    /**\n     * An object hash of callbacks that are fired for each file type before the file is loaded, giving plugins the\n     * ability to override properties of the load. Please see the {{#crossLink \"LoadQueue/installPlugin\"}}{{/crossLink}}\n     * method for more information.\n     * @property _typeCallbacks\n     * @type {Object}\n     * @private\n     */\n    this._typeCallbacks = {};\n\n    /**\n     * An object hash of callbacks that are fired for each file extension before the file is loaded, giving plugins the\n     * ability to override properties of the load. Please see the {{#crossLink \"LoadQueue/installPlugin\"}}{{/crossLink}}\n     * method for more information.\n     * @property _extensionCallbacks\n     * @type {null}\n     * @private\n     */\n    this._extensionCallbacks = {};\n\n    /**\n     * The next preload queue to process when this one is complete. If an error is thrown in the current queue, and\n     * {{#crossLink \"LoadQueue/stopOnError:property\"}}{{/crossLink}} is `true`, the next queue will not be processed.\n     * @property next\n     * @type {LoadQueue}\n     * @default null\n     */\n    this.next = null;\n\n    /**\n     * Ensure loaded scripts \"complete\" in the order they are specified. Loaded scripts are added to the document head\n     * once they are loaded. Scripts loaded via tags will load one-at-a-time when this property is `true`, whereas\n     * scripts loaded using XHR can load in any order, but will \"finish\" and be added to the document in the order\n     * specified.\n     *\n     * Any items can be set to load in order by setting the {{#crossLink \"maintainOrder:property\"}}{{/crossLink}}\n     * property on the load item, or by ensuring that only one connection can be open at a time using\n     * {{#crossLink \"LoadQueue/setMaxConnections\"}}{{/crossLink}}. Note that when the `maintainScriptOrder` property\n     * is set to `true`, scripts items are automatically set to `maintainOrder=true`, and changing the\n     * `maintainScriptOrder` to `false` during a load will not change items already in a queue.\n     *\n     * <h4>Example</h4>\n     *\n     *      var queue = new createjs.LoadQueue();\n     *      queue.setMaxConnections(3); // Set a higher number to load multiple items at once\n     *      queue.maintainScriptOrder = true; // Ensure scripts are loaded in order\n     *      queue.loadManifest([\n     *          \"script1.js\",\n     *          \"script2.js\",\n     *          \"image.png\", // Load any time\n     *          {src: \"image2.png\", maintainOrder: true} // Will wait for script2.js\n     *          \"image3.png\",\n     *          \"script3.js\" // Will wait for image2.png before loading (or completing when loading with XHR)\n     *      ]);\n     *\n     * @property maintainScriptOrder\n     * @type {Boolean}\n     * @default true\n     */\n    this.maintainScriptOrder = true;\n\n    /**\n     * Determines if the LoadQueue will stop processing the current queue when an error is encountered.\n     * @property stopOnError\n     * @type {Boolean}\n     * @default false\n     */\n    this.stopOnError = false;\n\n    /**\n     * The number of maximum open connections that a loadQueue tries to maintain. Please see\n     * {{#crossLink \"LoadQueue/setMaxConnections\"}}{{/crossLink}} for more information.\n     * @property _maxConnections\n     * @type {Number}\n     * @default 1\n     * @private\n     */\n    this._maxConnections = 1;\n\n    /**\n     * An internal list of all the default Loaders that are included with PreloadJS. Before an item is loaded, the\n     * available loader list is iterated, in the order they are included, and as soon as a loader indicates it can\n     * handle the content, it will be selected. The default loader, ({{#crossLink \"TextLoader\"}}{{/crossLink}} is\n     * last in the list, so it will be used if no other match is found. Typically, loaders will match based on the\n     * {{#crossLink \"LoadItem/type\"}}{{/crossLink}}, which is automatically determined using the file extension of\n     * the {{#crossLink \"LoadItem/src:property\"}}{{/crossLink}}.\n     *\n     * Loaders can be removed from PreloadJS by simply not including them.\n     *\n     * Custom loaders installed using {{#crossLink \"registerLoader\"}}{{/crossLink}} will be prepended to this list\n     * so that they are checked first.\n     * @property _availableLoaders\n     * @type {Array}\n     * @private\n     * @since 0.6.0\n     */\n    this._availableLoaders = [createjs.FontLoader, createjs.ImageLoader, createjs.JavaScriptLoader, createjs.CSSLoader, createjs.JSONLoader, createjs.JSONPLoader, createjs.SoundLoader, createjs.ManifestLoader, createjs.SpriteSheetLoader, createjs.XMLLoader, createjs.SVGLoader, createjs.BinaryLoader, createjs.VideoLoader, createjs.TextLoader];\n\n    /**\n     * The number of built in loaders, so they can't be removed by {{#crossLink \"unregisterLoader\"}}{{/crossLink}.\n    \t\t * @property _defaultLoaderLength\n     * @type {Number}\n     * @private\n     * @since 0.6.0\n     */\n    this._defaultLoaderLength = this._availableLoaders.length;\n    this.init(preferXHR, basePath, crossOrigin);\n  }\n  var p = createjs.extend(LoadQueue, createjs.AbstractLoader);\n  var s = LoadQueue;\n\n  // Remove these @deprecated properties after 1.0\n  try {\n    Object.defineProperties(s, {\n      POST: {\n        get: createjs.deprecate(function () {\n          return createjs.Methods.POST;\n        }, \"AbstractLoader.POST\")\n      },\n      GET: {\n        get: createjs.deprecate(function () {\n          return createjs.Methods.GET;\n        }, \"AbstractLoader.GET\")\n      },\n      BINARY: {\n        get: createjs.deprecate(function () {\n          return createjs.Types.BINARY;\n        }, \"AbstractLoader.BINARY\")\n      },\n      CSS: {\n        get: createjs.deprecate(function () {\n          return createjs.Types.CSS;\n        }, \"AbstractLoader.CSS\")\n      },\n      FONT: {\n        get: createjs.deprecate(function () {\n          return createjs.Types.FONT;\n        }, \"AbstractLoader.FONT\")\n      },\n      FONTCSS: {\n        get: createjs.deprecate(function () {\n          return createjs.Types.FONTCSS;\n        }, \"AbstractLoader.FONTCSS\")\n      },\n      IMAGE: {\n        get: createjs.deprecate(function () {\n          return createjs.Types.IMAGE;\n        }, \"AbstractLoader.IMAGE\")\n      },\n      JAVASCRIPT: {\n        get: createjs.deprecate(function () {\n          return createjs.Types.JAVASCRIPT;\n        }, \"AbstractLoader.JAVASCRIPT\")\n      },\n      JSON: {\n        get: createjs.deprecate(function () {\n          return createjs.Types.JSON;\n        }, \"AbstractLoader.JSON\")\n      },\n      JSONP: {\n        get: createjs.deprecate(function () {\n          return createjs.Types.JSONP;\n        }, \"AbstractLoader.JSONP\")\n      },\n      MANIFEST: {\n        get: createjs.deprecate(function () {\n          return createjs.Types.MANIFEST;\n        }, \"AbstractLoader.MANIFEST\")\n      },\n      SOUND: {\n        get: createjs.deprecate(function () {\n          return createjs.Types.SOUND;\n        }, \"AbstractLoader.SOUND\")\n      },\n      VIDEO: {\n        get: createjs.deprecate(function () {\n          return createjs.Types.VIDEO;\n        }, \"AbstractLoader.VIDEO\")\n      },\n      SPRITESHEET: {\n        get: createjs.deprecate(function () {\n          return createjs.Types.SPRITESHEET;\n        }, \"AbstractLoader.SPRITESHEET\")\n      },\n      SVG: {\n        get: createjs.deprecate(function () {\n          return createjs.Types.SVG;\n        }, \"AbstractLoader.SVG\")\n      },\n      TEXT: {\n        get: createjs.deprecate(function () {\n          return createjs.Types.TEXT;\n        }, \"AbstractLoader.TEXT\")\n      },\n      XML: {\n        get: createjs.deprecate(function () {\n          return createjs.Types.XML;\n        }, \"AbstractLoader.XML\")\n      }\n    });\n  } catch (e) {}\n\n  /**\n   * An internal initialization method, which is used for initial set up, but also to reset the LoadQueue.\n   * @method init\n   * @param preferXHR\n   * @param basePath\n   * @param crossOrigin\n   * @private\n   */\n  p.init = function (preferXHR, basePath, crossOrigin) {\n    // public properties\n\n    /**\n     * Try and use XMLHttpRequest (XHR) when possible. Note that LoadQueue will default to tag loading or XHR\n     * loading depending on the requirements for a media type. For example, HTML audio can not be loaded with XHR,\n     * and plain text can not be loaded with tags, so it will default the the correct type instead of using the\n     * user-defined type.\n     * @type {Boolean}\n     * @default true\n     * @since 0.6.0\n     */\n    this.preferXHR = true; //TODO: Get/Set\n    this._preferXHR = true;\n    this.setPreferXHR(preferXHR);\n\n    // protected properties\n    /**\n     * Whether the queue is currently paused or not.\n     * @property _paused\n     * @type {boolean}\n     * @private\n     */\n    this._paused = false;\n\n    /**\n     * A path that will be prepended on to the item's {{#crossLink \"LoadItem/src:property\"}}{{/crossLink}}. The\n     * `_basePath` property will only be used if an item's source is relative, and does not include a protocol such\n     * as `http://`, or a relative path such as `../`.\n     * @property _basePath\n     * @type {String}\n     * @private\n     * @since 0.3.1\n     */\n    this._basePath = basePath;\n\n    /**\n     * An optional flag to set on images that are loaded using PreloadJS, which enables CORS support. Images loaded\n     * cross-domain by servers that support CORS require the crossOrigin flag to be loaded and interacted with by\n     * a canvas. When loading locally, or with a server with no CORS support, this flag can cause other security issues,\n     * so it is recommended to only set it if you are sure the server supports it. Currently, supported values are \"\"\n     * and \"Anonymous\".\n     * @property _crossOrigin\n     * @type {String}\n     * @default \"\"\n     * @private\n     * @since 0.4.1\n     */\n    this._crossOrigin = crossOrigin;\n\n    /**\n     * Determines if the loadStart event was dispatched already. This event is only fired one time, when the first\n     * file is requested.\n     * @property _loadStartWasDispatched\n     * @type {Boolean}\n     * @default false\n     * @private\n     */\n    this._loadStartWasDispatched = false;\n\n    /**\n     * Determines if there is currently a script loading. This helps ensure that only a single script loads at once when\n     * using a script tag to do preloading.\n     * @property _currentlyLoadingScript\n     * @type {Boolean}\n     * @private\n     */\n    this._currentlyLoadingScript = null;\n\n    /**\n     * An array containing the currently downloading files.\n     * @property _currentLoads\n     * @type {Array}\n     * @private\n     */\n    this._currentLoads = [];\n\n    /**\n     * An array containing the queued items that have not yet started downloading.\n     * @property _loadQueue\n     * @type {Array}\n     * @private\n     */\n    this._loadQueue = [];\n\n    /**\n     * An array containing downloads that have not completed, so that the LoadQueue can be properly reset.\n     * @property _loadQueueBackup\n     * @type {Array}\n     * @private\n     */\n    this._loadQueueBackup = [];\n\n    /**\n     * An object hash of items that have finished downloading, indexed by the {{#crossLink \"LoadItem\"}}{{/crossLink}}\n     * id.\n     * @property _loadItemsById\n     * @type {Object}\n     * @private\n     */\n    this._loadItemsById = {};\n\n    /**\n     * An object hash of items that have finished downloading, indexed by {{#crossLink \"LoadItem\"}}{{/crossLink}}\n     * source.\n     * @property _loadItemsBySrc\n     * @type {Object}\n     * @private\n     */\n    this._loadItemsBySrc = {};\n\n    /**\n     * An object hash of loaded items, indexed by the ID of the {{#crossLink \"LoadItem\"}}{{/crossLink}}.\n     * @property _loadedResults\n     * @type {Object}\n     * @private\n     */\n    this._loadedResults = {};\n\n    /**\n     * An object hash of un-parsed loaded items, indexed by the ID of the {{#crossLink \"LoadItem\"}}{{/crossLink}}.\n     * @property _loadedRawResults\n     * @type {Object}\n     * @private\n     */\n    this._loadedRawResults = {};\n\n    /**\n     * The number of items that have been requested. This helps manage an overall progress without knowing how large\n     * the files are before they are downloaded. This does not include items inside of loaders such as the\n     * {{#crossLink \"ManifestLoader\"}}{{/crossLink}}.\n     * @property _numItems\n     * @type {Number}\n     * @default 0\n     * @private\n     */\n    this._numItems = 0;\n\n    /**\n     * The number of items that have completed loaded. This helps manage an overall progress without knowing how large\n     * the files are before they are downloaded.\n     * @property _numItemsLoaded\n     * @type {Number}\n     * @default 0\n     * @private\n     */\n    this._numItemsLoaded = 0;\n\n    /**\n     * A list of scripts in the order they were requested. This helps ensure that scripts are \"completed\" in the right\n     * order.\n     * @property _scriptOrder\n     * @type {Array}\n     * @private\n     */\n    this._scriptOrder = [];\n\n    /**\n     * A list of scripts that have been loaded. Items are added to this list as <code>null</code> when they are\n     * requested, contain the loaded item if it has completed, but not been dispatched to the user, and <code>true</true>\n     * once they are complete and have been dispatched.\n     * @property _loadedScripts\n     * @type {Array}\n     * @private\n     */\n    this._loadedScripts = [];\n\n    /**\n     * The last progress amount. This is used to suppress duplicate progress events.\n     * @property _lastProgress\n     * @type {Number}\n     * @private\n     * @since 0.6.0\n     */\n    this._lastProgress = NaN;\n  };\n\n  // static properties\n\n  // events\n  /**\n   * This event is fired when an individual file has loaded, and been processed.\n   * @event fileload\n   * @param {Object} target The object that dispatched the event.\n   * @param {String} type The event type.\n   * @param {Object} item The file item which was specified in the {{#crossLink \"LoadQueue/loadFile\"}}{{/crossLink}}\n   * or {{#crossLink \"LoadQueue/loadManifest\"}}{{/crossLink}} call. If only a string path or tag was specified, the\n   * object will contain that value as a `src` property.\n   * @param {Object} result The HTML tag or parsed result of the loaded item.\n   * @param {Object} rawResult The unprocessed result, usually the raw text or binary data before it is converted\n   * to a usable object.\n   * @since 0.3.0\n   */\n\n  /**\n   * This {{#crossLink \"ProgressEvent\"}}{{/crossLink}} that is fired when an an individual file's progress changes.\n   * @event fileprogress\n   * @since 0.3.0\n   */\n\n  /**\n   * This event is fired when an individual file starts to load.\n   * @event filestart\n   * @param {Object} target The object that dispatched the event.\n   * @param {String} type The event type.\n   * @param {Object} item The file item which was specified in the {{#crossLink \"LoadQueue/loadFile\"}}{{/crossLink}}\n   * or {{#crossLink \"LoadQueue/loadManifest\"}}{{/crossLink}} call. If only a string path or tag was specified, the\n   * object will contain that value as a property.\n   */\n\n  /**\n   * Although it extends {{#crossLink \"AbstractLoader\"}}{{/crossLink}}, the `initialize` event is never fired from\n   * a LoadQueue instance.\n   * @event initialize\n   * @private\n   */\n\n  // public methods\n  /**\n   * Register a custom loaders class. New loaders are given precedence over loaders added earlier and default loaders.\n   * It is recommended that loaders extend {{#crossLink \"AbstractLoader\"}}{{/crossLink}}. Loaders can only be added\n   * once, and will be prepended to the list of available loaders.\n   * @method registerLoader\n   * @param {Function|AbstractLoader} loader The AbstractLoader class to add.\n   * @since 0.6.0\n   */\n  p.registerLoader = function (loader) {\n    if (!loader || !loader.canLoadItem) {\n      throw new Error(\"loader is of an incorrect type.\");\n    } else if (this._availableLoaders.indexOf(loader) != -1) {\n      throw new Error(\"loader already exists.\"); //LM: Maybe just silently fail here\n    }\n\n    this._availableLoaders.unshift(loader);\n  };\n\n  /**\n   * Remove a custom loader added using {{#crossLink \"registerLoader\"}}{{/crossLink}}. Only custom loaders can be\n   * unregistered, the default loaders will always be available.\n   * @method unregisterLoader\n   * @param {Function|AbstractLoader} loader The AbstractLoader class to remove\n   */\n  p.unregisterLoader = function (loader) {\n    var idx = this._availableLoaders.indexOf(loader);\n    if (idx != -1 && idx < this._defaultLoaderLength - 1) {\n      this._availableLoaders.splice(idx, 1);\n    }\n  };\n\n  /**\n   * Change the {{#crossLink \"preferXHR:property\"}}{{/crossLink}} value. Note that if this is set to `true`, it may\n   * fail, or be ignored depending on the browser's capabilities and the load type.\n   * @method setPreferXHR\n   * @param {Boolean} value\n   * @returns {Boolean} The value of {{#crossLink \"preferXHR\"}}{{/crossLink}} that was successfully set.\n   * @since 0.6.0\n   */\n  p.setPreferXHR = function (value) {\n    // Determine if we can use XHR. XHR defaults to TRUE, but the browser may not support it.\n    //TODO: Should we be checking for the other XHR types? Might have to do a try/catch on the different types similar to createXHR.\n    this.preferXHR = value != false && window.XMLHttpRequest != null;\n    return this.preferXHR;\n  };\n\n  /**\n   * Stops all queued and loading items, and clears the queue. This also removes all internal references to loaded\n   * content, and allows the queue to be used again.\n   * @method removeAll\n   * @since 0.3.0\n   */\n  p.removeAll = function () {\n    this.remove();\n  };\n\n  /**\n   * Stops an item from being loaded, and removes it from the queue. If nothing is passed, all items are removed.\n   * This also removes internal references to loaded item(s).\n   *\n   * <h4>Example</h4>\n   *\n   *      queue.loadManifest([\n   *          {src:\"test.png\", id:\"png\"},\n   *          {src:\"test.jpg\", id:\"jpg\"},\n   *          {src:\"test.mp3\", id:\"mp3\"}\n   *      ]);\n   *      queue.remove(\"png\"); // Single item by ID\n   *      queue.remove(\"png\", \"test.jpg\"); // Items as arguments. Mixed id and src.\n   *      queue.remove([\"test.png\", \"jpg\"]); // Items in an Array. Mixed id and src.\n   *\n   * @method remove\n   * @param {String | Array} idsOrUrls* The id or ids to remove from this queue. You can pass an item, an array of\n   * items, or multiple items as arguments.\n   * @since 0.3.0\n   */\n  p.remove = function (idsOrUrls) {\n    var args = null;\n    if (idsOrUrls && !Array.isArray(idsOrUrls)) {\n      args = [idsOrUrls];\n    } else if (idsOrUrls) {\n      args = idsOrUrls;\n    } else if (arguments.length > 0) {\n      return;\n    }\n    var itemsWereRemoved = false;\n\n    // Destroy everything\n    if (!args) {\n      this.close();\n      for (var n in this._loadItemsById) {\n        this._disposeItem(this._loadItemsById[n]);\n      }\n      this.init(this.preferXHR, this._basePath);\n\n      // Remove specific items\n    } else {\n      while (args.length) {\n        var item = args.pop();\n        var r = this.getResult(item);\n\n        //Remove from the main load Queue\n        for (i = this._loadQueue.length - 1; i >= 0; i--) {\n          loadItem = this._loadQueue[i].getItem();\n          if (loadItem.id == item || loadItem.src == item) {\n            this._loadQueue.splice(i, 1)[0].cancel();\n            break;\n          }\n        }\n\n        //Remove from the backup queue\n        for (i = this._loadQueueBackup.length - 1; i >= 0; i--) {\n          loadItem = this._loadQueueBackup[i].getItem();\n          if (loadItem.id == item || loadItem.src == item) {\n            this._loadQueueBackup.splice(i, 1)[0].cancel();\n            break;\n          }\n        }\n        if (r) {\n          this._disposeItem(this.getItem(item));\n        } else {\n          for (var i = this._currentLoads.length - 1; i >= 0; i--) {\n            var loadItem = this._currentLoads[i].getItem();\n            if (loadItem.id == item || loadItem.src == item) {\n              this._currentLoads.splice(i, 1)[0].cancel();\n              itemsWereRemoved = true;\n              break;\n            }\n          }\n        }\n      }\n\n      // If this was called during a load, try to load the next item.\n      if (itemsWereRemoved) {\n        this._loadNext();\n      }\n    }\n  };\n\n  /**\n   * Stops all open loads, destroys any loaded items, and resets the queue, so all items can\n   * be reloaded again by calling {{#crossLink \"AbstractLoader/load\"}}{{/crossLink}}. Items are not removed from the\n   * queue. To remove items use the {{#crossLink \"LoadQueue/remove\"}}{{/crossLink}} or\n   * {{#crossLink \"LoadQueue/removeAll\"}}{{/crossLink}} method.\n   * @method reset\n   * @since 0.3.0\n   */\n  p.reset = function () {\n    this.close();\n    for (var n in this._loadItemsById) {\n      this._disposeItem(this._loadItemsById[n]);\n    }\n\n    //Reset the queue to its start state\n    var a = [];\n    for (var i = 0, l = this._loadQueueBackup.length; i < l; i++) {\n      a.push(this._loadQueueBackup[i].getItem());\n    }\n    this.loadManifest(a, false);\n  };\n\n  /**\n   * Register a plugin. Plugins can map to load types (sound, image, etc), or specific extensions (png, mp3, etc).\n   * Currently, only one plugin can exist per type/extension.\n   *\n   * When a plugin is installed, a <code>getPreloadHandlers()</code> method will be called on it. For more information\n   * on this method, check out the {{#crossLink \"SamplePlugin/getPreloadHandlers\"}}{{/crossLink}} method in the\n   * {{#crossLink \"SamplePlugin\"}}{{/crossLink}} class.\n   *\n   * Before a file is loaded, a matching plugin has an opportunity to modify the load. If a `callback` is returned\n   * from the {{#crossLink \"SamplePlugin/getPreloadHandlers\"}}{{/crossLink}} method, it will be invoked first, and its\n   * result may cancel or modify the item. The callback method can also return a `completeHandler` to be fired when\n   * the file is loaded, or a `tag` object, which will manage the actual download. For more information on these\n   * methods, check out the {{#crossLink \"SamplePlugin/preloadHandler\"}}{{/crossLink}} and {{#crossLink \"SamplePlugin/fileLoadHandler\"}}{{/crossLink}}\n   * methods on the {{#crossLink \"SamplePlugin\"}}{{/crossLink}}.\n   *\n   * @method installPlugin\n   * @param {Function} plugin The plugin class to install.\n   */\n  p.installPlugin = function (plugin) {\n    if (plugin == null) {\n      return;\n    }\n    if (plugin.getPreloadHandlers != null) {\n      this._plugins.push(plugin);\n      var map = plugin.getPreloadHandlers();\n      map.scope = plugin;\n      if (map.types != null) {\n        for (var i = 0, l = map.types.length; i < l; i++) {\n          this._typeCallbacks[map.types[i]] = map;\n        }\n      }\n      if (map.extensions != null) {\n        for (i = 0, l = map.extensions.length; i < l; i++) {\n          this._extensionCallbacks[map.extensions[i]] = map;\n        }\n      }\n    }\n  };\n\n  /**\n   * Set the maximum number of concurrent connections. Note that browsers and servers may have a built-in maximum\n   * number of open connections, so any additional connections may remain in a pending state until the browser\n   * opens the connection. When loading scripts using tags, and when {{#crossLink \"LoadQueue/maintainScriptOrder:property\"}}{{/crossLink}}\n   * is `true`, only one script is loaded at a time due to browser limitations.\n   *\n   * <h4>Example</h4>\n   *\n   *      var queue = new createjs.LoadQueue();\n   *      queue.setMaxConnections(10); // Allow 10 concurrent loads\n   *\n   * @method setMaxConnections\n   * @param {Number} value The number of concurrent loads to allow. By default, only a single connection per LoadQueue\n   * is open at any time.\n   */\n  p.setMaxConnections = function (value) {\n    this._maxConnections = value;\n    if (!this._paused && this._loadQueue.length > 0) {\n      this._loadNext();\n    }\n  };\n\n  /**\n   * Load a single file. To add multiple files at once, use the {{#crossLink \"LoadQueue/loadManifest\"}}{{/crossLink}}\n   * method.\n   *\n   * Files are always appended to the current queue, so this method can be used multiple times to add files.\n   * To clear the queue first, use the {{#crossLink \"AbstractLoader/close\"}}{{/crossLink}} method.\n   * @method loadFile\n   * @param {LoadItem|Object|String} file The file object or path to load. A file can be either\n   * <ul>\n   *     <li>A {{#crossLink \"LoadItem\"}}{{/crossLink}} instance</li>\n   *     <li>An object containing properties defined by {{#crossLink \"LoadItem\"}}{{/crossLink}}</li>\n   *     <li>OR A string path to a resource. Note that this kind of load item will be converted to a {{#crossLink \"LoadItem\"}}{{/crossLink}}\n   *     in the background.</li>\n   * </ul>\n   * @param {Boolean} [loadNow=true] Kick off an immediate load (true) or wait for a load call (false). The default\n   * value is true. If the queue is paused using {{#crossLink \"LoadQueue/setPaused\"}}{{/crossLink}}, and the value is\n   * `true`, the queue will resume automatically.\n   * @param {String} [basePath] A base path that will be prepended to each file. The basePath argument overrides the\n   * path specified in the constructor. Note that if you load a manifest using a file of type {{#crossLink \"Types/MANIFEST:property\"}}{{/crossLink}},\n   * its files will <strong>NOT</strong> use the basePath parameter. <strong>The basePath parameter is deprecated.</strong>\n   * This parameter will be removed in a future version. Please either use the `basePath` parameter in the LoadQueue\n   * constructor, or a `path` property in a manifest definition.\n   */\n  p.loadFile = function (file, loadNow, basePath) {\n    if (file == null) {\n      var event = new createjs.ErrorEvent(\"PRELOAD_NO_FILE\");\n      this._sendError(event);\n      return;\n    }\n    this._addItem(file, null, basePath);\n    if (loadNow !== false) {\n      this.setPaused(false);\n    } else {\n      this.setPaused(true);\n    }\n  };\n\n  /**\n   * Load an array of files. To load a single file, use the {{#crossLink \"LoadQueue/loadFile\"}}{{/crossLink}} method.\n   * The files in the manifest are requested in the same order, but may complete in a different order if the max\n   * connections are set above 1 using {{#crossLink \"LoadQueue/setMaxConnections\"}}{{/crossLink}}. Scripts will load\n   * in the right order as long as {{#crossLink \"LoadQueue/maintainScriptOrder\"}}{{/crossLink}} is true (which is\n   * default).\n   *\n   * Files are always appended to the current queue, so this method can be used multiple times to add files.\n   * To clear the queue first, use the {{#crossLink \"AbstractLoader/close\"}}{{/crossLink}} method.\n   * @method loadManifest\n   * @param {Array|String|Object} manifest An list of files to load. The loadManifest call supports four types of\n   * manifests:\n   * <ol>\n   *     <li>A string path, which points to a manifest file, which is a JSON file that contains a \"manifest\" property,\n   *     which defines the list of files to load, and can optionally contain a \"path\" property, which will be\n   *     prepended to each file in the list.</li>\n   *     <li>An object which defines a \"src\", which is a JSON or JSONP file. A \"callback\" can be defined for JSONP\n   *     file. The JSON/JSONP file should contain a \"manifest\" property, which defines the list of files to load,\n   *     and can optionally contain a \"path\" property, which will be prepended to each file in the list.</li>\n   *     <li>An object which contains a \"manifest\" property, which defines the list of files to load, and can\n   *     optionally contain a \"path\" property, which will be prepended to each file in the list.</li>\n   *     <li>An Array of files to load.</li>\n   * </ol>\n   *\n   * Each \"file\" in a manifest can be either:\n   * <ul>\n   *     <li>A {{#crossLink \"LoadItem\"}}{{/crossLink}} instance</li>\n   *     <li>An object containing properties defined by {{#crossLink \"LoadItem\"}}{{/crossLink}}</li>\n   *     <li>OR A string path to a resource. Note that this kind of load item will be converted to a {{#crossLink \"LoadItem\"}}{{/crossLink}}\n   *     in the background.</li>\n   * </ul>\n   *\n   * @param {Boolean} [loadNow=true] Kick off an immediate load (true) or wait for a load call (false). The default\n   * value is true. If the queue is paused using {{#crossLink \"LoadQueue/setPaused\"}}{{/crossLink}} and this value is\n   * `true`, the queue will resume automatically.\n   * @param {String} [basePath] A base path that will be prepended to each file. The basePath argument overrides the\n   * path specified in the constructor. Note that if you load a manifest using a file of type {{#crossLink \"LoadQueue/MANIFEST:property\"}}{{/crossLink}},\n   * its files will <strong>NOT</strong> use the basePath parameter. <strong>The basePath parameter is deprecated.</strong>\n   * This parameter will be removed in a future version. Please either use the `basePath` parameter in the LoadQueue\n   * constructor, or a `path` property in a manifest definition.\n   */\n  p.loadManifest = function (manifest, loadNow, basePath) {\n    var fileList = null;\n    var path = null;\n\n    // Array-based list of items\n    if (Array.isArray(manifest)) {\n      if (manifest.length == 0) {\n        var event = new createjs.ErrorEvent(\"PRELOAD_MANIFEST_EMPTY\");\n        this._sendError(event);\n        return;\n      }\n      fileList = manifest;\n\n      // String-based. Only file manifests can be specified this way. Any other types will cause an error when loaded.\n    } else if (typeof manifest === \"string\") {\n      fileList = [{\n        src: manifest,\n        type: s.MANIFEST\n      }];\n    } else if (typeof manifest == \"object\") {\n      // An object that defines a manifest path\n      if (manifest.src !== undefined) {\n        if (manifest.type == null) {\n          manifest.type = s.MANIFEST;\n        } else if (manifest.type != s.MANIFEST) {\n          var event = new createjs.ErrorEvent(\"PRELOAD_MANIFEST_TYPE\");\n          this._sendError(event);\n        }\n        fileList = [manifest];\n\n        // An object that defines a manifest\n      } else if (manifest.manifest !== undefined) {\n        fileList = manifest.manifest;\n        path = manifest.path;\n      }\n\n      // Unsupported. This will throw an error.\n    } else {\n      var event = new createjs.ErrorEvent(\"PRELOAD_MANIFEST_NULL\");\n      this._sendError(event);\n      return;\n    }\n    for (var i = 0, l = fileList.length; i < l; i++) {\n      this._addItem(fileList[i], path, basePath);\n    }\n    if (loadNow !== false) {\n      this.setPaused(false);\n    } else {\n      this.setPaused(true);\n    }\n  };\n\n  /**\n   * Start a LoadQueue that was created, but not automatically started.\n   * @method load\n   */\n  p.load = function () {\n    this.setPaused(false);\n  };\n\n  /**\n   * Look up a {{#crossLink \"LoadItem\"}}{{/crossLink}} using either the \"id\" or \"src\" that was specified when loading it. Note that if no \"id\" was\n   * supplied with the load item, the ID will be the \"src\", including a `path` property defined by a manifest. The\n   * `basePath` will not be part of the ID.\n   * @method getItem\n   * @param {String} value The <code>id</code> or <code>src</code> of the load item.\n   * @return {Object} The load item that was initially requested using {{#crossLink \"LoadQueue/loadFile\"}}{{/crossLink}}\n   * or {{#crossLink \"LoadQueue/loadManifest\"}}{{/crossLink}}. This object is also returned via the {{#crossLink \"LoadQueue/fileload:event\"}}{{/crossLink}}\n   * event as the `item` parameter.\n   */\n  p.getItem = function (value) {\n    return this._loadItemsById[value] || this._loadItemsBySrc[value];\n  };\n\n  /**\n   * Look up a loaded result using either the \"id\" or \"src\" that was specified when loading it. Note that if no \"id\"\n   * was supplied with the load item, the ID will be the \"src\", including a `path` property defined by a manifest. The\n   * `basePath` will not be part of the ID.\n   * @method getResult\n   * @param {String} value The <code>id</code> or <code>src</code> of the load item.\n   * @param {Boolean} [rawResult=false] Return a raw result instead of a formatted result. This applies to content\n   * loaded via XHR such as scripts, XML, CSS, and Images. If there is no raw result, the formatted result will be\n   * returned instead.\n   * @return {Object} A result object containing the content that was loaded, such as:\n   * <ul>\n   *      <li>An image tag (&lt;image /&gt;) for images</li>\n   *      <li>A script tag for JavaScript (&lt;script /&gt;). Note that scripts are automatically added to the HTML\n   *      DOM.</li>\n   *      <li>A style tag for CSS (&lt;style /&gt; or &lt;link &gt;)</li>\n   *      <li>Raw text for TEXT</li>\n   *      <li>A formatted JavaScript object defined by JSON</li>\n   *      <li>An XML document</li>\n   *      <li>A binary arraybuffer loaded by XHR</li>\n   *      <li>An audio tag (&lt;audio &gt;) for HTML audio. Note that it is recommended to use SoundJS APIs to play\n   *      loaded audio. Specifically, audio loaded by Flash and WebAudio will return a loader object using this method\n   *      which can not be used to play audio back.</li>\n   * </ul>\n   * This object is also returned via the {{#crossLink \"LoadQueue/fileload:event\"}}{{/crossLink}} event as the 'item`\n   * parameter. Note that if a raw result is requested, but not found, the result will be returned instead.\n   */\n  p.getResult = function (value, rawResult) {\n    var item = this._loadItemsById[value] || this._loadItemsBySrc[value];\n    if (item == null) {\n      return null;\n    }\n    var id = item.id;\n    if (rawResult && this._loadedRawResults[id]) {\n      return this._loadedRawResults[id];\n    }\n    return this._loadedResults[id];\n  };\n\n  /**\n   * Generate an list of items loaded by this queue.\n   * @method getItems\n   * @param {Boolean} loaded Determines if only items that have been loaded should be returned. If false, in-progress\n   * and failed load items will also be included.\n   * @returns {Array} A list of objects that have been loaded. Each item includes the {{#crossLink \"LoadItem\"}}{{/crossLink}},\n   * result, and rawResult.\n   * @since 0.6.0\n   */\n  p.getItems = function (loaded) {\n    var arr = [];\n    for (var n in this._loadItemsById) {\n      var item = this._loadItemsById[n];\n      var result = this.getResult(n);\n      if (loaded === true && result == null) {\n        continue;\n      }\n      arr.push({\n        item: item,\n        result: result,\n        rawResult: this.getResult(n, true)\n      });\n    }\n    return arr;\n  };\n\n  /**\n   * Pause or resume the current load. Active loads will not be cancelled, but the next items in the queue will not\n   * be processed when active loads complete. LoadQueues are not paused by default.\n   *\n   * Note that if new items are added to the queue using {{#crossLink \"LoadQueue/loadFile\"}}{{/crossLink}} or\n   * {{#crossLink \"LoadQueue/loadManifest\"}}{{/crossLink}}, a paused queue will be resumed, unless the `loadNow`\n   * argument is `false`.\n   * @method setPaused\n   * @param {Boolean} value Whether the queue should be paused or not.\n   */\n  p.setPaused = function (value) {\n    this._paused = value;\n    if (!this._paused) {\n      this._loadNext();\n    }\n  };\n\n  /**\n   * Close the active queue. Closing a queue completely empties the queue, and prevents any remaining items from\n   * starting to download. Note that currently any active loads will remain open, and events may be processed.\n   *\n   * To stop and restart a queue, use the {{#crossLink \"LoadQueue/setPaused\"}}{{/crossLink}} method instead.\n   * @method close\n   */\n  p.close = function () {\n    while (this._currentLoads.length) {\n      this._currentLoads.pop().cancel();\n    }\n    this._scriptOrder.length = 0;\n    this._loadedScripts.length = 0;\n    this.loadStartWasDispatched = false;\n    this._itemCount = 0;\n    this._lastProgress = NaN;\n  };\n\n  // protected methods\n  /**\n   * Add an item to the queue. Items are formatted into a usable object containing all the properties necessary to\n   * load the content. The load queue is populated with the loader instance that handles preloading, and not the load\n   * item that was passed in by the user. To look up the load item by id or src, use the {{#crossLink \"LoadQueue.getItem\"}}{{/crossLink}}\n   * method.\n   * @method _addItem\n   * @param {String|Object} value The item to add to the queue.\n   * @param {String} [path] An optional path prepended to the `src`. The path will only be prepended if the src is\n   * relative, and does not start with a protocol such as `http://`, or a path like `../`. If the LoadQueue was\n   * provided a {{#crossLink \"_basePath\"}}{{/crossLink}}, then it will optionally be prepended after.\n   * @param {String} [basePath] <strong>Deprecated</strong>An optional basePath passed into a {{#crossLink \"LoadQueue/loadManifest\"}}{{/crossLink}}\n   * or {{#crossLink \"LoadQueue/loadFile\"}}{{/crossLink}} call. This parameter will be removed in a future tagged\n   * version.\n   * @private\n   */\n  p._addItem = function (value, path, basePath) {\n    var item = this._createLoadItem(value, path, basePath); // basePath and manifest path are added to the src.\n    if (item == null) {\n      return;\n    } // Sometimes plugins or types should be skipped.\n    var loader = this._createLoader(item);\n    if (loader != null) {\n      if (\"plugins\" in loader) {\n        loader.plugins = this._plugins;\n      }\n      item._loader = loader;\n      this._loadQueue.push(loader);\n      this._loadQueueBackup.push(loader);\n      this._numItems++;\n      this._updateProgress();\n\n      // Only worry about script order when using XHR to load scripts. Tags are only loading one at a time.\n      if (this.maintainScriptOrder && item.type == createjs.Types.JAVASCRIPT\n      //&& loader instanceof createjs.XHRLoader //NOTE: Have to track all JS files this way\n      || item.maintainOrder === true) {\n        this._scriptOrder.push(item);\n        this._loadedScripts.push(null);\n      }\n    }\n  };\n\n  /**\n   * Create a refined {{#crossLink \"LoadItem\"}}{{/crossLink}}, which contains all the required properties. The type of\n   * item is determined by browser support, requirements based on the file type, and developer settings. For example,\n   * XHR is only used for file types that support it in new browsers.\n   *\n   * Before the item is returned, any plugins registered to handle the type or extension will be fired, which may\n   * alter the load item.\n   * @method _createLoadItem\n   * @param {String | Object | HTMLAudioElement | HTMLImageElement} value The item that needs to be preloaded.\n   * @param {String} [path] A path to prepend to the item's source. Sources beginning with http:// or similar will\n   * not receive a path. Since PreloadJS 0.4.1, the src will be modified to include the `path` and {{#crossLink \"LoadQueue/_basePath:property\"}}{{/crossLink}}\n   * when it is added.\n   * @param {String} [basePath] <strong>Deprectated</strong> A base path to prepend to the items source in addition to\n   * the path argument.\n   * @return {Object} The loader instance that will be used.\n   * @private\n   */\n  p._createLoadItem = function (value, path, basePath) {\n    var item = createjs.LoadItem.create(value);\n    if (item == null) {\n      return null;\n    }\n    var bp = \"\"; // Store the generated basePath\n    var useBasePath = basePath || this._basePath;\n    if (item.src instanceof Object) {\n      if (!item.type) {\n        return null;\n      } // the the src is an object, type is required to pass off to plugin\n      if (path) {\n        bp = path;\n        var pathMatch = createjs.URLUtils.parseURI(path);\n        // Also append basePath\n        if (useBasePath != null && !pathMatch.absolute && !pathMatch.relative) {\n          bp = useBasePath + bp;\n        }\n      } else if (useBasePath != null) {\n        bp = useBasePath;\n      }\n    } else {\n      // Determine Extension, etc.\n      var match = createjs.URLUtils.parseURI(item.src);\n      if (match.extension) {\n        item.ext = match.extension;\n      }\n      if (item.type == null) {\n        item.type = createjs.RequestUtils.getTypeByExtension(item.ext);\n      }\n\n      // Inject path & basePath\n      var autoId = item.src;\n      if (!match.absolute && !match.relative) {\n        if (path) {\n          bp = path;\n          var pathMatch = createjs.URLUtils.parseURI(path);\n          autoId = path + autoId;\n          // Also append basePath\n          if (useBasePath != null && !pathMatch.absolute && !pathMatch.relative) {\n            bp = useBasePath + bp;\n          }\n        } else if (useBasePath != null) {\n          bp = useBasePath;\n        }\n      }\n      item.src = bp + item.src;\n    }\n    item.path = bp;\n\n    // If there's no id, set one now.\n    if (item.id === undefined || item.id === null || item.id === \"\") {\n      item.id = autoId;\n    }\n\n    // Give plugins a chance to modify the loadItem:\n    var customHandler = this._typeCallbacks[item.type] || this._extensionCallbacks[item.ext];\n    if (customHandler) {\n      // Plugins are now passed both the full source, as well as a combined path+basePath (appropriately)\n      var result = customHandler.callback.call(customHandler.scope, item, this);\n\n      // The plugin will handle the load, or has canceled it. Ignore it.\n      if (result === false) {\n        return null;\n\n        // Load as normal:\n      } else if (result === true) {\n        // Do Nothing\n\n        // Result is a loader class:\n      } else if (result != null) {\n        item._loader = result;\n      }\n\n      // Update the extension in case the type changed:\n      match = createjs.URLUtils.parseURI(item.src);\n      if (match.extension != null) {\n        item.ext = match.extension;\n      }\n    }\n\n    // Store the item for lookup. This also helps clean-up later.\n    this._loadItemsById[item.id] = item;\n    this._loadItemsBySrc[item.src] = item;\n    if (item.crossOrigin == null) {\n      item.crossOrigin = this._crossOrigin;\n    }\n    return item;\n  };\n\n  /**\n   * Create a loader for a load item.\n   * @method _createLoader\n   * @param {Object} item A formatted load item that can be used to generate a loader.\n   * @return {AbstractLoader} A loader that can be used to load content.\n   * @private\n   */\n  p._createLoader = function (item) {\n    if (item._loader != null) {\n      // A plugin already specified a loader\n      return item._loader;\n    }\n\n    // Initially, try and use the provided/supported XHR mode:\n    var preferXHR = this.preferXHR;\n    for (var i = 0; i < this._availableLoaders.length; i++) {\n      var loader = this._availableLoaders[i];\n      if (loader && loader.canLoadItem(item)) {\n        return new loader(item, preferXHR);\n      }\n    }\n\n    // TODO: Log error (requires createjs.log)\n    return null;\n  };\n\n  /**\n   * Load the next item in the queue. If the queue is empty (all items have been loaded), then the complete event\n   * is processed. The queue will \"fill up\" any empty slots, up to the max connection specified using\n   * {{#crossLink \"LoadQueue.setMaxConnections\"}}{{/crossLink}} method. The only exception is scripts that are loaded\n   * using tags, which have to be loaded one at a time to maintain load order.\n   * @method _loadNext\n   * @private\n   */\n  p._loadNext = function () {\n    if (this._paused) {\n      return;\n    }\n\n    // Only dispatch loadstart event when the first file is loaded.\n    if (!this._loadStartWasDispatched) {\n      this._sendLoadStart();\n      this._loadStartWasDispatched = true;\n    }\n\n    // The queue has completed.\n    if (this._numItems == this._numItemsLoaded) {\n      this.loaded = true;\n      this._sendComplete();\n\n      // Load the next queue, if it has been defined.\n      if (this.next && this.next.load) {\n        this.next.load();\n      }\n    } else {\n      this.loaded = false;\n    }\n\n    // Must iterate forwards to load in the right order.\n    for (var i = 0; i < this._loadQueue.length; i++) {\n      if (this._currentLoads.length >= this._maxConnections) {\n        break;\n      }\n      var loader = this._loadQueue[i];\n\n      // Determine if we should be only loading one tag-script at a time:\n      // Note: maintainOrder items don't do anything here because we can hold onto their loaded value\n      if (!this._canStartLoad(loader)) {\n        continue;\n      }\n      this._loadQueue.splice(i, 1);\n      i--;\n      this._loadItem(loader);\n    }\n  };\n\n  /**\n   * Begin loading an item. Event listeners are not added to the loaders until the load starts.\n   * @method _loadItem\n   * @param {AbstractLoader} loader The loader instance to start. Currently, this will be an XHRLoader or TagLoader.\n   * @private\n   */\n  p._loadItem = function (loader) {\n    loader.on(\"fileload\", this._handleFileLoad, this);\n    loader.on(\"progress\", this._handleProgress, this);\n    loader.on(\"complete\", this._handleFileComplete, this);\n    loader.on(\"error\", this._handleError, this);\n    loader.on(\"fileerror\", this._handleFileError, this);\n    this._currentLoads.push(loader);\n    this._sendFileStart(loader.getItem());\n    loader.load();\n  };\n\n  /**\n   * The callback that is fired when a loader loads a file. This enables loaders like {{#crossLink \"ManifestLoader\"}}{{/crossLink}}\n   * to maintain internal queues, but for this queue to dispatch the {{#crossLink \"fileload:event\"}}{{/crossLink}}\n   * events.\n   * @param {Event} event The {{#crossLink \"AbstractLoader/fileload:event\"}}{{/crossLink}} event from the loader.\n   * @private\n   * @since 0.6.0\n   */\n  p._handleFileLoad = function (event) {\n    event.target = null;\n    this.dispatchEvent(event);\n  };\n\n  /**\n   * The callback that is fired when a loader encounters an error from an internal file load operation. This enables\n   * loaders like M\n   * @param event\n   * @private\n   */\n  p._handleFileError = function (event) {\n    var newEvent = new createjs.ErrorEvent(\"FILE_LOAD_ERROR\", null, event.item);\n    this._sendError(newEvent);\n  };\n\n  /**\n   * The callback that is fired when a loader encounters an error. The queue will continue loading unless {{#crossLink \"LoadQueue/stopOnError:property\"}}{{/crossLink}}\n   * is set to `true`.\n   * @method _handleError\n   * @param {ErrorEvent} event The error event, containing relevant error information.\n   * @private\n   */\n  p._handleError = function (event) {\n    var loader = event.target;\n    this._numItemsLoaded++;\n    this._finishOrderedItem(loader, true);\n    this._updateProgress();\n    var newEvent = new createjs.ErrorEvent(\"FILE_LOAD_ERROR\", null, loader.getItem());\n    // TODO: Propagate actual error message.\n\n    this._sendError(newEvent);\n    if (!this.stopOnError) {\n      this._removeLoadItem(loader);\n      this._cleanLoadItem(loader);\n      this._loadNext();\n    } else {\n      this.setPaused(true);\n    }\n  };\n\n  /**\n   * An item has finished loading. We can assume that it is totally loaded, has been parsed for immediate use, and\n   * is available as the \"result\" property on the load item. The raw text result for a parsed item (such as JSON, XML,\n   * CSS, JavaScript, etc) is available as the \"rawResult\" property, and can also be looked up using {{#crossLink \"LoadQueue/getResult\"}}{{/crossLink}}.\n   * @method _handleFileComplete\n   * @param {Event} event The event object from the loader.\n   * @private\n   */\n  p._handleFileComplete = function (event) {\n    var loader = event.target;\n    var item = loader.getItem();\n    var result = loader.getResult();\n    this._loadedResults[item.id] = result;\n    var rawResult = loader.getResult(true);\n    if (rawResult != null && rawResult !== result) {\n      this._loadedRawResults[item.id] = rawResult;\n    }\n    this._saveLoadedItems(loader);\n\n    // Remove the load item\n    this._removeLoadItem(loader);\n    if (!this._finishOrderedItem(loader)) {\n      // The item was NOT managed, so process it now\n      this._processFinishedLoad(item, loader);\n    }\n\n    // Clean up the load item\n    this._cleanLoadItem(loader);\n  };\n\n  /**\n   * Some loaders might load additional content, other than the item they were passed (such as {{#crossLink \"ManifestLoader\"}}{{/crossLink}}).\n   * Any items exposed by the loader using {{#crossLink \"AbstractLoader/getLoadItems\"}}{{/crossLink}} are added to the\n   * LoadQueue's look-ups, including {{#crossLink \"getItem\"}}{{/crossLink}} and {{#crossLink \"getResult\"}}{{/crossLink}}\n   * methods.\n   * @method _saveLoadedItems\n   * @param {AbstractLoader} loader\n   * @protected\n   * @since 0.6.0\n   */\n  p._saveLoadedItems = function (loader) {\n    // TODO: Not sure how to handle this. Would be nice to expose the items.\n    // Loaders may load sub-items. This adds them to this queue\n    var list = loader.getLoadedItems();\n    if (list === null) {\n      return;\n    }\n    for (var i = 0; i < list.length; i++) {\n      var item = list[i].item;\n\n      // Store item lookups\n      this._loadItemsBySrc[item.src] = item;\n      this._loadItemsById[item.id] = item;\n\n      // Store loaded content\n      this._loadedResults[item.id] = list[i].result;\n      this._loadedRawResults[item.id] = list[i].rawResult;\n    }\n  };\n\n  /**\n   * Flag an item as finished. If the item's order is being managed, then ensure that it is allowed to finish, and if\n   * so, trigger prior items to trigger as well.\n   * @method _finishOrderedItem\n   * @param {AbstractLoader} loader\n   * @param {Boolean} loadFailed\n   * @return {Boolean} If the item's order is being managed. This allows the caller to take an alternate\n   * behaviour if it is.\n   * @private\n   */\n  p._finishOrderedItem = function (loader, loadFailed) {\n    var item = loader.getItem();\n    if (this.maintainScriptOrder && item.type == createjs.Types.JAVASCRIPT || item.maintainOrder) {\n      //TODO: Evaluate removal of the _currentlyLoadingScript\n      if (loader instanceof createjs.JavaScriptLoader) {\n        this._currentlyLoadingScript = false;\n      }\n      var index = createjs.indexOf(this._scriptOrder, item);\n      if (index == -1) {\n        return false;\n      } // This loader no longer exists\n      this._loadedScripts[index] = loadFailed === true ? true : item;\n      this._checkScriptLoadOrder();\n      return true;\n    }\n    return false;\n  };\n\n  /**\n   * Ensure the scripts load and dispatch in the correct order. When using XHR, scripts are stored in an array in the\n   * order they were added, but with a \"null\" value. When they are completed, the value is set to the load item,\n   * and then when they are processed and dispatched, the value is set to `true`. This method simply\n   * iterates the array, and ensures that any loaded items that are not preceded by a `null` value are\n   * dispatched.\n   * @method _checkScriptLoadOrder\n   * @private\n   */\n  p._checkScriptLoadOrder = function () {\n    var l = this._loadedScripts.length;\n    for (var i = 0; i < l; i++) {\n      var item = this._loadedScripts[i];\n      if (item === null) {\n        break;\n      } // This is still loading. Do not process further.\n      if (item === true) {\n        continue;\n      } // This has completed, and been processed. Move on.\n\n      var loadItem = this._loadedResults[item.id];\n      if (item.type == createjs.Types.JAVASCRIPT) {\n        // Append script tags to the head automatically.\n        createjs.DomUtils.appendToHead(loadItem);\n      }\n      var loader = item._loader;\n      this._processFinishedLoad(item, loader);\n      this._loadedScripts[i] = true;\n    }\n  };\n\n  /**\n   * A file has completed loading, and the LoadQueue can move on. This triggers the complete event, and kick-starts\n   * the next item.\n   * @method _processFinishedLoad\n   * @param {LoadItem|Object} item\n   * @param {AbstractLoader} loader\n   * @protected\n   */\n  p._processFinishedLoad = function (item, loader) {\n    this._numItemsLoaded++;\n\n    // Since LoadQueue needs maintain order, we can't append scripts in the loader.\n    // So we do it here instead. Or in _checkScriptLoadOrder();\n    if (!this.maintainScriptOrder && item.type == createjs.Types.JAVASCRIPT) {\n      var tag = loader.getTag();\n      createjs.DomUtils.appendToHead(tag);\n    }\n    this._updateProgress();\n    this._sendFileComplete(item, loader);\n    this._loadNext();\n  };\n\n  /**\n   * Ensure items with `maintainOrder=true` that are before the specified item have loaded. This only applies to\n   * JavaScript items that are being loaded with a TagLoader, since they have to be loaded and completed <strong>before</strong>\n   * the script can even be started, since it exist in the DOM while loading.\n   * @method _canStartLoad\n   * @param {AbstractLoader} loader The loader for the item\n   * @return {Boolean} Whether the item can start a load or not.\n   * @private\n   */\n  p._canStartLoad = function (loader) {\n    if (!this.maintainScriptOrder || loader.preferXHR) {\n      return true;\n    }\n    var item = loader.getItem();\n    if (item.type != createjs.Types.JAVASCRIPT) {\n      return true;\n    }\n    if (this._currentlyLoadingScript) {\n      return false;\n    }\n    var index = this._scriptOrder.indexOf(item);\n    var i = 0;\n    while (i < index) {\n      var checkItem = this._loadedScripts[i];\n      if (checkItem == null) {\n        return false;\n      }\n      i++;\n    }\n    this._currentlyLoadingScript = true;\n    return true;\n  };\n\n  /**\n   * A load item is completed or was canceled, and needs to be removed from the LoadQueue.\n   * @method _removeLoadItem\n   * @param {AbstractLoader} loader A loader instance to remove.\n   * @private\n   */\n  p._removeLoadItem = function (loader) {\n    var l = this._currentLoads.length;\n    for (var i = 0; i < l; i++) {\n      if (this._currentLoads[i] == loader) {\n        this._currentLoads.splice(i, 1);\n        break;\n      }\n    }\n  };\n\n  /**\n   * Remove unneeded references from a loader.\n   *\n   * @param loader\n   * @private\n   */\n  p._cleanLoadItem = function (loader) {\n    var item = loader.getItem();\n    if (item) {\n      delete item._loader;\n    }\n  };\n\n  /**\n   * An item has dispatched progress. Propagate that progress, and update the LoadQueue's overall progress.\n   * @method _handleProgress\n   * @param {ProgressEvent} event The progress event from the item.\n   * @private\n   */\n  p._handleProgress = function (event) {\n    var loader = event.target;\n    this._sendFileProgress(loader.getItem(), loader.progress);\n    this._updateProgress();\n  };\n\n  /**\n   * Overall progress has changed, so determine the new progress amount and dispatch it. This changes any time an\n   * item dispatches progress or completes. Note that since we don't always know the actual filesize of items before\n   * they are loaded. In this case, we define a \"slot\" for each item (1 item in 10 would get 10%), and then append\n   * loaded progress on top of the already-loaded items.\n   *\n   * For example, if 5/10 items have loaded, and item 6 is 20% loaded, the total progress would be:\n   * <ul>\n   *      <li>5/10 of the items in the queue (50%)</li>\n   *      <li>plus 20% of item 6's slot (2%)</li>\n   *      <li>equals 52%</li>\n   * </ul>\n   * @method _updateProgress\n   * @private\n   */\n  p._updateProgress = function () {\n    var loaded = this._numItemsLoaded / this._numItems; // Fully Loaded Progress\n    var remaining = this._numItems - this._numItemsLoaded;\n    if (remaining > 0) {\n      var chunk = 0;\n      for (var i = 0, l = this._currentLoads.length; i < l; i++) {\n        chunk += this._currentLoads[i].progress;\n      }\n      loaded += chunk / remaining * (remaining / this._numItems);\n    }\n    if (this._lastProgress != loaded) {\n      this._sendProgress(loaded);\n      this._lastProgress = loaded;\n    }\n  };\n\n  /**\n   * Clean out item results, to free them from memory. Mainly, the loaded item and results are cleared from internal\n   * hashes.\n   * @method _disposeItem\n   * @param {LoadItem|Object} item The item that was passed in for preloading.\n   * @private\n   */\n  p._disposeItem = function (item) {\n    delete this._loadedResults[item.id];\n    delete this._loadedRawResults[item.id];\n    delete this._loadItemsById[item.id];\n    delete this._loadItemsBySrc[item.src];\n  };\n\n  /**\n   * Dispatch a \"fileprogress\" {{#crossLink \"Event\"}}{{/crossLink}}. Please see the LoadQueue {{#crossLink \"LoadQueue/fileprogress:event\"}}{{/crossLink}}\n   * event for details on the event payload.\n   * @method _sendFileProgress\n   * @param {LoadItem|Object} item The item that is being loaded.\n   * @param {Number} progress The amount the item has been loaded (between 0 and 1).\n   * @protected\n   */\n  p._sendFileProgress = function (item, progress) {\n    if (this._isCanceled() || this._paused) {\n      return;\n    }\n    if (!this.hasEventListener(\"fileprogress\")) {\n      return;\n    }\n\n    //LM: Rework ProgressEvent to support this?\n    var event = new createjs.Event(\"fileprogress\");\n    event.progress = progress;\n    event.loaded = progress;\n    event.total = 1;\n    event.item = item;\n    this.dispatchEvent(event);\n  };\n\n  /**\n   * Dispatch a fileload {{#crossLink \"Event\"}}{{/crossLink}}. Please see the {{#crossLink \"LoadQueue/fileload:event\"}}{{/crossLink}} event for\n   * details on the event payload.\n   * @method _sendFileComplete\n   * @param {LoadItemObject} item The item that is being loaded.\n   * @param {AbstractLoader} loader\n   * @protected\n   */\n  p._sendFileComplete = function (item, loader) {\n    if (this._isCanceled() || this._paused) {\n      return;\n    }\n    var event = new createjs.Event(\"fileload\");\n    event.loader = loader;\n    event.item = item;\n    event.result = this._loadedResults[item.id];\n    event.rawResult = this._loadedRawResults[item.id];\n\n    // This calls a handler specified on the actual load item. Currently, the SoundJS plugin uses this.\n    if (item.completeHandler) {\n      item.completeHandler(event);\n    }\n    this.hasEventListener(\"fileload\") && this.dispatchEvent(event);\n  };\n\n  /**\n   * Dispatch a filestart {{#crossLink \"Event\"}}{{/crossLink}} immediately before a file starts to load. Please see\n   * the {{#crossLink \"LoadQueue/filestart:event\"}}{{/crossLink}} event for details on the event payload.\n   * @method _sendFileStart\n   * @param {LoadItem|Object} item The item that is being loaded.\n   * @protected\n   */\n  p._sendFileStart = function (item) {\n    var event = new createjs.Event(\"filestart\");\n    event.item = item;\n    this.hasEventListener(\"filestart\") && this.dispatchEvent(event);\n  };\n  p.toString = function () {\n    return \"[PreloadJS LoadQueue]\";\n  };\n  createjs.LoadQueue = createjs.promote(LoadQueue, \"AbstractLoader\");\n})();\n\n//##############################################################################\n// TextLoader.js\n//##############################################################################\n\nwindow.createjs = window.createjs || {};\n(function () {\n  \"use strict\";\n\n  // constructor\n  /**\n   * A loader for Text files.\n   * @class TextLoader\n   * @param {LoadItem|Object} loadItem\n   * @extends AbstractLoader\n   * @constructor\n   */\n  function TextLoader(loadItem) {\n    this.AbstractLoader_constructor(loadItem, true, createjs.Types.TEXT);\n  }\n  ;\n  var p = createjs.extend(TextLoader, createjs.AbstractLoader);\n  var s = TextLoader;\n\n  // static methods\n  /**\n   * Determines if the loader can load a specific item. This loader loads items that are of type {{#crossLink \"Types/TEXT:property\"}}{{/crossLink}},\n   * but is also the default loader if a file type can not be determined.\n   * @method canLoadItem\n   * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\n   * @returns {Boolean} Whether the loader can load the item.\n   * @static\n   */\n  s.canLoadItem = function (item) {\n    return item.type == createjs.Types.TEXT;\n  };\n  createjs.TextLoader = createjs.promote(TextLoader, \"AbstractLoader\");\n})();\n\n//##############################################################################\n// BinaryLoader.js\n//##############################################################################\n\nwindow.createjs = window.createjs || {};\n(function () {\n  \"use strict\";\n\n  // constructor\n  /**\n   * A loader for binary files. This is useful for loading web audio, or content that requires an ArrayBuffer.\n   * @class BinaryLoader\n   * @param {LoadItem|Object} loadItem\n   * @extends AbstractLoader\n   * @constructor\n   */\n  function BinaryLoader(loadItem) {\n    this.AbstractLoader_constructor(loadItem, true, createjs.Types.BINARY);\n    this.on(\"initialize\", this._updateXHR, this);\n  }\n  ;\n  var p = createjs.extend(BinaryLoader, createjs.AbstractLoader);\n  var s = BinaryLoader;\n\n  // static methods\n  /**\n   * Determines if the loader can load a specific item. This loader can only load items that are of type\n   * {{#crossLink \"Types/BINARY:property\"}}{{/crossLink}}\n   * @method canLoadItem\n   * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\n   * @returns {Boolean} Whether the loader can load the item.\n   * @static\n   */\n  s.canLoadItem = function (item) {\n    return item.type == createjs.Types.BINARY;\n  };\n\n  // private methods\n  /**\n   * Before the item loads, set the response type to \"arraybuffer\"\n   * @property _updateXHR\n   * @param {Event} event\n   * @private\n   */\n  p._updateXHR = function (event) {\n    event.loader.setResponseType(\"arraybuffer\");\n  };\n  createjs.BinaryLoader = createjs.promote(BinaryLoader, \"AbstractLoader\");\n})();\n\n//##############################################################################\n// CSSLoader.js\n//##############################################################################\n\nwindow.createjs = window.createjs || {};\n(function () {\n  \"use strict\";\n\n  // constructor\n  /**\n   * A loader for CSS files.\n   * @class CSSLoader\n   * @param {LoadItem|Object} loadItem\n   * @param {Boolean} preferXHR\n   * @extends AbstractLoader\n   * @constructor\n   */\n  function CSSLoader(loadItem, preferXHR) {\n    this.AbstractLoader_constructor(loadItem, preferXHR, createjs.Types.CSS);\n\n    // public properties\n    this.resultFormatter = this._formatResult;\n\n    // protected properties\n    this._tagSrcAttribute = \"href\";\n    if (preferXHR) {\n      this._tag = createjs.Elements.style();\n    } else {\n      this._tag = createjs.Elements.link();\n    }\n    this._tag.rel = \"stylesheet\";\n    this._tag.type = \"text/css\";\n  }\n  ;\n  var p = createjs.extend(CSSLoader, createjs.AbstractLoader);\n  var s = CSSLoader;\n\n  // static methods\n  /**\n   * Determines if the loader can load a specific item. This loader can only load items that are of type\n   * {{#crossLink \"Types/CSS:property\"}}{{/crossLink}}.\n   * @method canLoadItem\n   * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\n   * @returns {Boolean} Whether the loader can load the item.\n   * @static\n   */\n  s.canLoadItem = function (item) {\n    return item.type == createjs.Types.CSS;\n  };\n\n  // protected methods\n  /**\n   * The result formatter for CSS files.\n   * @method _formatResult\n   * @param {AbstractLoader} loader\n   * @returns {HTMLLinkElement|HTMLStyleElement}\n   * @private\n   */\n  p._formatResult = function (loader) {\n    if (this._preferXHR) {\n      var tag = loader.getTag();\n      if (tag.styleSheet) {\n        // IE\n        tag.styleSheet.cssText = loader.getResult(true);\n      } else {\n        var textNode = createjs.Elements.text(loader.getResult(true));\n        tag.appendChild(textNode);\n      }\n    } else {\n      tag = this._tag;\n    }\n    createjs.DomUtils.appendToHead(tag);\n    return tag;\n  };\n  createjs.CSSLoader = createjs.promote(CSSLoader, \"AbstractLoader\");\n})();\n\n//##############################################################################\n// FontLoader.js\n//##############################################################################\n\nwindow.createjs = window.createjs || {};\n(function () {\n  \"use strict\";\n\n  // constructor:\n  /**\n   * A loader that handles font files, CSS definitions, and CSS paths. FontLoader doesn't actually preload fonts\n   * themselves, but rather generates CSS definitions, and then tests the size changes on an HTML5 Canvas element.\n   *\n   * Note that FontLoader does not support tag-based loading due to the requirement that CSS be read to determine the\n   * font definitions to test for.\n   * @class FontLoader\n   * @param {LoadItem|object|string} loadItem The item to be loaded.\n   * @extends AbstractLoader\n   * @constructor\n   **/\n  function FontLoader(loadItem, preferXHR) {\n    this.AbstractLoader_constructor(loadItem, preferXHR, loadItem.type);\n\n    // private properties:\n    /**\n     * A lookup of font faces to load.\n     * @property _faces\n     * @protected\n     * @type Object\n     **/\n    this._faces = {};\n\n    /**\n     * A list of font faces currently being \"watched\". Watched fonts will be tested on a regular interval, and be\n     * removed from this list when they are complete.\n     * @oroperty _watched\n     * @type {Array}\n     * @protected\n     */\n    this._watched = [];\n\n    /**\n     * A count of the total font faces to load.\n     * @property _count\n     * @type {number}\n     * @protected\n     * @default 0\n     */\n    this._count = 0;\n\n    /**\n     * The interval for checking if fonts have been loaded.\n     * @property _watchInterval\n     * @type {Number}\n     * @protected\n     */\n    this._watchInterval = null;\n\n    /**\n     * The timeout for determining if a font can't be loaded. Uses the LoadItem {{#crossLink \"LoadImte/timeout:property\"}}{{/crossLink}}\n     * value.\n     * @property _loadTimeout\n     * @type {Number}\n     * @protected\n     */\n    this._loadTimeout = null;\n    /**\n     * Determines if generated CSS should be injected into the document.\n     * @property _injectCSS\n     * @type {boolean}\n     * @protected\n     */\n    this._injectCSS = loadItem.injectCSS === undefined ? true : loadItem.injectCSS;\n    this.dispatchEvent(\"initialize\");\n  }\n  var p = createjs.extend(FontLoader, createjs.AbstractLoader);\n\n  /**\n   * Determines if the loader can load a specific item. This loader can only load items that are of type\n   * {{#crossLink \"Types/FONT:property\"}}{{/crossLink}}.\n   * @method canLoadItem\n   * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\n   * @returns {Boolean} Whether the loader can load the item.\n   * @static\n   */\n  FontLoader.canLoadItem = function (item) {\n    return item.type == createjs.Types.FONT || item.type == createjs.Types.FONTCSS;\n  };\n\n  // static properties:\n  /**\n   * Sample text used by the FontLoader to determine if the font has been loaded. The sample text size is compared\n   * to the loaded font size, and a change indicates that the font has completed.\n   * @property sampleText\n   * @type {String}\n   * @default abcdefghijklmnopqrstuvwxyz ABCDEFGHIJKLMNOPQRSTUVWXYZ\n   * @static\n   * @private\n   */\n  FontLoader.sampleText = \"abcdefghijklmnopqrstuvwxyz ABCDEFGHIJKLMNOPQRSTUVWXYZ\";\n\n  /**\n   * The canvas context used to test the font size. Note that this currently requires an HTML DOM.\n   * @property _ctx\n   * @type {CanvasRenderingContext2D}\n   * @static\n   * @private\n   */\n  FontLoader._ctx = document.createElement(\"canvas\").getContext(\"2d\"); // TODO: Consider a method to do this like EaselJS Stage has.\n\n  /**\n   * A list of reference fonts to test. Multiple faces are tested to address the rare case of a loaded font being the\n   * exact same dimensions as the test font.\n   * @property _referenceFonts\n   * @type {Array}\n   * @default [\"serif\", \"monospace\"]\n   * @private\n   */\n  FontLoader._referenceFonts = [\"serif\", \"monospace\"];\n\n  /**\n   * A regular expression that pulls out possible style values from the font name.\n   * <ul>\n   *     <li>This includes font names that include thin, normal, book, regular, medium, black, and heavy (such as\n   *     \"Arial Black\")</li>\n   *     <li>Weight modifiers including extra, ultra, semi, demi, light, and bold (such as \"WorkSans SemiBold\")</li>\n   * </ul>\n   *\n   * Weight descriptions map to font weight values by default using the following (from\n   * http://www.w3.org/TR/css3-fonts/#font-weight-numeric-values):\n   * <ul>\n   *     <li>100 - Thin</li>\n   * \t   <li>200 - Extra Light, Ultra Light</li>\n   *     <li>300 - Light, Semi Light, Demi Light</li>\n   *     <li>400 - Normal, Book, Regular</li>\n   *     <li>500 - Medium</li>\n   *     <li>600 - Semi Bold, Demi Bold</li>\n   *     <li>700 - Bold</li>\n   *     <li>800 - Extra Bold, Ultra Bold</li>\n   *     <li>900 - Black, Heavy</li>\n   * </ul>\n   * @property WEIGHT_REGEX\n   * @type {RegExp}\n   * @static\n   */\n  FontLoader.WEIGHT_REGEX = /[- ._]*(thin|normal|book|regular|medium|black|heavy|[1-9]00|(?:extra|ultra|semi|demi)?[- ._]*(?:light|bold))[- ._]*/ig;\n\n  /**\n   * A regular expression that pulls out possible style values from the font name. These include \"italic\"\n   * and \"oblique\".\n   * @property STYLE_REGEX\n   * @type {RegExp}\n   * @static\n   */\n  FontLoader.STYLE_REGEX = /[- ._]*(italic|oblique)[- ._]*/ig;\n\n  /**\n   * A lookup of font types for generating a CSS definition. For example, TTF fonts requires a \"truetype\" type.\n   * @property FONT_FORMAT\n   * @type {Object}\n   * @static\n   */\n  FontLoader.FONT_FORMAT = {\n    woff2: \"woff2\",\n    woff: \"woff\",\n    ttf: \"truetype\",\n    otf: \"truetype\"\n  };\n\n  /**\n   * A lookup of font weights based on a name. These values are from http://www.w3.org/TR/css3-fonts/#font-weight-numeric-values.\n   * @property FONT_WEIGHT\n   * @type {Object}\n   * @static\n   */\n  FontLoader.FONT_WEIGHT = {\n    thin: 100,\n    extralight: 200,\n    ultralight: 200,\n    light: 300,\n    semilight: 300,\n    demilight: 300,\n    book: \"normal\",\n    regular: \"normal\",\n    semibold: 600,\n    demibold: 600,\n    extrabold: 800,\n    ultrabold: 800,\n    black: 900,\n    heavy: 900\n  };\n\n  /**\n   * The frequency in milliseconds to check for loaded fonts.\n   * @property WATCH_DURATION\n   * @type {number}\n   * @default 10\n   * @static\n   */\n  FontLoader.WATCH_DURATION = 10;\n  // public methods:\n  p.load = function () {\n    if (this.type == createjs.Types.FONTCSS) {\n      var loaded = this._watchCSS();\n\n      // If the CSS is not ready, it will create a request, which AbstractLoader can handle.\n      if (!loaded) {\n        this.AbstractLoader_load();\n        return;\n      }\n    } else if (this._item.src instanceof Array) {\n      this._watchFontArray();\n    } else {\n      var def = this._defFromSrc(this._item.src);\n      this._watchFont(def);\n      this._injectStyleTag(this._cssFromDef(def));\n    }\n    this._loadTimeout = setTimeout(createjs.proxy(this._handleTimeout, this), this._item.loadTimeout);\n    this.dispatchEvent(\"loadstart\");\n  };\n\n  /**\n   * The font load has timed out. This is called via a <code>setTimeout</code>.\n   * callback.\n   * @method _handleTimeout\n   * @protected\n   */\n  p._handleTimeout = function () {\n    this._stopWatching();\n    this.dispatchEvent(new createjs.ErrorEvent(\"PRELOAD_TIMEOUT\"));\n  };\n\n  // WatchCSS does the work for us, and provides a modified src.\n  p._createRequest = function () {\n    return this._request;\n  };\n\n  // Events come from the internal XHR loader.\n  p.handleEvent = function (event) {\n    switch (event.type) {\n      case \"complete\":\n        this._rawResult = event.target._response;\n        this._result = true;\n        this._parseCSS(this._rawResult);\n        break;\n      case \"error\":\n        this._stopWatching();\n        this.AbstractLoader_handleEvent(event);\n        break;\n    }\n  };\n\n  // private methods:\n  /**\n   * Determine if the provided CSS is a string definition, CSS HTML element, or a CSS file URI. Depending on the\n   * format, the CSS will be parsed, or loaded.\n   * @method _watchCSS\n   * @returns {boolean} Whether or not the CSS is ready\n   * @protected\n   */\n  p._watchCSS = function () {\n    var src = this._item.src;\n\n    // An HTMLElement was passed in. Just use it.\n    if (src instanceof HTMLStyleElement) {\n      if (this._injectCSS && !src.parentNode) {\n        (document.head || document.getElementsByTagName('head')[0]).appendChild(src);\n      }\n      this._injectCSS = false;\n      src = \"\\n\" + src.textContent;\n    }\n\n    // A CSS string was passed in. Parse and use it\n    if (src.search(/\\n|\\r|@font-face/i) !== -1) {\n      // css string.\n      this._parseCSS(src);\n      return true;\n    }\n\n    // Load a CSS Path. Note that we CAN NOT load it without XHR because we need to read the CSS definition\n    this._request = new createjs.XHRRequest(this._item);\n    return false;\n  };\n\n  /**\n   * Parse a CSS string to determine the fonts to load.\n   * @method _parseCSS\n   * @param {String} css The CSS string to parse\n   * @protected\n   */\n  p._parseCSS = function (css) {\n    var regex = /@font-face\\s*\\{([^}]+)}/g;\n    while (true) {\n      var result = regex.exec(css);\n      if (!result) {\n        break;\n      }\n      this._watchFont(this._parseFontFace(result[1]));\n    }\n    this._injectStyleTag(css);\n  };\n\n  /**\n   * The provided fonts were an array of object or string definitions. Parse them, and inject any that are ready.\n   * @method _watchFontArray\n   * @protected\n   */\n  p._watchFontArray = function () {\n    var arr = this._item.src,\n      css = \"\",\n      def;\n    for (var i = arr.length - 1; i >= 0; i--) {\n      var o = arr[i];\n      if (typeof o === \"string\") {\n        def = this._defFromSrc(o);\n      } else {\n        def = this._defFromObj(o);\n      }\n      this._watchFont(def);\n      css += this._cssFromDef(def) + \"\\n\";\n    }\n    this._injectStyleTag(css);\n  };\n\n  /**\n   * Inject any style definitions into the document head. This is necessary when the definition is just a string or\n   * object definition in order for the styles to be applied to the document. If the loaded fonts are already HTML CSS\n   * elements, they don't need to be appended again.\n   * @method _injectStyleTag\n   * @param {String} css The CSS string content to be appended to the\n   * @protected\n   */\n  p._injectStyleTag = function (css) {\n    if (!this._injectCSS) {\n      return;\n    }\n    var head = document.head || document.getElementsByTagName('head')[0];\n    var styleTag = document.createElement(\"style\");\n    styleTag.type = \"text/css\";\n    if (styleTag.styleSheet) {\n      styleTag.styleSheet.cssText = css;\n    } else {\n      styleTag.appendChild(document.createTextNode(css));\n    }\n    head.appendChild(styleTag);\n  };\n\n  /**\n   * Determine the font face from a CSS definition.\n   * @method _parseFontFace\n   * @param {String} str The CSS string definition\n   * @protected\n   * @return {String} A modified CSS object containing family name, src, style, and weight\n   */\n  p._parseFontFace = function (str) {\n    var family = this._getCSSValue(str, \"font-family\"),\n      src = this._getCSSValue(str, \"src\");\n    if (!family || !src) {\n      return null;\n    }\n    return this._defFromObj({\n      family: family,\n      src: src,\n      style: this._getCSSValue(str, \"font-style\"),\n      weight: this._getCSSValue(str, \"font-weight\")\n    });\n  };\n\n  /**\n   * Add a font to the list of fonts currently being watched. If the font is already watched or loaded, it won't be\n   * added again.\n   * @method _watchFont\n   * @param {Object} def The font definition\n   * @protected\n   */\n  p._watchFont = function (def) {\n    if (!def || this._faces[def.id]) {\n      return;\n    }\n    this._faces[def.id] = def;\n    this._watched.push(def);\n    this._count++;\n    this._calculateReferenceSizes(def);\n    this._startWatching();\n  };\n\n  /**\n   * Create a interval to check for loaded fonts. Only one interval is used for all fonts. The fonts are checked based\n   * on the {{#crossLink \"FontLoader/WATCH_DURATION:property\"}}{{/crossLink}}.\n   * @method _startWatching\n   * @protected\n   */\n  p._startWatching = function () {\n    if (this._watchInterval != null) {\n      return;\n    }\n    this._watchInterval = setInterval(createjs.proxy(this._watch, this), FontLoader.WATCH_DURATION);\n  };\n\n  /**\n   * Clear the interval used to check fonts. This happens when all fonts are loaded, or an error occurs, such as a\n   * CSS file error, or a load timeout.\n   * @method _stopWatching\n   * @protected\n   */\n  p._stopWatching = function () {\n    clearInterval(this._watchInterval);\n    clearTimeout(this._loadTimeout);\n    this._watchInterval = null;\n  };\n\n  /**\n   * Check all the fonts that have not been loaded. The fonts are drawn to a canvas in memory, and if their font size\n   * varies from the default text size, then the font is considered loaded.\n   *\n   * A {{#crossLink \"AbstractLoader/fileload\"}}{{/crossLink}} event will be dispatched when each file is loaded, along\n   * with the font family name as the `item` value. A {{#crossLink \"ProgressEvent\"}}{{/crossLink}} is dispatched a\n   * maximum of one time per check when any fonts are loaded, with the {{#crossLink \"ProgressEvent/progress:property\"}}{{/crossLink}}\n   * value showing the percentage of fonts that have loaded.\n   * @method _watch\n   * @protected\n   */\n  p._watch = function () {\n    var defs = this._watched,\n      refFonts = FontLoader._referenceFonts,\n      l = defs.length;\n    for (var i = l - 1; i >= 0; i--) {\n      var def = defs[i],\n        refs = def.refs;\n      for (var j = refs.length - 1; j >= 0; j--) {\n        var w = this._getTextWidth(def.family + \",\" + refFonts[j], def.weight, def.style);\n        if (w != refs[j]) {\n          var event = new createjs.Event(\"fileload\");\n          def.type = \"font-family\";\n          event.item = def;\n          this.dispatchEvent(event);\n          defs.splice(i, 1);\n          break;\n        }\n      }\n    }\n    if (l !== defs.length) {\n      var event = new createjs.ProgressEvent(this._count - defs.length, this._count);\n      this.dispatchEvent(event);\n    }\n    if (l === 0) {\n      this._stopWatching();\n      this._sendComplete();\n    }\n  };\n\n  /**\n   * Determine the default size of the reference fonts used to compare against loaded fonts.\n   * @method _calculateReferenceSizes\n   * @param {Object} def The font definition to get the size of.\n   * @protected\n   */\n  p._calculateReferenceSizes = function (def) {\n    var refFonts = FontLoader._referenceFonts;\n    var refs = def.refs = [];\n    for (var i = 0; i < refFonts.length; i++) {\n      refs[i] = this._getTextWidth(refFonts[i], def.weight, def.style);\n    }\n  };\n\n  /**\n   * Get a CSS definition from a font source and name.\n   * @method _defFromSrc\n   * @param {String} src The font source\n   * @protected\n   */\n  p._defFromSrc = function (src) {\n    var re = /[- ._]+/g,\n      name = src,\n      ext = null,\n      index;\n    index = name.search(/[?#]/);\n    if (index !== -1) {\n      name = name.substr(0, index);\n    }\n    index = name.lastIndexOf(\".\");\n    if (index !== -1) {\n      ext = name.substr(index + 1);\n      name = name.substr(0, index);\n    }\n    index = name.lastIndexOf(\"/\");\n    if (index !== -1) {\n      name = name.substr(index + 1);\n    }\n    var family = name,\n      weight = family.match(FontLoader.WEIGHT_REGEX);\n    if (weight) {\n      weight = weight[0];\n      family = family.replace(weight, \"\");\n      weight = weight.replace(re, \"\").toLowerCase();\n    }\n    var style = name.match(FontLoader.STYLE_REGEX);\n    if (style) {\n      family = family.replace(style[0], \"\");\n      style = \"italic\";\n    }\n    family = family.replace(re, \"\");\n    var cssSrc = \"local('\" + name.replace(re, \" \") + \"'), url('\" + src + \"')\";\n    var format = FontLoader.FONT_FORMAT[ext];\n    if (format) {\n      cssSrc += \" format('\" + format + \"')\";\n    }\n    return this._defFromObj({\n      family: family,\n      weight: FontLoader.FONT_WEIGHT[weight] || weight,\n      style: style,\n      src: cssSrc\n    });\n  };\n\n  /**\n   * Get a font definition from a raw font object.\n   * @method _defFromObj\n   * @param {Object} o A raw object provided to the FontLoader\n   * @returns {Object} A standard font object that the FontLoader understands\n   * @protected\n   */\n  p._defFromObj = function (o) {\n    var def = {\n      family: o.family,\n      src: o.src,\n      style: o.style || \"normal\",\n      weight: o.weight || \"normal\"\n    };\n    def.id = def.family + \";\" + def.style + \";\" + def.weight;\n    return def;\n  };\n\n  /**\n   * Get CSS from a font definition.\n   * @method _cssFromDef\n   * @param {Object} def A font definition\n   * @returns {string} A CSS string representing the object\n   * @protected\n   */\n  p._cssFromDef = function (def) {\n    return \"@font-face {\\n\" + \"\\tfont-family: '\" + def.family + \"';\\n\" + \"\\tfont-style: \" + def.style + \";\\n\" + \"\\tfont-weight: \" + def.weight + \";\\n\" + \"\\tsrc: \" + def.src + \";\\n\" + \"}\";\n  };\n\n  /**\n   * Get the text width of text using the family, weight, and style\n   * @method _getTextWidth\n   * @param {String} family The font family\n   * @param {String} weight The font weight\n   * @param {String} style The font style\n   * @returns {Number} The pixel measurement of the font.\n   * @protected\n   */\n  p._getTextWidth = function (family, weight, style) {\n    var ctx = FontLoader._ctx;\n    ctx.font = style + \" \" + weight + \" 72px \" + family;\n    return ctx.measureText(FontLoader.sampleText).width;\n  };\n\n  /**\n   * Get the value of a property from a CSS string. For example, searches a CSS string for the value of the\n   * \"font-family\" property.\n   * @method _getCSSValue\n   * @param {String} str The CSS string to search\n   * @param {String} propName The property name to get the value for\n   * @returns {String} The value in the CSS for the provided property name\n   * @protected\n   */\n  p._getCSSValue = function (str, propName) {\n    var regex = new RegExp(propName + \":\\s*([^;}]+?)\\s*[;}]\");\n    var result = regex.exec(str);\n    if (!result || !result[1]) {\n      return null;\n    }\n    return result[1];\n  };\n  createjs.FontLoader = createjs.promote(FontLoader, \"AbstractLoader\");\n})();\n\n//##############################################################################\n// ImageLoader.js\n//##############################################################################\n\nwindow.createjs = window.createjs || {};\n(function () {\n  \"use strict\";\n\n  // constructor\n  /**\n   * A loader for image files.\n   * @class ImageLoader\n   * @param {LoadItem|Object} loadItem\n   * @param {Boolean} preferXHR\n   * @extends AbstractLoader\n   * @constructor\n   */\n  function ImageLoader(loadItem, preferXHR) {\n    this.AbstractLoader_constructor(loadItem, preferXHR, createjs.Types.IMAGE);\n\n    // public properties\n    this.resultFormatter = this._formatResult;\n\n    // protected properties\n    this._tagSrcAttribute = \"src\";\n\n    // Check if the preload item is already a tag.\n    if (createjs.DomUtils.isImageTag(loadItem)) {\n      this._tag = loadItem;\n    } else if (createjs.DomUtils.isImageTag(loadItem.src)) {\n      this._tag = loadItem.src;\n    } else if (createjs.DomUtils.isImageTag(loadItem.tag)) {\n      this._tag = loadItem.tag;\n    }\n    if (this._tag != null) {\n      this._preferXHR = false;\n    } else {\n      this._tag = createjs.Elements.img();\n    }\n    this.on(\"initialize\", this._updateXHR, this);\n  }\n  ;\n  var p = createjs.extend(ImageLoader, createjs.AbstractLoader);\n  var s = ImageLoader;\n\n  // static methods\n  /**\n   * Determines if the loader can load a specific item. This loader can only load items that are of type\n   * {{#crossLink \"Types/IMAGE:property\"}}{{/crossLink}}.\n   * @method canLoadItem\n   * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\n   * @returns {Boolean} Whether the loader can load the item.\n   * @static\n   */\n  s.canLoadItem = function (item) {\n    return item.type == createjs.Types.IMAGE;\n  };\n\n  // public methods\n  p.load = function () {\n    if (this._tag.src != \"\" && this._tag.complete) {\n      this._sendComplete();\n      return;\n    }\n    var crossOrigin = this._item.crossOrigin;\n    if (crossOrigin == true) {\n      crossOrigin = \"Anonymous\";\n    }\n    if (crossOrigin != null && !createjs.URLUtils.isLocal(this._item)) {\n      this._tag.crossOrigin = crossOrigin;\n    }\n    this.AbstractLoader_load();\n  };\n\n  // protected methods\n  /**\n   * Before the item loads, set its mimeType and responseType.\n   * @property _updateXHR\n   * @param {Event} event\n   * @private\n   */\n  p._updateXHR = function (event) {\n    event.loader.mimeType = 'text/plain; charset=x-user-defined-binary';\n\n    // Only exists for XHR\n    if (event.loader.setResponseType) {\n      event.loader.setResponseType(\"blob\");\n    }\n  };\n\n  /**\n   * The result formatter for Image files.\n   * @method _formatResult\n   * @param {AbstractLoader} loader\n   * @returns {HTMLImageElement}\n   * @private\n   */\n  p._formatResult = function (loader) {\n    return this._formatImage;\n  };\n\n  /**\n   * The asynchronous image formatter function. This is required because images have\n   * a short delay before they are ready.\n   * @method _formatImage\n   * @param {Function} successCallback The method to call when the result has finished formatting\n   * @param {Function} errorCallback The method to call if an error occurs during formatting\n   * @private\n   */\n  p._formatImage = function (successCallback, errorCallback) {\n    var tag = this._tag;\n    var URL = window.URL || window.webkitURL;\n    if (!this._preferXHR) {\n\n      //document.body.removeChild(tag);\n    } else if (URL) {\n      var objURL = URL.createObjectURL(this.getResult(true));\n      tag.src = objURL;\n      tag.addEventListener(\"load\", this._cleanUpURL, false);\n      tag.addEventListener(\"error\", this._cleanUpURL, false);\n    } else {\n      tag.src = this._item.src;\n    }\n    if (tag.complete) {\n      successCallback(tag);\n    } else {\n      tag.onload = createjs.proxy(function () {\n        successCallback(this._tag);\n        tag.onload = tag.onerror = null;\n      }, this);\n      tag.onerror = createjs.proxy(function (event) {\n        errorCallback(new createjs.ErrorEvent('IMAGE_FORMAT', null, event));\n        tag.onload = tag.onerror = null;\n      }, this);\n    }\n  };\n\n  /**\n   * Clean up the ObjectURL, the tag is done with it. Note that this function is run\n   * as an event listener without a proxy/closure, as it doesn't require it - so do not\n   * include any functionality that requires scope without changing it.\n   * @method _cleanUpURL\n   * @param event\n   * @private\n   */\n  p._cleanUpURL = function (event) {\n    var URL = window.URL || window.webkitURL;\n    URL.revokeObjectURL(event.target.src);\n  };\n  createjs.ImageLoader = createjs.promote(ImageLoader, \"AbstractLoader\");\n})();\n\n//##############################################################################\n// JavaScriptLoader.js\n//##############################################################################\n\nwindow.createjs = window.createjs || {};\n(function () {\n  \"use strict\";\n\n  // constructor\n  /**\n   * A loader for JavaScript files.\n   * @class JavaScriptLoader\n   * @param {LoadItem|Object} loadItem\n   * @param {Boolean} preferXHR\n   * @extends AbstractLoader\n   * @constructor\n   */\n  function JavaScriptLoader(loadItem, preferXHR) {\n    this.AbstractLoader_constructor(loadItem, preferXHR, createjs.Types.JAVASCRIPT);\n\n    // public properties\n    this.resultFormatter = this._formatResult;\n\n    // protected properties\n    this._tagSrcAttribute = \"src\";\n    this.setTag(createjs.Elements.script());\n  }\n  ;\n  var p = createjs.extend(JavaScriptLoader, createjs.AbstractLoader);\n  var s = JavaScriptLoader;\n\n  // static methods\n  /**\n   * Determines if the loader can load a specific item. This loader can only load items that are of type\n   * {{#crossLink \"Types/JAVASCRIPT:property\"}}{{/crossLink}}\n   * @method canLoadItem\n   * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\n   * @returns {Boolean} Whether the loader can load the item.\n   * @static\n   */\n  s.canLoadItem = function (item) {\n    return item.type == createjs.Types.JAVASCRIPT;\n  };\n\n  // protected methods\n  /**\n   * The result formatter for JavaScript files.\n   * @method _formatResult\n   * @param {AbstractLoader} loader\n   * @returns {HTMLLinkElement|HTMLStyleElement}\n   * @private\n   */\n  p._formatResult = function (loader) {\n    var tag = loader.getTag();\n    if (this._preferXHR) {\n      tag.text = loader.getResult(true);\n    }\n    return tag;\n  };\n  createjs.JavaScriptLoader = createjs.promote(JavaScriptLoader, \"AbstractLoader\");\n})();\n\n//##############################################################################\n// JSONLoader.js\n//##############################################################################\n\nwindow.createjs = window.createjs || {};\n(function () {\n  \"use strict\";\n\n  // constructor\n  /**\n   * A loader for JSON files. To load JSON cross-domain, use JSONP and the {{#crossLink \"JSONPLoader\"}}{{/crossLink}}\n   * instead. To load JSON-formatted manifests, use {{#crossLink \"ManifestLoader\"}}{{/crossLink}}, and to\n   * load EaselJS SpriteSheets, use {{#crossLink \"SpriteSheetLoader\"}}{{/crossLink}}.\n   * @class JSONLoader\n   * @param {LoadItem|Object} loadItem\n   * @extends AbstractLoader\n   * @constructor\n   */\n  function JSONLoader(loadItem) {\n    this.AbstractLoader_constructor(loadItem, true, createjs.Types.JSON);\n\n    // public properties\n    this.resultFormatter = this._formatResult;\n  }\n  ;\n  var p = createjs.extend(JSONLoader, createjs.AbstractLoader);\n  var s = JSONLoader;\n\n  // static methods\n  /**\n   * Determines if the loader can load a specific item. This loader can only load items that are of type\n   * {{#crossLink \"Types/JSON:property\"}}{{/crossLink}}.\n   * @method canLoadItem\n   * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\n   * @returns {Boolean} Whether the loader can load the item.\n   * @static\n   */\n  s.canLoadItem = function (item) {\n    return item.type == createjs.Types.JSON;\n  };\n\n  // protected methods\n  /**\n   * The result formatter for JSON files.\n   * @method _formatResult\n   * @param {AbstractLoader} loader\n   * @returns {HTMLLinkElement|HTMLStyleElement}\n   * @private\n   */\n  p._formatResult = function (loader) {\n    var json = null;\n    try {\n      json = createjs.DataUtils.parseJSON(loader.getResult(true));\n    } catch (e) {\n      var event = new createjs.ErrorEvent(\"JSON_FORMAT\", null, e);\n      this._sendError(event);\n      return e;\n    }\n    return json;\n  };\n  createjs.JSONLoader = createjs.promote(JSONLoader, \"AbstractLoader\");\n})();\n\n//##############################################################################\n// JSONPLoader.js\n//##############################################################################\n\nwindow.createjs = window.createjs || {};\n(function () {\n  \"use strict\";\n\n  // constructor\n  /**\n   * A loader for JSONP files, which are JSON-formatted text files, wrapped in a callback. To load regular JSON\n   * without a callback use the {{#crossLink \"JSONLoader\"}}{{/crossLink}} instead. To load JSON-formatted manifests,\n   * use {{#crossLink \"ManifestLoader\"}}{{/crossLink}}, and to load EaselJS SpriteSheets, use\n   * {{#crossLink \"SpriteSheetLoader\"}}{{/crossLink}}.\n   *\n   * JSONP is a format that provides a solution for loading JSON files cross-domain <em>without</em> requiring CORS.\n   * JSONP files are loaded as JavaScript, and the \"callback\" is executed once they are loaded. The callback in the\n   * JSONP must match the callback passed to the loadItem.\n   *\n   * <h4>Example JSONP</h4>\n   *\n   * \t\tcallbackName({\n   * \t\t\t\"name\": \"value\",\n   *\t \t\t\"num\": 3,\n   *\t\t\t\"obj\": { \"bool\":true }\n   * \t\t});\n   *\n   * <h4>Example</h4>\n   *\n   * \t\tvar loadItem = {id:\"json\", type:\"jsonp\", src:\"http://server.com/text.json\", callback:\"callbackName\"}\n   * \t\tvar queue = new createjs.LoadQueue();\n   * \t\tqueue.on(\"complete\", handleComplete);\n   * \t\tqueue.loadItem(loadItem);\n   *\n   * \t\tfunction handleComplete(event) }\n   * \t\t\tvar json = queue.getResult(\"json\");\n   * \t\t\tconsole.log(json.obj.bool); // true\n   * \t\t}\n   *\n   * JSONP files loaded concurrently require a <em>unique</em> callback. To ensure JSONP files are loaded in order,\n   * either use the {{#crossLink \"LoadQueue/setMaxConnections\"}}{{/crossLink}} method (set to 1), or set\n   * {{#crossLink \"LoadItem/maintainOrder:property\"}}{{/crossLink}} on items with the same callback.\n   *\n   * Important note: Some browsers will prevent JSONP from firing the callback if the file was loaded as JSON, and not\n   * JavaScript. You may have to have your server give you a JavaScript mime-type for this to work.\n   *\n   * @class JSONPLoader\n   * @param {LoadItem|Object} loadItem\n   * @extends AbstractLoader\n   * @constructor\n   */\n  function JSONPLoader(loadItem) {\n    this.AbstractLoader_constructor(loadItem, false, createjs.Types.JSONP);\n    this.setTag(createjs.Elements.script());\n    this.getTag().type = \"text/javascript\";\n  }\n  ;\n  var p = createjs.extend(JSONPLoader, createjs.AbstractLoader);\n  var s = JSONPLoader;\n\n  // static methods\n  /**\n   * Determines if the loader can load a specific item. This loader can only load items that are of type\n   * {{#crossLink \"Types/JSONP:property\"}}{{/crossLink}}.\n   * @method canLoadItem\n   * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\n   * @returns {Boolean} Whether the loader can load the item.\n   * @static\n   */\n  s.canLoadItem = function (item) {\n    return item.type == createjs.Types.JSONP;\n  };\n\n  // public methods\n  p.cancel = function () {\n    this.AbstractLoader_cancel();\n    this._dispose();\n  };\n\n  /**\n   * Loads the JSONp file.  Because of the unique loading needs of JSONp\n   * we don't use the AbstractLoader.load() method.\n   *\n   * @method load\n   *\n   */\n  p.load = function () {\n    if (this._item.callback == null) {\n      throw new Error('callback is required for loading JSONP requests.');\n    }\n\n    // TODO: Look into creating our own iFrame to handle the load\n    // In the first attempt, FF did not get the result\n    //   result instanceof Object did not work either\n    //   so we would need to clone the result.\n    if (window[this._item.callback] != null) {\n      throw new Error(\"JSONP callback '\" + this._item.callback + \"' already exists on window. You need to specify a different callback or re-name the current one.\");\n    }\n    window[this._item.callback] = createjs.proxy(this._handleLoad, this);\n    createjs.DomUtils.appendToBody(this._tag);\n    this._loadTimeout = setTimeout(createjs.proxy(this._handleTimeout, this), this._item.loadTimeout);\n\n    // Load the tag\n    this._tag.src = this._item.src;\n  };\n\n  // private methods\n  /**\n   * Handle the JSONP callback, which is a public method defined on `window`.\n   * @method _handleLoad\n   * @param {Object} data The formatted JSON data.\n   * @private\n   */\n  p._handleLoad = function (data) {\n    this._result = this._rawResult = data;\n    this._sendComplete();\n    this._dispose();\n  };\n\n  /**\n   * The tag request has not loaded within the time specfied in loadTimeout.\n   * @method _handleError\n   * @param {Object} event The XHR error event.\n   * @private\n   */\n  p._handleTimeout = function () {\n    this._dispose();\n    this.dispatchEvent(new createjs.ErrorEvent(\"timeout\"));\n  };\n\n  /**\n   * Clean up the JSONP load. This clears out the callback and script tag that this loader creates.\n   * @method _dispose\n   * @private\n   */\n  p._dispose = function () {\n    createjs.DomUtils.removeChild(this._tag);\n    delete window[this._item.callback];\n    clearTimeout(this._loadTimeout);\n  };\n  createjs.JSONPLoader = createjs.promote(JSONPLoader, \"AbstractLoader\");\n})();\n\n//##############################################################################\n// ManifestLoader.js\n//##############################################################################\n\nwindow.createjs = window.createjs || {};\n(function () {\n  \"use strict\";\n\n  // constructor\n  /**\n   * A loader for JSON manifests. Items inside the manifest are loaded before the loader completes. To load manifests\n   * using JSONP, specify a {{#crossLink \"LoadItem/callback:property\"}}{{/crossLink}} as part of the\n   * {{#crossLink \"LoadItem\"}}{{/crossLink}}.\n   *\n   * The list of files in the manifest must be defined on the top-level JSON object in a `manifest` property. This\n   * example shows a sample manifest definition, as well as how to to include a sub-manifest.\n   *\n   * \t\t{\n   * \t\t\t\"path\": \"assets/\",\n   *\t \t    \"manifest\": [\n   *\t\t\t\t\"image.png\",\n   *\t\t\t\t{\"src\": \"image2.png\", \"id\":\"image2\"},\n   *\t\t\t\t{\"src\": \"sub-manifest.json\", \"type\":\"manifest\", \"callback\":\"jsonCallback\"}\n   *\t \t    ]\n   *\t \t}\n   *\n   * When a ManifestLoader has completed loading, the parent loader (usually a {{#crossLink \"LoadQueue\"}}{{/crossLink}},\n   * but could also be another ManifestLoader) will inherit all the loaded items, so you can access them directly.\n   *\n   * Note that the {{#crossLink \"JSONLoader\"}}{{/crossLink}} and {{#crossLink \"JSONPLoader\"}}{{/crossLink}} are\n   * higher priority loaders, so manifests <strong>must</strong> set the {{#crossLink \"LoadItem\"}}{{/crossLink}}\n   * {{#crossLink \"LoadItem/type:property\"}}{{/crossLink}} property to {{#crossLink \"Types/MANIFEST:property\"}}{{/crossLink}}.\n   *\n   * Additionally, some browsers require the server to serve a JavaScript mime-type for JSONP, so it may not work in\n   * some conditions.\n   * @class ManifestLoader\n   * @param {LoadItem|Object} loadItem\n   * @extends AbstractLoader\n   * @constructor\n   */\n  function ManifestLoader(loadItem, preferXHR) {\n    this.AbstractLoader_constructor(loadItem, preferXHR, createjs.Types.MANIFEST);\n\n    // Public Properties\n    /**\n     * An array of the plugins registered using {{#crossLink \"LoadQueue/installPlugin\"}}{{/crossLink}},\n     * used to pass plugins to new LoadQueues that may be created.\n     * @property _plugins\n     * @type {Array}\n     * @private\n     * @since 0.6.1\n     */\n    this.plugins = null;\n\n    // Protected Properties\n    /**\n     * An internal {{#crossLink \"LoadQueue\"}}{{/crossLink}} that loads the contents of the manifest.\n     * @property _manifestQueue\n     * @type {LoadQueue}\n     * @private\n     */\n    this._manifestQueue = null;\n  }\n  ;\n  var p = createjs.extend(ManifestLoader, createjs.AbstractLoader);\n  var s = ManifestLoader;\n\n  // static properties\n  /**\n   * The amount of progress that the manifest itself takes up.\n   * @property MANIFEST_PROGRESS\n   * @type {number}\n   * @default 0.25 (25%)\n   * @private\n   * @static\n   */\n  s.MANIFEST_PROGRESS = 0.25;\n\n  // static methods\n  /**\n   * Determines if the loader can load a specific item. This loader can only load items that are of type\n   * {{#crossLink \"Types/MANIFEST:property\"}}{{/crossLink}}\n   * @method canLoadItem\n   * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\n   * @returns {Boolean} Whether the loader can load the item.\n   * @static\n   */\n  s.canLoadItem = function (item) {\n    return item.type == createjs.Types.MANIFEST;\n  };\n\n  // public methods\n  p.load = function () {\n    this.AbstractLoader_load();\n  };\n\n  // protected methods\n  p._createRequest = function () {\n    var callback = this._item.callback;\n    if (callback != null) {\n      this._request = new createjs.JSONPLoader(this._item);\n    } else {\n      this._request = new createjs.JSONLoader(this._item);\n    }\n  };\n  p.handleEvent = function (event) {\n    switch (event.type) {\n      case \"complete\":\n        this._rawResult = event.target.getResult(true);\n        this._result = event.target.getResult();\n        this._sendProgress(s.MANIFEST_PROGRESS);\n        this._loadManifest(this._result);\n        return;\n      case \"progress\":\n        event.loaded *= s.MANIFEST_PROGRESS;\n        this.progress = event.loaded / event.total;\n        if (isNaN(this.progress) || this.progress == Infinity) {\n          this.progress = 0;\n        }\n        this._sendProgress(event);\n        return;\n    }\n    this.AbstractLoader_handleEvent(event);\n  };\n  p.destroy = function () {\n    this.AbstractLoader_destroy();\n    this._manifestQueue.close();\n  };\n\n  /**\n   * Create and load the manifest items once the actual manifest has been loaded.\n   * @method _loadManifest\n   * @param {Object} json\n   * @private\n   */\n  p._loadManifest = function (json) {\n    if (json && json.manifest) {\n      var queue = this._manifestQueue = new createjs.LoadQueue(this._preferXHR);\n      queue.on(\"fileload\", this._handleManifestFileLoad, this);\n      queue.on(\"progress\", this._handleManifestProgress, this);\n      queue.on(\"complete\", this._handleManifestComplete, this, true);\n      queue.on(\"error\", this._handleManifestError, this, true);\n      for (var i = 0, l = this.plugins.length; i < l; i++) {\n        // conserve order of plugins\n        queue.installPlugin(this.plugins[i]);\n      }\n      queue.loadManifest(json);\n    } else {\n      this._sendComplete();\n    }\n  };\n\n  /**\n   * An item from the {{#crossLink \"_manifestQueue:property\"}}{{/crossLink}} has completed.\n   * @method _handleManifestFileLoad\n   * @param {Event} event\n   * @private\n   */\n  p._handleManifestFileLoad = function (event) {\n    event.target = null;\n    this.dispatchEvent(event);\n  };\n\n  /**\n   * The manifest has completed loading. This triggers the {{#crossLink \"AbstractLoader/complete:event\"}}{{/crossLink}}\n   * {{#crossLink \"Event\"}}{{/crossLink}} from the ManifestLoader.\n   * @method _handleManifestComplete\n   * @param {Event} event\n   * @private\n   */\n  p._handleManifestComplete = function (event) {\n    this._loadedItems = this._manifestQueue.getItems(true);\n    this._sendComplete();\n  };\n\n  /**\n   * The manifest has reported progress.\n   * @method _handleManifestProgress\n   * @param {ProgressEvent} event\n   * @private\n   */\n  p._handleManifestProgress = function (event) {\n    this.progress = event.progress * (1 - s.MANIFEST_PROGRESS) + s.MANIFEST_PROGRESS;\n    this._sendProgress(this.progress);\n  };\n\n  /**\n   * The manifest has reported an error with one of the files.\n   * @method _handleManifestError\n   * @param {ErrorEvent} event\n   * @private\n   */\n  p._handleManifestError = function (event) {\n    var newEvent = new createjs.Event(\"fileerror\");\n    newEvent.item = event.data;\n    this.dispatchEvent(newEvent);\n  };\n  createjs.ManifestLoader = createjs.promote(ManifestLoader, \"AbstractLoader\");\n})();\n\n//##############################################################################\n// SoundLoader.js\n//##############################################################################\n\nwindow.createjs = window.createjs || {};\n(function () {\n  \"use strict\";\n\n  // constructor\n  /**\n   * A loader for HTML audio files. PreloadJS can not load WebAudio files, as a WebAudio context is required, which\n   * should be created by either a library playing the sound (such as <a href=\"http://soundjs.com\">SoundJS</a>, or an\n   * external framework that handles audio playback. To load content that can be played by WebAudio, use the\n   * {{#crossLink \"BinaryLoader\"}}{{/crossLink}}, and handle the audio context decoding manually.\n   * @class SoundLoader\n   * @param {LoadItem|Object} loadItem\n   * @param {Boolean} preferXHR\n   * @extends AbstractMediaLoader\n   * @constructor\n   */\n  function SoundLoader(loadItem, preferXHR) {\n    this.AbstractMediaLoader_constructor(loadItem, preferXHR, createjs.Types.SOUND);\n\n    // protected properties\n    if (createjs.DomUtils.isAudioTag(loadItem)) {\n      this._tag = loadItem;\n    } else if (createjs.DomUtils.isAudioTag(loadItem.src)) {\n      this._tag = loadItem;\n    } else if (createjs.DomUtils.isAudioTag(loadItem.tag)) {\n      this._tag = createjs.DomUtils.isAudioTag(loadItem) ? loadItem : loadItem.src;\n    }\n    if (this._tag != null) {\n      this._preferXHR = false;\n    }\n  }\n  ;\n  var p = createjs.extend(SoundLoader, createjs.AbstractMediaLoader);\n  var s = SoundLoader;\n\n  // static methods\n  /**\n   * Determines if the loader can load a specific item. This loader can only load items that are of type\n   * {{#crossLink \"Types/SOUND:property\"}}{{/crossLink}}.\n   * @method canLoadItem\n   * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\n   * @returns {Boolean} Whether the loader can load the item.\n   * @static\n   */\n  s.canLoadItem = function (item) {\n    return item.type == createjs.Types.SOUND;\n  };\n\n  // protected methods\n  p._createTag = function (src) {\n    var tag = createjs.Elements.audio();\n    tag.autoplay = false;\n    tag.preload = \"none\";\n\n    //LM: Firefox fails when this the preload=\"none\" for other tags, but it needs to be \"none\" to ensure PreloadJS works.\n    tag.src = src;\n    return tag;\n  };\n  createjs.SoundLoader = createjs.promote(SoundLoader, \"AbstractMediaLoader\");\n})();\n\n//##############################################################################\n// VideoLoader.js\n//##############################################################################\n\nwindow.createjs = window.createjs || {};\n(function () {\n  \"use strict\";\n\n  // constructor\n  /**\n   * A loader for video files.\n   * @class VideoLoader\n   * @param {LoadItem|Object} loadItem\n   * @param {Boolean} preferXHR\n   * @extends AbstractMediaLoader\n   * @constructor\n   */\n  function VideoLoader(loadItem, preferXHR) {\n    this.AbstractMediaLoader_constructor(loadItem, preferXHR, createjs.Types.VIDEO);\n    if (createjs.DomUtils.isVideoTag(loadItem) || createjs.DomUtils.isVideoTag(loadItem.src)) {\n      this.setTag(createjs.DomUtils.isVideoTag(loadItem) ? loadItem : loadItem.src);\n\n      // We can't use XHR for a tag that's passed in.\n      this._preferXHR = false;\n    } else {\n      this.setTag(this._createTag());\n    }\n  }\n  ;\n  var p = createjs.extend(VideoLoader, createjs.AbstractMediaLoader);\n  var s = VideoLoader;\n\n  /**\n   * Create a new video tag\n   *\n   * @returns {HTMLElement}\n   * @private\n   */\n  p._createTag = function () {\n    return createjs.Elements.video();\n  };\n\n  // static methods\n  /**\n   * Determines if the loader can load a specific item. This loader can only load items that are of type\n   * {{#crossLink \"Types/VIDEO:property\"}}{{/crossLink}}.\n   * @method canLoadItem\n   * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\n   * @returns {Boolean} Whether the loader can load the item.\n   * @static\n   */\n  s.canLoadItem = function (item) {\n    return item.type == createjs.Types.VIDEO;\n  };\n  createjs.VideoLoader = createjs.promote(VideoLoader, \"AbstractMediaLoader\");\n})();\n\n//##############################################################################\n// SpriteSheetLoader.js\n//##############################################################################\n\nwindow.createjs = window.createjs || {};\n(function () {\n  \"use strict\";\n\n  // constructor\n  /**\n   * A loader for EaselJS SpriteSheets. Images inside the spritesheet definition are loaded before the loader\n   * completes. To load SpriteSheets using JSONP, specify a {{#crossLink \"LoadItem/callback:property\"}}{{/crossLink}}\n   * as part of the {{#crossLink \"LoadItem\"}}{{/crossLink}}. Note that the {{#crossLink \"JSONLoader\"}}{{/crossLink}}\n   * and {{#crossLink \"JSONPLoader\"}}{{/crossLink}} are higher priority loaders, so SpriteSheets <strong>must</strong>\n   * set the {{#crossLink \"LoadItem\"}}{{/crossLink}} {{#crossLink \"LoadItem/type:property\"}}{{/crossLink}} property\n   * to {{#crossLink \"Types/SPRITESHEET:property\"}}{{/crossLink}}.\n   *\n   * The {{#crossLink \"LoadItem\"}}{{/crossLink}} {{#crossLink \"LoadItem/crossOrigin:property\"}}{{/crossLink}} as well\n   * as the {{#crossLink \"LoadQueue's\"}}{{/crossLink}} `basePath` argument and {{#crossLink \"LoadQueue/_preferXHR\"}}{{/crossLink}}\n   * property supplied to the {{#crossLink \"LoadQueue\"}}{{/crossLink}} are passed on to the sub-manifest that loads\n   * the SpriteSheet images.\n   *\n   * Note that the SpriteSheet JSON does not respect the {{#crossLink \"LoadQueue/_preferXHR:property\"}}{{/crossLink}}\n   * property, which should instead be determined by the presence of a {{#crossLink \"LoadItem/callback:property\"}}{{/crossLink}}\n   * property on the SpriteSheet load item. This is because the JSON loaded will have a different format depending on\n   * if it is loaded as JSON, so just changing `preferXHR` is not enough to change how it is loaded.\n   * @class SpriteSheetLoader\n   * @param {LoadItem|Object} loadItem\n   * @extends AbstractLoader\n   * @constructor\n   */\n  function SpriteSheetLoader(loadItem, preferXHR) {\n    this.AbstractLoader_constructor(loadItem, preferXHR, createjs.Types.SPRITESHEET);\n\n    // protected properties\n    /**\n     * An internal queue which loads the SpriteSheet's images.\n     * @method _manifestQueue\n     * @type {LoadQueue}\n     * @private\n     */\n    this._manifestQueue = null;\n  }\n  var p = createjs.extend(SpriteSheetLoader, createjs.AbstractLoader);\n  var s = SpriteSheetLoader;\n\n  // static properties\n  /**\n   * The amount of progress that the manifest itself takes up.\n   * @property SPRITESHEET_PROGRESS\n   * @type {number}\n   * @default 0.25 (25%)\n   * @private\n   * @static\n   */\n  s.SPRITESHEET_PROGRESS = 0.25;\n\n  // static methods\n  /**\n   * Determines if the loader can load a specific item. This loader can only load items that are of type\n   * {{#crossLink \"Types/SPRITESHEET:property\"}}{{/crossLink}}\n   * @method canLoadItem\n   * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\n   * @returns {Boolean} Whether the loader can load the item.\n   * @static\n   */\n  s.canLoadItem = function (item) {\n    return item.type == createjs.Types.SPRITESHEET;\n  };\n\n  // public methods\n  p.destroy = function () {\n    this.AbstractLoader_destroy();\n    this._manifestQueue.close();\n  };\n\n  // protected methods\n  p._createRequest = function () {\n    var callback = this._item.callback;\n    if (callback != null) {\n      this._request = new createjs.JSONPLoader(this._item);\n    } else {\n      this._request = new createjs.JSONLoader(this._item);\n    }\n  };\n  p.handleEvent = function (event) {\n    switch (event.type) {\n      case \"complete\":\n        this._rawResult = event.target.getResult(true);\n        this._result = event.target.getResult();\n        this._sendProgress(s.SPRITESHEET_PROGRESS);\n        this._loadManifest(this._result);\n        return;\n      case \"progress\":\n        event.loaded *= s.SPRITESHEET_PROGRESS;\n        this.progress = event.loaded / event.total;\n        if (isNaN(this.progress) || this.progress == Infinity) {\n          this.progress = 0;\n        }\n        this._sendProgress(event);\n        return;\n    }\n    this.AbstractLoader_handleEvent(event);\n  };\n\n  /**\n   * Create and load the images once the SpriteSheet JSON has been loaded.\n   * @method _loadManifest\n   * @param {Object} json\n   * @private\n   */\n  p._loadManifest = function (json) {\n    if (json && json.images) {\n      var queue = this._manifestQueue = new createjs.LoadQueue(this._preferXHR, this._item.path, this._item.crossOrigin);\n      queue.on(\"complete\", this._handleManifestComplete, this, true);\n      queue.on(\"fileload\", this._handleManifestFileLoad, this);\n      queue.on(\"progress\", this._handleManifestProgress, this);\n      queue.on(\"error\", this._handleManifestError, this, true);\n      queue.loadManifest(json.images);\n    }\n  };\n\n  /**\n   * An item from the {{#crossLink \"_manifestQueue:property\"}}{{/crossLink}} has completed.\n   * @method _handleManifestFileLoad\n   * @param {Event} event\n   * @private\n   */\n  p._handleManifestFileLoad = function (event) {\n    var image = event.result;\n    if (image != null) {\n      var images = this.getResult().images;\n      var pos = images.indexOf(event.item.src);\n      images[pos] = image;\n    }\n  };\n\n  /**\n   * The images have completed loading. This triggers the {{#crossLink \"AbstractLoader/complete:event\"}}{{/crossLink}}\n   * {{#crossLink \"Event\"}}{{/crossLink}} from the SpriteSheetLoader.\n   * @method _handleManifestComplete\n   * @param {Event} event\n   * @private\n   */\n  p._handleManifestComplete = function (event) {\n    this._result = new createjs.SpriteSheet(this._result);\n    this._loadedItems = this._manifestQueue.getItems(true);\n    this._sendComplete();\n  };\n\n  /**\n   * The images {{#crossLink \"LoadQueue\"}}{{/crossLink}} has reported progress.\n   * @method _handleManifestProgress\n   * @param {ProgressEvent} event\n   * @private\n   */\n  p._handleManifestProgress = function (event) {\n    this.progress = event.progress * (1 - s.SPRITESHEET_PROGRESS) + s.SPRITESHEET_PROGRESS;\n    this._sendProgress(this.progress);\n  };\n\n  /**\n   * An image has reported an error.\n   * @method _handleManifestError\n   * @param {ErrorEvent} event\n   * @private\n   */\n  p._handleManifestError = function (event) {\n    var newEvent = new createjs.Event(\"fileerror\");\n    newEvent.item = event.data;\n    this.dispatchEvent(newEvent);\n  };\n  createjs.SpriteSheetLoader = createjs.promote(SpriteSheetLoader, \"AbstractLoader\");\n})();\n\n//##############################################################################\n// SVGLoader.js\n//##############################################################################\n\nwindow.createjs = window.createjs || {};\n(function () {\n  \"use strict\";\n\n  // constructor\n  /**\n   * A loader for SVG files.\n   * @class SVGLoader\n   * @param {LoadItem|Object} loadItem\n   * @param {Boolean} preferXHR\n   * @extends AbstractLoader\n   * @constructor\n   */\n  function SVGLoader(loadItem, preferXHR) {\n    this.AbstractLoader_constructor(loadItem, preferXHR, createjs.Types.SVG);\n\n    // public properties\n    this.resultFormatter = this._formatResult;\n\n    // protected properties\n    this._tagSrcAttribute = \"data\";\n    if (preferXHR) {\n      this.setTag(createjs.Elements.svg());\n    } else {\n      this.setTag(createjs.Elements.object());\n      this.getTag().type = \"image/svg+xml\";\n    }\n  }\n  ;\n  var p = createjs.extend(SVGLoader, createjs.AbstractLoader);\n  var s = SVGLoader;\n\n  // static methods\n  /**\n   * Determines if the loader can load a specific item. This loader can only load items that are of type\n   * {{#crossLink \"Types/SVG:property\"}}{{/crossLink}}\n   * @method canLoadItem\n   * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\n   * @returns {Boolean} Whether the loader can load the item.\n   * @static\n   */\n  s.canLoadItem = function (item) {\n    return item.type == createjs.Types.SVG;\n  };\n\n  // protected methods\n  /**\n   * The result formatter for SVG files.\n   * @method _formatResult\n   * @param {AbstractLoader} loader\n   * @returns {Object}\n   * @private\n   */\n  p._formatResult = function (loader) {\n    // mime should be image/svg+xml, but Opera requires text/xml\n    var xml = createjs.DataUtils.parseXML(loader.getResult(true));\n    var tag = loader.getTag();\n    if (!this._preferXHR && document.body.contains(tag)) {\n      document.body.removeChild(tag);\n    }\n    if (xml.documentElement != null) {\n      var element = xml.documentElement;\n      // Support loading an SVG from a different domain in ID\n      if (document.importNode) {\n        element = document.importNode(element, true);\n      }\n      tag.appendChild(element);\n      return tag;\n    } else {\n      // For browsers that don't support SVG, just give them the XML. (IE 9-8)\n      return xml;\n    }\n  };\n  createjs.SVGLoader = createjs.promote(SVGLoader, \"AbstractLoader\");\n})();\n\n//##############################################################################\n// XMLLoader.js\n//##############################################################################\n\nwindow.createjs = window.createjs || {};\n(function () {\n  \"use strict\";\n\n  // constructor\n  /**\n   * A loader for CSS files.\n   * @class XMLLoader\n   * @param {LoadItem|Object} loadItem\n   * @extends AbstractLoader\n   * @constructor\n   */\n  function XMLLoader(loadItem) {\n    this.AbstractLoader_constructor(loadItem, true, createjs.Types.XML);\n\n    // public properties\n    this.resultFormatter = this._formatResult;\n  }\n  ;\n  var p = createjs.extend(XMLLoader, createjs.AbstractLoader);\n  var s = XMLLoader;\n\n  // static methods\n  /**\n   * Determines if the loader can load a specific item. This loader can only load items that are of type\n   * {{#crossLink \"Types/XML:property\"}}{{/crossLink}}.\n   * @method canLoadItem\n   * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\n   * @returns {Boolean} Whether the loader can load the item.\n   * @static\n   */\n  s.canLoadItem = function (item) {\n    return item.type == createjs.Types.XML;\n  };\n\n  // protected methods\n  /**\n   * The result formatter for XML files.\n   * @method _formatResult\n   * @param {AbstractLoader} loader\n   * @returns {XMLDocument}\n   * @private\n   */\n  p._formatResult = function (loader) {\n    return createjs.DataUtils.parseXML(loader.getResult(true));\n  };\n  createjs.XMLLoader = createjs.promote(XMLLoader, \"AbstractLoader\");\n})();","map":{"version":3,"names":["window","createjs","s","PreloadJS","version","buildDate","extend","subclass","superclass","o","constructor","prototype","promote","prefix","subP","supP","Object","getPrototypeOf","__proto__","n","hasOwnProperty","deprecate","fallbackMethod","name","msg","console","warn","log","apply","arguments","proxy","method","scope","aArgs","Array","slice","call","concat","indexOf","array","searchElement","i","l","length","Event","type","bubbles","cancelable","target","currentTarget","eventPhase","timeStamp","Date","getTime","defaultPrevented","propagationStopped","immediatePropagationStopped","removed","p","preventDefault","stopPropagation","stopImmediatePropagation","remove","clone","set","props","toString","ErrorEvent","title","message","data","Event_constructor","EventDispatcher","_listeners","_captureListeners","initialize","addEventListener","on","removeEventListener","off","removeAllEventListeners","hasEventListener","dispatchEvent","_dispatchEvent","willTrigger","listener","useCapture","listeners","arr","push","once","handleEvent","evt","splice","eventObj","e","parent","top","list","captureListeners","ProgressEvent","loaded","total","progress","isLoader","define","amd","objectTypes","freeExports","exports","nodeType","root","freeGlobal","module","global","runInContext","context","Number","String","SyntaxError","TypeError","Math","nativeJSON","stringify","parse","objectProto","getClass","isProperty","forEach","undef","isExtended","getUTCFullYear","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","getUTCMilliseconds","exception","has","isSupported","value","serialized","stringifySupported","toJSON","parseSupported","functionClass","dateClass","numberClass","stringClass","arrayClass","booleanClass","charIndexBuggy","floor","Months","getDay","year","month","property","members","original","result","object","callback","size","Properties","valueOf","isFunction","hasProperty","isConstructor","Escapes","leadingZeroes","toPaddedString","width","unicodePrefix","quote","index","useCharIndex","symbols","split","charCode","charCodeAt","charAt","serialize","properties","whitespace","indentation","stack","className","date","time","hours","minutes","seconds","milliseconds","results","element","join","pop","source","filter","fromCharCode","Unescapes","Index","Source","abort","lex","begin","position","isSigned","get","hasMembers","update","walk","JSON","previousJSON","isRestored","JSON3","noConflict","a","el","svg","image","img","style","link","script","audio","video","text","document","createTextNode","createElement","Elements","ABSOLUTE_PATT","RELATIVE_PATT","EXTENSION_PATT","parseURI","path","info","absolute","relative","protocol","hostname","port","pathname","search","hash","host","parser","href","queryIndex","substr","match","test","extension","toLowerCase","formatQueryString","query","Error","params","escape","buildURI","src","idx","q","isCrossDomain","item","location","crossdomain","isLocal","URLUtils","container","appendToHead","getHead","appendChild","appendToBody","id","visibility","height","overflow","transform","msTransform","webkitTransform","oTransform","getBody","head","getElementsByTagName","body","removeChild","isImageTag","HTMLImageElement","isAudioTag","HTMLAudioElement","isVideoTag","HTMLVideoElement","DomUtils","parseXML","xml","DOMParser","parseFromString","ActiveXObject","async","loadXML","parseJSON","DataUtils","BINARY","CSS","FONT","FONTCSS","IMAGE","JAVASCRIPT","JSONP","MANIFEST","SOUND","VIDEO","SPRITESHEET","SVG","TEXT","XML","Types","POST","GET","Methods","LoadItem","maintainOrder","values","headers","withCredentials","mimeType","crossOrigin","loadTimeout","LOAD_TIMEOUT_DEFAULT","create","isBinary","isText","getTypeByExtension","RequestUtils","AbstractLoader","loadItem","preferXHR","EventDispatcher_constructor","canceled","resultFormatter","_item","_preferXHR","_result","_rawResult","_loadedItems","_tagSrcAttribute","_tag","defineProperties","getItem","getResult","raw","getTag","setTag","tag","load","_createRequest","_request","loader","cancel","destroy","_loadItems","getLoadedItems","TagRequest","_createTag","XHRRequest","_sendLoadStart","_isCanceled","_sendProgress","event","isNaN","Infinity","_sendComplete","rawResult","_sendError","_response","Function","_resultFormatSuccess","_resultFormatFailed","toUpperCase","AbstractMediaLoader","AbstractLoader_constructor","_formatResult","_updateXHR","preload","AbstractLoader_load","MediaTagRequest","setResponseType","_loadedHandler","onstalled","URL","webkitURL","createObjectURL","AbstractRequest","srcAttribute","AbstractRequest_constructor","_handleTagComplete","_addedToDOM","onload","onreadystatechange","_handleReadyStateChange","onerror","_handleError","_loadTimeout","setTimeout","_handleTimeout","parentNode","_clean","AbstractRequest_destroy","clearTimeout","readyState","_handleStalled","sc","_stalledCallback","pc","_handleProgress","TagRequest_load","newEvent","_progressCallback","TagRequest__clean","_xhrLevel","_rawResponse","_canceled","_handleLoadStartProxy","_handleLoadStart","_handleProgressProxy","_handleAbortProxy","_handleAbort","_handleErrorProxy","_handleTimeoutProxy","_handleLoadProxy","_handleLoad","_handleReadyStateChangeProxy","_createXHR","ACTIVEX_VERSIONS","onloadstart","onprogress","onabort","ontimeout","send","error","_responseType","responseType","getAllResponseHeaders","getResponseHeader","header","_checkError","_getResponse","Blob","BlobBuilder","WebKitBlobBuilder","MozBlobBuilder","MSBlobBuilder","builder","append","getBlob","status","parseInt","response","responseText","responseXML","req","XMLHttpRequest","undefined","XDomainRequest","axVersion","overrideMimeType","open","origin","setRequestHeader","LoadQueue","basePath","_plugins","_typeCallbacks","_extensionCallbacks","next","maintainScriptOrder","stopOnError","_maxConnections","_availableLoaders","FontLoader","ImageLoader","JavaScriptLoader","CSSLoader","JSONLoader","JSONPLoader","SoundLoader","ManifestLoader","SpriteSheetLoader","XMLLoader","SVGLoader","BinaryLoader","VideoLoader","TextLoader","_defaultLoaderLength","init","setPreferXHR","_paused","_basePath","_crossOrigin","_loadStartWasDispatched","_currentlyLoadingScript","_currentLoads","_loadQueue","_loadQueueBackup","_loadItemsById","_loadItemsBySrc","_loadedResults","_loadedRawResults","_numItems","_numItemsLoaded","_scriptOrder","_loadedScripts","_lastProgress","NaN","registerLoader","canLoadItem","unshift","unregisterLoader","removeAll","idsOrUrls","args","isArray","itemsWereRemoved","close","_disposeItem","r","_loadNext","reset","loadManifest","installPlugin","plugin","getPreloadHandlers","map","types","extensions","setMaxConnections","loadFile","file","loadNow","_addItem","setPaused","manifest","fileList","getItems","loadStartWasDispatched","_itemCount","_createLoadItem","_createLoader","plugins","_loader","_updateProgress","bp","useBasePath","pathMatch","ext","autoId","customHandler","_canStartLoad","_loadItem","_handleFileLoad","_handleFileComplete","_handleFileError","_sendFileStart","_finishOrderedItem","_removeLoadItem","_cleanLoadItem","_saveLoadedItems","_processFinishedLoad","loadFailed","_checkScriptLoadOrder","_sendFileComplete","checkItem","_sendFileProgress","remaining","chunk","completeHandler","rel","styleSheet","cssText","textNode","_faces","_watched","_count","_watchInterval","_injectCSS","injectCSS","sampleText","_ctx","getContext","_referenceFonts","WEIGHT_REGEX","STYLE_REGEX","FONT_FORMAT","woff2","woff","ttf","otf","FONT_WEIGHT","thin","extralight","ultralight","light","semilight","demilight","book","regular","semibold","demibold","extrabold","ultrabold","black","heavy","WATCH_DURATION","_watchCSS","_watchFontArray","def","_defFromSrc","_watchFont","_injectStyleTag","_cssFromDef","_stopWatching","_parseCSS","AbstractLoader_handleEvent","HTMLStyleElement","textContent","css","regex","exec","_parseFontFace","_defFromObj","styleTag","str","family","_getCSSValue","weight","_calculateReferenceSizes","_startWatching","setInterval","_watch","clearInterval","defs","refFonts","refs","j","w","_getTextWidth","re","lastIndexOf","replace","cssSrc","format","ctx","font","measureText","propName","RegExp","complete","_formatImage","successCallback","errorCallback","objURL","_cleanUpURL","revokeObjectURL","json","AbstractLoader_cancel","_dispose","_manifestQueue","MANIFEST_PROGRESS","_loadManifest","AbstractLoader_destroy","queue","_handleManifestFileLoad","_handleManifestProgress","_handleManifestComplete","_handleManifestError","AbstractMediaLoader_constructor","autoplay","SPRITESHEET_PROGRESS","images","pos","SpriteSheet","contains","documentElement","importNode"],"sources":["/Users/canozdemir/Downloads/web-based-navigation-rosbridge/node_modules/latest-createjs/lib/preloadjs/preloadjs.js"],"sourcesContent":["/*!\n* PreloadJS\n* Visit http://createjs.com/ for documentation, updates and examples.\n*\n* Copyright (c) 2010 gskinner.com, inc.\n*\n* Permission is hereby granted, free of charge, to any person\n* obtaining a copy of this software and associated documentation\n* files (the \"Software\"), to deal in the Software without\n* restriction, including without limitation the rights to use,\n* copy, modify, merge, publish, distribute, sublicense, and/or sell\n* copies of the Software, and to permit persons to whom the\n* Software is furnished to do so, subject to the following\n* conditions:\n*\n* The above copyright notice and this permission notice shall be\n* included in all copies or substantial portions of the Software.\n*\n* THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n* EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\n* OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n* NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n* HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\n* WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n* FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\n* OTHER DEALINGS IN THE SOFTWARE.\n*/\n\n\n//##############################################################################\n// version.js\n//##############################################################################\n\nwindow.createjs = window.createjs || {};\n\n(function () {\n\t\"use strict\";\n\n\t/**\n\t * Static class holding library specific information such as the version and buildDate of the library.\n\t * @class PreloadJS\n\t **/\n\tvar s = createjs.PreloadJS = createjs.PreloadJS || {};\n\n\t/**\n\t * The version string for this release.\n\t * @property version\n\t * @type {String}\n\t * @static\n\t **/\n\ts.version = /*=version*/\"1.0.0\"; // injected by build process\n\n\t/**\n\t * The build date for this release in UTC format.\n\t * @property buildDate\n\t * @type {String}\n\t * @static\n\t **/\n\ts.buildDate = /*=date*/\"Thu, 14 Sep 2017 19:47:47 GMT\"; // injected by build process\n\n})();\n\n//##############################################################################\n// extend.js\n//##############################################################################\n\nwindow.createjs = window.createjs||{};\n\n/**\n * @class Utility Methods\n */\n\n/**\n * Sets up the prototype chain and constructor property for a new class.\n *\n * This should be called right after creating the class constructor.\n *\n * \tfunction MySubClass() {}\n * \tcreatejs.extend(MySubClass, MySuperClass);\n * \tMySubClass.prototype.doSomething = function() { }\n *\n * \tvar foo = new MySubClass();\n * \tconsole.log(foo instanceof MySuperClass); // true\n * \tconsole.log(foo.prototype.constructor === MySubClass); // true\n *\n * @method extend\n * @param {Function} subclass The subclass.\n * @param {Function} superclass The superclass to extend.\n * @return {Function} Returns the subclass's new prototype.\n */\ncreatejs.extend = function(subclass, superclass) {\n\t\"use strict\";\n\n\tfunction o() { this.constructor = subclass; }\n\to.prototype = superclass.prototype;\n\treturn (subclass.prototype = new o());\n};\n\n//##############################################################################\n// promote.js\n//##############################################################################\n\nwindow.createjs = window.createjs||{};\n\n/**\n * @class Utility Methods\n */\n\n/**\n * Promotes any methods on the super class that were overridden, by creating an alias in the format `prefix_methodName`.\n * It is recommended to use the super class's name as the prefix.\n * An alias to the super class's constructor is always added in the format `prefix_constructor`.\n * This allows the subclass to call super class methods without using `function.call`, providing better performance.\n *\n * For example, if `MySubClass` extends `MySuperClass`, and both define a `draw` method, then calling `promote(MySubClass, \"MySuperClass\")`\n * would add a `MySuperClass_constructor` method to MySubClass and promote the `draw` method on `MySuperClass` to the\n * prototype of `MySubClass` as `MySuperClass_draw`.\n *\n * This should be called after the class's prototype is fully defined.\n *\n * \tfunction ClassA(name) {\n * \t\tthis.name = name;\n * \t}\n * \tClassA.prototype.greet = function() {\n * \t\treturn \"Hello \"+this.name;\n * \t}\n *\n * \tfunction ClassB(name, punctuation) {\n * \t\tthis.ClassA_constructor(name);\n * \t\tthis.punctuation = punctuation;\n * \t}\n * \tcreatejs.extend(ClassB, ClassA);\n * \tClassB.prototype.greet = function() {\n * \t\treturn this.ClassA_greet()+this.punctuation;\n * \t}\n * \tcreatejs.promote(ClassB, \"ClassA\");\n *\n * \tvar foo = new ClassB(\"World\", \"!?!\");\n * \tconsole.log(foo.greet()); // Hello World!?!\n *\n * @method promote\n * @param {Function} subclass The class to promote super class methods on.\n * @param {String} prefix The prefix to add to the promoted method names. Usually the name of the superclass.\n * @return {Function} Returns the subclass.\n */\ncreatejs.promote = function(subclass, prefix) {\n\t\"use strict\";\n\n\tvar subP = subclass.prototype, supP = (Object.getPrototypeOf&&Object.getPrototypeOf(subP))||subP.__proto__;\n\tif (supP) {\n\t\tsubP[(prefix+=\"_\") + \"constructor\"] = supP.constructor; // constructor is not always innumerable\n\t\tfor (var n in supP) {\n\t\t\tif (subP.hasOwnProperty(n) && (typeof supP[n] == \"function\")) { subP[prefix + n] = supP[n]; }\n\t\t}\n\t}\n\treturn subclass;\n};\n\n//##############################################################################\n// deprecate.js\n//##############################################################################\n\nwindow.createjs = window.createjs||{};\n\n/**\n * @class Utility Methods\n */\n\n/**\n * Wraps deprecated methods so they still be used, but throw warnings to developers.\n *\n *\tobj.deprecatedMethod = createjs.deprecate(\"Old Method Name\", obj._fallbackMethod);\n *\n * The recommended approach for deprecated properties is:\n *\n *\ttry {\n *\t\tObj\tect.defineProperties(object, {\n *\t\t\treadyOnlyProp: { get: createjs.deprecate(\"readOnlyProp\", function() { return this.alternateProp; }) },\n *\t\t\treadWriteProp: {\n *\t\t\t\tget: createjs.deprecate(\"readOnlyProp\", function() { return this.alternateProp; }),\n *\t\t\t\tset: createjs.deprecate(\"readOnlyProp\", function(val) { this.alternateProp = val; })\n *\t\t});\n *\t} catch (e) {}\n *\n * @method deprecate\n * @param {Function} [fallbackMethod=null] A method to call when the deprecated method is used. See the example for how\n * @param {String} [name=null] The name of the method or property to display in the console warning.\n * to deprecate properties.\n * @return {Function} If a fallbackMethod is supplied, returns a closure that will call the fallback method after\n * logging the warning in the console.\n */\ncreatejs.deprecate = function(fallbackMethod, name) {\n\t\"use strict\";\n\treturn function() {\n\t\tvar msg = \"Deprecated property or method '\"+name+\"'. See docs for info.\";\n\t\tconsole && (console.warn ? console.warn(msg) : console.log(msg));\n\t\treturn fallbackMethod && fallbackMethod.apply(this, arguments);\n\t}\n};\n\n//##############################################################################\n// proxy.js\n//##############################################################################\n\nwindow.createjs = window.createjs||{};\n\n/**\n * Various utilities that the CreateJS Suite uses. Utilities are created as separate files, and will be available on the\n * createjs namespace directly.\n *\n * <h4>Example</h4>\n *\n *      myObject.addEventListener(\"change\", createjs.proxy(myMethod, scope));\n *\n * @class Utility Methods\n * @main Utility Methods\n */\n\n(function() {\n\t\"use strict\";\n\n\t/**\n\t * A function proxy for methods. By default, JavaScript methods do not maintain scope, so passing a method as a\n\t * callback will result in the method getting called in the scope of the caller. Using a proxy ensures that the\n\t * method gets called in the correct scope.\n\t *\n\t * Additional arguments can be passed that will be applied to the function when it is called.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      myObject.addEventListener(\"event\", createjs.proxy(myHandler, this, arg1, arg2));\n\t *\n\t *      function myHandler(arg1, arg2) {\n\t *           // This gets called when myObject.myCallback is executed.\n\t *      }\n\t *\n\t * @method proxy\n\t * @param {Function} method The function to call\n\t * @param {Object} scope The scope to call the method name on\n\t * @param {mixed} [arg] * Arguments that are appended to the callback for additional params.\n\t * @public\n\t * @static\n\t */\n\tcreatejs.proxy = function (method, scope) {\n\t\tvar aArgs = Array.prototype.slice.call(arguments, 2);\n\t\treturn function () {\n\t\t\treturn method.apply(scope, Array.prototype.slice.call(arguments, 0).concat(aArgs));\n\t\t};\n\t}\n\n}());\n\n//##############################################################################\n// indexOf.js\n//##############################################################################\n\nwindow.createjs = window.createjs||{};\n\n/**\n * @class Utility Methods\n */\n\n/**\n * Finds the first occurrence of a specified value searchElement in the passed in array, and returns the index of\n * that value.  Returns -1 if value is not found.\n *\n *      var i = createjs.indexOf(myArray, myElementToFind);\n *\n * @method indexOf\n * @param {Array} array Array to search for searchElement\n * @param searchElement Element to find in array.\n * @return {Number} The first index of searchElement in array.\n */\ncreatejs.indexOf = function (array, searchElement){\n\t\"use strict\";\n\n\tfor (var i = 0,l=array.length; i < l; i++) {\n\t\tif (searchElement === array[i]) {\n\t\t\treturn i;\n\t\t}\n\t}\n\treturn -1;\n};\n\n//##############################################################################\n// Event.js\n//##############################################################################\n\nwindow.createjs = window.createjs||{};\n\n(function() {\n\t\"use strict\";\n\n// constructor:\n\t/**\n\t * Contains properties and methods shared by all events for use with\n\t * {{#crossLink \"EventDispatcher\"}}{{/crossLink}}.\n\t * \n\t * Note that Event objects are often reused, so you should never\n\t * rely on an event object's state outside of the call stack it was received in.\n\t * @class Event\n\t * @param {String} type The event type.\n\t * @param {Boolean} bubbles Indicates whether the event will bubble through the display list.\n\t * @param {Boolean} cancelable Indicates whether the default behaviour of this event can be cancelled.\n\t * @constructor\n\t **/\n\tfunction Event(type, bubbles, cancelable) {\n\t\t\n\t\n\t// public properties:\n\t\t/**\n\t\t * The type of event.\n\t\t * @property type\n\t\t * @type String\n\t\t **/\n\t\tthis.type = type;\n\t\n\t\t/**\n\t\t * The object that generated an event.\n\t\t * @property target\n\t\t * @type Object\n\t\t * @default null\n\t\t * @readonly\n\t\t*/\n\t\tthis.target = null;\n\t\n\t\t/**\n\t\t * The current target that a bubbling event is being dispatched from. For non-bubbling events, this will\n\t\t * always be the same as target. For example, if childObj.parent = parentObj, and a bubbling event\n\t\t * is generated from childObj, then a listener on parentObj would receive the event with\n\t\t * target=childObj (the original target) and currentTarget=parentObj (where the listener was added).\n\t\t * @property currentTarget\n\t\t * @type Object\n\t\t * @default null\n\t\t * @readonly\n\t\t*/\n\t\tthis.currentTarget = null;\n\t\n\t\t/**\n\t\t * For bubbling events, this indicates the current event phase:<OL>\n\t\t * \t<LI> capture phase: starting from the top parent to the target</LI>\n\t\t * \t<LI> at target phase: currently being dispatched from the target</LI>\n\t\t * \t<LI> bubbling phase: from the target to the top parent</LI>\n\t\t * </OL>\n\t\t * @property eventPhase\n\t\t * @type Number\n\t\t * @default 0\n\t\t * @readonly\n\t\t*/\n\t\tthis.eventPhase = 0;\n\t\n\t\t/**\n\t\t * Indicates whether the event will bubble through the display list.\n\t\t * @property bubbles\n\t\t * @type Boolean\n\t\t * @default false\n\t\t * @readonly\n\t\t*/\n\t\tthis.bubbles = !!bubbles;\n\t\n\t\t/**\n\t\t * Indicates whether the default behaviour of this event can be cancelled via\n\t\t * {{#crossLink \"Event/preventDefault\"}}{{/crossLink}}. This is set via the Event constructor.\n\t\t * @property cancelable\n\t\t * @type Boolean\n\t\t * @default false\n\t\t * @readonly\n\t\t*/\n\t\tthis.cancelable = !!cancelable;\n\t\n\t\t/**\n\t\t * The epoch time at which this event was created.\n\t\t * @property timeStamp\n\t\t * @type Number\n\t\t * @default 0\n\t\t * @readonly\n\t\t*/\n\t\tthis.timeStamp = (new Date()).getTime();\n\t\n\t\t/**\n\t\t * Indicates if {{#crossLink \"Event/preventDefault\"}}{{/crossLink}} has been called\n\t\t * on this event.\n\t\t * @property defaultPrevented\n\t\t * @type Boolean\n\t\t * @default false\n\t\t * @readonly\n\t\t*/\n\t\tthis.defaultPrevented = false;\n\t\n\t\t/**\n\t\t * Indicates if {{#crossLink \"Event/stopPropagation\"}}{{/crossLink}} or\n\t\t * {{#crossLink \"Event/stopImmediatePropagation\"}}{{/crossLink}} has been called on this event.\n\t\t * @property propagationStopped\n\t\t * @type Boolean\n\t\t * @default false\n\t\t * @readonly\n\t\t*/\n\t\tthis.propagationStopped = false;\n\t\n\t\t/**\n\t\t * Indicates if {{#crossLink \"Event/stopImmediatePropagation\"}}{{/crossLink}} has been called\n\t\t * on this event.\n\t\t * @property immediatePropagationStopped\n\t\t * @type Boolean\n\t\t * @default false\n\t\t * @readonly\n\t\t*/\n\t\tthis.immediatePropagationStopped = false;\n\t\t\n\t\t/**\n\t\t * Indicates if {{#crossLink \"Event/remove\"}}{{/crossLink}} has been called on this event.\n\t\t * @property removed\n\t\t * @type Boolean\n\t\t * @default false\n\t\t * @readonly\n\t\t*/\n\t\tthis.removed = false;\n\t}\n\tvar p = Event.prototype;\n\n// public methods:\n\t/**\n\t * Sets {{#crossLink \"Event/defaultPrevented\"}}{{/crossLink}} to true if the event is cancelable.\n\t * Mirrors the DOM level 2 event standard. In general, cancelable events that have `preventDefault()` called will\n\t * cancel the default behaviour associated with the event.\n\t * @method preventDefault\n\t **/\n\tp.preventDefault = function() {\n\t\tthis.defaultPrevented = this.cancelable&&true;\n\t};\n\n\t/**\n\t * Sets {{#crossLink \"Event/propagationStopped\"}}{{/crossLink}} to true.\n\t * Mirrors the DOM event standard.\n\t * @method stopPropagation\n\t **/\n\tp.stopPropagation = function() {\n\t\tthis.propagationStopped = true;\n\t};\n\n\t/**\n\t * Sets {{#crossLink \"Event/propagationStopped\"}}{{/crossLink}} and\n\t * {{#crossLink \"Event/immediatePropagationStopped\"}}{{/crossLink}} to true.\n\t * Mirrors the DOM event standard.\n\t * @method stopImmediatePropagation\n\t **/\n\tp.stopImmediatePropagation = function() {\n\t\tthis.immediatePropagationStopped = this.propagationStopped = true;\n\t};\n\t\n\t/**\n\t * Causes the active listener to be removed via removeEventListener();\n\t * \n\t * \t\tmyBtn.addEventListener(\"click\", function(evt) {\n\t * \t\t\t// do stuff...\n\t * \t\t\tevt.remove(); // removes this listener.\n\t * \t\t});\n\t * \n\t * @method remove\n\t **/\n\tp.remove = function() {\n\t\tthis.removed = true;\n\t};\n\t\n\t/**\n\t * Returns a clone of the Event instance.\n\t * @method clone\n\t * @return {Event} a clone of the Event instance.\n\t **/\n\tp.clone = function() {\n\t\treturn new Event(this.type, this.bubbles, this.cancelable);\n\t};\n\t\n\t/**\n\t * Provides a chainable shortcut method for setting a number of properties on the instance.\n\t *\n\t * @method set\n\t * @param {Object} props A generic object containing properties to copy to the instance.\n\t * @return {Event} Returns the instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t*/\n\tp.set = function(props) {\n\t\tfor (var n in props) { this[n] = props[n]; }\n\t\treturn this;\n\t};\n\n\t/**\n\t * Returns a string representation of this object.\n\t * @method toString\n\t * @return {String} a string representation of the instance.\n\t **/\n\tp.toString = function() {\n\t\treturn \"[Event (type=\"+this.type+\")]\";\n\t};\n\n\tcreatejs.Event = Event;\n}());\n\n//##############################################################################\n// ErrorEvent.js\n//##############################################################################\n\nwindow.createjs = window.createjs||{};\n\n(function() {\n\t\"use strict\";\n\n\t/**\n\t * A general error {{#crossLink \"Event\"}}{{/crossLink}}, that describes an error that occurred, as well as any details.\n\t * @class ErrorEvent\n\t * @param {String} [title] The error title\n\t * @param {String} [message] The error description\n\t * @param {Object} [data] Additional error data\n\t * @constructor\n\t */\n\tfunction ErrorEvent(title, message, data) {\n\t\tthis.Event_constructor(\"error\");\n\n\t\t/**\n\t\t * The short error title, which indicates the type of error that occurred.\n\t\t * @property title\n\t\t * @type String\n\t\t */\n\t\tthis.title = title;\n\n\t\t/**\n\t\t * The verbose error message, containing details about the error.\n\t\t * @property message\n\t\t * @type String\n\t\t */\n\t\tthis.message = message;\n\n\t\t/**\n\t\t * Additional data attached to an error.\n\t\t * @property data\n\t\t * @type {Object}\n\t\t */\n\t\tthis.data = data;\n\t}\n\n\tvar p = createjs.extend(ErrorEvent, createjs.Event);\n\n\tp.clone = function() {\n\t\treturn new createjs.ErrorEvent(this.title, this.message, this.data);\n\t};\n\n\tcreatejs.ErrorEvent = createjs.promote(ErrorEvent, \"Event\");\n\n}());\n\n//##############################################################################\n// EventDispatcher.js\n//##############################################################################\n\nwindow.createjs = window.createjs||{};\r\n\r\n(function() {\r\n\t\"use strict\";\r\n\r\n\r\n// constructor:\r\n\t/**\r\n\t * EventDispatcher provides methods for managing queues of event listeners and dispatching events.\r\n\t *\r\n\t * You can either extend EventDispatcher or mix its methods into an existing prototype or instance by using the\r\n\t * EventDispatcher {{#crossLink \"EventDispatcher/initialize\"}}{{/crossLink}} method.\r\n\t * \r\n\t * Together with the CreateJS Event class, EventDispatcher provides an extended event model that is based on the\r\n\t * DOM Level 2 event model, including addEventListener, removeEventListener, and dispatchEvent. It supports\r\n\t * bubbling / capture, preventDefault, stopPropagation, stopImmediatePropagation, and handleEvent.\r\n\t * \r\n\t * EventDispatcher also exposes a {{#crossLink \"EventDispatcher/on\"}}{{/crossLink}} method, which makes it easier\r\n\t * to create scoped listeners, listeners that only run once, and listeners with associated arbitrary data. The \r\n\t * {{#crossLink \"EventDispatcher/off\"}}{{/crossLink}} method is merely an alias to\r\n\t * {{#crossLink \"EventDispatcher/removeEventListener\"}}{{/crossLink}}.\r\n\t * \r\n\t * Another addition to the DOM Level 2 model is the {{#crossLink \"EventDispatcher/removeAllEventListeners\"}}{{/crossLink}}\r\n\t * method, which can be used to listeners for all events, or listeners for a specific event. The Event object also \r\n\t * includes a {{#crossLink \"Event/remove\"}}{{/crossLink}} method which removes the active listener.\r\n\t *\r\n\t * <h4>Example</h4>\r\n\t * Add EventDispatcher capabilities to the \"MyClass\" class.\r\n\t *\r\n\t *      EventDispatcher.initialize(MyClass.prototype);\r\n\t *\r\n\t * Add an event (see {{#crossLink \"EventDispatcher/addEventListener\"}}{{/crossLink}}).\r\n\t *\r\n\t *      instance.addEventListener(\"eventName\", handlerMethod);\r\n\t *      function handlerMethod(event) {\r\n\t *          console.log(event.target + \" Was Clicked\");\r\n\t *      }\r\n\t *\r\n\t * <b>Maintaining proper scope</b><br />\r\n\t * Scope (ie. \"this\") can be be a challenge with events. Using the {{#crossLink \"EventDispatcher/on\"}}{{/crossLink}}\r\n\t * method to subscribe to events simplifies this.\r\n\t *\r\n\t *      instance.addEventListener(\"click\", function(event) {\r\n\t *          console.log(instance == this); // false, scope is ambiguous.\r\n\t *      });\r\n\t *      \r\n\t *      instance.on(\"click\", function(event) {\r\n\t *          console.log(instance == this); // true, \"on\" uses dispatcher scope by default.\r\n\t *      });\r\n\t * \r\n\t * If you want to use addEventListener instead, you may want to use function.bind() or a similar proxy to manage\r\n\t * scope.\r\n\t *\r\n\t * <b>Browser support</b>\r\n\t * The event model in CreateJS can be used separately from the suite in any project, however the inheritance model\r\n\t * requires modern browsers (IE9+).\r\n\t *      \r\n\t *\r\n\t * @class EventDispatcher\r\n\t * @constructor\r\n\t **/\r\n\tfunction EventDispatcher() {\r\n\t\r\n\t\r\n\t// private properties:\r\n\t\t/**\r\n\t\t * @protected\r\n\t\t * @property _listeners\r\n\t\t * @type Object\r\n\t\t **/\r\n\t\tthis._listeners = null;\r\n\t\t\r\n\t\t/**\r\n\t\t * @protected\r\n\t\t * @property _captureListeners\r\n\t\t * @type Object\r\n\t\t **/\r\n\t\tthis._captureListeners = null;\r\n\t}\r\n\tvar p = EventDispatcher.prototype;\r\n\r\n// static public methods:\r\n\t/**\r\n\t * Static initializer to mix EventDispatcher methods into a target object or prototype.\r\n\t * \r\n\t * \t\tEventDispatcher.initialize(MyClass.prototype); // add to the prototype of the class\r\n\t * \t\tEventDispatcher.initialize(myObject); // add to a specific instance\r\n\t * \r\n\t * @method initialize\r\n\t * @static\r\n\t * @param {Object} target The target object to inject EventDispatcher methods into. This can be an instance or a\r\n\t * prototype.\r\n\t **/\r\n\tEventDispatcher.initialize = function(target) {\r\n\t\ttarget.addEventListener = p.addEventListener;\r\n\t\ttarget.on = p.on;\r\n\t\ttarget.removeEventListener = target.off =  p.removeEventListener;\r\n\t\ttarget.removeAllEventListeners = p.removeAllEventListeners;\r\n\t\ttarget.hasEventListener = p.hasEventListener;\r\n\t\ttarget.dispatchEvent = p.dispatchEvent;\r\n\t\ttarget._dispatchEvent = p._dispatchEvent;\r\n\t\ttarget.willTrigger = p.willTrigger;\r\n\t};\r\n\t\r\n\r\n// public methods:\r\n\t/**\r\n\t * Adds the specified event listener. Note that adding multiple listeners to the same function will result in\r\n\t * multiple callbacks getting fired.\r\n\t *\r\n\t * <h4>Example</h4>\r\n\t *\r\n\t *      displayObject.addEventListener(\"click\", handleClick);\r\n\t *      function handleClick(event) {\r\n\t *         // Click happened.\r\n\t *      }\r\n\t *\r\n\t * @method addEventListener\r\n\t * @param {String} type The string type of the event.\r\n\t * @param {Function | Object} listener An object with a handleEvent method, or a function that will be called when\r\n\t * the event is dispatched.\r\n\t * @param {Boolean} [useCapture] For events that bubble, indicates whether to listen for the event in the capture or bubbling/target phase.\r\n\t * @return {Function | Object} Returns the listener for chaining or assignment.\r\n\t **/\r\n\tp.addEventListener = function(type, listener, useCapture) {\r\n\t\tvar listeners;\r\n\t\tif (useCapture) {\r\n\t\t\tlisteners = this._captureListeners = this._captureListeners||{};\r\n\t\t} else {\r\n\t\t\tlisteners = this._listeners = this._listeners||{};\r\n\t\t}\r\n\t\tvar arr = listeners[type];\r\n\t\tif (arr) { this.removeEventListener(type, listener, useCapture); }\r\n\t\tarr = listeners[type]; // remove may have deleted the array\r\n\t\tif (!arr) { listeners[type] = [listener];  }\r\n\t\telse { arr.push(listener); }\r\n\t\treturn listener;\r\n\t};\r\n\t\r\n\t/**\r\n\t * A shortcut method for using addEventListener that makes it easier to specify an execution scope, have a listener\r\n\t * only run once, associate arbitrary data with the listener, and remove the listener.\r\n\t * \r\n\t * This method works by creating an anonymous wrapper function and subscribing it with addEventListener.\r\n\t * The wrapper function is returned for use with `removeEventListener` (or `off`).\r\n\t * \r\n\t * <b>IMPORTANT:</b> To remove a listener added with `on`, you must pass in the returned wrapper function as the listener, or use\r\n\t * {{#crossLink \"Event/remove\"}}{{/crossLink}}. Likewise, each time you call `on` a NEW wrapper function is subscribed, so multiple calls\r\n\t * to `on` with the same params will create multiple listeners.\r\n\t * \r\n\t * <h4>Example</h4>\r\n\t * \r\n\t * \t\tvar listener = myBtn.on(\"click\", handleClick, null, false, {count:3});\r\n\t * \t\tfunction handleClick(evt, data) {\r\n\t * \t\t\tdata.count -= 1;\r\n\t * \t\t\tconsole.log(this == myBtn); // true - scope defaults to the dispatcher\r\n\t * \t\t\tif (data.count == 0) {\r\n\t * \t\t\t\talert(\"clicked 3 times!\");\r\n\t * \t\t\t\tmyBtn.off(\"click\", listener);\r\n\t * \t\t\t\t// alternately: evt.remove();\r\n\t * \t\t\t}\r\n\t * \t\t}\r\n\t * \r\n\t * @method on\r\n\t * @param {String} type The string type of the event.\r\n\t * @param {Function | Object} listener An object with a handleEvent method, or a function that will be called when\r\n\t * the event is dispatched.\r\n\t * @param {Object} [scope] The scope to execute the listener in. Defaults to the dispatcher/currentTarget for function listeners, and to the listener itself for object listeners (ie. using handleEvent).\r\n\t * @param {Boolean} [once=false] If true, the listener will remove itself after the first time it is triggered.\r\n\t * @param {*} [data] Arbitrary data that will be included as the second parameter when the listener is called.\r\n\t * @param {Boolean} [useCapture=false] For events that bubble, indicates whether to listen for the event in the capture or bubbling/target phase.\r\n\t * @return {Function} Returns the anonymous function that was created and assigned as the listener. This is needed to remove the listener later using .removeEventListener.\r\n\t **/\r\n\tp.on = function(type, listener, scope, once, data, useCapture) {\r\n\t\tif (listener.handleEvent) {\r\n\t\t\tscope = scope||listener;\r\n\t\t\tlistener = listener.handleEvent;\r\n\t\t}\r\n\t\tscope = scope||this;\r\n\t\treturn this.addEventListener(type, function(evt) {\r\n\t\t\t\tlistener.call(scope, evt, data);\r\n\t\t\t\tonce&&evt.remove();\r\n\t\t\t}, useCapture);\r\n\t};\r\n\r\n\t/**\r\n\t * Removes the specified event listener.\r\n\t *\r\n\t * <b>Important Note:</b> that you must pass the exact function reference used when the event was added. If a proxy\r\n\t * function, or function closure is used as the callback, the proxy/closure reference must be used - a new proxy or\r\n\t * closure will not work.\r\n\t *\r\n\t * <h4>Example</h4>\r\n\t *\r\n\t *      displayObject.removeEventListener(\"click\", handleClick);\r\n\t *\r\n\t * @method removeEventListener\r\n\t * @param {String} type The string type of the event.\r\n\t * @param {Function | Object} listener The listener function or object.\r\n\t * @param {Boolean} [useCapture] For events that bubble, indicates whether to listen for the event in the capture or bubbling/target phase.\r\n\t **/\r\n\tp.removeEventListener = function(type, listener, useCapture) {\r\n\t\tvar listeners = useCapture ? this._captureListeners : this._listeners;\r\n\t\tif (!listeners) { return; }\r\n\t\tvar arr = listeners[type];\r\n\t\tif (!arr) { return; }\r\n\t\tfor (var i=0,l=arr.length; i<l; i++) {\r\n\t\t\tif (arr[i] == listener) {\r\n\t\t\t\tif (l==1) { delete(listeners[type]); } // allows for faster checks.\r\n\t\t\t\telse { arr.splice(i,1); }\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\t\r\n\t/**\r\n\t * A shortcut to the removeEventListener method, with the same parameters and return value. This is a companion to the\r\n\t * .on method.\r\n\t * \r\n\t * <b>IMPORTANT:</b> To remove a listener added with `on`, you must pass in the returned wrapper function as the listener. See \r\n\t * {{#crossLink \"EventDispatcher/on\"}}{{/crossLink}} for an example.\r\n\t *\r\n\t * @method off\r\n\t * @param {String} type The string type of the event.\r\n\t * @param {Function | Object} listener The listener function or object.\r\n\t * @param {Boolean} [useCapture] For events that bubble, indicates whether to listen for the event in the capture or bubbling/target phase.\r\n\t **/\r\n\tp.off = p.removeEventListener;\r\n\r\n\t/**\r\n\t * Removes all listeners for the specified type, or all listeners of all types.\r\n\t *\r\n\t * <h4>Example</h4>\r\n\t *\r\n\t *      // Remove all listeners\r\n\t *      displayObject.removeAllEventListeners();\r\n\t *\r\n\t *      // Remove all click listeners\r\n\t *      displayObject.removeAllEventListeners(\"click\");\r\n\t *\r\n\t * @method removeAllEventListeners\r\n\t * @param {String} [type] The string type of the event. If omitted, all listeners for all types will be removed.\r\n\t **/\r\n\tp.removeAllEventListeners = function(type) {\r\n\t\tif (!type) { this._listeners = this._captureListeners = null; }\r\n\t\telse {\r\n\t\t\tif (this._listeners) { delete(this._listeners[type]); }\r\n\t\t\tif (this._captureListeners) { delete(this._captureListeners[type]); }\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * Dispatches the specified event to all listeners.\r\n\t *\r\n\t * <h4>Example</h4>\r\n\t *\r\n\t *      // Use a string event\r\n\t *      this.dispatchEvent(\"complete\");\r\n\t *\r\n\t *      // Use an Event instance\r\n\t *      var event = new createjs.Event(\"progress\");\r\n\t *      this.dispatchEvent(event);\r\n\t *\r\n\t * @method dispatchEvent\r\n\t * @param {Object | String | Event} eventObj An object with a \"type\" property, or a string type.\r\n\t * While a generic object will work, it is recommended to use a CreateJS Event instance. If a string is used,\r\n\t * dispatchEvent will construct an Event instance if necessary with the specified type. This latter approach can\r\n\t * be used to avoid event object instantiation for non-bubbling events that may not have any listeners.\r\n\t * @param {Boolean} [bubbles] Specifies the `bubbles` value when a string was passed to eventObj.\r\n\t * @param {Boolean} [cancelable] Specifies the `cancelable` value when a string was passed to eventObj.\r\n\t * @return {Boolean} Returns false if `preventDefault()` was called on a cancelable event, true otherwise.\r\n\t **/\r\n\tp.dispatchEvent = function(eventObj, bubbles, cancelable) {\r\n\t\tif (typeof eventObj == \"string\") {\r\n\t\t\t// skip everything if there's no listeners and it doesn't bubble:\r\n\t\t\tvar listeners = this._listeners;\r\n\t\t\tif (!bubbles && (!listeners || !listeners[eventObj])) { return true; }\r\n\t\t\teventObj = new createjs.Event(eventObj, bubbles, cancelable);\r\n\t\t} else if (eventObj.target && eventObj.clone) {\r\n\t\t\t// redispatching an active event object, so clone it:\r\n\t\t\teventObj = eventObj.clone();\r\n\t\t}\r\n\t\t\r\n\t\t// TODO: it would be nice to eliminate this. Maybe in favour of evtObj instanceof Event? Or !!evtObj.createEvent\r\n\t\ttry { eventObj.target = this; } catch (e) {} // try/catch allows redispatching of native events\r\n\r\n\t\tif (!eventObj.bubbles || !this.parent) {\r\n\t\t\tthis._dispatchEvent(eventObj, 2);\r\n\t\t} else {\r\n\t\t\tvar top=this, list=[top];\r\n\t\t\twhile (top.parent) { list.push(top = top.parent); }\r\n\t\t\tvar i, l=list.length;\r\n\r\n\t\t\t// capture & atTarget\r\n\t\t\tfor (i=l-1; i>=0 && !eventObj.propagationStopped; i--) {\r\n\t\t\t\tlist[i]._dispatchEvent(eventObj, 1+(i==0));\r\n\t\t\t}\r\n\t\t\t// bubbling\r\n\t\t\tfor (i=1; i<l && !eventObj.propagationStopped; i++) {\r\n\t\t\t\tlist[i]._dispatchEvent(eventObj, 3);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn !eventObj.defaultPrevented;\r\n\t};\r\n\r\n\t/**\r\n\t * Indicates whether there is at least one listener for the specified event type.\r\n\t * @method hasEventListener\r\n\t * @param {String} type The string type of the event.\r\n\t * @return {Boolean} Returns true if there is at least one listener for the specified event.\r\n\t **/\r\n\tp.hasEventListener = function(type) {\r\n\t\tvar listeners = this._listeners, captureListeners = this._captureListeners;\r\n\t\treturn !!((listeners && listeners[type]) || (captureListeners && captureListeners[type]));\r\n\t};\r\n\t\r\n\t/**\r\n\t * Indicates whether there is at least one listener for the specified event type on this object or any of its\r\n\t * ancestors (parent, parent's parent, etc). A return value of true indicates that if a bubbling event of the\r\n\t * specified type is dispatched from this object, it will trigger at least one listener.\r\n\t * \r\n\t * This is similar to {{#crossLink \"EventDispatcher/hasEventListener\"}}{{/crossLink}}, but it searches the entire\r\n\t * event flow for a listener, not just this object.\r\n\t * @method willTrigger\r\n\t * @param {String} type The string type of the event.\r\n\t * @return {Boolean} Returns `true` if there is at least one listener for the specified event.\r\n\t **/\r\n\tp.willTrigger = function(type) {\r\n\t\tvar o = this;\r\n\t\twhile (o) {\r\n\t\t\tif (o.hasEventListener(type)) { return true; }\r\n\t\t\to = o.parent;\r\n\t\t}\r\n\t\treturn false;\r\n\t};\r\n\r\n\t/**\r\n\t * @method toString\r\n\t * @return {String} a string representation of the instance.\r\n\t **/\r\n\tp.toString = function() {\r\n\t\treturn \"[EventDispatcher]\";\r\n\t};\r\n\r\n\r\n// private methods:\r\n\t/**\r\n\t * @method _dispatchEvent\r\n\t * @param {Object | Event} eventObj\r\n\t * @param {Object} eventPhase\r\n\t * @protected\r\n\t **/\r\n\tp._dispatchEvent = function(eventObj, eventPhase) {\r\n\t\tvar l, arr, listeners = (eventPhase <= 2) ? this._captureListeners : this._listeners;\r\n\t\tif (eventObj && listeners && (arr = listeners[eventObj.type]) && (l=arr.length)) {\r\n\t\t\ttry { eventObj.currentTarget = this; } catch (e) {}\r\n\t\t\ttry { eventObj.eventPhase = eventPhase|0; } catch (e) {}\r\n\t\t\teventObj.removed = false;\r\n\t\t\t\r\n\t\t\tarr = arr.slice(); // to avoid issues with items being removed or added during the dispatch\r\n\t\t\tfor (var i=0; i<l && !eventObj.immediatePropagationStopped; i++) {\r\n\t\t\t\tvar o = arr[i];\r\n\t\t\t\tif (o.handleEvent) { o.handleEvent(eventObj); }\r\n\t\t\t\telse { o(eventObj); }\r\n\t\t\t\tif (eventObj.removed) {\r\n\t\t\t\t\tthis.off(eventObj.type, o, eventPhase==1);\r\n\t\t\t\t\teventObj.removed = false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (eventPhase === 2) { this._dispatchEvent(eventObj, 2.1); }\r\n\t};\r\n\r\n\r\n\tcreatejs.EventDispatcher = EventDispatcher;\r\n}());\n\n//##############################################################################\n// ProgressEvent.js\n//##############################################################################\n\nwindow.createjs = window.createjs || {};\n\n(function (scope) {\n\t\"use strict\";\n\n\t// constructor\n\t/**\n\t * A CreateJS {{#crossLink \"Event\"}}{{/crossLink}} that is dispatched when progress changes.\n\t * @class ProgressEvent\n\t * @param {Number} loaded The amount that has been loaded. This can be any number relative to the total.\n\t * @param {Number} [total=1] The total amount that will load. This will default to 1, so if the `loaded` value is\n\t * a percentage (between 0 and 1), it can be omitted.\n\t * @todo Consider having this event be a \"fileprogress\" event as well\n\t * @constructor\n\t */\n\tfunction ProgressEvent(loaded, total) {\n\t\tthis.Event_constructor(\"progress\");\n\n\t\t/**\n\t\t * The amount that has been loaded (out of a total amount)\n\t\t * @property loaded\n\t\t * @type {Number}\n\t\t */\n\t\tthis.loaded = loaded;\n\n\t\t/**\n\t\t * The total \"size\" of the load.\n\t\t * @property total\n\t\t * @type {Number}\n\t\t * @default 1\n\t\t */\n\t\tthis.total = (total == null) ? 1 : total;\n\n\t\t/**\n\t\t * The percentage (out of 1) that the load has been completed. This is calculated using `loaded/total`.\n\t\t * @property progress\n\t\t * @type {Number}\n\t\t * @default 0\n\t\t */\n\t\tthis.progress = (total == 0) ? 0 : this.loaded / this.total;\n\t};\n\n\tvar p = createjs.extend(ProgressEvent, createjs.Event);\n\n\t/**\n\t * Returns a clone of the ProgressEvent instance.\n\t * @method clone\n\t * @return {ProgressEvent} a clone of the Event instance.\n\t **/\n\tp.clone = function() {\n\t\treturn new createjs.ProgressEvent(this.loaded, this.total);\n\t};\n\n\tcreatejs.ProgressEvent = createjs.promote(ProgressEvent, \"Event\");\n\n}(window));\n\n//##############################################################################\n// json3.js\n//##############################################################################\n\n/*! JSON v3.3.2 | http://bestiejs.github.io/json3 | Copyright 2012-2014, Kit Cambridge | http://kit.mit-license.org */\n;(function () {\n  // Detect the `define` function exposed by asynchronous module loaders. The\n  // strict `define` check is necessary for compatibility with `r.js`.\n  var isLoader = typeof define === \"function\" && define.amd;\n\n  // A set of types used to distinguish objects from primitives.\n  var objectTypes = {\n    \"function\": true,\n    \"object\": true\n  };\n\n  // Detect the `exports` object exposed by CommonJS implementations.\n  var freeExports = objectTypes[typeof exports] && exports && !exports.nodeType && exports;\n\n  // Use the `global` object exposed by Node (including Browserify via\n  // `insert-module-globals`), Narwhal, and Ringo as the default context,\n  // and the `window` object in browsers. Rhino exports a `global` function\n  // instead.\n  var root = objectTypes[typeof window] && window || this,\n      freeGlobal = freeExports && objectTypes[typeof module] && module && !module.nodeType && typeof global == \"object\" && global;\n\n  if (freeGlobal && (freeGlobal[\"global\"] === freeGlobal || freeGlobal[\"window\"] === freeGlobal || freeGlobal[\"self\"] === freeGlobal)) {\n    root = freeGlobal;\n  }\n\n  // Public: Initializes JSON 3 using the given `context` object, attaching the\n  // `stringify` and `parse` functions to the specified `exports` object.\n  function runInContext(context, exports) {\n    context || (context = root[\"Object\"]());\n    exports || (exports = root[\"Object\"]());\n\n    // Native constructor aliases.\n    var Number = context[\"Number\"] || root[\"Number\"],\n        String = context[\"String\"] || root[\"String\"],\n        Object = context[\"Object\"] || root[\"Object\"],\n        Date = context[\"Date\"] || root[\"Date\"],\n        SyntaxError = context[\"SyntaxError\"] || root[\"SyntaxError\"],\n        TypeError = context[\"TypeError\"] || root[\"TypeError\"],\n        Math = context[\"Math\"] || root[\"Math\"],\n        nativeJSON = context[\"JSON\"] || root[\"JSON\"];\n\n    // Delegate to the native `stringify` and `parse` implementations.\n    if (typeof nativeJSON == \"object\" && nativeJSON) {\n      exports.stringify = nativeJSON.stringify;\n      exports.parse = nativeJSON.parse;\n    }\n\n    // Convenience aliases.\n    var objectProto = Object.prototype,\n        getClass = objectProto.toString,\n        isProperty, forEach, undef;\n\n    // Test the `Date#getUTC*` methods. Based on work by @Yaffle.\n    var isExtended = new Date(-3509827334573292);\n    try {\n      // The `getUTCFullYear`, `Month`, and `Date` methods return nonsensical\n      // results for certain dates in Opera >= 10.53.\n      isExtended = isExtended.getUTCFullYear() == -109252 && isExtended.getUTCMonth() === 0 && isExtended.getUTCDate() === 1 &&\n        // Safari < 2.0.2 stores the internal millisecond time value correctly,\n        // but clips the values returned by the date methods to the range of\n        // signed 32-bit integers ([-2 ** 31, 2 ** 31 - 1]).\n        isExtended.getUTCHours() == 10 && isExtended.getUTCMinutes() == 37 && isExtended.getUTCSeconds() == 6 && isExtended.getUTCMilliseconds() == 708;\n    } catch (exception) {}\n\n    // Internal: Determines whether the native `JSON.stringify` and `parse`\n    // implementations are spec-compliant. Based on work by Ken Snyder.\n    function has(name) {\n      if (has[name] !== undef) {\n        // Return cached feature test result.\n        return has[name];\n      }\n      var isSupported;\n      if (name == \"bug-string-char-index\") {\n        // IE <= 7 doesn't support accessing string characters using square\n        // bracket notation. IE 8 only supports this for primitives.\n        isSupported = \"a\"[0] != \"a\";\n      } else if (name == \"json\") {\n        // Indicates whether both `JSON.stringify` and `JSON.parse` are\n        // supported.\n        isSupported = has(\"json-stringify\") && has(\"json-parse\");\n      } else {\n        var value, serialized = '{\"a\":[1,true,false,null,\"\\\\u0000\\\\b\\\\n\\\\f\\\\r\\\\t\"]}';\n        // Test `JSON.stringify`.\n        if (name == \"json-stringify\") {\n          var stringify = exports.stringify, stringifySupported = typeof stringify == \"function\" && isExtended;\n          if (stringifySupported) {\n            // A test function object with a custom `toJSON` method.\n            (value = function () {\n              return 1;\n            }).toJSON = value;\n            try {\n              stringifySupported =\n                // Firefox 3.1b1 and b2 serialize string, number, and boolean\n                // primitives as object literals.\n                stringify(0) === \"0\" &&\n                // FF 3.1b1, b2, and JSON 2 serialize wrapped primitives as object\n                // literals.\n                stringify(new Number()) === \"0\" &&\n                stringify(new String()) == '\"\"' &&\n                // FF 3.1b1, 2 throw an error if the value is `null`, `undefined`, or\n                // does not define a canonical JSON representation (this applies to\n                // objects with `toJSON` properties as well, *unless* they are nested\n                // within an object or array).\n                stringify(getClass) === undef &&\n                // IE 8 serializes `undefined` as `\"undefined\"`. Safari <= 5.1.7 and\n                // FF 3.1b3 pass this test.\n                stringify(undef) === undef &&\n                // Safari <= 5.1.7 and FF 3.1b3 throw `Error`s and `TypeError`s,\n                // respectively, if the value is omitted entirely.\n                stringify() === undef &&\n                // FF 3.1b1, 2 throw an error if the given value is not a number,\n                // string, array, object, Boolean, or `null` literal. This applies to\n                // objects with custom `toJSON` methods as well, unless they are nested\n                // inside object or array literals. YUI 3.0.0b1 ignores custom `toJSON`\n                // methods entirely.\n                stringify(value) === \"1\" &&\n                stringify([value]) == \"[1]\" &&\n                // Prototype <= 1.6.1 serializes `[undefined]` as `\"[]\"` instead of\n                // `\"[null]\"`.\n                stringify([undef]) == \"[null]\" &&\n                // YUI 3.0.0b1 fails to serialize `null` literals.\n                stringify(null) == \"null\" &&\n                // FF 3.1b1, 2 halts serialization if an array contains a function:\n                // `[1, true, getClass, 1]` serializes as \"[1,true,],\". FF 3.1b3\n                // elides non-JSON values from objects and arrays, unless they\n                // define custom `toJSON` methods.\n                stringify([undef, getClass, null]) == \"[null,null,null]\" &&\n                // Simple serialization test. FF 3.1b1 uses Unicode escape sequences\n                // where character escape codes are expected (e.g., `\\b` => `\\u0008`).\n                stringify({ \"a\": [value, true, false, null, \"\\x00\\b\\n\\f\\r\\t\"] }) == serialized &&\n                // FF 3.1b1 and b2 ignore the `filter` and `width` arguments.\n                stringify(null, value) === \"1\" &&\n                stringify([1, 2], null, 1) == \"[\\n 1,\\n 2\\n]\" &&\n                // JSON 2, Prototype <= 1.7, and older WebKit builds incorrectly\n                // serialize extended years.\n                stringify(new Date(-8.64e15)) == '\"-271821-04-20T00:00:00.000Z\"' &&\n                // The milliseconds are optional in ES 5, but required in 5.1.\n                stringify(new Date(8.64e15)) == '\"+275760-09-13T00:00:00.000Z\"' &&\n                // Firefox <= 11.0 incorrectly serializes years prior to 0 as negative\n                // four-digit years instead of six-digit years. Credits: @Yaffle.\n                stringify(new Date(-621987552e5)) == '\"-000001-01-01T00:00:00.000Z\"' &&\n                // Safari <= 5.1.5 and Opera >= 10.53 incorrectly serialize millisecond\n                // values less than 1000. Credits: @Yaffle.\n                stringify(new Date(-1)) == '\"1969-12-31T23:59:59.999Z\"';\n            } catch (exception) {\n              stringifySupported = false;\n            }\n          }\n          isSupported = stringifySupported;\n        }\n        // Test `JSON.parse`.\n        if (name == \"json-parse\") {\n          var parse = exports.parse;\n          if (typeof parse == \"function\") {\n            try {\n              // FF 3.1b1, b2 will throw an exception if a bare literal is provided.\n              // Conforming implementations should also coerce the initial argument to\n              // a string prior to parsing.\n              if (parse(\"0\") === 0 && !parse(false)) {\n                // Simple parsing test.\n                value = parse(serialized);\n                var parseSupported = value[\"a\"].length == 5 && value[\"a\"][0] === 1;\n                if (parseSupported) {\n                  try {\n                    // Safari <= 5.1.2 and FF 3.1b1 allow unescaped tabs in strings.\n                    parseSupported = !parse('\"\\t\"');\n                  } catch (exception) {}\n                  if (parseSupported) {\n                    try {\n                      // FF 4.0 and 4.0.1 allow leading `+` signs and leading\n                      // decimal points. FF 4.0, 4.0.1, and IE 9-10 also allow\n                      // certain octal literals.\n                      parseSupported = parse(\"01\") !== 1;\n                    } catch (exception) {}\n                  }\n                  if (parseSupported) {\n                    try {\n                      // FF 4.0, 4.0.1, and Rhino 1.7R3-R4 allow trailing decimal\n                      // points. These environments, along with FF 3.1b1 and 2,\n                      // also allow trailing commas in JSON objects and arrays.\n                      parseSupported = parse(\"1.\") !== 1;\n                    } catch (exception) {}\n                  }\n                }\n              }\n            } catch (exception) {\n              parseSupported = false;\n            }\n          }\n          isSupported = parseSupported;\n        }\n      }\n      return has[name] = !!isSupported;\n    }\n\n    if (!has(\"json\")) {\n      // Common `[[Class]]` name aliases.\n      var functionClass = \"[object Function]\",\n          dateClass = \"[object Date]\",\n          numberClass = \"[object Number]\",\n          stringClass = \"[object String]\",\n          arrayClass = \"[object Array]\",\n          booleanClass = \"[object Boolean]\";\n\n      // Detect incomplete support for accessing string characters by index.\n      var charIndexBuggy = has(\"bug-string-char-index\");\n\n      // Define additional utility methods if the `Date` methods are buggy.\n      if (!isExtended) {\n        var floor = Math.floor;\n        // A mapping between the months of the year and the number of days between\n        // January 1st and the first of the respective month.\n        var Months = [0, 31, 59, 90, 120, 151, 181, 212, 243, 273, 304, 334];\n        // Internal: Calculates the number of days between the Unix epoch and the\n        // first day of the given month.\n        var getDay = function (year, month) {\n          return Months[month] + 365 * (year - 1970) + floor((year - 1969 + (month = +(month > 1))) / 4) - floor((year - 1901 + month) / 100) + floor((year - 1601 + month) / 400);\n        };\n      }\n\n      // Internal: Determines if a property is a direct property of the given\n      // object. Delegates to the native `Object#hasOwnProperty` method.\n      if (!(isProperty = objectProto.hasOwnProperty)) {\n        isProperty = function (property) {\n          var members = {}, constructor;\n          if ((members.__proto__ = null, members.__proto__ = {\n            // The *proto* property cannot be set multiple times in recent\n            // versions of Firefox and SeaMonkey.\n            \"toString\": 1\n          }, members).toString != getClass) {\n            // Safari <= 2.0.3 doesn't implement `Object#hasOwnProperty`, but\n            // supports the mutable *proto* property.\n            isProperty = function (property) {\n              // Capture and break the object's prototype chain (see section 8.6.2\n              // of the ES 5.1 spec). The parenthesized expression prevents an\n              // unsafe transformation by the Closure Compiler.\n              var original = this.__proto__, result = property in (this.__proto__ = null, this);\n              // Restore the original prototype chain.\n              this.__proto__ = original;\n              return result;\n            };\n          } else {\n            // Capture a reference to the top-level `Object` constructor.\n            constructor = members.constructor;\n            // Use the `constructor` property to simulate `Object#hasOwnProperty` in\n            // other environments.\n            isProperty = function (property) {\n              var parent = (this.constructor || constructor).prototype;\n              return property in this && !(property in parent && this[property] === parent[property]);\n            };\n          }\n          members = null;\n          return isProperty.call(this, property);\n        };\n      }\n\n      // Internal: Normalizes the `for...in` iteration algorithm across\n      // environments. Each enumerated key is yielded to a `callback` function.\n      forEach = function (object, callback) {\n        var size = 0, Properties, members, property;\n\n        // Tests for bugs in the current environment's `for...in` algorithm. The\n        // `valueOf` property inherits the non-enumerable flag from\n        // `Object.prototype` in older versions of IE, Netscape, and Mozilla.\n        (Properties = function () {\n          this.valueOf = 0;\n        }).prototype.valueOf = 0;\n\n        // Iterate over a new instance of the `Properties` class.\n        members = new Properties();\n        for (property in members) {\n          // Ignore all properties inherited from `Object.prototype`.\n          if (isProperty.call(members, property)) {\n            size++;\n          }\n        }\n        Properties = members = null;\n\n        // Normalize the iteration algorithm.\n        if (!size) {\n          // A list of non-enumerable properties inherited from `Object.prototype`.\n          members = [\"valueOf\", \"toString\", \"toLocaleString\", \"propertyIsEnumerable\", \"isPrototypeOf\", \"hasOwnProperty\", \"constructor\"];\n          // IE <= 8, Mozilla 1.0, and Netscape 6.2 ignore shadowed non-enumerable\n          // properties.\n          forEach = function (object, callback) {\n            var isFunction = getClass.call(object) == functionClass, property, length;\n            var hasProperty = !isFunction && typeof object.constructor != \"function\" && objectTypes[typeof object.hasOwnProperty] && object.hasOwnProperty || isProperty;\n            for (property in object) {\n              // Gecko <= 1.0 enumerates the `prototype` property of functions under\n              // certain conditions; IE does not.\n              if (!(isFunction && property == \"prototype\") && hasProperty.call(object, property)) {\n                callback(property);\n              }\n            }\n            // Manually invoke the callback for each non-enumerable property.\n            for (length = members.length; property = members[--length]; hasProperty.call(object, property) && callback(property));\n          };\n        } else if (size == 2) {\n          // Safari <= 2.0.4 enumerates shadowed properties twice.\n          forEach = function (object, callback) {\n            // Create a set of iterated properties.\n            var members = {}, isFunction = getClass.call(object) == functionClass, property;\n            for (property in object) {\n              // Store each property name to prevent double enumeration. The\n              // `prototype` property of functions is not enumerated due to cross-\n              // environment inconsistencies.\n              if (!(isFunction && property == \"prototype\") && !isProperty.call(members, property) && (members[property] = 1) && isProperty.call(object, property)) {\n                callback(property);\n              }\n            }\n          };\n        } else {\n          // No bugs detected; use the standard `for...in` algorithm.\n          forEach = function (object, callback) {\n            var isFunction = getClass.call(object) == functionClass, property, isConstructor;\n            for (property in object) {\n              if (!(isFunction && property == \"prototype\") && isProperty.call(object, property) && !(isConstructor = property === \"constructor\")) {\n                callback(property);\n              }\n            }\n            // Manually invoke the callback for the `constructor` property due to\n            // cross-environment inconsistencies.\n            if (isConstructor || isProperty.call(object, (property = \"constructor\"))) {\n              callback(property);\n            }\n          };\n        }\n        return forEach(object, callback);\n      };\n\n      // Public: Serializes a JavaScript `value` as a JSON string. The optional\n      // `filter` argument may specify either a function that alters how object and\n      // array members are serialized, or an array of strings and numbers that\n      // indicates which properties should be serialized. The optional `width`\n      // argument may be either a string or number that specifies the indentation\n      // level of the output.\n      if (!has(\"json-stringify\")) {\n        // Internal: A map of control characters and their escaped equivalents.\n        var Escapes = {\n          92: \"\\\\\\\\\",\n          34: '\\\\\"',\n          8: \"\\\\b\",\n          12: \"\\\\f\",\n          10: \"\\\\n\",\n          13: \"\\\\r\",\n          9: \"\\\\t\"\n        };\n\n        // Internal: Converts `value` into a zero-padded string such that its\n        // length is at least equal to `width`. The `width` must be <= 6.\n        var leadingZeroes = \"000000\";\n        var toPaddedString = function (width, value) {\n          // The `|| 0` expression is necessary to work around a bug in\n          // Opera <= 7.54u2 where `0 == -0`, but `String(-0) !== \"0\"`.\n          return (leadingZeroes + (value || 0)).slice(-width);\n        };\n\n        // Internal: Double-quotes a string `value`, replacing all ASCII control\n        // characters (characters with code unit values between 0 and 31) with\n        // their escaped equivalents. This is an implementation of the\n        // `Quote(value)` operation defined in ES 5.1 section 15.12.3.\n        var unicodePrefix = \"\\\\u00\";\n        var quote = function (value) {\n          var result = '\"', index = 0, length = value.length, useCharIndex = !charIndexBuggy || length > 10;\n          var symbols = useCharIndex && (charIndexBuggy ? value.split(\"\") : value);\n          for (; index < length; index++) {\n            var charCode = value.charCodeAt(index);\n            // If the character is a control character, append its Unicode or\n            // shorthand escape sequence; otherwise, append the character as-is.\n            switch (charCode) {\n              case 8: case 9: case 10: case 12: case 13: case 34: case 92:\n                result += Escapes[charCode];\n                break;\n              default:\n                if (charCode < 32) {\n                  result += unicodePrefix + toPaddedString(2, charCode.toString(16));\n                  break;\n                }\n                result += useCharIndex ? symbols[index] : value.charAt(index);\n            }\n          }\n          return result + '\"';\n        };\n\n        // Internal: Recursively serializes an object. Implements the\n        // `Str(key, holder)`, `JO(value)`, and `JA(value)` operations.\n        var serialize = function (property, object, callback, properties, whitespace, indentation, stack) {\n          var value, className, year, month, date, time, hours, minutes, seconds, milliseconds, results, element, index, length, prefix, result;\n          try {\n            // Necessary for host object support.\n            value = object[property];\n          } catch (exception) {}\n          if (typeof value == \"object\" && value) {\n            className = getClass.call(value);\n            if (className == dateClass && !isProperty.call(value, \"toJSON\")) {\n              if (value > -1 / 0 && value < 1 / 0) {\n                // Dates are serialized according to the `Date#toJSON` method\n                // specified in ES 5.1 section 15.9.5.44. See section 15.9.1.15\n                // for the ISO 8601 date time string format.\n                if (getDay) {\n                  // Manually compute the year, month, date, hours, minutes,\n                  // seconds, and milliseconds if the `getUTC*` methods are\n                  // buggy. Adapted from @Yaffle's `date-shim` project.\n                  date = floor(value / 864e5);\n                  for (year = floor(date / 365.2425) + 1970 - 1; getDay(year + 1, 0) <= date; year++);\n                  for (month = floor((date - getDay(year, 0)) / 30.42); getDay(year, month + 1) <= date; month++);\n                  date = 1 + date - getDay(year, month);\n                  // The `time` value specifies the time within the day (see ES\n                  // 5.1 section 15.9.1.2). The formula `(A % B + B) % B` is used\n                  // to compute `A modulo B`, as the `%` operator does not\n                  // correspond to the `modulo` operation for negative numbers.\n                  time = (value % 864e5 + 864e5) % 864e5;\n                  // The hours, minutes, seconds, and milliseconds are obtained by\n                  // decomposing the time within the day. See section 15.9.1.10.\n                  hours = floor(time / 36e5) % 24;\n                  minutes = floor(time / 6e4) % 60;\n                  seconds = floor(time / 1e3) % 60;\n                  milliseconds = time % 1e3;\n                } else {\n                  year = value.getUTCFullYear();\n                  month = value.getUTCMonth();\n                  date = value.getUTCDate();\n                  hours = value.getUTCHours();\n                  minutes = value.getUTCMinutes();\n                  seconds = value.getUTCSeconds();\n                  milliseconds = value.getUTCMilliseconds();\n                }\n                // Serialize extended years correctly.\n                value = (year <= 0 || year >= 1e4 ? (year < 0 ? \"-\" : \"+\") + toPaddedString(6, year < 0 ? -year : year) : toPaddedString(4, year)) +\n                  \"-\" + toPaddedString(2, month + 1) + \"-\" + toPaddedString(2, date) +\n                  // Months, dates, hours, minutes, and seconds should have two\n                  // digits; milliseconds should have three.\n                  \"T\" + toPaddedString(2, hours) + \":\" + toPaddedString(2, minutes) + \":\" + toPaddedString(2, seconds) +\n                  // Milliseconds are optional in ES 5.0, but required in 5.1.\n                  \".\" + toPaddedString(3, milliseconds) + \"Z\";\n              } else {\n                value = null;\n              }\n            } else if (typeof value.toJSON == \"function\" && ((className != numberClass && className != stringClass && className != arrayClass) || isProperty.call(value, \"toJSON\"))) {\n              // Prototype <= 1.6.1 adds non-standard `toJSON` methods to the\n              // `Number`, `String`, `Date`, and `Array` prototypes. JSON 3\n              // ignores all `toJSON` methods on these objects unless they are\n              // defined directly on an instance.\n              value = value.toJSON(property);\n            }\n          }\n          if (callback) {\n            // If a replacement function was provided, call it to obtain the value\n            // for serialization.\n            value = callback.call(object, property, value);\n          }\n          if (value === null) {\n            return \"null\";\n          }\n          className = getClass.call(value);\n          if (className == booleanClass) {\n            // Booleans are represented literally.\n            return \"\" + value;\n          } else if (className == numberClass) {\n            // JSON numbers must be finite. `Infinity` and `NaN` are serialized as\n            // `\"null\"`.\n            return value > -1 / 0 && value < 1 / 0 ? \"\" + value : \"null\";\n          } else if (className == stringClass) {\n            // Strings are double-quoted and escaped.\n            return quote(\"\" + value);\n          }\n          // Recursively serialize objects and arrays.\n          if (typeof value == \"object\") {\n            // Check for cyclic structures. This is a linear search; performance\n            // is inversely proportional to the number of unique nested objects.\n            for (length = stack.length; length--;) {\n              if (stack[length] === value) {\n                // Cyclic structures cannot be serialized by `JSON.stringify`.\n                throw TypeError();\n              }\n            }\n            // Add the object to the stack of traversed objects.\n            stack.push(value);\n            results = [];\n            // Save the current indentation level and indent one additional level.\n            prefix = indentation;\n            indentation += whitespace;\n            if (className == arrayClass) {\n              // Recursively serialize array elements.\n              for (index = 0, length = value.length; index < length; index++) {\n                element = serialize(index, value, callback, properties, whitespace, indentation, stack);\n                results.push(element === undef ? \"null\" : element);\n              }\n              result = results.length ? (whitespace ? \"[\\n\" + indentation + results.join(\",\\n\" + indentation) + \"\\n\" + prefix + \"]\" : (\"[\" + results.join(\",\") + \"]\")) : \"[]\";\n            } else {\n              // Recursively serialize object members. Members are selected from\n              // either a user-specified list of property names, or the object\n              // itself.\n              forEach(properties || value, function (property) {\n                var element = serialize(property, value, callback, properties, whitespace, indentation, stack);\n                if (element !== undef) {\n                  // According to ES 5.1 section 15.12.3: \"If `gap` {whitespace}\n                  // is not the empty string, let `member` {quote(property) + \":\"}\n                  // be the concatenation of `member` and the `space` character.\"\n                  // The \"`space` character\" refers to the literal space\n                  // character, not the `space` {width} argument provided to\n                  // `JSON.stringify`.\n                  results.push(quote(property) + \":\" + (whitespace ? \" \" : \"\") + element);\n                }\n              });\n              result = results.length ? (whitespace ? \"{\\n\" + indentation + results.join(\",\\n\" + indentation) + \"\\n\" + prefix + \"}\" : (\"{\" + results.join(\",\") + \"}\")) : \"{}\";\n            }\n            // Remove the object from the traversed object stack.\n            stack.pop();\n            return result;\n          }\n        };\n\n        // Public: `JSON.stringify`. See ES 5.1 section 15.12.3.\n        exports.stringify = function (source, filter, width) {\n          var whitespace, callback, properties, className;\n          if (objectTypes[typeof filter] && filter) {\n            if ((className = getClass.call(filter)) == functionClass) {\n              callback = filter;\n            } else if (className == arrayClass) {\n              // Convert the property names array into a makeshift set.\n              properties = {};\n              for (var index = 0, length = filter.length, value; index < length; value = filter[index++], ((className = getClass.call(value)), className == stringClass || className == numberClass) && (properties[value] = 1));\n            }\n          }\n          if (width) {\n            if ((className = getClass.call(width)) == numberClass) {\n              // Convert the `width` to an integer and create a string containing\n              // `width` number of space characters.\n              if ((width -= width % 1) > 0) {\n                for (whitespace = \"\", width > 10 && (width = 10); whitespace.length < width; whitespace += \" \");\n              }\n            } else if (className == stringClass) {\n              whitespace = width.length <= 10 ? width : width.slice(0, 10);\n            }\n          }\n          // Opera <= 7.54u2 discards the values associated with empty string keys\n          // (`\"\"`) only if they are used directly within an object member list\n          // (e.g., `!(\"\" in { \"\": 1})`).\n          return serialize(\"\", (value = {}, value[\"\"] = source, value), callback, properties, whitespace, \"\", []);\n        };\n      }\n\n      // Public: Parses a JSON source string.\n      if (!has(\"json-parse\")) {\n        var fromCharCode = String.fromCharCode;\n\n        // Internal: A map of escaped control characters and their unescaped\n        // equivalents.\n        var Unescapes = {\n          92: \"\\\\\",\n          34: '\"',\n          47: \"/\",\n          98: \"\\b\",\n          116: \"\\t\",\n          110: \"\\n\",\n          102: \"\\f\",\n          114: \"\\r\"\n        };\n\n        // Internal: Stores the parser state.\n        var Index, Source;\n\n        // Internal: Resets the parser state and throws a `SyntaxError`.\n        var abort = function () {\n          Index = Source = null;\n          throw SyntaxError();\n        };\n\n        // Internal: Returns the next token, or `\"$\"` if the parser has reached\n        // the end of the source string. A token may be a string, number, `null`\n        // literal, or Boolean literal.\n        var lex = function () {\n          var source = Source, length = source.length, value, begin, position, isSigned, charCode;\n          while (Index < length) {\n            charCode = source.charCodeAt(Index);\n            switch (charCode) {\n              case 9: case 10: case 13: case 32:\n                // Skip whitespace tokens, including tabs, carriage returns, line\n                // feeds, and space characters.\n                Index++;\n                break;\n              case 123: case 125: case 91: case 93: case 58: case 44:\n                // Parse a punctuator token (`{`, `}`, `[`, `]`, `:`, or `,`) at\n                // the current position.\n                value = charIndexBuggy ? source.charAt(Index) : source[Index];\n                Index++;\n                return value;\n              case 34:\n                // `\"` delimits a JSON string; advance to the next character and\n                // begin parsing the string. String tokens are prefixed with the\n                // sentinel `@` character to distinguish them from punctuators and\n                // end-of-string tokens.\n                for (value = \"@\", Index++; Index < length;) {\n                  charCode = source.charCodeAt(Index);\n                  if (charCode < 32) {\n                    // Unescaped ASCII control characters (those with a code unit\n                    // less than the space character) are not permitted.\n                    abort();\n                  } else if (charCode == 92) {\n                    // A reverse solidus (`\\`) marks the beginning of an escaped\n                    // control character (including `\"`, `\\`, and `/`) or Unicode\n                    // escape sequence.\n                    charCode = source.charCodeAt(++Index);\n                    switch (charCode) {\n                      case 92: case 34: case 47: case 98: case 116: case 110: case 102: case 114:\n                        // Revive escaped control characters.\n                        value += Unescapes[charCode];\n                        Index++;\n                        break;\n                      case 117:\n                        // `\\u` marks the beginning of a Unicode escape sequence.\n                        // Advance to the first character and validate the\n                        // four-digit code point.\n                        begin = ++Index;\n                        for (position = Index + 4; Index < position; Index++) {\n                          charCode = source.charCodeAt(Index);\n                          // A valid sequence comprises four hexdigits (case-\n                          // insensitive) that form a single hexadecimal value.\n                          if (!(charCode >= 48 && charCode <= 57 || charCode >= 97 && charCode <= 102 || charCode >= 65 && charCode <= 70)) {\n                            // Invalid Unicode escape sequence.\n                            abort();\n                          }\n                        }\n                        // Revive the escaped character.\n                        value += fromCharCode(\"0x\" + source.slice(begin, Index));\n                        break;\n                      default:\n                        // Invalid escape sequence.\n                        abort();\n                    }\n                  } else {\n                    if (charCode == 34) {\n                      // An unescaped double-quote character marks the end of the\n                      // string.\n                      break;\n                    }\n                    charCode = source.charCodeAt(Index);\n                    begin = Index;\n                    // Optimize for the common case where a string is valid.\n                    while (charCode >= 32 && charCode != 92 && charCode != 34) {\n                      charCode = source.charCodeAt(++Index);\n                    }\n                    // Append the string as-is.\n                    value += source.slice(begin, Index);\n                  }\n                }\n                if (source.charCodeAt(Index) == 34) {\n                  // Advance to the next character and return the revived string.\n                  Index++;\n                  return value;\n                }\n                // Unterminated string.\n                abort();\n              default:\n                // Parse numbers and literals.\n                begin = Index;\n                // Advance past the negative sign, if one is specified.\n                if (charCode == 45) {\n                  isSigned = true;\n                  charCode = source.charCodeAt(++Index);\n                }\n                // Parse an integer or floating-point value.\n                if (charCode >= 48 && charCode <= 57) {\n                  // Leading zeroes are interpreted as octal literals.\n                  if (charCode == 48 && ((charCode = source.charCodeAt(Index + 1)), charCode >= 48 && charCode <= 57)) {\n                    // Illegal octal literal.\n                    abort();\n                  }\n                  isSigned = false;\n                  // Parse the integer component.\n                  for (; Index < length && ((charCode = source.charCodeAt(Index)), charCode >= 48 && charCode <= 57); Index++);\n                  // Floats cannot contain a leading decimal point; however, this\n                  // case is already accounted for by the parser.\n                  if (source.charCodeAt(Index) == 46) {\n                    position = ++Index;\n                    // Parse the decimal component.\n                    for (; position < length && ((charCode = source.charCodeAt(position)), charCode >= 48 && charCode <= 57); position++);\n                    if (position == Index) {\n                      // Illegal trailing decimal.\n                      abort();\n                    }\n                    Index = position;\n                  }\n                  // Parse exponents. The `e` denoting the exponent is\n                  // case-insensitive.\n                  charCode = source.charCodeAt(Index);\n                  if (charCode == 101 || charCode == 69) {\n                    charCode = source.charCodeAt(++Index);\n                    // Skip past the sign following the exponent, if one is\n                    // specified.\n                    if (charCode == 43 || charCode == 45) {\n                      Index++;\n                    }\n                    // Parse the exponential component.\n                    for (position = Index; position < length && ((charCode = source.charCodeAt(position)), charCode >= 48 && charCode <= 57); position++);\n                    if (position == Index) {\n                      // Illegal empty exponent.\n                      abort();\n                    }\n                    Index = position;\n                  }\n                  // Coerce the parsed value to a JavaScript number.\n                  return +source.slice(begin, Index);\n                }\n                // A negative sign may only precede numbers.\n                if (isSigned) {\n                  abort();\n                }\n                // `true`, `false`, and `null` literals.\n                if (source.slice(Index, Index + 4) == \"true\") {\n                  Index += 4;\n                  return true;\n                } else if (source.slice(Index, Index + 5) == \"false\") {\n                  Index += 5;\n                  return false;\n                } else if (source.slice(Index, Index + 4) == \"null\") {\n                  Index += 4;\n                  return null;\n                }\n                // Unrecognized token.\n                abort();\n            }\n          }\n          // Return the sentinel `$` character if the parser has reached the end\n          // of the source string.\n          return \"$\";\n        };\n\n        // Internal: Parses a JSON `value` token.\n        var get = function (value) {\n          var results, hasMembers;\n          if (value == \"$\") {\n            // Unexpected end of input.\n            abort();\n          }\n          if (typeof value == \"string\") {\n            if ((charIndexBuggy ? value.charAt(0) : value[0]) == \"@\") {\n              // Remove the sentinel `@` character.\n              return value.slice(1);\n            }\n            // Parse object and array literals.\n            if (value == \"[\") {\n              // Parses a JSON array, returning a new JavaScript array.\n              results = [];\n              for (;; hasMembers || (hasMembers = true)) {\n                value = lex();\n                // A closing square bracket marks the end of the array literal.\n                if (value == \"]\") {\n                  break;\n                }\n                // If the array literal contains elements, the current token\n                // should be a comma separating the previous element from the\n                // next.\n                if (hasMembers) {\n                  if (value == \",\") {\n                    value = lex();\n                    if (value == \"]\") {\n                      // Unexpected trailing `,` in array literal.\n                      abort();\n                    }\n                  } else {\n                    // A `,` must separate each array element.\n                    abort();\n                  }\n                }\n                // Elisions and leading commas are not permitted.\n                if (value == \",\") {\n                  abort();\n                }\n                results.push(get(value));\n              }\n              return results;\n            } else if (value == \"{\") {\n              // Parses a JSON object, returning a new JavaScript object.\n              results = {};\n              for (;; hasMembers || (hasMembers = true)) {\n                value = lex();\n                // A closing curly brace marks the end of the object literal.\n                if (value == \"}\") {\n                  break;\n                }\n                // If the object literal contains members, the current token\n                // should be a comma separator.\n                if (hasMembers) {\n                  if (value == \",\") {\n                    value = lex();\n                    if (value == \"}\") {\n                      // Unexpected trailing `,` in object literal.\n                      abort();\n                    }\n                  } else {\n                    // A `,` must separate each object member.\n                    abort();\n                  }\n                }\n                // Leading commas are not permitted, object property names must be\n                // double-quoted strings, and a `:` must separate each property\n                // name and value.\n                if (value == \",\" || typeof value != \"string\" || (charIndexBuggy ? value.charAt(0) : value[0]) != \"@\" || lex() != \":\") {\n                  abort();\n                }\n                results[value.slice(1)] = get(lex());\n              }\n              return results;\n            }\n            // Unexpected token encountered.\n            abort();\n          }\n          return value;\n        };\n\n        // Internal: Updates a traversed object member.\n        var update = function (source, property, callback) {\n          var element = walk(source, property, callback);\n          if (element === undef) {\n            delete source[property];\n          } else {\n            source[property] = element;\n          }\n        };\n\n        // Internal: Recursively traverses a parsed JSON object, invoking the\n        // `callback` function for each value. This is an implementation of the\n        // `Walk(holder, name)` operation defined in ES 5.1 section 15.12.2.\n        var walk = function (source, property, callback) {\n          var value = source[property], length;\n          if (typeof value == \"object\" && value) {\n            // `forEach` can't be used to traverse an array in Opera <= 8.54\n            // because its `Object#hasOwnProperty` implementation returns `false`\n            // for array indices (e.g., `![1, 2, 3].hasOwnProperty(\"0\")`).\n            if (getClass.call(value) == arrayClass) {\n              for (length = value.length; length--;) {\n                update(value, length, callback);\n              }\n            } else {\n              forEach(value, function (property) {\n                update(value, property, callback);\n              });\n            }\n          }\n          return callback.call(source, property, value);\n        };\n\n        // Public: `JSON.parse`. See ES 5.1 section 15.12.2.\n        exports.parse = function (source, callback) {\n          var result, value;\n          Index = 0;\n          Source = \"\" + source;\n          result = get(lex());\n          // If a JSON string contains multiple tokens, it is invalid.\n          if (lex() != \"$\") {\n            abort();\n          }\n          // Reset the parser state.\n          Index = Source = null;\n          return callback && getClass.call(callback) == functionClass ? walk((value = {}, value[\"\"] = result, value), \"\", callback) : result;\n        };\n      }\n    }\n\n    exports[\"runInContext\"] = runInContext;\n    return exports;\n  }\n\n  if (freeExports && !isLoader) {\n    // Export for CommonJS environments.\n    runInContext(root, freeExports);\n  } else {\n    // Export for web browsers and JavaScript engines.\n    var nativeJSON = root.JSON,\n        previousJSON = root[\"JSON3\"],\n        isRestored = false;\n\n    var JSON3 = runInContext(root, (root[\"JSON3\"] = {\n      // Public: Restores the original value of the global `JSON` object and\n      // returns a reference to the `JSON3` object.\n      \"noConflict\": function () {\n        if (!isRestored) {\n          isRestored = true;\n          root.JSON = nativeJSON;\n          root[\"JSON3\"] = previousJSON;\n          nativeJSON = previousJSON = null;\n        }\n        return JSON3;\n      }\n    }));\n\n    root.JSON = {\n      \"parse\": JSON3.parse,\n      \"stringify\": JSON3.stringify\n    };\n  }\n\n  // Export for asynchronous module loaders.\n  if (isLoader) {\n    define(function () {\n      return JSON3;\n    });\n  }\n}).call(this);\n\n//##############################################################################\n// Elements.js\n//##############################################################################\n\n(function () {\n\n\t/**\n\t * Convenience methods for creating various elements used by PrelaodJS.\n\t *\n\t * @class DomUtils\n\t */\n\tvar s = {};\n\n\ts.a = function() {\n\t\treturn s.el(\"a\");\n\t}\n\n\ts.svg = function() {\n\t\treturn s.el(\"svg\");\n\t}\n\n\ts.object = function() {\n\t\treturn s.el(\"object\");\n\t}\n\n\ts.image = function() {\n\t\treturn s.el(\"image\");\n\t}\n\n\ts.img = function() {\n\t\treturn s.el(\"img\");\n\t}\n\n\ts.style = function() {\n\t\treturn s.el(\"style\");\n\t}\n\n\ts.link = function() {\n\t\treturn s.el(\"link\");\n\t}\n\n\ts.script = function() {\n\t\treturn s.el(\"script\");\n\t}\n\n\ts.audio = function() {\n\t\treturn s.el(\"audio\");\n\t}\n\n\ts.video = function() {\n\t\treturn s.el(\"video\");\n\t}\n\n\ts.text = function(value) {\n\t\treturn document.createTextNode(value);\n\t}\n\n\ts.el = function(name) {\n\t\treturn document.createElement(name);\n\t}\n\n\tcreatejs.Elements = s;\n\n}());\n\n//##############################################################################\n// URLUtils.js\n//##############################################################################\n\n(function () {\n\n\t/**\n\t * Utilities that assist with parsing load items, and determining file types, etc.\n\t * @class URLUtils\n\t */\n\tvar s = {};\n\n\t/**\n\t * The Regular Expression used to test file URLS for an absolute path.\n\t * @property ABSOLUTE_PATH\n\t * @type {RegExp}\n\t * @static\n\t */\n\ts.ABSOLUTE_PATT = /^(?:\\w+:)?\\/{2}/i;\n\n\t/**\n\t * The Regular Expression used to test file URLS for a relative path.\n\t * @property RELATIVE_PATH\n\t * @type {RegExp}\n\t * @static\n\t */\n\ts.RELATIVE_PATT = (/^[./]*?\\//i);\n\n\t/**\n\t * The Regular Expression used to test file URLS for an extension. Note that URIs must already have the query string\n\t * removed.\n\t * @property EXTENSION_PATT\n\t * @type {RegExp}\n\t * @static\n\t */\n\ts.EXTENSION_PATT = /\\/?[^/]+\\.(\\w{1,5})$/i;\n\n\t/**\n\t * Parse a file path to determine the information we need to work with it. Currently, PreloadJS needs to know:\n\t * <ul>\n\t *     <li>If the path is absolute. Absolute paths start with a protocol (such as `http://`, `file://`, or\n\t *     `//networkPath`)</li>\n\t *     <li>If the path is relative. Relative paths start with `../` or `/path` (or similar)</li>\n\t *     <li>The file extension. This is determined by the filename with an extension. Query strings are dropped, and\n\t *     the file path is expected to follow the format `name.ext`.</li>\n\t * </ul>\n\t *\n\t * @method parseURI\n\t * @param {String} path\n\t * @returns {Object} An Object with an `absolute` and `relative` Boolean values,\n\t * \tthe pieces of the path (protocol, hostname, port, pathname, search, hash, host)\n\t * \tas well as an optional 'extension` property, which is the lowercase extension.\n\t *\n\t * @static\n\t */\n\ts.parseURI = function (path) {\n\t\tvar info = {\n\t\t\tabsolute: false,\n\t\t\trelative: false,\n\t\t\tprotocol: null,\n\t\t\thostname: null,\n\t\t\tport: null,\n\t\t\tpathname: null,\n\t\t\tsearch: null,\n\t\t\thash: null,\n\t\t\thost: null\n\t\t};\n\n\t\tif (path == null) { return info; }\n\n\t\t// Inject the path parts.\n\t\tvar parser = createjs.Elements.a();\n\t\tparser.href = path;\n\n\t\tfor (var n in info) {\n\t\t\tif (n in parser) {\n\t\t\t\tinfo[n] = parser[n];\n\t\t\t}\n\t\t}\n\n\t\t// Drop the query string\n\t\tvar queryIndex = path.indexOf(\"?\");\n\t\tif (queryIndex > -1) {\n\t\t\tpath = path.substr(0, queryIndex);\n\t\t}\n\n\t\t// Absolute\n\t\tvar match;\n\t\tif (s.ABSOLUTE_PATT.test(path)) {\n\t\t\tinfo.absolute = true;\n\n\t\t\t// Relative\n\t\t} else if (s.RELATIVE_PATT.test(path)) {\n\t\t\tinfo.relative = true;\n\t\t}\n\n\t\t// Extension\n\t\tif (match = path.match(s.EXTENSION_PATT)) {\n\t\t\tinfo.extension = match[1].toLowerCase();\n\t\t}\n\n\t\treturn info;\n\t};\n\n\t/**\n\t * Formats an object into a query string for either a POST or GET request.\n\t * @method formatQueryString\n\t * @param {Object} data The data to convert to a query string.\n\t * @param {Array} [query] Existing name/value pairs to append on to this query.\n\t * @static\n\t */\n\ts.formatQueryString = function (data, query) {\n\t\tif (data == null) {\n\t\t\tthrow new Error(\"You must specify data.\");\n\t\t}\n\t\tvar params = [];\n\t\tfor (var n in data) {\n\t\t\tparams.push(n + \"=\" + escape(data[n]));\n\t\t}\n\t\tif (query) {\n\t\t\tparams = params.concat(query);\n\t\t}\n\t\treturn params.join(\"&\");\n\t};\n\n\t/**\n\t * A utility method that builds a file path using a source and a data object, and formats it into a new path.\n\t * @method buildURI\n\t * @param {String} src The source path to add values to.\n\t * @param {Object} [data] Object used to append values to this request as a query string. Existing parameters on the\n\t * path will be preserved.\n\t * @returns {string} A formatted string that contains the path and the supplied parameters.\n\t * @static\n\t */\n\ts.buildURI = function (src, data) {\n\t\tif (data == null) {\n\t\t\treturn src;\n\t\t}\n\n\t\tvar query = [];\n\t\tvar idx = src.indexOf(\"?\");\n\n\t\tif (idx != -1) {\n\t\t\tvar q = src.slice(idx + 1);\n\t\t\tquery = query.concat(q.split(\"&\"));\n\t\t}\n\n\t\tif (idx != -1) {\n\t\t\treturn src.slice(0, idx) + \"?\" + this.formatQueryString(data, query);\n\t\t} else {\n\t\t\treturn src + \"?\" + this.formatQueryString(data, query);\n\t\t}\n\t};\n\n\t/**\n\t * @method isCrossDomain\n\t * @param {LoadItem|Object} item A load item with a `src` property.\n\t * @return {Boolean} If the load item is loading from a different domain than the current location.\n\t * @static\n\t */\n\ts.isCrossDomain = function (item) {\n\t\tvar target = createjs.Elements.a();\n\t\ttarget.href = item.src;\n\n\t\tvar host = createjs.Elements.a();\n\t\thost.href = location.href;\n\n\t\tvar crossdomain = (target.hostname != \"\") &&\n\t\t\t(target.port != host.port ||\n\t\t\ttarget.protocol != host.protocol ||\n\t\t\ttarget.hostname != host.hostname);\n\t\treturn crossdomain;\n\t};\n\n\t/**\n\t * @method isLocal\n\t * @param {LoadItem|Object} item A load item with a `src` property\n\t * @return {Boolean} If the load item is loading from the \"file:\" protocol. Assume that the host must be local as\n\t * well.\n\t * @static\n\t */\n\ts.isLocal = function (item) {\n\t\tvar target = createjs.Elements.a();\n\t\ttarget.href = item.src;\n\t\treturn target.hostname == \"\" && target.protocol == \"file:\";\n\t};\n\n\tcreatejs.URLUtils = s;\n\n}());\n\n//##############################################################################\n// DomUtils.js\n//##############################################################################\n\n(function () {\n\n\t/**\n\t * A few utilities for interacting with the dom.\n\t * @class DomUtils\n\t */\n\tvar s = {\n\t\tcontainer: null\n\t};\n\n\ts.appendToHead = function (el) {\n\t\ts.getHead().appendChild(el);\n\t}\n\n\ts.appendToBody = function (el) {\n\t\tif (s.container == null) {\n\t\t\ts.container = document.createElement(\"div\");\n\t\t\ts.container.id = \"preloadjs-container\";\n\t\t\tvar style = s.container.style;\n\t\t\tstyle.visibility = \"hidden\";\n\t\t\tstyle.position = \"absolute\";\n\t\t\tstyle.width = s.container.style.height = \"10px\";\n\t\t\tstyle.overflow = \"hidden\";\n\t\t\tstyle.transform = style.msTransform = style.webkitTransform = style.oTransform = \"translate(-10px, -10px)\"; //LM: Not working\n\t\t\ts.getBody().appendChild(s.container);\n\t\t}\n\t\ts.container.appendChild(el);\n\t}\n\n\ts.getHead = function () {\n\t\treturn document.head || document.getElementsByTagName(\"head\")[0];\n\t}\n\n\ts.getBody = function () {\n\t\treturn document.body || document.getElementsByTagName(\"body\")[0];\n\t}\n\n\ts.removeChild = function(el) {\n\t\tif (el.parent) {\n\t\t\tel.parent.removeChild(el);\n\t\t}\n\t}\n\n\t/**\n\t * Check if item is a valid HTMLImageElement\n\t * @method isImageTag\n\t * @param {Object} item\n\t * @returns {Boolean}\n\t * @static\n\t */\n\ts.isImageTag = function(item) {\n\t\treturn item instanceof HTMLImageElement;\n\t};\n\n\t/**\n\t * Check if item is a valid HTMLAudioElement\n\t * @method isAudioTag\n\t * @param {Object} item\n\t * @returns {Boolean}\n\t * @static\n\t */\n\ts.isAudioTag = function(item) {\n\t\tif (window.HTMLAudioElement) {\n\t\t\treturn item instanceof HTMLAudioElement;\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t};\n\n\t/**\n\t * Check if item is a valid HTMLVideoElement\n\t * @method isVideoTag\n\t * @param {Object} item\n\t * @returns {Boolean}\n\t * @static\n\t */\n\ts.isVideoTag = function(item) {\n\t\tif (window.HTMLVideoElement) {\n\t\t\treturn item instanceof HTMLVideoElement;\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t};\n\n\tcreatejs.DomUtils = s;\n\n}());\n\n//##############################################################################\n// DataUtils.js\n//##############################################################################\n\n(function () {\n\n\t/**\n\t * A few data utilities for formatting different data types.\n\t * @class DataUtils\n\t */\n\tvar s = {};\n\n\t// static methods\n\t/**\n\t * Parse XML using the DOM. This is required when preloading XML or SVG.\n\t * @method parseXML\n\t * @param {String} text The raw text or XML that is loaded by XHR.\n\t * @return {XML} An XML document\n\t * @static\n\t */\n\ts.parseXML = function (text) {\n\t\tvar xml = null;\n\t\t// CocoonJS does not support XML parsing with either method.\n\n\t\t// Most browsers will use DOMParser\n\t\t// IE fails on certain SVG files, so we have a fallback below.\n\t\ttry {\n\t\t\tif (window.DOMParser) {\n\t\t\t\tvar parser = new DOMParser();\n\t\t\t\txml = parser.parseFromString(text, \"text/xml\");\n\t\t\t}\n\t\t} catch (e) {\n\t\t}\n\n\t\t// Fallback for IE support.\n\t\tif (!xml) {\n\t\t\ttry {\n\t\t\t\txml = new ActiveXObject(\"Microsoft.XMLDOM\");\n\t\t\t\txml.async = false;\n\t\t\t\txml.loadXML(text);\n\t\t\t} catch (e) {\n\t\t\t\txml = null;\n\t\t\t}\n\t\t}\n\n\t\treturn xml;\n\t};\n\n\t/**\n\t * Parse a string into an Object.\n\t * @method parseJSON\n\t * @param {String} value The loaded JSON string\n\t * @returns {Object} A JavaScript object.\n\t */\n\ts.parseJSON = function (value) {\n\t\tif (value == null) {\n\t\t\treturn null;\n\t\t}\n\n\t\ttry {\n\t\t\treturn JSON.parse(value);\n\t\t} catch (e) {\n\t\t\t// TODO; Handle this with a custom error?\n\t\t\tthrow e;\n\t\t}\n\t};\n\n\tcreatejs.DataUtils = s;\n\n}());\n\n//##############################################################################\n// Types.js\n//##############################################################################\n\nwindow.createjs = window.createjs || {};\n\n(function() {\n\tvar s = {};\n\n\t/**\n\t * The preload type for generic binary types. Note that images are loaded as binary files when using XHR.\n\t * @property BINARY\n\t * @type {String}\n\t * @default binary\n\t * @static\n\t * @since 0.6.0\n\t */\n\ts.BINARY = \"binary\";\n\n\t/**\n\t * The preload type for css files. CSS files are loaded using a &lt;link&gt; when loaded with XHR, or a\n\t * &lt;style&gt; tag when loaded with tags.\n\t * @property CSS\n\t * @type {String}\n\t * @default css\n\t * @static\n\t * @since 0.6.0\n\t */\n\ts.CSS = \"css\";\n\n\t/**\n\t * The preload type for font files.\n\t * @property FONT\n\t * @type {String}\n\t * @default font\n\t * @static\n\t * @since 0.9.0\n\t */\n\ts.FONT = \"font\";\n\n\t/**\n\t * The preload type for fonts specified with CSS (such as Google fonts)\n\t * @property FONTCSS\n\t * @type {String}\n\t * @default fontcss\n\t * @static\n\t * @since 0.9.0\n\t */\n\ts.FONTCSS = \"fontcss\";\n\n\t/**\n\t * The preload type for image files, usually png, gif, or jpg/jpeg. Images are loaded into an &lt;image&gt; tag.\n\t * @property IMAGE\n\t * @type {String}\n\t * @default image\n\t * @static\n\t * @since 0.6.0\n\t */\n\ts.IMAGE = \"image\";\n\n\t/**\n\t * The preload type for javascript files, usually with the \"js\" file extension. JavaScript files are loaded into a\n\t * &lt;script&gt; tag.\n\t *\n\t * Since version 0.4.1+, due to how tag-loaded scripts work, all JavaScript files are automatically injected into\n\t * the body of the document to maintain parity between XHR and tag-loaded scripts. In version 0.4.0 and earlier,\n\t * only tag-loaded scripts are injected.\n\t * @property JAVASCRIPT\n\t * @type {String}\n\t * @default javascript\n\t * @static\n\t * @since 0.6.0\n\t */\n\ts.JAVASCRIPT = \"javascript\";\n\n\t/**\n\t * The preload type for json files, usually with the \"json\" file extension. JSON data is loaded and parsed into a\n\t * JavaScript object. Note that if a `callback` is present on the load item, the file will be loaded with JSONP,\n\t * no matter what the {{#crossLink \"LoadQueue/preferXHR:property\"}}{{/crossLink}} property is set to, and the JSON\n\t * must contain a matching wrapper function.\n\t * @property JSON\n\t * @type {String}\n\t * @default json\n\t * @static\n\t * @since 0.6.0\n\t */\n\ts.JSON = \"json\";\n\n\t/**\n\t * The preload type for jsonp files, usually with the \"json\" file extension. JSON data is loaded and parsed into a\n\t * JavaScript object. You are required to pass a callback parameter that matches the function wrapper in the JSON.\n\t * Note that JSONP will always be used if there is a callback present, no matter what the {{#crossLink \"LoadQueue/preferXHR:property\"}}{{/crossLink}}\n\t * property is set to.\n\t * @property JSONP\n\t * @type {String}\n\t * @default jsonp\n\t * @static\n\t * @since 0.6.0\n\t */\n\ts.JSONP = \"jsonp\";\n\n\t/**\n\t * The preload type for json-based manifest files, usually with the \"json\" file extension. The JSON data is loaded\n\t * and parsed into a JavaScript object. PreloadJS will then look for a \"manifest\" property in the JSON, which is an\n\t * Array of files to load, following the same format as the {{#crossLink \"LoadQueue/loadManifest\"}}{{/crossLink}}\n\t * method. If a \"callback\" is specified on the manifest object, then it will be loaded using JSONP instead,\n\t * regardless of what the {{#crossLink \"LoadQueue/preferXHR:property\"}}{{/crossLink}} property is set to.\n\t * @property MANIFEST\n\t * @type {String}\n\t * @default manifest\n\t * @static\n\t * @since 0.6.0\n\t */\n\ts.MANIFEST = \"manifest\";\n\n\t/**\n\t * The preload type for sound files, usually mp3, ogg, or wav. When loading via tags, audio is loaded into an\n\t * &lt;audio&gt; tag.\n\t * @property SOUND\n\t * @type {String}\n\t * @default sound\n\t * @static\n\t * @since 0.6.0\n\t */\n\ts.SOUND = \"sound\";\n\n\t/**\n\t * The preload type for video files, usually mp4, ts, or ogg. When loading via tags, video is loaded into an\n\t * &lt;video&gt; tag.\n\t * @property VIDEO\n\t * @type {String}\n\t * @default video\n\t * @static\n\t * @since 0.6.0\n\t */\n\ts.VIDEO = \"video\";\n\n\t/**\n\t * The preload type for SpriteSheet files. SpriteSheet files are JSON files that contain string image paths.\n\t * @property SPRITESHEET\n\t * @type {String}\n\t * @default spritesheet\n\t * @static\n\t * @since 0.6.0\n\t */\n\ts.SPRITESHEET = \"spritesheet\";\n\n\t/**\n\t * The preload type for SVG files.\n\t * @property SVG\n\t * @type {String}\n\t * @default svg\n\t * @static\n\t * @since 0.6.0\n\t */\n\ts.SVG = \"svg\";\n\n\t/**\n\t * The preload type for text files, which is also the default file type if the type can not be determined. Text is\n\t * loaded as raw text.\n\t * @property TEXT\n\t * @type {String}\n\t * @default text\n\t * @static\n\t * @since 0.6.0\n\t */\n\ts.TEXT = \"text\";\n\n\t/**\n\t * The preload type for xml files. XML is loaded into an XML document.\n\t * @property XML\n\t * @type {String}\n\t * @default xml\n\t * @static\n\t * @since 0.6.0\n\t */\n\ts.XML = \"xml\";\n\n\tcreatejs.Types = s;\n}());\n\n//##############################################################################\n// Methods.js\n//##############################################################################\n\nwindow.createjs = window.createjs || {};\n\n(function() {\n\tvar s = {};\n\n\t/**\n\t * Defines a POST request, use for a method value when loading data.\n\t * @property POST\n\t * @type {string}\n\t * @default post\n\t * @static\n\t */\n\ts.POST = \"POST\";\n\n\t/**\n\t * Defines a GET request, use for a method value when loading data.\n\t * @property GET\n\t * @type {string}\n\t * @default get\n\t * @static\n\t */\n\ts.GET = \"GET\";\n\n\tcreatejs.Methods = s;\n}());\n\n//##############################################################################\n// LoadItem.js\n//##############################################################################\n\nwindow.createjs = window.createjs || {};\n\n(function () {\n\t\"use strict\";\n\n\t/**\n\t * All loaders accept an item containing the properties defined in this class. If a raw object is passed instead,\n\t * it will not be affected, but it must contain at least a {{#crossLink \"src:property\"}}{{/crossLink}} property. A\n\t * string path or HTML tag is also acceptable, but it will be automatically converted to a LoadItem using the\n\t * {{#crossLink \"create\"}}{{/crossLink}} method by {{#crossLink \"AbstractLoader\"}}{{/crossLink}}\n\t * @class LoadItem\n\t * @constructor\n\t * @since 0.6.0\n\t */\n\tfunction LoadItem() {\n\t\t/**\n\t\t * The source of the file that is being loaded. This property is <b>required</b>. The source can either be a\n\t\t * string (recommended), or an HTML tag.\n\t\t * This can also be an object, but in that case it has to include a type and be handled by a plugin.\n\t\t * @property src\n\t\t * @type {String}\n\t\t * @default null\n\t\t */\n\t\tthis.src = null;\n\n\t\t/**\n\t\t * The type file that is being loaded. The type of the file is usually inferred by the extension, but can also\n\t\t * be set manually. This is helpful in cases where a file does not have an extension.\n\t\t * @property type\n\t\t * @type {String}\n\t\t * @default null\n\t\t */\n\t\tthis.type = null;\n\n\t\t/**\n\t\t * A string identifier which can be used to reference the loaded object. If none is provided, this will be\n\t\t * automatically set to the {{#crossLink \"src:property\"}}{{/crossLink}}.\n\t\t * @property id\n\t\t * @type {String}\n\t\t * @default null\n\t\t */\n\t\tthis.id = null;\n\n\t\t/**\n\t\t * Determines if a manifest will maintain the order of this item, in relation to other items in the manifest\n\t\t * that have also set the `maintainOrder` property to `true`. This only applies when the max connections has\n\t\t * been set above 1 (using {{#crossLink \"LoadQueue/setMaxConnections\"}}{{/crossLink}}). Everything with this\n\t\t * property set to `false` will finish as it is loaded. Ordered items are combined with script tags loading in\n\t\t * order when {{#crossLink \"LoadQueue/maintainScriptOrder:property\"}}{{/crossLink}} is set to `true`.\n\t\t * @property maintainOrder\n\t\t * @type {Boolean}\n\t\t * @default false\n\t\t */\n\t\tthis.maintainOrder = false;\n\n\t\t/**\n\t\t * A callback used by JSONP requests that defines what global method to call when the JSONP content is loaded.\n\t\t * @property callback\n\t\t * @type {String}\n\t\t * @default null\n\t\t */\n\t\tthis.callback = null;\n\n\t\t/**\n\t\t * An arbitrary data object, which is included with the loaded object.\n\t\t * @property data\n\t\t * @type {Object}\n\t\t * @default null\n\t\t */\n\t\tthis.data = null;\n\n\t\t/**\n\t\t * The request method used for HTTP calls. Both {{#crossLink \"Methods/GET:property\"}}{{/crossLink}} or\n\t\t * {{#crossLink \"Methods/POST:property\"}}{{/crossLink}} request types are supported, and are defined as\n\t\t * constants on {{#crossLink \"AbstractLoader\"}}{{/crossLink}}.\n\t\t * @property method\n\t\t * @type {String}\n\t\t * @default GET\n\t\t */\n\t\tthis.method = createjs.Methods.GET;\n\n\t\t/**\n\t\t * An object hash of name/value pairs to send to the server.\n\t\t * @property values\n\t\t * @type {Object}\n\t\t * @default null\n\t\t */\n\t\tthis.values = null;\n\n\t\t/**\n\t\t * An object hash of headers to attach to an XHR request. PreloadJS will automatically attach some default\n\t\t * headers when required, including \"Origin\", \"Content-Type\", and \"X-Requested-With\". You may override the\n\t\t * default headers by including them in your headers object.\n\t\t * @property headers\n\t\t * @type {Object}\n\t\t * @default null\n\t\t */\n\t\tthis.headers = null;\n\n\t\t/**\n\t\t * Enable credentials for XHR requests.\n\t\t * @property withCredentials\n\t\t * @type {Boolean}\n\t\t * @default false\n\t\t */\n\t\tthis.withCredentials = false;\n\n\t\t/**\n\t\t * Set the mime type of XHR-based requests. This is automatically set to \"text/plain; charset=utf-8\" for text\n\t\t * based files (json, xml, text, css, js).\n\t\t * @property mimeType\n\t\t * @type {String}\n\t\t * @default null\n\t\t */\n\t\tthis.mimeType = null;\n\n\t\t/**\n\t\t * Sets the crossOrigin attribute for CORS-enabled images loading cross-domain.\n\t\t * @property crossOrigin\n\t\t * @type {boolean}\n\t\t * @default Anonymous\n\t\t */\n\t\tthis.crossOrigin = null;\n\n\t\t/**\n\t\t * The duration in milliseconds to wait before a request times out. This only applies to tag-based and and XHR\n\t\t * (level one) loading, as XHR (level 2) provides its own timeout event.\n\t\t * @property loadTimeout\n\t\t * @type {Number}\n\t\t * @default 8000 (8 seconds)\n\t\t */\n\t\tthis.loadTimeout = s.LOAD_TIMEOUT_DEFAULT;\n\t};\n\n\tvar p = LoadItem.prototype = {};\n\tvar s = LoadItem;\n\n\t/**\n\t * Default duration in milliseconds to wait before a request times out. This only applies to tag-based and and XHR\n\t * (level one) loading, as XHR (level 2) provides its own timeout event.\n\t * @property LOAD_TIMEOUT_DEFAULT\n\t * @type {number}\n\t * @static\n\t */\n\ts.LOAD_TIMEOUT_DEFAULT = 8000;\n\n\t/**\n\t * Create a LoadItem.\n\t * <ul>\n\t *     <li>String-based items are converted to a LoadItem with a populated {{#crossLink \"src:property\"}}{{/crossLink}}.</li>\n\t *     <li>LoadItem instances are returned as-is</li>\n\t *     <li>Objects are returned with any needed properties added</li>\n\t * </ul>\n\t * @method create\n\t * @param {LoadItem|String|Object} value The load item value\n\t * @returns {LoadItem|Object}\n\t * @static\n\t */\n\ts.create = function (value) {\n\t\tif (typeof value == \"string\") {\n\t\t\tvar item = new LoadItem();\n\t\t\titem.src = value;\n\t\t\treturn item;\n\t\t} else if (value instanceof s) {\n\t\t\treturn value;\n\t\t} else if (value instanceof Object && value.src) {\n\t\t\tif (value.loadTimeout == null) {\n\t\t\t\tvalue.loadTimeout = s.LOAD_TIMEOUT_DEFAULT;\n\t\t\t}\n\t\t\treturn value;\n\t\t} else {\n\t\t\tthrow new Error(\"Type not recognized.\");\n\t\t}\n\t};\n\n\t/**\n\t * Provides a chainable shortcut method for setting a number of properties on the instance.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      var loadItem = new createjs.LoadItem().set({src:\"image.png\", maintainOrder:true});\n\t *\n\t * @method set\n\t * @param {Object} props A generic object containing properties to copy to the LoadItem instance.\n\t * @return {LoadItem} Returns the instance the method is called on (useful for chaining calls.)\n\t*/\n\tp.set = function(props) {\n\t\tfor (var n in props) { this[n] = props[n]; }\n\t\treturn this;\n\t};\n\n\tcreatejs.LoadItem = s;\n\n}());\n\n//##############################################################################\n// RequestUtils.js\n//##############################################################################\n\n(function () {\n\n\t/**\n\t * Utilities that assist with parsing load items, and determining file types, etc.\n\t * @class RequestUtils\n\t */\n\tvar s = {};\n\n\t/**\n\t * Determine if a specific type should be loaded as a binary file. Currently, only images and items marked\n\t * specifically as \"binary\" are loaded as binary. Note that audio is <b>not</b> a binary type, as we can not play\n\t * back using an audio tag if it is loaded as binary. Plugins can change the item type to binary to ensure they get\n\t * a binary result to work with. Binary files are loaded using XHR2. Types are defined as static constants on\n\t * {{#crossLink \"AbstractLoader\"}}{{/crossLink}}.\n\t * @method isBinary\n\t * @param {String} type The item type.\n\t * @return {Boolean} If the specified type is binary.\n\t * @static\n\t */\n\ts.isBinary = function (type) {\n\t\tswitch (type) {\n\t\t\tcase createjs.Types.IMAGE:\n\t\t\tcase createjs.Types.BINARY:\n\t\t\t\treturn true;\n\t\t\tdefault:\n\t\t\t\treturn false;\n\t\t}\n\t};\n\n\t/**\n\t * Determine if a specific type is a text-based asset, and should be loaded as UTF-8.\n\t * @method isText\n\t * @param {String} type The item type.\n\t * @return {Boolean} If the specified type is text.\n\t * @static\n\t */\n\ts.isText = function (type) {\n\t\tswitch (type) {\n\t\t\tcase createjs.Types.TEXT:\n\t\t\tcase createjs.Types.JSON:\n\t\t\tcase createjs.Types.MANIFEST:\n\t\t\tcase createjs.Types.XML:\n\t\t\tcase createjs.Types.CSS:\n\t\t\tcase createjs.Types.SVG:\n\t\t\tcase createjs.Types.JAVASCRIPT:\n\t\t\tcase createjs.Types.SPRITESHEET:\n\t\t\t\treturn true;\n\t\t\tdefault:\n\t\t\t\treturn false;\n\t\t}\n\t};\n\n\t/**\n\t * Determine the type of the object using common extensions. Note that the type can be passed in with the load item\n\t * if it is an unusual extension.\n\t * @method getTypeByExtension\n\t * @param {String} extension The file extension to use to determine the load type.\n\t * @return {String} The determined load type (for example, `createjs.Types.IMAGE`). Will return `null` if\n\t * the type can not be determined by the extension.\n\t * @static\n\t */\n\ts.getTypeByExtension = function (extension) {\n\t\tif (extension == null) {\n\t\t\treturn createjs.Types.TEXT;\n\t\t}\n\n\t\tswitch (extension.toLowerCase()) {\n\t\t\tcase \"jpeg\":\n\t\t\tcase \"jpg\":\n\t\t\tcase \"gif\":\n\t\t\tcase \"png\":\n\t\t\tcase \"webp\":\n\t\t\tcase \"bmp\":\n\t\t\t\treturn createjs.Types.IMAGE;\n\t\t\tcase \"ogg\":\n\t\t\tcase \"mp3\":\n\t\t\tcase \"webm\":\n\t\t\t\treturn createjs.Types.SOUND;\n\t\t\tcase \"mp4\":\n\t\t\tcase \"webm\":\n\t\t\tcase \"ts\":\n\t\t\t\treturn createjs.Types.VIDEO;\n\t\t\tcase \"json\":\n\t\t\t\treturn createjs.Types.JSON;\n\t\t\tcase \"xml\":\n\t\t\t\treturn createjs.Types.XML;\n\t\t\tcase \"css\":\n\t\t\t\treturn createjs.Types.CSS;\n\t\t\tcase \"js\":\n\t\t\t\treturn createjs.Types.JAVASCRIPT;\n\t\t\tcase 'svg':\n\t\t\t\treturn createjs.Types.SVG;\n\t\t\tdefault:\n\t\t\t\treturn createjs.Types.TEXT;\n\t\t}\n\t};\n\n\tcreatejs.RequestUtils = s;\n\n}());\n\n//##############################################################################\n// AbstractLoader.js\n//##############################################################################\n\nwindow.createjs = window.createjs || {};\n\n(function () {\n\t\"use strict\";\n\n// constructor\n\t/**\n\t * The base loader, which defines all the generic methods, properties, and events. All loaders extend this class,\n\t * including the {{#crossLink \"LoadQueue\"}}{{/crossLink}}.\n\t * @class AbstractLoader\n\t * @param {LoadItem|object|string} loadItem The item to be loaded.\n\t * @param {Boolean} [preferXHR] Determines if the LoadItem should <em>try</em> and load using XHR, or take a\n\t * tag-based approach, which can be better in cross-domain situations. Not all loaders can load using one or the\n\t * other, so this is a suggested directive.\n\t * @param {String} [type] The type of loader. Loader types are defined as constants on the AbstractLoader class,\n\t * such as {{#crossLink \"IMAGE:property\"}}{{/crossLink}}, {{#crossLink \"CSS:property\"}}{{/crossLink}}, etc.\n\t * @extends EventDispatcher\n\t */\n\tfunction AbstractLoader(loadItem, preferXHR, type) {\n\t\tthis.EventDispatcher_constructor();\n\n\t\t// public properties\n\t\t/**\n\t\t * If the loader has completed loading. This provides a quick check, but also ensures that the different approaches\n\t\t * used for loading do not pile up resulting in more than one `complete` {{#crossLink \"Event\"}}{{/crossLink}}.\n\t\t * @property loaded\n\t\t * @type {Boolean}\n\t\t * @default false\n\t\t */\n\t\tthis.loaded = false;\n\n\t\t/**\n\t\t * Determine if the loader was canceled. Canceled loads will not fire complete events. Note that this property\n\t\t * is readonly, so {{#crossLink \"LoadQueue\"}}{{/crossLink}} queues should be closed using {{#crossLink \"LoadQueue/close\"}}{{/crossLink}}\n\t\t * instead.\n\t\t * @property canceled\n\t\t * @type {Boolean}\n\t\t * @default false\n\t\t * @readonly\n\t\t */\n\t\tthis.canceled = false;\n\n\t\t/**\n\t\t * The current load progress (percentage) for this item. This will be a number between 0 and 1.\n\t\t *\n\t\t * <h4>Example</h4>\n\t\t *\n\t\t *     var queue = new createjs.LoadQueue();\n\t\t *     queue.loadFile(\"largeImage.png\");\n\t\t *     queue.on(\"progress\", function() {\n\t\t *         console.log(\"Progress:\", queue.progress, event.progress);\n\t\t *     });\n\t\t *\n\t\t * @property progress\n\t\t * @type {Number}\n\t\t * @default 0\n\t\t */\n\t\tthis.progress = 0;\n\n\t\t/**\n\t\t * The type of item this loader will load. See {{#crossLink \"AbstractLoader\"}}{{/crossLink}} for a full list of\n\t\t * supported types.\n\t\t * @property type\n\t\t * @type {String}\n\t\t */\n\t\tthis.type = type;\n\n\t\t/**\n\t\t * A formatter function that converts the loaded raw result into the final result. For example, the JSONLoader\n\t\t * converts a string of text into a JavaScript object. Not all loaders have a resultFormatter, and this property\n\t\t * can be overridden to provide custom formatting.\n\t\t *\n\t\t * Optionally, a resultFormatter can return a callback function in cases where the formatting needs to be\n\t\t * asynchronous, such as creating a new image. The callback function is passed 2 parameters, which are callbacks\n\t\t * to handle success and error conditions in the resultFormatter. Note that the resultFormatter method is\n\t\t * called in the current scope, as well as the success and error callbacks.\n\t\t *\n\t\t * <h4>Example asynchronous resultFormatter</h4>\n\t\t *\n\t\t * \tfunction _formatResult(loader) {\n\t\t * \t\treturn function(success, error) {\n\t\t * \t\t\tif (errorCondition) { error(errorDetailEvent); }\n\t\t * \t\t\tsuccess(result);\n\t\t * \t\t}\n\t\t * \t}\n\t\t * @property resultFormatter\n\t\t * @type {Function}\n\t\t * @default null\n\t\t */\n\t\tthis.resultFormatter = null;\n\n\t\t// protected properties\n\t\t/**\n\t\t * The {{#crossLink \"LoadItem\"}}{{/crossLink}} this loader represents. Note that this is null in a {{#crossLink \"LoadQueue\"}}{{/crossLink}},\n\t\t * but will be available on loaders such as {{#crossLink \"XMLLoader\"}}{{/crossLink}} and {{#crossLink \"ImageLoader\"}}{{/crossLink}}.\n\t\t * @property _item\n\t\t * @type {LoadItem|Object}\n\t\t * @private\n\t\t */\n\t\tif (loadItem) {\n\t\t\tthis._item = createjs.LoadItem.create(loadItem);\n\t\t} else {\n\t\t\tthis._item = null;\n\t\t}\n\n\t\t/**\n\t\t * Whether the loader will try and load content using XHR (true) or HTML tags (false).\n\t\t * @property _preferXHR\n\t\t * @type {Boolean}\n\t\t * @private\n\t\t */\n\t\tthis._preferXHR = preferXHR;\n\n\t\t/**\n\t\t * The loaded result after it is formatted by an optional {{#crossLink \"resultFormatter\"}}{{/crossLink}}. For\n\t\t * items that are not formatted, this will be the same as the {{#crossLink \"_rawResult:property\"}}{{/crossLink}}.\n\t\t * The result is accessed using the {{#crossLink \"getResult\"}}{{/crossLink}} method.\n\t\t * @property _result\n\t\t * @type {Object|String}\n\t\t * @private\n\t\t */\n\t\tthis._result = null;\n\n\t\t/**\n\t\t * The loaded result before it is formatted. The rawResult is accessed using the {{#crossLink \"getResult\"}}{{/crossLink}}\n\t\t * method, and passing `true`.\n\t\t * @property _rawResult\n\t\t * @type {Object|String}\n\t\t * @private\n\t\t */\n\t\tthis._rawResult = null;\n\n\t\t/**\n\t\t * A list of items that loaders load behind the scenes. This does not include the main item the loader is\n\t\t * responsible for loading. Examples of loaders that have sub-items include the {{#crossLink \"SpriteSheetLoader\"}}{{/crossLink}} and\n\t\t * {{#crossLink \"ManifestLoader\"}}{{/crossLink}}.\n\t\t * @property _loadItems\n\t\t * @type {null}\n\t\t * @protected\n\t\t */\n\t\tthis._loadedItems = null;\n\n\t\t/**\n\t\t * The attribute the items loaded using tags use for the source.\n\t\t * @type {string}\n\t\t * @default null\n\t\t * @private\n\t\t */\n\t\tthis._tagSrcAttribute = null;\n\n\t\t/**\n\t\t * An HTML tag (or similar) that a loader may use to load HTML content, such as images, scripts, etc.\n\t\t * @property _tag\n\t\t * @type {Object}\n\t\t * @private\n\t\t */\n\t\tthis._tag = null;\n\t};\n\n\tvar p = createjs.extend(AbstractLoader, createjs.EventDispatcher);\n\tvar s = AbstractLoader;\n\n\t// Remove these @deprecated properties after 1.0\n\ttry {\n\t\tObject.defineProperties(s, {\n\t\t\tPOST: { get: createjs.deprecate(function() { return createjs.Methods.POST; }, \"AbstractLoader.POST\") },\n\t\t\tGET: { get: createjs.deprecate(function() { return createjs.Methods.GET; }, \"AbstractLoader.GET\") },\n\n\t\t\tBINARY: { get: createjs.deprecate(function() { return createjs.Types.BINARY; }, \"AbstractLoader.BINARY\") },\n\t\t\tCSS: { get: createjs.deprecate(function() { return createjs.Types.CSS; }, \"AbstractLoader.CSS\") },\n\t\t\tFONT: { get: createjs.deprecate(function() { return createjs.Types.FONT; }, \"AbstractLoader.FONT\") },\n\t\t\tFONTCSS: { get: createjs.deprecate(function() { return createjs.Types.FONTCSS; }, \"AbstractLoader.FONTCSS\") },\n\t\t\tIMAGE: { get: createjs.deprecate(function() { return createjs.Types.IMAGE; }, \"AbstractLoader.IMAGE\") },\n\t\t\tJAVASCRIPT: { get: createjs.deprecate(function() { return createjs.Types.JAVASCRIPT; }, \"AbstractLoader.JAVASCRIPT\") },\n\t\t\tJSON: { get: createjs.deprecate(function() { return createjs.Types.JSON; }, \"AbstractLoader.JSON\") },\n\t\t\tJSONP: { get: createjs.deprecate(function() { return createjs.Types.JSONP; }, \"AbstractLoader.JSONP\") },\n\t\t\tMANIFEST: { get: createjs.deprecate(function() { return createjs.Types.MANIFEST; }, \"AbstractLoader.MANIFEST\") },\n\t\t\tSOUND: { get: createjs.deprecate(function() { return createjs.Types.SOUND; }, \"AbstractLoader.SOUND\") },\n\t\t\tVIDEO: { get: createjs.deprecate(function() { return createjs.Types.VIDEO; }, \"AbstractLoader.VIDEO\") },\n\t\t\tSPRITESHEET: { get: createjs.deprecate(function() { return createjs.Types.SPRITESHEET; }, \"AbstractLoader.SPRITESHEET\") },\n\t\t\tSVG: { get: createjs.deprecate(function() { return createjs.Types.SVG; }, \"AbstractLoader.SVG\") },\n\t\t\tTEXT: { get: createjs.deprecate(function() { return createjs.Types.TEXT; }, \"AbstractLoader.TEXT\") },\n\t\t\tXML: { get: createjs.deprecate(function() { return createjs.Types.XML; }, \"AbstractLoader.XML\") }\n\t\t});\n\t} catch (e) {}\n\n// Events\n\t/**\n\t * The {{#crossLink \"ProgressEvent\"}}{{/crossLink}} that is fired when the overall progress changes. Prior to\n\t * version 0.6.0, this was just a regular {{#crossLink \"Event\"}}{{/crossLink}}.\n\t * @event progress\n\t * @since 0.3.0\n\t */\n\n\t/**\n\t * The {{#crossLink \"Event\"}}{{/crossLink}} that is fired when a load starts.\n\t * @event loadstart\n\t * @param {Object} target The object that dispatched the event.\n\t * @param {String} type The event type.\n\t * @since 0.3.1\n\t */\n\n\t/**\n\t * The {{#crossLink \"Event\"}}{{/crossLink}} that is fired when the entire queue has been loaded.\n\t * @event complete\n\t * @param {Object} target The object that dispatched the event.\n\t * @param {String} type The event type.\n\t * @since 0.3.0\n\t */\n\n\t/**\n\t * The {{#crossLink \"ErrorEvent\"}}{{/crossLink}} that is fired when the loader encounters an error. If the error was\n\t * encountered by a file, the event will contain the item that caused the error. Prior to version 0.6.0, this was\n\t * just a regular {{#crossLink \"Event\"}}{{/crossLink}}.\n\t * @event error\n\t * @since 0.3.0\n\t */\n\n\t/**\n\t * The {{#crossLink \"Event\"}}{{/crossLink}} that is fired when the loader encounters an internal file load error.\n\t * This enables loaders to maintain internal queues, and surface file load errors.\n\t * @event fileerror\n\t * @param {Object} target The object that dispatched the event.\n\t * @param {String} type The event type (\"fileerror\")\n\t * @param {LoadItem|object} The item that encountered the error\n\t * @since 0.6.0\n\t */\n\n\t/**\n\t * The {{#crossLink \"Event\"}}{{/crossLink}} that is fired when a loader internally loads a file. This enables\n\t * loaders such as {{#crossLink \"ManifestLoader\"}}{{/crossLink}} to maintain internal {{#crossLink \"LoadQueue\"}}{{/crossLink}}s\n\t * and notify when they have loaded a file. The {{#crossLink \"LoadQueue\"}}{{/crossLink}} class dispatches a\n\t * slightly different {{#crossLink \"LoadQueue/fileload:event\"}}{{/crossLink}} event.\n\t * @event fileload\n\t * @param {Object} target The object that dispatched the event.\n\t * @param {String} type The event type (\"fileload\")\n\t * @param {Object} item The file item which was specified in the {{#crossLink \"LoadQueue/loadFile\"}}{{/crossLink}}\n\t * or {{#crossLink \"LoadQueue/loadManifest\"}}{{/crossLink}} call. If only a string path or tag was specified, the\n\t * object will contain that value as a `src` property.\n\t * @param {Object} result The HTML tag or parsed result of the loaded item.\n\t * @param {Object} rawResult The unprocessed result, usually the raw text or binary data before it is converted\n\t * to a usable object.\n\t * @since 0.6.0\n\t */\n\n\t/**\n\t * The {{#crossLink \"Event\"}}{{/crossLink}} that is fired after the internal request is created, but before a load.\n\t * This allows updates to the loader for specific loading needs, such as binary or XHR image loading.\n\t * @event initialize\n\t * @param {Object} target The object that dispatched the event.\n\t * @param {String} type The event type (\"initialize\")\n\t * @param {AbstractLoader} loader The loader that has been initialized.\n\t */\n\n\n\t/**\n\t * Get a reference to the manifest item that is loaded by this loader. In some cases this will be the value that was\n\t * passed into {{#crossLink \"LoadQueue\"}}{{/crossLink}} using {{#crossLink \"LoadQueue/loadFile\"}}{{/crossLink}} or\n\t * {{#crossLink \"LoadQueue/loadManifest\"}}{{/crossLink}}. However if only a String path was passed in, then it will\n\t * be a {{#crossLink \"LoadItem\"}}{{/crossLink}}.\n\t * @method getItem\n\t * @return {Object} The manifest item that this loader is responsible for loading.\n\t * @since 0.6.0\n\t */\n\tp.getItem = function () {\n\t\treturn this._item;\n\t};\n\n\t/**\n\t * Get a reference to the content that was loaded by the loader (only available after the {{#crossLink \"complete:event\"}}{{/crossLink}}\n\t * event is dispatched.\n\t * @method getResult\n\t * @param {Boolean} [raw=false] Determines if the returned result will be the formatted content, or the raw loaded\n\t * data (if it exists).\n\t * @return {Object}\n\t * @since 0.6.0\n\t */\n\tp.getResult = function (raw) {\n\t\treturn raw ? this._rawResult : this._result;\n\t};\n\n\t/**\n\t * Return the `tag` this object creates or uses for loading.\n\t * @method getTag\n\t * @return {Object} The tag instance\n\t * @since 0.6.0\n\t */\n\tp.getTag = function () {\n\t\treturn this._tag;\n\t};\n\n\t/**\n\t * Set the `tag` this item uses for loading.\n\t * @method setTag\n\t * @param {Object} tag The tag instance\n\t * @since 0.6.0\n\t */\n\tp.setTag = function(tag) {\n\t  this._tag = tag;\n\t};\n\n\t/**\n\t * Begin loading the item. This method is required when using a loader by itself.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      var queue = new createjs.LoadQueue();\n\t *      queue.on(\"complete\", handleComplete);\n\t *      queue.loadManifest(fileArray, false); // Note the 2nd argument that tells the queue not to start loading yet\n\t *      queue.load();\n\t *\n\t * @method load\n\t */\n\tp.load = function () {\n\t\tthis._createRequest();\n\n\t\tthis._request.on(\"complete\", this, this);\n\t\tthis._request.on(\"progress\", this, this);\n\t\tthis._request.on(\"loadStart\", this, this);\n\t\tthis._request.on(\"abort\", this, this);\n\t\tthis._request.on(\"timeout\", this, this);\n\t\tthis._request.on(\"error\", this, this);\n\n\t\tvar evt = new createjs.Event(\"initialize\");\n\t\tevt.loader = this._request;\n\t\tthis.dispatchEvent(evt);\n\n\t\tthis._request.load();\n\t};\n\n\t/**\n\t * Close the the item. This will stop any open requests (although downloads using HTML tags may still continue in\n\t * the background), but events will not longer be dispatched.\n\t * @method cancel\n\t */\n\tp.cancel = function () {\n\t\tthis.canceled = true;\n\t\tthis.destroy();\n\t};\n\n\t/**\n\t * Clean up the loader.\n\t * @method destroy\n\t */\n\tp.destroy = function() {\n\t\tif (this._request) {\n\t\t\tthis._request.removeAllEventListeners();\n\t\t\tthis._request.destroy();\n\t\t}\n\n\t\tthis._request = null;\n\n\t\tthis._item = null;\n\t\tthis._rawResult = null;\n\t\tthis._result = null;\n\n\t\tthis._loadItems = null;\n\n\t\tthis.removeAllEventListeners();\n\t};\n\n\t/**\n\t * Get any items loaded internally by the loader. The enables loaders such as {{#crossLink \"ManifestLoader\"}}{{/crossLink}}\n\t * to expose items it loads internally.\n\t * @method getLoadedItems\n\t * @return {Array} A list of the items loaded by the loader.\n\t * @since 0.6.0\n\t */\n\tp.getLoadedItems = function () {\n\t\treturn this._loadedItems;\n\t};\n\n\n\t// Private methods\n\t/**\n\t * Create an internal request used for loading. By default, an {{#crossLink \"XHRRequest\"}}{{/crossLink}} or\n\t * {{#crossLink \"TagRequest\"}}{{/crossLink}} is created, depending on the value of {{#crossLink \"preferXHR:property\"}}{{/crossLink}}.\n\t * Other loaders may override this to use different request types, such as {{#crossLink \"ManifestLoader\"}}{{/crossLink}},\n\t * which uses {{#crossLink \"JSONLoader\"}}{{/crossLink}} or {{#crossLink \"JSONPLoader\"}}{{/crossLink}} under the hood.\n\t * @method _createRequest\n\t * @protected\n\t */\n\tp._createRequest = function() {\n\t\tif (!this._preferXHR) {\n\t\t\tthis._request = new createjs.TagRequest(this._item, this._tag || this._createTag(), this._tagSrcAttribute);\n\t\t} else {\n\t\t\tthis._request = new createjs.XHRRequest(this._item);\n\t\t}\n\t};\n\n\t/**\n\t * Create the HTML tag used for loading. This method does nothing by default, and needs to be implemented\n\t * by loaders that require tag loading.\n\t * @method _createTag\n\t * @param {String} src The tag source\n\t * @return {HTMLElement} The tag that was created\n\t * @protected\n\t */\n\tp._createTag = function(src) { return null; };\n\n\t/**\n\t * Dispatch a loadstart {{#crossLink \"Event\"}}{{/crossLink}}. Please see the {{#crossLink \"AbstractLoader/loadstart:event\"}}{{/crossLink}}\n\t * event for details on the event payload.\n\t * @method _sendLoadStart\n\t * @protected\n\t */\n\tp._sendLoadStart = function () {\n\t\tif (this._isCanceled()) { return; }\n\t\tthis.dispatchEvent(\"loadstart\");\n\t};\n\n\t/**\n\t * Dispatch a {{#crossLink \"ProgressEvent\"}}{{/crossLink}}.\n\t * @method _sendProgress\n\t * @param {Number | Object} value The progress of the loaded item, or an object containing <code>loaded</code>\n\t * and <code>total</code> properties.\n\t * @protected\n\t */\n\tp._sendProgress = function (value) {\n\t\tif (this._isCanceled()) { return; }\n\t\tvar event = null;\n\t\tif (typeof(value) == \"number\") {\n\t\t\tthis.progress = value;\n\t\t\tevent = new createjs.ProgressEvent(this.progress);\n\t\t} else {\n\t\t\tevent = value;\n\t\t\tthis.progress = value.loaded / value.total;\n\t\t\tevent.progress = this.progress;\n\t\t\tif (isNaN(this.progress) || this.progress == Infinity) { this.progress = 0; }\n\t\t}\n\t\tthis.hasEventListener(\"progress\") && this.dispatchEvent(event);\n\t};\n\n\t/**\n\t * Dispatch a complete {{#crossLink \"Event\"}}{{/crossLink}}. Please see the {{#crossLink \"AbstractLoader/complete:event\"}}{{/crossLink}} event\n\t * @method _sendComplete\n\t * @protected\n\t */\n\tp._sendComplete = function () {\n\t\tif (this._isCanceled()) { return; }\n\n\t\tthis.loaded = true;\n\n\t\tvar event = new createjs.Event(\"complete\");\n\t\tevent.rawResult = this._rawResult;\n\n\t\tif (this._result != null) {\n\t\t\tevent.result = this._result;\n\t\t}\n\n\t\tthis.dispatchEvent(event);\n\t};\n\n\t/**\n\t * Dispatch an error {{#crossLink \"Event\"}}{{/crossLink}}. Please see the {{#crossLink \"AbstractLoader/error:event\"}}{{/crossLink}}\n\t * event for details on the event payload.\n\t * @method _sendError\n\t * @param {ErrorEvent} event The event object containing specific error properties.\n\t * @protected\n\t */\n\tp._sendError = function (event) {\n\t\tif (this._isCanceled() || !this.hasEventListener(\"error\")) { return; }\n\t\tif (event == null) {\n\t\t\tevent = new createjs.ErrorEvent(\"PRELOAD_ERROR_EMPTY\"); // TODO: Populate error\n\t\t}\n\t\tthis.dispatchEvent(event);\n\t};\n\n\t/**\n\t * Determine if the load has been canceled. This is important to ensure that method calls or asynchronous events\n\t * do not cause issues after the queue has been cleaned up.\n\t * @method _isCanceled\n\t * @return {Boolean} If the loader has been canceled.\n\t * @protected\n\t */\n\tp._isCanceled = function () {\n\t\tif (window.createjs == null || this.canceled) {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t};\n\n\t/**\n\t * A custom result formatter function, which is called just before a request dispatches its complete event. Most\n\t * loader types already have an internal formatter, but this can be user-overridden for custom formatting. The\n\t * formatted result will be available on Loaders using {{#crossLink \"getResult\"}}{{/crossLink}}, and passing `true`.\n\t * @property resultFormatter\n\t * @type Function\n\t * @return {Object} The formatted result\n\t * @since 0.6.0\n\t */\n\tp.resultFormatter = null;\n\n\t/**\n\t * Handle events from internal requests. By default, loaders will handle, and redispatch the necessary events, but\n\t * this method can be overridden for custom behaviours.\n\t * @method handleEvent\n\t * @param {Event} event The event that the internal request dispatches.\n\t * @protected\n\t * @since 0.6.0\n\t */\n\tp.handleEvent = function (event) {\n\t\tswitch (event.type) {\n\t\t\tcase \"complete\":\n\t\t\t\tthis._rawResult = event.target._response;\n\t\t\t\tvar result = this.resultFormatter && this.resultFormatter(this);\n\t\t\t\t// The resultFormatter is asynchronous\n\t\t\t\tif (result instanceof Function) {\n\t\t\t\t\tresult.call(this,\n\t\t\t\t\t\t\tcreatejs.proxy(this._resultFormatSuccess, this),\n\t\t\t\t\t\t\tcreatejs.proxy(this._resultFormatFailed, this)\n\t\t\t\t\t);\n\t\t\t\t// The result formatter is synchronous\n\t\t\t\t} else {\n\t\t\t\t\tthis._result =  result || this._rawResult;\n\t\t\t\t\tthis._sendComplete();\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase \"progress\":\n\t\t\t\tthis._sendProgress(event);\n\t\t\t\tbreak;\n\t\t\tcase \"error\":\n\t\t\t\tthis._sendError(event);\n\t\t\t\tbreak;\n\t\t\tcase \"loadstart\":\n\t\t\t\tthis._sendLoadStart();\n\t\t\t\tbreak;\n\t\t\tcase \"abort\":\n\t\t\tcase \"timeout\":\n\t\t\t\tif (!this._isCanceled()) {\n\t\t\t\t\tthis.dispatchEvent(new createjs.ErrorEvent(\"PRELOAD_\" + event.type.toUpperCase() + \"_ERROR\"));\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t};\n\n\t/**\n\t * The \"success\" callback passed to {{#crossLink \"AbstractLoader/resultFormatter\"}}{{/crossLink}} asynchronous\n\t * functions.\n\t * @method _resultFormatSuccess\n\t * @param {Object} result The formatted result\n\t * @private\n\t */\n\tp._resultFormatSuccess = function (result) {\n\t\tthis._result = result;\n\t\tthis._sendComplete();\n\t};\n\n\t/**\n\t * The \"error\" callback passed to {{#crossLink \"AbstractLoader/resultFormatter\"}}{{/crossLink}} asynchronous\n\t * functions.\n\t * @method _resultFormatSuccess\n\t * @param {Object} error The error event\n\t * @private\n\t */\n\tp._resultFormatFailed = function (event) {\n\t\tthis._sendError(event);\n\t};\n\n\t/**\n\t * @method toString\n\t * @return {String} a string representation of the instance.\n\t */\n\tp.toString = function () {\n\t\treturn \"[PreloadJS AbstractLoader]\";\n\t};\n\n\tcreatejs.AbstractLoader = createjs.promote(AbstractLoader, \"EventDispatcher\");\n\n}());\n\n//##############################################################################\n// AbstractMediaLoader.js\n//##############################################################################\n\nwindow.createjs = window.createjs || {};\n\n(function () {\n\t\"use strict\";\n\n\t// constructor\n\t/**\n\t * The AbstractMediaLoader is a base class that handles some of the shared methods and properties of loaders that\n\t * handle HTML media elements, such as Video and Audio.\n\t * @class AbstractMediaLoader\n\t * @param {LoadItem|Object} loadItem\n\t * @param {Boolean} preferXHR\n\t * @param {String} type The type of media to load. Usually \"video\" or \"audio\".\n\t * @extends AbstractLoader\n\t * @constructor\n\t */\n\tfunction AbstractMediaLoader(loadItem, preferXHR, type) {\n\t\tthis.AbstractLoader_constructor(loadItem, preferXHR, type);\n\n\t\t// public properties\n\t\tthis.resultFormatter = this._formatResult;\n\n\t\t// protected properties\n\t\tthis._tagSrcAttribute = \"src\";\n\n        this.on(\"initialize\", this._updateXHR, this);\n\t};\n\n\tvar p = createjs.extend(AbstractMediaLoader, createjs.AbstractLoader);\n\n\t// static properties\n\t// public methods\n\tp.load = function () {\n\t\t// TagRequest will handle most of this, but Sound / Video need a few custom properties, so just handle them here.\n\t\tif (!this._tag) {\n\t\t\tthis._tag = this._createTag(this._item.src);\n\t\t}\n\n\t\tthis._tag.preload = \"auto\";\n\t\tthis._tag.load();\n\n\t\tthis.AbstractLoader_load();\n\t};\n\n\t// protected methods\n\t/**\n\t * Creates a new tag for loading if it doesn't exist yet.\n\t * @method _createTag\n\t * @private\n\t */\n\tp._createTag = function () {};\n\n\n\tp._createRequest = function() {\n\t\tif (!this._preferXHR) {\n\t\t\tthis._request = new createjs.MediaTagRequest(this._item, this._tag || this._createTag(), this._tagSrcAttribute);\n\t\t} else {\n\t\t\tthis._request = new createjs.XHRRequest(this._item);\n\t\t}\n\t};\n\n    // protected methods\n    /**\n     * Before the item loads, set its mimeType and responseType.\n     * @property _updateXHR\n     * @param {Event} event\n     * @private\n     */\n    p._updateXHR = function (event) {\n        // Only exists for XHR\n        if (event.loader.setResponseType) {\n            event.loader.setResponseType(\"blob\");\n        }\n    };\n\n\t/**\n\t * The result formatter for media files.\n\t * @method _formatResult\n\t * @param {AbstractLoader} loader\n\t * @returns {HTMLVideoElement|HTMLAudioElement}\n\t * @private\n\t */\n\tp._formatResult = function (loader) {\n\t\tthis._tag.removeEventListener && this._tag.removeEventListener(\"canplaythrough\", this._loadedHandler);\n\t\tthis._tag.onstalled = null;\n\t\tif (this._preferXHR) {\n            var URL = window.URL || window.webkitURL;\n            var result = loader.getResult(true);\n\n\t\t\tloader.getTag().src = URL.createObjectURL(result);\n\t\t}\n\t\treturn loader.getTag();\n\t};\n\n\tcreatejs.AbstractMediaLoader = createjs.promote(AbstractMediaLoader, \"AbstractLoader\");\n\n}());\n\n//##############################################################################\n// AbstractRequest.js\n//##############################################################################\n\nwindow.createjs = window.createjs || {};\n\n(function () {\n\t\"use strict\";\n\n\t/**\n\t * A base class for actual data requests, such as {{#crossLink \"XHRRequest\"}}{{/crossLink}}, {{#crossLink \"TagRequest\"}}{{/crossLink}},\n\t * and {{#crossLink \"MediaRequest\"}}{{/crossLink}}. PreloadJS loaders will typically use a data loader under the\n\t * hood to get data.\n\t * @class AbstractRequest\n\t * @param {LoadItem} item\n\t * @constructor\n\t */\n\tvar AbstractRequest = function (item) {\n\t\tthis._item = item;\n\t};\n\n\tvar p = createjs.extend(AbstractRequest, createjs.EventDispatcher);\n\n\t// public methods\n\t/**\n\t * Begin a load.\n\t * @method load\n\t */\n\tp.load =  function() {};\n\n\t/**\n\t * Clean up a request.\n\t * @method destroy\n\t */\n\tp.destroy = function() {};\n\n\t/**\n\t * Cancel an in-progress request.\n\t * @method cancel\n\t */\n\tp.cancel = function() {};\n\n\tcreatejs.AbstractRequest = createjs.promote(AbstractRequest, \"EventDispatcher\");\n\n}());\n\n//##############################################################################\n// TagRequest.js\n//##############################################################################\n\nwindow.createjs = window.createjs || {};\n\n(function () {\n\t\"use strict\";\n\n\t// constructor\n\t/**\n\t * An {{#crossLink \"AbstractRequest\"}}{{/crossLink}} that loads HTML tags, such as images and scripts.\n\t * @class TagRequest\n\t * @param {LoadItem} loadItem\n\t * @param {HTMLElement} tag\n\t * @param {String} srcAttribute The tag attribute that specifies the source, such as \"src\", \"href\", etc.\n\t */\n\tfunction TagRequest(loadItem, tag, srcAttribute) {\n\t\tthis.AbstractRequest_constructor(loadItem);\n\n\t\t// protected properties\n\t\t/**\n\t\t * The HTML tag instance that is used to load.\n\t\t * @property _tag\n\t\t * @type {HTMLElement}\n\t\t * @protected\n\t\t */\n\t\tthis._tag = tag;\n\n\t\t/**\n\t\t * The tag attribute that specifies the source, such as \"src\", \"href\", etc.\n\t\t * @property _tagSrcAttribute\n\t\t * @type {String}\n\t\t * @protected\n\t\t */\n\t\tthis._tagSrcAttribute = srcAttribute;\n\n\t\t/**\n\t\t * A method closure used for handling the tag load event.\n\t\t * @property _loadedHandler\n\t\t * @type {Function}\n\t\t * @private\n\t\t */\n\t\tthis._loadedHandler = createjs.proxy(this._handleTagComplete, this);\n\n\t\t/**\n\t\t * Determines if the element was added to the DOM automatically by PreloadJS, so it can be cleaned up after.\n\t\t * @property _addedToDOM\n\t\t * @type {Boolean}\n\t\t * @private\n\t\t */\n\t\tthis._addedToDOM = false;\n\n\t};\n\n\tvar p = createjs.extend(TagRequest, createjs.AbstractRequest);\n\n\t// public methods\n\tp.load = function () {\n\t\tthis._tag.onload = createjs.proxy(this._handleTagComplete, this);\n\t\tthis._tag.onreadystatechange = createjs.proxy(this._handleReadyStateChange, this);\n\t\tthis._tag.onerror = createjs.proxy(this._handleError, this);\n\n\t\tvar evt = new createjs.Event(\"initialize\");\n\t\tevt.loader = this._tag;\n\n\t\tthis.dispatchEvent(evt);\n\n\t\tthis._loadTimeout = setTimeout(createjs.proxy(this._handleTimeout, this), this._item.loadTimeout);\n\n\t\tthis._tag[this._tagSrcAttribute] = this._item.src;\n\n\t\t// wdg:: Append the tag AFTER setting the src, or SVG loading on iOS will fail.\n\t\tif (this._tag.parentNode == null) {\n\t\t\tcreatejs.DomUtils.appendToBody(this._tag);\n\t\t\tthis._addedToDOM = true;\n\t\t}\n\t};\n\n\tp.destroy = function() {\n\t\tthis._clean();\n\t\tthis._tag = null;\n\n\t\tthis.AbstractRequest_destroy();\n\t};\n\n\t// private methods\n\t/**\n\t * Handle the readyStateChange event from a tag. We need this in place of the `onload` callback (mainly SCRIPT\n\t * and LINK tags), but other cases may exist.\n\t * @method _handleReadyStateChange\n\t * @private\n\t */\n\tp._handleReadyStateChange = function () {\n\t\tclearTimeout(this._loadTimeout);\n\t\t// This is strictly for tags in browsers that do not support onload.\n\t\tvar tag = this._tag;\n\n\t\t// Complete is for old IE support.\n\t\tif (tag.readyState == \"loaded\" || tag.readyState == \"complete\") {\n\t\t\tthis._handleTagComplete();\n\t\t}\n\t};\n\n\t/**\n\t * Handle any error events from the tag.\n\t * @method _handleError\n\t * @protected\n\t */\n\tp._handleError = function() {\n\t\tthis._clean();\n\t\tthis.dispatchEvent(\"error\");\n\t};\n\n\t/**\n\t * Handle the tag's onload callback.\n\t * @method _handleTagComplete\n\t * @private\n\t */\n\tp._handleTagComplete = function () {\n\t\tthis._rawResult = this._tag;\n\t\tthis._result = this.resultFormatter && this.resultFormatter(this) || this._rawResult;\n\n\t\tthis._clean();\n\n\t\tthis.dispatchEvent(\"complete\");\n\t};\n\n\t/**\n\t * The tag request has not loaded within the time specified in loadTimeout.\n\t * @method _handleError\n\t * @param {Object} event The XHR error event.\n\t * @private\n\t */\n\tp._handleTimeout = function () {\n\t\tthis._clean();\n\t\tthis.dispatchEvent(new createjs.Event(\"timeout\"));\n\t};\n\n\t/**\n\t * Remove event listeners, but don't destroy the request object\n\t * @method _clean\n\t * @private\n\t */\n\tp._clean = function() {\n\t\tthis._tag.onload = null;\n\t\tthis._tag.onreadystatechange = null;\n\t\tthis._tag.onerror = null;\n\t\tif (this._addedToDOM && this._tag.parentNode != null) {\n\t\t\tthis._tag.parentNode.removeChild(this._tag);\n\t\t}\n\t\tclearTimeout(this._loadTimeout);\n\t};\n\n\t/**\n\t * Handle a stalled audio event. The main place this happens is with HTMLAudio in Chrome when playing back audio\n\t * that is already in a load, but not complete.\n\t * @method _handleStalled\n\t * @private\n\t */\n\tp._handleStalled = function () {\n\t\t//Ignore, let the timeout take care of it. Sometimes its not really stopped.\n\t};\n\n\tcreatejs.TagRequest = createjs.promote(TagRequest, \"AbstractRequest\");\n\n}());\n\n//##############################################################################\n// MediaTagRequest.js\n//##############################################################################\n\nwindow.createjs = window.createjs || {};\n\n(function () {\n\t\"use strict\";\n\n\t// constructor\n\t/**\n\t * An {{#crossLink \"TagRequest\"}}{{/crossLink}} that loads HTML tags for video and audio.\n\t * @class MediaTagRequest\n\t * @param {LoadItem} loadItem\n\t * @param {HTMLAudioElement|HTMLVideoElement} tag\n\t * @param {String} srcAttribute The tag attribute that specifies the source, such as \"src\", \"href\", etc.\n\t * @constructor\n\t */\n\tfunction MediaTagRequest(loadItem, tag, srcAttribute) {\n\t\tthis.AbstractRequest_constructor(loadItem);\n\n\t\t// protected properties\n\t\tthis._tag = tag;\n\t\tthis._tagSrcAttribute = srcAttribute;\n\t\tthis._loadedHandler = createjs.proxy(this._handleTagComplete, this);\n\t};\n\n\tvar p = createjs.extend(MediaTagRequest, createjs.TagRequest);\n\tvar s = MediaTagRequest;\n\n\t// public methods\n\tp.load = function () {\n\t\tvar sc = createjs.proxy(this._handleStalled, this);\n\t\tthis._stalledCallback = sc;\n\n\t\tvar pc = createjs.proxy(this._handleProgress, this);\n\t\tthis._handleProgress = pc;\n\n\t\tthis._tag.addEventListener(\"stalled\", sc);\n\t\tthis._tag.addEventListener(\"progress\", pc);\n\n\t\t// This will tell us when audio is buffered enough to play through, but not when its loaded.\n\t\t// The tag doesn't keep loading in Chrome once enough has buffered, and we have decided that behaviour is sufficient.\n\t\tthis._tag.addEventListener && this._tag.addEventListener(\"canplaythrough\", this._loadedHandler, false); // canplaythrough callback doesn't work in Chrome, so we use an event.\n\n\t\tthis.TagRequest_load();\n\t};\n\n\t// private methods\n\tp._handleReadyStateChange = function () {\n\t\tclearTimeout(this._loadTimeout);\n\t\t// This is strictly for tags in browsers that do not support onload.\n\t\tvar tag = this._tag;\n\n\t\t// Complete is for old IE support.\n\t\tif (tag.readyState == \"loaded\" || tag.readyState == \"complete\") {\n\t\t\tthis._handleTagComplete();\n\t\t}\n\t};\n\n\tp._handleStalled = function () {\n\t\t//Ignore, let the timeout take care of it. Sometimes its not really stopped.\n\t};\n\n\t/**\n\t * An XHR request has reported progress.\n\t * @method _handleProgress\n\t * @param {Object} event The XHR progress event.\n\t * @private\n\t */\n\tp._handleProgress = function (event) {\n\t\tif (!event || event.loaded > 0 && event.total == 0) {\n\t\t\treturn; // Sometimes we get no \"total\", so just ignore the progress event.\n\t\t}\n\n\t\tvar newEvent = new createjs.ProgressEvent(event.loaded, event.total);\n\t\tthis.dispatchEvent(newEvent);\n\t};\n\n\t// protected methods\n\tp._clean = function () {\n\t\tthis._tag.removeEventListener && this._tag.removeEventListener(\"canplaythrough\", this._loadedHandler);\n\t\tthis._tag.removeEventListener(\"stalled\", this._stalledCallback);\n\t\tthis._tag.removeEventListener(\"progress\", this._progressCallback);\n\n\t\tthis.TagRequest__clean();\n\t};\n\n\tcreatejs.MediaTagRequest = createjs.promote(MediaTagRequest, \"TagRequest\");\n\n}());\n\n//##############################################################################\n// XHRRequest.js\n//##############################################################################\n\nwindow.createjs = window.createjs || {};\n\n(function () {\n\t\"use strict\";\n\n// constructor\n\t/**\n\t * A preloader that loads items using XHR requests, usually XMLHttpRequest. However XDomainRequests will be used\n\t * for cross-domain requests if possible, and older versions of IE fall back on to ActiveX objects when necessary.\n\t * XHR requests load the content as text or binary data, provide progress and consistent completion events, and\n\t * can be canceled during load. Note that XHR is not supported in IE 6 or earlier, and is not recommended for\n\t * cross-domain loading.\n\t * @class XHRRequest\n\t * @constructor\n\t * @param {Object} item The object that defines the file to load. Please see the {{#crossLink \"LoadQueue/loadFile\"}}{{/crossLink}}\n\t * for an overview of supported file properties.\n\t * @extends AbstractLoader\n\t */\n\tfunction XHRRequest (item) {\n\t\tthis.AbstractRequest_constructor(item);\n\n\t\t// protected properties\n\t\t/**\n\t\t * A reference to the XHR request used to load the content.\n\t\t * @property _request\n\t\t * @type {XMLHttpRequest | XDomainRequest | ActiveX.XMLHTTP}\n\t\t * @private\n\t\t */\n\t\tthis._request = null;\n\n\t\t/**\n\t\t * A manual load timeout that is used for browsers that do not support the onTimeout event on XHR (XHR level 1,\n\t\t * typically IE9).\n\t\t * @property _loadTimeout\n\t\t * @type {Number}\n\t\t * @private\n\t\t */\n\t\tthis._loadTimeout = null;\n\n\t\t/**\n\t\t * The browser's XHR (XMLHTTPRequest) version. Supported versions are 1 and 2. There is no official way to detect\n\t\t * the version, so we use capabilities to make a best guess.\n\t\t * @property _xhrLevel\n\t\t * @type {Number}\n\t\t * @default 1\n\t\t * @private\n\t\t */\n\t\tthis._xhrLevel = 1;\n\n\t\t/**\n\t\t * The response of a loaded file. This is set because it is expensive to look up constantly. This property will be\n\t\t * null until the file is loaded.\n\t\t * @property _response\n\t\t * @type {mixed}\n\t\t * @private\n\t\t */\n\t\tthis._response = null;\n\n\t\t/**\n\t\t * The response of the loaded file before it is modified. In most cases, content is converted from raw text to\n\t\t * an HTML tag or a formatted object which is set to the <code>result</code> property, but the developer may still\n\t\t * want to access the raw content as it was loaded.\n\t\t * @property _rawResponse\n\t\t * @type {String|Object}\n\t\t * @private\n\t\t */\n\t\tthis._rawResponse = null;\n\n\t\tthis._canceled = false;\n\n\t\t// Setup our event handlers now.\n\t\tthis._handleLoadStartProxy = createjs.proxy(this._handleLoadStart, this);\n\t\tthis._handleProgressProxy = createjs.proxy(this._handleProgress, this);\n\t\tthis._handleAbortProxy = createjs.proxy(this._handleAbort, this);\n\t\tthis._handleErrorProxy = createjs.proxy(this._handleError, this);\n\t\tthis._handleTimeoutProxy = createjs.proxy(this._handleTimeout, this);\n\t\tthis._handleLoadProxy = createjs.proxy(this._handleLoad, this);\n\t\tthis._handleReadyStateChangeProxy = createjs.proxy(this._handleReadyStateChange, this);\n\n\t\tif (!this._createXHR(item)) {\n\t\t\t//TODO: Throw error?\n\t\t}\n\t};\n\n\tvar p = createjs.extend(XHRRequest, createjs.AbstractRequest);\n\n// static properties\n\t/**\n\t * A list of XMLHTTP object IDs to try when building an ActiveX object for XHR requests in earlier versions of IE.\n\t * @property ACTIVEX_VERSIONS\n\t * @type {Array}\n\t * @since 0.4.2\n\t * @private\n\t */\n\tXHRRequest.ACTIVEX_VERSIONS = [\n\t\t\"Msxml2.XMLHTTP.6.0\",\n\t\t\"Msxml2.XMLHTTP.5.0\",\n\t\t\"Msxml2.XMLHTTP.4.0\",\n\t\t\"MSXML2.XMLHTTP.3.0\",\n\t\t\"MSXML2.XMLHTTP\",\n\t\t\"Microsoft.XMLHTTP\"\n\t];\n\n// Public methods\n\t/**\n\t * Look up the loaded result.\n\t * @method getResult\n\t * @param {Boolean} [raw=false] Return a raw result instead of a formatted result. This applies to content\n\t * loaded via XHR such as scripts, XML, CSS, and Images. If there is no raw result, the formatted result will be\n\t * returned instead.\n\t * @return {Object} A result object containing the content that was loaded, such as:\n\t * <ul>\n\t *      <li>An image tag (&lt;image /&gt;) for images</li>\n\t *      <li>A script tag for JavaScript (&lt;script /&gt;). Note that scripts loaded with tags may be added to the\n\t *      HTML head.</li>\n\t *      <li>A style tag for CSS (&lt;style /&gt;)</li>\n\t *      <li>Raw text for TEXT</li>\n\t *      <li>A formatted JavaScript object defined by JSON</li>\n\t *      <li>An XML document</li>\n\t *      <li>An binary arraybuffer loaded by XHR</li>\n\t * </ul>\n\t * Note that if a raw result is requested, but not found, the result will be returned instead.\n\t */\n\tp.getResult = function (raw) {\n\t\tif (raw && this._rawResponse) {\n\t\t\treturn this._rawResponse;\n\t\t}\n\t\treturn this._response;\n\t};\n\n\t// Overrides abstract method in AbstractRequest\n\tp.cancel = function () {\n\t\tthis.canceled = true;\n\t\tthis._clean();\n\t\tthis._request.abort();\n\t};\n\n\t// Overrides abstract method in AbstractLoader\n\tp.load = function () {\n\t\tif (this._request == null) {\n\t\t\tthis._handleError();\n\t\t\treturn;\n\t\t}\n\n\t\t//Events\n\t\tif (this._request.addEventListener != null) {\n\t\t\tthis._request.addEventListener(\"loadstart\", this._handleLoadStartProxy, false);\n\t\t\tthis._request.addEventListener(\"progress\", this._handleProgressProxy, false);\n\t\t\tthis._request.addEventListener(\"abort\", this._handleAbortProxy, false);\n\t\t\tthis._request.addEventListener(\"error\", this._handleErrorProxy, false);\n\t\t\tthis._request.addEventListener(\"timeout\", this._handleTimeoutProxy, false);\n\n\t\t\t// Note: We don't get onload in all browsers (earlier FF and IE). onReadyStateChange handles these.\n\t\t\tthis._request.addEventListener(\"load\", this._handleLoadProxy, false);\n\t\t\tthis._request.addEventListener(\"readystatechange\", this._handleReadyStateChangeProxy, false);\n\t\t} else {\n\t\t\t// IE9 support\n\t\t\tthis._request.onloadstart = this._handleLoadStartProxy;\n\t\t\tthis._request.onprogress = this._handleProgressProxy;\n\t\t\tthis._request.onabort = this._handleAbortProxy;\n\t\t\tthis._request.onerror = this._handleErrorProxy;\n\t\t\tthis._request.ontimeout = this._handleTimeoutProxy;\n\n\t\t\t// Note: We don't get onload in all browsers (earlier FF and IE). onReadyStateChange handles these.\n\t\t\tthis._request.onload = this._handleLoadProxy;\n\t\t\tthis._request.onreadystatechange = this._handleReadyStateChangeProxy;\n\t\t}\n\n\t\t// Set up a timeout if we don't have XHR2\n\t\tif (this._xhrLevel == 1) {\n\t\t\tthis._loadTimeout = setTimeout(createjs.proxy(this._handleTimeout, this), this._item.loadTimeout);\n\t\t}\n\n\t\t// Sometimes we get back 404s immediately, particularly when there is a cross origin request.  // note this does not catch in Chrome\n\t\ttry {\n\t\t\tif (!this._item.values) {\n\t\t\t\tthis._request.send();\n\t\t\t} else {\n\t\t\t\tthis._request.send(createjs.URLUtils.formatQueryString(this._item.values));\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tthis.dispatchEvent(new createjs.ErrorEvent(\"XHR_SEND\", null, error));\n\t\t}\n\t};\n\n\tp.setResponseType = function (type) {\n\t\t// Some old browsers doesn't support blob, so we convert arraybuffer to blob after response is downloaded\n\t\tif (type === 'blob') {\n\t\t\ttype = window.URL ? 'blob' : 'arraybuffer';\n\t\t\tthis._responseType = type;\n\t\t}\n\t\tthis._request.responseType = type;\n\t};\n\n\t/**\n\t * Get all the response headers from the XmlHttpRequest.\n\t *\n\t * <strong>From the docs:</strong> Return all the HTTP headers, excluding headers that are a case-insensitive match\n\t * for Set-Cookie or Set-Cookie2, as a single string, with each header line separated by a U+000D CR U+000A LF pair,\n\t * excluding the status line, and with each header name and header value separated by a U+003A COLON U+0020 SPACE\n\t * pair.\n\t * @method getAllResponseHeaders\n\t * @return {String}\n\t * @since 0.4.1\n\t */\n\tp.getAllResponseHeaders = function () {\n\t\tif (this._request.getAllResponseHeaders instanceof Function) {\n\t\t\treturn this._request.getAllResponseHeaders();\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t};\n\n\t/**\n\t * Get a specific response header from the XmlHttpRequest.\n\t *\n\t * <strong>From the docs:</strong> Returns the header field value from the response of which the field name matches\n\t * header, unless the field name is Set-Cookie or Set-Cookie2.\n\t * @method getResponseHeader\n\t * @param {String} header The header name to retrieve.\n\t * @return {String}\n\t * @since 0.4.1\n\t */\n\tp.getResponseHeader = function (header) {\n\t\tif (this._request.getResponseHeader instanceof Function) {\n\t\t\treturn this._request.getResponseHeader(header);\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t};\n\n// protected methods\n\t/**\n\t * The XHR request has reported progress.\n\t * @method _handleProgress\n\t * @param {Object} event The XHR progress event.\n\t * @private\n\t */\n\tp._handleProgress = function (event) {\n\t\tif (!event || event.loaded > 0 && event.total == 0) {\n\t\t\treturn; // Sometimes we get no \"total\", so just ignore the progress event.\n\t\t}\n\n\t\tvar newEvent = new createjs.ProgressEvent(event.loaded, event.total);\n\t\tthis.dispatchEvent(newEvent);\n\t};\n\n\t/**\n\t * The XHR request has reported a load start.\n\t * @method _handleLoadStart\n\t * @param {Object} event The XHR loadStart event.\n\t * @private\n\t */\n\tp._handleLoadStart = function (event) {\n\t\tclearTimeout(this._loadTimeout);\n\t\tthis.dispatchEvent(\"loadstart\");\n\t};\n\n\t/**\n\t * The XHR request has reported an abort event.\n\t * @method handleAbort\n\t * @param {Object} event The XHR abort event.\n\t * @private\n\t */\n\tp._handleAbort = function (event) {\n\t\tthis._clean();\n\t\tthis.dispatchEvent(new createjs.ErrorEvent(\"XHR_ABORTED\", null, event));\n\t};\n\n\t/**\n\t * The XHR request has reported an error event.\n\t * @method _handleError\n\t * @param {Object} event The XHR error event.\n\t * @private\n\t */\n\tp._handleError = function (event) {\n\t\tthis._clean();\n\t\tthis.dispatchEvent(new createjs.ErrorEvent(event.message));\n\t};\n\n\t/**\n\t * The XHR request has reported a readyState change. Note that older browsers (IE 7 & 8) do not provide an onload\n\t * event, so we must monitor the readyStateChange to determine if the file is loaded.\n\t * @method _handleReadyStateChange\n\t * @param {Object} event The XHR readyStateChange event.\n\t * @private\n\t */\n\tp._handleReadyStateChange = function (event) {\n\t\tif (this._request.readyState == 4) {\n\t\t\tthis._handleLoad();\n\t\t}\n\t};\n\n\t/**\n\t * The XHR request has completed. This is called by the XHR request directly, or by a readyStateChange that has\n\t * <code>request.readyState == 4</code>. Only the first call to this method will be processed.\n\t *\n\t * Note that This method uses {{#crossLink \"_checkError\"}}{{/crossLink}} to determine if the server has returned an\n\t * error code.\n\t * @method _handleLoad\n\t * @param {Object} event The XHR load event.\n\t * @private\n\t */\n\tp._handleLoad = function (event) {\n\t\tif (this.loaded) {\n\t\t\treturn;\n\t\t}\n\t\tthis.loaded = true;\n\n\t\tvar error = this._checkError();\n\t\tif (error) {\n\t\t\tthis._handleError(error);\n\t\t\treturn;\n\t\t}\n\n\t\tthis._response = this._getResponse();\n\t\t// Convert arraybuffer back to blob\n\t\tif (this._responseType === 'arraybuffer') {\n\t\t\ttry {\n\t\t\t\tthis._response = new Blob([this._response]);\n\t\t\t} catch (e) {\n\t\t\t\t// Fallback to use BlobBuilder if Blob constructor is not supported\n\t\t\t\t// Tested on Android 2.3 ~ 4.2 and iOS5 safari\n\t\t\t\twindow.BlobBuilder = window.BlobBuilder || window.WebKitBlobBuilder || window.MozBlobBuilder || window.MSBlobBuilder;\n\t\t\t\tif (e.name === 'TypeError' && window.BlobBuilder) {\n\t\t\t\t\tvar builder = new BlobBuilder();\n\t\t\t\t\tbuilder.append(this._response);\n\t\t\t\t\tthis._response = builder.getBlob();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tthis._clean();\n\n\t\tthis.dispatchEvent(new createjs.Event(\"complete\"));\n\t};\n\n\t/**\n\t * The XHR request has timed out. This is called by the XHR request directly, or via a <code>setTimeout</code>\n\t * callback.\n\t * @method _handleTimeout\n\t * @param {Object} [event] The XHR timeout event. This is occasionally null when called by the backup setTimeout.\n\t * @private\n\t */\n\tp._handleTimeout = function (event) {\n\t\tthis._clean();\n\t\tthis.dispatchEvent(new createjs.ErrorEvent(\"PRELOAD_TIMEOUT\", null, event));\n\t};\n\n// Protected\n\t/**\n\t * Determine if there is an error in the current load.\n\t * Currently this checks the status of the request for problem codes, and not actual response content:\n\t * <ul>\n\t *     <li>Status codes between 400 and 599 (HTTP error range)</li>\n\t *     <li>A status of 0, but *only when the application is running on a server*. If the application is running\n\t *     on `file:`, then it may incorrectly treat an error on local (or embedded applications) as a successful\n\t *     load.</li>\n\t * </ul>\n\t * @method _checkError\n\t * @return {Error} An error with the status code in the `message` argument.\n\t * @private\n\t */\n\tp._checkError = function () {\n\t\tvar status = parseInt(this._request.status);\n\t\tif (status >= 400 && status <= 599) {\n\t\t\treturn new Error(status);\n\t\t} else if (status == 0) {\n\t\t\tif ((/^https?:/).test(location.protocol)) { return new Error(0); }\n\t\t\treturn null; // Likely an embedded app.\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t};\n\n\n\t/**\n\t * Validate the response. Different browsers have different approaches, some of which throw errors when accessed\n\t * in other browsers. If there is no response, the <code>_response</code> property will remain null.\n\t * @method _getResponse\n\t * @private\n\t */\n\tp._getResponse = function () {\n\t\tif (this._response != null) {\n\t\t\treturn this._response;\n\t\t}\n\n\t\tif (this._request.response != null) {\n\t\t\treturn this._request.response;\n\t\t}\n\n\t\t// Android 2.2 uses .responseText\n\t\ttry {\n\t\t\tif (this._request.responseText != null) {\n\t\t\t\treturn this._request.responseText;\n\t\t\t}\n\t\t} catch (e) {\n\t\t}\n\n\t\t// When loading XML, IE9 does not return .response, instead it returns responseXML.xml\n\t\ttry {\n\t\t\tif (this._request.responseXML != null) {\n\t\t\t\treturn this._request.responseXML;\n\t\t\t}\n\t\t} catch (e) {\n\t\t}\n\n\t\treturn null;\n\t};\n\n\t/**\n\t * Create an XHR request. Depending on a number of factors, we get totally different results.\n\t * <ol><li>Some browsers get an <code>XDomainRequest</code> when loading cross-domain.</li>\n\t *      <li>XMLHttpRequest are created when available.</li>\n\t *      <li>ActiveX.XMLHTTP objects are used in older IE browsers.</li>\n\t *      <li>Text requests override the mime type if possible</li>\n\t *      <li>Origin headers are sent for crossdomain requests in some browsers.</li>\n\t *      <li>Binary loads set the response type to \"arraybuffer\"</li></ol>\n\t * @method _createXHR\n\t * @param {Object} item The requested item that is being loaded.\n\t * @return {Boolean} If an XHR request or equivalent was successfully created.\n\t * @private\n\t */\n\tp._createXHR = function (item) {\n\t\t// Check for cross-domain loads. We can't fully support them, but we can try.\n\t\tvar crossdomain = createjs.URLUtils.isCrossDomain(item);\n\t\tvar headers = {};\n\n\t\t// Create the request. Fallback to whatever support we have.\n\t\tvar req = null;\n\t\tif (window.XMLHttpRequest) {\n\t\t\treq = new XMLHttpRequest();\n\t\t\t// This is 8 or 9, so use XDomainRequest instead.\n\t\t\tif (crossdomain && req.withCredentials === undefined && window.XDomainRequest) {\n\t\t\t\treq = new XDomainRequest();\n\t\t\t}\n\t\t} else { // Old IE versions use a different approach\n\t\t\tfor (var i = 0, l = s.ACTIVEX_VERSIONS.length; i < l; i++) {\n\t\t\t\tvar axVersion = s.ACTIVEX_VERSIONS[i];\n\t\t\t\ttry {\n\t\t\t\t\treq = new ActiveXObject(axVersion);\n\t\t\t\t\tbreak;\n\t\t\t\t} catch (e) {\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (req == null) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\t// Default to utf-8 for Text requests.\n\t\tif (item.mimeType == null && createjs.RequestUtils.isText(item.type)) {\n\t\t\titem.mimeType = \"text/plain; charset=utf-8\";\n\t\t}\n\n\t\t// IE9 doesn't support overrideMimeType(), so we need to check for it.\n\t\tif (item.mimeType && req.overrideMimeType) {\n\t\t\treq.overrideMimeType(item.mimeType);\n\t\t}\n\n\t\t// Determine the XHR level\n\t\tthis._xhrLevel = (typeof req.responseType === \"string\") ? 2 : 1;\n\n\t\tvar src = null;\n\t\tif (item.method == createjs.Methods.GET) {\n\t\t\tsrc = createjs.URLUtils.buildURI(item.src, item.values);\n\t\t} else {\n\t\t\tsrc = item.src;\n\t\t}\n\n\t\t// Open the request.  Set cross-domain flags if it is supported (XHR level 1 only)\n\t\treq.open(item.method || createjs.Methods.GET, src, true);\n\n\t\tif (crossdomain && req instanceof XMLHttpRequest && this._xhrLevel == 1) {\n\t\t\theaders[\"Origin\"] = location.origin;\n\t\t}\n\n\t\t// To send data we need to set the Content-type header)\n\t\tif (item.values && item.method == createjs.Methods.POST) {\n\t\t\theaders[\"Content-Type\"] = \"application/x-www-form-urlencoded\";\n\t\t}\n\n\t\tif (!crossdomain && !headers[\"X-Requested-With\"]) {\n\t\t\theaders[\"X-Requested-With\"] = \"XMLHttpRequest\";\n\t\t}\n\n\t\tif (item.headers) {\n\t\t\tfor (var n in item.headers) {\n\t\t\t\theaders[n] = item.headers[n];\n\t\t\t}\n\t\t}\n\n\t\tfor (n in headers) {\n\t\t\treq.setRequestHeader(n, headers[n])\n\t\t}\n\n\t\tif (req instanceof XMLHttpRequest && item.withCredentials !== undefined) {\n\t\t\treq.withCredentials = item.withCredentials;\n\t\t}\n\n\t\tthis._request = req;\n\n\t\treturn true;\n\t};\n\n\t/**\n\t * A request has completed (or failed or canceled), and needs to be disposed.\n\t * @method _clean\n\t * @private\n\t */\n\tp._clean = function () {\n\t\tclearTimeout(this._loadTimeout);\n\n\t\tif (this._request.removeEventListener != null) {\n\t\t\tthis._request.removeEventListener(\"loadstart\", this._handleLoadStartProxy);\n\t\t\tthis._request.removeEventListener(\"progress\", this._handleProgressProxy);\n\t\t\tthis._request.removeEventListener(\"abort\", this._handleAbortProxy);\n\t\t\tthis._request.removeEventListener(\"error\", this._handleErrorProxy);\n\t\t\tthis._request.removeEventListener(\"timeout\", this._handleTimeoutProxy);\n\t\t\tthis._request.removeEventListener(\"load\", this._handleLoadProxy);\n\t\t\tthis._request.removeEventListener(\"readystatechange\", this._handleReadyStateChangeProxy);\n\t\t} else {\n\t\t\tthis._request.onloadstart = null;\n\t\t\tthis._request.onprogress = null;\n\t\t\tthis._request.onabort = null;\n\t\t\tthis._request.onerror = null;\n\t\t\tthis._request.ontimeout = null;\n\t\t\tthis._request.onload = null;\n\t\t\tthis._request.onreadystatechange = null;\n\t\t}\n\t};\n\n\tp.toString = function () {\n\t\treturn \"[PreloadJS XHRRequest]\";\n\t};\n\n\tcreatejs.XHRRequest = createjs.promote(XHRRequest, \"AbstractRequest\");\n\n}());\n\n//##############################################################################\n// LoadQueue.js\n//##############################################################################\n\nwindow.createjs = window.createjs || {};\n\n/*\n TODO: WINDOWS ISSUES\n * No error for HTML audio in IE 678\n * SVG no failure error in IE 67 (maybe 8) TAGS AND XHR\n * No script complete handler in IE 67 TAGS (XHR is fine)\n * No XML/JSON in IE6 TAGS\n * Need to hide loading SVG in Opera TAGS\n * No CSS onload/readystatechange in Safari or Android TAGS (requires rule checking)\n * SVG no load or failure in Opera XHR\n * Reported issues with IE7/8\n */\n\n(function () {\n\t\"use strict\";\n\n// constructor\n\t/**\n\t * The LoadQueue class is the main API for preloading content. LoadQueue is a load manager, which can preload either\n\t * a single file, or queue of files.\n\t *\n\t * <b>Creating a Queue</b><br />\n\t * To use LoadQueue, create a LoadQueue instance. If you want to force tag loading where possible, set the preferXHR\n\t * argument to false.\n\t *\n\t *      var queue = new createjs.LoadQueue(true);\n\t *\n\t * <b>Listening for Events</b><br />\n\t * Add any listeners you want to the queue. Since PreloadJS 0.3.0, the {{#crossLink \"EventDispatcher\"}}{{/crossLink}}\n\t * lets you add as many listeners as you want for events. You can subscribe to the following events:<ul>\n\t *     <li>{{#crossLink \"AbstractLoader/complete:event\"}}{{/crossLink}}: fired when a queue completes loading all\n\t *     files</li>\n\t *     <li>{{#crossLink \"AbstractLoader/error:event\"}}{{/crossLink}}: fired when the queue encounters an error with\n\t *     any file.</li>\n\t *     <li>{{#crossLink \"AbstractLoader/progress:event\"}}{{/crossLink}}: Progress for the entire queue has\n\t *     changed.</li>\n\t *     <li>{{#crossLink \"LoadQueue/fileload:event\"}}{{/crossLink}}: A single file has completed loading.</li>\n\t *     <li>{{#crossLink \"LoadQueue/fileprogress:event\"}}{{/crossLink}}: Progress for a single file has changes. Note\n\t *     that only files loaded with XHR (or possibly by plugins) will fire progress events other than 0 or 100%.</li>\n\t * </ul>\n\t *\n\t *      queue.on(\"fileload\", handleFileLoad, this);\n\t *      queue.on(\"complete\", handleComplete, this);\n\t *\n\t * <b>Adding files and manifests</b><br />\n\t * Add files you want to load using {{#crossLink \"LoadQueue/loadFile\"}}{{/crossLink}} or add multiple files at a\n\t * time using a list or a manifest definition using {{#crossLink \"LoadQueue/loadManifest\"}}{{/crossLink}}. Files are\n\t * appended to the end of the active queue, so you can use these methods as many times as you like, whenever you\n\t * like.\n\t *\n\t *      queue.loadFile(\"filePath/file.jpg\");\n\t *      queue.loadFile({id:\"image\", src:\"filePath/file.jpg\"});\n\t *      queue.loadManifest([\"filePath/file.jpg\", {id:\"image\", src:\"filePath/file.jpg\"}]);\n\t *\n\t *      // Use an external manifest\n\t *      queue.loadManifest(\"path/to/manifest.json\");\n\t *      queue.loadManifest({src:\"manifest.json\", type:\"manifest\"});\n\t *\n\t * If you pass `false` as the `loadNow` parameter, the queue will not kick of the load of the files, but it will not\n\t * stop if it has already been started. Call the {{#crossLink \"AbstractLoader/load\"}}{{/crossLink}} method to begin\n\t * a paused queue. Note that a paused queue will automatically resume when new files are added to it with a\n\t * `loadNow` argument of `true`.\n\t *\n\t *      queue.load();\n\t *\n\t * <b>File Types</b><br />\n\t * The file type of a manifest item is auto-determined by the file extension. The pattern matching in PreloadJS\n\t * should handle the majority of standard file and url formats, and works with common file extensions. If you have\n\t * either a non-standard file extension, or are serving the file using a proxy script, then you can pass in a\n\t * <code>type</code> property with any manifest item.\n\t *\n\t *      queue.loadFile({src:\"path/to/myFile.mp3x\", type:createjs.Types.SOUND});\n\t *\n\t *      // Note that PreloadJS will not read a file extension from the query string\n\t *      queue.loadFile({src:\"http://server.com/proxy?file=image.jpg\", type:createjs.Types.IMAGE});\n\t *\n\t * Supported types are defined on the {{#crossLink \"AbstractLoader\"}}{{/crossLink}} class, and include:\n\t * <ul>\n\t *     <li>{{#crossLink \"Types/BINARY:property\"}}{{/crossLink}}: Raw binary data via XHR</li>\n\t *     <li>{{#crossLink \"Types/CSS:property\"}}{{/crossLink}}: CSS files</li>\n\t *     <li>{{#crossLink \"Types/IMAGE:property\"}}{{/crossLink}}: Common image formats</li>\n\t *     <li>{{#crossLink \"Types/JAVASCRIPT:property\"}}{{/crossLink}}: JavaScript files</li>\n\t *     <li>{{#crossLink \"Types/JSON:property\"}}{{/crossLink}}: JSON data</li>\n\t *     <li>{{#crossLink \"Types/JSONP:property\"}}{{/crossLink}}: JSON files cross-domain</li>\n\t *     <li>{{#crossLink \"Types/MANIFEST:property\"}}{{/crossLink}}: A list of files to load in JSON format, see\n\t *     {{#crossLink \"AbstractLoader/loadManifest\"}}{{/crossLink}}</li>\n\t *     <li>{{#crossLink \"Types/SOUND:property\"}}{{/crossLink}}: Audio file formats</li>\n\t *     <li>{{#crossLink \"Types/SPRITESHEET:property\"}}{{/crossLink}}: JSON SpriteSheet definitions. This\n\t *     will also load sub-images, and provide a {{#crossLink \"SpriteSheet\"}}{{/crossLink}} instance.</li>\n\t *     <li>{{#crossLink \"Types/SVG:property\"}}{{/crossLink}}: SVG files</li>\n\t *     <li>{{#crossLink \"Types/TEXT:property\"}}{{/crossLink}}: Text files - XHR only</li>\n     *     <li>{{#crossLink \"Types/VIDEO:property\"}}{{/crossLink}}: Video objects</li>\n\t *     <li>{{#crossLink \"Types/XML:property\"}}{{/crossLink}}: XML data</li>\n\t * </ul>\n\t *\n\t * <em>Note: Loader types used to be defined on LoadQueue, but have been moved to the Types class</em>\n\t *\n\t * <b>Handling Results</b><br />\n\t * When a file is finished downloading, a {{#crossLink \"LoadQueue/fileload:event\"}}{{/crossLink}} event is\n\t * dispatched. In an example above, there is an event listener snippet for fileload. Loaded files are usually a\n\t * formatted object that can be used immediately, including:\n\t * <ul>\n\t *     <li>Binary: The binary loaded result</li>\n\t *     <li>CSS: A &lt;link /&gt; tag</li>\n\t *     <li>Image: An &lt;img /&gt; tag</li>\n\t *     <li>JavaScript: A &lt;script /&gt; tag</li>\n\t *     <li>JSON/JSONP: A formatted JavaScript Object</li>\n\t *     <li>Manifest: A JavaScript object.\n\t *     <li>Sound: An &lt;audio /&gt; tag</a>\n\t *     <li>SpriteSheet: A {{#crossLink \"SpriteSheet\"}}{{/crossLink}} instance, containing loaded images.\n\t *     <li>SVG: An &lt;object /&gt; tag</li>\n\t *     <li>Text: Raw text</li>\n     *     <li>Video: A Video DOM node</li>\n\t *     <li>XML: An XML DOM node</li>\n\t * </ul>\n\t *\n\t *      function handleFileLoad(event) {\n\t *          var item = event.item; // A reference to the item that was passed in to the LoadQueue\n\t *          var type = item.type;\n\t *\n\t *          // Add any images to the page body.\n\t *          if (type == createjs.Types.IMAGE) {\n\t *              document.body.appendChild(event.result);\n\t *          }\n\t *      }\n\t *\n\t * At any time after the file has been loaded (usually after the queue has completed), any result can be looked up\n\t * via its \"id\" using {{#crossLink \"LoadQueue/getResult\"}}{{/crossLink}}. If no id was provided, then the\n\t * \"src\" or file path can be used instead, including the `path` defined by a manifest, but <strong>not including</strong>\n\t * a base path defined on the LoadQueue. It is recommended to always pass an id if you want to look up content.\n\t *\n\t *      var image = queue.getResult(\"image\");\n\t *      document.body.appendChild(image);\n\t *\n\t * Raw loaded content can be accessed using the <code>rawResult</code> property of the {{#crossLink \"LoadQueue/fileload:event\"}}{{/crossLink}}\n\t * event, or can be looked up using {{#crossLink \"LoadQueue/getResult\"}}{{/crossLink}}, passing `true` as the 2nd\n\t * argument. This is only applicable for content that has been parsed for the browser, specifically: JavaScript,\n\t * CSS, XML, SVG, and JSON objects, or anything loaded with XHR.\n\t *\n\t *      var image = queue.getResult(\"image\", true); // load the binary image data loaded with XHR.\n\t *\n\t * <b>Plugins</b><br />\n\t * LoadQueue has a simple plugin architecture to help process and preload content. For example, to preload audio,\n\t * make sure to install the <a href=\"http://soundjs.com\">SoundJS</a> Sound class, which will help load HTML audio,\n\t * Flash audio, and WebAudio files. This should be installed <strong>before</strong> loading any audio files.\n\t *\n\t *      queue.installPlugin(createjs.Sound);\n\t *\n\t * <h4>Known Browser Issues</h4>\n\t * <ul>\n\t *     <li>Browsers without audio support can not load audio files.</li>\n\t *     <li>Safari on Mac OS X can only play HTML audio if QuickTime is installed</li>\n\t *     <li>HTML Audio tags will only download until their <code>canPlayThrough</code> event is fired. Browsers other\n\t *     than Chrome will continue to download in the background.</li>\n\t *     <li>When loading scripts using tags, they are automatically added to the document.</li>\n\t *     <li>Scripts loaded via XHR may not be properly inspectable with browser tools.</li>\n\t *     <li>IE6 and IE7 (and some other browsers) may not be able to load XML, Text, or JSON, since they require\n\t *     XHR to work.</li>\n\t *     <li>Content loaded via tags will not show progress, and will continue to download in the background when\n\t *     canceled, although no events will be dispatched.</li>\n\t * </ul>\n\t *\n\t * @class LoadQueue\n\t * @param {Boolean} [preferXHR=true] Determines whether the preload instance will favor loading with XHR (XML HTTP\n\t * Requests), or HTML tags. When this is `false`, the queue will use tag loading when possible, and fall back on XHR\n\t * when necessary.\n\t * @param {String} [basePath=\"\"] A path that will be prepended on to the source parameter of all items in the queue\n\t * before they are loaded.  Sources beginning with a protocol such as `http://` or a relative path such as `../`\n\t * will not receive a base path.\n\t * @param {String|Boolean} [crossOrigin=\"\"] An optional flag to support images loaded from a CORS-enabled server. To\n\t * use it, set this value to `true`, which will default the crossOrigin property on images to \"Anonymous\". Any\n\t * string value will be passed through, but only \"\" and \"Anonymous\" are recommended. <strong>Note: The crossOrigin\n\t * parameter is deprecated. Use LoadItem.crossOrigin instead</strong>\n\t *\n\t * @constructor\n\t * @extends AbstractLoader\n\t */\n\tfunction LoadQueue (preferXHR, basePath, crossOrigin) {\n\t\tthis.AbstractLoader_constructor();\n\n\t\t/**\n\t\t * An array of the plugins registered using {{#crossLink \"LoadQueue/installPlugin\"}}{{/crossLink}}.\n\t\t * @property _plugins\n\t\t * @type {Array}\n\t\t * @private\n\t\t * @since 0.6.1\n\t\t */\n\t\tthis._plugins = [];\n\n\t\t/**\n\t\t * An object hash of callbacks that are fired for each file type before the file is loaded, giving plugins the\n\t\t * ability to override properties of the load. Please see the {{#crossLink \"LoadQueue/installPlugin\"}}{{/crossLink}}\n\t\t * method for more information.\n\t\t * @property _typeCallbacks\n\t\t * @type {Object}\n\t\t * @private\n\t\t */\n\t\tthis._typeCallbacks = {};\n\n\t\t/**\n\t\t * An object hash of callbacks that are fired for each file extension before the file is loaded, giving plugins the\n\t\t * ability to override properties of the load. Please see the {{#crossLink \"LoadQueue/installPlugin\"}}{{/crossLink}}\n\t\t * method for more information.\n\t\t * @property _extensionCallbacks\n\t\t * @type {null}\n\t\t * @private\n\t\t */\n\t\tthis._extensionCallbacks = {};\n\n\t\t/**\n\t\t * The next preload queue to process when this one is complete. If an error is thrown in the current queue, and\n\t\t * {{#crossLink \"LoadQueue/stopOnError:property\"}}{{/crossLink}} is `true`, the next queue will not be processed.\n\t\t * @property next\n\t\t * @type {LoadQueue}\n\t\t * @default null\n\t\t */\n\t\tthis.next = null;\n\n\t\t/**\n\t\t * Ensure loaded scripts \"complete\" in the order they are specified. Loaded scripts are added to the document head\n\t\t * once they are loaded. Scripts loaded via tags will load one-at-a-time when this property is `true`, whereas\n\t\t * scripts loaded using XHR can load in any order, but will \"finish\" and be added to the document in the order\n\t\t * specified.\n\t\t *\n\t\t * Any items can be set to load in order by setting the {{#crossLink \"maintainOrder:property\"}}{{/crossLink}}\n\t\t * property on the load item, or by ensuring that only one connection can be open at a time using\n\t\t * {{#crossLink \"LoadQueue/setMaxConnections\"}}{{/crossLink}}. Note that when the `maintainScriptOrder` property\n\t\t * is set to `true`, scripts items are automatically set to `maintainOrder=true`, and changing the\n\t\t * `maintainScriptOrder` to `false` during a load will not change items already in a queue.\n\t\t *\n\t\t * <h4>Example</h4>\n\t\t *\n\t\t *      var queue = new createjs.LoadQueue();\n\t\t *      queue.setMaxConnections(3); // Set a higher number to load multiple items at once\n\t\t *      queue.maintainScriptOrder = true; // Ensure scripts are loaded in order\n\t\t *      queue.loadManifest([\n\t\t *          \"script1.js\",\n\t\t *          \"script2.js\",\n\t\t *          \"image.png\", // Load any time\n\t\t *          {src: \"image2.png\", maintainOrder: true} // Will wait for script2.js\n\t\t *          \"image3.png\",\n\t\t *          \"script3.js\" // Will wait for image2.png before loading (or completing when loading with XHR)\n\t\t *      ]);\n\t\t *\n\t\t * @property maintainScriptOrder\n\t\t * @type {Boolean}\n\t\t * @default true\n\t\t */\n\t\tthis.maintainScriptOrder = true;\n\n\t\t/**\n\t\t * Determines if the LoadQueue will stop processing the current queue when an error is encountered.\n\t\t * @property stopOnError\n\t\t * @type {Boolean}\n\t\t * @default false\n\t\t */\n\t\tthis.stopOnError = false;\n\n\t\t/**\n\t\t * The number of maximum open connections that a loadQueue tries to maintain. Please see\n\t\t * {{#crossLink \"LoadQueue/setMaxConnections\"}}{{/crossLink}} for more information.\n\t\t * @property _maxConnections\n\t\t * @type {Number}\n\t\t * @default 1\n\t\t * @private\n\t\t */\n\t\tthis._maxConnections = 1;\n\n\t\t/**\n\t\t * An internal list of all the default Loaders that are included with PreloadJS. Before an item is loaded, the\n\t\t * available loader list is iterated, in the order they are included, and as soon as a loader indicates it can\n\t\t * handle the content, it will be selected. The default loader, ({{#crossLink \"TextLoader\"}}{{/crossLink}} is\n\t\t * last in the list, so it will be used if no other match is found. Typically, loaders will match based on the\n\t\t * {{#crossLink \"LoadItem/type\"}}{{/crossLink}}, which is automatically determined using the file extension of\n\t\t * the {{#crossLink \"LoadItem/src:property\"}}{{/crossLink}}.\n\t\t *\n\t\t * Loaders can be removed from PreloadJS by simply not including them.\n\t\t *\n\t\t * Custom loaders installed using {{#crossLink \"registerLoader\"}}{{/crossLink}} will be prepended to this list\n\t\t * so that they are checked first.\n\t\t * @property _availableLoaders\n\t\t * @type {Array}\n\t\t * @private\n\t\t * @since 0.6.0\n\t\t */\n\t\tthis._availableLoaders = [\n            createjs.FontLoader,\n\t\t\tcreatejs.ImageLoader,\n\t\t\tcreatejs.JavaScriptLoader,\n\t\t\tcreatejs.CSSLoader,\n\t\t\tcreatejs.JSONLoader,\n\t\t\tcreatejs.JSONPLoader,\n\t\t\tcreatejs.SoundLoader,\n\t\t\tcreatejs.ManifestLoader,\n\t\t\tcreatejs.SpriteSheetLoader,\n\t\t\tcreatejs.XMLLoader,\n\t\t\tcreatejs.SVGLoader,\n\t\t\tcreatejs.BinaryLoader,\n\t\t\tcreatejs.VideoLoader,\n\t\t\tcreatejs.TextLoader\n\t\t];\n\n\t\t/**\n\t\t * The number of built in loaders, so they can't be removed by {{#crossLink \"unregisterLoader\"}}{{/crossLink}.\n\t\t\t\t * @property _defaultLoaderLength\n\t\t * @type {Number}\n\t\t * @private\n\t\t * @since 0.6.0\n\t\t */\n\t\tthis._defaultLoaderLength = this._availableLoaders.length;\n\n\t\tthis.init(preferXHR, basePath, crossOrigin);\n\t}\n\n\tvar p = createjs.extend(LoadQueue, createjs.AbstractLoader);\n\tvar s = LoadQueue;\n\n\t// Remove these @deprecated properties after 1.0\n\ttry {\n\t\tObject.defineProperties(s, {\n\t\t\tPOST: { get: createjs.deprecate(function() { return createjs.Methods.POST; }, \"AbstractLoader.POST\") },\n\t\t\tGET: { get: createjs.deprecate(function() { return createjs.Methods.GET; }, \"AbstractLoader.GET\") },\n\n\t\t\tBINARY: { get: createjs.deprecate(function() { return createjs.Types.BINARY; }, \"AbstractLoader.BINARY\") },\n\t\t\tCSS: { get: createjs.deprecate(function() { return createjs.Types.CSS; }, \"AbstractLoader.CSS\") },\n\t\t\tFONT: { get: createjs.deprecate(function() { return createjs.Types.FONT; }, \"AbstractLoader.FONT\") },\n\t\t\tFONTCSS: { get: createjs.deprecate(function() { return createjs.Types.FONTCSS; }, \"AbstractLoader.FONTCSS\") },\n\t\t\tIMAGE: { get: createjs.deprecate(function() { return createjs.Types.IMAGE; }, \"AbstractLoader.IMAGE\") },\n\t\t\tJAVASCRIPT: { get: createjs.deprecate(function() { return createjs.Types.JAVASCRIPT; }, \"AbstractLoader.JAVASCRIPT\") },\n\t\t\tJSON: { get: createjs.deprecate(function() { return createjs.Types.JSON; }, \"AbstractLoader.JSON\") },\n\t\t\tJSONP: { get: createjs.deprecate(function() { return createjs.Types.JSONP; }, \"AbstractLoader.JSONP\") },\n\t\t\tMANIFEST: { get: createjs.deprecate(function() { return createjs.Types.MANIFEST; }, \"AbstractLoader.MANIFEST\") },\n\t\t\tSOUND: { get: createjs.deprecate(function() { return createjs.Types.SOUND; }, \"AbstractLoader.SOUND\") },\n\t\t\tVIDEO: { get: createjs.deprecate(function() { return createjs.Types.VIDEO; }, \"AbstractLoader.VIDEO\") },\n\t\t\tSPRITESHEET: { get: createjs.deprecate(function() { return createjs.Types.SPRITESHEET; }, \"AbstractLoader.SPRITESHEET\") },\n\t\t\tSVG: { get: createjs.deprecate(function() { return createjs.Types.SVG; }, \"AbstractLoader.SVG\") },\n\t\t\tTEXT: { get: createjs.deprecate(function() { return createjs.Types.TEXT; }, \"AbstractLoader.TEXT\") },\n\t\t\tXML: { get: createjs.deprecate(function() { return createjs.Types.XML; }, \"AbstractLoader.XML\") }\n\t\t});\n\t} catch (e) {}\n\n\t/**\n\t * An internal initialization method, which is used for initial set up, but also to reset the LoadQueue.\n\t * @method init\n\t * @param preferXHR\n\t * @param basePath\n\t * @param crossOrigin\n\t * @private\n\t */\n\tp.init = function (preferXHR, basePath, crossOrigin) {\n\n\t\t// public properties\n\n\t\t/**\n\t\t * Try and use XMLHttpRequest (XHR) when possible. Note that LoadQueue will default to tag loading or XHR\n\t\t * loading depending on the requirements for a media type. For example, HTML audio can not be loaded with XHR,\n\t\t * and plain text can not be loaded with tags, so it will default the the correct type instead of using the\n\t\t * user-defined type.\n\t\t * @type {Boolean}\n\t\t * @default true\n\t\t * @since 0.6.0\n\t\t */\n\t\tthis.preferXHR = true; //TODO: Get/Set\n\t\tthis._preferXHR = true;\n\t\tthis.setPreferXHR(preferXHR);\n\n\t\t// protected properties\n\t\t/**\n\t\t * Whether the queue is currently paused or not.\n\t\t * @property _paused\n\t\t * @type {boolean}\n\t\t * @private\n\t\t */\n\t\tthis._paused = false;\n\n\t\t/**\n\t\t * A path that will be prepended on to the item's {{#crossLink \"LoadItem/src:property\"}}{{/crossLink}}. The\n\t\t * `_basePath` property will only be used if an item's source is relative, and does not include a protocol such\n\t\t * as `http://`, or a relative path such as `../`.\n\t\t * @property _basePath\n\t\t * @type {String}\n\t\t * @private\n\t\t * @since 0.3.1\n\t\t */\n\t\tthis._basePath = basePath;\n\n\t\t/**\n\t\t * An optional flag to set on images that are loaded using PreloadJS, which enables CORS support. Images loaded\n\t\t * cross-domain by servers that support CORS require the crossOrigin flag to be loaded and interacted with by\n\t\t * a canvas. When loading locally, or with a server with no CORS support, this flag can cause other security issues,\n\t\t * so it is recommended to only set it if you are sure the server supports it. Currently, supported values are \"\"\n\t\t * and \"Anonymous\".\n\t\t * @property _crossOrigin\n\t\t * @type {String}\n\t\t * @default \"\"\n\t\t * @private\n\t\t * @since 0.4.1\n\t\t */\n\t\tthis._crossOrigin = crossOrigin;\n\n\t\t/**\n\t\t * Determines if the loadStart event was dispatched already. This event is only fired one time, when the first\n\t\t * file is requested.\n\t\t * @property _loadStartWasDispatched\n\t\t * @type {Boolean}\n\t\t * @default false\n\t\t * @private\n\t\t */\n\t\tthis._loadStartWasDispatched = false;\n\n\t\t/**\n\t\t * Determines if there is currently a script loading. This helps ensure that only a single script loads at once when\n\t\t * using a script tag to do preloading.\n\t\t * @property _currentlyLoadingScript\n\t\t * @type {Boolean}\n\t\t * @private\n\t\t */\n\t\tthis._currentlyLoadingScript = null;\n\n\t\t/**\n\t\t * An array containing the currently downloading files.\n\t\t * @property _currentLoads\n\t\t * @type {Array}\n\t\t * @private\n\t\t */\n\t\tthis._currentLoads = [];\n\n\t\t/**\n\t\t * An array containing the queued items that have not yet started downloading.\n\t\t * @property _loadQueue\n\t\t * @type {Array}\n\t\t * @private\n\t\t */\n\t\tthis._loadQueue = [];\n\n\t\t/**\n\t\t * An array containing downloads that have not completed, so that the LoadQueue can be properly reset.\n\t\t * @property _loadQueueBackup\n\t\t * @type {Array}\n\t\t * @private\n\t\t */\n\t\tthis._loadQueueBackup = [];\n\n\t\t/**\n\t\t * An object hash of items that have finished downloading, indexed by the {{#crossLink \"LoadItem\"}}{{/crossLink}}\n\t\t * id.\n\t\t * @property _loadItemsById\n\t\t * @type {Object}\n\t\t * @private\n\t\t */\n\t\tthis._loadItemsById = {};\n\n\t\t/**\n\t\t * An object hash of items that have finished downloading, indexed by {{#crossLink \"LoadItem\"}}{{/crossLink}}\n\t\t * source.\n\t\t * @property _loadItemsBySrc\n\t\t * @type {Object}\n\t\t * @private\n\t\t */\n\t\tthis._loadItemsBySrc = {};\n\n\t\t/**\n\t\t * An object hash of loaded items, indexed by the ID of the {{#crossLink \"LoadItem\"}}{{/crossLink}}.\n\t\t * @property _loadedResults\n\t\t * @type {Object}\n\t\t * @private\n\t\t */\n\t\tthis._loadedResults = {};\n\n\t\t/**\n\t\t * An object hash of un-parsed loaded items, indexed by the ID of the {{#crossLink \"LoadItem\"}}{{/crossLink}}.\n\t\t * @property _loadedRawResults\n\t\t * @type {Object}\n\t\t * @private\n\t\t */\n\t\tthis._loadedRawResults = {};\n\n\t\t/**\n\t\t * The number of items that have been requested. This helps manage an overall progress without knowing how large\n\t\t * the files are before they are downloaded. This does not include items inside of loaders such as the\n\t\t * {{#crossLink \"ManifestLoader\"}}{{/crossLink}}.\n\t\t * @property _numItems\n\t\t * @type {Number}\n\t\t * @default 0\n\t\t * @private\n\t\t */\n\t\tthis._numItems = 0;\n\n\t\t/**\n\t\t * The number of items that have completed loaded. This helps manage an overall progress without knowing how large\n\t\t * the files are before they are downloaded.\n\t\t * @property _numItemsLoaded\n\t\t * @type {Number}\n\t\t * @default 0\n\t\t * @private\n\t\t */\n\t\tthis._numItemsLoaded = 0;\n\n\t\t/**\n\t\t * A list of scripts in the order they were requested. This helps ensure that scripts are \"completed\" in the right\n\t\t * order.\n\t\t * @property _scriptOrder\n\t\t * @type {Array}\n\t\t * @private\n\t\t */\n\t\tthis._scriptOrder = [];\n\n\t\t/**\n\t\t * A list of scripts that have been loaded. Items are added to this list as <code>null</code> when they are\n\t\t * requested, contain the loaded item if it has completed, but not been dispatched to the user, and <code>true</true>\n\t\t * once they are complete and have been dispatched.\n\t\t * @property _loadedScripts\n\t\t * @type {Array}\n\t\t * @private\n\t\t */\n\t\tthis._loadedScripts = [];\n\n\t\t/**\n\t\t * The last progress amount. This is used to suppress duplicate progress events.\n\t\t * @property _lastProgress\n\t\t * @type {Number}\n\t\t * @private\n\t\t * @since 0.6.0\n\t\t */\n\t\tthis._lastProgress = NaN;\n\n\t};\n\n// static properties\n\n// events\n\t/**\n\t * This event is fired when an individual file has loaded, and been processed.\n\t * @event fileload\n\t * @param {Object} target The object that dispatched the event.\n\t * @param {String} type The event type.\n\t * @param {Object} item The file item which was specified in the {{#crossLink \"LoadQueue/loadFile\"}}{{/crossLink}}\n\t * or {{#crossLink \"LoadQueue/loadManifest\"}}{{/crossLink}} call. If only a string path or tag was specified, the\n\t * object will contain that value as a `src` property.\n\t * @param {Object} result The HTML tag or parsed result of the loaded item.\n\t * @param {Object} rawResult The unprocessed result, usually the raw text or binary data before it is converted\n\t * to a usable object.\n\t * @since 0.3.0\n\t */\n\n\t/**\n\t * This {{#crossLink \"ProgressEvent\"}}{{/crossLink}} that is fired when an an individual file's progress changes.\n\t * @event fileprogress\n\t * @since 0.3.0\n\t */\n\n\t/**\n\t * This event is fired when an individual file starts to load.\n\t * @event filestart\n\t * @param {Object} target The object that dispatched the event.\n\t * @param {String} type The event type.\n\t * @param {Object} item The file item which was specified in the {{#crossLink \"LoadQueue/loadFile\"}}{{/crossLink}}\n\t * or {{#crossLink \"LoadQueue/loadManifest\"}}{{/crossLink}} call. If only a string path or tag was specified, the\n\t * object will contain that value as a property.\n\t */\n\n\t/**\n\t * Although it extends {{#crossLink \"AbstractLoader\"}}{{/crossLink}}, the `initialize` event is never fired from\n\t * a LoadQueue instance.\n\t * @event initialize\n\t * @private\n\t */\n\n// public methods\n\t/**\n\t * Register a custom loaders class. New loaders are given precedence over loaders added earlier and default loaders.\n\t * It is recommended that loaders extend {{#crossLink \"AbstractLoader\"}}{{/crossLink}}. Loaders can only be added\n\t * once, and will be prepended to the list of available loaders.\n\t * @method registerLoader\n\t * @param {Function|AbstractLoader} loader The AbstractLoader class to add.\n\t * @since 0.6.0\n\t */\n\tp.registerLoader = function (loader) {\n\t\tif (!loader || !loader.canLoadItem) {\n\t\t\tthrow new Error(\"loader is of an incorrect type.\");\n\t\t} else if (this._availableLoaders.indexOf(loader) != -1) {\n\t\t\tthrow new Error(\"loader already exists.\"); //LM: Maybe just silently fail here\n\t\t}\n\n\t\tthis._availableLoaders.unshift(loader);\n\t};\n\n\t/**\n\t * Remove a custom loader added using {{#crossLink \"registerLoader\"}}{{/crossLink}}. Only custom loaders can be\n\t * unregistered, the default loaders will always be available.\n\t * @method unregisterLoader\n\t * @param {Function|AbstractLoader} loader The AbstractLoader class to remove\n\t */\n\tp.unregisterLoader = function (loader) {\n\t\tvar idx = this._availableLoaders.indexOf(loader);\n\t\tif (idx != -1 && idx < this._defaultLoaderLength - 1) {\n\t\t\tthis._availableLoaders.splice(idx, 1);\n\t\t}\n\t};\n\n\t/**\n\t * Change the {{#crossLink \"preferXHR:property\"}}{{/crossLink}} value. Note that if this is set to `true`, it may\n\t * fail, or be ignored depending on the browser's capabilities and the load type.\n\t * @method setPreferXHR\n\t * @param {Boolean} value\n\t * @returns {Boolean} The value of {{#crossLink \"preferXHR\"}}{{/crossLink}} that was successfully set.\n\t * @since 0.6.0\n\t */\n\tp.setPreferXHR = function (value) {\n\t\t// Determine if we can use XHR. XHR defaults to TRUE, but the browser may not support it.\n\t\t//TODO: Should we be checking for the other XHR types? Might have to do a try/catch on the different types similar to createXHR.\n\t\tthis.preferXHR = (value != false && window.XMLHttpRequest != null);\n\t\treturn this.preferXHR;\n\t};\n\n\t/**\n\t * Stops all queued and loading items, and clears the queue. This also removes all internal references to loaded\n\t * content, and allows the queue to be used again.\n\t * @method removeAll\n\t * @since 0.3.0\n\t */\n\tp.removeAll = function () {\n\t\tthis.remove();\n\t};\n\n\t/**\n\t * Stops an item from being loaded, and removes it from the queue. If nothing is passed, all items are removed.\n\t * This also removes internal references to loaded item(s).\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      queue.loadManifest([\n\t *          {src:\"test.png\", id:\"png\"},\n\t *          {src:\"test.jpg\", id:\"jpg\"},\n\t *          {src:\"test.mp3\", id:\"mp3\"}\n\t *      ]);\n\t *      queue.remove(\"png\"); // Single item by ID\n\t *      queue.remove(\"png\", \"test.jpg\"); // Items as arguments. Mixed id and src.\n\t *      queue.remove([\"test.png\", \"jpg\"]); // Items in an Array. Mixed id and src.\n\t *\n\t * @method remove\n\t * @param {String | Array} idsOrUrls* The id or ids to remove from this queue. You can pass an item, an array of\n\t * items, or multiple items as arguments.\n\t * @since 0.3.0\n\t */\n\tp.remove = function (idsOrUrls) {\n\t\tvar args = null;\n\n\t\tif (idsOrUrls && !Array.isArray(idsOrUrls)) {\n\t\t\targs = [idsOrUrls];\n\t\t} else if (idsOrUrls) {\n\t\t\targs = idsOrUrls;\n\t\t} else if (arguments.length > 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar itemsWereRemoved = false;\n\n\t\t// Destroy everything\n\t\tif (!args) {\n\t\t\tthis.close();\n\t\t\tfor (var n in this._loadItemsById) {\n\t\t\t\tthis._disposeItem(this._loadItemsById[n]);\n\t\t\t}\n\t\t\tthis.init(this.preferXHR, this._basePath);\n\n\t\t\t// Remove specific items\n\t\t} else {\n\t\t\twhile (args.length) {\n\t\t\t\tvar item = args.pop();\n\t\t\t\tvar r = this.getResult(item);\n\n\t\t\t\t//Remove from the main load Queue\n\t\t\t\tfor (i = this._loadQueue.length - 1; i >= 0; i--) {\n\t\t\t\t\tloadItem = this._loadQueue[i].getItem();\n\t\t\t\t\tif (loadItem.id == item || loadItem.src == item) {\n\t\t\t\t\t\tthis._loadQueue.splice(i, 1)[0].cancel();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t//Remove from the backup queue\n\t\t\t\tfor (i = this._loadQueueBackup.length - 1; i >= 0; i--) {\n\t\t\t\t\tloadItem = this._loadQueueBackup[i].getItem();\n\t\t\t\t\tif (loadItem.id == item || loadItem.src == item) {\n\t\t\t\t\t\tthis._loadQueueBackup.splice(i, 1)[0].cancel();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (r) {\n\t\t\t\t\tthis._disposeItem(this.getItem(item));\n\t\t\t\t} else {\n\t\t\t\t\tfor (var i = this._currentLoads.length - 1; i >= 0; i--) {\n\t\t\t\t\t\tvar loadItem = this._currentLoads[i].getItem();\n\t\t\t\t\t\tif (loadItem.id == item || loadItem.src == item) {\n\t\t\t\t\t\t\tthis._currentLoads.splice(i, 1)[0].cancel();\n\t\t\t\t\t\t\titemsWereRemoved = true;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// If this was called during a load, try to load the next item.\n\t\t\tif (itemsWereRemoved) {\n\t\t\t\tthis._loadNext();\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t * Stops all open loads, destroys any loaded items, and resets the queue, so all items can\n\t * be reloaded again by calling {{#crossLink \"AbstractLoader/load\"}}{{/crossLink}}. Items are not removed from the\n\t * queue. To remove items use the {{#crossLink \"LoadQueue/remove\"}}{{/crossLink}} or\n\t * {{#crossLink \"LoadQueue/removeAll\"}}{{/crossLink}} method.\n\t * @method reset\n\t * @since 0.3.0\n\t */\n\tp.reset = function () {\n\t\tthis.close();\n\t\tfor (var n in this._loadItemsById) {\n\t\t\tthis._disposeItem(this._loadItemsById[n]);\n\t\t}\n\n\t\t//Reset the queue to its start state\n\t\tvar a = [];\n\t\tfor (var i = 0, l = this._loadQueueBackup.length; i < l; i++) {\n\t\t\ta.push(this._loadQueueBackup[i].getItem());\n\t\t}\n\n\t\tthis.loadManifest(a, false);\n\t};\n\n\t/**\n\t * Register a plugin. Plugins can map to load types (sound, image, etc), or specific extensions (png, mp3, etc).\n\t * Currently, only one plugin can exist per type/extension.\n\t *\n\t * When a plugin is installed, a <code>getPreloadHandlers()</code> method will be called on it. For more information\n\t * on this method, check out the {{#crossLink \"SamplePlugin/getPreloadHandlers\"}}{{/crossLink}} method in the\n\t * {{#crossLink \"SamplePlugin\"}}{{/crossLink}} class.\n\t *\n\t * Before a file is loaded, a matching plugin has an opportunity to modify the load. If a `callback` is returned\n\t * from the {{#crossLink \"SamplePlugin/getPreloadHandlers\"}}{{/crossLink}} method, it will be invoked first, and its\n\t * result may cancel or modify the item. The callback method can also return a `completeHandler` to be fired when\n\t * the file is loaded, or a `tag` object, which will manage the actual download. For more information on these\n\t * methods, check out the {{#crossLink \"SamplePlugin/preloadHandler\"}}{{/crossLink}} and {{#crossLink \"SamplePlugin/fileLoadHandler\"}}{{/crossLink}}\n\t * methods on the {{#crossLink \"SamplePlugin\"}}{{/crossLink}}.\n\t *\n\t * @method installPlugin\n\t * @param {Function} plugin The plugin class to install.\n\t */\n\tp.installPlugin = function (plugin) {\n\t\tif (plugin == null) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (plugin.getPreloadHandlers != null) {\n\t\t\tthis._plugins.push(plugin);\n\t\t\tvar map = plugin.getPreloadHandlers();\n\t\t\tmap.scope = plugin;\n\n\t\t\tif (map.types != null) {\n\t\t\t\tfor (var i = 0, l = map.types.length; i < l; i++) {\n\t\t\t\t\tthis._typeCallbacks[map.types[i]] = map;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (map.extensions != null) {\n\t\t\t\tfor (i = 0, l = map.extensions.length; i < l; i++) {\n\t\t\t\t\tthis._extensionCallbacks[map.extensions[i]] = map;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t * Set the maximum number of concurrent connections. Note that browsers and servers may have a built-in maximum\n\t * number of open connections, so any additional connections may remain in a pending state until the browser\n\t * opens the connection. When loading scripts using tags, and when {{#crossLink \"LoadQueue/maintainScriptOrder:property\"}}{{/crossLink}}\n\t * is `true`, only one script is loaded at a time due to browser limitations.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      var queue = new createjs.LoadQueue();\n\t *      queue.setMaxConnections(10); // Allow 10 concurrent loads\n\t *\n\t * @method setMaxConnections\n\t * @param {Number} value The number of concurrent loads to allow. By default, only a single connection per LoadQueue\n\t * is open at any time.\n\t */\n\tp.setMaxConnections = function (value) {\n\t\tthis._maxConnections = value;\n\t\tif (!this._paused && this._loadQueue.length > 0) {\n\t\t\tthis._loadNext();\n\t\t}\n\t};\n\n\t/**\n\t * Load a single file. To add multiple files at once, use the {{#crossLink \"LoadQueue/loadManifest\"}}{{/crossLink}}\n\t * method.\n\t *\n\t * Files are always appended to the current queue, so this method can be used multiple times to add files.\n\t * To clear the queue first, use the {{#crossLink \"AbstractLoader/close\"}}{{/crossLink}} method.\n\t * @method loadFile\n\t * @param {LoadItem|Object|String} file The file object or path to load. A file can be either\n\t * <ul>\n\t *     <li>A {{#crossLink \"LoadItem\"}}{{/crossLink}} instance</li>\n\t *     <li>An object containing properties defined by {{#crossLink \"LoadItem\"}}{{/crossLink}}</li>\n\t *     <li>OR A string path to a resource. Note that this kind of load item will be converted to a {{#crossLink \"LoadItem\"}}{{/crossLink}}\n\t *     in the background.</li>\n\t * </ul>\n\t * @param {Boolean} [loadNow=true] Kick off an immediate load (true) or wait for a load call (false). The default\n\t * value is true. If the queue is paused using {{#crossLink \"LoadQueue/setPaused\"}}{{/crossLink}}, and the value is\n\t * `true`, the queue will resume automatically.\n\t * @param {String} [basePath] A base path that will be prepended to each file. The basePath argument overrides the\n\t * path specified in the constructor. Note that if you load a manifest using a file of type {{#crossLink \"Types/MANIFEST:property\"}}{{/crossLink}},\n\t * its files will <strong>NOT</strong> use the basePath parameter. <strong>The basePath parameter is deprecated.</strong>\n\t * This parameter will be removed in a future version. Please either use the `basePath` parameter in the LoadQueue\n\t * constructor, or a `path` property in a manifest definition.\n\t */\n\tp.loadFile = function (file, loadNow, basePath) {\n\t\tif (file == null) {\n\t\t\tvar event = new createjs.ErrorEvent(\"PRELOAD_NO_FILE\");\n\t\t\tthis._sendError(event);\n\t\t\treturn;\n\t\t}\n\t\tthis._addItem(file, null, basePath);\n\n\t\tif (loadNow !== false) {\n\t\t\tthis.setPaused(false);\n\t\t} else {\n\t\t\tthis.setPaused(true);\n\t\t}\n\t};\n\n\t/**\n\t * Load an array of files. To load a single file, use the {{#crossLink \"LoadQueue/loadFile\"}}{{/crossLink}} method.\n\t * The files in the manifest are requested in the same order, but may complete in a different order if the max\n\t * connections are set above 1 using {{#crossLink \"LoadQueue/setMaxConnections\"}}{{/crossLink}}. Scripts will load\n\t * in the right order as long as {{#crossLink \"LoadQueue/maintainScriptOrder\"}}{{/crossLink}} is true (which is\n\t * default).\n\t *\n\t * Files are always appended to the current queue, so this method can be used multiple times to add files.\n\t * To clear the queue first, use the {{#crossLink \"AbstractLoader/close\"}}{{/crossLink}} method.\n\t * @method loadManifest\n\t * @param {Array|String|Object} manifest An list of files to load. The loadManifest call supports four types of\n\t * manifests:\n\t * <ol>\n\t *     <li>A string path, which points to a manifest file, which is a JSON file that contains a \"manifest\" property,\n\t *     which defines the list of files to load, and can optionally contain a \"path\" property, which will be\n\t *     prepended to each file in the list.</li>\n\t *     <li>An object which defines a \"src\", which is a JSON or JSONP file. A \"callback\" can be defined for JSONP\n\t *     file. The JSON/JSONP file should contain a \"manifest\" property, which defines the list of files to load,\n\t *     and can optionally contain a \"path\" property, which will be prepended to each file in the list.</li>\n\t *     <li>An object which contains a \"manifest\" property, which defines the list of files to load, and can\n\t *     optionally contain a \"path\" property, which will be prepended to each file in the list.</li>\n\t *     <li>An Array of files to load.</li>\n\t * </ol>\n\t *\n\t * Each \"file\" in a manifest can be either:\n\t * <ul>\n\t *     <li>A {{#crossLink \"LoadItem\"}}{{/crossLink}} instance</li>\n\t *     <li>An object containing properties defined by {{#crossLink \"LoadItem\"}}{{/crossLink}}</li>\n\t *     <li>OR A string path to a resource. Note that this kind of load item will be converted to a {{#crossLink \"LoadItem\"}}{{/crossLink}}\n\t *     in the background.</li>\n\t * </ul>\n\t *\n\t * @param {Boolean} [loadNow=true] Kick off an immediate load (true) or wait for a load call (false). The default\n\t * value is true. If the queue is paused using {{#crossLink \"LoadQueue/setPaused\"}}{{/crossLink}} and this value is\n\t * `true`, the queue will resume automatically.\n\t * @param {String} [basePath] A base path that will be prepended to each file. The basePath argument overrides the\n\t * path specified in the constructor. Note that if you load a manifest using a file of type {{#crossLink \"LoadQueue/MANIFEST:property\"}}{{/crossLink}},\n\t * its files will <strong>NOT</strong> use the basePath parameter. <strong>The basePath parameter is deprecated.</strong>\n\t * This parameter will be removed in a future version. Please either use the `basePath` parameter in the LoadQueue\n\t * constructor, or a `path` property in a manifest definition.\n\t */\n\tp.loadManifest = function (manifest, loadNow, basePath) {\n\t\tvar fileList = null;\n\t\tvar path = null;\n\n\t\t// Array-based list of items\n\t\tif (Array.isArray(manifest)) {\n\t\t\tif (manifest.length == 0) {\n\t\t\t\tvar event = new createjs.ErrorEvent(\"PRELOAD_MANIFEST_EMPTY\");\n\t\t\t\tthis._sendError(event);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tfileList = manifest;\n\n\t\t\t// String-based. Only file manifests can be specified this way. Any other types will cause an error when loaded.\n\t\t} else if (typeof(manifest) === \"string\") {\n\t\t\tfileList = [\n\t\t\t\t{\n\t\t\t\t\tsrc: manifest,\n\t\t\t\t\ttype: s.MANIFEST\n\t\t\t\t}\n\t\t\t];\n\n\t\t} else if (typeof(manifest) == \"object\") {\n\n\t\t\t// An object that defines a manifest path\n\t\t\tif (manifest.src !== undefined) {\n\t\t\t\tif (manifest.type == null) {\n\t\t\t\t\tmanifest.type = s.MANIFEST;\n\t\t\t\t} else if (manifest.type != s.MANIFEST) {\n\t\t\t\t\tvar event = new createjs.ErrorEvent(\"PRELOAD_MANIFEST_TYPE\");\n\t\t\t\t\tthis._sendError(event);\n\t\t\t\t}\n\t\t\t\tfileList = [manifest];\n\n\t\t\t\t// An object that defines a manifest\n\t\t\t} else if (manifest.manifest !== undefined) {\n\t\t\t\tfileList = manifest.manifest;\n\t\t\t\tpath = manifest.path;\n\t\t\t}\n\n\t\t\t// Unsupported. This will throw an error.\n\t\t} else {\n\t\t\tvar event = new createjs.ErrorEvent(\"PRELOAD_MANIFEST_NULL\");\n\t\t\tthis._sendError(event);\n\t\t\treturn;\n\t\t}\n\n\t\tfor (var i = 0, l = fileList.length; i < l; i++) {\n\t\t\tthis._addItem(fileList[i], path, basePath);\n\t\t}\n\n\t\tif (loadNow !== false) {\n\t\t\tthis.setPaused(false);\n\t\t} else {\n\t\t\tthis.setPaused(true);\n\t\t}\n\n\t};\n\n\t/**\n\t * Start a LoadQueue that was created, but not automatically started.\n\t * @method load\n\t */\n\tp.load = function () {\n\t\tthis.setPaused(false);\n\t};\n\n\t/**\n\t * Look up a {{#crossLink \"LoadItem\"}}{{/crossLink}} using either the \"id\" or \"src\" that was specified when loading it. Note that if no \"id\" was\n\t * supplied with the load item, the ID will be the \"src\", including a `path` property defined by a manifest. The\n\t * `basePath` will not be part of the ID.\n\t * @method getItem\n\t * @param {String} value The <code>id</code> or <code>src</code> of the load item.\n\t * @return {Object} The load item that was initially requested using {{#crossLink \"LoadQueue/loadFile\"}}{{/crossLink}}\n\t * or {{#crossLink \"LoadQueue/loadManifest\"}}{{/crossLink}}. This object is also returned via the {{#crossLink \"LoadQueue/fileload:event\"}}{{/crossLink}}\n\t * event as the `item` parameter.\n\t */\n\tp.getItem = function (value) {\n\t\treturn this._loadItemsById[value] || this._loadItemsBySrc[value];\n\t};\n\n\t/**\n\t * Look up a loaded result using either the \"id\" or \"src\" that was specified when loading it. Note that if no \"id\"\n\t * was supplied with the load item, the ID will be the \"src\", including a `path` property defined by a manifest. The\n\t * `basePath` will not be part of the ID.\n\t * @method getResult\n\t * @param {String} value The <code>id</code> or <code>src</code> of the load item.\n\t * @param {Boolean} [rawResult=false] Return a raw result instead of a formatted result. This applies to content\n\t * loaded via XHR such as scripts, XML, CSS, and Images. If there is no raw result, the formatted result will be\n\t * returned instead.\n\t * @return {Object} A result object containing the content that was loaded, such as:\n\t * <ul>\n\t *      <li>An image tag (&lt;image /&gt;) for images</li>\n\t *      <li>A script tag for JavaScript (&lt;script /&gt;). Note that scripts are automatically added to the HTML\n\t *      DOM.</li>\n\t *      <li>A style tag for CSS (&lt;style /&gt; or &lt;link &gt;)</li>\n\t *      <li>Raw text for TEXT</li>\n\t *      <li>A formatted JavaScript object defined by JSON</li>\n\t *      <li>An XML document</li>\n\t *      <li>A binary arraybuffer loaded by XHR</li>\n\t *      <li>An audio tag (&lt;audio &gt;) for HTML audio. Note that it is recommended to use SoundJS APIs to play\n\t *      loaded audio. Specifically, audio loaded by Flash and WebAudio will return a loader object using this method\n\t *      which can not be used to play audio back.</li>\n\t * </ul>\n\t * This object is also returned via the {{#crossLink \"LoadQueue/fileload:event\"}}{{/crossLink}} event as the 'item`\n\t * parameter. Note that if a raw result is requested, but not found, the result will be returned instead.\n\t */\n\tp.getResult = function (value, rawResult) {\n\t\tvar item = this._loadItemsById[value] || this._loadItemsBySrc[value];\n\t\tif (item == null) {\n\t\t\treturn null;\n\t\t}\n\t\tvar id = item.id;\n\t\tif (rawResult && this._loadedRawResults[id]) {\n\t\t\treturn this._loadedRawResults[id];\n\t\t}\n\t\treturn this._loadedResults[id];\n\t};\n\n\t/**\n\t * Generate an list of items loaded by this queue.\n\t * @method getItems\n\t * @param {Boolean} loaded Determines if only items that have been loaded should be returned. If false, in-progress\n\t * and failed load items will also be included.\n\t * @returns {Array} A list of objects that have been loaded. Each item includes the {{#crossLink \"LoadItem\"}}{{/crossLink}},\n\t * result, and rawResult.\n\t * @since 0.6.0\n\t */\n\tp.getItems = function (loaded) {\n\t\tvar arr = [];\n\t\tfor (var n in this._loadItemsById) {\n\t\t\tvar item = this._loadItemsById[n];\n\t\t\tvar result = this.getResult(n);\n\t\t\tif (loaded === true && result == null) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tarr.push({\n\t\t\t\titem: item,\n\t\t\t\tresult: result,\n\t\t\t\trawResult: this.getResult(n, true)\n\t\t\t});\n\t\t}\n\t\treturn arr;\n\t};\n\n\t/**\n\t * Pause or resume the current load. Active loads will not be cancelled, but the next items in the queue will not\n\t * be processed when active loads complete. LoadQueues are not paused by default.\n\t *\n\t * Note that if new items are added to the queue using {{#crossLink \"LoadQueue/loadFile\"}}{{/crossLink}} or\n\t * {{#crossLink \"LoadQueue/loadManifest\"}}{{/crossLink}}, a paused queue will be resumed, unless the `loadNow`\n\t * argument is `false`.\n\t * @method setPaused\n\t * @param {Boolean} value Whether the queue should be paused or not.\n\t */\n\tp.setPaused = function (value) {\n\t\tthis._paused = value;\n\t\tif (!this._paused) {\n\t\t\tthis._loadNext();\n\t\t}\n\t};\n\n\t/**\n\t * Close the active queue. Closing a queue completely empties the queue, and prevents any remaining items from\n\t * starting to download. Note that currently any active loads will remain open, and events may be processed.\n\t *\n\t * To stop and restart a queue, use the {{#crossLink \"LoadQueue/setPaused\"}}{{/crossLink}} method instead.\n\t * @method close\n\t */\n\tp.close = function () {\n\t\twhile (this._currentLoads.length) {\n\t\t\tthis._currentLoads.pop().cancel();\n\t\t}\n\t\tthis._scriptOrder.length = 0;\n\t\tthis._loadedScripts.length = 0;\n\t\tthis.loadStartWasDispatched = false;\n\t\tthis._itemCount = 0;\n\t\tthis._lastProgress = NaN;\n\t};\n\n// protected methods\n\t/**\n\t * Add an item to the queue. Items are formatted into a usable object containing all the properties necessary to\n\t * load the content. The load queue is populated with the loader instance that handles preloading, and not the load\n\t * item that was passed in by the user. To look up the load item by id or src, use the {{#crossLink \"LoadQueue.getItem\"}}{{/crossLink}}\n\t * method.\n\t * @method _addItem\n\t * @param {String|Object} value The item to add to the queue.\n\t * @param {String} [path] An optional path prepended to the `src`. The path will only be prepended if the src is\n\t * relative, and does not start with a protocol such as `http://`, or a path like `../`. If the LoadQueue was\n\t * provided a {{#crossLink \"_basePath\"}}{{/crossLink}}, then it will optionally be prepended after.\n\t * @param {String} [basePath] <strong>Deprecated</strong>An optional basePath passed into a {{#crossLink \"LoadQueue/loadManifest\"}}{{/crossLink}}\n\t * or {{#crossLink \"LoadQueue/loadFile\"}}{{/crossLink}} call. This parameter will be removed in a future tagged\n\t * version.\n\t * @private\n\t */\n\tp._addItem = function (value, path, basePath) {\n\t\tvar item = this._createLoadItem(value, path, basePath); // basePath and manifest path are added to the src.\n\t\tif (item == null) {\n\t\t\treturn;\n\t\t} // Sometimes plugins or types should be skipped.\n\t\tvar loader = this._createLoader(item);\n\t\tif (loader != null) {\n\t\t\tif (\"plugins\" in loader) {\n\t\t\t\tloader.plugins = this._plugins;\n\t\t\t}\n\t\t\titem._loader = loader;\n\t\t\tthis._loadQueue.push(loader);\n\t\t\tthis._loadQueueBackup.push(loader);\n\n\t\t\tthis._numItems++;\n\t\t\tthis._updateProgress();\n\n\t\t\t// Only worry about script order when using XHR to load scripts. Tags are only loading one at a time.\n\t\t\tif ((this.maintainScriptOrder\n\t\t\t\t\t&& item.type == createjs.Types.JAVASCRIPT\n\t\t\t\t\t\t//&& loader instanceof createjs.XHRLoader //NOTE: Have to track all JS files this way\n\t\t\t\t\t)\n\t\t\t\t\t|| item.maintainOrder === true) {\n\t\t\t\tthis._scriptOrder.push(item);\n\t\t\t\tthis._loadedScripts.push(null);\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t * Create a refined {{#crossLink \"LoadItem\"}}{{/crossLink}}, which contains all the required properties. The type of\n\t * item is determined by browser support, requirements based on the file type, and developer settings. For example,\n\t * XHR is only used for file types that support it in new browsers.\n\t *\n\t * Before the item is returned, any plugins registered to handle the type or extension will be fired, which may\n\t * alter the load item.\n\t * @method _createLoadItem\n\t * @param {String | Object | HTMLAudioElement | HTMLImageElement} value The item that needs to be preloaded.\n\t * @param {String} [path] A path to prepend to the item's source. Sources beginning with http:// or similar will\n\t * not receive a path. Since PreloadJS 0.4.1, the src will be modified to include the `path` and {{#crossLink \"LoadQueue/_basePath:property\"}}{{/crossLink}}\n\t * when it is added.\n\t * @param {String} [basePath] <strong>Deprectated</strong> A base path to prepend to the items source in addition to\n\t * the path argument.\n\t * @return {Object} The loader instance that will be used.\n\t * @private\n\t */\n\tp._createLoadItem = function (value, path, basePath) {\n\t\tvar item = createjs.LoadItem.create(value);\n\t\tif (item == null) {\n\t\t\treturn null;\n\t\t}\n\n\t\tvar bp = \"\"; // Store the generated basePath\n\t\tvar useBasePath = basePath || this._basePath;\n\n\t\tif (item.src instanceof Object) {\n\t\t\tif (!item.type) {\n\t\t\t\treturn null;\n\t\t\t} // the the src is an object, type is required to pass off to plugin\n\t\t\tif (path) {\n\t\t\t\tbp = path;\n\t\t\t\tvar pathMatch = createjs.URLUtils.parseURI(path);\n\t\t\t\t// Also append basePath\n\t\t\t\tif (useBasePath != null && !pathMatch.absolute && !pathMatch.relative) {\n\t\t\t\t\tbp = useBasePath + bp;\n\t\t\t\t}\n\t\t\t} else if (useBasePath != null) {\n\t\t\t\tbp = useBasePath;\n\t\t\t}\n\t\t} else {\n\t\t\t// Determine Extension, etc.\n\t\t\tvar match = createjs.URLUtils.parseURI(item.src);\n\t\t\tif (match.extension) {\n\t\t\t\titem.ext = match.extension;\n\t\t\t}\n\t\t\tif (item.type == null) {\n\t\t\t\titem.type = createjs.RequestUtils.getTypeByExtension(item.ext);\n\t\t\t}\n\n\t\t\t// Inject path & basePath\n\t\t\tvar autoId = item.src;\n\t\t\tif (!match.absolute && !match.relative) {\n\t\t\t\tif (path) {\n\t\t\t\t\tbp = path;\n\t\t\t\t\tvar pathMatch = createjs.URLUtils.parseURI(path);\n\t\t\t\t\tautoId = path + autoId;\n\t\t\t\t\t// Also append basePath\n\t\t\t\t\tif (useBasePath != null && !pathMatch.absolute && !pathMatch.relative) {\n\t\t\t\t\t\tbp = useBasePath + bp;\n\t\t\t\t\t}\n\t\t\t\t} else if (useBasePath != null) {\n\t\t\t\t\tbp = useBasePath;\n\t\t\t\t}\n\t\t\t}\n\t\t\titem.src = bp + item.src;\n\t\t}\n\t\titem.path = bp;\n\n\t\t// If there's no id, set one now.\n\t\tif (item.id === undefined || item.id === null || item.id === \"\") {\n\t\t\titem.id = autoId;\n\t\t}\n\n\t\t// Give plugins a chance to modify the loadItem:\n\t\tvar customHandler = this._typeCallbacks[item.type] || this._extensionCallbacks[item.ext];\n\t\tif (customHandler) {\n\t\t\t// Plugins are now passed both the full source, as well as a combined path+basePath (appropriately)\n\t\t\tvar result = customHandler.callback.call(customHandler.scope, item, this);\n\n\t\t\t// The plugin will handle the load, or has canceled it. Ignore it.\n\t\t\tif (result === false) {\n\t\t\t\treturn null;\n\n\t\t\t\t// Load as normal:\n\t\t\t} else if (result === true) {\n\t\t\t\t// Do Nothing\n\n\t\t\t\t// Result is a loader class:\n\t\t\t} else if (result != null) {\n\t\t\t\titem._loader = result;\n\t\t\t}\n\n\t\t\t// Update the extension in case the type changed:\n\t\t\tmatch = createjs.URLUtils.parseURI(item.src);\n\t\t\tif (match.extension != null) {\n\t\t\t\titem.ext = match.extension;\n\t\t\t}\n\t\t}\n\n\t\t// Store the item for lookup. This also helps clean-up later.\n\t\tthis._loadItemsById[item.id] = item;\n\t\tthis._loadItemsBySrc[item.src] = item;\n\n\t\tif (item.crossOrigin == null) {\n\t\t\titem.crossOrigin = this._crossOrigin;\n\t\t}\n\n\t\treturn item;\n\t};\n\n\t/**\n\t * Create a loader for a load item.\n\t * @method _createLoader\n\t * @param {Object} item A formatted load item that can be used to generate a loader.\n\t * @return {AbstractLoader} A loader that can be used to load content.\n\t * @private\n\t */\n\tp._createLoader = function (item) {\n\t\tif (item._loader != null) { // A plugin already specified a loader\n\t\t\treturn item._loader;\n\t\t}\n\n\t\t// Initially, try and use the provided/supported XHR mode:\n\t\tvar preferXHR = this.preferXHR;\n\n\t\tfor (var i = 0; i < this._availableLoaders.length; i++) {\n\t\t\tvar loader = this._availableLoaders[i];\n\t\t\tif (loader && loader.canLoadItem(item)) {\n\t\t\t\treturn new loader(item, preferXHR);\n\t\t\t}\n\t\t}\n\n\t\t// TODO: Log error (requires createjs.log)\n\t\treturn null;\n\t};\n\n\t/**\n\t * Load the next item in the queue. If the queue is empty (all items have been loaded), then the complete event\n\t * is processed. The queue will \"fill up\" any empty slots, up to the max connection specified using\n\t * {{#crossLink \"LoadQueue.setMaxConnections\"}}{{/crossLink}} method. The only exception is scripts that are loaded\n\t * using tags, which have to be loaded one at a time to maintain load order.\n\t * @method _loadNext\n\t * @private\n\t */\n\tp._loadNext = function () {\n\t\tif (this._paused) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Only dispatch loadstart event when the first file is loaded.\n\t\tif (!this._loadStartWasDispatched) {\n\t\t\tthis._sendLoadStart();\n\t\t\tthis._loadStartWasDispatched = true;\n\t\t}\n\n\t\t// The queue has completed.\n\t\tif (this._numItems == this._numItemsLoaded) {\n\t\t\tthis.loaded = true;\n\t\t\tthis._sendComplete();\n\n\t\t\t// Load the next queue, if it has been defined.\n\t\t\tif (this.next && this.next.load) {\n\t\t\t\tthis.next.load();\n\t\t\t}\n\t\t} else {\n\t\t\tthis.loaded = false;\n\t\t}\n\n\t\t// Must iterate forwards to load in the right order.\n\t\tfor (var i = 0; i < this._loadQueue.length; i++) {\n\t\t\tif (this._currentLoads.length >= this._maxConnections) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tvar loader = this._loadQueue[i];\n\n\t\t\t// Determine if we should be only loading one tag-script at a time:\n\t\t\t// Note: maintainOrder items don't do anything here because we can hold onto their loaded value\n\t\t\tif (!this._canStartLoad(loader)) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tthis._loadQueue.splice(i, 1);\n\t\t\ti--;\n\t\t\tthis._loadItem(loader);\n\t\t}\n\t};\n\n\t/**\n\t * Begin loading an item. Event listeners are not added to the loaders until the load starts.\n\t * @method _loadItem\n\t * @param {AbstractLoader} loader The loader instance to start. Currently, this will be an XHRLoader or TagLoader.\n\t * @private\n\t */\n\tp._loadItem = function (loader) {\n\t\tloader.on(\"fileload\", this._handleFileLoad, this);\n\t\tloader.on(\"progress\", this._handleProgress, this);\n\t\tloader.on(\"complete\", this._handleFileComplete, this);\n\t\tloader.on(\"error\", this._handleError, this);\n\t\tloader.on(\"fileerror\", this._handleFileError, this);\n\t\tthis._currentLoads.push(loader);\n\t\tthis._sendFileStart(loader.getItem());\n\t\tloader.load();\n\t};\n\n\t/**\n\t * The callback that is fired when a loader loads a file. This enables loaders like {{#crossLink \"ManifestLoader\"}}{{/crossLink}}\n\t * to maintain internal queues, but for this queue to dispatch the {{#crossLink \"fileload:event\"}}{{/crossLink}}\n\t * events.\n\t * @param {Event} event The {{#crossLink \"AbstractLoader/fileload:event\"}}{{/crossLink}} event from the loader.\n\t * @private\n\t * @since 0.6.0\n\t */\n\tp._handleFileLoad = function (event) {\n\t\tevent.target = null;\n\t\tthis.dispatchEvent(event);\n\t};\n\n\t/**\n\t * The callback that is fired when a loader encounters an error from an internal file load operation. This enables\n\t * loaders like M\n\t * @param event\n\t * @private\n\t */\n\tp._handleFileError = function (event) {\n\t\tvar newEvent = new createjs.ErrorEvent(\"FILE_LOAD_ERROR\", null, event.item);\n\t\tthis._sendError(newEvent);\n\t};\n\n\t/**\n\t * The callback that is fired when a loader encounters an error. The queue will continue loading unless {{#crossLink \"LoadQueue/stopOnError:property\"}}{{/crossLink}}\n\t * is set to `true`.\n\t * @method _handleError\n\t * @param {ErrorEvent} event The error event, containing relevant error information.\n\t * @private\n\t */\n\tp._handleError = function (event) {\n\t\tvar loader = event.target;\n\t\tthis._numItemsLoaded++;\n\n\t\tthis._finishOrderedItem(loader, true);\n\t\tthis._updateProgress();\n\n\t\tvar newEvent = new createjs.ErrorEvent(\"FILE_LOAD_ERROR\", null, loader.getItem());\n\t\t// TODO: Propagate actual error message.\n\n\t\tthis._sendError(newEvent);\n\n\t\tif (!this.stopOnError) {\n\t\t\tthis._removeLoadItem(loader);\n\t\t\tthis._cleanLoadItem(loader);\n\t\t\tthis._loadNext();\n\t\t} else {\n\t\t\tthis.setPaused(true);\n\t\t}\n\t};\n\n\t/**\n\t * An item has finished loading. We can assume that it is totally loaded, has been parsed for immediate use, and\n\t * is available as the \"result\" property on the load item. The raw text result for a parsed item (such as JSON, XML,\n\t * CSS, JavaScript, etc) is available as the \"rawResult\" property, and can also be looked up using {{#crossLink \"LoadQueue/getResult\"}}{{/crossLink}}.\n\t * @method _handleFileComplete\n\t * @param {Event} event The event object from the loader.\n\t * @private\n\t */\n\tp._handleFileComplete = function (event) {\n\t\tvar loader = event.target;\n\t\tvar item = loader.getItem();\n\n\t\tvar result = loader.getResult();\n\t\tthis._loadedResults[item.id] = result;\n\t\tvar rawResult = loader.getResult(true);\n\t\tif (rawResult != null && rawResult !== result) {\n\t\t\tthis._loadedRawResults[item.id] = rawResult;\n\t\t}\n\n\t\tthis._saveLoadedItems(loader);\n\n\t\t// Remove the load item\n\t\tthis._removeLoadItem(loader);\n\n\t\tif (!this._finishOrderedItem(loader)) {\n\t\t\t// The item was NOT managed, so process it now\n\t\t\tthis._processFinishedLoad(item, loader);\n\t\t}\n\n\t\t// Clean up the load item\n\t\tthis._cleanLoadItem(loader);\n\t};\n\n\t/**\n\t * Some loaders might load additional content, other than the item they were passed (such as {{#crossLink \"ManifestLoader\"}}{{/crossLink}}).\n\t * Any items exposed by the loader using {{#crossLink \"AbstractLoader/getLoadItems\"}}{{/crossLink}} are added to the\n\t * LoadQueue's look-ups, including {{#crossLink \"getItem\"}}{{/crossLink}} and {{#crossLink \"getResult\"}}{{/crossLink}}\n\t * methods.\n\t * @method _saveLoadedItems\n\t * @param {AbstractLoader} loader\n\t * @protected\n\t * @since 0.6.0\n\t */\n\tp._saveLoadedItems = function (loader) {\n\t\t// TODO: Not sure how to handle this. Would be nice to expose the items.\n\t\t// Loaders may load sub-items. This adds them to this queue\n\t\tvar list = loader.getLoadedItems();\n\t\tif (list === null) {\n\t\t\treturn;\n\t\t}\n\n\t\tfor (var i = 0; i < list.length; i++) {\n\t\t\tvar item = list[i].item;\n\n\t\t\t// Store item lookups\n\t\t\tthis._loadItemsBySrc[item.src] = item;\n\t\t\tthis._loadItemsById[item.id] = item;\n\n\t\t\t// Store loaded content\n\t\t\tthis._loadedResults[item.id] = list[i].result;\n\t\t\tthis._loadedRawResults[item.id] = list[i].rawResult;\n\t\t}\n\t};\n\n\t/**\n\t * Flag an item as finished. If the item's order is being managed, then ensure that it is allowed to finish, and if\n\t * so, trigger prior items to trigger as well.\n\t * @method _finishOrderedItem\n\t * @param {AbstractLoader} loader\n\t * @param {Boolean} loadFailed\n\t * @return {Boolean} If the item's order is being managed. This allows the caller to take an alternate\n\t * behaviour if it is.\n\t * @private\n\t */\n\tp._finishOrderedItem = function (loader, loadFailed) {\n\t\tvar item = loader.getItem();\n\n\t\tif ((this.maintainScriptOrder && item.type == createjs.Types.JAVASCRIPT)\n\t\t\t\t|| item.maintainOrder) {\n\n\t\t\t//TODO: Evaluate removal of the _currentlyLoadingScript\n\t\t\tif (loader instanceof createjs.JavaScriptLoader) {\n\t\t\t\tthis._currentlyLoadingScript = false;\n\t\t\t}\n\n\t\t\tvar index = createjs.indexOf(this._scriptOrder, item);\n\t\t\tif (index == -1) {\n\t\t\t\treturn false;\n\t\t\t} // This loader no longer exists\n\t\t\tthis._loadedScripts[index] = (loadFailed === true) ? true : item;\n\n\t\t\tthis._checkScriptLoadOrder();\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t};\n\n\t/**\n\t * Ensure the scripts load and dispatch in the correct order. When using XHR, scripts are stored in an array in the\n\t * order they were added, but with a \"null\" value. When they are completed, the value is set to the load item,\n\t * and then when they are processed and dispatched, the value is set to `true`. This method simply\n\t * iterates the array, and ensures that any loaded items that are not preceded by a `null` value are\n\t * dispatched.\n\t * @method _checkScriptLoadOrder\n\t * @private\n\t */\n\tp._checkScriptLoadOrder = function () {\n\t\tvar l = this._loadedScripts.length;\n\n\t\tfor (var i = 0; i < l; i++) {\n\t\t\tvar item = this._loadedScripts[i];\n\t\t\tif (item === null) {\n\t\t\t\tbreak;\n\t\t\t} // This is still loading. Do not process further.\n\t\t\tif (item === true) {\n\t\t\t\tcontinue;\n\t\t\t} // This has completed, and been processed. Move on.\n\n\t\t\tvar loadItem = this._loadedResults[item.id];\n\t\t\tif (item.type == createjs.Types.JAVASCRIPT) {\n\t\t\t\t// Append script tags to the head automatically.\n\t\t\t\tcreatejs.DomUtils.appendToHead(loadItem);\n\t\t\t}\n\n\t\t\tvar loader = item._loader;\n\t\t\tthis._processFinishedLoad(item, loader);\n\t\t\tthis._loadedScripts[i] = true;\n\t\t}\n\t};\n\n\t/**\n\t * A file has completed loading, and the LoadQueue can move on. This triggers the complete event, and kick-starts\n\t * the next item.\n\t * @method _processFinishedLoad\n\t * @param {LoadItem|Object} item\n\t * @param {AbstractLoader} loader\n\t * @protected\n\t */\n\tp._processFinishedLoad = function (item, loader) {\n\t\tthis._numItemsLoaded++;\n\n\t\t// Since LoadQueue needs maintain order, we can't append scripts in the loader.\n\t\t// So we do it here instead. Or in _checkScriptLoadOrder();\n\t\tif (!this.maintainScriptOrder && item.type == createjs.Types.JAVASCRIPT) {\n\t\t\tvar tag = loader.getTag();\n\t\t\tcreatejs.DomUtils.appendToHead(tag);\n\t\t}\n\n\t\tthis._updateProgress();\n\t\tthis._sendFileComplete(item, loader);\n\t\tthis._loadNext();\n\t};\n\n\t/**\n\t * Ensure items with `maintainOrder=true` that are before the specified item have loaded. This only applies to\n\t * JavaScript items that are being loaded with a TagLoader, since they have to be loaded and completed <strong>before</strong>\n\t * the script can even be started, since it exist in the DOM while loading.\n\t * @method _canStartLoad\n\t * @param {AbstractLoader} loader The loader for the item\n\t * @return {Boolean} Whether the item can start a load or not.\n\t * @private\n\t */\n\tp._canStartLoad = function (loader) {\n\t\tif (!this.maintainScriptOrder || loader.preferXHR) {\n\t\t\treturn true;\n\t\t}\n\t\tvar item = loader.getItem();\n\t\tif (item.type != createjs.Types.JAVASCRIPT) {\n\t\t\treturn true;\n\t\t}\n\t\tif (this._currentlyLoadingScript) {\n\t\t\treturn false;\n\t\t}\n\n\t\tvar index = this._scriptOrder.indexOf(item);\n\t\tvar i = 0;\n\t\twhile (i < index) {\n\t\t\tvar checkItem = this._loadedScripts[i];\n\t\t\tif (checkItem == null) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\ti++;\n\t\t}\n\t\tthis._currentlyLoadingScript = true;\n\t\treturn true;\n\t};\n\n\t/**\n\t * A load item is completed or was canceled, and needs to be removed from the LoadQueue.\n\t * @method _removeLoadItem\n\t * @param {AbstractLoader} loader A loader instance to remove.\n\t * @private\n\t */\n\tp._removeLoadItem = function (loader) {\n\t\tvar l = this._currentLoads.length;\n\t\tfor (var i = 0; i < l; i++) {\n\t\t\tif (this._currentLoads[i] == loader) {\n\t\t\t\tthis._currentLoads.splice(i, 1);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t * Remove unneeded references from a loader.\n\t *\n\t * @param loader\n\t * @private\n\t */\n\tp._cleanLoadItem = function(loader) {\n\t\tvar item = loader.getItem();\n\t\tif (item) {\n\t\t\tdelete item._loader;\n\t\t}\n\t}\n\n\t/**\n\t * An item has dispatched progress. Propagate that progress, and update the LoadQueue's overall progress.\n\t * @method _handleProgress\n\t * @param {ProgressEvent} event The progress event from the item.\n\t * @private\n\t */\n\tp._handleProgress = function (event) {\n\t\tvar loader = event.target;\n\t\tthis._sendFileProgress(loader.getItem(), loader.progress);\n\t\tthis._updateProgress();\n\t};\n\n\t/**\n\t * Overall progress has changed, so determine the new progress amount and dispatch it. This changes any time an\n\t * item dispatches progress or completes. Note that since we don't always know the actual filesize of items before\n\t * they are loaded. In this case, we define a \"slot\" for each item (1 item in 10 would get 10%), and then append\n\t * loaded progress on top of the already-loaded items.\n\t *\n\t * For example, if 5/10 items have loaded, and item 6 is 20% loaded, the total progress would be:\n\t * <ul>\n\t *      <li>5/10 of the items in the queue (50%)</li>\n\t *      <li>plus 20% of item 6's slot (2%)</li>\n\t *      <li>equals 52%</li>\n\t * </ul>\n\t * @method _updateProgress\n\t * @private\n\t */\n\tp._updateProgress = function () {\n\t\tvar loaded = this._numItemsLoaded / this._numItems; // Fully Loaded Progress\n\t\tvar remaining = this._numItems - this._numItemsLoaded;\n\t\tif (remaining > 0) {\n\t\t\tvar chunk = 0;\n\t\t\tfor (var i = 0, l = this._currentLoads.length; i < l; i++) {\n\t\t\t\tchunk += this._currentLoads[i].progress;\n\t\t\t}\n\t\t\tloaded += (chunk / remaining) * (remaining / this._numItems);\n\t\t}\n\n\t\tif (this._lastProgress != loaded) {\n\t\t\tthis._sendProgress(loaded);\n\t\t\tthis._lastProgress = loaded;\n\t\t}\n\t};\n\n\t/**\n\t * Clean out item results, to free them from memory. Mainly, the loaded item and results are cleared from internal\n\t * hashes.\n\t * @method _disposeItem\n\t * @param {LoadItem|Object} item The item that was passed in for preloading.\n\t * @private\n\t */\n\tp._disposeItem = function (item) {\n\t\tdelete this._loadedResults[item.id];\n\t\tdelete this._loadedRawResults[item.id];\n\t\tdelete this._loadItemsById[item.id];\n\t\tdelete this._loadItemsBySrc[item.src];\n\t};\n\n\t/**\n\t * Dispatch a \"fileprogress\" {{#crossLink \"Event\"}}{{/crossLink}}. Please see the LoadQueue {{#crossLink \"LoadQueue/fileprogress:event\"}}{{/crossLink}}\n\t * event for details on the event payload.\n\t * @method _sendFileProgress\n\t * @param {LoadItem|Object} item The item that is being loaded.\n\t * @param {Number} progress The amount the item has been loaded (between 0 and 1).\n\t * @protected\n\t */\n\tp._sendFileProgress = function (item, progress) {\n\t\tif (this._isCanceled() || this._paused) {\n\t\t\treturn;\n\t\t}\n\t\tif (!this.hasEventListener(\"fileprogress\")) {\n\t\t\treturn;\n\t\t}\n\n\t\t//LM: Rework ProgressEvent to support this?\n\t\tvar event = new createjs.Event(\"fileprogress\");\n\t\tevent.progress = progress;\n\t\tevent.loaded = progress;\n\t\tevent.total = 1;\n\t\tevent.item = item;\n\n\t\tthis.dispatchEvent(event);\n\t};\n\n\t/**\n\t * Dispatch a fileload {{#crossLink \"Event\"}}{{/crossLink}}. Please see the {{#crossLink \"LoadQueue/fileload:event\"}}{{/crossLink}} event for\n\t * details on the event payload.\n\t * @method _sendFileComplete\n\t * @param {LoadItemObject} item The item that is being loaded.\n\t * @param {AbstractLoader} loader\n\t * @protected\n\t */\n\tp._sendFileComplete = function (item, loader) {\n\t\tif (this._isCanceled() || this._paused) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar event = new createjs.Event(\"fileload\");\n\t\tevent.loader = loader;\n\t\tevent.item = item;\n\t\tevent.result = this._loadedResults[item.id];\n\t\tevent.rawResult = this._loadedRawResults[item.id];\n\n\t\t// This calls a handler specified on the actual load item. Currently, the SoundJS plugin uses this.\n\t\tif (item.completeHandler) {\n\t\t\titem.completeHandler(event);\n\t\t}\n\n\t\tthis.hasEventListener(\"fileload\") && this.dispatchEvent(event);\n\t};\n\n\t/**\n\t * Dispatch a filestart {{#crossLink \"Event\"}}{{/crossLink}} immediately before a file starts to load. Please see\n\t * the {{#crossLink \"LoadQueue/filestart:event\"}}{{/crossLink}} event for details on the event payload.\n\t * @method _sendFileStart\n\t * @param {LoadItem|Object} item The item that is being loaded.\n\t * @protected\n\t */\n\tp._sendFileStart = function (item) {\n\t\tvar event = new createjs.Event(\"filestart\");\n\t\tevent.item = item;\n\t\tthis.hasEventListener(\"filestart\") && this.dispatchEvent(event);\n\t};\n\n\tp.toString = function () {\n\t\treturn \"[PreloadJS LoadQueue]\";\n\t};\n\n\tcreatejs.LoadQueue = createjs.promote(LoadQueue, \"AbstractLoader\");\n}());\n\n//##############################################################################\n// TextLoader.js\n//##############################################################################\n\nwindow.createjs = window.createjs || {};\n\n(function () {\n\t\"use strict\";\n\n\t// constructor\n\t/**\n\t * A loader for Text files.\n\t * @class TextLoader\n\t * @param {LoadItem|Object} loadItem\n\t * @extends AbstractLoader\n\t * @constructor\n\t */\n\tfunction TextLoader(loadItem) {\n\t\tthis.AbstractLoader_constructor(loadItem, true, createjs.Types.TEXT);\n\t};\n\n\tvar p = createjs.extend(TextLoader, createjs.AbstractLoader);\n\tvar s = TextLoader;\n\n\t// static methods\n\t/**\n\t * Determines if the loader can load a specific item. This loader loads items that are of type {{#crossLink \"Types/TEXT:property\"}}{{/crossLink}},\n\t * but is also the default loader if a file type can not be determined.\n\t * @method canLoadItem\n\t * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\n\t * @returns {Boolean} Whether the loader can load the item.\n\t * @static\n\t */\n\ts.canLoadItem = function (item) {\n\t\treturn item.type == createjs.Types.TEXT;\n\t};\n\n\tcreatejs.TextLoader = createjs.promote(TextLoader, \"AbstractLoader\");\n\n}());\n\n//##############################################################################\n// BinaryLoader.js\n//##############################################################################\n\nwindow.createjs = window.createjs || {};\n\n(function () {\n\t\"use strict\";\n\n\t// constructor\n\t/**\n\t * A loader for binary files. This is useful for loading web audio, or content that requires an ArrayBuffer.\n\t * @class BinaryLoader\n\t * @param {LoadItem|Object} loadItem\n\t * @extends AbstractLoader\n\t * @constructor\n\t */\n\tfunction BinaryLoader(loadItem) {\n\t\tthis.AbstractLoader_constructor(loadItem, true, createjs.Types.BINARY);\n\t\tthis.on(\"initialize\", this._updateXHR, this);\n\t};\n\n\tvar p = createjs.extend(BinaryLoader, createjs.AbstractLoader);\n\tvar s = BinaryLoader;\n\n\t// static methods\n\t/**\n\t * Determines if the loader can load a specific item. This loader can only load items that are of type\n\t * {{#crossLink \"Types/BINARY:property\"}}{{/crossLink}}\n\t * @method canLoadItem\n\t * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\n\t * @returns {Boolean} Whether the loader can load the item.\n\t * @static\n\t */\n\ts.canLoadItem = function (item) {\n\t\treturn item.type == createjs.Types.BINARY;\n\t};\n\n\t// private methods\n\t/**\n\t * Before the item loads, set the response type to \"arraybuffer\"\n\t * @property _updateXHR\n\t * @param {Event} event\n\t * @private\n\t */\n\tp._updateXHR = function (event) {\n\t\tevent.loader.setResponseType(\"arraybuffer\");\n\t};\n\n\tcreatejs.BinaryLoader = createjs.promote(BinaryLoader, \"AbstractLoader\");\n\n}());\n\n//##############################################################################\n// CSSLoader.js\n//##############################################################################\n\nwindow.createjs = window.createjs || {};\n\n(function () {\n\t\"use strict\";\n\n\t// constructor\n\t/**\n\t * A loader for CSS files.\n\t * @class CSSLoader\n\t * @param {LoadItem|Object} loadItem\n\t * @param {Boolean} preferXHR\n\t * @extends AbstractLoader\n\t * @constructor\n\t */\n\tfunction CSSLoader(loadItem, preferXHR) {\n\t\tthis.AbstractLoader_constructor(loadItem, preferXHR, createjs.Types.CSS);\n\n\t\t// public properties\n\t\tthis.resultFormatter = this._formatResult;\n\n\t\t// protected properties\n\t\tthis._tagSrcAttribute = \"href\";\n\n\t\tif (preferXHR) {\n\t\t\tthis._tag = createjs.Elements.style();\n\t\t} else {\n\t\t\tthis._tag = createjs.Elements.link();\n\t\t}\n\n\t\tthis._tag.rel = \"stylesheet\";\n\t\tthis._tag.type = \"text/css\";\n\t};\n\n\tvar p = createjs.extend(CSSLoader, createjs.AbstractLoader);\n\tvar s = CSSLoader;\n\n\t// static methods\n\t/**\n\t * Determines if the loader can load a specific item. This loader can only load items that are of type\n\t * {{#crossLink \"Types/CSS:property\"}}{{/crossLink}}.\n\t * @method canLoadItem\n\t * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\n\t * @returns {Boolean} Whether the loader can load the item.\n\t * @static\n\t */\n\ts.canLoadItem = function (item) {\n\t\treturn item.type == createjs.Types.CSS;\n\t};\n\n\t// protected methods\n\t/**\n\t * The result formatter for CSS files.\n\t * @method _formatResult\n\t * @param {AbstractLoader} loader\n\t * @returns {HTMLLinkElement|HTMLStyleElement}\n\t * @private\n\t */\n\tp._formatResult = function (loader) {\n\t\tif (this._preferXHR) {\n\t\t\tvar tag = loader.getTag();\n\n\t\t\tif (tag.styleSheet) { // IE\n\t\t\t\ttag.styleSheet.cssText = loader.getResult(true);\n\t\t\t} else {\n\t\t\t\tvar textNode = createjs.Elements.text(loader.getResult(true));\n\t\t\t\ttag.appendChild(textNode);\n\t\t\t}\n\t\t} else {\n\t\t\ttag = this._tag;\n\t\t}\n\n\t\tcreatejs.DomUtils.appendToHead(tag);\n\n\t\treturn tag;\n\t};\n\n\tcreatejs.CSSLoader = createjs.promote(CSSLoader, \"AbstractLoader\");\n\n}());\n\n//##############################################################################\n// FontLoader.js\n//##############################################################################\n\nwindow.createjs = window.createjs || {};\n\n(function () {\n\t\"use strict\";\n\n// constructor:\n\t/**\n\t * A loader that handles font files, CSS definitions, and CSS paths. FontLoader doesn't actually preload fonts\n\t * themselves, but rather generates CSS definitions, and then tests the size changes on an HTML5 Canvas element.\n\t *\n\t * Note that FontLoader does not support tag-based loading due to the requirement that CSS be read to determine the\n\t * font definitions to test for.\n\t * @class FontLoader\n\t * @param {LoadItem|object|string} loadItem The item to be loaded.\n\t * @extends AbstractLoader\n\t * @constructor\n\t **/\n\tfunction FontLoader(loadItem, preferXHR) {\n\t\tthis.AbstractLoader_constructor(loadItem, preferXHR, loadItem.type);\n\n\t\t// private properties:\n\t\t/**\n\t\t * A lookup of font faces to load.\n\t\t * @property _faces\n\t\t * @protected\n\t\t * @type Object\n\t\t **/\n\t\tthis._faces = {};\n\n\t\t/**\n\t\t * A list of font faces currently being \"watched\". Watched fonts will be tested on a regular interval, and be\n\t\t * removed from this list when they are complete.\n\t\t * @oroperty _watched\n\t\t * @type {Array}\n\t\t * @protected\n\t\t */\n\t\tthis._watched = [];\n\n\t\t/**\n\t\t * A count of the total font faces to load.\n\t\t * @property _count\n\t\t * @type {number}\n\t\t * @protected\n\t\t * @default 0\n\t\t */\n\t\tthis._count = 0;\n\n\t\t/**\n\t\t * The interval for checking if fonts have been loaded.\n\t\t * @property _watchInterval\n\t\t * @type {Number}\n\t\t * @protected\n\t\t */\n\t\tthis._watchInterval = null;\n\n\t\t/**\n\t\t * The timeout for determining if a font can't be loaded. Uses the LoadItem {{#crossLink \"LoadImte/timeout:property\"}}{{/crossLink}}\n\t\t * value.\n\t\t * @property _loadTimeout\n\t\t * @type {Number}\n\t\t * @protected\n\t\t */\n\t\tthis._loadTimeout = null;\n\t\t/**\n\t\t * Determines if generated CSS should be injected into the document.\n\t\t * @property _injectCSS\n\t\t * @type {boolean}\n\t\t * @protected\n\t\t */\n\t\tthis._injectCSS = (loadItem.injectCSS === undefined) ? true : loadItem.injectCSS;\n\n\t\tthis.dispatchEvent(\"initialize\");\n\t}\n\tvar p = createjs.extend(FontLoader, createjs.AbstractLoader);\n    \n    /**\n     * Determines if the loader can load a specific item. This loader can only load items that are of type\n     * {{#crossLink \"Types/FONT:property\"}}{{/crossLink}}.\n     * @method canLoadItem\n     * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\n     * @returns {Boolean} Whether the loader can load the item.\n     * @static\n     */\n    FontLoader.canLoadItem = function (item) {\n        return item.type == createjs.Types.FONT || item.type == createjs.Types.FONTCSS;\n    };\n\n// static properties:\n\t/**\n\t * Sample text used by the FontLoader to determine if the font has been loaded. The sample text size is compared\n\t * to the loaded font size, and a change indicates that the font has completed.\n\t * @property sampleText\n\t * @type {String}\n\t * @default abcdefghijklmnopqrstuvwxyz ABCDEFGHIJKLMNOPQRSTUVWXYZ\n\t * @static\n\t * @private\n\t */\n\tFontLoader.sampleText = \"abcdefghijklmnopqrstuvwxyz ABCDEFGHIJKLMNOPQRSTUVWXYZ\";\n\n\t/**\n\t * The canvas context used to test the font size. Note that this currently requires an HTML DOM.\n\t * @property _ctx\n\t * @type {CanvasRenderingContext2D}\n\t * @static\n\t * @private\n\t */\n\tFontLoader._ctx = document.createElement(\"canvas\").getContext(\"2d\"); // TODO: Consider a method to do this like EaselJS Stage has.\n\n\t/**\n\t * A list of reference fonts to test. Multiple faces are tested to address the rare case of a loaded font being the\n\t * exact same dimensions as the test font.\n\t * @property _referenceFonts\n\t * @type {Array}\n\t * @default [\"serif\", \"monospace\"]\n\t * @private\n\t */\n\tFontLoader._referenceFonts = [\"serif\",\"monospace\"];\n\n\t/**\n\t * A regular expression that pulls out possible style values from the font name.\n\t * <ul>\n\t *     <li>This includes font names that include thin, normal, book, regular, medium, black, and heavy (such as\n\t *     \"Arial Black\")</li>\n\t *     <li>Weight modifiers including extra, ultra, semi, demi, light, and bold (such as \"WorkSans SemiBold\")</li>\n\t * </ul>\n\t *\n\t * Weight descriptions map to font weight values by default using the following (from\n\t * http://www.w3.org/TR/css3-fonts/#font-weight-numeric-values):\n\t * <ul>\n\t *     <li>100 - Thin</li>\n\t * \t   <li>200 - Extra Light, Ultra Light</li>\n\t *     <li>300 - Light, Semi Light, Demi Light</li>\n\t *     <li>400 - Normal, Book, Regular</li>\n\t *     <li>500 - Medium</li>\n\t *     <li>600 - Semi Bold, Demi Bold</li>\n\t *     <li>700 - Bold</li>\n\t *     <li>800 - Extra Bold, Ultra Bold</li>\n\t *     <li>900 - Black, Heavy</li>\n\t * </ul>\n\t * @property WEIGHT_REGEX\n\t * @type {RegExp}\n\t * @static\n\t */\n\tFontLoader.WEIGHT_REGEX = /[- ._]*(thin|normal|book|regular|medium|black|heavy|[1-9]00|(?:extra|ultra|semi|demi)?[- ._]*(?:light|bold))[- ._]*/ig;\n\n\t/**\n\t * A regular expression that pulls out possible style values from the font name. These include \"italic\"\n\t * and \"oblique\".\n\t * @property STYLE_REGEX\n\t * @type {RegExp}\n\t * @static\n\t */\n\tFontLoader.STYLE_REGEX = /[- ._]*(italic|oblique)[- ._]*/ig;\n\n\t/**\n\t * A lookup of font types for generating a CSS definition. For example, TTF fonts requires a \"truetype\" type.\n\t * @property FONT_FORMAT\n\t * @type {Object}\n\t * @static\n\t */\n\tFontLoader.FONT_FORMAT = {woff2:\"woff2\", woff:\"woff\", ttf:\"truetype\", otf:\"truetype\"};\n\n\t/**\n\t * A lookup of font weights based on a name. These values are from http://www.w3.org/TR/css3-fonts/#font-weight-numeric-values.\n\t * @property FONT_WEIGHT\n\t * @type {Object}\n\t * @static\n\t */\n\tFontLoader.FONT_WEIGHT = {thin:100, extralight:200, ultralight:200, light:300, semilight:300, demilight:300, book:\"normal\", regular:\"normal\", semibold:600, demibold:600, extrabold:800, ultrabold:800, black:900, heavy:900};\n\n\t/**\n\t * The frequency in milliseconds to check for loaded fonts.\n\t * @property WATCH_DURATION\n\t * @type {number}\n\t * @default 10\n\t * @static\n\t */\n\tFontLoader.WATCH_DURATION = 10;\n// public methods:\n\tp.load = function() {\n\t\tif (this.type == createjs.Types.FONTCSS) {\n\t\t\tvar loaded = this._watchCSS();\n\n\t\t\t// If the CSS is not ready, it will create a request, which AbstractLoader can handle.\n\t\t\tif (!loaded) {\n\t\t\t\tthis.AbstractLoader_load();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t} else if (this._item.src instanceof Array) {\n\t\t\tthis._watchFontArray();\n\t\t} else {\n\t\t\tvar def = this._defFromSrc(this._item.src);\n\t\t\tthis._watchFont(def);\n\t\t\tthis._injectStyleTag(this._cssFromDef(def));\n\t\t}\n\n\t\tthis._loadTimeout = setTimeout(createjs.proxy(this._handleTimeout, this), this._item.loadTimeout);\n\n\t\tthis.dispatchEvent(\"loadstart\");\n\t};\n\n\t/**\n\t * The font load has timed out. This is called via a <code>setTimeout</code>.\n\t * callback.\n\t * @method _handleTimeout\n\t * @protected\n\t */\n\tp._handleTimeout = function () {\n\t\tthis._stopWatching();\n\t\tthis.dispatchEvent(new createjs.ErrorEvent(\"PRELOAD_TIMEOUT\"));\n\t};\n\n\t// WatchCSS does the work for us, and provides a modified src.\n\tp._createRequest = function() {\n\t\treturn this._request;\n\t};\n\n\t// Events come from the internal XHR loader.\n\tp.handleEvent = function (event) {\n\t\tswitch (event.type) {\n\t\t\tcase \"complete\":\n\t\t\t\tthis._rawResult = event.target._response;\n\t\t\t\tthis._result = true;\n\t\t\t\tthis._parseCSS(this._rawResult);\n\t\t\t\tbreak;\n\n\t\t\tcase \"error\":\n\t\t\t\tthis._stopWatching();\n\t\t\t\tthis.AbstractLoader_handleEvent(event);\n\t\t\t\tbreak;\n\t\t}\n\t};\n\n// private methods:\n\t/**\n\t * Determine if the provided CSS is a string definition, CSS HTML element, or a CSS file URI. Depending on the\n\t * format, the CSS will be parsed, or loaded.\n\t * @method _watchCSS\n\t * @returns {boolean} Whether or not the CSS is ready\n\t * @protected\n\t */\n\tp._watchCSS = function() {\n\t\tvar src = this._item.src;\n\n\t\t// An HTMLElement was passed in. Just use it.\n\t\tif (src instanceof HTMLStyleElement) {\n\t\t\tif (this._injectCSS && !src.parentNode) { (document.head || document.getElementsByTagName('head')[0]).appendChild(src); }\n\t\t\tthis._injectCSS = false;\n\t\t\tsrc = \"\\n\"+src.textContent;\n\t\t}\n\n\t\t// A CSS string was passed in. Parse and use it\n\t\tif (src.search(/\\n|\\r|@font-face/i) !== -1) { // css string.\n\t\t\tthis._parseCSS(src);\n\t\t\treturn true;\n\t\t}\n\n\t\t// Load a CSS Path. Note that we CAN NOT load it without XHR because we need to read the CSS definition\n\t\tthis._request = new createjs.XHRRequest(this._item);\n\t\treturn false;\n\t};\n\n\t/**\n\t * Parse a CSS string to determine the fonts to load.\n\t * @method _parseCSS\n\t * @param {String} css The CSS string to parse\n\t * @protected\n\t */\n\tp._parseCSS = function(css) {\n\t\tvar regex = /@font-face\\s*\\{([^}]+)}/g\n\t\twhile (true) {\n\t\t\tvar result = regex.exec(css);\n\t\t\tif (!result) { break; }\n\t\t\tthis._watchFont(this._parseFontFace(result[1]));\n\t\t}\n\t\tthis._injectStyleTag(css);\n\t};\n\n\t/**\n\t * The provided fonts were an array of object or string definitions. Parse them, and inject any that are ready.\n\t * @method _watchFontArray\n\t * @protected\n\t */\n\tp._watchFontArray = function() {\n\t\tvar arr = this._item.src, css = \"\", def;\n\t\tfor (var i=arr.length-1; i>=0; i--) {\n\t\t\tvar o = arr[i];\n\t\t\tif (typeof o === \"string\") { def = this._defFromSrc(o) }\n\t\t\telse { def = this._defFromObj(o); }\n\t\t\tthis._watchFont(def);\n\t\t\tcss += this._cssFromDef(def)+\"\\n\";\n\t\t}\n\t\tthis._injectStyleTag(css);\n\t};\n\n\t/**\n\t * Inject any style definitions into the document head. This is necessary when the definition is just a string or\n\t * object definition in order for the styles to be applied to the document. If the loaded fonts are already HTML CSS\n\t * elements, they don't need to be appended again.\n\t * @method _injectStyleTag\n\t * @param {String} css The CSS string content to be appended to the\n\t * @protected\n\t */\n\tp._injectStyleTag = function(css) {\n\t\tif (!this._injectCSS) { return; }\n\t\tvar head = document.head || document.getElementsByTagName('head')[0];\n\t\tvar styleTag = document.createElement(\"style\");\n\t\tstyleTag.type = \"text/css\";\n\t\tif (styleTag.styleSheet){\n\t\t\tstyleTag.styleSheet.cssText = css;\n\t\t} else {\n\t\t\tstyleTag.appendChild(document.createTextNode(css));\n\t\t}\n\t\thead.appendChild(styleTag);\n\t};\n\n\t/**\n\t * Determine the font face from a CSS definition.\n\t * @method _parseFontFace\n\t * @param {String} str The CSS string definition\n\t * @protected\n\t * @return {String} A modified CSS object containing family name, src, style, and weight\n\t */\n\tp._parseFontFace = function(str) {\n\t\tvar family = this._getCSSValue(str, \"font-family\"), src = this._getCSSValue(str, \"src\");\n\t\tif (!family || !src) { return null; }\n\t\treturn this._defFromObj({\n\t\t\tfamily: family,\n\t\t\tsrc: src,\n\t\t\tstyle: this._getCSSValue(str, \"font-style\"),\n\t\t\tweight: this._getCSSValue(str, \"font-weight\")\n\t\t});\n\t};\n\n\t/**\n\t * Add a font to the list of fonts currently being watched. If the font is already watched or loaded, it won't be\n\t * added again.\n\t * @method _watchFont\n\t * @param {Object} def The font definition\n\t * @protected\n\t */\n\tp._watchFont = function(def) {\n\t\tif (!def || this._faces[def.id]) { return; }\n\t\tthis._faces[def.id] = def;\n\t\tthis._watched.push(def);\n\t\tthis._count++;\n\n\t\tthis._calculateReferenceSizes(def);\n\t\tthis._startWatching();\n\t};\n\n\t/**\n\t * Create a interval to check for loaded fonts. Only one interval is used for all fonts. The fonts are checked based\n\t * on the {{#crossLink \"FontLoader/WATCH_DURATION:property\"}}{{/crossLink}}.\n\t * @method _startWatching\n\t * @protected\n\t */\n\tp._startWatching = function() {\n\t\tif (this._watchInterval != null) { return; }\n\t\tthis._watchInterval = setInterval(createjs.proxy(this._watch, this), FontLoader.WATCH_DURATION);\n\t};\n\n\t/**\n\t * Clear the interval used to check fonts. This happens when all fonts are loaded, or an error occurs, such as a\n\t * CSS file error, or a load timeout.\n\t * @method _stopWatching\n\t * @protected\n\t */\n\tp._stopWatching = function() {\n\t\tclearInterval(this._watchInterval);\n\t\tclearTimeout(this._loadTimeout);\n\t\tthis._watchInterval = null;\n\t};\n\n\t/**\n\t * Check all the fonts that have not been loaded. The fonts are drawn to a canvas in memory, and if their font size\n\t * varies from the default text size, then the font is considered loaded.\n\t *\n\t * A {{#crossLink \"AbstractLoader/fileload\"}}{{/crossLink}} event will be dispatched when each file is loaded, along\n\t * with the font family name as the `item` value. A {{#crossLink \"ProgressEvent\"}}{{/crossLink}} is dispatched a\n\t * maximum of one time per check when any fonts are loaded, with the {{#crossLink \"ProgressEvent/progress:property\"}}{{/crossLink}}\n\t * value showing the percentage of fonts that have loaded.\n\t * @method _watch\n\t * @protected\n\t */\n\tp._watch = function() {\n\t\tvar defs = this._watched, refFonts = FontLoader._referenceFonts, l = defs.length;\n\t\tfor (var i = l - 1; i >= 0; i--) {\n\t\t\tvar def = defs[i], refs = def.refs;\n\t\t\tfor (var j = refs.length - 1; j >= 0; j--) {\n\t\t\t\tvar w = this._getTextWidth(def.family + \",\" + refFonts[j], def.weight, def.style);\n\t\t\t\tif (w != refs[j]) {\n\t\t\t\t\tvar event = new createjs.Event(\"fileload\");\n\t\t\t\t\tdef.type = \"font-family\";\n\t\t\t\t\tevent.item = def;\n\t\t\t\t\tthis.dispatchEvent(event);\n\t\t\t\t\tdefs.splice(i, 1);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (l !== defs.length) {\n\t\t\tvar event = new createjs.ProgressEvent(this._count-defs.length, this._count);\n\t\t\tthis.dispatchEvent(event);\n\t\t}\n\t\tif (l === 0) {\n\t\t\tthis._stopWatching();\n\t\t\tthis._sendComplete();\n\t\t}\n\t};\n\n\t/**\n\t * Determine the default size of the reference fonts used to compare against loaded fonts.\n\t * @method _calculateReferenceSizes\n\t * @param {Object} def The font definition to get the size of.\n\t * @protected\n\t */\n\tp._calculateReferenceSizes = function(def) {\n\t\tvar refFonts = FontLoader._referenceFonts;\n\t\tvar refs = def.refs = [];\n\t\tfor (var i=0; i<refFonts.length; i++) {\n\t\t\trefs[i] = this._getTextWidth(refFonts[i], def.weight, def.style);\n\t\t}\n\t};\n\n\t/**\n\t * Get a CSS definition from a font source and name.\n\t * @method _defFromSrc\n\t * @param {String} src The font source\n\t * @protected\n\t */\n\tp._defFromSrc = function(src) {\n\t\tvar re = /[- ._]+/g, name = src, ext = null, index;\n\t\t\n\t\tindex = name.search(/[?#]/);\n\t\tif (index !== -1) {\n\t\t\tname = name.substr(0,index);\n\t\t}\n\t\tindex = name.lastIndexOf(\".\");\n\t\tif (index !== -1) {\n\t\t\text = name.substr(index+1);\n\t\t\tname = name.substr(0,index);\n\t\t}\n\t\tindex = name.lastIndexOf(\"/\");\n\t\tif (index !== -1) {\n\t\t\tname = name.substr(index+1);\n\t\t}\n\t\t\n\t\tvar family = name,\n\t\t\t\tweight = family.match(FontLoader.WEIGHT_REGEX);\n\t\tif (weight) {\n\t\t\tweight = weight[0];\n\t\t\tfamily = family.replace(weight, \"\");\n\t\t\tweight = weight.replace(re, \"\").toLowerCase();\n\t\t}\n\t\tvar style = name.match(FontLoader.STYLE_REGEX);\n\t\tif (style) {\n\t\t\tfamily = family.replace(style[0], \"\");\n\t\t\tstyle = \"italic\";\n\t\t}\n\t\tfamily = family.replace(re, \"\");\n\t\t\n\t\tvar cssSrc = \"local('\"+name.replace(re,\" \")+\"'), url('\"+src+\"')\";\n\t\tvar format = FontLoader.FONT_FORMAT[ext];\n\t\tif (format) { cssSrc += \" format('\"+format+\"')\"; }\n\t\t\n\t\treturn this._defFromObj({\n\t\t\tfamily: family,\n\t\t\tweight: FontLoader.FONT_WEIGHT[weight]||weight,\n\t\t\tstyle: style,\n\t\t\tsrc: cssSrc\n\t\t});\n\t};\n\n\t/**\n\t * Get a font definition from a raw font object.\n\t * @method _defFromObj\n\t * @param {Object} o A raw object provided to the FontLoader\n\t * @returns {Object} A standard font object that the FontLoader understands\n\t * @protected\n\t */\n\tp._defFromObj = function(o) {\n\t\tvar def = {\n\t\t\tfamily: o.family,\n\t\t\tsrc: o.src,\n\t\t\tstyle: o.style || \"normal\",\n\t\t\tweight: o.weight || \"normal\"\n\t\t};\n\t\tdef.id = def.family + \";\" + def.style + \";\" + def.weight;\n\t\treturn def;\n\t};\n\n\t/**\n\t * Get CSS from a font definition.\n\t * @method _cssFromDef\n\t * @param {Object} def A font definition\n\t * @returns {string} A CSS string representing the object\n\t * @protected\n\t */\n\tp._cssFromDef = function(def) {\n\t\treturn \"@font-face {\\n\" +\n\t\t\t\"\\tfont-family: '\"+def.family+\"';\\n\" +\n\t\t\t\"\\tfont-style: \"+def.style+\";\\n\" +\n\t\t\t\"\\tfont-weight: \"+def.weight+\";\\n\" +\n\t\t\t\"\\tsrc: \"+def.src+\";\\n\" +\n\t\t\t\"}\";\n\t};\n\n\t/**\n\t * Get the text width of text using the family, weight, and style\n\t * @method _getTextWidth\n\t * @param {String} family The font family\n\t * @param {String} weight The font weight\n\t * @param {String} style The font style\n\t * @returns {Number} The pixel measurement of the font.\n\t * @protected\n\t */\n\tp._getTextWidth = function(family, weight, style) {\n\t\tvar ctx = FontLoader._ctx;\n\t\tctx.font = style+\" \"+weight+\" 72px \"+family;\n\t\treturn ctx.measureText(FontLoader.sampleText).width;\n\t};\n\n\t/**\n\t * Get the value of a property from a CSS string. For example, searches a CSS string for the value of the\n\t * \"font-family\" property.\n\t * @method _getCSSValue\n\t * @param {String} str The CSS string to search\n\t * @param {String} propName The property name to get the value for\n\t * @returns {String} The value in the CSS for the provided property name\n\t * @protected\n\t */\n\tp._getCSSValue = function(str, propName) {\n\t\tvar regex = new RegExp(propName+\":\\s*([^;}]+?)\\s*[;}]\");\n\t\tvar result = regex.exec(str);\n\t\tif (!result || !result[1]) { return null; }\n\t\treturn result[1];\n\t};\n\n\tcreatejs.FontLoader = createjs.promote(FontLoader, \"AbstractLoader\");\n\n})();\n\n//##############################################################################\n// ImageLoader.js\n//##############################################################################\n\nwindow.createjs = window.createjs || {};\n\n(function () {\n\t\"use strict\";\n\n\t// constructor\n\t/**\n\t * A loader for image files.\n\t * @class ImageLoader\n\t * @param {LoadItem|Object} loadItem\n\t * @param {Boolean} preferXHR\n\t * @extends AbstractLoader\n\t * @constructor\n\t */\n\tfunction ImageLoader (loadItem, preferXHR) {\n\t\tthis.AbstractLoader_constructor(loadItem, preferXHR, createjs.Types.IMAGE);\n\n\t\t// public properties\n\t\tthis.resultFormatter = this._formatResult;\n\n\t\t// protected properties\n\t\tthis._tagSrcAttribute = \"src\";\n\n\t\t// Check if the preload item is already a tag.\n\t\tif (createjs.DomUtils.isImageTag(loadItem)) {\n\t\t\tthis._tag = loadItem;\n\t\t} else if (createjs.DomUtils.isImageTag(loadItem.src)) {\n\t\t\tthis._tag = loadItem.src;\n\t\t} else if (createjs.DomUtils.isImageTag(loadItem.tag)) {\n\t\t\tthis._tag = loadItem.tag;\n\t\t}\n\n\t\tif (this._tag != null) {\n\t\t\tthis._preferXHR = false;\n\t\t} else {\n\t\t\tthis._tag = createjs.Elements.img();\n\t\t}\n\n\t\tthis.on(\"initialize\", this._updateXHR, this);\n\t};\n\n\tvar p = createjs.extend(ImageLoader, createjs.AbstractLoader);\n\tvar s = ImageLoader;\n\n\t// static methods\n\t/**\n\t * Determines if the loader can load a specific item. This loader can only load items that are of type\n\t * {{#crossLink \"Types/IMAGE:property\"}}{{/crossLink}}.\n\t * @method canLoadItem\n\t * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\n\t * @returns {Boolean} Whether the loader can load the item.\n\t * @static\n\t */\n\ts.canLoadItem = function (item) {\n\t\treturn item.type == createjs.Types.IMAGE;\n\t};\n\n\t// public methods\n\tp.load = function () {\n\t\tif (this._tag.src != \"\" && this._tag.complete) {\n\t\t\tthis._sendComplete();\n\t\t\treturn;\n\t\t}\n\n\t\tvar crossOrigin = this._item.crossOrigin;\n\t\tif (crossOrigin == true) { crossOrigin = \"Anonymous\"; }\n\t\tif (crossOrigin != null && !createjs.URLUtils.isLocal(this._item)) {\n\t\t\tthis._tag.crossOrigin = crossOrigin;\n\t\t}\n\n\t\tthis.AbstractLoader_load();\n\t};\n\n\t// protected methods\n\t/**\n\t * Before the item loads, set its mimeType and responseType.\n\t * @property _updateXHR\n\t * @param {Event} event\n\t * @private\n\t */\n\tp._updateXHR = function (event) {\n\t\tevent.loader.mimeType = 'text/plain; charset=x-user-defined-binary';\n\n\t\t// Only exists for XHR\n\t\tif (event.loader.setResponseType) {\n\t\t\tevent.loader.setResponseType(\"blob\");\n\t\t}\n\t};\n\n\t/**\n\t * The result formatter for Image files.\n\t * @method _formatResult\n\t * @param {AbstractLoader} loader\n\t * @returns {HTMLImageElement}\n\t * @private\n\t */\n\tp._formatResult = function (loader) {\n\t\treturn this._formatImage;\n\t};\n\n\t/**\n\t * The asynchronous image formatter function. This is required because images have\n\t * a short delay before they are ready.\n\t * @method _formatImage\n\t * @param {Function} successCallback The method to call when the result has finished formatting\n\t * @param {Function} errorCallback The method to call if an error occurs during formatting\n\t * @private\n\t */\n\tp._formatImage = function (successCallback, errorCallback) {\n\t\tvar tag = this._tag;\n\t\tvar URL = window.URL || window.webkitURL;\n\n\t\tif (!this._preferXHR) {\n\n\t\t\t//document.body.removeChild(tag);\n\t\t} else if (URL) {\n\t\t\tvar objURL = URL.createObjectURL(this.getResult(true));\n\t\t\ttag.src = objURL;\n\n\t\t\ttag.addEventListener(\"load\", this._cleanUpURL, false);\n\t\t\ttag.addEventListener(\"error\", this._cleanUpURL, false);\n\t\t} else {\n\t\t\ttag.src = this._item.src;\n\t\t}\n\n\t\tif (tag.complete) {\n\t\t\tsuccessCallback(tag);\n\t\t} else {\n            tag.onload = createjs.proxy(function() {\n                successCallback(this._tag);\n                tag.onload = tag.onerror = null;\n            }, this);\n\n            tag.onerror = createjs.proxy(function(event) {\n                errorCallback(new createjs.ErrorEvent('IMAGE_FORMAT', null, event));\n                tag.onload = tag.onerror = null;\n            }, this);\n\t\t}\n\t};\n\n\t/**\n\t * Clean up the ObjectURL, the tag is done with it. Note that this function is run\n\t * as an event listener without a proxy/closure, as it doesn't require it - so do not\n\t * include any functionality that requires scope without changing it.\n\t * @method _cleanUpURL\n\t * @param event\n\t * @private\n\t */\n\tp._cleanUpURL = function (event) {\n\t\tvar URL = window.URL || window.webkitURL;\n\t\tURL.revokeObjectURL(event.target.src);\n\t};\n\n\tcreatejs.ImageLoader = createjs.promote(ImageLoader, \"AbstractLoader\");\n\n}());\n\n//##############################################################################\n// JavaScriptLoader.js\n//##############################################################################\n\nwindow.createjs = window.createjs || {};\n\n(function () {\n\t\"use strict\";\n\n\t// constructor\n\t/**\n\t * A loader for JavaScript files.\n\t * @class JavaScriptLoader\n\t * @param {LoadItem|Object} loadItem\n\t * @param {Boolean} preferXHR\n\t * @extends AbstractLoader\n\t * @constructor\n\t */\n\tfunction JavaScriptLoader(loadItem, preferXHR) {\n\t\tthis.AbstractLoader_constructor(loadItem, preferXHR, createjs.Types.JAVASCRIPT);\n\n\t\t// public properties\n\t\tthis.resultFormatter = this._formatResult;\n\n\t\t// protected properties\n\t\tthis._tagSrcAttribute = \"src\";\n\t\tthis.setTag(createjs.Elements.script());\n\t};\n\n\tvar p = createjs.extend(JavaScriptLoader, createjs.AbstractLoader);\n\tvar s = JavaScriptLoader;\n\n\t// static methods\n\t/**\n\t * Determines if the loader can load a specific item. This loader can only load items that are of type\n\t * {{#crossLink \"Types/JAVASCRIPT:property\"}}{{/crossLink}}\n\t * @method canLoadItem\n\t * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\n\t * @returns {Boolean} Whether the loader can load the item.\n\t * @static\n\t */\n\ts.canLoadItem = function (item) {\n\t\treturn item.type == createjs.Types.JAVASCRIPT;\n\t};\n\n\t// protected methods\n\t/**\n\t * The result formatter for JavaScript files.\n\t * @method _formatResult\n\t * @param {AbstractLoader} loader\n\t * @returns {HTMLLinkElement|HTMLStyleElement}\n\t * @private\n\t */\n\tp._formatResult = function (loader) {\n\t\tvar tag = loader.getTag();\n\t\tif (this._preferXHR) {\n\t\t\ttag.text = loader.getResult(true);\n\t\t}\n\t\treturn tag;\n\t};\n\n\tcreatejs.JavaScriptLoader = createjs.promote(JavaScriptLoader, \"AbstractLoader\");\n\n}());\n\n//##############################################################################\n// JSONLoader.js\n//##############################################################################\n\nwindow.createjs = window.createjs || {};\n\n(function () {\n\t\"use strict\";\n\n\t// constructor\n\t/**\n\t * A loader for JSON files. To load JSON cross-domain, use JSONP and the {{#crossLink \"JSONPLoader\"}}{{/crossLink}}\n\t * instead. To load JSON-formatted manifests, use {{#crossLink \"ManifestLoader\"}}{{/crossLink}}, and to\n\t * load EaselJS SpriteSheets, use {{#crossLink \"SpriteSheetLoader\"}}{{/crossLink}}.\n\t * @class JSONLoader\n\t * @param {LoadItem|Object} loadItem\n\t * @extends AbstractLoader\n\t * @constructor\n\t */\n\tfunction JSONLoader(loadItem) {\n\t\tthis.AbstractLoader_constructor(loadItem, true, createjs.Types.JSON);\n\n\t\t// public properties\n\t\tthis.resultFormatter = this._formatResult;\n\t};\n\n\tvar p = createjs.extend(JSONLoader, createjs.AbstractLoader);\n\tvar s = JSONLoader;\n\n\t// static methods\n\t/**\n\t * Determines if the loader can load a specific item. This loader can only load items that are of type\n\t * {{#crossLink \"Types/JSON:property\"}}{{/crossLink}}.\n\t * @method canLoadItem\n\t * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\n\t * @returns {Boolean} Whether the loader can load the item.\n\t * @static\n\t */\n\ts.canLoadItem = function (item) {\n\t\treturn item.type == createjs.Types.JSON;\n\t};\n\n\t// protected methods\n\t/**\n\t * The result formatter for JSON files.\n\t * @method _formatResult\n\t * @param {AbstractLoader} loader\n\t * @returns {HTMLLinkElement|HTMLStyleElement}\n\t * @private\n\t */\n\tp._formatResult = function (loader) {\n\t\tvar json = null;\n\t\ttry {\n\t\t\tjson = createjs.DataUtils.parseJSON(loader.getResult(true));\n\t\t} catch (e) {\n\t\t\tvar event = new createjs.ErrorEvent(\"JSON_FORMAT\", null, e);\n\t\t\tthis._sendError(event);\n\t\t\treturn e;\n\t\t}\n\n\t\treturn json;\n\t};\n\n\tcreatejs.JSONLoader = createjs.promote(JSONLoader, \"AbstractLoader\");\n\n}());\n\n//##############################################################################\n// JSONPLoader.js\n//##############################################################################\n\nwindow.createjs = window.createjs || {};\n\n(function () {\n\t\"use strict\";\n\n\t// constructor\n\t/**\n\t * A loader for JSONP files, which are JSON-formatted text files, wrapped in a callback. To load regular JSON\n\t * without a callback use the {{#crossLink \"JSONLoader\"}}{{/crossLink}} instead. To load JSON-formatted manifests,\n\t * use {{#crossLink \"ManifestLoader\"}}{{/crossLink}}, and to load EaselJS SpriteSheets, use\n\t * {{#crossLink \"SpriteSheetLoader\"}}{{/crossLink}}.\n\t *\n\t * JSONP is a format that provides a solution for loading JSON files cross-domain <em>without</em> requiring CORS.\n\t * JSONP files are loaded as JavaScript, and the \"callback\" is executed once they are loaded. The callback in the\n\t * JSONP must match the callback passed to the loadItem.\n\t *\n\t * <h4>Example JSONP</h4>\n\t *\n\t * \t\tcallbackName({\n\t * \t\t\t\"name\": \"value\",\n\t *\t \t\t\"num\": 3,\n\t *\t\t\t\"obj\": { \"bool\":true }\n\t * \t\t});\n\t *\n\t * <h4>Example</h4>\n\t *\n\t * \t\tvar loadItem = {id:\"json\", type:\"jsonp\", src:\"http://server.com/text.json\", callback:\"callbackName\"}\n\t * \t\tvar queue = new createjs.LoadQueue();\n\t * \t\tqueue.on(\"complete\", handleComplete);\n\t * \t\tqueue.loadItem(loadItem);\n\t *\n\t * \t\tfunction handleComplete(event) }\n\t * \t\t\tvar json = queue.getResult(\"json\");\n\t * \t\t\tconsole.log(json.obj.bool); // true\n\t * \t\t}\n\t *\n\t * JSONP files loaded concurrently require a <em>unique</em> callback. To ensure JSONP files are loaded in order,\n\t * either use the {{#crossLink \"LoadQueue/setMaxConnections\"}}{{/crossLink}} method (set to 1), or set\n\t * {{#crossLink \"LoadItem/maintainOrder:property\"}}{{/crossLink}} on items with the same callback.\n\t *\n\t * Important note: Some browsers will prevent JSONP from firing the callback if the file was loaded as JSON, and not\n\t * JavaScript. You may have to have your server give you a JavaScript mime-type for this to work.\n\t *\n\t * @class JSONPLoader\n\t * @param {LoadItem|Object} loadItem\n\t * @extends AbstractLoader\n\t * @constructor\n\t */\n\tfunction JSONPLoader(loadItem) {\n\t\tthis.AbstractLoader_constructor(loadItem, false, createjs.Types.JSONP);\n\t\tthis.setTag(createjs.Elements.script());\n\t\tthis.getTag().type = \"text/javascript\";\n\t};\n\n\tvar p = createjs.extend(JSONPLoader, createjs.AbstractLoader);\n\tvar s = JSONPLoader;\n\n\n\t// static methods\n\t/**\n\t * Determines if the loader can load a specific item. This loader can only load items that are of type\n\t * {{#crossLink \"Types/JSONP:property\"}}{{/crossLink}}.\n\t * @method canLoadItem\n\t * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\n\t * @returns {Boolean} Whether the loader can load the item.\n\t * @static\n\t */\n\ts.canLoadItem = function (item) {\n\t\treturn item.type == createjs.Types.JSONP;\n\t};\n\n\t// public methods\n\tp.cancel = function () {\n\t\tthis.AbstractLoader_cancel();\n\t\tthis._dispose();\n\t};\n\n\t/**\n\t * Loads the JSONp file.  Because of the unique loading needs of JSONp\n\t * we don't use the AbstractLoader.load() method.\n\t *\n\t * @method load\n\t *\n\t */\n\tp.load = function () {\n\t\tif (this._item.callback == null) {\n\t\t\tthrow new Error('callback is required for loading JSONP requests.');\n\t\t}\n\n\t\t// TODO: Look into creating our own iFrame to handle the load\n\t\t// In the first attempt, FF did not get the result\n\t\t//   result instanceof Object did not work either\n\t\t//   so we would need to clone the result.\n\t\tif (window[this._item.callback] != null) {\n\t\t\tthrow new Error(\n\t\t\t\t\"JSONP callback '\" +\n\t\t\t\tthis._item.callback +\n\t\t\t\t\"' already exists on window. You need to specify a different callback or re-name the current one.\");\n\t\t}\n\n\t\twindow[this._item.callback] = createjs.proxy(this._handleLoad, this);\n\t\tcreatejs.DomUtils.appendToBody(this._tag);\n\n\t\tthis._loadTimeout = setTimeout(createjs.proxy(this._handleTimeout, this), this._item.loadTimeout);\n\n\t\t// Load the tag\n\t\tthis._tag.src = this._item.src;\n\t};\n\n\t// private methods\n\t/**\n\t * Handle the JSONP callback, which is a public method defined on `window`.\n\t * @method _handleLoad\n\t * @param {Object} data The formatted JSON data.\n\t * @private\n\t */\n\tp._handleLoad = function (data) {\n\t\tthis._result = this._rawResult = data;\n\t\tthis._sendComplete();\n\n\t\tthis._dispose();\n\t};\n\n\t/**\n\t * The tag request has not loaded within the time specfied in loadTimeout.\n\t * @method _handleError\n\t * @param {Object} event The XHR error event.\n\t * @private\n\t */\n\tp._handleTimeout = function () {\n\t\tthis._dispose();\n\t\tthis.dispatchEvent(new createjs.ErrorEvent(\"timeout\"));\n\t};\n\n\t/**\n\t * Clean up the JSONP load. This clears out the callback and script tag that this loader creates.\n\t * @method _dispose\n\t * @private\n\t */\n\tp._dispose = function () {\n\t\tcreatejs.DomUtils.removeChild(this._tag);\n\t\tdelete window[this._item.callback];\n\n\t\tclearTimeout(this._loadTimeout);\n\t};\n\n\tcreatejs.JSONPLoader = createjs.promote(JSONPLoader, \"AbstractLoader\");\n\n}());\n\n//##############################################################################\n// ManifestLoader.js\n//##############################################################################\n\nwindow.createjs = window.createjs || {};\n\n(function () {\n\t\"use strict\";\n\n\t// constructor\n\t/**\n\t * A loader for JSON manifests. Items inside the manifest are loaded before the loader completes. To load manifests\n\t * using JSONP, specify a {{#crossLink \"LoadItem/callback:property\"}}{{/crossLink}} as part of the\n\t * {{#crossLink \"LoadItem\"}}{{/crossLink}}.\n\t *\n\t * The list of files in the manifest must be defined on the top-level JSON object in a `manifest` property. This\n\t * example shows a sample manifest definition, as well as how to to include a sub-manifest.\n\t *\n\t * \t\t{\n\t * \t\t\t\"path\": \"assets/\",\n\t *\t \t    \"manifest\": [\n\t *\t\t\t\t\"image.png\",\n\t *\t\t\t\t{\"src\": \"image2.png\", \"id\":\"image2\"},\n\t *\t\t\t\t{\"src\": \"sub-manifest.json\", \"type\":\"manifest\", \"callback\":\"jsonCallback\"}\n\t *\t \t    ]\n\t *\t \t}\n\t *\n\t * When a ManifestLoader has completed loading, the parent loader (usually a {{#crossLink \"LoadQueue\"}}{{/crossLink}},\n\t * but could also be another ManifestLoader) will inherit all the loaded items, so you can access them directly.\n\t *\n\t * Note that the {{#crossLink \"JSONLoader\"}}{{/crossLink}} and {{#crossLink \"JSONPLoader\"}}{{/crossLink}} are\n\t * higher priority loaders, so manifests <strong>must</strong> set the {{#crossLink \"LoadItem\"}}{{/crossLink}}\n\t * {{#crossLink \"LoadItem/type:property\"}}{{/crossLink}} property to {{#crossLink \"Types/MANIFEST:property\"}}{{/crossLink}}.\n\t *\n\t * Additionally, some browsers require the server to serve a JavaScript mime-type for JSONP, so it may not work in\n\t * some conditions.\n\t * @class ManifestLoader\n\t * @param {LoadItem|Object} loadItem\n\t * @extends AbstractLoader\n\t * @constructor\n\t */\n\tfunction ManifestLoader(loadItem, preferXHR) {\n\t\tthis.AbstractLoader_constructor(loadItem, preferXHR, createjs.Types.MANIFEST);\n\n\t// Public Properties\n\t\t/**\n\t\t * An array of the plugins registered using {{#crossLink \"LoadQueue/installPlugin\"}}{{/crossLink}},\n\t\t * used to pass plugins to new LoadQueues that may be created.\n\t\t * @property _plugins\n\t\t * @type {Array}\n\t\t * @private\n\t\t * @since 0.6.1\n\t\t */\n\t\tthis.plugins = null;\n\n\n\t// Protected Properties\n\t\t/**\n\t\t * An internal {{#crossLink \"LoadQueue\"}}{{/crossLink}} that loads the contents of the manifest.\n\t\t * @property _manifestQueue\n\t\t * @type {LoadQueue}\n\t\t * @private\n\t\t */\n\t\tthis._manifestQueue = null;\n\t};\n\n\tvar p = createjs.extend(ManifestLoader, createjs.AbstractLoader);\n\tvar s = ManifestLoader;\n\n\t// static properties\n\t/**\n\t * The amount of progress that the manifest itself takes up.\n\t * @property MANIFEST_PROGRESS\n\t * @type {number}\n\t * @default 0.25 (25%)\n\t * @private\n\t * @static\n\t */\n\ts.MANIFEST_PROGRESS = 0.25;\n\n\t// static methods\n\t/**\n\t * Determines if the loader can load a specific item. This loader can only load items that are of type\n\t * {{#crossLink \"Types/MANIFEST:property\"}}{{/crossLink}}\n\t * @method canLoadItem\n\t * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\n\t * @returns {Boolean} Whether the loader can load the item.\n\t * @static\n\t */\n\ts.canLoadItem = function (item) {\n\t\treturn item.type == createjs.Types.MANIFEST;\n\t};\n\n\t// public methods\n\tp.load = function () {\n\t\tthis.AbstractLoader_load();\n\t};\n\n\t// protected methods\n\tp._createRequest = function() {\n\t\tvar callback = this._item.callback;\n\t\tif (callback != null) {\n\t\t\tthis._request = new createjs.JSONPLoader(this._item);\n\t\t} else {\n\t\t\tthis._request = new createjs.JSONLoader(this._item);\n\t\t}\n\t};\n\n\tp.handleEvent = function (event) {\n\t\tswitch (event.type) {\n\t\t\tcase \"complete\":\n\t\t\t\tthis._rawResult = event.target.getResult(true);\n\t\t\t\tthis._result = event.target.getResult();\n\t\t\t\tthis._sendProgress(s.MANIFEST_PROGRESS);\n\t\t\t\tthis._loadManifest(this._result);\n\t\t\t\treturn;\n\t\t\tcase \"progress\":\n\t\t\t\tevent.loaded *= s.MANIFEST_PROGRESS;\n\t\t\t\tthis.progress = event.loaded / event.total;\n\t\t\t\tif (isNaN(this.progress) || this.progress == Infinity) { this.progress = 0; }\n\t\t\t\tthis._sendProgress(event);\n\t\t\t\treturn;\n\t\t}\n\t\tthis.AbstractLoader_handleEvent(event);\n\t};\n\n\tp.destroy = function() {\n\t\tthis.AbstractLoader_destroy();\n\t\tthis._manifestQueue.close();\n\t};\n\n\t/**\n\t * Create and load the manifest items once the actual manifest has been loaded.\n\t * @method _loadManifest\n\t * @param {Object} json\n\t * @private\n\t */\n\tp._loadManifest = function (json) {\n\t\tif (json && json.manifest) {\n\t\t\tvar queue = this._manifestQueue = new createjs.LoadQueue(this._preferXHR);\n\t\t\tqueue.on(\"fileload\", this._handleManifestFileLoad, this);\n\t\t\tqueue.on(\"progress\", this._handleManifestProgress, this);\n\t\t\tqueue.on(\"complete\", this._handleManifestComplete, this, true);\n\t\t\tqueue.on(\"error\", this._handleManifestError, this, true);\n\t\t\tfor(var i = 0, l = this.plugins.length; i < l; i++) {\t// conserve order of plugins\n\t\t\t\tqueue.installPlugin(this.plugins[i]);\n\t\t\t}\n\t\t\tqueue.loadManifest(json);\n\t\t} else {\n\t\t\tthis._sendComplete();\n\t\t}\n\t};\n\n\t/**\n\t * An item from the {{#crossLink \"_manifestQueue:property\"}}{{/crossLink}} has completed.\n\t * @method _handleManifestFileLoad\n\t * @param {Event} event\n\t * @private\n\t */\n\tp._handleManifestFileLoad = function (event) {\n\t\tevent.target = null;\n\t\tthis.dispatchEvent(event);\n\t};\n\n\t/**\n\t * The manifest has completed loading. This triggers the {{#crossLink \"AbstractLoader/complete:event\"}}{{/crossLink}}\n\t * {{#crossLink \"Event\"}}{{/crossLink}} from the ManifestLoader.\n\t * @method _handleManifestComplete\n\t * @param {Event} event\n\t * @private\n\t */\n\tp._handleManifestComplete = function (event) {\n\t\tthis._loadedItems = this._manifestQueue.getItems(true);\n\t\tthis._sendComplete();\n\t};\n\n\t/**\n\t * The manifest has reported progress.\n\t * @method _handleManifestProgress\n\t * @param {ProgressEvent} event\n\t * @private\n\t */\n\tp._handleManifestProgress = function (event) {\n\t\tthis.progress = event.progress * (1 - s.MANIFEST_PROGRESS) + s.MANIFEST_PROGRESS;\n\t\tthis._sendProgress(this.progress);\n\t};\n\n\t/**\n\t * The manifest has reported an error with one of the files.\n\t * @method _handleManifestError\n\t * @param {ErrorEvent} event\n\t * @private\n\t */\n\tp._handleManifestError = function (event) {\n\t\tvar newEvent = new createjs.Event(\"fileerror\");\n\t\tnewEvent.item = event.data;\n\t\tthis.dispatchEvent(newEvent);\n\t};\n\n\tcreatejs.ManifestLoader = createjs.promote(ManifestLoader, \"AbstractLoader\");\n\n}());\n\n//##############################################################################\n// SoundLoader.js\n//##############################################################################\n\nwindow.createjs = window.createjs || {};\n\n(function () {\n\t\"use strict\";\n\n\t// constructor\n\t/**\n\t * A loader for HTML audio files. PreloadJS can not load WebAudio files, as a WebAudio context is required, which\n\t * should be created by either a library playing the sound (such as <a href=\"http://soundjs.com\">SoundJS</a>, or an\n\t * external framework that handles audio playback. To load content that can be played by WebAudio, use the\n\t * {{#crossLink \"BinaryLoader\"}}{{/crossLink}}, and handle the audio context decoding manually.\n\t * @class SoundLoader\n\t * @param {LoadItem|Object} loadItem\n\t * @param {Boolean} preferXHR\n\t * @extends AbstractMediaLoader\n\t * @constructor\n\t */\n\tfunction SoundLoader(loadItem, preferXHR) {\n\t\tthis.AbstractMediaLoader_constructor(loadItem, preferXHR, createjs.Types.SOUND);\n\n\t\t// protected properties\n\t\tif (createjs.DomUtils.isAudioTag(loadItem)) {\n\t\t\tthis._tag = loadItem;\n\t\t} else if (createjs.DomUtils.isAudioTag(loadItem.src)) {\n\t\t\tthis._tag = loadItem;\n\t\t} else if (createjs.DomUtils.isAudioTag(loadItem.tag)) {\n\t\t\tthis._tag = createjs.DomUtils.isAudioTag(loadItem) ? loadItem : loadItem.src;\n\t\t}\n\n\t\tif (this._tag != null) {\n\t\t\tthis._preferXHR = false;\n\t\t}\n\t};\n\n\tvar p = createjs.extend(SoundLoader, createjs.AbstractMediaLoader);\n\tvar s = SoundLoader;\n\n\t// static methods\n\t/**\n\t * Determines if the loader can load a specific item. This loader can only load items that are of type\n\t * {{#crossLink \"Types/SOUND:property\"}}{{/crossLink}}.\n\t * @method canLoadItem\n\t * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\n\t * @returns {Boolean} Whether the loader can load the item.\n\t * @static\n\t */\n\ts.canLoadItem = function (item) {\n\t\treturn item.type == createjs.Types.SOUND;\n\t};\n\n\t// protected methods\n\tp._createTag = function (src) {\n\t\tvar tag = createjs.Elements.audio();\n\t\ttag.autoplay = false;\n\t\ttag.preload = \"none\";\n\n\t\t//LM: Firefox fails when this the preload=\"none\" for other tags, but it needs to be \"none\" to ensure PreloadJS works.\n\t\ttag.src = src;\n\t\treturn tag;\n\t};\n\n\tcreatejs.SoundLoader = createjs.promote(SoundLoader, \"AbstractMediaLoader\");\n\n}());\n\n//##############################################################################\n// VideoLoader.js\n//##############################################################################\n\nwindow.createjs = window.createjs || {};\n\n(function () {\n\t\"use strict\";\n\n\t// constructor\n\t/**\n\t * A loader for video files.\n\t * @class VideoLoader\n\t * @param {LoadItem|Object} loadItem\n\t * @param {Boolean} preferXHR\n\t * @extends AbstractMediaLoader\n\t * @constructor\n\t */\n\tfunction VideoLoader(loadItem, preferXHR) {\n\t\tthis.AbstractMediaLoader_constructor(loadItem, preferXHR, createjs.Types.VIDEO);\n\n\t\tif (createjs.DomUtils.isVideoTag(loadItem) || createjs.DomUtils.isVideoTag(loadItem.src)) {\n\t\t\tthis.setTag(createjs.DomUtils.isVideoTag(loadItem)?loadItem:loadItem.src);\n\n\t\t\t// We can't use XHR for a tag that's passed in.\n\t\t\tthis._preferXHR = false;\n\t\t} else {\n\t\t\tthis.setTag(this._createTag());\n\t\t}\n\t};\n\n\tvar p = createjs.extend(VideoLoader, createjs.AbstractMediaLoader);\n\tvar s = VideoLoader;\n\n\t/**\n\t * Create a new video tag\n\t *\n\t * @returns {HTMLElement}\n\t * @private\n\t */\n\tp._createTag = function () {\n\t\treturn createjs.Elements.video();\n\t};\n\n\t// static methods\n\t/**\n\t * Determines if the loader can load a specific item. This loader can only load items that are of type\n\t * {{#crossLink \"Types/VIDEO:property\"}}{{/crossLink}}.\n\t * @method canLoadItem\n\t * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\n\t * @returns {Boolean} Whether the loader can load the item.\n\t * @static\n\t */\n\ts.canLoadItem = function (item) {\n\t\treturn item.type == createjs.Types.VIDEO;\n\t};\n\n\tcreatejs.VideoLoader = createjs.promote(VideoLoader, \"AbstractMediaLoader\");\n\n}());\n\n//##############################################################################\n// SpriteSheetLoader.js\n//##############################################################################\n\nwindow.createjs = window.createjs || {};\n\n(function () {\n\t\"use strict\";\n\n\t// constructor\n\t/**\n\t * A loader for EaselJS SpriteSheets. Images inside the spritesheet definition are loaded before the loader\n\t * completes. To load SpriteSheets using JSONP, specify a {{#crossLink \"LoadItem/callback:property\"}}{{/crossLink}}\n\t * as part of the {{#crossLink \"LoadItem\"}}{{/crossLink}}. Note that the {{#crossLink \"JSONLoader\"}}{{/crossLink}}\n\t * and {{#crossLink \"JSONPLoader\"}}{{/crossLink}} are higher priority loaders, so SpriteSheets <strong>must</strong>\n\t * set the {{#crossLink \"LoadItem\"}}{{/crossLink}} {{#crossLink \"LoadItem/type:property\"}}{{/crossLink}} property\n\t * to {{#crossLink \"Types/SPRITESHEET:property\"}}{{/crossLink}}.\n\t *\n\t * The {{#crossLink \"LoadItem\"}}{{/crossLink}} {{#crossLink \"LoadItem/crossOrigin:property\"}}{{/crossLink}} as well\n\t * as the {{#crossLink \"LoadQueue's\"}}{{/crossLink}} `basePath` argument and {{#crossLink \"LoadQueue/_preferXHR\"}}{{/crossLink}}\n\t * property supplied to the {{#crossLink \"LoadQueue\"}}{{/crossLink}} are passed on to the sub-manifest that loads\n\t * the SpriteSheet images.\n\t *\n\t * Note that the SpriteSheet JSON does not respect the {{#crossLink \"LoadQueue/_preferXHR:property\"}}{{/crossLink}}\n\t * property, which should instead be determined by the presence of a {{#crossLink \"LoadItem/callback:property\"}}{{/crossLink}}\n\t * property on the SpriteSheet load item. This is because the JSON loaded will have a different format depending on\n\t * if it is loaded as JSON, so just changing `preferXHR` is not enough to change how it is loaded.\n\t * @class SpriteSheetLoader\n\t * @param {LoadItem|Object} loadItem\n\t * @extends AbstractLoader\n\t * @constructor\n\t */\n\tfunction SpriteSheetLoader(loadItem, preferXHR) {\n\t\tthis.AbstractLoader_constructor(loadItem, preferXHR, createjs.Types.SPRITESHEET);\n\n\t\t// protected properties\n\t\t/**\n\t\t * An internal queue which loads the SpriteSheet's images.\n\t\t * @method _manifestQueue\n\t\t * @type {LoadQueue}\n\t\t * @private\n\t\t */\n\t\tthis._manifestQueue = null;\n\t}\n\n\tvar p = createjs.extend(SpriteSheetLoader, createjs.AbstractLoader);\n\tvar s = SpriteSheetLoader;\n\n\t// static properties\n\t/**\n\t * The amount of progress that the manifest itself takes up.\n\t * @property SPRITESHEET_PROGRESS\n\t * @type {number}\n\t * @default 0.25 (25%)\n\t * @private\n\t * @static\n\t */\n\ts.SPRITESHEET_PROGRESS = 0.25;\n\n\t// static methods\n\t/**\n\t * Determines if the loader can load a specific item. This loader can only load items that are of type\n\t * {{#crossLink \"Types/SPRITESHEET:property\"}}{{/crossLink}}\n\t * @method canLoadItem\n\t * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\n\t * @returns {Boolean} Whether the loader can load the item.\n\t * @static\n\t */\n\ts.canLoadItem = function (item) {\n\t\treturn item.type == createjs.Types.SPRITESHEET;\n\t};\n\n\t// public methods\n\tp.destroy = function() {\n\t\tthis.AbstractLoader_destroy();\n\t\tthis._manifestQueue.close();\n\t};\n\n\t// protected methods\n\tp._createRequest = function() {\n\t\tvar callback = this._item.callback;\n\t\tif (callback != null) {\n\t\t\tthis._request = new createjs.JSONPLoader(this._item);\n\t\t} else {\n\t\t\tthis._request = new createjs.JSONLoader(this._item);\n\t\t}\n\t};\n\n\tp.handleEvent = function (event) {\n\t\tswitch (event.type) {\n\t\t\tcase \"complete\":\n\t\t\t\tthis._rawResult = event.target.getResult(true);\n\t\t\t\tthis._result = event.target.getResult();\n\t\t\t\tthis._sendProgress(s.SPRITESHEET_PROGRESS);\n\t\t\t\tthis._loadManifest(this._result);\n\t\t\t\treturn;\n\t\t\tcase \"progress\":\n\t\t\t\tevent.loaded *= s.SPRITESHEET_PROGRESS;\n\t\t\t\tthis.progress = event.loaded / event.total;\n\t\t\t\tif (isNaN(this.progress) || this.progress == Infinity) { this.progress = 0; }\n\t\t\t\tthis._sendProgress(event);\n\t\t\t\treturn;\n\t\t}\n\t\tthis.AbstractLoader_handleEvent(event);\n\t};\n\n\t/**\n\t * Create and load the images once the SpriteSheet JSON has been loaded.\n\t * @method _loadManifest\n\t * @param {Object} json\n\t * @private\n\t */\n\tp._loadManifest = function (json) {\n\t\tif (json && json.images) {\n\t\t\tvar queue = this._manifestQueue = new createjs.LoadQueue(this._preferXHR, this._item.path, this._item.crossOrigin);\n\t\t\tqueue.on(\"complete\", this._handleManifestComplete, this, true);\n\t\t\tqueue.on(\"fileload\", this._handleManifestFileLoad, this);\n\t\t\tqueue.on(\"progress\", this._handleManifestProgress, this);\n\t\t\tqueue.on(\"error\", this._handleManifestError, this, true);\n\t\t\tqueue.loadManifest(json.images);\n\t\t}\n\t};\n\n\t/**\n\t * An item from the {{#crossLink \"_manifestQueue:property\"}}{{/crossLink}} has completed.\n\t * @method _handleManifestFileLoad\n\t * @param {Event} event\n\t * @private\n\t */\n\tp._handleManifestFileLoad = function (event) {\n\t\tvar image = event.result;\n\t\tif (image != null) {\n\t\t\tvar images = this.getResult().images;\n\t\t\tvar pos = images.indexOf(event.item.src);\n\t\t\timages[pos] = image;\n\t\t}\n\t};\n\n\t/**\n\t * The images have completed loading. This triggers the {{#crossLink \"AbstractLoader/complete:event\"}}{{/crossLink}}\n\t * {{#crossLink \"Event\"}}{{/crossLink}} from the SpriteSheetLoader.\n\t * @method _handleManifestComplete\n\t * @param {Event} event\n\t * @private\n\t */\n\tp._handleManifestComplete = function (event) {\n\t\tthis._result = new createjs.SpriteSheet(this._result);\n\t\tthis._loadedItems = this._manifestQueue.getItems(true);\n\t\tthis._sendComplete();\n\t};\n\n\t/**\n\t * The images {{#crossLink \"LoadQueue\"}}{{/crossLink}} has reported progress.\n\t * @method _handleManifestProgress\n\t * @param {ProgressEvent} event\n\t * @private\n\t */\n\tp._handleManifestProgress = function (event) {\n\t\tthis.progress = event.progress * (1 - s.SPRITESHEET_PROGRESS) + s.SPRITESHEET_PROGRESS;\n\t\tthis._sendProgress(this.progress);\n\t};\n\n\t/**\n\t * An image has reported an error.\n\t * @method _handleManifestError\n\t * @param {ErrorEvent} event\n\t * @private\n\t */\n\tp._handleManifestError = function (event) {\n\t\tvar newEvent = new createjs.Event(\"fileerror\");\n\t\tnewEvent.item = event.data;\n\t\tthis.dispatchEvent(newEvent);\n\t};\n\n\tcreatejs.SpriteSheetLoader = createjs.promote(SpriteSheetLoader, \"AbstractLoader\");\n\n}());\n\n//##############################################################################\n// SVGLoader.js\n//##############################################################################\n\nwindow.createjs = window.createjs || {};\n\n(function () {\n\t\"use strict\";\n\n\t// constructor\n\t/**\n\t * A loader for SVG files.\n\t * @class SVGLoader\n\t * @param {LoadItem|Object} loadItem\n\t * @param {Boolean} preferXHR\n\t * @extends AbstractLoader\n\t * @constructor\n\t */\n\tfunction SVGLoader(loadItem, preferXHR) {\n\t\tthis.AbstractLoader_constructor(loadItem, preferXHR, createjs.Types.SVG);\n\n\t\t// public properties\n\t\tthis.resultFormatter = this._formatResult;\n\n\t\t// protected properties\n\t\tthis._tagSrcAttribute = \"data\";\n\n\t\tif (preferXHR) {\n\t\t\tthis.setTag(createjs.Elements.svg());\n\t\t} else {\n\t\t\tthis.setTag(createjs.Elements.object());\n\t\t\tthis.getTag().type = \"image/svg+xml\";\n\t\t}\n\t};\n\n\tvar p = createjs.extend(SVGLoader, createjs.AbstractLoader);\n\tvar s = SVGLoader;\n\n\t// static methods\n\t/**\n\t * Determines if the loader can load a specific item. This loader can only load items that are of type\n\t * {{#crossLink \"Types/SVG:property\"}}{{/crossLink}}\n\t * @method canLoadItem\n\t * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\n\t * @returns {Boolean} Whether the loader can load the item.\n\t * @static\n\t */\n\ts.canLoadItem = function (item) {\n\t\treturn item.type == createjs.Types.SVG;\n\t};\n\n\t// protected methods\n\t/**\n\t * The result formatter for SVG files.\n\t * @method _formatResult\n\t * @param {AbstractLoader} loader\n\t * @returns {Object}\n\t * @private\n\t */\n\tp._formatResult = function (loader) {\n\t\t// mime should be image/svg+xml, but Opera requires text/xml\n\t\tvar xml = createjs.DataUtils.parseXML(loader.getResult(true));\n\t\tvar tag = loader.getTag();\n\n\t\tif (!this._preferXHR && document.body.contains(tag)) {\n\t\t\tdocument.body.removeChild(tag);\n\t\t}\n\n\t\tif (xml.documentElement != null) {\n\t\t\tvar element = xml.documentElement;\n\t\t\t// Support loading an SVG from a different domain in ID\n\t\t\tif (document.importNode) {\n\t\t\t\telement = document.importNode(element, true);\n\t\t\t}\n\t\t\ttag.appendChild(element);\n\t\t\treturn tag;\n\t\t} else { // For browsers that don't support SVG, just give them the XML. (IE 9-8)\n\t\t\treturn xml;\n\t\t}\n\t};\n\n\tcreatejs.SVGLoader = createjs.promote(SVGLoader, \"AbstractLoader\");\n\n}());\n\n//##############################################################################\n// XMLLoader.js\n//##############################################################################\n\nwindow.createjs = window.createjs || {};\n\n(function () {\n\t\"use strict\";\n\n\t// constructor\n\t/**\n\t * A loader for CSS files.\n\t * @class XMLLoader\n\t * @param {LoadItem|Object} loadItem\n\t * @extends AbstractLoader\n\t * @constructor\n\t */\n\tfunction XMLLoader(loadItem) {\n\t\tthis.AbstractLoader_constructor(loadItem, true, createjs.Types.XML);\n\n\t\t// public properties\n\t\tthis.resultFormatter = this._formatResult;\n\t};\n\n\tvar p = createjs.extend(XMLLoader, createjs.AbstractLoader);\n\tvar s = XMLLoader;\n\n\t// static methods\n\t/**\n\t * Determines if the loader can load a specific item. This loader can only load items that are of type\n\t * {{#crossLink \"Types/XML:property\"}}{{/crossLink}}.\n\t * @method canLoadItem\n\t * @param {LoadItem|Object} item The LoadItem that a LoadQueue is trying to load.\n\t * @returns {Boolean} Whether the loader can load the item.\n\t * @static\n\t */\n\ts.canLoadItem = function (item) {\n\t\treturn item.type == createjs.Types.XML;\n\t};\n\n\t// protected methods\n\t/**\n\t * The result formatter for XML files.\n\t * @method _formatResult\n\t * @param {AbstractLoader} loader\n\t * @returns {XMLDocument}\n\t * @private\n\t */\n\tp._formatResult = function (loader) {\n\t\treturn createjs.DataUtils.parseXML(loader.getResult(true));\n\t};\n\n\tcreatejs.XMLLoader = createjs.promote(XMLLoader, \"AbstractLoader\");\n\n}());\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAGA;AACA;AACA;;AAEAA,MAAM,CAACC,QAAQ,GAAGD,MAAM,CAACC,QAAQ,IAAI,CAAC,CAAC;AAEvC,CAAC,YAAY;EACZ,YAAY;;EAEZ;AACD;AACA;AACA;EACC,IAAIC,CAAC,GAAGD,QAAQ,CAACE,SAAS,GAAGF,QAAQ,CAACE,SAAS,IAAI,CAAC,CAAC;;EAErD;AACD;AACA;AACA;AACA;AACA;EACCD,CAAC,CAACE,OAAO,GAAG,YAAY,OAAO,CAAC,CAAC;;EAEjC;AACD;AACA;AACA;AACA;AACA;EACCF,CAAC,CAACG,SAAS,GAAG,SAAS,+BAA+B,CAAC,CAAC;AAEzD,CAAC,EAAE,CAAC;;AAEJ;AACA;AACA;;AAEAL,MAAM,CAACC,QAAQ,GAAGD,MAAM,CAACC,QAAQ,IAAE,CAAC,CAAC;;AAErC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAA,QAAQ,CAACK,MAAM,GAAG,UAASC,QAAQ,EAAEC,UAAU,EAAE;EAChD,YAAY;;EAEZ,SAASC,CAACA,CAAA,EAAG;IAAE,IAAI,CAACC,WAAW,GAAGH,QAAQ;EAAE;EAC5CE,CAAC,CAACE,SAAS,GAAGH,UAAU,CAACG,SAAS;EAClC,OAAQJ,QAAQ,CAACI,SAAS,GAAG,IAAIF,CAAC,CAAC,CAAC;AACrC,CAAC;;AAED;AACA;AACA;;AAEAT,MAAM,CAACC,QAAQ,GAAGD,MAAM,CAACC,QAAQ,IAAE,CAAC,CAAC;;AAErC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAC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I,CAACF,IAAI,GAAGA,IAAI;;IAEhB;AACF;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAACG,MAAM,GAAG,IAAI;;IAElB;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,aAAa,GAAG,IAAI;;IAEzB;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,UAAU,GAAG,CAAC;;IAEnB;AACF;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAACJ,OAAO,GAAG,CAAC,CAACA,OAAO;;IAExB;AACF;AACA;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,UAAU,GAAG,CAAC,CAACA,UAAU;;IAE9B;AACF;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAACI,SAAS,GAAI,IAAIC,IAAI,CAAC,CAAC,CAAEC,OAAO,CAAC,CAAC;;IAEvC;AACF;AACA;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,gBAAgB,GAAG,KAAK;;IAE7B;AACF;AACA;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,kBAAkB,GAAG,KAAK;;IAE/B;AACF;AACA;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,2BAA2B,GAAG,KAAK;;IAExC;AACF;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,OAAO,GAAG,KAAK;EACrB;EACA,IAAIC,CAAC,GAAGd,KAAK,CAACjC,SAAS;;EAExB;EACC;AACD;AACA;AACA;AACA;AACA;EACC+C,CAAC,CAACC,cAAc,GAAG,YAAW;IAC7B,IAAI,CAACL,gBAAgB,GAAG,IAAI,CAACP,UAAU,IAAE,IAAI;EAC9C,CAAC;;EAED;AACD;AACA;AACA;AACA;EACCW,CAAC,CAACE,eAAe,GAAG,YAAW;IAC9B,IAAI,CAACL,kBAAkB,GAAG,IAAI;EAC/B,CAAC;;EAED;AACD;AACA;AACA;AACA;AACA;EACCG,CAAC,CAACG,wBAAwB,GAAG,YAAW;IACvC,IAAI,CAACL,2BAA2B,GAAG,IAAI,CAACD,kBAAkB,GAAG,IAAI;EAClE,CAAC;;EAED;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACCG,CAAC,CAACI,MAAM,GAAG,YAAW;IACrB,IAAI,CAACL,OAAO,GAAG,IAAI;EACpB,CAAC;;EAED;AACD;AACA;AACA;AACA;EACCC,CAAC,CAACK,KAAK,GAAG,YAAW;IACpB,OAAO,IAAInB,KAAK,CAAC,IAAI,CAACC,IAAI,EAAE,IAAI,CAACC,OAAO,EAAE,IAAI,CAACC,UAAU,CAAC;EAC3D,CAAC;;EAED;AACD;AACA;AACA;AACA;AACA;AACA;AACA;EACCW,CAAC,CAACM,GAAG,GAAG,UAASC,KAAK,EAAE;IACvB,KAAK,IAAI9C,CAAC,IAAI8C,KAAK,EAAE;MAAE,IAAI,CAAC9C,CAAC,CAAC,GAAG8C,KAAK,CAAC9C,CAAC,CAAC;IAAE;IAC3C,OAAO,IAAI;EACZ,CAAC;;EAED;AACD;AACA;AACA;AACA;EACCuC,CAAC,CAACQ,QAAQ,GAAG,YAAW;IACvB,OAAO,eAAe,GAAC,IAAI,CAACrB,IAAI,GAAC,IAAI;EACtC,CAAC;EAED5C,QAAQ,CAAC2C,KAAK,GAAGA,KAAK;AACvB,CAAC,EAAC,CAAC;;AAEH;AACA;AACA;;AAEA5C,MAAM,CAACC,QAAQ,GAAGD,MAAM,CAACC,QAAQ,IAAE,CAAC,CAAC;AAEpC,aAAW;EACX,YAAY;;EAEZ;AACD;AACA;AACA;AACA;AACA;AACA;AACA;EACC,SAASkE,UAAUA,CAACC,KAAK,EAAEC,OAAO,EAAEC,IAAI,EAAE;IACzC,IAAI,CAACC,iBAAiB,CAAC,OAAO,CAAC;;IAE/B;AACF;AACA;AACA;AACA;IACE,IAAI,CAACH,KAAK,GAAGA,KAAK;;IAElB;AACF;AACA;AACA;AACA;IACE,IAAI,CAACC,OAAO,GAAGA,OAAO;;IAEtB;AACF;AACA;AACA;AACA;IACE,IAAI,CAACC,IAAI,GAAGA,IAAI;EACjB;EAEA,IAAIZ,CAAC,GAAGzD,QAAQ,CAACK,MAAM,CAAC6D,UAAU,EAAElE,QAAQ,CAAC2C,KAAK,CAAC;EAEnDc,CAAC,CAACK,KAAK,GAAG,YAAW;IACpB,OAAO,IAAI9D,QAAQ,CAACkE,UAAU,CAAC,IAAI,CAACC,KAAK,EAAE,IAAI,CAACC,OAAO,EAAE,IAAI,CAACC,IAAI,CAAC;EACpE,CAAC;EAEDrE,QAAQ,CAACkE,UAAU,GAAGlE,QAAQ,CAACW,OAAO,CAACuD,UAAU,EAAE,OAAO,CAAC;AAE5D,CAAC,EAAC,CAAC;;AAEH;AACA;AACA;;AAEAnE,MAAM,CAACC,QAAQ,GAAGD,MAAM,CAACC,QAAQ,IAAE,CAAC,CAAC;AAEpC,aAAW;EACX,YAAY;;EAGb;EACC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACC,SAASuE,eAAeA,CAAA,EAAG;IAG3B;IACC;AACF;AACA;AACA;AACA;IACE,IAAI,CAACC,UAAU,GAAG,IAAI;;IAEtB;AACF;AACA;AACA;AACA;IACE,IAAI,CAACC,iBAAiB,GAAG,IAAI;EAC9B;EACA,IAAIhB,CAAC,GAAGc,eAAe,CAAC7D,SAAS;;EAElC;EACC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACC6D,eAAe,CAACG,UAAU,GAAG,UAAS3B,MAAM,EAAE;IAC7CA,MAAM,CAAC4B,gBAAgB,GAAGlB,CAAC,CAACkB,gBAAgB;IAC5C5B,MAAM,CAAC6B,EAAE,GAAGnB,CAAC,CAACmB,EAAE;IAChB7B,MAAM,CAAC8B,mBAAmB,GAAG9B,MAAM,CAAC+B,GAAG,GAAIrB,CAAC,CAACoB,mBAAmB;IAChE9B,MAAM,CAACgC,uBAAuB,GAAGtB,CAAC,CAACsB,uBAAuB;IAC1DhC,MAAM,CAACiC,gBAAgB,GAAGvB,CAAC,CAACuB,gBAAgB;IAC5CjC,MAAM,CAACkC,aAAa,GAAGxB,CAAC,CAACwB,aAAa;IACtClC,MAAM,CAACmC,cAAc,GAAGzB,CAAC,CAACyB,cAAc;IACxCnC,MAAM,CAACoC,WAAW,GAAG1B,CAAC,CAAC0B,WAAW;EACnC,CAAC;;EAGF;EACC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACC1B,CAAC,CAACkB,gBAAgB,GAAG,UAAS/B,IAAI,EAAEwC,QAAQ,EAAEC,UAAU,EAAE;IACzD,IAAIC,SAAS;IACb,IAAID,UAAU,EAAE;MACfC,SAAS,GAAG,IAAI,CAACb,iBAAiB,GAAG,IAAI,CAACA,iBAAiB,IAAE,CAAC,CAAC;IAChE,CAAC,MAAM;MACNa,SAAS,GAAG,IAAI,CAACd,UAAU,GAAG,IAAI,CAACA,UAAU,IAAE,CAAC,CAAC;IAClD;IACA,IAAIe,GAAG,GAAGD,SAAS,CAAC1C,IAAI,CAAC;IACzB,IAAI2C,GAAG,EAAE;MAAE,IAAI,CAACV,mBAAmB,CAACjC,IAAI,EAAEwC,QAAQ,EAAEC,UAAU,CAAC;IAAE;IACjEE,GAAG,GAAGD,SAAS,CAAC1C,IAAI,CAAC,CAAC,CAAC;IACvB,IAAI,CAAC2C,GAAG,EAAE;MAAED,SAAS,CAAC1C,IAAI,CAAC,GAAG,CAACwC,QAAQ,CAAC;IAAG,CAAC,MACvC;MAAEG,GAAG,CAACC,IAAI,CAACJ,QAAQ,CAAC;IAAE;IAC3B,OAAOA,QAAQ;EAChB,CAAC;;EAED;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACC3B,CAAC,CAACmB,EAAE,GAAG,UAAShC,IAAI,EAAEwC,QAAQ,EAAErD,KAAK,EAAE0D,IAAI,EAAEpB,IAAI,EAAEgB,UAAU,EAAE;IAC9D,IAAID,QAAQ,CAACM,WAAW,EAAE;MACzB3D,KAAK,GAAGA,KAAK,IAAEqD,QAAQ;MACvBA,QAAQ,GAAGA,QAAQ,CAACM,WAAW;IAChC;IACA3D,KAAK,GAAGA,KAAK,IAAE,IAAI;IACnB,OAAO,IAAI,CAAC4C,gBAAgB,CAAC/B,IAAI,EAAE,UAAS+C,GAAG,EAAE;MAC/CP,QAAQ,CAACjD,IAAI,CAACJ,KAAK,EAAE4D,GAAG,EAAEtB,IAAI,CAAC;MAC/BoB,IAAI,IAAEE,GAAG,CAAC9B,MAAM,CAAC,CAAC;IACnB,CAAC,EAAEwB,UAAU,CAAC;EAChB,CAAC;;EAED;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACC5B,CAAC,CAACoB,mBAAmB,GAAG,UAASjC,IAAI,EAAEwC,QAAQ,EAAEC,UAAU,EAAE;IAC5D,IAAIC,SAAS,GAAGD,UAAU,GAAG,IAAI,CAACZ,iBAAiB,GAAG,IAAI,CAACD,UAAU;IACrE,IAAI,CAACc,SAAS,EAAE;MAAE;IAAQ;IAC1B,IAAIC,GAAG,GAAGD,SAAS,CAAC1C,IAAI,CAAC;IACzB,IAAI,CAAC2C,GAAG,EAAE;MAAE;IAAQ;IACpB,KAAK,IAAI/C,CAAC,GAAC,CAAC,EAACC,CAAC,GAAC8C,GAAG,CAAC7C,MAAM,EAAEF,CAAC,GAACC,CAAC,EAAED,CAAC,EAAE,EAAE;MACpC,IAAI+C,GAAG,CAAC/C,CAAC,CAAC,IAAI4C,QAAQ,EAAE;QACvB,IAAI3C,CAAC,IAAE,CAAC,EAAE;UAAE,OAAO6C,SAAS,CAAC1C,IAAI,CAAE;QAAE,CAAC,CAAC;QAAA,KAClC;UAAE2C,GAAG,CAACK,MAAM,CAACpD,CAAC,EAAC,CAAC,CAAC;QAAE;QACxB;MACD;IACD;EACD,CAAC;;EAED;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACCiB,CAAC,CAACqB,GAAG,GAAGrB,CAAC,CAACoB,mBAAmB;;EAE7B;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACCpB,CAAC,CAACsB,uBAAuB,GAAG,UAASnC,IAAI,EAAE;IAC1C,IAAI,CAACA,IAAI,EAAE;MAAE,IAAI,CAAC4B,UAAU,GAAG,IAAI,CAACC,iBAAiB,GAAG,IAAI;IAAE,CAAC,MAC1D;MACJ,IAAI,IAAI,CAACD,UAAU,EAAE;QAAE,OAAO,IAAI,CAACA,UAAU,CAAC5B,IAAI,CAAE;MAAE;MACtD,IAAI,IAAI,CAAC6B,iBAAiB,EAAE;QAAE,OAAO,IAAI,CAACA,iBAAiB,CAAC7B,IAAI,CAAE;MAAE;IACrE;EACD,CAAC;;EAED;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACCa,CAAC,CAACwB,aAAa,GAAG,UAASY,QAAQ,EAAEhD,OAAO,EAAEC,UAAU,EAAE;IACzD,IAAI,OAAO+C,QAAQ,IAAI,QAAQ,EAAE;MAChC;MACA,IAAIP,SAAS,GAAG,IAAI,CAACd,UAAU;MAC/B,IAAI,CAAC3B,OAAO,KAAK,CAACyC,SAAS,IAAI,CAACA,SAAS,CAACO,QAAQ,CAAC,CAAC,EAAE;QAAE,OAAO,IAAI;MAAE;MACrEA,QAAQ,GAAG,IAAI7F,QAAQ,CAAC2C,KAAK,CAACkD,QAAQ,EAAEhD,OAAO,EAAEC,UAAU,CAAC;IAC7D,CAAC,MAAM,IAAI+C,QAAQ,CAAC9C,MAAM,IAAI8C,QAAQ,CAAC/B,KAAK,EAAE;MAC7C;MACA+B,QAAQ,GAAGA,QAAQ,CAAC/B,KAAK,CAAC,CAAC;IAC5B;;IAEA;IACA,IAAI;MAAE+B,QAAQ,CAAC9C,MAAM,GAAG,IAAI;IAAE,CAAC,CAAC,OAAO+C,CAAC,EAAE,CAAC,CAAC,CAAC;;IAE7C,IAAI,CAACD,QAAQ,CAAChD,OAAO,IAAI,CAAC,IAAI,CAACkD,MAAM,EAAE;MACtC,IAAI,CAACb,cAAc,CAACW,QAAQ,EAAE,CAAC,CAAC;IACjC,CAAC,MAAM;MACN,IAAIG,GAAG,GAAC,IAAI;QAAEC,IAAI,GAAC,CAACD,GAAG,CAAC;MACxB,OAAOA,GAAG,CAACD,MAAM,EAAE;QAAEE,IAAI,CAACT,IAAI,CAACQ,GAAG,GAAGA,GAAG,CAACD,MAAM,CAAC;MAAE;MAClD,IAAIvD,CAAC;QAAEC,CAAC,GAACwD,IAAI,CAACvD,MAAM;;MAEpB;MACA,KAAKF,CAAC,GAACC,CAAC,GAAC,CAAC,EAAED,CAAC,IAAE,CAAC,IAAI,CAACqD,QAAQ,CAACvC,kBAAkB,EAAEd,CAAC,EAAE,EAAE;QACtDyD,IAAI,CAACzD,CAAC,CAAC,CAAC0C,cAAc,CAACW,QAAQ,EAAE,CAAC,IAAErD,CAAC,IAAE,CAAC,CAAC,CAAC;MAC3C;MACA;MACA,KAAKA,CAAC,GAAC,CAAC,EAAEA,CAAC,GAACC,CAAC,IAAI,CAACoD,QAAQ,CAACvC,kBAAkB,EAAEd,CAAC,EAAE,EAAE;QACnDyD,IAAI,CAACzD,CAAC,CAAC,CAAC0C,cAAc,CAACW,QAAQ,EAAE,CAAC,CAAC;MACpC;IACD;IACA,OAAO,CAACA,QAAQ,CAACxC,gBAAgB;EAClC,CAAC;;EAED;AACD;AACA;AACA;AACA;AACA;EACCI,CAAC,CAACuB,gBAAgB,GAAG,UAASpC,IAAI,EAAE;IACnC,IAAI0C,SAAS,GAAG,IAAI,CAACd,UAAU;MAAE0B,gBAAgB,GAAG,IAAI,CAACzB,iBAAiB;IAC1E,OAAO,CAAC,EAAGa,SAAS,IAAIA,SAAS,CAAC1C,IAAI,CAAC,IAAMsD,gBAAgB,IAAIA,gBAAgB,CAACtD,IAAI,CAAE,CAAC;EAC1F,CAAC;;EAED;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACCa,CAAC,CAAC0B,WAAW,GAAG,UAASvC,IAAI,EAAE;IAC9B,IAAIpC,CAAC,GAAG,IAAI;IACZ,OAAOA,CAAC,EAAE;MACT,IAAIA,CAAC,CAACwE,gBAAgB,CAACpC,IAAI,CAAC,EAAE;QAAE,OAAO,IAAI;MAAE;MAC7CpC,CAAC,GAAGA,CAAC,CAACuF,MAAM;IACb;IACA,OAAO,KAAK;EACb,CAAC;;EAED;AACD;AACA;AACA;EACCtC,CAAC,CAACQ,QAAQ,GAAG,YAAW;IACvB,OAAO,mBAAmB;EAC3B,CAAC;;EAGF;EACC;AACD;AACA;AACA;AACA;AACA;EACCR,CAAC,CAACyB,cAAc,GAAG,UAASW,QAAQ,EAAE5C,UAAU,EAAE;IACjD,IAAIR,CAAC;MAAE8C,GAAG;MAAED,SAAS,GAAIrC,UAAU,IAAI,CAAC,GAAI,IAAI,CAACwB,iBAAiB,GAAG,IAAI,CAACD,UAAU;IACpF,IAAIqB,QAAQ,IAAIP,SAAS,KAAKC,GAAG,GAAGD,SAAS,CAACO,QAAQ,CAACjD,IAAI,CAAC,CAAC,KAAKH,CAAC,GAAC8C,GAAG,CAAC7C,MAAM,CAAC,EAAE;MAChF,IAAI;QAAEmD,QAAQ,CAAC7C,aAAa,GAAG,IAAI;MAAE,CAAC,CAAC,OAAO8C,CAAC,EAAE,CAAC;MAClD,IAAI;QAAED,QAAQ,CAAC5C,UAAU,GAAGA,UAAU,GAAC,CAAC;MAAE,CAAC,CAAC,OAAO6C,CAAC,EAAE,CAAC;MACvDD,QAAQ,CAACrC,OAAO,GAAG,KAAK;MAExB+B,GAAG,GAAGA,GAAG,CAACrD,KAAK,CAAC,CAAC,CAAC,CAAC;MACnB,KAAK,IAAIM,CAAC,GAAC,CAAC,EAAEA,CAAC,GAACC,CAAC,IAAI,CAACoD,QAAQ,CAACtC,2BAA2B,EAAEf,CAAC,EAAE,EAAE;QAChE,IAAIhC,CAAC,GAAG+E,GAAG,CAAC/C,CAAC,CAAC;QACd,IAAIhC,CAAC,CAACkF,WAAW,EAAE;UAAElF,CAAC,CAACkF,WAAW,CAACG,QAAQ,CAAC;QAAE,CAAC,MAC1C;UAAErF,CAAC,CAACqF,QAAQ,CAAC;QAAE;QACpB,IAAIA,QAAQ,CAACrC,OAAO,EAAE;UACrB,IAAI,CAACsB,GAAG,CAACe,QAAQ,CAACjD,IAAI,EAAEpC,CAAC,EAAEyC,UAAU,IAAE,CAAC,CAAC;UACzC4C,QAAQ,CAACrC,OAAO,GAAG,KAAK;QACzB;MACD;IACD;IACA,IAAIP,UAAU,KAAK,CAAC,EAAE;MAAE,IAAI,CAACiC,cAAc,CAACW,QAAQ,EAAE,GAAG,CAAC;IAAE;EAC7D,CAAC;EAGD7F,QAAQ,CAACuE,eAAe,GAAGA,eAAe;AAC3C,CAAC,EAAC,CAAC;;AAEH;AACA;AACA;;AAEAxE,MAAM,CAACC,QAAQ,GAAGD,MAAM,CAACC,QAAQ,IAAI,CAAC,CAAC;AAEtC,WAAU+B,KAAK,EAAE;EACjB,YAAY;;EAEZ;EACA;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACC,SAASoE,aAAaA,CAACC,MAAM,EAAEC,KAAK,EAAE;IACrC,IAAI,CAAC/B,iBAAiB,CAAC,UAAU,CAAC;;IAElC;AACF;AACA;AACA;AACA;IACE,IAAI,CAAC8B,MAAM,GAAGA,MAAM;;IAEpB;AACF;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,KAAK,GAAIA,KAAK,IAAI,IAAI,GAAI,CAAC,GAAGA,KAAK;;IAExC;AACF;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,QAAQ,GAAID,KAAK,IAAI,CAAC,GAAI,CAAC,GAAG,IAAI,CAACD,MAAM,GAAG,IAAI,CAACC,KAAK;EAC5D;EAAC;EAED,IAAI5C,CAAC,GAAGzD,QAAQ,CAACK,MAAM,CAAC8F,aAAa,EAAEnG,QAAQ,CAAC2C,KAAK,CAAC;;EAEtD;AACD;AACA;AACA;AACA;EACCc,CAAC,CAACK,KAAK,GAAG,YAAW;IACpB,OAAO,IAAI9D,QAAQ,CAACmG,aAAa,CAAC,IAAI,CAACC,MAAM,EAAE,IAAI,CAACC,KAAK,CAAC;EAC3D,CAAC;EAEDrG,QAAQ,CAACmG,aAAa,GAAGnG,QAAQ,CAACW,OAAO,CAACwF,aAAa,EAAE,OAAO,CAAC;AAElE,CAAC,EAACpG,MAAM,CAAC;;AAET;AACA;AACA;;AAEA;AACA;AAAC,CAAC,YAAY;EACZ;EACA;EACA,IAAIwG,QAAQ,GAAG,OAAOC,MAAM,KAAK,UAAU,IAAIA,MAAM,CAACC,GAAG;;EAEzD;EACA,IAAIC,WAAW,GAAG;IAChB,UAAU,EAAE,IAAI;IAChB,QAAQ,EAAE;EACZ,CAAC;;EAED;EACA,IAAIC,WAAW,GAAGD,WAAW,CAAC,OAAOE,OAAO,CAAC,IAAIA,OAAO,IAAI,CAACA,OAAO,CAACC,QAAQ,IAAID,OAAO;;EAExF;EACA;EACA;EACA;EACA,IAAIE,IAAI,GAAGJ,WAAW,CAAC,OAAO3G,MAAM,CAAC,IAAIA,MAAM,IAAI,IAAI;IACnDgH,UAAU,GAAGJ,WAAW,IAAID,WAAW,CAAC,OAAOM,MAAM,CAAC,IAAIA,MAAM,IAAI,CAACA,MAAM,CAACH,QAAQ,IAAI,OAAOI,MAAM,IAAI,QAAQ,IAAIA,MAAM;EAE/H,IAAIF,UAAU,KAAKA,UAAU,CAAC,QAAQ,CAAC,KAAKA,UAAU,IAAIA,UAAU,CAAC,QAAQ,CAAC,KAAKA,UAAU,IAAIA,UAAU,CAAC,MAAM,CAAC,KAAKA,UAAU,CAAC,EAAE;IACnID,IAAI,GAAGC,UAAU;EACnB;;EAEA;EACA;EACA,SAASG,YAAYA,CAACC,OAAO,EAAEP,OAAO,EAAE;IACtCO,OAAO,KAAKA,OAAO,GAAGL,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;IACvCF,OAAO,KAAKA,OAAO,GAAGE,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;;IAEvC;IACA,IAAIM,MAAM,GAAGD,OAAO,CAAC,QAAQ,CAAC,IAAIL,IAAI,CAAC,QAAQ,CAAC;MAC5CO,MAAM,GAAGF,OAAO,CAAC,QAAQ,CAAC,IAAIL,IAAI,CAAC,QAAQ,CAAC;MAC5C/F,MAAM,GAAGoG,OAAO,CAAC,QAAQ,CAAC,IAAIL,IAAI,CAAC,QAAQ,CAAC;MAC5C3D,IAAI,GAAGgE,OAAO,CAAC,MAAM,CAAC,IAAIL,IAAI,CAAC,MAAM,CAAC;MACtCQ,WAAW,GAAGH,OAAO,CAAC,aAAa,CAAC,IAAIL,IAAI,CAAC,aAAa,CAAC;MAC3DS,SAAS,GAAGJ,OAAO,CAAC,WAAW,CAAC,IAAIL,IAAI,CAAC,WAAW,CAAC;MACrDU,IAAI,GAAGL,OAAO,CAAC,MAAM,CAAC,IAAIL,IAAI,CAAC,MAAM,CAAC;MACtCW,UAAU,GAAGN,OAAO,CAAC,MAAM,CAAC,IAAIL,IAAI,CAAC,MAAM,CAAC;;IAEhD;IACA,IAAI,OAAOW,UAAU,IAAI,QAAQ,IAAIA,UAAU,EAAE;MAC/Cb,OAAO,CAACc,SAAS,GAAGD,UAAU,CAACC,SAAS;MACxCd,OAAO,CAACe,KAAK,GAAGF,UAAU,CAACE,KAAK;IAClC;;IAEA;IACA,IAAIC,WAAW,GAAG7G,MAAM,CAACL,SAAS;MAC9BmH,QAAQ,GAAGD,WAAW,CAAC3D,QAAQ;MAC/B6D,UAAU;MAAEC,OAAO;MAAEC,KAAK;;IAE9B;IACA,IAAIC,UAAU,GAAG,IAAI9E,IAAI,CAAC,CAAC,gBAAgB,CAAC;IAC5C,IAAI;MACF;MACA;MACA8E,UAAU,GAAGA,UAAU,CAACC,cAAc,CAAC,CAAC,IAAI,CAAC,MAAM,IAAID,UAAU,CAACE,WAAW,CAAC,CAAC,KAAK,CAAC,IAAIF,UAAU,CAACG,UAAU,CAAC,CAAC,KAAK,CAAC;MACpH;MACA;MACA;MACAH,UAAU,CAACI,WAAW,CAAC,CAAC,IAAI,EAAE,IAAIJ,UAAU,CAACK,aAAa,CAAC,CAAC,IAAI,EAAE,IAAIL,UAAU,CAACM,aAAa,CAAC,CAAC,IAAI,CAAC,IAAIN,UAAU,CAACO,kBAAkB,CAAC,CAAC,IAAI,GAAG;IACnJ,CAAC,CAAC,OAAOC,SAAS,EAAE,CAAC;;IAErB;IACA;IACA,SAASC,GAAGA,CAACpH,IAAI,EAAE;MACjB,IAAIoH,GAAG,CAACpH,IAAI,CAAC,KAAK0G,KAAK,EAAE;QACvB;QACA,OAAOU,GAAG,CAACpH,IAAI,CAAC;MAClB;MACA,IAAIqH,WAAW;MACf,IAAIrH,IAAI,IAAI,uBAAuB,EAAE;QACnC;QACA;QACAqH,WAAW,GAAG,GAAG,CAAC,CAAC,CAAC,IAAI,GAAG;MAC7B,CAAC,MAAM,IAAIrH,IAAI,IAAI,MAAM,EAAE;QACzB;QACA;QACAqH,WAAW,GAAGD,GAAG,CAAC,gBAAgB,CAAC,IAAIA,GAAG,CAAC,YAAY,CAAC;MAC1D,CAAC,MAAM;QACL,IAAIE,KAAK;UAAEC,UAAU,GAAG,oDAAoD;QAC5E;QACA,IAAIvH,IAAI,IAAI,gBAAgB,EAAE;UAC5B,IAAIoG,SAAS,GAAGd,OAAO,CAACc,SAAS;YAAEoB,kBAAkB,GAAG,OAAOpB,SAAS,IAAI,UAAU,IAAIO,UAAU;UACpG,IAAIa,kBAAkB,EAAE;YACtB;YACA,CAACF,KAAK,GAAG,SAAAA,CAAA,EAAY;cACnB,OAAO,CAAC;YACV,CAAC,EAAEG,MAAM,GAAGH,KAAK;YACjB,IAAI;cACFE,kBAAkB;cAChB;cACA;cACApB,SAAS,CAAC,CAAC,CAAC,KAAK,GAAG;cACpB;cACA;cACAA,SAAS,CAAC,IAAIN,MAAM,CAAC,CAAC,CAAC,KAAK,GAAG,IAC/BM,SAAS,CAAC,IAAIL,MAAM,CAAC,CAAC,CAAC,IAAI,IAAI;cAC/B;cACA;cACA;cACA;cACAK,SAAS,CAACG,QAAQ,CAAC,KAAKG,KAAK;cAC7B;cACA;cACAN,SAAS,CAACM,KAAK,CAAC,KAAKA,KAAK;cAC1B;cACA;cACAN,SAAS,CAAC,CAAC,KAAKM,KAAK;cACrB;cACA;cACA;cACA;cACA;cACAN,SAAS,CAACkB,KAAK,CAAC,KAAK,GAAG,IACxBlB,SAAS,CAAC,CAACkB,KAAK,CAAC,CAAC,IAAI,KAAK;cAC3B;cACA;cACAlB,SAAS,CAAC,CAACM,KAAK,CAAC,CAAC,IAAI,QAAQ;cAC9B;cACAN,SAAS,CAAC,IAAI,CAAC,IAAI,MAAM;cACzB;cACA;cACA;cACA;cACAA,SAAS,CAAC,CAACM,KAAK,EAAEH,QAAQ,EAAE,IAAI,CAAC,CAAC,IAAI,kBAAkB;cACxD;cACA;cACAH,SAAS,CAAC;gBAAE,GAAG,EAAE,CAACkB,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE,gBAAgB;cAAE,CAAC,CAAC,IAAIC,UAAU;cAC9E;cACAnB,SAAS,CAAC,IAAI,EAAEkB,KAAK,CAAC,KAAK,GAAG,IAC9BlB,SAAS,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,IAAI,EAAE,CAAC,CAAC,IAAI,eAAe;cAC7C;cACA;cACAA,SAAS,CAAC,IAAIvE,IAAI,CAAC,CAAC,OAAO,CAAC,CAAC,IAAI,+BAA+B;cAChE;cACAuE,SAAS,CAAC,IAAIvE,IAAI,CAAC,OAAO,CAAC,CAAC,IAAI,+BAA+B;cAC/D;cACA;cACAuE,SAAS,CAAC,IAAIvE,IAAI,CAAC,CAAC,WAAW,CAAC,CAAC,IAAI,+BAA+B;cACpE;cACA;cACAuE,SAAS,CAAC,IAAIvE,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,4BAA4B;YAC3D,CAAC,CAAC,OAAOsF,SAAS,EAAE;cAClBK,kBAAkB,GAAG,KAAK;YAC5B;UACF;UACAH,WAAW,GAAGG,kBAAkB;QAClC;QACA;QACA,IAAIxH,IAAI,IAAI,YAAY,EAAE;UACxB,IAAIqG,KAAK,GAAGf,OAAO,CAACe,KAAK;UACzB,IAAI,OAAOA,KAAK,IAAI,UAAU,EAAE;YAC9B,IAAI;cACF;cACA;cACA;cACA,IAAIA,KAAK,CAAC,GAAG,CAAC,KAAK,CAAC,IAAI,CAACA,KAAK,CAAC,KAAK,CAAC,EAAE;gBACrC;gBACAiB,KAAK,GAAGjB,KAAK,CAACkB,UAAU,CAAC;gBACzB,IAAIG,cAAc,GAAGJ,KAAK,CAAC,GAAG,CAAC,CAAClG,MAAM,IAAI,CAAC,IAAIkG,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC;gBAClE,IAAII,cAAc,EAAE;kBAClB,IAAI;oBACF;oBACAA,cAAc,GAAG,CAACrB,KAAK,CAAC,MAAM,CAAC;kBACjC,CAAC,CAAC,OAAOc,SAAS,EAAE,CAAC;kBACrB,IAAIO,cAAc,EAAE;oBAClB,IAAI;sBACF;sBACA;sBACA;sBACAA,cAAc,GAAGrB,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC;oBACpC,CAAC,CAAC,OAAOc,SAAS,EAAE,CAAC;kBACvB;kBACA,IAAIO,cAAc,EAAE;oBAClB,IAAI;sBACF;sBACA;sBACA;sBACAA,cAAc,GAAGrB,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC;oBACpC,CAAC,CAAC,OAAOc,SAAS,EAAE,CAAC;kBACvB;gBACF;cACF;YACF,CAAC,CAAC,OAAOA,SAAS,EAAE;cAClBO,cAAc,GAAG,KAAK;YACxB;UACF;UACAL,WAAW,GAAGK,cAAc;QAC9B;MACF;MACA,OAAON,GAAG,CAACpH,IAAI,CAAC,GAAG,CAAC,CAACqH,WAAW;IAClC;IAEA,IAAI,CAACD,GAAG,CAAC,MAAM,CAAC,EAAE;MAChB;MACA,IAAIO,aAAa,GAAG,mBAAmB;QACnCC,SAAS,GAAG,eAAe;QAC3BC,WAAW,GAAG,iBAAiB;QAC/BC,WAAW,GAAG,iBAAiB;QAC/BC,UAAU,GAAG,gBAAgB;QAC7BC,YAAY,GAAG,kBAAkB;;MAErC;MACA,IAAIC,cAAc,GAAGb,GAAG,CAAC,uBAAuB,CAAC;;MAEjD;MACA,IAAI,CAACT,UAAU,EAAE;QACf,IAAIuB,KAAK,GAAGhC,IAAI,CAACgC,KAAK;QACtB;QACA;QACA,IAAIC,MAAM,GAAG,CAAC,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QACpE;QACA;QACA,IAAIC,MAAM,GAAG,SAAAA,CAAUC,IAAI,EAAEC,KAAK,EAAE;UAClC,OAAOH,MAAM,CAACG,KAAK,CAAC,GAAG,GAAG,IAAID,IAAI,GAAG,IAAI,CAAC,GAAGH,KAAK,CAAC,CAACG,IAAI,GAAG,IAAI,IAAIC,KAAK,GAAG,EAAEA,KAAK,GAAG,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,GAAGJ,KAAK,CAAC,CAACG,IAAI,GAAG,IAAI,GAAGC,KAAK,IAAI,GAAG,CAAC,GAAGJ,KAAK,CAAC,CAACG,IAAI,GAAG,IAAI,GAAGC,KAAK,IAAI,GAAG,CAAC;QAC1K,CAAC;MACH;;MAEA;MACA;MACA,IAAI,EAAE9B,UAAU,GAAGF,WAAW,CAACzG,cAAc,CAAC,EAAE;QAC9C2G,UAAU,GAAG,SAAAA,CAAU+B,QAAQ,EAAE;UAC/B,IAAIC,OAAO,GAAG,CAAC,CAAC;YAAErJ,WAAW;UAC7B,IAAI,CAACqJ,OAAO,CAAC7I,SAAS,GAAG,IAAI,EAAE6I,OAAO,CAAC7I,SAAS,GAAG;YACjD;YACA;YACA,UAAU,EAAE;UACd,CAAC,EAAE6I,OAAO,EAAE7F,QAAQ,IAAI4D,QAAQ,EAAE;YAChC;YACA;YACAC,UAAU,GAAG,SAAAA,CAAU+B,QAAQ,EAAE;cAC/B;cACA;cACA;cACA,IAAIE,QAAQ,GAAG,IAAI,CAAC9I,SAAS;gBAAE+I,MAAM,IAAGH,QAAQ,KAAK,IAAI,CAAC5I,SAAS,GAAG,IAAI,EAAE,IAAI,CAAC;cACjF;cACA,IAAI,CAACA,SAAS,GAAG8I,QAAQ;cACzB,OAAOC,MAAM;YACf,CAAC;UACH,CAAC,MAAM;YACL;YACAvJ,WAAW,GAAGqJ,OAAO,CAACrJ,WAAW;YACjC;YACA;YACAqH,UAAU,GAAG,SAAAA,CAAU+B,QAAQ,EAAE;cAC/B,IAAI9D,MAAM,GAAG,CAAC,IAAI,CAACtF,WAAW,IAAIA,WAAW,EAAEC,SAAS;cACxD,OAAOmJ,QAAQ,IAAI,IAAI,IAAI,EAAEA,QAAQ,IAAI9D,MAAM,IAAI,IAAI,CAAC8D,QAAQ,CAAC,KAAK9D,MAAM,CAAC8D,QAAQ,CAAC,CAAC;YACzF,CAAC;UACH;UACAC,OAAO,GAAG,IAAI;UACd,OAAOhC,UAAU,CAAC3F,IAAI,CAAC,IAAI,EAAE0H,QAAQ,CAAC;QACxC,CAAC;MACH;;MAEA;MACA;MACA9B,OAAO,GAAG,SAAAA,CAAUkC,MAAM,EAAEC,QAAQ,EAAE;QACpC,IAAIC,IAAI,GAAG,CAAC;UAAEC,UAAU;UAAEN,OAAO;UAAED,QAAQ;;QAE3C;QACA;QACA;QACA,CAACO,UAAU,GAAG,SAAAA,CAAA,EAAY;UACxB,IAAI,CAACC,OAAO,GAAG,CAAC;QAClB,CAAC,EAAE3J,SAAS,CAAC2J,OAAO,GAAG,CAAC;;QAExB;QACAP,OAAO,GAAG,IAAIM,UAAU,CAAC,CAAC;QAC1B,KAAKP,QAAQ,IAAIC,OAAO,EAAE;UACxB;UACA,IAAIhC,UAAU,CAAC3F,IAAI,CAAC2H,OAAO,EAAED,QAAQ,CAAC,EAAE;YACtCM,IAAI,EAAE;UACR;QACF;QACAC,UAAU,GAAGN,OAAO,GAAG,IAAI;;QAE3B;QACA,IAAI,CAACK,IAAI,EAAE;UACT;UACAL,OAAO,GAAG,CAAC,SAAS,EAAE,UAAU,EAAE,gBAAgB,EAAE,sBAAsB,EAAE,eAAe,EAAE,gBAAgB,EAAE,aAAa,CAAC;UAC7H;UACA;UACA/B,OAAO,GAAG,SAAAA,CAAUkC,MAAM,EAAEC,QAAQ,EAAE;YACpC,IAAII,UAAU,GAAGzC,QAAQ,CAAC1F,IAAI,CAAC8H,MAAM,CAAC,IAAIhB,aAAa;cAAEY,QAAQ;cAAEnH,MAAM;YACzE,IAAI6H,WAAW,GAAG,CAACD,UAAU,IAAI,OAAOL,MAAM,CAACxJ,WAAW,IAAI,UAAU,IAAIiG,WAAW,CAAC,OAAOuD,MAAM,CAAC9I,cAAc,CAAC,IAAI8I,MAAM,CAAC9I,cAAc,IAAI2G,UAAU;YAC5J,KAAK+B,QAAQ,IAAII,MAAM,EAAE;cACvB;cACA;cACA,IAAI,EAAEK,UAAU,IAAIT,QAAQ,IAAI,WAAW,CAAC,IAAIU,WAAW,CAACpI,IAAI,CAAC8H,MAAM,EAAEJ,QAAQ,CAAC,EAAE;gBAClFK,QAAQ,CAACL,QAAQ,CAAC;cACpB;YACF;YACA;YACA,KAAKnH,MAAM,GAAGoH,OAAO,CAACpH,MAAM,EAAEmH,QAAQ,GAAGC,OAAO,CAAC,EAAEpH,MAAM,CAAC,EAAE6H,WAAW,CAACpI,IAAI,CAAC8H,MAAM,EAAEJ,QAAQ,CAAC,IAAIK,QAAQ,CAACL,QAAQ,CAAC,CAAC;UACvH,CAAC;QACH,CAAC,MAAM,IAAIM,IAAI,IAAI,CAAC,EAAE;UACpB;UACApC,OAAO,GAAG,SAAAA,CAAUkC,MAAM,EAAEC,QAAQ,EAAE;YACpC;YACA,IAAIJ,OAAO,GAAG,CAAC,CAAC;cAAEQ,UAAU,GAAGzC,QAAQ,CAAC1F,IAAI,CAAC8H,MAAM,CAAC,IAAIhB,aAAa;cAAEY,QAAQ;YAC/E,KAAKA,QAAQ,IAAII,MAAM,EAAE;cACvB;cACA;cACA;cACA,IAAI,EAAEK,UAAU,IAAIT,QAAQ,IAAI,WAAW,CAAC,IAAI,CAAC/B,UAAU,CAAC3F,IAAI,CAAC2H,OAAO,EAAED,QAAQ,CAAC,KAAKC,OAAO,CAACD,QAAQ,CAAC,GAAG,CAAC,CAAC,IAAI/B,UAAU,CAAC3F,IAAI,CAAC8H,MAAM,EAAEJ,QAAQ,CAAC,EAAE;gBACnJK,QAAQ,CAACL,QAAQ,CAAC;cACpB;YACF;UACF,CAAC;QACH,CAAC,MAAM;UACL;UACA9B,OAAO,GAAG,SAAAA,CAAUkC,MAAM,EAAEC,QAAQ,EAAE;YACpC,IAAII,UAAU,GAAGzC,QAAQ,CAAC1F,IAAI,CAAC8H,MAAM,CAAC,IAAIhB,aAAa;cAAEY,QAAQ;cAAEW,aAAa;YAChF,KAAKX,QAAQ,IAAII,MAAM,EAAE;cACvB,IAAI,EAAEK,UAAU,IAAIT,QAAQ,IAAI,WAAW,CAAC,IAAI/B,UAAU,CAAC3F,IAAI,CAAC8H,MAAM,EAAEJ,QAAQ,CAAC,IAAI,EAAEW,aAAa,GAAGX,QAAQ,KAAK,aAAa,CAAC,EAAE;gBAClIK,QAAQ,CAACL,QAAQ,CAAC;cACpB;YACF;YACA;YACA;YACA,IAAIW,aAAa,IAAI1C,UAAU,CAAC3F,IAAI,CAAC8H,MAAM,EAAGJ,QAAQ,GAAG,aAAc,CAAC,EAAE;cACxEK,QAAQ,CAACL,QAAQ,CAAC;YACpB;UACF,CAAC;QACH;QACA,OAAO9B,OAAO,CAACkC,MAAM,EAAEC,QAAQ,CAAC;MAClC,CAAC;;MAED;MACA;MACA;MACA;MACA;MACA;MACA,IAAI,CAACxB,GAAG,CAAC,gBAAgB,CAAC,EAAE;QAC1B;QACA,IAAI+B,OAAO,GAAG;UACZ,EAAE,EAAE,MAAM;UACV,EAAE,EAAE,KAAK;UACT,CAAC,EAAE,KAAK;UACR,EAAE,EAAE,KAAK;UACT,EAAE,EAAE,KAAK;UACT,EAAE,EAAE,KAAK;UACT,CAAC,EAAE;QACL,CAAC;;QAED;QACA;QACA,IAAIC,aAAa,GAAG,QAAQ;QAC5B,IAAIC,cAAc,GAAG,SAAAA,CAAUC,KAAK,EAAEhC,KAAK,EAAE;UAC3C;UACA;UACA,OAAO,CAAC8B,aAAa,IAAI9B,KAAK,IAAI,CAAC,CAAC,EAAE1G,KAAK,CAAC,CAAC0I,KAAK,CAAC;QACrD,CAAC;;QAED;QACA;QACA;QACA;QACA,IAAIC,aAAa,GAAG,OAAO;QAC3B,IAAIC,KAAK,GAAG,SAAAA,CAAUlC,KAAK,EAAE;UAC3B,IAAIoB,MAAM,GAAG,GAAG;YAAEe,KAAK,GAAG,CAAC;YAAErI,MAAM,GAAGkG,KAAK,CAAClG,MAAM;YAAEsI,YAAY,GAAG,CAACzB,cAAc,IAAI7G,MAAM,GAAG,EAAE;UACjG,IAAIuI,OAAO,GAAGD,YAAY,KAAKzB,cAAc,GAAGX,KAAK,CAACsC,KAAK,CAAC,EAAE,CAAC,GAAGtC,KAAK,CAAC;UACxE,OAAOmC,KAAK,GAAGrI,MAAM,EAAEqI,KAAK,EAAE,EAAE;YAC9B,IAAII,QAAQ,GAAGvC,KAAK,CAACwC,UAAU,CAACL,KAAK,CAAC;YACtC;YACA;YACA,QAAQI,QAAQ;cACd,KAAK,CAAC;cAAE,KAAK,CAAC;cAAE,KAAK,EAAE;cAAE,KAAK,EAAE;cAAE,KAAK,EAAE;cAAE,KAAK,EAAE;cAAE,KAAK,EAAE;gBACzDnB,MAAM,IAAIS,OAAO,CAACU,QAAQ,CAAC;gBAC3B;cACF;gBACE,IAAIA,QAAQ,GAAG,EAAE,EAAE;kBACjBnB,MAAM,IAAIa,aAAa,GAAGF,cAAc,CAAC,CAAC,EAAEQ,QAAQ,CAAClH,QAAQ,CAAC,EAAE,CAAC,CAAC;kBAClE;gBACF;gBACA+F,MAAM,IAAIgB,YAAY,GAAGC,OAAO,CAACF,KAAK,CAAC,GAAGnC,KAAK,CAACyC,MAAM,CAACN,KAAK,CAAC;YACjE;UACF;UACA,OAAOf,MAAM,GAAG,GAAG;QACrB,CAAC;;QAED;QACA;QACA,IAAIsB,SAAS,GAAG,SAAAA,CAAUzB,QAAQ,EAAEI,MAAM,EAAEC,QAAQ,EAAEqB,UAAU,EAAEC,UAAU,EAAEC,WAAW,EAAEC,KAAK,EAAE;UAChG,IAAI9C,KAAK,EAAE+C,SAAS,EAAEhC,IAAI,EAAEC,KAAK,EAAEgC,IAAI,EAAEC,IAAI,EAAEC,KAAK,EAAEC,OAAO,EAAEC,OAAO,EAAEC,YAAY,EAAEC,OAAO,EAAEC,OAAO,EAAEpB,KAAK,EAAErI,MAAM,EAAE9B,MAAM,EAAEoJ,MAAM;UACrI,IAAI;YACF;YACApB,KAAK,GAAGqB,MAAM,CAACJ,QAAQ,CAAC;UAC1B,CAAC,CAAC,OAAOpB,SAAS,EAAE,CAAC;UACrB,IAAI,OAAOG,KAAK,IAAI,QAAQ,IAAIA,KAAK,EAAE;YACrC+C,SAAS,GAAG9D,QAAQ,CAAC1F,IAAI,CAACyG,KAAK,CAAC;YAChC,IAAI+C,SAAS,IAAIzC,SAAS,IAAI,CAACpB,UAAU,CAAC3F,IAAI,CAACyG,KAAK,EAAE,QAAQ,CAAC,EAAE;cAC/D,IAAIA,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC,IAAIA,KAAK,GAAG,CAAC,GAAG,CAAC,EAAE;gBACnC;gBACA;gBACA;gBACA,IAAIc,MAAM,EAAE;kBACV;kBACA;kBACA;kBACAkC,IAAI,GAAGpC,KAAK,CAACZ,KAAK,GAAG,KAAK,CAAC;kBAC3B,KAAKe,IAAI,GAAGH,KAAK,CAACoC,IAAI,GAAG,QAAQ,CAAC,GAAG,IAAI,GAAG,CAAC,EAAElC,MAAM,CAACC,IAAI,GAAG,CAAC,EAAE,CAAC,CAAC,IAAIiC,IAAI,EAAEjC,IAAI,EAAE,CAAC;kBACnF,KAAKC,KAAK,GAAGJ,KAAK,CAAC,CAACoC,IAAI,GAAGlC,MAAM,CAACC,IAAI,EAAE,CAAC,CAAC,IAAI,KAAK,CAAC,EAAED,MAAM,CAACC,IAAI,EAAEC,KAAK,GAAG,CAAC,CAAC,IAAIgC,IAAI,EAAEhC,KAAK,EAAE,CAAC;kBAC/FgC,IAAI,GAAG,CAAC,GAAGA,IAAI,GAAGlC,MAAM,CAACC,IAAI,EAAEC,KAAK,CAAC;kBACrC;kBACA;kBACA;kBACA;kBACAiC,IAAI,GAAG,CAACjD,KAAK,GAAG,KAAK,GAAG,KAAK,IAAI,KAAK;kBACtC;kBACA;kBACAkD,KAAK,GAAGtC,KAAK,CAACqC,IAAI,GAAG,IAAI,CAAC,GAAG,EAAE;kBAC/BE,OAAO,GAAGvC,KAAK,CAACqC,IAAI,GAAG,GAAG,CAAC,GAAG,EAAE;kBAChCG,OAAO,GAAGxC,KAAK,CAACqC,IAAI,GAAG,GAAG,CAAC,GAAG,EAAE;kBAChCI,YAAY,GAAGJ,IAAI,GAAG,GAAG;gBAC3B,CAAC,MAAM;kBACLlC,IAAI,GAAGf,KAAK,CAACV,cAAc,CAAC,CAAC;kBAC7B0B,KAAK,GAAGhB,KAAK,CAACT,WAAW,CAAC,CAAC;kBAC3ByD,IAAI,GAAGhD,KAAK,CAACR,UAAU,CAAC,CAAC;kBACzB0D,KAAK,GAAGlD,KAAK,CAACP,WAAW,CAAC,CAAC;kBAC3B0D,OAAO,GAAGnD,KAAK,CAACN,aAAa,CAAC,CAAC;kBAC/B0D,OAAO,GAAGpD,KAAK,CAACL,aAAa,CAAC,CAAC;kBAC/B0D,YAAY,GAAGrD,KAAK,CAACJ,kBAAkB,CAAC,CAAC;gBAC3C;gBACA;gBACAI,KAAK,GAAG,CAACe,IAAI,IAAI,CAAC,IAAIA,IAAI,IAAI,GAAG,GAAG,CAACA,IAAI,GAAG,CAAC,GAAG,GAAG,GAAG,GAAG,IAAIgB,cAAc,CAAC,CAAC,EAAEhB,IAAI,GAAG,CAAC,GAAG,CAACA,IAAI,GAAGA,IAAI,CAAC,GAAGgB,cAAc,CAAC,CAAC,EAAEhB,IAAI,CAAC,IAC/H,GAAG,GAAGgB,cAAc,CAAC,CAAC,EAAEf,KAAK,GAAG,CAAC,CAAC,GAAG,GAAG,GAAGe,cAAc,CAAC,CAAC,EAAEiB,IAAI,CAAC;gBAClE;gBACA;gBACA,GAAG,GAAGjB,cAAc,CAAC,CAAC,EAAEmB,KAAK,CAAC,GAAG,GAAG,GAAGnB,cAAc,CAAC,CAAC,EAAEoB,OAAO,CAAC,GAAG,GAAG,GAAGpB,cAAc,CAAC,CAAC,EAAEqB,OAAO,CAAC;gBACpG;gBACA,GAAG,GAAGrB,cAAc,CAAC,CAAC,EAAEsB,YAAY,CAAC,GAAG,GAAG;cAC/C,CAAC,MAAM;gBACLrD,KAAK,GAAG,IAAI;cACd;YACF,CAAC,MAAM,IAAI,OAAOA,KAAK,CAACG,MAAM,IAAI,UAAU,KAAM4C,SAAS,IAAIxC,WAAW,IAAIwC,SAAS,IAAIvC,WAAW,IAAIuC,SAAS,IAAItC,UAAU,IAAKvB,UAAU,CAAC3F,IAAI,CAACyG,KAAK,EAAE,QAAQ,CAAC,CAAC,EAAE;cACvK;cACA;cACA;cACA;cACAA,KAAK,GAAGA,KAAK,CAACG,MAAM,CAACc,QAAQ,CAAC;YAChC;UACF;UACA,IAAIK,QAAQ,EAAE;YACZ;YACA;YACAtB,KAAK,GAAGsB,QAAQ,CAAC/H,IAAI,CAAC8H,MAAM,EAAEJ,QAAQ,EAAEjB,KAAK,CAAC;UAChD;UACA,IAAIA,KAAK,KAAK,IAAI,EAAE;YAClB,OAAO,MAAM;UACf;UACA+C,SAAS,GAAG9D,QAAQ,CAAC1F,IAAI,CAACyG,KAAK,CAAC;UAChC,IAAI+C,SAAS,IAAIrC,YAAY,EAAE;YAC7B;YACA,OAAO,EAAE,GAAGV,KAAK;UACnB,CAAC,MAAM,IAAI+C,SAAS,IAAIxC,WAAW,EAAE;YACnC;YACA;YACA,OAAOP,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC,IAAIA,KAAK,GAAG,CAAC,GAAG,CAAC,GAAG,EAAE,GAAGA,KAAK,GAAG,MAAM;UAC9D,CAAC,MAAM,IAAI+C,SAAS,IAAIvC,WAAW,EAAE;YACnC;YACA,OAAO0B,KAAK,CAAC,EAAE,GAAGlC,KAAK,CAAC;UAC1B;UACA;UACA,IAAI,OAAOA,KAAK,IAAI,QAAQ,EAAE;YAC5B;YACA;YACA,KAAKlG,MAAM,GAAGgJ,KAAK,CAAChJ,MAAM,EAAEA,MAAM,EAAE,GAAG;cACrC,IAAIgJ,KAAK,CAAChJ,MAAM,CAAC,KAAKkG,KAAK,EAAE;gBAC3B;gBACA,MAAMrB,SAAS,CAAC,CAAC;cACnB;YACF;YACA;YACAmE,KAAK,CAAClG,IAAI,CAACoD,KAAK,CAAC;YACjBsD,OAAO,GAAG,EAAE;YACZ;YACAtL,MAAM,GAAG6K,WAAW;YACpBA,WAAW,IAAID,UAAU;YACzB,IAAIG,SAAS,IAAItC,UAAU,EAAE;cAC3B;cACA,KAAK0B,KAAK,GAAG,CAAC,EAAErI,MAAM,GAAGkG,KAAK,CAAClG,MAAM,EAAEqI,KAAK,GAAGrI,MAAM,EAAEqI,KAAK,EAAE,EAAE;gBAC9DoB,OAAO,GAAGb,SAAS,CAACP,KAAK,EAAEnC,KAAK,EAAEsB,QAAQ,EAAEqB,UAAU,EAAEC,UAAU,EAAEC,WAAW,EAAEC,KAAK,CAAC;gBACvFQ,OAAO,CAAC1G,IAAI,CAAC2G,OAAO,KAAKnE,KAAK,GAAG,MAAM,GAAGmE,OAAO,CAAC;cACpD;cACAnC,MAAM,GAAGkC,OAAO,CAACxJ,MAAM,GAAI8I,UAAU,GAAG,KAAK,GAAGC,WAAW,GAAGS,OAAO,CAACE,IAAI,CAAC,KAAK,GAAGX,WAAW,CAAC,GAAG,IAAI,GAAG7K,MAAM,GAAG,GAAG,GAAI,GAAG,GAAGsL,OAAO,CAACE,IAAI,CAAC,GAAG,CAAC,GAAG,GAAI,GAAI,IAAI;YACjK,CAAC,MAAM;cACL;cACA;cACA;cACArE,OAAO,CAACwD,UAAU,IAAI3C,KAAK,EAAE,UAAUiB,QAAQ,EAAE;gBAC/C,IAAIsC,OAAO,GAAGb,SAAS,CAACzB,QAAQ,EAAEjB,KAAK,EAAEsB,QAAQ,EAAEqB,UAAU,EAAEC,UAAU,EAAEC,WAAW,EAAEC,KAAK,CAAC;gBAC9F,IAAIS,OAAO,KAAKnE,KAAK,EAAE;kBACrB;kBACA;kBACA;kBACA;kBACA;kBACA;kBACAkE,OAAO,CAAC1G,IAAI,CAACsF,KAAK,CAACjB,QAAQ,CAAC,GAAG,GAAG,IAAI2B,UAAU,GAAG,GAAG,GAAG,EAAE,CAAC,GAAGW,OAAO,CAAC;gBACzE;cACF,CAAC,CAAC;cACFnC,MAAM,GAAGkC,OAAO,CAACxJ,MAAM,GAAI8I,UAAU,GAAG,KAAK,GAAGC,WAAW,GAAGS,OAAO,CAACE,IAAI,CAAC,KAAK,GAAGX,WAAW,CAAC,GAAG,IAAI,GAAG7K,MAAM,GAAG,GAAG,GAAI,GAAG,GAAGsL,OAAO,CAACE,IAAI,CAAC,GAAG,CAAC,GAAG,GAAI,GAAI,IAAI;YACjK;YACA;YACAV,KAAK,CAACW,GAAG,CAAC,CAAC;YACX,OAAOrC,MAAM;UACf;QACF,CAAC;;QAED;QACApD,OAAO,CAACc,SAAS,GAAG,UAAU4E,MAAM,EAAEC,MAAM,EAAE3B,KAAK,EAAE;UACnD,IAAIY,UAAU,EAAEtB,QAAQ,EAAEqB,UAAU,EAAEI,SAAS;UAC/C,IAAIjF,WAAW,CAAC,OAAO6F,MAAM,CAAC,IAAIA,MAAM,EAAE;YACxC,IAAI,CAACZ,SAAS,GAAG9D,QAAQ,CAAC1F,IAAI,CAACoK,MAAM,CAAC,KAAKtD,aAAa,EAAE;cACxDiB,QAAQ,GAAGqC,MAAM;YACnB,CAAC,MAAM,IAAIZ,SAAS,IAAItC,UAAU,EAAE;cAClC;cACAkC,UAAU,GAAG,CAAC,CAAC;cACf,KAAK,IAAIR,KAAK,GAAG,CAAC,EAAErI,MAAM,GAAG6J,MAAM,CAAC7J,MAAM,EAAEkG,KAAK,EAAEmC,KAAK,GAAGrI,MAAM,EAAEkG,KAAK,GAAG2D,MAAM,CAACxB,KAAK,EAAE,CAAC,EAAE,CAAEY,SAAS,GAAG9D,QAAQ,CAAC1F,IAAI,CAACyG,KAAK,CAAC,EAAG+C,SAAS,IAAIvC,WAAW,IAAIuC,SAAS,IAAIxC,WAAW,MAAMoC,UAAU,CAAC3C,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC;YACpN;UACF;UACA,IAAIgC,KAAK,EAAE;YACT,IAAI,CAACe,SAAS,GAAG9D,QAAQ,CAAC1F,IAAI,CAACyI,KAAK,CAAC,KAAKzB,WAAW,EAAE;cACrD;cACA;cACA,IAAI,CAACyB,KAAK,IAAIA,KAAK,GAAG,CAAC,IAAI,CAAC,EAAE;gBAC5B,KAAKY,UAAU,GAAG,EAAE,EAAEZ,KAAK,GAAG,EAAE,KAAKA,KAAK,GAAG,EAAE,CAAC,EAAEY,UAAU,CAAC9I,MAAM,GAAGkI,KAAK,EAAEY,UAAU,IAAI,GAAG,CAAC;cACjG;YACF,CAAC,MAAM,IAAIG,SAAS,IAAIvC,WAAW,EAAE;cACnCoC,UAAU,GAAGZ,KAAK,CAAClI,MAAM,IAAI,EAAE,GAAGkI,KAAK,GAAGA,KAAK,CAAC1I,KAAK,CAAC,CAAC,EAAE,EAAE,CAAC;YAC9D;UACF;UACA;UACA;UACA;UACA,OAAOoJ,SAAS,CAAC,EAAE,GAAG1C,KAAK,GAAG,CAAC,CAAC,EAAEA,KAAK,CAAC,EAAE,CAAC,GAAG0D,MAAM,EAAE1D,KAAK,GAAGsB,QAAQ,EAAEqB,UAAU,EAAEC,UAAU,EAAE,EAAE,EAAE,EAAE,CAAC;QACzG,CAAC;MACH;;MAEA;MACA,IAAI,CAAC9C,GAAG,CAAC,YAAY,CAAC,EAAE;QACtB,IAAI8D,YAAY,GAAGnF,MAAM,CAACmF,YAAY;;QAEtC;QACA;QACA,IAAIC,SAAS,GAAG;UACd,EAAE,EAAE,IAAI;UACR,EAAE,EAAE,GAAG;UACP,EAAE,EAAE,GAAG;UACP,EAAE,EAAE,IAAI;UACR,GAAG,EAAE,IAAI;UACT,GAAG,EAAE,IAAI;UACT,GAAG,EAAE,IAAI;UACT,GAAG,EAAE;QACP,CAAC;;QAED;QACA,IAAIC,KAAK,EAAEC,MAAM;;QAEjB;QACA,IAAIC,KAAK,GAAG,SAAAA,CAAA,EAAY;UACtBF,KAAK,GAAGC,MAAM,GAAG,IAAI;UACrB,MAAMrF,WAAW,CAAC,CAAC;QACrB,CAAC;;QAED;QACA;QACA;QACA,IAAIuF,GAAG,GAAG,SAAAA,CAAA,EAAY;UACpB,IAAIP,MAAM,GAAGK,MAAM;YAAEjK,MAAM,GAAG4J,MAAM,CAAC5J,MAAM;YAAEkG,KAAK;YAAEkE,KAAK;YAAEC,QAAQ;YAAEC,QAAQ;YAAE7B,QAAQ;UACvF,OAAOuB,KAAK,GAAGhK,MAAM,EAAE;YACrByI,QAAQ,GAAGmB,MAAM,CAAClB,UAAU,CAACsB,KAAK,CAAC;YACnC,QAAQvB,QAAQ;cACd,KAAK,CAAC;cAAE,KAAK,EAAE;cAAE,KAAK,EAAE;cAAE,KAAK,EAAE;gBAC/B;gBACA;gBACAuB,KAAK,EAAE;gBACP;cACF,KAAK,GAAG;cAAE,KAAK,GAAG;cAAE,KAAK,EAAE;cAAE,KAAK,EAAE;cAAE,KAAK,EAAE;cAAE,KAAK,EAAE;gBACpD;gBACA;gBACA9D,KAAK,GAAGW,cAAc,GAAG+C,MAAM,CAACjB,MAAM,CAACqB,KAAK,CAAC,GAAGJ,MAAM,CAACI,KAAK,CAAC;gBAC7DA,KAAK,EAAE;gBACP,OAAO9D,KAAK;cACd,KAAK,EAAE;gBACL;gBACA;gBACA;gBACA;gBACA,KAAKA,KAAK,GAAG,GAAG,EAAE8D,KAAK,EAAE,EAAEA,KAAK,GAAGhK,MAAM,GAAG;kBAC1CyI,QAAQ,GAAGmB,MAAM,CAAClB,UAAU,CAACsB,KAAK,CAAC;kBACnC,IAAIvB,QAAQ,GAAG,EAAE,EAAE;oBACjB;oBACA;oBACAyB,KAAK,CAAC,CAAC;kBACT,CAAC,MAAM,IAAIzB,QAAQ,IAAI,EAAE,EAAE;oBACzB;oBACA;oBACA;oBACAA,QAAQ,GAAGmB,MAAM,CAAClB,UAAU,CAAC,EAAEsB,KAAK,CAAC;oBACrC,QAAQvB,QAAQ;sBACd,KAAK,EAAE;sBAAE,KAAK,EAAE;sBAAE,KAAK,EAAE;sBAAE,KAAK,EAAE;sBAAE,KAAK,GAAG;sBAAE,KAAK,GAAG;sBAAE,KAAK,GAAG;sBAAE,KAAK,GAAG;wBACxE;wBACAvC,KAAK,IAAI6D,SAAS,CAACtB,QAAQ,CAAC;wBAC5BuB,KAAK,EAAE;wBACP;sBACF,KAAK,GAAG;wBACN;wBACA;wBACA;wBACAI,KAAK,GAAG,EAAEJ,KAAK;wBACf,KAAKK,QAAQ,GAAGL,KAAK,GAAG,CAAC,EAAEA,KAAK,GAAGK,QAAQ,EAAEL,KAAK,EAAE,EAAE;0BACpDvB,QAAQ,GAAGmB,MAAM,CAAClB,UAAU,CAACsB,KAAK,CAAC;0BACnC;0BACA;0BACA,IAAI,EAAEvB,QAAQ,IAAI,EAAE,IAAIA,QAAQ,IAAI,EAAE,IAAIA,QAAQ,IAAI,EAAE,IAAIA,QAAQ,IAAI,GAAG,IAAIA,QAAQ,IAAI,EAAE,IAAIA,QAAQ,IAAI,EAAE,CAAC,EAAE;4BAChH;4BACAyB,KAAK,CAAC,CAAC;0BACT;wBACF;wBACA;wBACAhE,KAAK,IAAI4D,YAAY,CAAC,IAAI,GAAGF,MAAM,CAACpK,KAAK,CAAC4K,KAAK,EAAEJ,KAAK,CAAC,CAAC;wBACxD;sBACF;wBACE;wBACAE,KAAK,CAAC,CAAC;oBACX;kBACF,CAAC,MAAM;oBACL,IAAIzB,QAAQ,IAAI,EAAE,EAAE;sBAClB;sBACA;sBACA;oBACF;oBACAA,QAAQ,GAAGmB,MAAM,CAAClB,UAAU,CAACsB,KAAK,CAAC;oBACnCI,KAAK,GAAGJ,KAAK;oBACb;oBACA,OAAOvB,QAAQ,IAAI,EAAE,IAAIA,QAAQ,IAAI,EAAE,IAAIA,QAAQ,IAAI,EAAE,EAAE;sBACzDA,QAAQ,GAAGmB,MAAM,CAAClB,UAAU,CAAC,EAAEsB,KAAK,CAAC;oBACvC;oBACA;oBACA9D,KAAK,IAAI0D,MAAM,CAACpK,KAAK,CAAC4K,KAAK,EAAEJ,KAAK,CAAC;kBACrC;gBACF;gBACA,IAAIJ,MAAM,CAAClB,UAAU,CAACsB,KAAK,CAAC,IAAI,EAAE,EAAE;kBAClC;kBACAA,KAAK,EAAE;kBACP,OAAO9D,KAAK;gBACd;gBACA;gBACAgE,KAAK,CAAC,CAAC;cACT;gBACE;gBACAE,KAAK,GAAGJ,KAAK;gBACb;gBACA,IAAIvB,QAAQ,IAAI,EAAE,EAAE;kBAClB6B,QAAQ,GAAG,IAAI;kBACf7B,QAAQ,GAAGmB,MAAM,CAAClB,UAAU,CAAC,EAAEsB,KAAK,CAAC;gBACvC;gBACA;gBACA,IAAIvB,QAAQ,IAAI,EAAE,IAAIA,QAAQ,IAAI,EAAE,EAAE;kBACpC;kBACA,IAAIA,QAAQ,IAAI,EAAE,KAAMA,QAAQ,GAAGmB,MAAM,CAAClB,UAAU,CAACsB,KAAK,GAAG,CAAC,CAAC,EAAGvB,QAAQ,IAAI,EAAE,IAAIA,QAAQ,IAAI,EAAE,CAAC,EAAE;oBACnG;oBACAyB,KAAK,CAAC,CAAC;kBACT;kBACAI,QAAQ,GAAG,KAAK;kBAChB;kBACA,OAAON,KAAK,GAAGhK,MAAM,KAAMyI,QAAQ,GAAGmB,MAAM,CAAClB,UAAU,CAACsB,KAAK,CAAC,EAAGvB,QAAQ,IAAI,EAAE,IAAIA,QAAQ,IAAI,EAAE,CAAC,EAAEuB,KAAK,EAAE,CAAC;kBAC5G;kBACA;kBACA,IAAIJ,MAAM,CAAClB,UAAU,CAACsB,KAAK,CAAC,IAAI,EAAE,EAAE;oBAClCK,QAAQ,GAAG,EAAEL,KAAK;oBAClB;oBACA,OAAOK,QAAQ,GAAGrK,MAAM,KAAMyI,QAAQ,GAAGmB,MAAM,CAAClB,UAAU,CAAC2B,QAAQ,CAAC,EAAG5B,QAAQ,IAAI,EAAE,IAAIA,QAAQ,IAAI,EAAE,CAAC,EAAE4B,QAAQ,EAAE,CAAC;oBACrH,IAAIA,QAAQ,IAAIL,KAAK,EAAE;sBACrB;sBACAE,KAAK,CAAC,CAAC;oBACT;oBACAF,KAAK,GAAGK,QAAQ;kBAClB;kBACA;kBACA;kBACA5B,QAAQ,GAAGmB,MAAM,CAAClB,UAAU,CAACsB,KAAK,CAAC;kBACnC,IAAIvB,QAAQ,IAAI,GAAG,IAAIA,QAAQ,IAAI,EAAE,EAAE;oBACrCA,QAAQ,GAAGmB,MAAM,CAAClB,UAAU,CAAC,EAAEsB,KAAK,CAAC;oBACrC;oBACA;oBACA,IAAIvB,QAAQ,IAAI,EAAE,IAAIA,QAAQ,IAAI,EAAE,EAAE;sBACpCuB,KAAK,EAAE;oBACT;oBACA;oBACA,KAAKK,QAAQ,GAAGL,KAAK,EAAEK,QAAQ,GAAGrK,MAAM,KAAMyI,QAAQ,GAAGmB,MAAM,CAAClB,UAAU,CAAC2B,QAAQ,CAAC,EAAG5B,QAAQ,IAAI,EAAE,IAAIA,QAAQ,IAAI,EAAE,CAAC,EAAE4B,QAAQ,EAAE,CAAC;oBACrI,IAAIA,QAAQ,IAAIL,KAAK,EAAE;sBACrB;sBACAE,KAAK,CAAC,CAAC;oBACT;oBACAF,KAAK,GAAGK,QAAQ;kBAClB;kBACA;kBACA,OAAO,CAACT,MAAM,CAACpK,KAAK,CAAC4K,KAAK,EAAEJ,KAAK,CAAC;gBACpC;gBACA;gBACA,IAAIM,QAAQ,EAAE;kBACZJ,KAAK,CAAC,CAAC;gBACT;gBACA;gBACA,IAAIN,MAAM,CAACpK,KAAK,CAACwK,KAAK,EAAEA,KAAK,GAAG,CAAC,CAAC,IAAI,MAAM,EAAE;kBAC5CA,KAAK,IAAI,CAAC;kBACV,OAAO,IAAI;gBACb,CAAC,MAAM,IAAIJ,MAAM,CAACpK,KAAK,CAACwK,KAAK,EAAEA,KAAK,GAAG,CAAC,CAAC,IAAI,OAAO,EAAE;kBACpDA,KAAK,IAAI,CAAC;kBACV,OAAO,KAAK;gBACd,CAAC,MAAM,IAAIJ,MAAM,CAACpK,KAAK,CAACwK,KAAK,EAAEA,KAAK,GAAG,CAAC,CAAC,IAAI,MAAM,EAAE;kBACnDA,KAAK,IAAI,CAAC;kBACV,OAAO,IAAI;gBACb;gBACA;gBACAE,KAAK,CAAC,CAAC;YACX;UACF;UACA;UACA;UACA,OAAO,GAAG;QACZ,CAAC;;QAED;QACA,IAAIK,GAAG,GAAG,SAAAA,CAAUrE,KAAK,EAAE;UACzB,IAAIsD,OAAO,EAAEgB,UAAU;UACvB,IAAItE,KAAK,IAAI,GAAG,EAAE;YAChB;YACAgE,KAAK,CAAC,CAAC;UACT;UACA,IAAI,OAAOhE,KAAK,IAAI,QAAQ,EAAE;YAC5B,IAAI,CAACW,cAAc,GAAGX,KAAK,CAACyC,MAAM,CAAC,CAAC,CAAC,GAAGzC,KAAK,CAAC,CAAC,CAAC,KAAK,GAAG,EAAE;cACxD;cACA,OAAOA,KAAK,CAAC1G,KAAK,CAAC,CAAC,CAAC;YACvB;YACA;YACA,IAAI0G,KAAK,IAAI,GAAG,EAAE;cAChB;cACAsD,OAAO,GAAG,EAAE;cACZ,QAAQgB,UAAU,KAAKA,UAAU,GAAG,IAAI,CAAC,EAAE;gBACzCtE,KAAK,GAAGiE,GAAG,CAAC,CAAC;gBACb;gBACA,IAAIjE,KAAK,IAAI,GAAG,EAAE;kBAChB;gBACF;gBACA;gBACA;gBACA;gBACA,IAAIsE,UAAU,EAAE;kBACd,IAAItE,KAAK,IAAI,GAAG,EAAE;oBAChBA,KAAK,GAAGiE,GAAG,CAAC,CAAC;oBACb,IAAIjE,KAAK,IAAI,GAAG,EAAE;sBAChB;sBACAgE,KAAK,CAAC,CAAC;oBACT;kBACF,CAAC,MAAM;oBACL;oBACAA,KAAK,CAAC,CAAC;kBACT;gBACF;gBACA;gBACA,IAAIhE,KAAK,IAAI,GAAG,EAAE;kBAChBgE,KAAK,CAAC,CAAC;gBACT;gBACAV,OAAO,CAAC1G,IAAI,CAACyH,GAAG,CAACrE,KAAK,CAAC,CAAC;cAC1B;cACA,OAAOsD,OAAO;YAChB,CAAC,MAAM,IAAItD,KAAK,IAAI,GAAG,EAAE;cACvB;cACAsD,OAAO,GAAG,CAAC,CAAC;cACZ,QAAQgB,UAAU,KAAKA,UAAU,GAAG,IAAI,CAAC,EAAE;gBACzCtE,KAAK,GAAGiE,GAAG,CAAC,CAAC;gBACb;gBACA,IAAIjE,KAAK,IAAI,GAAG,EAAE;kBAChB;gBACF;gBACA;gBACA;gBACA,IAAIsE,UAAU,EAAE;kBACd,IAAItE,KAAK,IAAI,GAAG,EAAE;oBAChBA,KAAK,GAAGiE,GAAG,CAAC,CAAC;oBACb,IAAIjE,KAAK,IAAI,GAAG,EAAE;sBAChB;sBACAgE,KAAK,CAAC,CAAC;oBACT;kBACF,CAAC,MAAM;oBACL;oBACAA,KAAK,CAAC,CAAC;kBACT;gBACF;gBACA;gBACA;gBACA;gBACA,IAAIhE,KAAK,IAAI,GAAG,IAAI,OAAOA,KAAK,IAAI,QAAQ,IAAI,CAACW,cAAc,GAAGX,KAAK,CAACyC,MAAM,CAAC,CAAC,CAAC,GAAGzC,KAAK,CAAC,CAAC,CAAC,KAAK,GAAG,IAAIiE,GAAG,CAAC,CAAC,IAAI,GAAG,EAAE;kBACpHD,KAAK,CAAC,CAAC;gBACT;gBACAV,OAAO,CAACtD,KAAK,CAAC1G,KAAK,CAAC,CAAC,CAAC,CAAC,GAAG+K,GAAG,CAACJ,GAAG,CAAC,CAAC,CAAC;cACtC;cACA,OAAOX,OAAO;YAChB;YACA;YACAU,KAAK,CAAC,CAAC;UACT;UACA,OAAOhE,KAAK;QACd,CAAC;;QAED;QACA,IAAIuE,MAAM,GAAG,SAAAA,CAAUb,MAAM,EAAEzC,QAAQ,EAAEK,QAAQ,EAAE;UACjD,IAAIiC,OAAO,GAAGiB,IAAI,CAACd,MAAM,EAAEzC,QAAQ,EAAEK,QAAQ,CAAC;UAC9C,IAAIiC,OAAO,KAAKnE,KAAK,EAAE;YACrB,OAAOsE,MAAM,CAACzC,QAAQ,CAAC;UACzB,CAAC,MAAM;YACLyC,MAAM,CAACzC,QAAQ,CAAC,GAAGsC,OAAO;UAC5B;QACF,CAAC;;QAED;QACA;QACA;QACA,IAAIiB,IAAI,GAAG,SAAAA,CAAUd,MAAM,EAAEzC,QAAQ,EAAEK,QAAQ,EAAE;UAC/C,IAAItB,KAAK,GAAG0D,MAAM,CAACzC,QAAQ,CAAC;YAAEnH,MAAM;UACpC,IAAI,OAAOkG,KAAK,IAAI,QAAQ,IAAIA,KAAK,EAAE;YACrC;YACA;YACA;YACA,IAAIf,QAAQ,CAAC1F,IAAI,CAACyG,KAAK,CAAC,IAAIS,UAAU,EAAE;cACtC,KAAK3G,MAAM,GAAGkG,KAAK,CAAClG,MAAM,EAAEA,MAAM,EAAE,GAAG;gBACrCyK,MAAM,CAACvE,KAAK,EAAElG,MAAM,EAAEwH,QAAQ,CAAC;cACjC;YACF,CAAC,MAAM;cACLnC,OAAO,CAACa,KAAK,EAAE,UAAUiB,QAAQ,EAAE;gBACjCsD,MAAM,CAACvE,KAAK,EAAEiB,QAAQ,EAAEK,QAAQ,CAAC;cACnC,CAAC,CAAC;YACJ;UACF;UACA,OAAOA,QAAQ,CAAC/H,IAAI,CAACmK,MAAM,EAAEzC,QAAQ,EAAEjB,KAAK,CAAC;QAC/C,CAAC;;QAED;QACAhC,OAAO,CAACe,KAAK,GAAG,UAAU2E,MAAM,EAAEpC,QAAQ,EAAE;UAC1C,IAAIF,MAAM,EAAEpB,KAAK;UACjB8D,KAAK,GAAG,CAAC;UACTC,MAAM,GAAG,EAAE,GAAGL,MAAM;UACpBtC,MAAM,GAAGiD,GAAG,CAACJ,GAAG,CAAC,CAAC,CAAC;UACnB;UACA,IAAIA,GAAG,CAAC,CAAC,IAAI,GAAG,EAAE;YAChBD,KAAK,CAAC,CAAC;UACT;UACA;UACAF,KAAK,GAAGC,MAAM,GAAG,IAAI;UACrB,OAAOzC,QAAQ,IAAIrC,QAAQ,CAAC1F,IAAI,CAAC+H,QAAQ,CAAC,IAAIjB,aAAa,GAAGmE,IAAI,EAAExE,KAAK,GAAG,CAAC,CAAC,EAAEA,KAAK,CAAC,EAAE,CAAC,GAAGoB,MAAM,EAAEpB,KAAK,GAAG,EAAE,EAAEsB,QAAQ,CAAC,GAAGF,MAAM;QACpI,CAAC;MACH;IACF;IAEApD,OAAO,CAAC,cAAc,CAAC,GAAGM,YAAY;IACtC,OAAON,OAAO;EAChB;EAEA,IAAID,WAAW,IAAI,CAACJ,QAAQ,EAAE;IAC5B;IACAW,YAAY,CAACJ,IAAI,EAAEH,WAAW,CAAC;EACjC,CAAC,MAAM;IACL;IACA,IAAIc,UAAU,GAAGX,IAAI,CAACuG,IAAI;MACtBC,YAAY,GAAGxG,IAAI,CAAC,OAAO,CAAC;MAC5ByG,UAAU,GAAG,KAAK;IAEtB,IAAIC,KAAK,GAAGtG,YAAY,CAACJ,IAAI,EAAGA,IAAI,CAAC,OAAO,CAAC,GAAG;MAC9C;MACA;MACA,YAAY,EAAE,SAAA2G,CAAA,EAAY;QACxB,IAAI,CAACF,UAAU,EAAE;UACfA,UAAU,GAAG,IAAI;UACjBzG,IAAI,CAACuG,IAAI,GAAG5F,UAAU;UACtBX,IAAI,CAAC,OAAO,CAAC,GAAGwG,YAAY;UAC5B7F,UAAU,GAAG6F,YAAY,GAAG,IAAI;QAClC;QACA,OAAOE,KAAK;MACd;IACF,CAAE,CAAC;IAEH1G,IAAI,CAACuG,IAAI,GAAG;MACV,OAAO,EAAEG,KAAK,CAAC7F,KAAK;MACpB,WAAW,EAAE6F,KAAK,CAAC9F;IACrB,CAAC;EACH;;EAEA;EACA,IAAInB,QAAQ,EAAE;IACZC,MAAM,CAAC,YAAY;MACjB,OAAOgH,KAAK;IACd,CAAC,CAAC;EACJ;AACF,CAAC,EAAErL,IAAI,CAAC,IAAI,CAAC;;AAEb;AACA;AACA;;AAEC,aAAY;EAEZ;AACD;AACA;AACA;AACA;EACC,IAAIlC,CAAC,GAAG,CAAC,CAAC;EAEVA,CAAC,CAACyN,CAAC,GAAG,YAAW;IAChB,OAAOzN,CAAC,CAAC0N,EAAE,CAAC,GAAG,CAAC;EACjB,CAAC;EAED1N,CAAC,CAAC2N,GAAG,GAAG,YAAW;IAClB,OAAO3N,CAAC,CAAC0N,EAAE,CAAC,KAAK,CAAC;EACnB,CAAC;EAED1N,CAAC,CAACgK,MAAM,GAAG,YAAW;IACrB,OAAOhK,CAAC,CAAC0N,EAAE,CAAC,QAAQ,CAAC;EACtB,CAAC;EAED1N,CAAC,CAAC4N,KAAK,GAAG,YAAW;IACpB,OAAO5N,CAAC,CAAC0N,EAAE,CAAC,OAAO,CAAC;EACrB,CAAC;EAED1N,CAAC,CAAC6N,GAAG,GAAG,YAAW;IAClB,OAAO7N,CAAC,CAAC0N,EAAE,CAAC,KAAK,CAAC;EACnB,CAAC;EAED1N,CAAC,CAAC8N,KAAK,GAAG,YAAW;IACpB,OAAO9N,CAAC,CAAC0N,EAAE,CAAC,OAAO,CAAC;EACrB,CAAC;EAED1N,CAAC,CAAC+N,IAAI,GAAG,YAAW;IACnB,OAAO/N,CAAC,CAAC0N,EAAE,CAAC,MAAM,CAAC;EACpB,CAAC;EAED1N,CAAC,CAACgO,MAAM,GAAG,YAAW;IACrB,OAAOhO,CAAC,CAAC0N,EAAE,CAAC,QAAQ,CAAC;EACtB,CAAC;EAED1N,CAAC,CAACiO,KAAK,GAAG,YAAW;IACpB,OAAOjO,CAAC,CAAC0N,EAAE,CAAC,OAAO,CAAC;EACrB,CAAC;EAED1N,CAAC,CAACkO,KAAK,GAAG,YAAW;IACpB,OAAOlO,CAAC,CAAC0N,EAAE,CAAC,OAAO,CAAC;EACrB,CAAC;EAED1N,CAAC,CAACmO,IAAI,GAAG,UAASxF,KAAK,EAAE;IACxB,OAAOyF,QAAQ,CAACC,cAAc,CAAC1F,KAAK,CAAC;EACtC,CAAC;EAED3I,CAAC,CAAC0N,EAAE,GAAG,UAASrM,IAAI,EAAE;IACrB,OAAO+M,QAAQ,CAACE,aAAa,CAACjN,IAAI,CAAC;EACpC,CAAC;EAEDtB,QAAQ,CAACwO,QAAQ,GAAGvO,CAAC;AAEtB,CAAC,EAAC,CAAC;;AAEH;AACA;AACA;;AAEC,aAAY;EAEZ;AACD;AACA;AACA;EACC,IAAIA,CAAC,GAAG,CAAC,CAAC;;EAEV;AACD;AACA;AACA;AACA;AACA;EACCA,CAAC,CAACwO,aAAa,GAAG,kBAAkB;;EAEpC;AACD;AACA;AACA;AACA;AACA;EACCxO,CAAC,CAACyO,aAAa,GAAI,YAAa;;EAEhC;AACD;AACA;AACA;AACA;AACA;AACA;EACCzO,CAAC,CAAC0O,cAAc,GAAG,uBAAuB;;EAE1C;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACC1O,CAAC,CAAC2O,QAAQ,GAAG,UAAUC,IAAI,EAAE;IAC5B,IAAIC,IAAI,GAAG;MACVC,QAAQ,EAAE,KAAK;MACfC,QAAQ,EAAE,KAAK;MACfC,QAAQ,EAAE,IAAI;MACdC,QAAQ,EAAE,IAAI;MACdC,IAAI,EAAE,IAAI;MACVC,QAAQ,EAAE,IAAI;MACdC,MAAM,EAAE,IAAI;MACZC,IAAI,EAAE,IAAI;MACVC,IAAI,EAAE;IACP,CAAC;IAED,IAAIV,IAAI,IAAI,IAAI,EAAE;MAAE,OAAOC,IAAI;IAAE;;IAEjC;IACA,IAAIU,MAAM,GAAGxP,QAAQ,CAACwO,QAAQ,CAACd,CAAC,CAAC,CAAC;IAClC8B,MAAM,CAACC,IAAI,GAAGZ,IAAI;IAElB,KAAK,IAAI3N,CAAC,IAAI4N,IAAI,EAAE;MACnB,IAAI5N,CAAC,IAAIsO,MAAM,EAAE;QAChBV,IAAI,CAAC5N,CAAC,CAAC,GAAGsO,MAAM,CAACtO,CAAC,CAAC;MACpB;IACD;;IAEA;IACA,IAAIwO,UAAU,GAAGb,IAAI,CAACxM,OAAO,CAAC,GAAG,CAAC;IAClC,IAAIqN,UAAU,GAAG,CAAC,CAAC,EAAE;MACpBb,IAAI,GAAGA,IAAI,CAACc,MAAM,CAAC,CAAC,EAAED,UAAU,CAAC;IAClC;;IAEA;IACA,IAAIE,KAAK;IACT,IAAI3P,CAAC,CAACwO,aAAa,CAACoB,IAAI,CAAChB,IAAI,CAAC,EAAE;MAC/BC,IAAI,CAACC,QAAQ,GAAG,IAAI;;MAEpB;IACD,CAAC,MAAM,IAAI9O,CAAC,CAACyO,aAAa,CAACmB,IAAI,CAAChB,IAAI,CAAC,EAAE;MACtCC,IAAI,CAACE,QAAQ,GAAG,IAAI;IACrB;;IAEA;IACA,IAAIY,KAAK,GAAGf,IAAI,CAACe,KAAK,CAAC3P,CAAC,CAAC0O,cAAc,CAAC,EAAE;MACzCG,IAAI,CAACgB,SAAS,GAAGF,KAAK,CAAC,CAAC,CAAC,CAACG,WAAW,CAAC,CAAC;IACxC;IAEA,OAAOjB,IAAI;EACZ,CAAC;;EAED;AACD;AACA;AACA;AACA;AACA;AACA;EACC7O,CAAC,CAAC+P,iBAAiB,GAAG,UAAU3L,IAAI,EAAE4L,KAAK,EAAE;IAC5C,IAAI5L,IAAI,IAAI,IAAI,EAAE;MACjB,MAAM,IAAI6L,KAAK,CAAC,wBAAwB,CAAC;IAC1C;IACA,IAAIC,MAAM,GAAG,EAAE;IACf,KAAK,IAAIjP,CAAC,IAAImD,IAAI,EAAE;MACnB8L,MAAM,CAAC3K,IAAI,CAACtE,CAAC,GAAG,GAAG,GAAGkP,MAAM,CAAC/L,IAAI,CAACnD,CAAC,CAAC,CAAC,CAAC;IACvC;IACA,IAAI+O,KAAK,EAAE;MACVE,MAAM,GAAGA,MAAM,CAAC/N,MAAM,CAAC6N,KAAK,CAAC;IAC9B;IACA,OAAOE,MAAM,CAAC/D,IAAI,CAAC,GAAG,CAAC;EACxB,CAAC;;EAED;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACCnM,CAAC,CAACoQ,QAAQ,GAAG,UAAUC,GAAG,EAAEjM,IAAI,EAAE;IACjC,IAAIA,IAAI,IAAI,IAAI,EAAE;MACjB,OAAOiM,GAAG;IACX;IAEA,IAAIL,KAAK,GAAG,EAAE;IACd,IAAIM,GAAG,GAAGD,GAAG,CAACjO,OAAO,CAAC,GAAG,CAAC;IAE1B,IAAIkO,GAAG,IAAI,CAAC,CAAC,EAAE;MACd,IAAIC,CAAC,GAAGF,GAAG,CAACpO,KAAK,CAACqO,GAAG,GAAG,CAAC,CAAC;MAC1BN,KAAK,GAAGA,KAAK,CAAC7N,MAAM,CAACoO,CAAC,CAACtF,KAAK,CAAC,GAAG,CAAC,CAAC;IACnC;IAEA,IAAIqF,GAAG,IAAI,CAAC,CAAC,EAAE;MACd,OAAOD,GAAG,CAACpO,KAAK,CAAC,CAAC,EAAEqO,GAAG,CAAC,GAAG,GAAG,GAAG,IAAI,CAACP,iBAAiB,CAAC3L,IAAI,EAAE4L,KAAK,CAAC;IACrE,CAAC,MAAM;MACN,OAAOK,GAAG,GAAG,GAAG,GAAG,IAAI,CAACN,iBAAiB,CAAC3L,IAAI,EAAE4L,KAAK,CAAC;IACvD;EACD,CAAC;;EAED;AACD;AACA;AACA;AACA;AACA;EACChQ,CAAC,CAACwQ,aAAa,GAAG,UAAUC,IAAI,EAAE;IACjC,IAAI3N,MAAM,GAAG/C,QAAQ,CAACwO,QAAQ,CAACd,CAAC,CAAC,CAAC;IAClC3K,MAAM,CAAC0M,IAAI,GAAGiB,IAAI,CAACJ,GAAG;IAEtB,IAAIf,IAAI,GAAGvP,QAAQ,CAACwO,QAAQ,CAACd,CAAC,CAAC,CAAC;IAChC6B,IAAI,CAACE,IAAI,GAAGkB,QAAQ,CAAClB,IAAI;IAEzB,IAAImB,WAAW,GAAI7N,MAAM,CAACmM,QAAQ,IAAI,EAAE,KACtCnM,MAAM,CAACoM,IAAI,IAAII,IAAI,CAACJ,IAAI,IACzBpM,MAAM,CAACkM,QAAQ,IAAIM,IAAI,CAACN,QAAQ,IAChClM,MAAM,CAACmM,QAAQ,IAAIK,IAAI,CAACL,QAAQ,CAAC;IAClC,OAAO0B,WAAW;EACnB,CAAC;;EAED;AACD;AACA;AACA;AACA;AACA;AACA;EACC3Q,CAAC,CAAC4Q,OAAO,GAAG,UAAUH,IAAI,EAAE;IAC3B,IAAI3N,MAAM,GAAG/C,QAAQ,CAACwO,QAAQ,CAACd,CAAC,CAAC,CAAC;IAClC3K,MAAM,CAAC0M,IAAI,GAAGiB,IAAI,CAACJ,GAAG;IACtB,OAAOvN,MAAM,CAACmM,QAAQ,IAAI,EAAE,IAAInM,MAAM,CAACkM,QAAQ,IAAI,OAAO;EAC3D,CAAC;EAEDjP,QAAQ,CAAC8Q,QAAQ,GAAG7Q,CAAC;AAEtB,CAAC,EAAC,CAAC;;AAEH;AACA;AACA;;AAEC,aAAY;EAEZ;AACD;AACA;AACA;EACC,IAAIA,CAAC,GAAG;IACP8Q,SAAS,EAAE;EACZ,CAAC;EAED9Q,CAAC,CAAC+Q,YAAY,GAAG,UAAUrD,EAAE,EAAE;IAC9B1N,CAAC,CAACgR,OAAO,CAAC,CAAC,CAACC,WAAW,CAACvD,EAAE,CAAC;EAC5B,CAAC;EAED1N,CAAC,CAACkR,YAAY,GAAG,UAAUxD,EAAE,EAAE;IAC9B,IAAI1N,CAAC,CAAC8Q,SAAS,IAAI,IAAI,EAAE;MACxB9Q,CAAC,CAAC8Q,SAAS,GAAG1C,QAAQ,CAACE,aAAa,CAAC,KAAK,CAAC;MAC3CtO,CAAC,CAAC8Q,SAAS,CAACK,EAAE,GAAG,qBAAqB;MACtC,IAAIrD,KAAK,GAAG9N,CAAC,CAAC8Q,SAAS,CAAChD,KAAK;MAC7BA,KAAK,CAACsD,UAAU,GAAG,QAAQ;MAC3BtD,KAAK,CAAChB,QAAQ,GAAG,UAAU;MAC3BgB,KAAK,CAACnD,KAAK,GAAG3K,CAAC,CAAC8Q,SAAS,CAAChD,KAAK,CAACuD,MAAM,GAAG,MAAM;MAC/CvD,KAAK,CAACwD,QAAQ,GAAG,QAAQ;MACzBxD,KAAK,CAACyD,SAAS,GAAGzD,KAAK,CAAC0D,WAAW,GAAG1D,KAAK,CAAC2D,eAAe,GAAG3D,KAAK,CAAC4D,UAAU,GAAG,yBAAyB,CAAC,CAAC;MAC5G1R,CAAC,CAAC2R,OAAO,CAAC,CAAC,CAACV,WAAW,CAACjR,CAAC,CAAC8Q,SAAS,CAAC;IACrC;IACA9Q,CAAC,CAAC8Q,SAAS,CAACG,WAAW,CAACvD,EAAE,CAAC;EAC5B,CAAC;EAED1N,CAAC,CAACgR,OAAO,GAAG,YAAY;IACvB,OAAO5C,QAAQ,CAACwD,IAAI,IAAIxD,QAAQ,CAACyD,oBAAoB,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;EACjE,CAAC;EAED7R,CAAC,CAAC2R,OAAO,GAAG,YAAY;IACvB,OAAOvD,QAAQ,CAAC0D,IAAI,IAAI1D,QAAQ,CAACyD,oBAAoB,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;EACjE,CAAC;EAED7R,CAAC,CAAC+R,WAAW,GAAG,UAASrE,EAAE,EAAE;IAC5B,IAAIA,EAAE,CAAC5H,MAAM,EAAE;MACd4H,EAAE,CAAC5H,MAAM,CAACiM,WAAW,CAACrE,EAAE,CAAC;IAC1B;EACD,CAAC;;EAED;AACD;AACA;AACA;AACA;AACA;AACA;EACC1N,CAAC,CAACgS,UAAU,GAAG,UAASvB,IAAI,EAAE;IAC7B,OAAOA,IAAI,YAAYwB,gBAAgB;EACxC,CAAC;;EAED;AACD;AACA;AACA;AACA;AACA;AACA;EACCjS,CAAC,CAACkS,UAAU,GAAG,UAASzB,IAAI,EAAE;IAC7B,IAAI3Q,MAAM,CAACqS,gBAAgB,EAAE;MAC5B,OAAO1B,IAAI,YAAY0B,gBAAgB;IACxC,CAAC,MAAM;MACN,OAAO,KAAK;IACb;EACD,CAAC;;EAED;AACD;AACA;AACA;AACA;AACA;AACA;EACCnS,CAAC,CAACoS,UAAU,GAAG,UAAS3B,IAAI,EAAE;IAC7B,IAAI3Q,MAAM,CAACuS,gBAAgB,EAAE;MAC5B,OAAO5B,IAAI,YAAY4B,gBAAgB;IACxC,CAAC,MAAM;MACN,OAAO,KAAK;IACb;EACD,CAAC;EAEDtS,QAAQ,CAACuS,QAAQ,GAAGtS,CAAC;AAEtB,CAAC,EAAC,CAAC;;AAEH;AACA;AACA;;AAEC,aAAY;EAEZ;AACD;AACA;AACA;EACC,IAAIA,CAAC,GAAG,CAAC,CAAC;;EAEV;EACA;AACD;AACA;AACA;AACA;AACA;AACA;EACCA,CAAC,CAACuS,QAAQ,GAAG,UAAUpE,IAAI,EAAE;IAC5B,IAAIqE,GAAG,GAAG,IAAI;IACd;;IAEA;IACA;IACA,IAAI;MACH,IAAI1S,MAAM,CAAC2S,SAAS,EAAE;QACrB,IAAIlD,MAAM,GAAG,IAAIkD,SAAS,CAAC,CAAC;QAC5BD,GAAG,GAAGjD,MAAM,CAACmD,eAAe,CAACvE,IAAI,EAAE,UAAU,CAAC;MAC/C;IACD,CAAC,CAAC,OAAOtI,CAAC,EAAE,CACZ;;IAEA;IACA,IAAI,CAAC2M,GAAG,EAAE;MACT,IAAI;QACHA,GAAG,GAAG,IAAIG,aAAa,CAAC,kBAAkB,CAAC;QAC3CH,GAAG,CAACI,KAAK,GAAG,KAAK;QACjBJ,GAAG,CAACK,OAAO,CAAC1E,IAAI,CAAC;MAClB,CAAC,CAAC,OAAOtI,CAAC,EAAE;QACX2M,GAAG,GAAG,IAAI;MACX;IACD;IAEA,OAAOA,GAAG;EACX,CAAC;;EAED;AACD;AACA;AACA;AACA;AACA;EACCxS,CAAC,CAAC8S,SAAS,GAAG,UAAUnK,KAAK,EAAE;IAC9B,IAAIA,KAAK,IAAI,IAAI,EAAE;MAClB,OAAO,IAAI;IACZ;IAEA,IAAI;MACH,OAAOyE,IAAI,CAAC1F,KAAK,CAACiB,KAAK,CAAC;IACzB,CAAC,CAAC,OAAO9C,CAAC,EAAE;MACX;MACA,MAAMA,CAAC;IACR;EACD,CAAC;EAED9F,QAAQ,CAACgT,SAAS,GAAG/S,CAAC;AAEvB,CAAC,EAAC,CAAC;;AAEH;AACA;AACA;;AAEAF,MAAM,CAACC,QAAQ,GAAGD,MAAM,CAACC,QAAQ,IAAI,CAAC,CAAC;AAEtC,aAAW;EACX,IAAIC,CAAC,GAAG,CAAC,CAAC;;EAEV;AACD;AACA;AACA;AACA;AACA;AACA;AACA;EACCA,CAAC,CAACgT,MAAM,GAAG,QAAQ;;EAEnB;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACChT,CAAC,CAACiT,GAAG,GAAG,KAAK;;EAEb;AACD;AACA;AACA;AACA;AACA;AACA;AACA;EACCjT,CAAC,CAACkT,IAAI,GAAG,MAAM;;EAEf;AACD;AACA;AACA;AACA;AACA;AACA;AACA;EACClT,CAAC,CAACmT,OAAO,GAAG,SAAS;;EAErB;AACD;AACA;AACA;AACA;AACA;AACA;AACA;EACCnT,CAAC,CAACoT,KAAK,GAAG,OAAO;;EAEjB;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACCpT,CAAC,CAACqT,UAAU,GAAG,YAAY;;EAE3B;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACCrT,CAAC,CAACoN,IAAI,GAAG,MAAM;;EAEf;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACCpN,CAAC,CAACsT,KAAK,GAAG,OAAO;;EAEjB;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACCtT,CAAC,CAACuT,QAAQ,GAAG,UAAU;;EAEvB;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACCvT,CAAC,CAACwT,KAAK,GAAG,OAAO;;EAEjB;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACCxT,CAAC,CAACyT,KAAK,GAAG,OAAO;;EAEjB;AACD;AACA;AACA;AACA;AACA;AACA;AACA;EACCzT,CAAC,CAAC0T,WAAW,GAAG,aAAa;;EAE7B;AACD;AACA;AACA;AACA;AACA;AACA;AACA;EACC1T,CAAC,CAAC2T,GAAG,GAAG,KAAK;;EAEb;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACC3T,CAAC,CAAC4T,IAAI,GAAG,MAAM;;EAEf;AACD;AACA;AACA;AACA;AACA;AACA;AACA;EACC5T,CAAC,CAAC6T,GAAG,GAAG,KAAK;EAEb9T,QAAQ,CAAC+T,KAAK,GAAG9T,CAAC;AACnB,CAAC,EAAC,CAAC;;AAEH;AACA;AACA;;AAEAF,MAAM,CAACC,QAAQ,GAAGD,MAAM,CAACC,QAAQ,IAAI,CAAC,CAAC;AAEtC,aAAW;EACX,IAAIC,CAAC,GAAG,CAAC,CAAC;;EAEV;AACD;AACA;AACA;AACA;AACA;AACA;EACCA,CAAC,CAAC+T,IAAI,GAAG,MAAM;;EAEf;AACD;AACA;AACA;AACA;AACA;AACA;EACC/T,CAAC,CAACgU,GAAG,GAAG,KAAK;EAEbjU,QAAQ,CAACkU,OAAO,GAAGjU,CAAC;AACrB,CAAC,EAAC,CAAC;;AAEH;AACA;AACA;;AAEAF,MAAM,CAACC,QAAQ,GAAGD,MAAM,CAACC,QAAQ,IAAI,CAAC,CAAC;AAEtC,aAAY;EACZ,YAAY;;EAEZ;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACC,SAASmU,QAAQA,CAAA,EAAG;IACnB;AACF;AACA;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAAC7D,GAAG,GAAG,IAAI;;IAEf;AACF;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAAC1N,IAAI,GAAG,IAAI;;IAEhB;AACF;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAACwO,EAAE,GAAG,IAAI;;IAEd;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAACgD,aAAa,GAAG,KAAK;;IAE1B;AACF;AACA;AACA;AACA;AACA;IACE,IAAI,CAAClK,QAAQ,GAAG,IAAI;;IAEpB;AACF;AACA;AACA;AACA;AACA;IACE,IAAI,CAAC7F,IAAI,GAAG,IAAI;;IAEhB;AACF;AACA;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAACvC,MAAM,GAAG9B,QAAQ,CAACkU,OAAO,CAACD,GAAG;;IAElC;AACF;AACA;AACA;AACA;AACA;IACE,IAAI,CAACI,MAAM,GAAG,IAAI;;IAElB;AACF;AACA;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,OAAO,GAAG,IAAI;;IAEnB;AACF;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,eAAe,GAAG,KAAK;;IAE5B;AACF;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,QAAQ,GAAG,IAAI;;IAEpB;AACF;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,WAAW,GAAG,IAAI;;IAEvB;AACF;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,WAAW,GAAGzU,CAAC,CAAC0U,oBAAoB;EAC1C;EAAC;EAED,IAAIlR,CAAC,GAAG0Q,QAAQ,CAACzT,SAAS,GAAG,CAAC,CAAC;EAC/B,IAAIT,CAAC,GAAGkU,QAAQ;;EAEhB;AACD;AACA;AACA;AACA;AACA;AACA;EACClU,CAAC,CAAC0U,oBAAoB,GAAG,IAAI;;EAE7B;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACC1U,CAAC,CAAC2U,MAAM,GAAG,UAAUhM,KAAK,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,CAAC;EAED7T,QAAQ,CAACgV,YAAY,GAAG/U,CAAC;AAE1B,CAAC,EAAC,CAAC;;AAEH;AACA;AACA;;AAEAF,MAAM,CAACC,QAAQ,GAAGD,MAAM,CAACC,QAAQ,IAAI,CAAC,CAAC;AAEtC,aAAY;EACZ,YAAY;;EAEb;EACC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACC,SAASiV,cAAcA,CAACC,QAAQ,EAAEC,SAAS,EAAEvS,IAAI,EAAE;IAClD,IAAI,CAACwS,2BAA2B,CAAC,CAAC;;IAElC;IACA;AACF;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAAChP,MAAM,GAAG,KAAK;;IAEnB;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAACiP,QAAQ,GAAG,KAAK;;IAErB;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAAC/O,QAAQ,GAAG,CAAC;;IAEjB;AACF;AACA;AACA;AACA;AACA;IACE,IAAI,CAAC1D,IAAI,GAAGA,IAAI;;IAEhB;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAAC0S,eAAe,GAAG,IAAI;;IAE3B;IACA;AACF;AACA;AACA;AACA;AACA;AACA;IACE,IAAIJ,QAAQ,EAAE;MACb,IAAI,CAACK,KAAK,GAAGvV,QAAQ,CAACmU,QAAQ,CAACS,MAAM,CAACM,QAAQ,CAAC;IAChD,CAAC,MAAM;MACN,IAAI,CAACK,KAAK,GAAG,IAAI;IAClB;;IAEA;AACF;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,UAAU,GAAGL,SAAS;;IAE3B;AACF;AACA;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAACM,OAAO,GAAG,IAAI;;IAEnB;AACF;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,UAAU,GAAG,IAAI;;IAEtB;AACF;AACA;AA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IAAI,EAAE;QAAE5G,GAAG,EAAEjN,QAAQ,CAACoB,SAAS,CAAC,YAAW;UAAE,OAAOpB,QAAQ,CAAC+T,KAAK,CAACF,IAAI;QAAE,CAAC,EAAE,qBAAqB;MAAE,CAAC;MACpGC,GAAG,EAAE;QAAE7G,GAAG,EAAEjN,QAAQ,CAACoB,SAAS,CAAC,YAAW;UAAE,OAAOpB,QAAQ,CAAC+T,KAAK,CAACD,GAAG;QAAE,CAAC,EAAE,oBAAoB;MAAE;IACjG,CAAC,CAAC;EACH,CAAC,CAAC,OAAOhO,CAAC,EAAE,CAAC;;EAEd;EACC;AACD;AACA;AACA;AACA;AACA;;EAEC;AACD;AACA;AACA;AACA;AACA;AACA;;EAEC;AACD;AACA;AACA;AACA;AACA;AACA;;EAEC;AACD;AACA;AACA;AACA;AACA;AACA;;EAEC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;EAEC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;EAEC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;;EAGC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACCrC,CAAC,CAACsS,OAAO,GAAG,YAAY;IACvB,OAAO,IAAI,CAACR,KAAK;EAClB,CAAC;;EAED;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACC9R,CAAC,CAACuS,SAAS,GAAG,UAAUC,GAAG,EAAE;IAC5B,OAAOA,GAAG,GAAG,IAAI,CAACP,UAAU,GAAG,IAAI,CAACD,OAAO;EAC5C,CAAC;;EAED;AACD;AACA;AACA;AACA;AACA;EACChS,CAAC,CAACyS,MAAM,GAAG,YAAY;IACtB,OAAO,IAAI,CAACL,IAAI;EACjB,CAAC;;EAED;AACD;AACA;AACA;AACA;AACA;EACCpS,CAAC,CAAC0S,MAAM,GAAG,UAASC,GAAG,EAAE;IACvB,IAAI,CAACP,IAAI,GAAGO,GAAG;EACjB,CAAC;;EAED;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACC3S,CAAC,CA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A;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACC,SAASwd,SAASA,CAAErI,SAAS,EAAEsI,QAAQ,EAAEhJ,WAAW,EAAE;IACrD,IAAI,CAACsD,0BAA0B,CAAC,CAAC;;IAEjC;AACF;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAAC2F,QAAQ,GAAG,EAAE;;IAElB;AACF;AACA;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,cAAc,GAAG,CAAC,CAAC;;IAExB;AACF;AACA;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,mBAAmB,GAAG,CAAC,CAAC;;IAE7B;AACF;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,IAAI,GAAG,IAAI;;IAEhB;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,mBAAmB,GAAG,IAAI;;IAE/B;AACF;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,WAAW,GAAG,KAAK;;IAExB;AACF;AACA;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,eAAe,GAAG,CAAC;;IAExB;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A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AAW;;IAE/B;AACF;AACA;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAAC6K,uBAAuB,GAAG,KAAK;;IAEpC;AACF;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,uBAAuB,GAAG,IAAI;;IAEnC;AACF;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,aAAa,GAAG,EAAE;;IAEvB;AACF;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,UAAU,GAAG,EAAE;;IAEpB;AACF;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,gBAAgB,GAAG,EAAE;;IAE1B;AACF;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,cAAc,GAAG,CAAC,CAAC;;IAExB;AACF;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,eAAe,GAAG,CAAC,CAAC;;IAEzB;AACF;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,cAAc,GAAG,CAAC,CAAC;;IAExB;AACF;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,iBAAiB,GAAG,CAAC,CAAC;;IAE3B;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,SAAS,GAAG,CAAC;;IAElB;AACF;AACA;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,eAAe,GAAG,CAAC;;IAExB;AACF;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,YAAY,GAAG,EAAE;;IAEtB;AACF;AACA;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,cAAc,GAAG,EAAE;;IAExB;AACF;AACA;AACA;AACA;AACA;AACA;IACE,IAAI,CAACC,aAAa,GAAGC,GAAG;EAEzB,CAAC;;EAEF;;EAEA;EACC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;EAEC;AACD;AACA;AACA;AACA;;EAEC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;EAEC;AACD;AACA;AACA;AACA;AACA;;EAEA;EACC;AACD;AACA;AA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"},"metadata":{},"sourceType":"script"}